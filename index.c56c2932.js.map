{"mappings":"8pBAsBA,IAAuBA,EACDC,mJArBtB,IAAIC,EAAU,GAoBdF,WAlBkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,KAelCL,WAXiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,k9KCnByCE,EAAQC,EAAUC,EAAYC,EAAYC,GAC1F,IAAIC,EAAO,GAyBX,OAxBAX,OAAkB,KAAES,GAAYG,SAAQ,SAAUC,GAChDF,EAAKE,GAAOJ,EAAWI,MAEzBF,EAAKG,aAAeH,EAAKG,WACzBH,EAAKI,eAAiBJ,EAAKI,cAEvB,UAAWJ,GAAQA,EAAKK,eAC1BL,EAAKM,UAAW,GAGlBN,EAAOH,EAAWU,QAAQC,UAAUC,QAAO,SAAUC,EAAMC,GACzD,OAAOA,GAAaA,EAAUhB,EAAQC,EAAUc,IAAiBA,IAChEV,GAECD,QAAgC,IAArBC,EAAKK,cAClBL,EAAKY,MAAQZ,EAAKK,YAAcL,EAAKK,YAAYQ,KAAKd,QAAW,EACjEC,EAAKK,iBAAcS,QAGI,IAArBd,EAAKK,cACPhB,OAA4B,eAAEM,EAAQC,EAAUI,GAChDA,EAAO,MAGFA,gGC1B+Be,GACtC,GAAIC,MAAMC,QAAQF,GAAM,OAAOA,gGCDUA,GACzC,GAAIC,MAAMC,QAAQF,GAAM,CACtB,IAAK,IAAIzB,EAAI,EAAG4B,EAAO,IAAIF,MAAMD,EAAIxB,QAASD,EAAIyB,EAAIxB,OAAQD,IAC5D4B,EAAK5B,GAAKyB,EAAIzB,GAGhB,OAAO4B,iGCNoCC,GAC7C,QAAa,IAATA,EACF,MAAM,IAAIC,eAAe,6DAG3B,OAAOD,+JCH8BE,GACrC,IAAIC,EAAOC,WAqBFC,EAAOtB,EAAKuB,GACnB,IACE,IAAIC,EAASL,EAAInB,GAAKuB,GAClBb,EAAQc,EAAOd,MACfe,EAAef,aAAiBgB,EAAAC,QACpCC,QAAQC,QAAQJ,EAAef,EAAMoB,QAAUpB,GAAOqB,MAAK,SAAUC,GAC/DP,EACFH,EAAO,OAAQU,GAIjBC,EAAOT,EAAOU,KAAO,SAAW,SAAUF,MACzC,SAAUG,GACXb,EAAO,QAASa,MAElB,MAAOA,GACPF,EAAO,QAASE,aAIXF,EAAOG,EAAM1B,GACpB,OAAQ0B,GACN,IAAK,SACHhB,EAAMS,QAAQ,CACZnB,MAAOA,EACPwB,MAAM,IAER,MAEF,IAAK,QACHd,EAAMiB,OAAO3B,GACb,cAGAU,EAAMS,QAAQ,CACZnB,MAAOA,EACPwB,MAAM,KAKZd,EAAQA,EAAMkB,MAGZhB,EAAOF,EAAMpB,IAAKoB,EAAMY,KAExBX,EAAO,KAIXkB,KAAKC,iBArESxC,EAAKgC,GACjB,OAAO,IAAIJ,SAAQ,SAAUC,EAASQ,GACpC,IAAII,EAAU,CACZzC,IAAKA,EACLgC,IAAKA,EACLH,QAASA,EACTQ,OAAQA,EACRC,KAAM,MAGJjB,EACFA,EAAOA,EAAKiB,KAAOG,GAEnBrB,EAAQC,EAAOoB,EACfnB,EAAOtB,EAAKgC,QAyDQ,mBAAfb,EAAIuB,SACbH,KAAKG,YAAS9B,GAII,mBAAX+B,QAAyBA,OAAOC,gBACzCC,EAAeC,UAAUH,OAAOC,eAAiB,WAC/C,OAAOL,OAIXM,EAAeC,UAAUR,KAAO,SAAUN,GACxC,OAAOO,KAAKC,QAAQ,OAAQR,IAG9Ba,EAAeC,UAAUC,MAAQ,SAAUf,GACzC,OAAOO,KAAKC,QAAQ,QAASR,IAG/Ba,EAAeC,UAAUJ,OAAS,SAAUV,GAC1C,OAAOO,KAAKC,QAAQ,SAAUR,oDChGItB,GAClC6B,KAAKT,QAAUpB,gGCD+BsC,EAAOC,GACrD,IAAIC,EAAO,GACTC,GAAU,WAEHC,EAAKpD,EAAKU,GAKjB,OAJAyC,GAAU,EACVzC,EAAQ,IAAIkB,SAAQ,SAAUC,GAC5BA,EAAQmB,EAAMhD,GAAKU,OAEd,CACLwB,MAAM,EACNxB,MAAOuC,EAAUvC,IAsCrB,MAhCsB,mBAAXiC,QAAyBA,OAAOU,WACzCH,EAAKP,OAAOU,UAAY,WACtB,OAAOd,OAIXW,EAAKZ,KAAO,SAAU5B,GACpB,OAAIyC,GACFA,GAAU,EACHzC,GAGF0C,EAAK,OAAQ1C,IAGK,mBAAhBsC,EAAMD,QACfG,EAAKH,MAAQ,SAAUrC,GACrB,GAAIyC,EAEF,MADAA,GAAU,EACJzC,EAGR,OAAO0C,EAAK,QAAS1C,KAIG,mBAAjBsC,EAAMN,SACfQ,EAAKR,OAAS,SAAUhC,GACtB,OAAO0C,EAAK,SAAU1C,KAInBwC,gGCjD8BI,GACrC,IAAIC,EAEJ,GAAsB,mBAAXZ,OAAuB,CAChC,GAAIA,OAAOC,eAEK,OADdW,EAASD,EAASX,OAAOC,gBACL,OAAOW,EAAO5C,KAAK2C,GAGzC,GAAIX,OAAOU,UAEK,OADdE,EAASD,EAASX,OAAOU,WACL,OAAOE,EAAO5C,KAAK2C,GAI3C,MAAM,IAAIE,UAAU,4HCfbC,EAAmBtC,EAAKU,EAASQ,EAAQqB,EAAOC,EAAQ3D,EAAKgC,GACpE,IACE,IAAI4B,EAAOzC,EAAInB,GAAKgC,GAChBtB,EAAQkD,EAAKlD,MACjB,MAAOmD,GAEP,YADAxB,EAAOwB,GAILD,EAAK1B,KACPL,EAAQnB,GAERkB,QAAQC,QAAQnB,GAAOqB,KAAK2B,EAAOC,cAIGG,GACxC,OAAO,WACL,IAAI7C,EAAOsB,KACTwB,EAAOC,UACT,OAAO,IAAIpC,SAAQ,SAAUC,EAASQ,GACpC,IAAIlB,EAAM2C,EAAGG,MAAMhD,EAAM8C,YAEhBL,EAAMhD,GACb+C,EAAmBtC,EAAKU,EAASQ,EAAQqB,EAAOC,EAAQ,OAAQjD,YAGzDiD,EAAOxB,GACdsB,EAAmBtC,EAAKU,EAASQ,EAAQqB,EAAOC,EAAQ,QAASxB,GAGnEuB,OAAM9C,oKC7BiCF,GAC3C,OAAO,IAAIgB,EAAAC,QAAWjB,oDCHgBwD,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAIX,UAAU,mICFmBY,GACzC,MAAM,IAAI5E,MAAM,UAAa4E,EAAO,mJCDQC,EAAUC,GACtD,IAAKA,EAAWC,IAAIF,GAClB,MAAM,IAAIb,UAAU,kDAGtB,OAAOc,EAAWE,IAAIH,GAAU3D,oGCLa2D,EAAUI,GACvD,IAAKtF,OAAO2D,UAAU4B,eAAe/D,KAAK0D,EAAUI,GAClD,MAAM,IAAIjB,UAAU,kDAGtB,OAAOa,gGCLqCA,EAAUC,EAAY5D,GAClE,IAAK4D,EAAWC,IAAIF,GAClB,MAAM,IAAIb,UAAU,kDAGtB,IAAI5D,EAAa0E,EAAWE,IAAIH,GAEhC,IAAKzE,EAAWQ,SACd,MAAM,IAAIoD,UAAU,4CAItB,OADA5D,EAAWc,MAAQA,EACZA,gGCZsC2D,EAAUM,EAAYb,GACnE,IAAKa,EAAWJ,IAAIF,GAClB,MAAM,IAAIb,UAAU,kDAGtB,OAAOM,kGCJP,MAAM,IAAIN,UAAU,sICDkCa,EAAUO,EAAkBhF,GAClF,GAAIyE,IAAaO,EACf,MAAM,IAAIpB,UAAU,6CAGtB,OAAO5D,EAAWc,oGCLoC2D,EAAUO,EAAkBhF,EAAYc,GAC9F,GAAI2D,IAAaO,EACf,MAAM,IAAIpB,UAAU,6CAGtB,IAAK5D,EAAWQ,SACd,MAAM,IAAIoD,UAAU,4CAItB,OADA5D,EAAWc,MAAQA,EACZA,8FCVAmE,IACP,GAAuB,oBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,mBAAVC,MAAsB,OAAO,EAExC,IAEE,OADAC,KAAKpC,UAAUqC,SAASxE,KAAKmE,QAAQC,UAAUG,KAAM,IAAI,iBAClD,EACP,MAAOE,GACP,OAAO,YAIFC,EAAUC,EAAQC,EAAMC,GAc/B,OAZEH,EADER,IACUC,QAAQC,UAER,SAAmBU,EAAQ1B,EAAM2B,GAC3C,IAAIC,EAAI,CAAC,MACTA,EAAEC,KAAK3B,MAAM0B,EAAG5B,GAChB,IACIG,EAAW,IADG2B,SAASC,KAAK7B,MAAMwB,EAAQE,IAG9C,OADID,GAAOK,gBAAgB7B,EAAUwB,EAAM5C,WACpCoB,IAIMD,MAAM,KAAMD,sBAGIyB,EAAQ1B,EAAM2B,GAC/C,OAAOL,EAAUpB,MAAM,KAAMD,uGC/BtBgC,EAAkBvG,EAAQwG,GACjC,IAAK,IAAI7G,EAAI,EAAGA,EAAI6G,EAAM5G,OAAQD,IAAK,CACrC,IAAIQ,EAAaqG,EAAM7G,GACvBQ,EAAWK,WAAaL,EAAWK,aAAc,EACjDL,EAAWM,cAAe,EACtB,UAAWN,IAAYA,EAAWQ,UAAW,GACjDjB,OAAO+G,eAAezG,EAAQG,EAAWI,IAAKJ,eAIbuE,EAAagC,EAAYC,GAG5D,OAFID,GAAYH,EAAkB7B,EAAYrB,UAAWqD,GACrDC,GAAaJ,EAAkB7B,EAAaiC,GACzCjC,4KCVyBxE,EAAY0G,EAASC,GACrD,IA8GgCC,EAAGC,EAC/BC,EA/GAC,EAAIL,GAAQ,SAAoBM,aA6HDA,EAAGH,GACtC,CAAC,SAAU,SAASzG,SAAQ,SAAU6G,GACpCJ,EAASzG,SAAQ,SAAU8G,GACrBA,EAAQD,OAASA,GAA8B,QAAtBC,EAAQC,WACnCC,EAAoBJ,EAAGE,SAhI3BG,CAA4BL,EAAGM,EAAUT,YACxCF,GAECW,WAmJkBT,EAAU7G,GAChC,IAAIuH,EAAc,GACdC,EAAY,GACZC,EAAa,CACfC,OAAQ,GACRvE,UAAW,GACXwE,IAAK,IAeP,GAbAd,EAASzG,SAAQ,SAAU8G,GACzBU,EAAqBV,EAASO,MAEhCZ,EAASzG,SAAQ,SAAU8G,GACzB,IAAKW,EAAeX,GAAU,OAAOK,EAAYtB,KAAKiB,GAEtD,IAAIY,WA+BkBZ,EAASO,GAIjC,IAHA,IAAIM,EAAS,GACTP,EAAY,GAEPxH,EAAakH,EAAQlH,WAAYP,EAAIO,EAAWN,OAAS,EAAGD,GAAK,EAAGA,IAAK,CAChF,IAAIF,EAAOkI,EAAWP,EAAQC,WAC9B5H,EAAKyI,OAAOzI,EAAK0I,QAAQf,EAAQ7G,KAAM,GAEvC,IAAI6H,EAAgBC,EAAuBjB,GAEvCkB,EAAwBC,GAAwB,EAAKrI,EAAWP,IAAIyI,IAAkBA,GAI1FN,EAFAV,EAAUkB,EAAsBlB,QAEFO,GAE1BW,EAAsBE,UACxBd,EAAUvB,KAAKmC,EAAsBE,UAGvC,IAAIC,EAAYH,EAAsBL,OAEtC,GAAIQ,EAAW,CACb,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAU7I,OAAQ8I,IACpCZ,EAAqBW,EAAUC,GAAIf,GAGrCM,EAAO9B,KAAK3B,MAAMyD,EAAQQ,IAI9B,MAAO,CACLrB,QAASA,EACTM,UAAWA,EACXO,OAAQA,GAjEqBU,CAAiBvB,EAASO,GAEvDF,EAAYtB,KAAK6B,EAAuBZ,SACxCK,EAAYtB,KAAK3B,MAAMiD,EAAaO,EAAuBC,QAC3DP,EAAUvB,KAAK3B,MAAMkD,EAAWM,EAAuBN,eAGpDxH,EACH,MAAO,CACL6G,SAAUU,EACVC,UAAWA,GAIf,IAAI3F,WAuDwBgF,EAAU7G,GAGtC,IAFA,IAAIwH,EAAY,GAEP/H,EAAIO,EAAWN,OAAS,EAAGD,GAAK,EAAGA,IAAK,CAC/C,IAAIiJ,EAAMC,EAAqB9B,GAE3B+B,EAAsBC,GAAkB,EAAK7I,EAAWP,IAAIiJ,IAAQA,GAMxE,QAJqCzH,IAAjC2H,EAAoBN,UACtBd,EAAUvB,KAAK2C,EAAoBN,eAGArH,IAAjC2H,EAAoB/B,SAAwB,CAC9CA,EAAW+B,EAAoB/B,SAE/B,IAAK,IAAI2B,EAAI,EAAGA,EAAI3B,EAASnH,OAAS,EAAG8I,IACvC,IAAK,IAAIM,EAAIN,EAAI,EAAGM,EAAIjC,EAASnH,OAAQoJ,IACvC,GAAIjC,EAAS2B,GAAGnI,MAAQwG,EAASiC,GAAGzI,KAAOwG,EAAS2B,GAAGrB,YAAcN,EAASiC,GAAG3B,UAC/E,MAAM,IAAItD,UAAU,uBAAyBgD,EAAS2B,GAAGnI,IAAM,MAOzE,MAAO,CACLwG,SAAUA,EACVW,UAAWA,GAlFAuB,CAAqBxB,EAAavH,GAI/C,OAFAwH,EAAUvB,KAAK3B,MAAMkD,EAAW3F,EAAO2F,WACvC3F,EAAO2F,UAAYA,EACZ3F,EAnLSmH,UA6DcnC,GAO9B,IANA,IAAIU,EAAc,GAEd0B,EAAgB,SAAuBC,GACzC,MAAsB,WAAfA,EAAMjC,MAAqBiC,EAAM7I,MAAQ6G,EAAQ7G,KAAO6I,EAAM/B,YAAcD,EAAQC,WAGpF1H,EAAI,EAAGA,EAAIoH,EAASnH,OAAQD,IAAK,CACxC,IACI0J,EADAjC,EAAUL,EAASpH,GAGvB,GAAqB,WAAjByH,EAAQD,OAAsBkC,EAAQ5B,EAAY6B,KAAKH,IACzD,GAAII,EAAkBnC,EAAQjH,aAAeoJ,EAAkBF,EAAMlJ,YAAa,CAChF,GAAI4H,EAAeX,IAAYW,EAAesB,GAC5C,MAAM,IAAI5H,eAAe,uBAAyB2F,EAAQ7G,IAAM,yBAGlE8I,EAAMlJ,WAAaiH,EAAQjH,eACtB,CACL,GAAI4H,EAAeX,GAAU,CAC3B,GAAIW,EAAesB,GACjB,MAAM,IAAI5H,eAAe,iFAAwF2F,EAAQ7G,IAAM,MAGjI8I,EAAMnJ,WAAakH,EAAQlH,WAG7BsJ,EAAsBpC,EAASiC,QAGjC5B,EAAYtB,KAAKiB,GAIrB,OAAOK,EA/FwBgC,CAAuBxC,EAAEyC,EAAEC,IAAIC,IAA4B1J,GAI1F,OAsGgC4G,EAxGPG,EAAEH,EAwGQC,EAxGLS,EAAUT,SAyGpCC,EAAQF,EAAEzD,UACd,CAAC,SAAU,SAAS/C,SAAQ,SAAU6G,GACpCJ,EAASzG,SAAQ,SAAU8G,GACzB,IAAIC,EAAYD,EAAQC,UAEpBD,EAAQD,OAASA,GAAuB,WAAdE,GAAwC,cAAdA,GAGtDC,EAF6B,WAAdD,EAAyBP,EAAIE,EAEdI,kBA6RVyC,EAAanC,GACvC,IAAK,IAAI/H,EAAI,EAAGA,EAAI+H,EAAU9H,OAAQD,IAAK,CACzC,IAAImK,GAAc,EAAOpC,EAAU/H,IAAIkK,GAEvC,QAAuB1I,IAAnB2I,EAA8B,CAChC,GAA8B,mBAAnBA,EACT,MAAM,IAAI/F,UAAU,wCAGtB8F,EAAcC,GAIlB,OAAOD,EAzZAE,CAAmB9C,EAAEH,EAAGU,EAAUE,oBAGlCkC,EAAyBI,GAChC,IACI7J,EADAI,EAAM0J,EAAA/H,QAAc8H,EAAIzJ,KAGX,WAAbyJ,EAAI7C,MACNhH,EAAa,CACXc,MAAO+I,EAAI/I,MACXN,UAAU,EACVF,cAAc,EACdD,YAAY,GAEdd,OAAO+G,eAAeuD,EAAI/I,MAAO,OAAQ,CACvCA,MAAwB,WAAjBiJ,QAAQ3J,GAAoB,GAAKA,EACxCE,cAAc,KAEM,QAAbuJ,EAAI7C,KACbhH,EAAa,CACX4E,IAAKiF,EAAI/I,MACTR,cAAc,EACdD,YAAY,GAEQ,QAAbwJ,EAAI7C,KACbhH,EAAa,CACXgK,IAAKH,EAAI/I,MACTR,cAAc,EACdD,YAAY,GAEQ,UAAbwJ,EAAI7C,OACbhH,EAAa,CACXM,cAAc,EACdE,UAAU,EACVH,YAAY,IAIhB,IAAI4G,EAAU,CACZD,KAAmB,UAAb6C,EAAI7C,KAAmB,QAAU,SACvC5G,IAAKA,EACL8G,UAAW2C,EAAIpC,OAAS,SAAwB,UAAboC,EAAI7C,KAAmB,MAAQ,YAClEhH,WAAYA,GAId,OAFI6J,EAAI9J,aAAYkH,EAAQlH,WAAa8J,EAAI9J,YAC5B,UAAb8J,EAAI7C,OAAkBC,EAAQ1G,YAAcsJ,EAAI/I,OAC7CmG,WAGAoC,EAAsBpC,EAASgC,QACPjI,IAA3BiG,EAAQjH,WAAW4E,IACrBqE,EAAMjJ,WAAW4E,IAAMqC,EAAQjH,WAAW4E,IAE1CqE,EAAMjJ,WAAWgK,IAAM/C,EAAQjH,WAAWgK,aAyCrCpC,EAAeX,GACtB,OAAOA,EAAQlH,YAAckH,EAAQlH,WAAWN,gBAGzC2J,EAAkBxI,GACzB,YAAgBI,IAATJ,UAAuCI,IAAfJ,EAAKE,YAAyCE,IAAlBJ,EAAKJ,mBA4BzD2G,EAAoB1C,EAAUwC,GACrC,IAAIjH,EAAaiH,EAAQjH,WAEzB,GAAqB,UAAjBiH,EAAQD,KAAkB,CAC5B,IAAIzG,EAAc0G,EAAQ1G,YAC1BP,EAAa,CACXK,WAAYL,EAAWK,WACvBG,SAAUR,EAAWQ,SACrBF,aAAcN,EAAWM,aACzBQ,WAAuB,IAAhBP,OAAyB,EAASA,EAAYQ,KAAK0D,IAI9DlF,OAAO+G,eAAe7B,EAAUwC,EAAQ7G,IAAKJ,YAsCtC2H,EAAqBV,EAASO,EAAYyC,GACjD,IAAI3K,EAAOkI,EAAWP,EAAQC,WAE9B,IAAK+C,IAAwC,IAA9B3K,EAAK0I,QAAQf,EAAQ7G,KAClC,MAAM,IAAIwD,UAAU,uBAAyBqD,EAAQ7G,IAAM,KAG7Dd,EAAK0G,KAAKiB,EAAQ7G,cAwEX8H,EAAuBjB,GAC9B,IAAIwB,EAAM,CACRzB,KAAMC,EAAQD,KACd5G,IAAK6G,EAAQ7G,IACb8G,UAAWD,EAAQC,UACnBlH,WAAYiH,EAAQjH,YAQtB,OAFAT,OAAO+G,eAAemC,EAAK1F,OAAOmH,YAJvB,CACTpJ,MAAO,aACPR,cAAc,IAGK,UAAjB2G,EAAQD,OAAkByB,EAAIlI,YAAc0G,EAAQ1G,aACjDkI,WAGA0B,EAAsBC,GAC7B,QAAuBpJ,IAAnBoJ,EACJ,OAAOC,EAAAtI,QAAQqI,GAAgBZ,KAAI,SAAUvB,GAC3C,IAAIhB,EAAUqD,EAAqBrC,GAMnC,OAJAsC,EAAkBtC,EAAe,WAAY,yBAE7CsC,EAAkBtC,EAAe,SAAU,yBAEpChB,cAIFqD,EAAqBrC,GAC5B,IAAIjB,EAAOwD,OAAOvC,EAAcjB,MAEhC,GAAa,WAATA,GAA8B,UAATA,EACvB,MAAM,IAAIpD,UAAU,yIAAqJoD,EAAO,KAGlL,IAAI5G,EAAM0J,EAAA/H,QAAckG,EAAc7H,KAClC8G,EAAYsD,OAAOvC,EAAcf,WAErC,GAAkB,WAAdA,GAAwC,cAAdA,GAA2C,QAAdA,EACzD,MAAM,IAAItD,UAAU,8JAA0KsD,EAAY,KAG5M,IAAIlH,EAAaiI,EAAcjI,WAE/BuK,EAAkBtC,EAAe,WAAY,yBAE7C,IAAIhB,EAAU,CACZD,KAAMA,EACN5G,IAAKA,EACL8G,UAAWA,EACXlH,WAAYT,OAAOkL,OAAO,GAAIzK,IAehC,MAZa,UAATgH,EACFuD,EAAkBtC,EAAe,cAAe,wBAEhDsC,EAAkBvK,EAAY,MAAO,iDAErCuK,EAAkBvK,EAAY,MAAO,iDAErCuK,EAAkBvK,EAAY,QAAS,iDAEvCiH,EAAQ1G,YAAc0H,EAAc1H,aAG/B0G,WAGAmB,EAAyBH,GAOhC,MAAO,CACLhB,QAPYqD,EAAqBrC,GAQjCI,SANaqC,EAA0BzC,EAAe,YAOtDH,OALWqC,EAAsBlC,EAAcH,kBAS1CY,EAAqB9B,GAC5B,IAAI6B,EAAM,CACRzB,KAAM,QACNJ,SAAUA,EAAS4C,IAAItB,IAOzB,OADA3I,OAAO+G,eAAemC,EAAK1F,OAAOmH,YAJvB,CACTpJ,MAAO,aACPR,cAAc,IAGTmI,WAGAG,EAAmBH,GAC1B,IAAIzB,EAAOwD,OAAO/B,EAAIzB,MAEtB,GAAa,UAATA,EACF,MAAM,IAAIpD,UAAU,gHAAuHoD,EAAO,KAGpJuD,EAAkB9B,EAAK,MAAO,sBAE9B8B,EAAkB9B,EAAK,YAAa,sBAEpC8B,EAAkB9B,EAAK,aAAc,sBAErC8B,EAAkB9B,EAAK,cAAe,sBAEtC8B,EAAkB9B,EAAK,SAAU,sBAEjC,IAAIJ,EAAWqC,EAA0BjC,EAAK,YAI9C,MAAO,CACL7B,SAHauD,EAAsB1B,EAAI7B,UAIvCyB,SAAUA,YAILkC,EAAkB9B,EAAKjE,EAAMmG,GACpC,QAAkB3J,IAAdyH,EAAIjE,GACN,MAAM,IAAIZ,UAAU+G,EAAa,kBAAoBnG,EAAO,uBAIvDkG,EAA0BjC,EAAKjE,GACtC,IAAI1D,EAAQ2H,EAAIjE,GAEhB,QAAcxD,IAAVF,GAAwC,mBAAVA,EAChC,MAAM,IAAI8C,UAAU,aAAeY,EAAO,sBAG5C,OAAO1D,4ICjZwBG,GAC/B,OAAO2J,EAAA7I,QAAed,IAAQ4J,EAAA9I,QAAgBd,IAAQ6J,EAAA/I,2DCLfuB,GACvC,GAAIP,OAAOU,YAAYlE,OAAO+D,IAAkD,uBAAzC/D,OAAO2D,UAAUqC,SAASxE,KAAKuC,GAAgC,OAAOpC,MAAM6J,KAAKzH,mGCAxH,MAAM,IAAIM,UAAU,kOCEiBxB,GACrC,IAAIhC,EAAM4K,EAAAjJ,QAAYK,EAAK,UAC3B,MAAwB,WAAjB6I,EAAAlJ,QAAQ3B,GAAoBA,EAAMoK,OAAOpK,oDCLlBqI,GAC5B,OAAOA,GAAOA,EAAIiB,cAAgB3G,OAAS,gBAAkB0F,+JCC5ByC,EAAOC,GAC1C,GAAuB,WAAnBF,EAAAlJ,QAAQmJ,IAAiC,OAAVA,EAAgB,OAAOA,EAC1D,IAAIE,EAAOF,EAAMnI,OAAOsI,aAExB,QAAarK,IAAToK,EAAoB,CACtB,IAAIE,EAAMF,EAAKrK,KAAKmK,EAAOC,GAAQ,WACnC,GAAqB,WAAjBF,EAAAlJ,QAAQuJ,GAAmB,OAAOA,EACtC,MAAM,IAAI1H,UAAU,gDAGtB,OAAiB,WAATuH,EAAoBX,OAASe,QAAQL,oDCZbzC,EAAK+C,GAGrC,IAFA,IAAIlM,EAAOC,OAAOkM,oBAAoBD,GAE7BhM,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAAK,CACpC,IAAIY,EAAMd,EAAKE,GACXsB,EAAQvB,OAAOmM,yBAAyBF,EAAUpL,GAElDU,GAASA,EAAMR,mBAA6BU,IAAbyH,EAAIrI,IACrCb,OAAO+G,eAAemC,EAAKrI,EAAKU,GAIpC,OAAO2H,gGCZ2CA,EAAKkD,GACvD,IAAK,IAAIvL,KAAOuL,EAAO,EACjB/K,EAAO+K,EAAMvL,IACZE,aAAeM,EAAKP,YAAa,EAClC,UAAWO,IAAMA,EAAKJ,UAAW,GACrCjB,OAAO+G,eAAemC,EAAKrI,EAAKQ,GAGlC,GAAIrB,OAAOqM,sBAGT,IAFA,IAAIC,EAAgBtM,OAAOqM,sBAAsBD,GAExCnM,EAAI,EAAGA,EAAIqM,EAAcpM,OAAQD,IAAK,CAC7C,IACIoB,EADAkL,EAAMD,EAAcrM,IACpBoB,EAAO+K,EAAMG,IACZxL,aAAeM,EAAKP,YAAa,EAClC,UAAWO,IAAMA,EAAKJ,UAAW,GACrCjB,OAAO+G,eAAemC,EAAKqD,EAAKlL,GAIpC,OAAO6H,gGCpB+BA,EAAKrI,EAAKU,GAYhD,OAXIV,KAAOqI,EACTlJ,OAAO+G,eAAemC,EAAKrI,EAAK,CAC9BU,MAAOA,EACPT,YAAY,EACZC,cAAc,EACdE,UAAU,IAGZiI,EAAIrI,GAAOU,EAGN2H,8FCZAsD,IAeP,OAdAA,EAAWxM,OAAOkL,QAAU,SAAU5K,GACpC,IAAK,IAAIL,EAAI,EAAGA,EAAI4E,UAAU3E,OAAQD,IAAK,CACzC,IAAIwM,EAAS5H,UAAU5E,GAEvB,IAAK,IAAIY,KAAO4L,EACVzM,OAAO2D,UAAU4B,eAAe/D,KAAKiL,EAAQ5L,KAC/CP,EAAOO,GAAO4L,EAAO5L,IAK3B,OAAOP,GAGFkM,EAAS1H,MAAM1B,KAAMyB,wBAI5B,OAAO2H,EAAS1H,MAAM1B,KAAMyB,sKCjBrB6H,EAAIC,EAAQC,EAAUC,GAiB7B,OAfEH,EADqB,oBAAZ/G,SAA2BA,QAAQN,IACtCM,QAAQN,IAER,SAAa/E,EAAQC,EAAU2E,GACnC,IAAI4H,EAAOC,EAAAvK,QAAclC,EAAQC,GACjC,GAAKuM,EAAL,CACA,IAAIzL,EAAOrB,OAAOmM,yBAAyBW,EAAMvM,GAEjD,OAAIc,EAAKgE,IACAhE,EAAKgE,IAAI7D,KAAK0D,GAAY5E,GAG5Be,EAAKE,SAILoL,EAAQC,EAAUC,cAGFvM,EAAQC,EAAUyM,GAC7C,OAAON,EAAIpM,EAAQC,EAAUyM,mHCrBQC,EAAQ1M,SACrCP,OAAO2D,UAAU4B,eAAe/D,KAAKyL,EAAQ1M,IAEpC,QADf0M,EAASC,EAAA1K,QAAeyK,MAI1B,OAAOA,iDCRAE,EAAeC,GAItB,OAHAD,EAAiBnN,OAAOqN,eAAiBrN,OAAOsN,eAAiB,SAAwBC,GACvF,OAAOA,EAAEC,WAAaxN,OAAOsN,eAAeC,KAExBH,cAGgBG,GACtC,OAAOJ,EAAeI,gKCNUE,EAAUtG,GAC1C,GAA0B,mBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAI9C,UAAU,sDAGtBoJ,EAAS9J,UAAY3D,OAAO0N,OAAOvG,GAAcA,EAAWxD,UAAW,CACrEwG,YAAa,CACX5I,MAAOkM,EACPxM,UAAU,EACVF,cAAc,KAGdoG,GAAYwG,EAAAnL,QAAeiL,EAAUtG,kDCdlCyG,EAAeR,EAAGS,GAMzB,OALAD,EAAiB5N,OAAOqN,gBAAkB,SAAwBE,EAAGO,GAEnE,OADAP,EAAEC,UAAYM,EACPP,IAGaH,EAAGS,cAGaN,EAAGO,GACzC,OAAOF,EAAeL,EAAGO,iGCVYL,EAAUtG,GAC/CsG,EAAS9J,UAAY3D,OAAO0N,OAAOvG,EAAWxD,WAC9C8J,EAAS9J,UAAUwG,YAAcsD,EACjCA,EAASD,UAAYrG,gGCH4B7G,EAAQC,EAAUE,EAAYC,GAC1ED,GACLT,OAAO+G,eAAezG,EAAQC,EAAU,CACtCO,WAAYL,EAAWK,WACvBC,aAAcN,EAAWM,aACzBE,SAAUR,EAAWQ,SACrBM,MAAOd,EAAWO,YAAcP,EAAWO,YAAYQ,KAAKd,QAAW,kGCNzBD,EAAYC,GAC5D,MAAM,IAAIL,MAAM,+UCDkB0N,EAAMC,GACxC,OAAa,MAATA,GAAmC,oBAAXxK,QAA0BwK,EAAMxK,OAAOyK,aAC1DD,EAAMxK,OAAOyK,aAAaF,GAE1BA,aAAgBC,gGCJoB9E,GAC7C,OAAOA,GAAOA,EAAIgF,WAAahF,EAAM,CACnC1G,QAAS0G,iGCFmCA,GAC9C,GAAIA,GAAOA,EAAIgF,WACb,OAAOhF,EAEP,IAAIiF,EAAS,GAEb,GAAW,MAAPjF,EACF,IAAK,IAAIrI,KAAOqI,EACd,GAAIlJ,OAAO2D,UAAU4B,eAAe/D,KAAK0H,EAAKrI,GAAM,CAClD,IAAIQ,EAAOrB,OAAO+G,gBAAkB/G,OAAOmM,yBAA2BnM,OAAOmM,yBAAyBjD,EAAKrI,GAAO,GAE9GQ,EAAKgE,KAAOhE,EAAKoJ,IACnBzK,OAAO+G,eAAeoH,EAAQtN,EAAKQ,GAEnC8M,EAAOtN,GAAOqI,EAAIrI,GAO1B,OADAsN,EAAO3L,QAAU0G,EACViF,gGCrB+BxJ,GACxC,OAA+D,IAAxD+B,SAASV,SAASxE,KAAKmD,GAAI8D,QAAQ,+GCDE/G,EAAKzB,GACjD,IAAImO,EAAO,GACPC,GAAK,EACLC,GAAK,EACLC,OAAK9M,EAET,IACE,IAAK,IAAiC+M,EAA7BC,EAAK/M,EAAI8B,OAAOU,cAAmBmK,GAAMG,EAAKC,EAAGtL,QAAQJ,QAChEqL,EAAK3H,KAAK+H,EAAGjN,QAETtB,GAAKmO,EAAKlO,SAAWD,GAH8CoO,GAAK,IAK9E,MAAOrL,GACPsL,GAAK,EACLC,EAAKvL,EACN,QACC,IACOqL,GAAsB,MAAhBI,EAAW,QAAWA,EAAW,SAC7C,QACC,GAAIH,EAAI,MAAMC,GAIlB,OAAOH,gGCvB0C1M,EAAKzB,GAGtD,IAFA,IAE6CyO,EAFzCN,EAAO,GAEFO,EAAYjN,EAAI8B,OAAOU,cAAsBwK,EAAQC,EAAUxL,QAAQJ,OAC9EqL,EAAK3H,KAAKiI,EAAMnN,QAEZtB,GAAKmO,EAAKlO,SAAWD,KAG3B,OAAOmO,qFCTT,IAAIQ,aAE2C3L,EAAM6D,EAAOjG,EAAKgO,GAC1DD,IACHA,EAAuC,mBAAXpL,QAAyBA,OAAOsL,KAAOtL,OAAOsL,IAAI,kBAAoB,OAGpG,IAAIC,EAAe9L,GAAQA,EAAK8L,aAC5BC,EAAiBnK,UAAU3E,OAAS,EAQxC,GANK4G,GAA4B,IAAnBkI,IACZlI,EAAQ,CACN+H,cAAU,IAIV/H,GAASiI,EACX,IAAK,IAAIE,KAAYF,OACK,IAApBjI,EAAMmI,KACRnI,EAAMmI,GAAYF,EAAaE,SAGzBnI,IACVA,EAAQiI,GAAgB,IAG1B,GAAuB,IAAnBC,EACFlI,EAAM+H,SAAWA,OACZ,GAAIG,EAAiB,EAAG,CAG7B,IAFA,IAAIE,EAAa,IAAIvN,MAAMqN,GAElB/O,EAAI,EAAGA,EAAI+O,EAAgB/O,IAClCiP,EAAWjP,GAAK4E,UAAU5E,EAAI,GAGhC6G,EAAM+H,SAAWK,EAGnB,MAAO,CACLC,SAAUP,EACV3L,KAAMA,EACNpC,SAAaY,IAARZ,EAAoB,KAAO,GAAKA,EACrCuO,IAAK,KACLtI,MAAOA,EACPuI,OAAQ,oGC5C2BC,EAAWC,GAChD,GAAID,IAAcC,EAChB,MAAM,IAAIlL,UAAU,wICDtB,MAAM,IAAIA,UAAU,gNCCgB/D,GACpC,IAAK,IAAIL,EAAI,EAAGA,EAAI4E,UAAU3E,OAAQD,IAAK,CACzC,IAAIwM,EAAyB,MAAhB5H,UAAU5E,GAAa4E,UAAU5E,GAAK,GAC/CuP,EAAUxP,OAAOD,KAAK0M,GAEkB,mBAAjCzM,OAAOqM,wBAChBmD,EAAUA,EAAQC,OAAOzP,OAAOqM,sBAAsBI,GAAQiD,QAAO,SAAUnD,GAC7E,OAAOvM,OAAOmM,yBAAyBM,EAAQF,GAAKzL,gBAIxD0O,EAAQ5O,SAAQ,SAAUC,GACxB8O,EAAAnN,QAAelC,EAAQO,EAAK4L,EAAO5L,OAIvC,OAAOP,kHChBwCmM,EAAQmD,GACvD,GAAc,MAAVnD,EAAgB,MAAO,GAC3B,IACI5L,EAAKZ,EADLK,EAASuP,EAAArN,QAA6BiK,EAAQmD,GAGlD,GAAI5P,OAAOqM,sBAAuB,CAChC,IAAIyD,EAAmB9P,OAAOqM,sBAAsBI,GAEpD,IAAKxM,EAAI,EAAGA,EAAI6P,EAAiB5P,OAAQD,IACvCY,EAAMiP,EAAiB7P,GACnB2P,EAASnH,QAAQ5H,IAAQ,GACxBb,OAAO2D,UAAUoM,qBAAqBvO,KAAKiL,EAAQ5L,KACxDP,EAAOO,GAAO4L,EAAO5L,IAIzB,OAAOP,mDClB6CmM,EAAQmD,GAC5D,GAAc,MAAVnD,EAAgB,MAAO,GAC3B,IAEI5L,EAAKZ,EAFLK,EAAS,GACT0P,EAAahQ,OAAOD,KAAK0M,GAG7B,IAAKxM,EAAI,EAAGA,EAAI+P,EAAW9P,OAAQD,IACjCY,EAAMmP,EAAW/P,GACb2P,EAASnH,QAAQ5H,IAAQ,IAC7BP,EAAOO,GAAO4L,EAAO5L,IAGvB,OAAOP,4KCT0CwB,EAAMN,GACvD,OAAIA,GAA2B,WAAlBkK,EAAAlJ,QAAQhB,IAAsC,mBAATA,EAI3CyO,EAAAzN,QAAsBV,GAHpBN,mDCL4ByD,GACrC,MAAM,IAAI5E,MAAM,IAAO4E,EAAO,0LCEvBiL,EAAIvD,EAAQC,EAAUuD,EAAOtD,GAoCpC,OAlCEqD,EADqB,oBAAZvK,SAA2BA,QAAQ8E,IACtC9E,QAAQ8E,IAER,SAAanK,EAAQC,EAAUgB,EAAO2D,GAC1C,IACI7D,EADAyL,EAAOC,EAAAvK,QAAclC,EAAQC,GAGjC,GAAIuM,EAAM,CAGR,IAFAzL,EAAOrB,OAAOmM,yBAAyBW,EAAMvM,IAEpCkK,IAEP,OADApJ,EAAKoJ,IAAIjJ,KAAK0D,EAAU3D,IACjB,EACF,IAAKF,EAAKJ,SACf,OAAO,EAMX,GAFAI,EAAOrB,OAAOmM,yBAAyBjH,EAAU3E,GAEvC,CACR,IAAKc,EAAKJ,SACR,OAAO,EAGTI,EAAKE,MAAQA,EACbvB,OAAO+G,eAAe7B,EAAU3E,EAAUc,QAE1CsO,EAAAnN,QAAe0C,EAAU3E,EAAUgB,GAGrC,OAAO,IAIAoL,EAAQC,EAAUuD,EAAOtD,cAGTvM,EAAQC,EAAUgB,EAAO2D,EAAUkL,GAG9D,IAFQF,EAAI5P,EAAQC,EAAUgB,EAAO2D,GAAY5E,IAEvC8P,EACR,MAAM,IAAI/P,MAAM,0BAGlB,OAAOkB,mDCjDuCoD,GAC9C,OAAO,WACL,IAAI0L,EAAK1L,EAAGG,MAAM1B,KAAMyB,WAExB,OADAwL,EAAGlN,OACIkN,0LCA4B3O,EAAKzB,GAC1C,OAAOoL,EAAA7I,QAAed,IAAQ4J,EAAA9I,QAAqBd,EAAKzB,IAAMsL,EAAA/I,oJCDpBd,EAAKzB,GAC/C,OAAOoL,EAAA7I,QAAed,IAAQ4O,EAAA9N,QAA0Bd,EAAKzB,IAAMsL,EAAA/I,2DCLtB+N,EAASC,GAKtD,OAJKA,IACHA,EAAMD,EAAQrP,MAAM,IAGflB,OAAOyQ,OAAOzQ,OAAO0Q,iBAAiBH,EAAS,CACpDC,IAAK,CACHjP,MAAOvB,OAAOyQ,OAAOD,qGCPyBD,EAASC,GAM3D,OALKA,IACHA,EAAMD,EAAQrP,MAAM,IAGtBqP,EAAQC,IAAMA,EACPD,gGCNsBtK,GAC3B,MAAMA,yLCGiCvE,GACzC,OAAOiP,EAAAnO,QAAkBd,IAAQ4J,EAAA9I,QAAgBd,IAAQkP,EAAApO,0HCHfmC,GAC1C,OAAO,WACL,OAAO,IAAIkM,EAAArO,QAAemC,EAAGG,MAAM1B,KAAMyB,kKCCpCiM,EAAgBzK,GACvB,IAAI0K,EAAwB,mBAARC,IAAqB,IAAIA,SAAQvP,EA8BrD,OA5BAqP,EAAkB,SAAyBvK,GACzC,GAAc,OAAVA,IAAmB0K,EAAAzO,QAAiB+D,GAAQ,OAAOA,EAEvD,GAAqB,mBAAVA,EACT,MAAM,IAAIlC,UAAU,sDAGtB,QAAsB,IAAX0M,EAAwB,CACjC,GAAIA,EAAO3L,IAAImB,GAAQ,OAAOwK,EAAO1L,IAAIkB,GAEzCwK,EAAOtG,IAAIlE,EAAO2K,YAGXA,IACP,OAAOC,EAAA3O,QAAU+D,EAAO1B,UAAWqI,EAAA1K,QAAeY,MAAM+G,aAW1D,OARA+G,EAAQvN,UAAY3D,OAAO0N,OAAOnH,EAAM5C,UAAW,CACjDwG,YAAa,CACX5I,MAAO2P,EACPpQ,YAAY,EACZG,UAAU,EACVF,cAAc,KAGX4M,EAAAnL,QAAe0O,EAAS3K,IAG1BuK,EAAgBzK,cAGgBE,GACvC,OAAOuK,EAAgBvK,6ICpCY6K,GACjC,IAAIC,EAA4BC,EAAA9O,UAChC,OAAO,WACH,IACIH,EADAkP,EAAQrE,EAAA1K,QAAgB4O,GAE5B,GAAIC,EAA2B,CAC3B,IAAIG,EAAYtE,EAAA1K,QAAgBY,MAAM+G,YACtC9H,EAASsD,QAAQC,UAAU2L,EAAO1M,UAAW2M,QAE7CnP,EAASkP,EAAMzM,MAAM1B,KAAMyB,WAE/B,OAAO4M,EAAAjP,QAA2BY,KAAMf,uDCd5C,GAAuB,oBAAZsD,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,mBAAVC,MAAsB,OAAO,EACxC,IAEI,OADA4L,QAAQ/N,UAAUgO,QAAQnQ,KAAKmE,QAAQC,UAAU8L,QAAS,IAAI,iBACvD,EACT,MAAOzL,GACL,OAAO,sFCsCf,IAAoB2L,+EA5CpB,IAAIC,EAAY,YA6BPC,EAAWC,GAClB,OAAQ,GAAKA,GAAKC,QAAO,wCAA0C,MAAQ,IAc7EJ,WA1C4BzR,GAC1B,IAAIoB,EAAQsQ,EAAU1R,GAOtB,OALKoB,IACHA,aAQF,IACE,MAAM,IAAIlB,MACV,MAAO2C,GACP,IAAIiP,GAAW,GAAKjP,EAAIkP,OAAOC,MAAK,kCAEpC,GAAIF,EAGF,OAAOH,EAAWG,EAAQ,IAI9B,MAAO,IApBGG,GACRP,EAAU1R,GAAMoB,GAGXA,wCCZT8Q,EAAAC,QAAkBC,EAAA,QAAA,CAAuCA,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,UAAWE,MAAK,WAAM,OAAA2P,EAAc,iDCAlM,8BAIAF,EAAAC,QAAiBG,GAAY,SAAUC,GACrC,OAAO,IAAIjQ,SAAQ,SAAUC,EAASQ,GAEpC,IAAIyP,EAAkBC,SAASC,qBAAqB,UAEpD,GAAI,GAAGpD,OAAOkD,GAAiBG,MAAK,SAAyBC,GAC3D,OAAOA,EAAOC,MAAQN,KAEtBhQ,QAHF,CAOA,IAAIuQ,EAASL,SAASM,cAAc,UACpCD,EAAOE,OAAQ,EACfF,EAAOhQ,KAAO,kBACdgQ,EAAOG,QAAU,QACjBH,EAAOD,IAAMN,EAEbO,EAAOI,QAAU,SAAUpN,GACzB,IAAIvB,EAAQ,IAAIL,UAAU,gDAAgDoL,OAAOiD,EAAQ,aAAajD,OAAOxJ,EAAEqN,UAC/GL,EAAOI,QAAUJ,EAAOM,OAAS,KACjCN,EAAOO,SACPtQ,EAAOwB,IAGTuO,EAAOM,OAAS,WACdN,EAAOI,QAAUJ,EAAOM,OAAS,KACjC7Q,KAGFkQ,SAASC,qBAAqB,QAAQ,GAAGY,YAAYR,+CClCzD,aAEA,IAAIS,EAAgB,GAChBC,EAAiB,GACjBC,EAAmB,YAEdC,EAAS5Q,GAChB,OAAQA,GACN,IAAK,UACH,OAAO0Q,EAET,IAAK,WACH,OAAOC,UAGP,OAAOF,GAIbrB,EAAAC,QAAiB,SAAUwB,EAAQ7Q,GACjC,OAAO,SAAUyP,GACf,IAAIqB,EAAQF,EAAS5Q,GAErB,OAAI8Q,EAAMrB,GACDqB,EAAMrB,GAGRqB,EAAMrB,GAAUoB,EAAOhP,MAAM,KAAMD,WAAWmP,OAAM,SAAU/N,GAEnE,aADO8N,EAAMrB,GACPzM,4CC7BZoM,EAAAC,QAAkBC,EAAA,QAAA,CAAuCA,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,UAAWE,MAAK,WAAM,OAAA2P,EAAc,iDCAlMF,EAAAC,QAAkBC,EAAA,QAAA,CAAuCA,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,UAAWE,MAAK,WAAM,OAAA2P,EAAc,iDCAlMF,EAAAC,QAAkBC,EAAA,QAAA,CAAuCA,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,UAAWE,MAAK,WAAM,OAAA2P,EAAc,iDCAlMF,EAAAC,QAAkBC,EAAA,QAAA,CAAuCA,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,UAAWE,MAAK,WAAM,OAAA2P,EAAc,eCAlMA,EAAA,SAAA0B,SAA8CC,KAAKC,MAAM,spHCOrDC,EAAW,SAAU9B,OAKnB7Q,EAMK4S,EAAT,SAAgBnL,EAAKrI,EAAKU,GAOxB,OANAvB,OAAO+G,eAAemC,EAAKrI,EAAK,CAC9BU,MAAOA,EACPT,YAAY,EACZC,cAAc,EACdE,UAAU,IAELiI,EAAIrI,IAWJyT,EAAT,SAAcC,EAASC,EAAS1S,EAAM2S,GAEpC,IAAIC,EAAiBF,GAAWA,EAAQ7Q,qBAAqBgR,EAAYH,EAAUG,EAC/EC,EAAY5U,OAAO0N,OAAOgH,EAAe/Q,WACzCjD,EAAU,IAAImU,EAAQJ,GAAe,IAMzC,OAFAG,EAAUvR,QAAUyR,EAAiBP,EAASzS,EAAMpB,GAE7CkU,GAcAG,EAAT,SAAkBpQ,EAAIuE,EAAKrG,GACzB,IACE,MAAO,CAAEI,KAAM,SAAUJ,IAAK8B,EAAGnD,KAAK0H,EAAKrG,IAC3C,MAAOG,GACP,MAAO,CAAEC,KAAM,QAASJ,IAAKG,KAiBxB2R,EAAT,aACSK,EAAT,aACSC,EAAT,aAgCSC,EAAT,SAA+BvR,GAC7B,CAAC,OAAQ,QAAS,UAAU/C,SAAQ,SAASwD,GAC3CiQ,EAAO1Q,EAAWS,GAAQ,SAASvB,GACjC,OAAOO,KAAKC,QAAQe,EAAQvB,UAkCzBsS,EAAT,SAAuBP,EAAWQ,YACvBC,EAAOjR,EAAQvB,EAAKH,EAASQ,GACpC,IAAIoS,EAASP,EAASH,EAAUxQ,GAASwQ,EAAW/R,GACpD,GAAoB,UAAhByS,EAAOrS,KAEJ,CACL,IAAIZ,EAASiT,EAAOzS,IAChBsN,EAAQ9N,EAAOd,MACnB,OAAI4O,GACiB,iBAAVA,GACPoF,EAAO/T,KAAK2O,EAAO,WACdiF,EAAY1S,QAAQyN,EAAMqF,SAAS5S,MAAK,SAASrB,GACtD8T,EAAO,OAAQ9T,EAAOmB,EAASQ,MAC9B,SAASF,GACVqS,EAAO,QAASrS,EAAKN,EAASQ,MAI3BkS,EAAY1S,QAAQyN,GAAOvN,MAAK,SAAS6S,GAI9CpT,EAAOd,MAAQkU,EACf/S,EAAQL,MACP,SAASqC,GAGV,OAAO2Q,EAAO,QAAS3Q,EAAOhC,EAASQ,MAvBzCA,EAAOoS,EAAOzS,KA4BlB,IAAI6S,EAgCJtS,KAAKC,iBA9BYe,EAAQvB,YACd8S,IACP,OAAO,IAAIP,GAAY,SAAS1S,EAASQ,GACvCmS,EAAOjR,EAAQvB,EAAKH,EAASQ,MAIjC,OAAOwS,EAaLA,EAAkBA,EAAgB9S,KAChC+S,EAGAA,GACEA,MAgCDb,EAAT,SAA0BP,EAASzS,EAAMpB,GACvC,IAAIkV,EAAQC,EAEZ,OAAO,SAAgBzR,EAAQvB,GAC7B,GAAI+S,IAAUE,EACZ,MAAM,IAAIzV,MAAM,gCAGlB,GAAIuV,IAAUG,EAAmB,CAC/B,GAAe,UAAX3R,EACF,MAAMvB,EAKR,OAAOmT,QAGTtV,EAAQ0D,OAASA,EACjB1D,EAAQmC,IAAMA,IAED,CACX,IAAIoT,EAAWvV,EAAQuV,SACvB,GAAIA,EAAU,CACZ,IAAIC,EAAiBC,EAAoBF,EAAUvV,GACnD,GAAIwV,EAAgB,CAClB,GAAIA,IAAmBE,EAAkB,SACzC,OAAOF,GAIX,GAAuB,SAAnBxV,EAAQ0D,OAGV1D,EAAQ2V,KAAO3V,EAAQ4V,MAAQ5V,EAAQmC,SAElC,GAAuB,UAAnBnC,EAAQ0D,OAAoB,CACrC,GAAIwR,IAAUC,EAEZ,MADAD,EAAQG,EACFrV,EAAQmC,IAGhBnC,EAAQ6V,kBAAkB7V,EAAQmC,SAEN,WAAnBnC,EAAQ0D,QACjB1D,EAAQ8V,OAAO,SAAU9V,EAAQmC,KAGnC+S,EAAQE,EAER,IAAIR,EAASP,EAASR,EAASzS,EAAMpB,GACrC,GAAoB,WAAhB4U,EAAOrS,KAAmB,CAO5B,GAJA2S,EAAQlV,EAAQqC,KACZgT,EACAU,EAEAnB,EAAOzS,MAAQuT,EACjB,SAGF,MAAO,CACL7U,MAAO+T,EAAOzS,IACdE,KAAMrC,EAAQqC,MAGS,UAAhBuS,EAAOrS,OAChB2S,EAAQG,EAGRrV,EAAQ0D,OAAS,QACjB1D,EAAQmC,IAAMyS,EAAOzS,QA4GpB6T,EAAT,SAAsBC,GACpB,IAAIC,EAAQ,CAAEC,OAAQF,EAAK,IAEvB,KAAKA,IACPC,EAAME,SAAWH,EAAK,IAGpB,KAAKA,IACPC,EAAMG,WAAaJ,EAAK,GACxBC,EAAMI,SAAWL,EAAK,IAGxBvT,KAAK6T,WAAWxQ,KAAKmQ,IAGdM,EAAT,SAAuBN,GACrB,IAAItB,EAASsB,EAAMO,YAAc,GACjC7B,EAAOrS,KAAO,gBACPqS,EAAOzS,IACd+T,EAAMO,WAAa7B,GAGZT,EAAT,SAAiBJ,GAIfrR,KAAK6T,WAAa,CAAC,CAAEJ,OAAQ,SAC7BpC,EAAY7T,QAAQ8V,EAActT,MAClCA,KAAKgU,OAAM,IA8BJC,EAAT,SAAgBlT,GACd,GAAIA,EAAU,CACZ,IAAImT,EAAiBnT,EAASoT,GAC9B,GAAID,EACF,OAAOA,EAAe9V,KAAK2C,GAG7B,GAA6B,mBAAlBA,EAAShB,KAClB,OAAOgB,EAGT,IAAKqT,MAAMrT,EAASjE,QAAS,CAC3B,IAAID,GAAI,EAAIwX,EAAO,SAAStU,WACjBlD,EAAIkE,EAASjE,WAChBqV,EAAO/T,KAAK2C,EAAUlE,GAGxB,OAFAkD,EAAK5B,MAAQ4C,EAASlE,GACtBkD,EAAKJ,MAAO,EACLI,EAOX,OAHAA,EAAK5B,MAAQE,EACb0B,EAAKJ,MAAO,EAELI,GAGT,OAAOsU,EAAKtU,KAAOsU,GAKvB,MAAO,CAAEtU,KAAM6S,IAIRA,EAAT,WACE,MAAO,CAAEzU,MAAOE,EAAWsB,MAAM,IA5f/B2U,EAAK1X,OAAO2D,UACZ4R,EAASmC,EAAGnS,eAEZoS,EAA4B,mBAAXnU,OAAwBA,OAAS,GAClD+T,EAAiBI,EAAQzT,UAAY,aACrC0T,EAAsBD,EAAQlU,eAAiB,kBAC/CoU,EAAoBF,EAAQhN,aAAe,gBAW/C,IAEE0J,EAAO,GAAI,IACX,MAAOrR,GACPqR,EAAS,SAASnL,EAAKrI,EAAKU,GAC1B,OAAO2H,EAAIrI,GAAOU,GAgBtB+Q,EAAQgC,KAAOA,EAoBf,IAAIuB,EAAyB,iBACzBY,EAAyB,iBACzBX,EAAoB,YACpBC,EAAoB,YAIpBK,EAAmB,GAYnB0B,EAAoB,GACxBzD,EAAOyD,EAAmBP,GAAgB,WACxC,OAAOnU,QAGT,IAAI2U,EAAW/X,OAAOsN,eAClB0K,EAA0BD,GAAYA,EAASA,EAASV,EAAO,MAC/DW,GACAA,IAA4BN,GAC5BnC,EAAO/T,KAAKwW,EAAyBT,KAGvCO,EAAoBE,GAGtB,IAAIC,EAAKhD,EAA2BtR,UAClCgR,EAAUhR,UAAY3D,OAAO0N,OAAOoK,YA8N7B3B,EAAoBF,EAAUvV,GACrC,IAAI0D,EAAS6R,EAAS/R,SAASxD,EAAQ0D,QACvC,GAAIA,IAAW3C,EAAW,CAKxB,GAFAf,EAAQuV,SAAW,KAEI,UAAnBvV,EAAQ0D,OAAoB,CAE9B,GAAI6R,EAAS/R,SAAiB,SAG5BxD,EAAQ0D,OAAS,SACjB1D,EAAQmC,IAAMpB,EACd0U,EAAoBF,EAAUvV,GAEP,UAAnBA,EAAQ0D,QAGV,OAAOgS,EAIX1V,EAAQ0D,OAAS,QACjB1D,EAAQmC,IAAM,IAAIwB,UAChB,kDAGJ,OAAO+R,EAGT,IAAId,EAASP,EAAS3Q,EAAQ6R,EAAS/R,SAAUxD,EAAQmC,KAEzD,GAAoB,UAAhByS,EAAOrS,KAIT,OAHAvC,EAAQ0D,OAAS,QACjB1D,EAAQmC,IAAMyS,EAAOzS,IACrBnC,EAAQuV,SAAW,KACZG,EAGT,IAAI3R,EAAO6Q,EAAOzS,IAElB,OAAM4B,EAOFA,EAAK1B,MAGPrC,EAAQuV,EAASiC,YAAczT,EAAKlD,MAGpCb,EAAQyC,KAAO8S,EAASkC,QAQD,WAAnBzX,EAAQ0D,SACV1D,EAAQ0D,OAAS,OACjB1D,EAAQmC,IAAMpB,GAUlBf,EAAQuV,SAAW,KACZG,GANE3R,GA3BP/D,EAAQ0D,OAAS,QACjB1D,EAAQmC,IAAM,IAAIwB,UAAU,oCAC5B3D,EAAQuV,SAAW,KACZG,GAkWX,OA7mBApB,EAAkBrR,UAAYsR,EAC9BZ,EAAO4D,EAAI,cAAehD,GAC1BZ,EAAOY,EAA4B,cAAeD,GAClDA,EAAkBoD,YAAc/D,EAC9BY,EACA4C,EACA,qBAaFvF,EAAQ+F,oBAAsB,SAASC,GACrC,IAAIC,EAAyB,mBAAXD,GAAyBA,EAAOnO,YAClD,QAAOoO,IACHA,IAASvD,GAG2B,uBAAnCuD,EAAKH,aAAeG,EAAKtT,QAIhCqN,EAAQkG,KAAO,SAASF,GAQtB,OAPItY,OAAOqN,eACTrN,OAAOqN,eAAeiL,EAAQrD,IAE9BqD,EAAO9K,UAAYyH,EACnBZ,EAAOiE,EAAQT,EAAmB,sBAEpCS,EAAO3U,UAAY3D,OAAO0N,OAAOuK,GAC1BK,GAOThG,EAAQmG,MAAQ,SAAS5V,GACvB,MAAO,CAAE2S,QAAS3S,IAsEpBqS,EAAsBC,EAAcxR,WACpC0Q,EAAOc,EAAcxR,UAAWiU,GAAqB,WACnD,OAAOxU,QAETkP,EAAQ6C,cAAgBA,EAKxB7C,EAAQa,MAAQ,SAASoB,EAASC,EAAS1S,EAAM2S,EAAaW,QACxC,IAAhBA,IAAwBA,EAAc3S,SAE1C,IAAIsB,EAAO,IAAIoR,EACbb,EAAKC,EAASC,EAAS1S,EAAM2S,GAC7BW,GAGF,OAAO9C,EAAQ+F,oBAAoB7D,GAC/BzQ,EACAA,EAAKZ,OAAOP,MAAK,SAASP,GACxB,OAAOA,EAAOU,KAAOV,EAAOd,MAAQwC,EAAKZ,WAuKjD+R,EAAsB+C,GAEtB5D,EAAO4D,EAAIJ,EAAmB,aAO9BxD,EAAO4D,EAAIV,GAAgB,WACzB,OAAOnU,QAGTiR,EAAO4D,EAAI,YAAY,WACrB,MAAO,wBAkCT3F,EAAQvS,KAAO,SAASkN,GACtB,IAAIlN,EAAO,GACX,IAAK,IAAI2Y,KAAOzL,EACdlN,EAAK0G,KAAKiS,GAMZ,OAJA3Y,EAAKoB,UAIE,SAASgC,SACPpD,EAAKG,QAAQ,CAClB,IAAIW,EAAMd,EAAK4Y,MACf,GAAI9X,KAAOoM,EAGT,OAFA9J,EAAK5B,MAAQV,EACbsC,EAAKJ,MAAO,EACLI,EAQX,OADAA,EAAKJ,MAAO,EACLI,IAsCXmP,EAAQ+E,OAASA,EAMjBxC,EAAQlR,UAAY,CAClBwG,YAAa0K,EAEbuC,MAAO,SAASwB,GAcd,GAbAxV,KAAKyV,KAAO,EACZzV,KAAKD,KAAO,EAGZC,KAAKiT,KAAOjT,KAAKkT,MAAQ7U,EACzB2B,KAAKL,MAAO,EACZK,KAAK6S,SAAW,KAEhB7S,KAAKgB,OAAS,OACdhB,KAAKP,IAAMpB,EAEX2B,KAAK6T,WAAWrW,QAAQsW,IAEnB0B,EACH,IAAK,IAAI3T,KAAQ7B,KAEQ,MAAnB6B,EAAK6T,OAAO,IACZvD,EAAO/T,KAAK4B,KAAM6B,KACjBuS,OAAOvS,EAAK/D,MAAM,MACrBkC,KAAK6B,GAAQxD,IAMrBsX,KAAM,WACJ3V,KAAKL,MAAO,EAEZ,IACIiW,EADY5V,KAAK6T,WAAW,GACLE,WAC3B,GAAwB,UAApB6B,EAAW/V,KACb,MAAM+V,EAAWnW,IAGnB,OAAOO,KAAK6V,MAGd1C,kBAAmB,SAAS2C,OAMjBC,EAAT,SAAgBC,EAAKC,GAYnB,OAXA/D,EAAOrS,KAAO,QACdqS,EAAOzS,IAAMqW,EACbxY,EAAQyC,KAAOiW,EAEXC,IAGF3Y,EAAQ0D,OAAS,OACjB1D,EAAQmC,IAAMpB,KAGN4X,GAjBZ,GAAIjW,KAAKL,KACP,MAAMmW,EAmBR,IAhBA,IAAIxY,EAAU0C,KAgBLnD,EAAImD,KAAK6T,WAAW/W,OAAS,EAAGD,GAAK,IAAKA,EAAG,CACpD,IAAI2W,EAAQxT,KAAK6T,WAAWhX,GACxBqV,EAASsB,EAAMO,WAEnB,GAAqB,SAAjBP,EAAMC,OAIR,OAAOsC,EAAO,OAGhB,GAAIvC,EAAMC,QAAUzT,KAAKyV,KAAM,CAC7B,IAAIS,EAAW/D,EAAO/T,KAAKoV,EAAO,YAC9B2C,EAAahE,EAAO/T,KAAKoV,EAAO,cAEpC,GAAI0C,GAAYC,EAAY,CAC1B,GAAInW,KAAKyV,KAAOjC,EAAME,SACpB,OAAOqC,EAAOvC,EAAME,UAAU,GACzB,GAAI1T,KAAKyV,KAAOjC,EAAMG,WAC3B,OAAOoC,EAAOvC,EAAMG,iBAGjB,GAAIuC,GACT,GAAIlW,KAAKyV,KAAOjC,EAAME,SACpB,OAAOqC,EAAOvC,EAAME,UAAU,OAG3B,CAAA,IAAIyC,EAMT,MAAM,IAAIlZ,MAAM,0CALhB,GAAI+C,KAAKyV,KAAOjC,EAAMG,WACpB,OAAOoC,EAAOvC,EAAMG,gBAU9BP,OAAQ,SAASvT,EAAMJ,GACrB,IAAK,IAAI5C,EAAImD,KAAK6T,WAAW/W,OAAS,EAAGD,GAAK,IAAKA,EAAG,CACpD,IAAI2W,EAAQxT,KAAK6T,WAAWhX,GAC5B,GAAI2W,EAAMC,QAAUzT,KAAKyV,MACrBtD,EAAO/T,KAAKoV,EAAO,eACnBxT,KAAKyV,KAAOjC,EAAMG,WAAY,CAChC,IAAIyC,EAAe5C,EACnB,OAIA4C,IACU,UAATvW,GACS,aAATA,IACDuW,EAAa3C,QAAUhU,GACvBA,GAAO2W,EAAazC,aAGtByC,EAAe,MAGjB,IAAIlE,EAASkE,EAAeA,EAAarC,WAAa,GAItD,OAHA7B,EAAOrS,KAAOA,EACdqS,EAAOzS,IAAMA,EAET2W,GACFpW,KAAKgB,OAAS,OACdhB,KAAKD,KAAOqW,EAAazC,WAClBX,GAGFhT,KAAKqW,SAASnE,IAGvBmE,SAAU,SAASnE,EAAQ0B,GACzB,GAAoB,UAAhB1B,EAAOrS,KACT,MAAMqS,EAAOzS,IAcf,MAXoB,UAAhByS,EAAOrS,MACS,aAAhBqS,EAAOrS,KACTG,KAAKD,KAAOmS,EAAOzS,IACM,WAAhByS,EAAOrS,MAChBG,KAAK6V,KAAO7V,KAAKP,IAAMyS,EAAOzS,IAC9BO,KAAKgB,OAAS,SACdhB,KAAKD,KAAO,OACa,WAAhBmS,EAAOrS,MAAqB+T,IACrC5T,KAAKD,KAAO6T,GAGPZ,GAGTsD,OAAQ,SAAS3C,GACf,IAAK,IAAI9W,EAAImD,KAAK6T,WAAW/W,OAAS,EAAGD,GAAK,IAAKA,EAAG,CACpD,IAAI2W,EAAQxT,KAAK6T,WAAWhX,GAC5B,GAAI2W,EAAMG,aAAeA,EAGvB,OAFA3T,KAAKqW,SAAS7C,EAAMO,WAAYP,EAAMI,UACtCE,EAAcN,GACPR,IAKbpC,MAAS,SAAS6C,GAChB,IAAK,IAAI5W,EAAImD,KAAK6T,WAAW/W,OAAS,EAAGD,GAAK,IAAKA,EAAG,CACpD,IAAI2W,EAAQxT,KAAK6T,WAAWhX,GAC5B,GAAI2W,EAAMC,SAAWA,EAAQ,CAC3B,IAAIvB,EAASsB,EAAMO,WACnB,GAAoB,UAAhB7B,EAAOrS,KAAkB,CAC3B,IAAI0W,EAASrE,EAAOzS,IACpBqU,EAAcN,GAEhB,OAAO+C,GAMX,MAAM,IAAItZ,MAAM,0BAGlBuZ,cAAe,SAASzV,EAAU+T,EAAYC,GAa5C,OAZA/U,KAAK6S,SAAW,CACd/R,SAAUmT,EAAOlT,GACjB+T,WAAYA,EACZC,QAASA,GAGS,SAAhB/U,KAAKgB,SAGPhB,KAAKP,IAAMpB,GAGN2U,IAQJ9D,EA9sBM,CAqtBgBuH,GAG/B,IACEC,mBAAqB1F,EACrB,MAAO2F,GAWmB,iBAAfC,WACTA,WAAWF,mBAAqB1F,EAEhC1N,SAAS,IAAK,yBAAdA,CAAwC0N,wBCjuBnC6F,oBCdLC,EAAQ,SAAU7J,GACpB,OAAOA,GAAMA,EAAG8J,MAAQA,MAAQ9J,GAIlC+J,EAEEF,EAA2B,iBAAdF,YAA0BA,aACvCE,EAAuB,iBAAVG,QAAsBA,SAEnCH,EAAqB,iBAARpY,MAAoBA,OACjCoY,EAAuB,iBAAVI,GAAsBA,eAEpB,OAAOlX,SAAcsD,SAAS,cAATA,WCVtC6T,ICHAC,EAAiB,SAAUC,GACzB,IACE,QAASA,IACT,MAAO/V,GACP,OAAO,MDDa,WAEtB,OAA8E,GAAvE1E,OAAO+G,eAAe,GAAI,EAAG,CAAE1B,IAAK,WAAc,OAAO,KAAQ,iBEH1EqV,GAAkBF,GAAM,WACtB,IAAIG,EAAI,aAAiChU,OAEzC,MAAsB,mBAARgU,GAAsBA,EAAKpV,eAAe,gBCH1D,ICQSqV,EDRLC,EAAOnU,SAAS/C,UAAUnC,KAE9BsZ,EAAiBJ,EAAcG,EAAKlU,KAAKkU,GAAQ,WAC/C,OAAOA,EAAK/V,MAAM+V,EAAMhW,YCJ1B,IAAIkW,EAAwB,GAAGhL,qBAE3BiL,EAA2Bhb,OAAOmM,yBAGlC8O,EAAcD,IAA6BD,EAAsBvZ,KAAK,CAAE,EAAG,GAAK,GAIpFoZ,EAAYK,EAAc,SAA8BC,GACtD,IAAIza,EAAaua,EAAyB5X,KAAM8X,GAChD,QAASza,GAAcA,EAAWK,YAChCia,QCbJI,EAAiB,SAAUC,EAAQ7Z,GACjC,MAAO,CACLT,aAAuB,EAATsa,GACdra,eAAyB,EAATqa,GAChBna,WAAqB,EAATma,GACZ7Z,MAAOA,oBCHP8Z,EAAoB3U,SAAS/C,UAC7B2X,EAAOD,EAAkB1U,KACzB4U,EAAOF,EAAkB7Z,KACzBga,EAAcd,GAAeY,EAAK3U,KAAK4U,EAAMA,GAEjDE,EAAiBf,EAAc,SAAU/V,GACvC,OAAOA,GAAM6W,EAAY7W,IACvB,SAAUA,GACZ,OAAOA,GAAM,WACX,OAAO4W,EAAKzW,MAAMH,EAAIE,mBCTtB6W,EAAWD,EAAY,GAAGzV,UAC1B2V,EAAcF,EAAY,GAAGva,OAEjC0a,EAAiB,SAAUvL,GACzB,OAAOsL,EAAYD,EAASrL,GAAK,GAAG,ICDtC,IAAIwL,EAASzB,EAAApa,OACT8b,EAAQL,EAAY,GAAGM,OAG3BC,EAAiBxB,GAAM,WAGrB,OAAQqB,EAAO,KAAK9L,qBAAqB,MACtC,SAAUM,GACb,MAAsB,UAAfuL,EAAQvL,GAAkByL,EAAMzL,EAAI,IAAMwL,EAAOxL,IACtDwL,QCbAI,EAAY7B,EAAA/V,UAIhB6X,EAAiB,SAAU7L,GACzB,GAAU5O,MAAN4O,EAAiB,MAAM4L,EAAU,wBAA0B5L,GAC/D,OAAOA,GCJT8L,EAAiB,SAAU9L,GACzB,OAAO2L,EAAcE,EAAuB7L,iBCH9C+L,EAAiB,SAAUC,GACzB,MAA0B,mBAAZA,GCDhBC,EAAiB,SAAUjM,GACzB,MAAoB,iBAANA,EAAwB,OAAPA,EAAc+L,EAAW/L,2CCAtDkM,EAAY,SAAUF,GACxB,OAAOD,EAAWC,GAAYA,OAAW5a,GAG3C+a,EAAiB,SAAUC,EAAWrY,GACpC,OAAOS,UAAU3E,OAAS,EAAIqc,EAAUnC,EAAOqC,IAAcrC,EAAOqC,IAAcrC,EAAOqC,GAAWrY,aCNtGsY,EAAiBjB,EAAY,GAAGkB,0DCAhCC,EAAiBJ,EAAW,YAAa,cAAgB,GCCzD,IAIIK,EAAOC,EAJPC,EAAU3C,EAAA4C,QACVC,EAAO7C,EAAA8C,KACPC,GAAWJ,GAAWA,EAAQK,UAAYH,GAAQA,EAAKI,QACvDC,GAAKH,IAAYA,GAASI,GAG1BD,KAIFR,GAHAD,EAAQS,GAAGvB,MAAM,MAGD,GAAK,GAAKc,EAAM,GAAK,EAAI,IAAMA,EAAM,GAAKA,EAAM,MAK7DC,GAAWF,MACdC,EAAQD,EAAUzK,MAAK,iBACT0K,EAAM,IAAM,MACxBA,EAAQD,EAAUzK,MAAK,oBACZ2K,GAAWD,EAAM,IAIhCW,EAAiBV,ECrBjBW,IAAmBzd,OAAOqM,wBAA0BmO,GAAM,WACxD,IAAIkD,EAASla,SAGb,OAAQyH,OAAOyS,MAAa1d,OAAO0d,aAAmBla,UAEnDA,OAAOqC,MAAQ2X,GAAcA,EAAa,MCR/CG,EAAiBF,IACXja,OAAOqC,MACkB,UADd6F,EAAAlJ,QACLgB,OAAOU,UCCnB,IAAI0Z,GAASxD,EAAApa,OAEb6d,EAAiBF,EAAoB,SAAUtN,GAC7C,MAAoB,gBAAJ,IAAFA,EAAE,YAAA3E,EAAAlJ,QAAF6N,KACZ,SAAUA,GACZ,IAAIsH,EAAU6E,EAAW,UACzB,OAAOJ,EAAWzE,IAAY+E,EAAc/E,EAAQhU,UAAWia,GAAOvN,kBCVpEyN,GAAS1D,EAAAnP,OAEb8S,GAAiB,SAAU1B,GACzB,IACE,OAAOyB,GAAOzB,GACd,MAAO3X,GACP,MAAO,WCJX,IAAIsZ,GAAY5D,EAAA/V,UAGhB4Z,GAAiB,SAAU5B,GACzB,GAAID,EAAWC,GAAW,OAAOA,EACjC,MAAM2B,GAAUD,GAAY1B,GAAY,uBCL1C6B,GAAiB,SAAUhD,EAAGiD,GAC5B,IAAIC,EAAOlD,EAAEiD,GACb,OAAe,MAARC,OAAe3c,EAAYwc,GAAUG,WCD1CC,GAAYjE,EAAA/V,UAIhBia,GAAiB,SAAU3S,EAAO4S,GAChC,IAAI5Z,EAAI6Z,EACR,GAAa,WAATD,GAAqBnC,EAAWzX,EAAKgH,EAAM3F,YAAcsW,EAASkC,EAAM1D,EAAKnW,EAAIgH,IAAS,OAAO6S,EACrG,GAAIpC,EAAWzX,EAAKgH,EAAMgG,WAAa2K,EAASkC,EAAM1D,EAAKnW,EAAIgH,IAAS,OAAO6S,EAC/E,GAAa,WAATD,GAAqBnC,EAAWzX,EAAKgH,EAAM3F,YAAcsW,EAASkC,EAAM1D,EAAKnW,EAAIgH,IAAS,OAAO6S,EACrG,MAAMH,GAAU,yDCdlBI,IAAiB,eCGbC,GAAiB1e,OAAO+G,eAE5B4X,GAAiB,SAAU9d,EAAKU,GAC9B,IACEmd,GAAetE,EAAQvZ,EAAK,CAAEU,MAAOA,EAAOR,cAAc,EAAME,UAAU,IAC1E,MAAOyD,GACP0V,EAAOvZ,GAAOU,EACd,OAAOA,GCPX,IAAIqd,GAAS,qBACTC,GAAQzE,EAAOwE,uBAAWD,GAAUC,GAAQ,IAEhDE,GAAiBD,ICHhBE,GAAiB,SAAUle,EAAKU,GAC/B,OAAOud,GAAMje,KAASie,GAAMje,QAAiBY,IAAVF,EAAsBA,EAAQ,MAChE,WAAY,IAAIkF,KAAK,CACtB4W,QAAS,SACT2B,KAAyB,SACzBC,UAAW,4CACXC,QAAS,2DACTzS,OAAQ,qDCPN0S,GAAS/E,EAAApa,OAIbof,GAAiB,SAAU/C,GACzB,OAAO8C,GAAOjD,EAAuBG,KCLvC,IAAIgD,GAAiB5D,EAAY,GAAGlW,gBAIpC+Z,GAAiBtf,OAAOuV,QAAU,SAAgBlF,EAAIxP,GACpD,OAAOwe,GAAeD,GAAS/O,GAAKxP,WCNlC0e,GAAK,EACLC,GAAUrF,KAAKsF,SACfC,GAAWjE,EAAY,GAAIzV,UAE/B2Z,GAAiB,SAAU9e,GACzB,MAAO,gBAAqBY,IAARZ,EAAoB,GAAKA,GAAO,KAAO6e,KAAWH,GAAKC,GAAS,KCAtF,IAAII,GAAwBb,GAAO,OAC/Bc,GAASzF,EAAA5W,OACTsc,GAAYD,IAAUA,GAAY,IAClCE,GAAwBpC,EAAoBkC,GAASA,IAAUA,GAAOG,eAAiBL,GAE3FM,GAAiB,SAAUhb,GACzB,IAAKqa,GAAOM,GAAuB3a,KAAWwY,GAAuD,iBAA/BmC,GAAsB3a,GAAoB,CAC9G,IAAIib,EAAc,UAAYjb,EAC1BwY,GAAiB6B,GAAOO,GAAQ5a,GAClC2a,GAAsB3a,GAAQ4a,GAAO5a,GAErC2a,GAAsB3a,GADb0Y,GAAqBmC,GACAA,GAAUI,GAEVH,GAAsBG,GAEtD,OAAON,GAAsB3a,ICdjC,IAAIkb,GAAY/F,EAAA/V,UACZ+b,GAAeH,GAAgB,eAInCI,EAAiB,SAAU1U,EAAO4S,GAChC,IAAKjC,EAAS3Q,IAAUkS,EAASlS,GAAQ,OAAOA,EAChD,IACItJ,EADAie,EAAepC,GAAUvS,EAAOyU,IAEpC,GAAIE,EAAc,CAGhB,QAFa7e,IAAT8c,IAAoBA,EAAO,WAC/Blc,EAASyY,EAAKwF,EAAc3U,EAAO4S,IAC9BjC,EAASja,IAAWwb,EAASxb,GAAS,OAAOA,EAClD,MAAM8d,GAAU,2CAGlB,YADa1e,IAAT8c,IAAoBA,EAAO,UACxBD,GAAoB3S,EAAO4S,ICnBpCgC,EAAiB,SAAUlE,GACzB,IAAIxb,EAAMwf,EAAYhE,EAAU,UAChC,OAAOwB,EAAShd,GAAOA,EAAMA,EAAM,cCJjC2f,GAAWpG,EAAAxH,SAEX6N,GAASnE,EAASkE,KAAalE,EAASkE,GAAStN,eAErDwN,GAAiB,SAAUrQ,GACzB,OAAOoQ,GAASD,GAAStN,cAAc7C,GAAM,ICH/CsQ,IAAkBpG,IAAgBC,GAAM,WAEtC,OAEQ,GAFDxa,OAAO+G,eAAe2Z,GAAc,OAAQ,IAAK,CACtDrb,IAAK,WAAc,OAAO,KACzBmB,KrCCL,IsCQSoa,MtCRLC,GAA4B7gB,OAAOmM,4BAIvC8N,EAAYM,EAAcsG,GAA4B,SAAkCrZ,EAAG2W,GAGzF,GAFA3W,EAAI2U,EAAgB3U,GACpB2W,EAAIoC,EAAcpC,GACdwC,GAAgB,IAClB,OAAOE,GAA0BrZ,EAAG2W,GACpC,MAAOzZ,IACT,GAAI4a,GAAO9X,EAAG2W,GAAI,OAAOhD,GAA0BL,EAAKF,EAA8BpT,EAAG2W,GAAI3W,EAAE2W,WuCfjG2C,GAAiBvG,GAAeC,GAAM,WAEpC,OAGgB,IAHTxa,OAAO+G,gBAAe,cAA6B,YAAa,CACrExF,MAAO,GACPN,UAAU,IACT0C,oBCPDod,GAAS3G,EAAAnP,OACT+V,GAAY5G,EAAA/V,UAGhB4c,GAAiB,SAAU5E,GACzB,GAAIC,EAASD,GAAW,OAAOA,EAC/B,MAAM2E,GAAUD,GAAO1E,GAAY,sBFFrC,IAAI6E,GAAY9G,EAAA/V,UAEZ8c,GAAkBnhB,OAAO+G,eAEzBqa,GAA4BphB,OAAOmM,yBACnCkV,GAAa,aACbC,GAAe,eACfC,GAAW,WAIfX,GAAYrG,EAAcuG,GAA0B,SAAwBtZ,EAAG2W,EAAGqD,GAIhF,GAHAP,GAASzZ,GACT2W,EAAIoC,EAAcpC,GAClB8C,GAASO,GACQ,mBAANha,GAA0B,cAAN2W,GAAqB,UAAWqD,GAAcD,MAAYC,IAAeA,EAAmB,SAAG,CAC5H,IAAIC,EAAUL,GAA0B5Z,EAAG2W,GACvCsD,GAAWA,EAAgB,WAC7Bja,EAAE2W,GAAKqD,EAAWjgB,MAClBigB,EAAa,CACXzgB,aAAcugB,MAAgBE,EAAaA,EAAuB,aAAIC,EAAoB,aAC1F3gB,WAAYugB,MAAcG,EAAaA,EAAqB,WAAIC,EAAkB,WAClFxgB,UAAU,IAGd,OAAOkgB,GAAgB3Z,EAAG2W,EAAGqD,IAC7BL,GAAkB,SAAwB3Z,EAAG2W,EAAGqD,GAIlD,GAHAP,GAASzZ,GACT2W,EAAIoC,EAAcpC,GAClB8C,GAASO,GACLb,GAAgB,IAClB,OAAOQ,GAAgB3Z,EAAG2W,EAAGqD,GAC7B,MAAO9c,IACT,GAAI,QAAS8c,GAAc,QAASA,EAAY,MAAMN,GAAU,2BAEhE,MADI,UAAWM,IAAYha,EAAE2W,GAAKqD,EAAWjgB,OACtCiG,GGtCTka,GAAiBnH,EAAc,SAAUtN,EAAQpM,EAAKU,GACpD,OAAOqf,GAAuB3T,EAAQpM,EAAKsa,EAAyB,EAAG5Z,KACrE,SAAU0L,EAAQpM,EAAKU,GAEzB,OADA0L,EAAOpM,GAAOU,EACP0L,gBCJL0U,GAAmBlG,EAAY/U,SAASV,UAGvCoW,EAAW0C,GAAA8C,iBACd9C,GAAA8C,cAAsB,SAAUvR,GAC9B,OAAOsR,GAAiBtR,KAI5BwR,GAAiB/C,GAAA8C,wBCTbE,GAAU1H,EAAA2H,QAEdC,GAAiB5F,EAAW0F,KAAO,cAAmBnH,KAAKkH,GAAcC,YCHrEG,GAAOlD,GAAO,QAElBmD,GAAiB,SAAUrhB,GACzB,OAAOohB,GAAKphB,KAASohB,GAAKphB,GAAO8e,GAAI9e,eCNvCshB,GAAiB,GCUjB,IAGIC,GAAKC,GAAKC,GAHVC,GAA6B,6BAC7BC,GAAYpI,EAAA/V,UACZoe,GAAUrI,EAAA2H,QAgBd,GAAIC,IAAmBlD,GAAAlJ,MAAc,CACnC,IAAI8M,GAAQ5D,GAAAlJ,QAAiBkJ,GAAAlJ,MAAe,IAAI6M,IAC5CE,GAAQlH,EAAYiH,GAAMrd,KAC1Bud,GAAQnH,EAAYiH,GAAMtd,KAC1Byd,GAAQpH,EAAYiH,GAAMjY,KAC9B2X,GAAM,SAAU/R,EAAIyS,GAClB,GAAIF,GAAMF,GAAOrS,GAAK,MAAM,IAAImS,GAAUD,IAG1C,OAFAO,EAASC,OAAS1S,EAClBwS,GAAMH,GAAOrS,EAAIyS,GACVA,GAETT,GAAM,SAAUhS,GACd,OAAOsS,GAAMD,GAAOrS,IAAO,IAE7BiS,GAAM,SAAUjS,GACd,OAAOuS,GAAMF,GAAOrS,QAEjB,CACL,IAAI2S,GAAQd,GAAU,SACtBC,GAAWa,KAAS,EACpBZ,GAAM,SAAU/R,EAAIyS,GAClB,GAAIxD,GAAOjP,EAAI2S,IAAQ,MAAM,IAAIR,GAAUD,IAG3C,OAFAO,EAASC,OAAS1S,EAClBqR,GAA4BrR,EAAI2S,GAAOF,GAChCA,GAETT,GAAM,SAAUhS,GACd,OAAOiP,GAAOjP,EAAI2S,IAAS3S,EAAG2S,IAAS,IAEzCV,GAAM,SAAUjS,GACd,OAAOiP,GAAOjP,EAAI2S,KAItBC,GAAiB,CACfxY,IAAK2X,GACL/c,IAAKgd,GACLjd,IAAKkd,GACLY,QAnDY,SAAU7S,GACtB,OAAOiS,GAAIjS,GAAMgS,GAAIhS,GAAM+R,GAAI/R,EAAI,KAmDnC8S,UAhDc,SAAUC,GACxB,OAAO,SAAU/S,GACf,IAAIuF,EACJ,IAAK0G,EAASjM,KAAQuF,EAAQyM,GAAIhS,IAAKpN,OAASmgB,EAC9C,MAAMZ,GAAU,0BAA4BY,EAAO,aACnD,OAAOxN,YCrBTyN,GAAoB3c,SAAS/C,UAE7B2f,GAAgB/I,GAAeva,OAAOmM,yBAEtCoX,GAASjE,GAAO+D,GAAmB,YAKvCG,GAAiB,CACfC,OAAQF,GACRG,OALWH,IAA0D,cAApD,aAA2Cte,KAM5D0e,aALiBJ,MAAYhJ,GAAgBA,GAAe+I,GAAcD,GAAmB,QAAQtiB,gBCHnG4iB,aAEAC,GAAmBX,GAAA5d,IACnBwe,GAAuBZ,GAAAC,QACvBY,GAAW7Y,OAAOA,QAAQ8Q,MAAM,WAEnCgI,GAAiB,SAAUvc,EAAG3G,EAAKU,EAAOyiB,GACzC,IAIIpO,EAJAqO,IAASD,KAAYA,EAAQC,OAC7BC,IAASF,KAAYA,EAAQljB,WAC7BqjB,IAAcH,KAAYA,EAAQG,YAClClf,EAAO+e,QAA4BviB,IAAjBuiB,EAAQ/e,KAAqB+e,EAAQ/e,KAAOpE,EAE9Dub,EAAW7a,KACoB,YAA7B0J,OAAOhG,GAAM/D,MAAM,EAAG,KACxB+D,EAAO,IAAMgG,OAAOhG,GAAM+M,QAAO,qBAAuB,MAAQ,OAE7DsN,GAAO/d,EAAO,SAAM6iB,IAAoC7iB,EAAM0D,OAASA,IAC1Eyc,GAA4BngB,EAAO,OAAQ0D,IAE7C2Q,EAAQiO,GAAqBtiB,IAClBkL,SACTmJ,EAAMnJ,OAASqX,GAASO,KAAoB,iBAARpf,EAAmBA,EAAO,MAG9DuC,IAAM4S,GAIE6J,GAEAE,GAAe3c,EAAE3G,KAC3BqjB,GAAS,UAFF1c,EAAE3G,GAIPqjB,EAAQ1c,EAAE3G,GAAOU,EAChBmgB,GAA4Bla,EAAG3G,EAAKU,IATnC2iB,EAAQ1c,EAAE3G,GAAOU,EAChBod,GAAU9d,EAAKU,KAUrBmF,SAAS/C,UAAW,YAAY,WACjC,OAAOyY,EAAWhZ,OAASwgB,GAAiBxgB,MAAMqJ,QAAUoV,GAAcze,gBCpCnEkhB,qBCRLC,GAAOpK,KAAKqK,KACZC,GAAQtK,KAAKuK,MAIjBC,GAAiB,SAAUtI,GACzB,IAAIuI,GAAUvI,EAEd,OAAOuI,GAAWA,GAAqB,IAAXA,EAAe,GAAKA,EAAS,EAAIH,GAAQF,IAAMK,ICN7E,IAAIC,GAAM1K,KAAK2K,IACXC,GAAM5K,KAAK6K,IAKfC,GAAiB,SAAUC,EAAOhlB,GAChC,IAAIilB,EAAUR,GAAoBO,GAClC,OAAOC,EAAU,EAAIN,GAAIM,EAAUjlB,EAAQ,GAAK6kB,GAAII,EAASjlB,cCR3DklB,GAAMjL,KAAK6K,IAIfK,GAAiB,SAAUhJ,GACzB,OAAOA,EAAW,EAAI+I,GAAIT,GAAoBtI,GAAW,kBAAoB,GCH/EiJ,GAAiB,SAAUpc,GACzB,OAAOmc,GAASnc,EAAIhJ,SCAtB,IAAIqlB,GAAe,SAAUC,GAC3B,OAAO,SAAUC,EAAOC,EAAIC,GAC1B,IAGIpkB,EAHAiG,EAAI2U,EAAgBsJ,GACpBvlB,EAASolB,GAAkB9d,GAC3B0d,EAAQD,GAAgBU,EAAWzlB,GAIvC,GAAIslB,GAAeE,GAAMA,GAAE,KAASxlB,EAASglB,GAG3C,IAFA3jB,EAAQiG,EAAE0d,OAEG3jB,EAAO,OAAO,OAEtB,KAAMrB,EAASglB,EAAOA,IAC3B,IAAKM,GAAeN,KAAS1d,IAAMA,EAAE0d,KAAWQ,EAAI,OAAOF,GAAeN,GAAS,EACnF,OAAQM,IAAe,QAI7BI,GAAiB,CAGfC,SAAUN,IAAa,GAGvB9c,QAAS8c,IAAa,KC3BpB9c,QAGAqd,GAAOrK,EAAY,GAAGhV,MAE1Bsf,GAAiB,SAAU9Y,EAAQ+Y,GACjC,IAGInlB,EAHA2G,EAAI2U,EAAgBlP,GACpBhN,EAAI,EACJoC,EAAS,GAEb,IAAKxB,KAAO2G,GAAI8X,GAAO6C,GAAYthB,IAAQye,GAAO9X,EAAG3G,IAAQilB,GAAKzjB,EAAQxB,QAEnEmlB,EAAM9lB,OAASD,GAAOqf,GAAO9X,EAAG3G,EAAMmlB,EAAM/lB,SAACgmB,GACzC5jB,EAAQxB,IAAQilB,GAAKzjB,EAAQxB,IAExC,OAAOwB,OCjBA6jB,SPELC,IQFJC,GAAiB,CACf,cACA,iBACA,gBACA,uBACA,iBACA,WACA,YRLe3W,OAAmB,SAAU,aAK9C6U,GAAYtkB,OAAOkM,qBAAuB,SAA6B1E,GACrE,OAAOue,GAAmBve,EAAG2e,KOR/BD,GAAYlmB,OAAOqM,sBEKnB,IAAIga,GAAS5K,EAAY,GAAGhM,QAG5B6W,GAAiB9J,EAAW,UAAW,YAAc,SAAiBnM,GACpE,IAAItQ,EAAOukB,GAA4BrD,GAAS5Q,IAEhD,OAD4B6V,GACGG,GAAOtmB,EADVmmB,GACsC7V,IAAOtQ,GCP3EwmB,GAAiB,SAAUjmB,EAAQmM,EAAQ+Z,GAIzC,IAHA,IAAIzmB,EAAOumB,GAAQ7Z,GACf1F,EAAiB6Z,GACjBzU,EAA2B8N,EACtBha,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAAK,CACpC,IAAIY,EAAMd,EAAKE,GACVqf,GAAOhf,EAAQO,IAAU2lB,GAAclH,GAAOkH,EAAY3lB,IAC7DkG,EAAezG,EAAQO,EAAKsL,EAAyBM,EAAQ5L,gBCT/D4lB,GAAW,kBAEXC,GAAW,SAAUC,EAASC,GAChC,IAAIrlB,EAAQslB,GAAKC,GAAUH,IAC3B,OAAOplB,GAASwlB,IACZxlB,GAASylB,KACT5K,EAAWwK,GAAapM,EAAMoM,KAC5BA,IAGJE,GAAYJ,GAASO,UAAY,SAAUC,GAC7C,OAAOjc,OAAOic,GAAQlV,QAAQyU,GAAa,KAAKU,eAG9CN,GAAOH,GAASU,KAAO,GACvBJ,GAASN,GAASW,OAAS,IAC3BN,GAAWL,GAASY,SAAW,IAEnCC,GAAiBb,GCEjBc,EAAiB,SAAUxD,EAASvX,GAClC,IAGYnM,EAAQO,EAAK4mB,EAAgBC,EAAgBjnB,EAHrDknB,EAAS3D,EAAQ1jB,OACjBsnB,EAAS5D,EAAQ6D,OACjBC,EAAS9D,EAAQ+D,KASrB,GANEznB,EADEsnB,EACOxN,EACA0N,EACA1N,EAAOuN,IAAWhJ,GAAUgJ,EAAQ,KAEnCvN,EAAOuN,IAAW,IAAIhkB,UAEtB,IAAK9C,KAAO4L,EAAQ,CAQ9B,GAPAib,EAAiBjb,EAAO5L,GAGtB4mB,EAFEzD,EAAQG,aACV1jB,EAAUunB,GAA4B1nB,EAAQO,KACfJ,EAAWc,MACpBjB,EAAOO,IACtB0mB,GAASK,EAAS/mB,EAAM8mB,GAAUG,EAAS,IAAM,KAAOjnB,EAAKmjB,EAAQiE,cAE5CxmB,IAAnBgmB,EAA8B,CAC3C,SAAyB,IAAdC,EAAc,YAAAhc,EAAAlJ,QAAdklB,WAAuC,IAAdD,EAAc,YAAA/b,EAAAlJ,QAAdilB,IAAgB,SACpDlB,GAA0BmB,EAAgBD,IAGxCzD,EAAQne,MAAS4hB,GAAkBA,EAAe5hB,OACpD6b,GAA4BgG,EAAgB,QAAQ,GAGtD3D,GAASzjB,EAAQO,EAAK6mB,EAAgB1D,eClDtCkE,GAAoBxhB,SAAS/C,UAC7BwkB,GAAQD,GAAkBpjB,MAC1BsjB,GAAOF,GAAkB1mB,KAG7B6mB,GAAmC,iBAAX1iB,SAAuBA,QAAQb,QAAU4V,EAAc0N,GAAKzhB,KAAKwhB,IAAS,WAChG,OAAOC,GAAKtjB,MAAMqjB,GAAOtjB,uBCH3ByjB,GAAiB3mB,MAAMC,SAAW,SAAiBya,GACjD,MAA4B,SAArBT,EAAQS,oBCHbkM,GAAO,GAEXA,GAHoBtI,GAAgB,gBAGd,IAEtBuI,GAAkC,eAAjBvd,OAAOsd,ICDxB,IAAIE,GAAgBxI,GAAgB,eAChCyI,GAAStO,EAAApa,OAGT2oB,GAAuE,aAAnD/M,EAAW,WAAc,OAAO/W,UAArB,IAUnC+jB,GAAiBJ,GAAwB5M,EAAa,SAAUvL,GAC9D,IAAI7I,EAAGqhB,EAAKxmB,EACZ,YAAcZ,IAAP4O,EAAmB,YAAqB,OAAPA,EAAc,OAEM,iBAAhDwY,EAXD,SAAUxY,EAAIxP,GACzB,IACE,OAAOwP,EAAGxP,GACV,MAAO6D,KAQSokB,CAAOthB,EAAIkhB,GAAOrY,GAAKoY,KAA8BI,EAEnEF,GAAoB/M,EAAWpU,GAEH,WAA3BnF,EAASuZ,EAAWpU,KAAmB4U,EAAW5U,EAAEuhB,QAAU,YAAc1mB,GCzBnF,IAAI2mB,GAAS5O,EAAAnP,OAEbge,GAAiB,SAAU5M,GACzB,GAA0B,WAAtBuM,GAAQvM,GAAwB,MAAMhY,UAAU,6CACpD,OAAO2kB,GAAO3M,QCGP6M,eCJTC,GAAiBnpB,OAAOD,MAAQ,SAAcyH,GAC5C,OAAOue,GAAmBve,EAAG4e,KDG/B8C,GAAY3O,IAAgBuG,GAA0B9gB,OAAO0Q,iBAAmB,SAA0BlJ,EAAG4hB,GAC3GnI,GAASzZ,OACT,IAII3G,EAJAiG,EAAQqV,EAAgBiN,GACxBrpB,EAAOopB,GAAWC,GAClBlpB,EAASH,EAAKG,OACdglB,EAAQ,EAELhlB,EAASglB,GAAOtE,GAAuBpZ,EAAG3G,EAAMd,EAAKmlB,KAAUpe,EAAMjG,IAC5E,OAAO2G,aEhBT6hB,GAAiB7M,EAAW,WAAY,mBCOxC,IA2CI8M,GClCYC,GDLZC,GAAWtH,GAAU,YAErBuH,GAAmB,aAEnBC,GAAY,SAAUC,GACxB,MAAOC,WAAmBD,EAAnBC,KAAAA,WAILC,GAA4B,SAAUC,GACxCA,EAAgBC,MAAML,GAAU,KAChCI,EAAgBE,QAChB,IAAIC,EAAOH,EAAgBI,aAAalqB,OAExC,OADA8pB,EAAkB,KACXG,GA0BLE,GAAkB,WACpB,IACEb,GAAkB,IAAIc,cAAc,YACpC,MAAO1lB,IAzBoB,IAIzB2lB,EAFAC,EAwBJH,GAAqC,oBAAZvX,SACrBA,SAAS2X,QAAUjB,GACjBO,GAA0BP,MA1B5BgB,EAAS5J,GAAsB,WAG5B8J,MAAMC,QAAU,OACvBpB,GAAA5V,YAAiB6W,GAEjBA,EAAOtX,IAAM/H,OALJ,gBAMTof,EAAiBC,EAAOI,cAAc9X,UACvB+X,OACfN,EAAeN,MAAML,GAAU,sBAC/BW,EAAeL,QACRK,EAAejjB,GAiBlByiB,GAA0BP,QAC9B,IAAIppB,EAASkmB,GAAAlmB,OACNA,YAAiBiqB,GAAyB,UAAE/D,GAAYlmB,IAC/D,OAAOiqB,MAGThI,GAAWqH,KAAY,EAIvBoB,GAAiB5qB,OAAO0N,QAAU,SAAgBlG,EAAG4hB,GACnD,IAAI/mB,EAQJ,OAPU,OAANmF,GACFiiB,GAA0B,UAAIxI,GAASzZ,GACvCnF,EAAS,IAAIonB,GACbA,GAA0B,UAAI,KAE9BpnB,EAAOmnB,IAAYhiB,GACdnF,EAAS8nB,UACM1oB,IAAf2nB,EAA2B/mB,EAAS6mB,GAAyB7mB,EAAQ+mB,iBC7E1E9E,GCEJuG,GAAiB,SAAU5d,EAAQpM,EAAKU,GACtC,IAAIupB,EAAcvK,EAAc1f,GAC5BiqB,KAAe7d,EAAQ2T,GAAuB3T,EAAQ6d,EAAa3P,EAAyB,EAAG5Z,IAC9F0L,EAAO6d,GAAevpB,GCH7B,IAAIwpB,GAAQ3Q,EAAAzY,MACRqpB,GAAM7Q,KAAK2K,IAEfmG,GAAiB,SAAUzjB,EAAG0jB,EAAOC,GAKnC,IAJA,IAAIjrB,EAASolB,GAAkB9d,GAC3B8B,EAAI2b,GAAgBiG,EAAOhrB,GAC3BkrB,EAAMnG,QAAwBxjB,IAAR0pB,EAAoBjrB,EAASirB,EAAKjrB,GACxDmC,EAAS0oB,GAAMC,GAAII,EAAM9hB,EAAG,IACvB+hB,EAAI,EAAG/hB,EAAI8hB,EAAK9hB,IAAK+hB,IAAKR,GAAexoB,EAAQgpB,EAAG7jB,EAAE8B,IAE/D,OADAjH,EAAOnC,OAASmrB,EACThpB,GFTT,IAAIipB,GAA+B,iBAAVjR,QAAsBA,QAAUra,OAAOkM,oBAC5DlM,OAAOkM,oBAAoBmO,QAAU,GAWzCkP,GAAmB,SAA6BlZ,GAC9C,OAAOib,IAA8B,UAAf1P,EAAQvL,GAVX,SAAUA,GAC7B,IACE,OAAMkb,GAAsBlb,GAC5B,MAAO3L,GACP,OAAOumB,GAAWK,KAOhBE,CAAenb,GAAEkb,GACIpP,EAAgB9L,SGnBlCob,SCATC,GAAiBjQ,EAAY,GAAGva,ODAhCuqB,GAAYxL,gBEAZ0L,GAAiBvR,SCCbwG,GAEJgL,GAAiB,SAAUC,GACzB,IAAIroB,EAASmoB,GAAAnoB,SAAgBmoB,GAAAnoB,OAAc,IACtC8b,GAAO9b,EAAQqoB,IAAIC,GAAkBtoB,EAAQqoB,EAAM,CACtDtqB,MAAOkqB,GAA+BI,gBCRtCjL,GAIAmL,GAAgB9L,GAAgB,eAEpC+L,GAAiB,SAAU1rB,EAAQ2rB,EAAKnE,GAClCxnB,IAAWwnB,IAAQxnB,EAASA,EAAOqD,WACnCrD,IAAWgf,GAAOhf,EAAQyrB,KAAaG,GAC1B5rB,EAAQyrB,GAAe,CAAEhrB,cAAc,EAAMQ,MAAO0qB,eCLnEE,GAAO1Q,EAAYA,EAAY9U,MAGnCylB,GAAiB,SAAUznB,EAAI0nB,GAE7B,OADApO,GAAUtZ,QACMlD,IAAT4qB,EAAqB1nB,EAAK+V,EAAcyR,GAAKxnB,EAAI0nB,GAAQ,WAC9D,OAAO1nB,EAAGG,MAAMunB,EAAMxnB,6BCHtBynB,GAAO,aACPC,GAAQ,GACRC,GAAYhQ,EAAW,UAAW,aAClCiQ,GAAiB,2BACjBC,GAAOjR,EAAYgR,GAAkBhS,MACrCkS,IAAuBF,GAAkBhS,KAAK6R,IAE9CM,GAAsB,SAAuBvQ,GAC/C,IAAKD,EAAWC,GAAW,OAAO,EAClC,IAEE,OADAmQ,GAAUF,GAAMC,GAAOlQ,IAChB,EACP,MAAO3X,GACP,OAAO,IAIPmoB,GAAsB,SAAuBxQ,GAC/C,IAAKD,EAAWC,GAAW,OAAO,EAClC,OAAQuM,GAAQvM,IACd,IAAK,gBACL,IAAK,oBACL,IAAK,yBAA0B,OAAO,EAExC,IAIE,OAAOsQ,MAAyBD,GAAKD,GAAmB5K,GAAcxF,IACtE,MAAO3X,GACP,OAAO,IAIXmoB,GAAoBhnB,MAAO,EAI3BinB,IAAkBN,IAAahS,GAAM,WACnC,IAAIuS,EACJ,OAAOH,GAAoBA,GAAoBprB,QACzCorB,GAAoB5sB,UACpB4sB,IAAoB,WAAcG,GAAS,MAC5CA,KACFF,GAAsBD,GC7C3B,IAAII,GAAU/M,GAAgB,WAC1BgN,GAAQ7S,EAAAzY,MAIZurB,GAAiB,SAAUC,GACzB,IAAIC,EASF,OARE9E,GAAQ6E,KACVC,EAAID,EAAchjB,aAEd2iB,GAAcM,KAAOA,IAAMH,IAAS3E,GAAQ8E,EAAEzpB,aACzC2Y,EAAS8Q,IAEN,QADVA,EAAIA,EAAEJ,QAFuDI,OAAI3rB,SAKtDA,IAAN2rB,EAAkBH,GAAQG,GCjBrCC,GAAiB,SAAUF,EAAejtB,GACxC,OAAO,IAAKgtB,GAAwBC,GAA7B,CAAwD,IAAXjtB,EAAe,EAAIA,ICEzE,IAAIotB,GAAO7R,EAAY,GAAGhV,MAGtB8mB,GAAe,SAAUnK,GAC3B,IAAIoK,EAAiB,GAARpK,EACTqK,EAAoB,GAARrK,EACZsK,EAAkB,GAARtK,EACVuK,EAAmB,GAARvK,EACXwK,EAAwB,GAARxK,EAChByK,EAA2B,GAARzK,EACnB0K,EAAmB,GAAR1K,GAAawK,EAC5B,OAAO,SAAUnI,EAAOsI,EAAY1B,EAAM2B,GASxC,IARA,IAOIzsB,EAAOc,EAPPmF,EAAI4X,GAASqG,GACb3jB,EAAOka,EAAcxU,GACrBymB,EAAgB7B,GAAK2B,EAAY1B,GACjCnsB,EAASolB,GAAkBxjB,GAC3BojB,EAAQ,EACRxX,EAASsgB,GAAkBX,GAC3B/sB,EAASktB,EAAS9f,EAAO+X,EAAOvlB,GAAUutB,GAAaI,EAAmBngB,EAAO+X,EAAO,QAAKhkB,EAE3FvB,EAASglB,EAAOA,IAAS,IAAI4I,GAAY5I,KAASpjB,KAEtDO,EAAS4rB,EADT1sB,EAAQO,EAAKojB,GACiBA,EAAO1d,GACjC4b,GACF,GAAIoK,EAAQltB,EAAO4kB,GAAS7iB,OACvB,GAAIA,EAAQ,OAAQ+gB,GACvB,KAAK,EAAG,OAAO,EACf,KAAK,EAAG,OAAO7hB,EACf,KAAK,EAAG,OAAO2jB,EACf,KAAK,EAAGoI,GAAKhtB,EAAQiB,QAChB,OAAQ6hB,GACb,KAAK,EAAG,OAAO,EACf,KAAK,EAAGkK,GAAKhtB,EAAQiB,GAI3B,OAAOqsB,GAAgB,EAAKF,GAAWC,EAAWA,EAAWrtB,QAIjE4tB,GAAiB,CAGfttB,QAAS2sB,GAAa,GAGtBtjB,IAAKsjB,GAAa,GAGlB7d,OAAQ6d,GAAa,GAGrBza,KAAMya,GAAa,GAGnBY,MAAOZ,GAAa,GAGpB3jB,KAAM2jB,GAAa,GAGnBa,UAAWb,GAAa,GAGxBc,aAAcd,GAAa,KC5BzB3sB,QAEA0tB,GAASpM,GAAU,UACnBqM,GAAS,SAETC,GAAevO,GAAgB,eAE/BwO,GAAmBxL,GAAAxY,IACnBikB,GAAmBzL,GAAAE,UAA8BoL,IAEjDI,GAAkB3uB,OAAgB,UAClC4uB,GAAUxU,EAAA5W,OACVqrB,GAAkBD,IAAWA,GAAiB,UAC9CE,GAAY1U,EAAA/V,UACZ0qB,GAAU3U,EAAA4U,QACVC,GAAazS,EAAW,OAAQ,aAChC0S,GAAiCjV,EACjCkV,GAAuBvO,GACvBwO,GAA4B7F,GAC5B8F,GAA6BzU,EAC7B0U,GAAO7T,EAAY,GAAGhV,MAEtB8oB,GAAaxQ,GAAO,WACpByQ,GAAyBzQ,GAAO,cAChC0Q,GAAyB1Q,GAAO,6BAChC2Q,GAAyB3Q,GAAO,6BAChC4Q,GAAwB5Q,GAAO,OAG/B6Q,IAAcb,KAAYA,GAAiB,YAAMA,GAAiB,UAAEc,UAGpEC,GAAsBvV,GAAeC,GAAM,WAC7C,OAES,GAFFoQ,GAAmBuE,GAAqB,GAAI,IAAK,CACtD9pB,IAAK,WAAc,OAAO8pB,GAAqB/rB,KAAM,IAAK,CAAE7B,MAAO,IAAKiF,MACtEA,KACD,SAAUgB,EAAG2W,EAAGqD,GACnB,IAAIuO,EAA4Bb,GAA+BP,GAAiBxQ,GAC5E4R,UAAkCpB,GAAgBxQ,GACtDgR,GAAqB3nB,EAAG2W,EAAGqD,GACvBuO,GAA6BvoB,IAAMmnB,IACrCQ,GAAqBR,GAAiBxQ,EAAG4R,IAEzCZ,GAEAa,GAAO,SAAUnH,EAAK3I,GACxB,IAAIxC,EAAS6R,GAAW1G,GAAO+B,GAAmBiE,IAOlD,OANAJ,GAAiB/Q,EAAQ,CACvBza,KAAMsrB,GACN1F,IAAKA,EACL3I,YAAaA,IAEV3F,IAAamD,EAAOwC,YAAcA,GAChCxC,GAGLuS,GAAkB,SAAwBzoB,EAAG2W,EAAGqD,GAC9Cha,IAAMmnB,IAAiBsB,GAAgBT,GAAwBrR,EAAGqD,GACtEP,GAASzZ,GACT,IAAI3G,EAAM0f,EAAcpC,GAExB,OADA8C,GAASO,GACLlC,GAAOiQ,GAAY1uB,IAChB2gB,EAAW1gB,YAIVwe,GAAO9X,EAAG8mB,KAAW9mB,EAAE8mB,IAAQztB,KAAM2G,EAAE8mB,IAAQztB,IAAO,GAC1D2gB,EAAaoJ,GAAmBpJ,EAAY,CAAE1gB,WAAYqa,EAAyB,GAAG,OAJjFmE,GAAO9X,EAAG8mB,KAASa,GAAqB3nB,EAAG8mB,GAAQnT,EAAyB,EAAG,KACpF3T,EAAE8mB,IAAQztB,IAAO,GAIVivB,GAAoBtoB,EAAG3G,EAAK2gB,IAC9B2N,GAAqB3nB,EAAG3G,EAAK2gB,IAGpC0O,GAAoB,SAA0B1oB,EAAG4hB,GACnDnI,GAASzZ,GACT,IAAI2oB,EAAahU,EAAgBiN,GAC7BrpB,EAAOopB,GAAWgH,GAAY1gB,OAAO2gB,GAAuBD,IAIhE,UAHSpwB,GAAM,SAAUc,GAClB0Z,IAAeO,EAAKuV,GAAuBF,EAAYtvB,IAAMovB,GAAgBzoB,EAAG3G,EAAKsvB,EAAWtvB,OAEhG2G,GAOL6oB,GAAwB,SAA8BnV,GACxD,IAAIiD,EAAIoC,EAAcrF,GAClBpa,EAAaga,EAAKuU,GAA4BjsB,KAAM+a,GACxD,QAAI/a,OAASurB,IAAmBrP,GAAOiQ,GAAYpR,KAAOmB,GAAOkQ,GAAwBrR,QAClFrd,IAAewe,GAAOlc,KAAM+a,KAAOmB,GAAOiQ,GAAYpR,IAAMmB,GAAOlc,KAAMkrB,KAAWlrB,KAAKkrB,IAAQnQ,KACpGrd,IAGFwvB,GAA4B,SAAkC9oB,EAAG2W,GACnE,IAAI9N,EAAK8L,EAAgB3U,GACrB3G,EAAM0f,EAAcpC,GACxB,GAAI9N,IAAOse,KAAmBrP,GAAOiQ,GAAY1uB,IAASye,GAAOkQ,GAAwB3uB,GAAzF,CACA,IAAIJ,EAAayuB,GAA+B7e,EAAIxP,GAIpD,OAHIJ,IAAc6e,GAAOiQ,GAAY1uB,IAAUye,GAAOjP,EAAIie,KAAWje,EAAGie,IAAQztB,KAC9EJ,EAAWK,YAAa,GAEnBL,IAGL8vB,GAAuB,SAA6B/oB,GACtD,IAAIwe,EAAQoJ,GAA0BjT,EAAgB3U,IAClDnF,EAAS,GAIb,UAHS2jB,GAAO,SAAUnlB,GACnBye,GAAOiQ,GAAY1uB,IAASye,GAAO6C,GAAYthB,IAAMyuB,GAAKjtB,EAAQxB,MAElEwB,GAGL+tB,GAAyB,SAA+B5oB,GAC1D,IAAIgpB,EAAsBhpB,IAAMmnB,GAC5B3I,EAAQoJ,GAA0BoB,EAAsBhB,GAAyBrT,EAAgB3U,IACjGnF,EAAS,GAMb,UALS2jB,GAAO,SAAUnlB,IACpBye,GAAOiQ,GAAY1uB,IAAU2vB,IAAuBlR,GAAOqP,GAAiB9tB,IAC9EyuB,GAAKjtB,EAAQktB,GAAW1uB,OAGrBwB,GAqHT,GAhHKob,IACHmR,GAAU,WACR,GAAIlS,EAAcmS,GAAiBzrB,MAAO,MAAM0rB,GAAU,+BAC1D,IAAI5O,EAAerb,UAAU3E,aAA2BuB,IAAjBoD,UAAU,GAA+BokB,GAAUpkB,UAAU,SAAhCpD,EAChEonB,EAAMlJ,GAAIO,GACVuQ,EAAS,SAAUlvB,GACjB6B,OAASurB,IAAiB7T,EAAK2V,EAAQjB,GAAwBjuB,GAC/D+d,GAAOlc,KAAMkrB,KAAWhP,GAAOlc,KAAKkrB,IAASzF,KAAMzlB,KAAKkrB,IAAQzF,IAAO,GAC3EiH,GAAoB1sB,KAAMylB,EAAK1N,EAAyB,EAAG5Z,KAG7D,OADIgZ,GAAeqV,IAAYE,GAAoBnB,GAAiB9F,EAAK,CAAE9nB,cAAc,EAAM0J,IAAKgmB,IAC7FT,GAAKnH,EAAK3I,IAGnB2O,GAAkBD,GAAiB,UAEnC7K,GAAS8K,GAAiB,YAAY,WACpC,OAAOH,GAAiBtrB,MAAMylB,OAGhC9E,GAAS6K,GAAS,iBAAiB,SAAU1O,GAC3C,OAAO8P,GAAKrQ,GAAIO,GAAcA,MAGhCtF,EAA+ByV,GAC/BzP,GAAyBqP,GACzB/G,GAA2BgH,GAC3BjW,EAAmCqW,GACnChM,GAA8BiF,GAAgCgH,GAC9DrK,GAAgCkK,GAEhC3E,GAAiC,SAAUxmB,GACzC,OAAO+qB,GAAK/P,GAAgBhb,GAAOA,IAGjCsV,IAEF4U,GAAqBN,GAAiB,cAAe,CACnD9tB,cAAc,EACdsE,IAAK,WACH,OAAOqpB,GAAiBtrB,MAAM8c,eAIhC6D,GAAS4K,GAAiB,uBAAwB0B,GAAuB,CAAEpM,QAAQ,MAKzFuD,EAAE,CAAEK,QAAQ,EAAMvT,MAAM,EAAM2T,QAASxK,EAAe5X,MAAO4X,GAAiB,CAC5Eja,OAAQorB,QAGDzF,GAAWwG,KAAwB,SAAU1qB,GACpD2mB,GAAsB3mB,MAGxBuiB,EAAE,CAAElnB,OAAQiuB,GAAQxG,MAAM,EAAME,QAASxK,GAAiB,CAGxD3O,IAAO,SAAUjO,GACf,IAAIqmB,EAAS+B,GAAUpoB,GACvB,GAAIye,GAAOmQ,GAAwBvI,GAAS,OAAOuI,GAAuBvI,GAC1E,IAAIxJ,EAASkR,GAAQ1H,GAGrB,OAFAuI,GAAuBvI,GAAUxJ,EACjCgS,GAAuBhS,GAAUwJ,EAC1BxJ,GAITgT,OAAQ,SAAgBnkB,GACtB,IAAKsR,EAAStR,GAAM,MAAMuiB,GAAUviB,EAAM,oBAC1C,GAAI+S,GAAOoQ,GAAwBnjB,GAAM,OAAOmjB,GAAuBnjB,IAEzEokB,UAAW,WAAcf,IAAa,GACtCgB,UAAW,WAAchB,IAAa,KAGxCpI,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,QAASxK,EAAe5X,MAAO0U,GAAe,CAG9E7M,OA/HY,SAAgBlG,EAAG4hB,GAC/B,YAAsB3nB,IAAf2nB,EAA2BwB,GAAmBpjB,GAAK0oB,GAAkBtF,GAAmBpjB,GAAI4hB,IAiInGriB,eAAgBkpB,GAGhBvf,iBAAkBwf,GAGlB/jB,yBAA0BmkB,KAG5B9I,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,QAASxK,GAAiB,CAG1DvR,oBAAqBqkB,GAGrBlkB,sBAAuB+jB,KAKzB5I,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQzN,GAAM,WAAc0L,GAA8B,OAAU,CACpG7Z,sBAAuB,SAA+BgE,GACpD,OAAO6V,GAA8B9G,GAAS/O,OAM9C4e,GAAY,CACd,IAAI4B,IAAyBpT,GAAiBjD,GAAM,WAClD,IAAIkD,EAASkR,KAEb,MAA+B,UAAxBK,GAAW,CAACvR,KAEe,MAA7BuR,GAAW,CAAEzoB,EAAGkX,KAEc,MAA9BuR,GAAWjvB,OAAO0d,OAGzB8J,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,EAAME,OAAQ4I,IAAyB,CAE/DC,UAAW,SAAmBzgB,EAAI0gB,EAAUC,GAC1C,IAAIpsB,EAAO8mB,GAAW7mB,WAClBosB,EAAYF,EAChB,IAAKzU,EAASyU,SAAoBtvB,IAAP4O,KAAoBwN,EAASxN,GAMxD,OALKiY,GAAQyI,KAAWA,EAAW,SAAUlwB,EAAKU,GAEhD,GADI6a,EAAW6U,KAAY1vB,EAAQuZ,EAAKmW,EAAW7tB,KAAMvC,EAAKU,KACzDsc,EAAStc,GAAQ,OAAOA,IAE/BqD,EAAK,GAAKmsB,EACH1I,GAAM4G,GAAY,KAAMrqB,MAOrC,IAAKiqB,GAAgBL,IAAe,CAClC,IAAI0C,GAAUrC,GAAgBld,QAE9BoS,GAAS8K,GAAiBL,IAAc,SAAU5iB,GAEhD,OAAOkP,EAAKoW,GAAS9tB,SAKzB4oB,GAAe4C,GAASL,IAExBpM,GAAWmM,KAAU,SCzTjB1N,GAGAuQ,GAAe/W,EAAA5W,OACf4tB,GAAkBD,IAAgBA,GAAaxtB,UAEnD,GAAI4W,GAAe6B,EAAW+U,QAAoB,gBAAiBC,UAElC3vB,IAA/B0vB,KAAejR,aACd,CACD,IAAImR,GAA8B,GAE9BC,GAAgB,WAClB,IAAIpR,EAAcrb,UAAU3E,OAAS,QAAsBuB,IAAjBoD,UAAU,QAAmBpD,EAAYwnB,GAASpkB,UAAU,IAClGxC,EAASqa,EAAc0U,GAAiBhuB,MACxC,IAAI+tB,GAAajR,QAEDze,IAAhBye,EAA4BiR,KAAiBA,GAAajR,GAE9D,MADoB,KAAhBA,IAAoBmR,GAA4BhvB,IAAU,GACvDA,GAGTkkB,GAA0B+K,GAAeH,IACzCG,GAAc3tB,UAAYytB,GAC1BA,GAAgBjnB,YAAcmnB,GAE9B,IAAIC,GAAgD,gBAAhCtmB,OAAOkmB,GAAa,SACpCK,GAAiB/V,EAAY2V,GAAgBprB,UAC7CyrB,GAAgBhW,EAAY2V,GAAgBzf,SAC5C+f,GAAM,wBACNC,GAAUlW,EAAY,GAAGzJ,SACzB4f,GAAcnW,EAAY,GAAGva,UAElBkwB,GAAiB,cAAe,CAC7CrwB,cAAc,EACdsE,IAAK,WACH,IAAIqY,EAAS+T,GAAcruB,MACvB8jB,EAASsK,GAAe9T,GAC5B,GAAI4B,GAAO+R,GAA6B3T,GAAS,MAAO,GACxD,IAAIrc,EAAOkwB,GAAgBK,GAAY1K,EAAQ,GAAG,GAAMyK,GAAQzK,EAAQwK,GAAQ,MAChF,MAAgB,KAATrwB,OAAcI,EAAYJ,KAIrCmmB,EAAE,CAAEK,QAAQ,EAAMI,QAAQ,GAAQ,CAChCzkB,OAAQ8tB,KCpDZ1F,GAAsB,iBCAtBA,GAAsB,eCAtBA,GAAsB,sBCAtBA,GAAsB,YCAtBA,GAAsB,SCAtBA,GAAsB,WCAtBA,GAAsB,UCAtBA,GAAsB,WCAtBA,GAAsB,SCAtBA,GAAsB,eCAtBA,GAAsB,eCAtBA,GAAsB,sBCAlBiG,GAAU5R,GAAgB,WAE9B6R,GAAiB,SAAUC,GAIzB,OAAOvU,GAAc,KAAOhD,GAAM,WAChC,IAAIwX,EAAQ,GAKZ,OAJkBA,EAAM7nB,YAAc,IAC1B0nB,IAAW,WACrB,MAAO,CAAEI,IAAK,IAE2B,IAApCD,EAAMD,GAAargB,SAASugB,QCFvC,IAAIC,GAAuBjS,GAAgB,sBACvCkS,GAAmB,iBACnBC,GAAiC,iCACjCC,GAAYjY,EAAA/V,UAKZiuB,GAA+B9U,GAAc,KAAOhD,GAAM,WAC5D,IAAIwX,EAAQ,GAEZ,OADAA,EAAME,KAAwB,EACvBF,EAAMviB,SAAS,KAAOuiB,KAG3BO,GAAkBT,GAA6B,UAE/CU,GAAqB,SAAUhrB,GACjC,IAAK8U,EAAS9U,GAAI,OAAO,EACzB,IAAIirB,EAAajrB,EAAE0qB,IACnB,YAAsBzwB,IAAfgxB,IAA6BA,EAAanK,GAAQ9gB,IAQ3DggB,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,QALpBqK,KAAiCC,IAKK,CAElD9iB,OAAQ,SAAgB5M,GACtB,IAGI5C,EAAGqJ,EAAGpJ,EAAQwyB,EAAKC,EAHnBnrB,EAAI4X,GAAShc,MACbwvB,EAAIvF,GAAmB7lB,EAAG,GAC1B6jB,EAAI,EAER,IAAKprB,GAAI,EAAIC,EAAS2E,UAAU3E,OAAQD,EAAIC,EAAQD,IAElD,GAAIuyB,GADJG,GAAU,IAAN1yB,EAAWuH,EAAI3C,UAAU5E,IACF,CAEzB,GAAIorB,GADJqH,EAAMpN,GAAkBqN,IACVR,GAAkB,MAAME,GAAUD,IAChD,IAAK9oB,EAAI,EAAGA,EAAIopB,EAAKppB,IAAK+hB,IAAS/hB,KAAKqpB,GAAG9H,GAAe+H,EAAGvH,EAAGsH,EAAErpB,QAC7D,CACL,GAAI+hB,GAAK8G,GAAkB,MAAME,GAAUD,IAC3CvH,GAAe+H,EAAGvH,IAAKsH,GAI3B,OADAC,EAAE1yB,OAASmrB,EACJuH,YCvDPC,GAAM1Y,KAAK6K,IAKf8N,GAAiB,GAAGC,YAAc,SAAoBzyB,EAAkB4qB,GACtE,IAAI1jB,EAAI4X,GAAShc,MACbsvB,EAAMpN,GAAkB9d,GACxBwrB,EAAK/N,GAAgB3kB,EAAQoyB,GAC7BlnB,EAAOyZ,GAAgBiG,EAAOwH,GAC9BvH,EAAMtmB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,EAC5CwxB,EAAQJ,SAAapxB,IAAR0pB,EAAoBuH,EAAMzN,GAAgBkG,EAAKuH,IAAQlnB,EAAMknB,EAAMM,GAChFE,EAAM,MACN1nB,EAAOwnB,GAAMA,EAAKxnB,EAAOynB,IAC3BC,GAAM,EACN1nB,GAAQynB,EAAQ,EAChBD,GAAMC,EAAQ,GAETA,KAAU,GACXznB,KAAQhE,EAAGA,EAAEwrB,GAAMxrB,EAAEgE,UACbhE,EAAEwrB,GACdA,GAAME,EACN1nB,GAAQ0nB,EACR,OAAO1rB,UCxBP2rB,GAAclT,GAAgB,eAC9BmT,GAAiBzxB,MAAMgC,UAIQlC,MAA/B2xB,GAAeD,KACjBvS,GAAuBwS,GAAgBD,GAAa,CAClDpyB,cAAc,EACdQ,MAAOqpB,GAAO,QAKlByI,GAAiB,SAAUxyB,GACzBuyB,GAAeD,IAAatyB,IAAO,GCZrC2mB,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,GAAQ,CAClCyrB,WAAYD,KAIdO,GAAiB,qBCJjBC,GAAiB,SAAc/xB,OAC7B,IAAIiG,EAAI4X,GAAShc,MACblD,EAASolB,GAAkB9d,GAC3B+rB,EAAkB1uB,UAAU3E,OAC5BglB,EAAQD,GAAgBsO,EAAkB,EAAI1uB,UAAU,QAAKpD,EAAWvB,GACxEirB,EAAMoI,EAAkB,EAAI1uB,UAAU,QAAKpD,EAC3C+xB,OAAiB/xB,IAAR0pB,EAAoBjrB,EAAS+kB,GAAgBkG,EAAKjrB,GACxDszB,EAAStO,GAAO1d,EAAE0d,KAAW3jB,EACpC,OAAOiG,GCTTggB,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,GAAQ,CAClCmsB,KAAMH,KAIRD,GAAiB,eCTbnF,GAAAxe,OAGAgkB,GAAsB5B,GAA6B,UAKvDtK,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,QAASyL,IAAuB,CAChEhkB,OAAQ,SAAgBqe,GACtB,OAAM4F,GAASvwB,KAAM2qB,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,aCVvEysB,GAAAtkB,KAGAgqB,GAAO,OACPC,IAAc,EAGdD,KAAQ,IAAIjyB,MAAM,GAAO,MAAE,WAAckyB,IAAc,KAI3DrM,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,OAAQ4L,IAAe,CACvDjqB,KAAM,SAAcmkB,GAClB,OAAM+F,GAAO1wB,KAAM2qB,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,MAKzE4xB,GAAiBO,WClBb1F,GAAAE,UAGA2F,GAAa,YACbC,IAAc,EAGdD,KAAc,IAAIpyB,MAAM,GAAa,WAAE,WAAcqyB,IAAc,KAIvExM,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,OAAQ+L,IAAe,CACvD5F,UAAW,SAAmBL,GAC5B,OAAMkG,GAAY7wB,KAAM2qB,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,MAK9E4xB,GAAiBU,cCdbG,GAAY9Z,EAAA/V,UAIZ8vB,GAAmB,SAAU7zB,EAAQ8zB,EAAU3nB,EAAQ4nB,EAAWnJ,EAAOoJ,EAAOC,EAAQC,OAC1F,IAGI9sB,EAAS+sB,EAHTC,EAAcxJ,EACdyJ,EAAc,EACdC,IAAQL,GAASnI,GAAKmI,EAAQC,GAG3BG,EAAcN,GAAW,CAC9B,GAAIM,KAAeloB,EAAQ,CAGzB,GAFA/E,EAAUktB,EAAQA,EAAMnoB,EAAOkoB,GAAcA,EAAaP,GAAY3nB,EAAOkoB,GAEzEL,EAAQ,GAAKhM,GAAQ5gB,GACvB+sB,EAAanP,GAAkB5d,GAC/BgtB,EAAcP,GAAiB7zB,EAAQ8zB,EAAU1sB,EAAS+sB,EAAYC,EAAaJ,EAAQ,GAAK,MAC3F,CACL,GAAII,GAAe,iBAAkB,MAAMR,GAAU,sCACrD5zB,EAAOo0B,GAAehtB,EAGxBgtB,IAEFC,IAEF,OAAOD,GAGTG,GAAiBV,GCzBjB3M,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,GAAQ,CAClCwtB,KAAM,WACJ,IAAIC,EAAWlwB,UAAU3E,OAAS2E,UAAU,QAAKpD,EAC7C+F,EAAI4X,GAAShc,MACbixB,EAAY/O,GAAkB9d,GAC9BorB,EAAIvF,GAAmB7lB,EAAG,GAE9B,OADAorB,EAAE1yB,OAAS20B,GAAiBjC,EAAGprB,EAAGA,EAAG6sB,EAAW,OAAgB5yB,IAAbszB,EAAyB,EAAIpQ,GAAoBoQ,IAC7FnC,KCPXpL,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,GAAQ,CAClC0tB,QAAS,SAAiBjH,GACxB,IAEI6E,EAFAprB,EAAI4X,GAAShc,MACbixB,EAAY/O,GAAkB9d,GAKlC,OAHAyW,GAAU8P,IACV6E,EAAIvF,GAAmB7lB,EAAG,IACxBtH,OAAS20B,GAAiBjC,EAAGprB,EAAGA,EAAG6sB,EAAW,EAAG,EAAGtG,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GACjGmxB,kBCdXqC,GAAiB,SAAU/wB,EAAUuD,EAAMlG,GACzC,IAAI2zB,EAAaC,EACjBlU,GAAS/c,GACT,IAEE,KADAgxB,EAAchX,GAAUha,EAAU,WAChB,CAChB,GAAa,UAATuD,EAAkB,MAAMlG,EAC5B,OAAOA,EAET2zB,EAAcpa,EAAKoa,EAAahxB,GAChC,MAAOQ,GACPywB,GAAa,EACbD,EAAcxwB,EAEhB,GAAa,UAAT+C,EAAkB,MAAMlG,EAC5B,GAAI4zB,EAAY,MAAMD,EAEtB,OADAjU,GAASiU,GACF3zB,GCjBT6zB,GAAiB,SAAUlxB,EAAUS,EAAIpD,EAAO8zB,GAC9C,IACE,OAAOA,EAAU1wB,EAAGsc,GAAS1f,GAAO,GAAIA,EAAM,IAAMoD,EAAGpD,GACvD,MAAOmD,GACPuwB,GAAc/wB,EAAU,QAASQ,kBCRrC4wB,GAAiB,GCGjB,IAAIC,GAAWtV,GAAgB,YAC3BuV,GAAiB7zB,MAAMgC,UAG3B8xB,GAAiB,SAAUplB,GACzB,YAAc5O,IAAP4O,IAAqBilB,GAAA3zB,QAAoB0O,GAAMmlB,GAAeD,MAAcllB,cCHjFqlB,GAAWzV,GAAgB,YAE/B0V,GAAiB,SAAUtlB,GACzB,GAAU5O,MAAN4O,EAAiB,OAAO6N,GAAU7N,EAAIqlB,KACrCxX,GAAU7N,EAAI,eACdilB,GAAU1M,GAAQvY,KCHzB,IAAIulB,GAAYxb,EAAA/V,UAEhBwxB,GAAiB,SAAUxZ,EAAUyZ,GACnC,IAAIxe,EAAiBzS,UAAU3E,OAAS,EAAIy1B,GAAkBtZ,GAAYyZ,EAC1E,GAAI7X,GAAU3G,GAAiB,OAAO2J,GAASnG,EAAKxD,EAAgB+E,IACpE,MAAMuZ,GAAU7X,GAAY1B,GAAY,qBCC1C,IAAI0Z,GAAQ3b,EAAAzY,MAIZq0B,GAAiB,SAAcC,GAC7B,IAAIzuB,EAAI4X,GAAS6W,GACbC,EAAiBpJ,GAAc1pB,MAC/BmwB,EAAkB1uB,UAAU3E,OAC5Bi2B,EAAQ5C,EAAkB,EAAI1uB,UAAU,QAAKpD,EAC7C20B,OAAoB30B,IAAV00B,EACVC,IAASD,EAAQ/J,GAAK+J,EAAO5C,EAAkB,EAAI1uB,UAAU,QAAKpD,IACtE,IAEIvB,EAAQmC,EAAQg0B,EAAMnyB,EAAUf,EAAM5B,EAFtC+V,EAAiBqe,GAAkBnuB,GACnC0d,EAAQ,EAGZ,IAAI5N,GAAoBlU,MAAQ2yB,IAASN,GAAsBne,GAW7D,IAFApX,EAASolB,GAAkB9d,GAC3BnF,EAAS6zB,EAAiB,IAAI9yB,KAAKlD,GAAU61B,GAAM71B,GAC7CA,EAASglB,EAAOA,IACpB3jB,EAAQ60B,EAAUD,EAAM3uB,EAAE0d,GAAQA,GAAS1d,EAAE0d,GAC7C2F,GAAexoB,EAAQ6iB,EAAO3jB,QAThC,IAFA4B,GADAe,EAAW2xB,GAAYruB,EAAG8P,IACVnU,KAChBd,EAAS6zB,EAAiB,IAAI9yB,KAAS,KAC/BizB,EAAOvb,EAAK3X,EAAMe,IAAWnB,KAAMmiB,IACzC3jB,EAAQ60B,EAAUhB,GAA6BlxB,EAAUiyB,EAAO,CAACE,EAAK90B,MAAO2jB,IAAQ,GAAQmR,EAAK90B,MAClGspB,GAAexoB,EAAQ6iB,EAAO3jB,GAWlC,OADAc,EAAOnC,OAASglB,EACT7iB,UC3CLi0B,GAAWrW,GAAgB,YAC3BsW,IAAe,EAEnB,IACE,IAAIC,GAAS,EACTC,GAAqB,CACvBtzB,KAAM,WACJ,MAAO,CAAEJ,OAAQyzB,OAEnBjzB,OAAU,WACRgzB,IAAe,IAGnBE,GAAmBH,IAAY,WAC7B,OAAOlzB,MAGTzB,MAAM6J,KAAKirB,IAAoB,WAAc,MAAM,KACnD,MAAO/xB,IChBT,IAAIgyB,KDkBJC,GAAiB,SAAUlc,EAAMmc,GAC/B,IAAKA,IAAiBL,GAAc,OAAO,EAC3C,IAAIM,GAAoB,EACxB,IACE,IAAI5pB,EAAS,GACbA,EAAOqpB,IAAY,WACjB,MAAO,CACLnzB,KAAM,WACJ,MAAO,CAAEJ,KAAM8zB,GAAoB,MAIzCpc,EAAKxN,GACL,MAAOvI,IACT,OAAOmyB,KChC8C,SAAU1yB,GAE/DxC,MAAM6J,KAAKrH,MAKbqjB,EAAE,CAAElnB,OAAQ,QAASynB,MAAM,EAAME,OAAQyO,IAAuB,CAC9DlrB,KAAMwqB,YCVJpQ,GAAAC,SAKJ2B,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,GAAQ,CAClCue,SAAU,SAAkBH,GAC1B,OAAMoR,GAAW1zB,KAAMsiB,EAAI7gB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,MAKrE4xB,GAAiB,sBCVbzN,GAAAnd,QCDJsuB,GAAiB,SAAUhF,EAAa1V,GACtC,IAAIjY,EAAS,GAAG2tB,GAChB,QAAS3tB,GAAUoW,GAAM,WAEvBpW,EAAO5C,KAAK,KAAM6a,GAAY,WAAc,MAAM,GAAM,ODA5D,IAAI2a,GAAavb,EAAY,GAAGhT,SAE5BwuB,KAAkBD,IAAc,EAAIA,GAAW,CAAC,GAAI,GAAG,GAAM,EAC7DE,GAAgBH,GAAoB,WAIxCvP,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,OAAQgP,KAAkBC,IAAiB,CAC3EzuB,QAAS,SAAiB0uB,GACxB,IAAIxR,EAAY9gB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,EACtD,OAAOw1B,GAEHD,GAAW5zB,KAAM+zB,EAAexR,IAAc,EAACyR,GACtCh0B,KAAM+zB,EAAexR,4BEflC/E,SCHJyW,IAAkB7c,GAAM,eACbpT,EAAT,aAGA,OAFAA,EAAEzD,UAAUwG,YAAc,KAEnBnK,OAAOsN,eAAe,IAAIlG,KAASA,EAAEzD,aCC9C,IAAI2zB,GAAWpV,GAAU,YACrBqV,GAASnd,EAAApa,OACTw3B,GAAkBD,GAAO5zB,UAI7B8zB,GAAiBJ,GAA2BE,GAAOjqB,eAAiB,SAAU9F,GAC5E,IAAIyF,EAASmS,GAAS5X,GACtB,GAAI8X,GAAOrS,EAAQqqB,IAAW,OAAOrqB,EAAOqqB,IAC5C,IAAIntB,EAAc8C,EAAO9C,YACzB,OAAIiS,EAAWjS,IAAgB8C,aAAkB9C,EACxCA,EAAYxG,UACZsJ,aAAkBsqB,GAASC,GAAkB,MCVxD,IAKIE,GAAmBC,GAAmCC,GALtDC,GAAW5X,GAAgB,YAC3B6X,IAAyB,EAOzB,GAAG/3B,OAGC,SAFN63B,GAAgB,GAAG73B,SAIjB43B,GAAoCF,GAAeA,GAAeG,QACxB53B,OAAO2D,YAAW+zB,GAAoBC,IAHlDG,IAAyB,GAO3D,IAAIC,GAA8Ct2B,MAArBi2B,IAAkCld,GAAM,WACnE,IAAIG,EAAO,GAEX,OAAO+c,GAAkBG,IAAUr2B,KAAKmZ,KAAUA,KAGhDod,KAAwBL,GAAoB,IAK3Ctb,EAAWsb,GAAkBG,MAChC9T,GAAS2T,GAAmBG,IAAU,WACpC,OAAOz0B,gBAIX40B,GAAiB,CACflgB,kBAAmB4f,GACnBO,uBAAwBH,KC7CtBhgB,kBAMAogB,GAAa,WAAc,OAAO90B,MAEtC+0B,GAAiB,SAAUC,EAAqBvM,EAAM1oB,EAAMk1B,GAC1D,IAAIC,EAAgBzM,EAAO,YAI3B,OAHAuM,EAAoBz0B,UAAYinB,GAAM2N,GAAoB,CAAEp1B,KAAMgY,IAA2Bkd,EAAiBl1B,KAC9G6oB,GAAeoM,EAAqBE,GAAe,GACnDhD,GAAUgD,GAAiBJ,GACpBE,gBCXLI,GAASpe,EAAAnP,OACTwtB,GAAYre,EAAA/V,UAEhBq0B,GAAiB,SAAUrc,GACzB,GAAuB,iBAAZA,GAAwBD,EAAWC,GAAW,OAAOA,EAChE,MAAMoc,GAAU,aAAeD,GAAOnc,GAAY,oBCCpDsc,GAAiB34B,OAAOqN,iBAAmB,aAAe,GAAE,WAC1D,IAEIojB,EAFAmI,GAAiB,EACjBje,EAAO,GAEX,KAEE8V,EAAShV,EAAYzb,OAAOmM,yBAAyBnM,OAAO2D,UAAW,aAAa8G,MAC7EkQ,EAAM,IACbie,EAAiBje,aAAgBhZ,MACjC,MAAO+C,IACT,OAAO,SAAwB8C,EAAGF,GAKhC,OAJA2Z,GAASzZ,GACTkxB,GAAmBpxB,GACfsxB,EAAgBnI,EAAOjpB,EAAGF,GACzBE,EAAEgG,UAAYlG,EACZE,GAfiD,QAiBtD/F,GCVN,IAAIo3B,GAAuBrV,GAAAE,OACvBoV,GAA6BtV,GAAAG,aAC7BoV,GAAoBf,GAAAlgB,kBACpBkhB,GAAyBhB,GAAAC,uBACzBgB,GAAWhZ,GAAgB,YAC3BiZ,GAAO,OACPC,GAAS,SACTC,GAAU,UAEVC,GAAa,WAAc,OAAOj2B,MAEtCk2B,GAAiB,SAAUC,EAAU1N,EAAMuM,EAAqBj1B,EAAMq2B,EAASC,EAAQC,GACrFvB,GAA0BC,EAAqBvM,EAAM1oB,GAErD,IAkBIw2B,EAA0BC,EAASC,EAlBnCC,EAAqB,SAAUC,GACjC,GAAIA,IAASP,GAAWQ,EAAiB,OAAOA,EAChD,IAAKhB,IAA0Be,KAAQE,EAAmB,OAAOA,EAAkBF,GACnF,OAAQA,GACN,KAAKb,GACL,KAAKC,GACL,KAAKC,GAAS,OAAO,WAAqB,OAAO,IAAIhB,EAAoBh1B,KAAM22B,IAC/E,OAAO,WAAc,OAAO,IAAI3B,EAAoBh1B,QAGpDk1B,EAAgBzM,EAAO,YACvBqO,GAAwB,EACxBD,EAAoBV,EAAS51B,UAC7Bw2B,EAAiBF,EAAkBhB,KAClCgB,EAAkB,eAClBT,GAAWS,EAAkBT,GAC9BQ,GAAmBhB,IAA0BmB,GAAkBL,EAAmBN,GAClFY,EAA4B,SAARvO,GAAkBoO,EAAkBI,SAA4BF,EA+BxF,GA3BIC,IACFT,EAA2BlC,GAAe2C,EAAkB54B,KAAK,IAAI+3B,OACpCv5B,OAAO2D,WAAag2B,EAAyBx2B,OAC5Ds0B,GAAekC,KAA8BZ,KACvDJ,GACFA,GAAegB,EAA0BZ,IAC/B3c,EAAWud,EAAyBV,MAC9ClV,GAAS4V,EAA0BV,GAAUI,KAIjDrN,GAAe2N,EAA0BrB,GAAe,IAMxDO,IAAwBW,GAAWL,IAAUgB,GAAkBA,EAAel1B,OAASk0B,KACzEL,GACdpX,GAA4BuY,EAAmB,OAAQd,KAEvDe,GAAwB,EACxBF,EAAkB,WAAoB,OAAOlf,EAAKqf,EAAgB/2B,SAKlEo2B,EAMF,GALAI,EAAU,CACRviB,OAAQyiB,EAAmBX,IAC3Bp5B,KAAM05B,EAASO,EAAkBF,EAAmBZ,IACpDmB,QAASP,EAAmBV,KAE1BM,EAAQ,IAAKG,KAAOD,GAClBZ,IAA0BkB,KAA2BL,KAAOI,KAC9DlW,GAASkW,EAAmBJ,EAAKD,EAAQC,SAEtCrS,EAAE,CAAElnB,OAAQurB,EAAMvkB,OAAO,EAAM2gB,OAAQ+Q,IAA0BkB,GAAyBN,GASnG,OAL4BK,EAAkBhB,MAAce,GAC1DjW,GAASkW,EAAmBhB,GAAUe,EAAiB,CAAE/0B,KAAMu0B,IAEjElE,GAAUzJ,GAAQmO,EAEXJ,GPvFT,IAAIU,GAAiB,iBACjBC,GAAmBtX,GAAAxY,IACnB+vB,GAAmBvX,GAAAE,UAA8BmX,IAYrDG,GAAiBnB,GAAe33B,MAAO,SAAS,SAAU+4B,EAAUjzB,GAClE8yB,GAAiBn3B,KAAM,CACrBH,KAAMq3B,GACNh6B,OAAQ6b,EAAgBue,GACxBxV,MAAO,EACPzd,KAAMA,OAIP,WACD,IAAImO,EAAQ4kB,GAAiBp3B,MACzB9C,EAASsV,EAAMtV,OACfmH,EAAOmO,EAAMnO,KACbyd,EAAQtP,EAAMsP,QAClB,OAAK5kB,GAAU4kB,GAAS5kB,EAAOJ,QAC7B0V,EAAMtV,YAASmB,EACR,CAAEF,WAAOE,EAAWsB,MAAM,IAEvB,QAAR0E,EAAuB,CAAElG,MAAO2jB,EAAOniB,MAAM,GACrC,UAAR0E,EAAyB,CAAElG,MAAOjB,EAAO4kB,GAAQniB,MAAM,GACpD,CAAExB,MAAO,CAAC2jB,EAAO5kB,EAAO4kB,IAASniB,MAAM,KAC7C,UAKH,IAAI43B,GAASrF,GAAAsF,UAAsBtF,GAAA3zB,MAQnC,GALA0xB,GAAiB,QACjBA,GAAiB,UACjBA,GAAiB,WAGD9Y,GAA+B,WAAhBogB,GAAO11B,KAAmB,OACxC01B,GAAQ,OAAQ,CAAEp5B,MAAO,WACxC,MAAOmD,IQrDT,IAAIm2B,GAAUpf,EAAY,GAAG4I,MAEzByW,GAAc9e,GAAiBhc,OAC/B+6B,GAAgBhE,GAAoB,OAAQ,KAIhDvP,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,OAAQ6S,KAAgBC,IAAiB,CACzE1W,KAAM,SAAc2W,GAClB,OAAOH,GAAQ1e,EAAgB/Y,WAAqB3B,IAAdu5B,EAA0B,IAAMA,aCRtEC,GAAM9gB,KAAK6K,IACXkW,GAAe,GAAGC,YAClBC,KAAkBF,IAAgB,EAAI,CAAC,GAAGC,YAAY,GAAG,GAAM,EAC/DE,GAAgBtE,GAAoB,eAKxCuE,GAJaF,KAAkBC,GAIL,SAAqBlE,GAE7C,GAAIiE,GAAe,OAAO/S,GAAM6S,GAAc93B,KAAMyB,YAAc,EAClE,IAAI2C,EAAI2U,EAAgB/Y,MACpBlD,EAASolB,GAAkB9d,GAC3B0d,EAAQhlB,EAAS,EAGrB,IAFI2E,UAAU3E,OAAS,IAAGglB,EAAQ+V,GAAI/V,EAAOP,GAAoB9f,UAAU,MACvEqgB,EAAQ,IAAGA,EAAQhlB,EAASglB,GAC1BA,GAAS,EAAGA,IAAS,GAAIA,KAAS1d,GAAKA,EAAE0d,KAAWiS,EAAe,OAAOjS,GAAS,EACzF,OAAO,GACLgW,GCpBJ1T,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,OAAQqT,KAAgB,GAAGH,aAAe,CAC1EA,YAAaG,YCLXpN,GAAAjkB,IAGAsxB,GAAsBzJ,GAA6B,OAKvDtK,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,QAASsT,IAAuB,CAChEtxB,IAAK,SAAa8jB,GAChB,OAAMyN,GAAMp4B,KAAM2qB,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,MCLxE,IAAIg6B,GAAQrhB,EAAAzY,MAER+5B,GAAelhB,GAAM,eACdpT,EAAT,aACA,QAASq0B,GAAME,GAAGn6B,KAAK4F,aAAcA,MAMvCogB,EAAE,CAAElnB,OAAQ,QAASynB,MAAM,EAAME,OAAQyT,IAAgB,CACvDC,GAAI,eACF,IAAIzW,EAAQ,EACRqO,EAAkB1uB,UAAU3E,OAC5BmC,EAAS,IAAKyqB,GAAc1pB,MAAQA,KAAOq4B,IAAOlI,GAC/CA,EAAkBrO,GAAO2F,GAAexoB,EAAQ6iB,EAAOrgB,UAAUqgB,MAExE,OADA7iB,EAAOnC,OAASqzB,EACTlxB,eClBPu5B,GAAYxhB,EAAA/V,UAGZw3B,GAAe,SAAUC,GAC3B,OAAO,SAAUzP,EAAM0B,EAAYwF,EAAiBwI,GAClD9d,GAAU8P,GACV,IAAIvmB,EAAI4X,GAASiN,GACbvqB,EAAOka,EAAcxU,GACrBtH,EAASolB,GAAkB9d,GAC3B0d,EAAQ4W,EAAW57B,EAAS,EAAI,EAChCD,EAAI67B,GAAW,EAAK,EACxB,GAAIvI,EAAkB,EAAC,OAAe,CACpC,GAAIrO,KAASpjB,EAAM,CACjBi6B,EAAOj6B,EAAKojB,GACZA,GAASjlB,EACT,MAGF,GADAilB,GAASjlB,EACL67B,EAAW5W,EAAQ,EAAIhlB,GAAUglB,EACnC,MAAM0W,GAAU,+CAGpB,KAAME,EAAW5W,GAAS,EAAIhlB,EAASglB,EAAOA,GAASjlB,EAAOilB,KAASpjB,IACrEi6B,EAAOhO,EAAWgO,EAAMj6B,EAAKojB,GAAQA,EAAO1d,IAE9C,OAAOu0B,QAIXC,GAAiB,CAGfjuB,KAAM8tB,IAAa,GAGnB7tB,MAAO6tB,IAAa,KCvClB9tB,KCCJkuB,GAA4C,WAA3BrgB,EAAQxB,EAAA4C,SDIzB,IAAIkf,GAAgBnF,GAAoB,UAOxCvP,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,QAASiU,KAJzBD,IAAWze,EAAiB,IAAMA,EAAiB,IAIK,CACxEpc,OAAQ,SAAgB2sB,GACtB,IAAI7tB,EAAS2E,UAAU3E,OACvB,OAAMi8B,GAAS/4B,KAAM2qB,EAAY7tB,EAAQA,EAAS,EAAI2E,UAAU,QAAKpD,aEfrEu6B,GAAAhuB,MAKAouB,GAAgBrF,GAAoB,eAOxCvP,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,QAASmU,KAJzBH,IAAWze,EAAiB,IAAMA,EAAiB,IAIK,CACxE6e,YAAa,SAAqBtO,GAChC,OAAMuO,GAAcl5B,KAAM2qB,EAAYlpB,UAAU3E,OAAQ2E,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,MCXlG,IAAI86B,GAAa9gB,EAAY,GAAGta,SAC5Bq7B,GAAO,CAAC,EAAG,GAMfhV,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,OAAQhd,OAAOuxB,MAAUvxB,OAAOuxB,GAAKr7B,YAAc,CACnFA,QAAS,WAGP,OADImnB,GAAQllB,QAAOA,KAAKlD,OAASkD,KAAKlD,QAC/Bq8B,GAAWn5B,SCFtB,IAAIq5B,GAAsB3K,GAA6B,SAEnD4K,GAAUzc,GAAgB,WAC1B0c,GAAQviB,EAAAzY,MACRi7B,GAAMziB,KAAK2K,IAKf0C,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,QAASwU,IAAuB,CAChEv7B,MAAO,SAAegqB,EAAOC,GAC3B,IAKInmB,EAAa3C,EAAQgpB,EALrB7jB,EAAI2U,EAAgB/Y,MACpBlD,EAASolB,GAAkB9d,GAC3B8B,EAAI2b,GAAgBiG,EAAOhrB,GAC3BkrB,EAAMnG,QAAwBxjB,IAAR0pB,EAAoBjrB,EAASirB,EAAKjrB,GAG5D,GAAIooB,GAAQ9gB,KACVxC,EAAcwC,EAAE2C,aAEZ2iB,GAAc9nB,KAAiBA,IAAgB23B,IAASrU,GAAQtjB,EAAYrB,aAErE2Y,EAAStX,IAEE,QADpBA,EAAcA,EAAY03B,QAF1B13B,OAAcvD,GAKZuD,IAAgB23B,SAAyBl7B,IAAhBuD,GAC3B,OAAO0mB,GAASlkB,EAAG8B,EAAG8hB,GAI1B,IADA/oB,EAAS,SAAqBZ,IAAhBuD,EAA4B23B,GAAQ33B,GAAa43B,GAAIxR,EAAM9hB,EAAG,IACvE+hB,EAAI,EAAG/hB,EAAI8hB,EAAK9hB,IAAK+hB,IAAS/hB,KAAK9B,GAAGqjB,GAAexoB,EAAQgpB,EAAG7jB,EAAE8B,IAEvE,OADAjH,EAAOnC,OAASmrB,EACThpB,eC7CPw6B,GAAQ1iB,KAAKuK,MAEboY,GAAY,SAAU9K,EAAO+K,GAC/B,IAAI78B,EAAS8xB,EAAM9xB,OACf88B,EAASH,GAAM38B,EAAS,GAC5B,OAAOA,EAAS,EAAI+8B,GAAcjL,EAAO+K,GAAaG,GACpDlL,EACA8K,GAAU7R,GAAW+G,EAAO,EAAGgL,GAASD,GACxCD,GAAU7R,GAAW+G,EAAOgL,GAASD,GACrCA,IAIAE,GAAgB,SAAUjL,EAAO+K,OACnC,IAEIr1B,EAASsB,EAFT9I,EAAS8xB,EAAM9xB,OACfD,EAAI,EAGDA,EAAIC,GAAQ,KACjB8I,EAAI/I,EACJyH,EAAUsqB,EAAM/xB,GACT+I,GAAK+zB,EAAU/K,EAAMhpB,EAAI,GAAItB,GAAW,GAC7CsqB,EAAMhpB,GAAKgpB,IAAQhpB,GAEjBA,IAAM/I,MAAK+xB,EAAMhpB,GAAKtB,GAC1B,OAAOsqB,GAGPkL,GAAQ,SAAUlL,EAAOjkB,EAAMC,EAAO+uB,OACxC,IAAII,EAAUpvB,EAAK7N,OACfk9B,EAAUpvB,EAAM9N,OAChBm9B,EAAS,EACTC,EAAS,EAEND,EAASF,GAAWG,EAASF,GAClCpL,EAAMqL,EAASC,GAAWD,EAASF,GAAWG,EAASF,EACnDL,EAAUhvB,EAAKsvB,GAASrvB,EAAMsvB,KAAY,EAAIvvB,EAAKsvB,KAAYrvB,EAAMsvB,KACrED,EAASF,EAAUpvB,EAAKsvB,KAAYrvB,EAAMsvB,KAC9C,OAAOtL,GAGXuL,GAAiBT,UCzCbU,GAAU5gB,EAAAzK,MAAe,mBAE7BsrB,KAAmBD,KAAYA,GAAQ,UCFvCE,GAAc,eAAkB/iB,KAAKiC,UCAjC+gB,GAAS/gB,EAAAzK,MAAe,wBAE5ByrB,KAAmBD,KAAWA,GAAO,GCWrC,IAAIE,GAAO,GACPC,GAAUriB,EAAYoiB,GAAKE,MAC3BC,GAAOviB,EAAYoiB,GAAKp3B,MAGxBw3B,GAAqBzjB,GAAM,WAC7BqjB,GAAKE,UAAKt8B,MAGRy8B,GAAgB1jB,GAAM,WACxBqjB,GAAKE,KAAK,SAGRI,GAAgBpH,GAAoB,QAEpCqH,IAAe5jB,GAAM,WAEvB,GAAIgD,EAAI,OAAOA,EAAK,GACpB,KAAIigB,IAAMA,GAAK,GAAf,CACA,GAAIC,GAAY,OAAO,EACvB,GAAIE,GAAQ,OAAOA,GAAS,IAE5B,IACIS,EAAMC,EAAK/8B,EAAO2jB,EADlB7iB,EAAS,GAIb,IAAKg8B,EAAO,GAAIA,EAAO,GAAIA,IAAQ,CAGjC,OAFAC,EAAMrzB,OAAOszB,aAAaF,GAElBA,GACN,KAAK,GAAI,KAAK,GAAI,KAAK,GAAI,KAAK,GAAI98B,EAAQ,EAAG,MAC/C,KAAK,GAAI,KAAK,GAAIA,EAAQ,EAAG,cACpBA,EAAQ,EAGnB,IAAK2jB,EAAQ,EAAGA,EAAQ,GAAIA,IAC1B2Y,GAAKp3B,KAAK,CAAE6C,EAAGg1B,EAAMpZ,EAAOsZ,EAAGj9B,IAMnC,IAFAs8B,GAAKE,MAAK,SAAUv3B,EAAGi4B,GAAK,OAAOA,EAAED,EAAIh4B,EAAEg4B,KAEtCtZ,EAAQ,EAAGA,EAAQ2Y,GAAK39B,OAAQglB,IACnCoZ,EAAMT,GAAK3Y,GAAO5b,EAAEwP,OAAO,GACvBzW,EAAOyW,OAAOzW,EAAOnC,OAAS,KAAOo+B,IAAKj8B,GAAUi8B,GAG1D,MAAkB,gBAAXj8B,MAgBTmlB,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,OAbrBgW,KAAuBC,KAAkBC,KAAkBC,IAapB,CAClDL,KAAM,SAAchB,QACAt7B,IAAds7B,GAAyB9e,GAAU8e,GAEvC,IAAI/K,EAAQ5S,GAAShc,MAErB,GAAIg7B,GAAa,YAAqB38B,IAAds7B,EAA0Be,GAAQ9L,GAAS8L,GAAQ9L,EAAO+K,GAElF,IAEI2B,EAAaxZ,EAFbyZ,EAAQ,GACRC,EAActZ,GAAkB0M,GAGpC,IAAK9M,EAAQ,EAAGA,EAAQ0Z,EAAa1Z,IAC/BA,KAAS8M,GAAOgM,GAAKW,EAAO3M,EAAM9M,QAGxCqY,GAAaoB,EA3BI,SAAU5B,GAC7B,OAAO,SAAU8B,EAAGC,GAClB,YAAUr9B,IAANq9B,GAAwB,OAClBr9B,IAANo9B,EAAwB,OACVp9B,IAAds7B,GAAiCA,EAAU8B,EAAGC,IAAM,EACjD7V,GAAS4V,GAAK5V,GAAS6V,GAAK,GAAI,GAsBnBC,CAAehC,IAEnC2B,EAAcC,EAAMz+B,OACpBglB,EAAQ,EAEDA,EAAQwZ,GAAa1M,EAAM9M,GAASyZ,EAAMzZ,UAC1CA,EAAQ0Z,UAAoB5M,EAAM9M,KAEzC,OAAO8M,YChGPgN,GAAU/e,GAAgB,YAE9Bgf,GAAiB,SAAUC,GACzB,IAAIl6B,EAAcwX,EAAW0iB,GACzBn4B,EAAiB6Z,GAEjBrG,GAAevV,IAAgBA,EAAYg6B,KAC7Cj4B,EAAe/B,EAAag6B,GAAS,CACnCj+B,cAAc,EACdsE,IAAK,WAAc,OAAOjC,UCXrB,SCOX,IAAI+7B,GAAsBrN,GAA6B,UAEnDsN,GAAYhlB,EAAA/V,UACZg7B,GAAMllB,KAAK2K,IACXwa,GAAMnlB,KAAK6K,IACXua,GAAmB,iBACnBC,GAAkC,kCAKtChY,EAAE,CAAElnB,OAAQ,QAASgH,OAAO,EAAM2gB,QAASkX,IAAuB,CAChE32B,OAAQ,SAAgB0iB,EAAOuU,GAC7B,IAIIC,EAAaC,EAAmB/M,EAAGtpB,EAAGkC,EAAMwnB,EAJ5CxrB,EAAI4X,GAAShc,MACbsvB,EAAMpN,GAAkB9d,GACxBo4B,EAAc3a,GAAgBiG,EAAOwH,GACrCa,EAAkB1uB,UAAU3E,OAWhC,GATwB,IAApBqzB,EACFmM,EAAcC,EAAoB,EACL,IAApBpM,GACTmM,EAAc,EACdC,EAAoBjN,EAAMkN,IAE1BF,EAAcnM,EAAkB,EAChCoM,EAAoBL,GAAID,GAAI1a,GAAoB8a,GAAc,GAAI/M,EAAMkN,IAEtElN,EAAMgN,EAAcC,EAAoBJ,GAC1C,MAAMH,GAAUI,IAGlB,IADA5M,EAAIvF,GAAmB7lB,EAAGm4B,GACrBr2B,EAAI,EAAGA,EAAIq2B,EAAmBr2B,KACjCkC,EAAOo0B,EAAct2B,KACT9B,GAAGqjB,GAAe+H,EAAGtpB,EAAG9B,EAAEgE,IAGxC,GADAonB,EAAE1yB,OAASy/B,EACPD,EAAcC,EAAmB,CACnC,IAAKr2B,EAAIs2B,EAAat2B,EAAIopB,EAAMiN,EAAmBr2B,IAEjD0pB,EAAK1pB,EAAIo2B,GADTl0B,EAAOlC,EAAIq2B,KAECn4B,EAAGA,EAAEwrB,GAAMxrB,EAAEgE,UACbhE,EAAEwrB,GAEhB,IAAK1pB,EAAIopB,EAAKppB,EAAIopB,EAAMiN,EAAoBD,EAAap2B,WAAY9B,EAAE8B,EAAI,QACtE,GAAIo2B,EAAcC,EACvB,IAAKr2B,EAAIopB,EAAMiN,EAAmBr2B,EAAIs2B,EAAat2B,IAEjD0pB,EAAK1pB,EAAIo2B,EAAc,GADvBl0B,EAAOlC,EAAIq2B,EAAoB,KAEnBn4B,EAAGA,EAAEwrB,GAAMxrB,EAAEgE,UACbhE,EAAEwrB,GAGlB,IAAK1pB,EAAI,EAAGA,EAAIo2B,EAAap2B,IAC3B9B,EAAE8B,EAAIs2B,GAAe/6B,UAAUyE,EAAI,GAGrC,OADA9B,EAAEtH,OAASwyB,EAAMiN,EAAoBD,EAC9B9M,KC9DXS,GAAiB,QCAjBA,GAAiB,qBCJjBwM,GAAuC,oBAAfC,aAAiD,oBAAZC,gBCC7DC,GAAiB,SAAU1/B,EAAQ0S,EAAKgR,GACtC,IAAK,IAAInjB,KAAOmS,EAAK+Q,GAASzjB,EAAQO,EAAKmS,EAAInS,GAAMmjB,GACrD,OAAO1jB,UCDL2/B,GAAY7lB,EAAA/V,UAEhB67B,GAAiB,SAAU7vB,EAAI8vB,GAC7B,GAAIzjB,EAAcyjB,EAAW9vB,GAAK,OAAOA,EACzC,MAAM4vB,GAAU,gCCHdG,GAAahmB,EAAAimB,WAIjBC,GAAiB,SAAUjwB,GACzB,QAAW5O,IAAP4O,EAAkB,OAAO,EAC7B,IAAIuU,EAASD,GAAoBtU,GAC7BnQ,EAASmlB,GAAST,GACtB,GAAIA,IAAW1kB,EAAQ,MAAMkgC,GAAW,yBACxC,OAAOlgC,UCVLqgC,GAAQnmB,EAAAzY,MACR6+B,GAAMrmB,KAAKsmB,IACXC,GAAMvmB,KAAKwmB,IACXC,GAAQzmB,KAAKuK,MACbmc,GAAM1mB,KAAK2mB,IACXC,GAAM5mB,KAAK6mB,IA4FfC,GAAiB,CACfC,KA3FS,SAAUtc,EAAQuc,EAAgBC,GAC3C,IAOIC,EAAUC,EAAUC,EAPpBC,EAASjB,GAAMa,GACfK,EAAyB,EAARL,EAAYD,EAAiB,EAC9CO,GAAQ,GAAKD,GAAkB,EAC/BE,EAAQD,GAAQ,EAChBE,EAAwB,KAAnBT,EAAwBT,GAAI,GAAG,IAAOA,GAAI,GAAG,IAAO,EACzDmB,EAAOjd,EAAS,GAAgB,IAAXA,GAAgB,EAAIA,EAAS,EAAI,EAAI,EAC1DM,EAAQ,OAEZN,EAAS4b,GAAI5b,KAECA,GAAUA,IAAWkd,EAAAA,GAEjCR,EAAW1c,GAAUA,EAAS,EAAI,EAClCyc,EAAWK,IAEXL,EAAWT,GAAMC,GAAIjc,GAAUmc,IAE3Bnc,GADJ2c,EAAIb,GAAI,GAAIW,IACK,IACfA,IACAE,GAAK,IAGL3c,GADEyc,EAAWM,GAAS,EACZC,EAAKL,EAELK,EAAKlB,GAAI,EAAG,EAAIiB,IAEfJ,GAAK,IAChBF,IACAE,GAAK,GAEHF,EAAWM,GAASD,GACtBJ,EAAW,EACXD,EAAWK,GACFL,EAAWM,GAAS,GAC7BL,GAAY1c,EAAS2c,EAAI,GAAKb,GAAI,EAAGS,GACrCE,GAAsBM,IAEtBL,EAAW1c,EAAS8b,GAAI,EAAGiB,EAAQ,GAAKjB,GAAI,EAAGS,GAC/CE,EAAW,IAGRF,GAAkB,GACvBK,EAAOtc,KAAsB,IAAXoc,EAClBA,GAAY,IACZH,GAAkB,MAEpBE,EAAWA,GAAYF,EAAiBG,EACxCG,GAAkBN,EACXM,EAAiB,GACtBD,EAAOtc,KAAsB,IAAXmc,EAClBA,GAAY,IACZI,GAAkB,EAGpB,OADAD,IAAStc,IAAiB,IAAP2c,EACZL,GAqCPO,OAlCW,SAAUP,EAAQL,GAC7B,IAQIG,EARAF,EAAQI,EAAOthC,OACfuhC,EAAyB,EAARL,EAAYD,EAAiB,EAC9CO,GAAQ,GAAKD,GAAkB,EAC/BE,EAAQD,GAAQ,EAChBM,EAAQP,EAAiB,EACzBvc,EAAQkc,EAAQ,EAChBS,EAAOL,EAAOtc,KACdmc,EAAkB,IAAPQ,MAEfA,IAAS,EACFG,EAAQ,GACbX,EAAsB,IAAXA,EAAiBG,EAAOtc,KACnC8c,GAAS,MAEXV,EAAWD,GAAY,IAAMW,GAAS,EACtCX,KAAcW,EACdA,GAASb,EACFa,EAAQ,GACbV,EAAsB,IAAXA,EAAiBE,EAAOtc,KACnC8c,GAAS,EAEX,GAAiB,IAAbX,EACFA,EAAW,EAAIM,MACV,CAAA,GAAIN,IAAaK,EACtB,OAAOJ,EAAWW,IAAMJ,GAAQC,EAAAA,EAAWA,EAAAA,EAE3CR,GAAsBZ,GAAI,EAAGS,GAC7BE,GAAsBM,EACtB,OAAQE,GAAO,EAAK,GAAKP,EAAWZ,GAAI,EAAGW,EAAWF,YCjFtD7c,MACA1D,GAMAshB,GAAuB1e,GAAAE,OACvBye,GAA6B3e,GAAAG,aAC7Bye,GAAmBnf,GAAA5d,IACnBg9B,GAAmBpf,GAAAxY,IACnB63B,GAAe,cACfC,GAAY,WAGZC,GAAc,cACdC,GAAoBroB,EAAmB,YACvCsoB,GAAeD,GACfE,GAAuBD,IAAgBA,GAAsB,UAC7DE,GAAYxoB,EAAgB,SAC5ByoB,GAAoBD,IAAaA,GAAmB,UACpDE,GAAkB9iC,OAAO2D,UACzBo/B,GAAQ3oB,EAAOzY,MACfqhC,GAAa5oB,EAAOimB,WACpB4C,GAAOxnB,EAAY6X,IACnB4P,GAAUznB,EAAY,GAAGta,SAEzBgiC,GAAclC,GAAAC,KACdkC,GAAgBnC,GAAAc,OAEhBsB,GAAW,SAAUze,GACvB,MAAO,CAAU,IAATA,IAGN0e,GAAY,SAAU1e,GACxB,MAAO,CAAU,IAATA,EAAeA,GAAU,EAAI,MAGnC2e,GAAY,SAAU3e,GACxB,MAAO,CAAU,IAATA,EAAeA,GAAU,EAAI,IAAMA,GAAU,GAAK,IAAMA,GAAU,GAAK,MAG7E4e,GAAc,SAAUhC,GAC1B,OAAOA,EAAO,IAAM,GAAKA,EAAO,IAAM,GAAKA,EAAO,IAAM,EAAIA,EAAO,IAGjEiC,GAAc,SAAU7e,GAC1B,OAAOue,GAAYve,EAAQ,GAAI,IAG7B8e,GAAc,SAAU9e,GAC1B,OAAOue,GAAYve,EAAQ,GAAI,IAG7B+e,GAAY,SAAU3+B,EAAanE,MACtBmE,EAAqB,UAAGnE,EAAK,CAAEwE,IAAK,WAAc,OAAO+8B,GAAiBh/B,MAAMvC,OAG7F+iC,GAAM,SAAUC,EAAM5Q,EAAO/N,EAAO4e,GACtC,IAAIC,EAAWzD,GAAQpb,GACnB8e,EAAQ5B,GAAiByB,GAC7B,GAAIE,EAAW9Q,EAAQ+Q,EAAMC,WAAY,MAAMjB,GAAWR,IAC1D,IAAIpB,EAAQgB,GAAiB4B,EAAMxC,QAAQJ,MACvClW,EAAQ6Y,EAAWC,EAAME,WACzBhD,EAAOjW,GAAWmW,EAAOlW,EAAOA,EAAQ+H,GAC5C,OAAO6Q,EAAiB5C,EAAOgC,GAAQhC,IAGrCiD,GAAM,SAAUN,EAAM5Q,EAAO/N,EAAOkf,EAAY7iC,EAAOuiC,GACzD,IAAIC,EAAWzD,GAAQpb,GACnB8e,EAAQ5B,GAAiByB,GAC7B,GAAIE,EAAW9Q,EAAQ+Q,EAAMC,WAAY,MAAMjB,GAAWR,IAI1D,IAHA,IAAIpB,EAAQgB,GAAiB4B,EAAMxC,QAAQJ,MACvClW,EAAQ6Y,EAAWC,EAAME,WACzBhD,EAAOkD,GAAY7iC,GACdtB,EAAI,EAAGA,EAAIgzB,EAAOhzB,IAAKmhC,EAAMlW,EAAQjrB,GAAKihC,EAAK4C,EAAiB7jC,EAAIgzB,EAAQhzB,EAAI,IAG3F,GAAK4/B,GA8FE,CACL,IAAIwE,GAA8BnC,IAAwBO,GAAkBx9B,OAASq9B,GAErF,GAAK9nB,GAAM,WACTioB,GAAkB,OACbjoB,GAAM,WACX,IAAIioB,IAAkB,QAClBjoB,GAAM,WAIV,OAHA,IAAIioB,GACJ,IAAIA,GAAkB,KACtB,IAAIA,GAAkBR,KACfoC,KAAgClC,MAiB9BkC,IAA+BlC,IACxCzgB,GAA4B+gB,GAAmB,OAAQH,QAjBrD,EAEFI,GAAe,SAAqBxiC,GAElC,OADAggC,GAAW98B,KAAMu/B,IACV,IAAIF,GAAkBnC,GAAQpgC,MAGjB,UAAIyiC,GAE1B,IAAK,IAA0D2B,GAAtDC,GAAIC,GAAuB/B,IAAoBgC,GAAI,EAAQF,GAAKrkC,OAASukC,KACzEH,GAAMC,GAAKE,SAAS/B,IACzBhhB,GAA4BghB,GAAc4B,GAAK7B,GAAkB6B,KAIrE3B,GAAqBx4B,YAAcu4B,GAMjC/J,IAAkBlB,GAAeoL,MAAuBC,IAC1DnK,GAAekK,GAAmBC,IAIpC,IAAI4B,GAAW,IAAI9B,GAAU,IAAIF,GAAa,IAC1CiC,GAAWlpB,EAAYonB,GAAkB+B,SAC7CF,GAASE,QAAQ,EAAG,YACpBF,GAASE,QAAQ,EAAG,aAChBF,GAASG,QAAQ,IAAOH,GAASG,QAAQ,IAAI7E,GAAY6C,GAAmB,CAC9E+B,QAAS,SAAiBV,EAAY3iC,GACpCojC,GAASvhC,KAAM8gC,EAAY3iC,GAAS,IAAM,KAE5CujC,SAAU,SAAkBZ,EAAY3iC,GACtCojC,GAASvhC,KAAM8gC,EAAY3iC,GAAS,IAAM,MAE3C,CAAE0iB,QAAQ,SApIb0e,IAVAD,GAAe,SAAqBxiC,GAClCggC,GAAW98B,KAAMu/B,IACjB,IAAIsB,EAAa3D,GAAQpgC,GACzBmiC,GAAiBj/B,KAAM,CACrBg+B,MAAO6B,GAAKF,GAAMkB,GAAa,GAC/BA,WAAYA,IAET1pB,IAAanX,KAAK6gC,WAAaA,KAGO,UAsB7CpB,IApBAD,GAAY,SAAkBpB,EAAQ0C,EAAYD,GAChD/D,GAAW98B,KAAMy/B,IACjB3C,GAAWsB,EAAQmB,IACnB,IAAIoC,EAAe3C,GAAiBZ,GAAQyC,WACxCe,EAASrgB,GAAoBuf,GACjC,GAAIc,EAAS,GAAKA,EAASD,EAAc,MAAM/B,GAAW,gBAE1D,GAAIgC,GADJf,OAA4BxiC,IAAfwiC,EAA2Bc,EAAeC,EAAS3f,GAAS4e,IAC/Cc,EAAc,MAAM/B,GApF/B,gBAqFfX,GAAiBj/B,KAAM,CACrBo+B,OAAQA,EACRyC,WAAYA,EACZC,WAAYc,IAETzqB,IACHnX,KAAKo+B,OAASA,EACdp+B,KAAK6gC,WAAaA,EAClB7gC,KAAK8gC,WAAac,KAIiB,UAEnCzqB,IACFopB,GAAUjB,GAAc,cACxBiB,GAAUf,GAAW,UACrBe,GAAUf,GAAW,cACrBe,GAAUf,GAAW,eAGvB5C,GAAY6C,GAAmB,CAC7BgC,QAAS,SAAiBX,GACxB,OAAON,GAAIxgC,KAAM,EAAG8gC,GAAY,IAAM,IAAM,IAE9Ce,SAAU,SAAkBf,GAC1B,OAAON,GAAIxgC,KAAM,EAAG8gC,GAAY,IAElCgB,SAAU,SAAkBhB,GAC1B,IAAI9C,EAAQwC,GAAIxgC,KAAM,EAAG8gC,EAAYr/B,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GAC3E,OAAQ2/B,EAAM,IAAM,EAAIA,EAAM,KAAO,IAAM,IAE7C+D,UAAW,SAAmBjB,GAC5B,IAAI9C,EAAQwC,GAAIxgC,KAAM,EAAG8gC,EAAYr/B,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GAC3E,OAAO2/B,EAAM,IAAM,EAAIA,EAAM,IAE/BgE,SAAU,SAAkBlB,GAC1B,OAAOV,GAAYI,GAAIxgC,KAAM,EAAG8gC,EAAYr/B,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,KAEpF4jC,UAAW,SAAmBnB,GAC5B,OAAOV,GAAYI,GAAIxgC,KAAM,EAAG8gC,EAAYr/B,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,MAAgB,GAEpG6jC,WAAY,SAAoBpB,GAC9B,OAAOd,GAAcQ,GAAIxgC,KAAM,EAAG8gC,EAAYr/B,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GAAY,KAElG8jC,WAAY,SAAoBrB,GAC9B,OAAOd,GAAcQ,GAAIxgC,KAAM,EAAG8gC,EAAYr/B,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GAAY,KAElGmjC,QAAS,SAAiBV,EAAY3iC,GACpC4iC,GAAI/gC,KAAM,EAAG8gC,EAAYb,GAAU9hC,IAErCujC,SAAU,SAAkBZ,EAAY3iC,GACtC4iC,GAAI/gC,KAAM,EAAG8gC,EAAYb,GAAU9hC,IAErCikC,SAAU,SAAkBtB,EAAY3iC,GACtC4iC,GAAI/gC,KAAM,EAAG8gC,EAAYZ,GAAW/hC,EAAOsD,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,IAEnFgkC,UAAW,SAAmBvB,EAAY3iC,GACxC4iC,GAAI/gC,KAAM,EAAG8gC,EAAYZ,GAAW/hC,EAAOsD,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,IAEnFikC,SAAU,SAAkBxB,EAAY3iC,GACtC4iC,GAAI/gC,KAAM,EAAG8gC,EAAYX,GAAWhiC,EAAOsD,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,IAEnFkkC,UAAW,SAAmBzB,EAAY3iC,GACxC4iC,GAAI/gC,KAAM,EAAG8gC,EAAYX,GAAWhiC,EAAOsD,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,IAEnFmkC,WAAY,SAAoB1B,EAAY3iC,GAC1C4iC,GAAI/gC,KAAM,EAAG8gC,EAAYT,GAAaliC,EAAOsD,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,IAErFokC,WAAY,SAAoB3B,EAAY3iC,GAC1C4iC,GAAI/gC,KAAM,EAAG8gC,EAAYR,GAAaniC,EAAOsD,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,MAuDzFuqB,GAAe0W,GAAcJ,IAC7BtW,GAAe4W,GAAWL,IC3O1B,IAAIuD,GAAe,cACfC,ID4OJC,GAAiB,CACflG,YAAa4C,GACb3C,SAAU6C,KC9OoC,YAC5CqD,GAAoB7rB,EAAmB,YAI3CoN,EAAE,CAAEK,QAAQ,EAAMI,OAAQge,KAAsBF,IAAe,CAC7DjG,YAAaiG,KAGf9G,GAAW6G,cCZPI,GAAY9rB,EAAA/V,UAGhB8hC,GAAiB,SAAU9pB,GACzB,GAAIyQ,GAAczQ,GAAW,OAAOA,EACpC,MAAM6pB,GAAUnoB,GAAY1B,GAAY,0BCL1C,IAAI+pB,GAAUnmB,GAAgB,WAI9BomB,GAAiB,SAAU7+B,EAAG8+B,GAC5B,IACIC,EADAnZ,EAAInM,GAASzZ,GAAG2C,YAEpB,YAAa1I,IAAN2rB,GAAiD3rB,OAA7B8kC,EAAItlB,GAASmM,GAAGgZ,KAAyBE,EAAqBH,GAAaI,ICDxG,IAAIC,GAAcR,GAAAlG,YACd2G,GAAWT,GAAAjG,SACX2G,GAAoBD,GAAS9iC,UAC7BgjC,GAAsBlrB,EAAY+qB,GAAY7iC,UAAUzC,OACxD0lC,GAAWnrB,EAAYirB,GAAkBzB,UACzC4B,GAAWprB,EAAYirB,GAAkB5B,UAEzCgC,GAAkBtsB,GAAM,WAC1B,OAAQ,IAAIgsB,GAAY,GAAGtlC,MAAM,OAAGO,GAAWwiC,cAKjDzc,EAAE,CAAElnB,OAAQ,cAAegH,OAAO,EAAM2c,QAAQ,EAAMgE,OAAQ6e,IAAmB,CAC/E5lC,MAAO,SAAegqB,EAAOC,GAC3B,GAAIwb,SAA+BllC,IAAR0pB,EACzB,OAAOwb,GAAoB1lB,GAAS7d,MAAO8nB,OAE7C,IAAIhrB,EAAS+gB,GAAS7d,MAAM6gC,WACxB8C,EAAQ9hB,GAAgBiG,EAAOhrB,GAC/BkrB,EAAMnG,QAAwBxjB,IAAR0pB,EAAoBjrB,EAASirB,EAAKjrB,GACxDmC,EAAS,IAAKgkC,GAAmBjjC,KAAMojC,IAA9B,CAA4CnhB,GAAS+F,EAAM2b,IACpEC,EAAa,IAAIP,GAASrjC,MAC1B6jC,EAAa,IAAIR,GAASpkC,GAC1B6iB,EAAQ,EACL6hB,EAAQ3b,GACbyb,GAASI,EAAY/hB,IAAS0hB,GAASI,EAAYD,MACnD,OAAO1kC,KC/Bb,IAAI6kC,GAAS1sB,GAAM,WACjB,OAAkC,OAA3B,IAAIzU,KAAKk8B,KAAKkF,UAC2D,IAA3EphC,KAAKpC,UAAUwjC,OAAO3lC,KAAK,CAAE4lC,YAAa,WAAc,OAAO,QAKtE5f,EAAE,CAAElnB,OAAQ,OAAQgH,OAAO,EAAM2gB,OAAQif,IAAU,CAEjDC,OAAQ,SAAgBtmC,GACtB,IAAI2G,EAAI4X,GAAShc,MACbikC,EAAKhnB,EAAY7Y,EAAG,UACxB,MAAoB,iBAAN6/B,GAAmBC,SAASD,GAAa7/B,EAAE4/B,cAAT,eCbhDG,GAAYntB,EAAA/V,UAIhBmjC,GAAiB,SAAU57B,GAEzB,GADAqV,GAAS7d,MACI,WAATwI,GAA8B,YAATA,EAAoBA,EAAO,cAC/C,GAAa,WAATA,EAAmB,MAAM27B,GAAU,kBAC5C,OAAOjpB,GAAoBlb,KAAMwI,ICRnC,IAAI67B,GAAexnB,GAAgB,eAC/BynB,GAAgB3hC,KAAKpC,UAIpB2b,GAAOooB,GAAeD,KACzB1jB,GAAS2jB,GAAeD,GAAcD,ICJxC,IAAIG,GAAe1nB,GAAgB,eAC/B2nB,GAAoBlhC,SAAS/C,UAI3BgkC,MAAgBC,IACpBhnB,GAAuBgnB,GAAmBD,GAAc,CAAEpmC,MAAO,SAAUiG,GACzE,IAAK4U,EAAWhZ,QAAUkZ,EAAS9U,GAAI,OAAO,EAC9C,IAAI2W,EAAI/a,KAAKO,UACb,IAAK2Y,EAAS6B,GAAI,OAAO3W,aAAapE,UAE/BoE,EAAIiwB,GAAejwB,OAAQ2W,IAAM3W,EAAG,OAAO,EAClD,OAAO,YClBPgc,GAAAC,UAEA7C,GAEAinB,GAAoBnhC,SAAS/C,UAC7BmkC,GAAmBrsB,EAAYosB,GAAkB7hC,UACjD+hC,GAAM,mEACNC,GAAavsB,EAAYssB,GAAOttB,MAKhCF,IAAW0tB,IAAAC,GACEL,GALN,OAK+B,CACtC9mC,cAAc,EACdsE,IAAK,WACH,IACE,OAAO2iC,GAAWD,GAAQD,GAAiB1kC,OAAO,GAClD,MAAOsB,GACP,MAAO,OCffsnB,GAAe5R,EAAAlG,KAAa,QAAQ,+CCAhC0M,SCFJunB,GAAiB3tB,GAAM,WACrB,GAA0B,mBAAfslB,YAA2B,CACpC,IAAI0B,EAAS,IAAI1B,YAAY,GAEzB9/B,OAAOooC,aAAa5G,IAASxhC,OAAO+G,eAAey6B,EAAQ,IAAK,CAAEjgC,MAAO,QCDjF,IAAI8mC,GAAgBroC,OAAOooC,aACvBE,GAAsB9tB,GAAM,WAAc6tB,GAAc,MAI5DE,GAAkBD,IAAuBH,GAA+B,SAAsB93B,GAC5F,QAAKiM,EAASjM,OACV83B,IAA8C,eAAfvsB,EAAQvL,OACpCg4B,IAAgBA,GAAch4B,MACnCg4B,UCbJG,IAAkBhuB,GAAM,WAEtB,OAAOxa,OAAOooC,aAAapoC,OAAOyoC,kBAAkB,QHQtD,IAAIC,IAAW,EACXC,GAAWhpB,GAAI,QACfipB,GAAK,EAELC,GAAc,SAAUx4B,MACXA,EAAIs4B,GAAU,CAAEpnC,MAAO,CACpCunC,SAAU,IAAMF,KAChBG,SAAU,OA8DVC,GAAOC,GAAiB,CAC1BC,OA3BW,WACXF,GAAKE,OAAS,aACdR,IAAW,EACX,IAAIx8B,EAAsBoY,GACtB9b,EAASiT,EAAY,GAAGjT,QACxBmS,EAAO,GACXA,EAAKguB,IAAY,EAGbz8B,EAAoByO,GAAMza,SAC5BokB,GAA8B,SAAUjU,GAEtC,IADA,IAAIhO,EAAS6J,EAAoBmE,GACxBpQ,EAAI,EAAGC,EAASmC,EAAOnC,OAAQD,EAAIC,EAAQD,IAClD,GAAIoC,EAAOpC,KAAO0oC,GAAU,CAC1BngC,EAAOnG,EAAQpC,EAAG,GAClB,MAEF,OAAOoC,GAGXmlB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,QAAQ,GAAQ,CAChD/b,oBAAqBqd,OAOzB4f,QA5DY,SAAU94B,EAAI3C,GAE1B,IAAK4O,EAASjM,GAAK,MAAoB,gBAAJ,IAAFA,EAAE,YAAA3E,EAAAlJ,QAAF6N,IAAiBA,GAAmB,iBAANA,EAAiB,IAAM,KAAOA,EAC7F,IAAKiP,GAAOjP,EAAIs4B,IAAW,CAEzB,IAAKJ,GAAal4B,GAAK,MAAO,IAE9B,IAAK3C,EAAQ,MAAO,IAEpBm7B,GAAYx4B,GAEZ,OAAOA,EAAGs4B,IAAUG,UAkDtBM,YA/CgB,SAAU/4B,EAAI3C,GAC9B,IAAK4R,GAAOjP,EAAIs4B,IAAW,CAEzB,IAAKJ,GAAal4B,GAAK,OAAO,EAE9B,IAAK3C,EAAQ,OAAO,EAEpBm7B,GAAYx4B,GAEZ,OAAOA,EAAGs4B,IAAUI,UAuCtBM,SAnCa,SAAUh5B,GAEvB,OADIm4B,IAAYE,IAAYH,GAAal4B,KAAQiP,GAAOjP,EAAIs4B,KAAWE,GAAYx4B,GAC5EA,IAoCT8R,GAAWwmB,KAAY,SI5EnBW,GAAYlvB,EAAA/V,UAEZklC,GAAS,SAAUC,EAASnnC,GAC9Be,KAAKomC,QAAUA,EACfpmC,KAAKf,OAASA,GAGZonC,GAAkBF,GAAO5lC,UAE7B+lC,GAAiB,SAAUvlC,EAAUwlC,EAAiB3lB,GACpD,IAKI9f,EAAU0lC,EAAQ1kB,EAAOhlB,EAAQmC,EAAQc,EAAMkzB,EAL/ChK,EAAOrI,GAAWA,EAAQqI,KAC1Bwd,KAAgB7lB,IAAWA,EAAQ6lB,YACnCC,KAAiB9lB,IAAWA,EAAQ8lB,aACpCC,KAAiB/lB,IAAWA,EAAQ+lB,aACpCplC,EAAKynB,GAAKud,EAAiBtd,GAG3BtT,EAAO,SAAUixB,GAEnB,OADI9lC,GAAU+wB,GAAc/wB,EAAU,SAAU8lC,GACzC,IAAIT,IAAO,EAAMS,IAGtBC,EAAS,SAAU1oC,GACrB,OAAIsoC,GACF5oB,GAAS1f,GACFwoC,EAAcplC,EAAGpD,EAAM,GAAIA,EAAM,GAAIwX,GAAQpU,EAAGpD,EAAM,GAAIA,EAAM,KAChEwoC,EAAcplC,EAAGpD,EAAOwX,GAAQpU,EAAGpD,IAG9C,GAAIuoC,EACF5lC,EAAWC,MACN,CAEL,KADAylC,EAASjU,GAAkBxxB,IACd,MAAMmlC,GAAUvrB,GAAY5Z,GAAY,oBAErD,GAAIsxB,GAAsBmU,GAAS,CACjC,IAAK1kB,EAAQ,EAAGhlB,EAASolB,GAAkBnhB,GAAWjE,EAASglB,EAAOA,IAEpE,IADA7iB,EAAS4nC,EAAO9lC,EAAS+gB,MACXxI,EAAc+sB,GAAiBpnC,GAAS,OAAOA,EAC7D,OAAO,IAAIknC,IAAO,GAEtBrlC,EAAW2xB,GAAY1xB,EAAUylC,OAGnCzmC,EAAOe,EAASf,OACPkzB,EAAOvb,EAAK3X,EAAMe,IAAWnB,MAAM,CAC1C,IACEV,EAAS4nC,EAAO5T,EAAK90B,OACrB,MAAOmD,GACPuwB,GAAc/wB,EAAU,QAASQ,GAEnC,GAAqB,iBAAVrC,GAAsBA,GAAUqa,EAAc+sB,GAAiBpnC,GAAS,OAAOA,EAC1F,OAAO,IAAIknC,IAAO,WC3DtBW,GAAiB,SAAUzkB,EAAO0kB,EAAOj5B,GACvC,IAAIM,EAAW44B,EAUf,OAPEzR,IAEAvc,EAAW5K,EAAY24B,EAAMhgC,cAC7BqH,IAAcN,GACdoL,EAAS8tB,EAAqB54B,EAAU7N,YACxCymC,IAAuBl5B,EAAQvN,WAC/Bg1B,GAAelT,EAAO2kB,GACjB3kB,GCAT4kB,GAAiB,SAAUnL,EAAkBoL,EAASC,GACpD,IAAI/c,GAA6C,IAApC0R,EAAiBz2B,QAAQ,OAClC+hC,GAA+C,IAArCtL,EAAiBz2B,QAAQ,QACnCgiC,EAAQjd,EAAS,MAAQ,MACzBkd,EAAoBtwB,EAAO8kB,GAC3ByL,EAAkBD,GAAqBA,EAAkB/mC,UACzDqB,EAAc0lC,EACdE,EAAW,GAEXC,EAAY,SAAUhR,GACxB,IAAIiR,EAAwBrvB,EAAYkvB,EAAgB9Q,IACxD9V,GAAS4mB,EAAiB9Q,EACjB,OAAPA,EAAe,SAAat4B,GAE1B,OADAupC,EAAsB1nC,KAAgB,IAAV7B,EAAc,EAAIA,GACvC6B,MACE,UAAPy2B,EAAkB,SAAUh5B,GAC9B,QAAO2pC,IAAYluB,EAASzb,KAAeiqC,EAAsB1nC,KAAc,IAARvC,EAAY,EAAIA,IAC9E,OAAPg5B,EAAe,SAAah5B,GAC9B,OAAO2pC,IAAYluB,EAASzb,QAAOY,EAAYqpC,EAAsB1nC,KAAc,IAARvC,EAAY,EAAIA,IAClF,OAAPg5B,EAAe,SAAah5B,GAC9B,QAAO2pC,IAAYluB,EAASzb,KAAeiqC,EAAsB1nC,KAAc,IAARvC,EAAY,EAAIA,IACrF,SAAaA,EAAKU,GAEpB,OADAupC,EAAsB1nC,KAAc,IAARvC,EAAY,EAAIA,EAAKU,GAC1C6B,QAYb,GAPcmkB,GACZ2X,GACC9iB,EAAWsuB,MAAwBF,GAAWG,EAAgB/pC,UAAY4Z,GAAM,YAC/E,IAAIkwB,GAAoBrQ,UAAUl3B,YAMpC6B,EAAculC,EAAOQ,eAAeT,EAASpL,EAAkB1R,EAAQid,GACvExB,GAAAC,cACK,GAAI3hB,GAAS2X,GAAkB,GAAO,CAC3C,IAAIn6B,EAAW,IAAIC,EAEfgmC,EAAiBjmC,EAAS0lC,GAAOD,EAAU,IAAK,EAAI,IAAMzlC,EAE1DkmC,EAAuBzwB,GAAM,WAAczV,EAASK,IAAI,MAGxD8lC,EAAmBvU,IAA4B,SAAUxyB,GAAY,IAAIumC,EAAkBvmC,MAE3FgnC,GAAcX,GAAWhwB,GAAM,eAEjC,IAAI4wB,EAAY,IAAIV,EAChBxlB,EAAQ,EACLA,KAASkmB,EAAUX,GAAOvlB,EAAOA,GACxC,OAAQkmB,EAAUhmC,KAAI,MAGnB8lC,KACHlmC,EAAcslC,GAAQ,SAAUH,EAAOhmC,GACrC+7B,GAAWiK,EAAOQ,GAClB,IAAIte,EAAO6d,GAAkB,IAAIQ,EAAqBP,EAAOnlC,GAE7D,OADgBvD,MAAZ0C,GAAuBulC,GAAQvlC,EAAUkoB,EAAKoe,GAAQ,CAAEpe,KAAMA,EAAMwd,WAAYrc,IAC7EnB,MAEG1oB,UAAYgnC,EACxBA,EAAgBxgC,YAAcnF,IAG5BimC,GAAwBE,KAC1BN,EAAU,UACVA,EAAU,OACVrd,GAAUqd,EAAU,SAGlBM,GAAcH,IAAgBH,EAAUJ,GAGxCD,GAAWG,EAAgBU,cAAcV,EAAgBU,MAU/D,OAPAT,EAAS1L,GAAoBl6B,EAC7BwiB,EAAE,CAAEK,QAAQ,EAAMI,OAAQjjB,GAAe0lC,GAAqBE,GAE9D5e,GAAehnB,EAAak6B,GAEvBsL,GAASD,EAAOe,UAAUtmC,EAAak6B,EAAkB1R,GAEvDxoB,aCtGL4b,MASAqoB,GAAAE,QAGAoC,GAAmBtoB,GAAAxY,IACnB+gC,GAAyBvoB,GAAAE,UAE7BsoB,GAAiB,CACfV,eAAgB,SAAUT,EAASpL,EAAkB1R,EAAQid,GAC3D,IAAIzlC,EAAcslC,GAAQ,SAAUje,EAAMloB,GACxC+7B,GAAW7T,EAAM8T,GACjBoL,GAAiBlf,EAAM,CACrBppB,KAAMi8B,EACNha,MAAO0F,GAAO,MACdmc,WAAOtlC,EACPiqC,UAAMjqC,EACNkqC,KAAM,IAEHpxB,IAAa8R,EAAKsf,KAAO,GACdlqC,MAAZ0C,GAAuBulC,GAAQvlC,EAAUkoB,EAAKoe,GAAQ,CAAEpe,KAAMA,EAAMwd,WAAYrc,OAGlF2S,EAAYn7B,EAAYrB,UAExBioC,EAAmBJ,GAAuBtM,GAE1C7qB,EAAS,SAAUgY,EAAMxrB,EAAKU,GAChC,IAEIsqC,EAAU3mB,EAFVtP,EAAQg2B,EAAiBvf,GACzBzV,EAAQk1B,EAASzf,EAAMxrB,GAqBzB,OAlBE+V,EACFA,EAAMrV,MAAQA,GAGdqU,EAAM81B,KAAO90B,EAAQ,CACnBsO,MAAOA,EAAK6mB,GAAWlrC,GAAK,GAC5BA,IAAKA,EACLU,MAAOA,EACPsqC,SAAUA,EAAWj2B,EAAM81B,KAC3BvoC,UAAM1B,EACNuqC,SAAS,GAENp2B,EAAMmxB,QAAOnxB,EAAMmxB,MAAQnwB,GAC5Bi1B,IAAUA,EAAS1oC,KAAOyT,GAC1B2D,EAAa3E,EAAM+1B,OAClBtf,EAAKsf,OAEI,MAAVzmB,IAAetP,EAAMsP,MAAMA,GAAStO,IACjCyV,GAGPyf,EAAW,SAAUzf,EAAMxrB,GAC7B,IAGI+V,EAHAhB,EAAQg2B,EAAiBvf,GAEzBnH,EAAK6mB,GAAWlrC,GAEpB,GAAc,MAAVqkB,EAAe,OAAOtP,EAAMsP,MAAMA,GAEtC,IAAKtO,EAAQhB,EAAMmxB,MAAOnwB,EAAOA,EAAQA,EAAMzT,KAC7C,GAAIyT,EAAM/V,KAAOA,EAAK,OAAO+V,GAwFjC,OApFAopB,GAAYG,EAAW,CAIrBkL,MAAO,eACL,IACIz1B,EAAQg2B,EADDxoC,MAEPgkB,EAAOxR,EAAMsP,MACbtO,EAAQhB,EAAMmxB,MACXnwB,GACLA,EAAMo1B,SAAU,EACZp1B,EAAMi1B,WAAUj1B,EAAMi1B,SAAWj1B,EAAMi1B,SAAS1oC,UAAO1B,UACpD2lB,EAAKxQ,EAAMsO,OAClBtO,EAAQA,EAAMzT,KAEhByS,EAAMmxB,MAAQnxB,EAAM81B,UAAOjqC,EACvB8Y,EAAa3E,EAAM+1B,KAAO,EAXnBvoC,KAYDuoC,KAAO,GAKnBM,OAAU,SAAUprC,GAClB,IAAIwrB,EAAOjpB,KACPwS,EAAQg2B,EAAiBvf,GACzBzV,EAAQk1B,EAASzf,EAAMxrB,GAC3B,GAAI+V,EAAO,CACT,IAAIzT,EAAOyT,EAAMzT,KACb0V,EAAOjC,EAAMi1B,gBACVj2B,EAAMsP,MAAMtO,EAAMsO,OACzBtO,EAAMo1B,SAAU,EACZnzB,IAAMA,EAAK1V,KAAOA,GAClBA,IAAMA,EAAK0oC,SAAWhzB,GACtBjD,EAAMmxB,OAASnwB,IAAOhB,EAAMmxB,MAAQ5jC,GACpCyS,EAAM81B,MAAQ90B,IAAOhB,EAAM81B,KAAO7yB,GAClC0B,EAAa3E,EAAM+1B,OAClBtf,EAAKsf,OACV,QAAS/0B,GAKbhW,QAAS,SAAiBmtB,OACxB,IAEInX,EAFAhB,EAAQg2B,EAAiBxoC,MACzB6qB,EAAgB7B,GAAK2B,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GAEpEmV,EAAQA,EAAQA,EAAMzT,KAAOyS,EAAMmxB,WACxC9Y,EAAcrX,EAAMrV,MAAOqV,EAAM/V,IAAKuC,MAE/BwT,GAASA,EAAMo1B,SAASp1B,EAAQA,EAAMi1B,UAMjDzmC,IAAK,SAAavE,GAChB,QAASirC,EAAS1oC,KAAMvC,MAI5Bm/B,GAAYG,EAAW3S,EAAS,CAG9BnoB,IAAK,SAAaxE,GAChB,IAAI+V,EAAQk1B,EAAS1oC,KAAMvC,GAC3B,OAAO+V,GAASA,EAAMrV,OAIxBkJ,IAAK,SAAa5J,EAAKU,GACrB,OAAO8S,EAAOjR,KAAc,IAARvC,EAAY,EAAIA,EAAKU,KAEzC,CAGF2qC,IAAK,SAAa3qC,GAChB,OAAO8S,EAAOjR,KAAM7B,EAAkB,IAAVA,EAAc,EAAIA,EAAOA,MAGrDgZ,GAAW4xB,GAAiBhM,EAAW,OAAQ,CACjD96B,IAAK,WACH,OAAOumC,EAAiBxoC,MAAMuoC,QAG3B3mC,GAETsmC,UAAW,SAAUtmC,EAAak6B,EAAkB1R,GAClD,IAAI4e,EAAgBlN,EAAmB,YACnCmN,EAA6Bb,GAAuBtM,GACpDoN,EAA2Bd,GAAuBY,GAUtD9S,GAAet0B,EAAak6B,GAAkB,SAAUxE,EAAUjzB,GAChE8jC,GAAiBnoC,KAAM,CACrBH,KAAMmpC,EACN9rC,OAAQo6B,EACR9kB,MAAOy2B,EAA2B3R,GAClCjzB,KAAMA,EACNikC,UAAMjqC,OAEP,eACD,IAAImU,EAAQ02B,EAAyBlpC,MACjCqE,EAAOmO,EAAMnO,KACbmP,EAAQhB,EAAM81B,KAEX90B,GAASA,EAAMo1B,SAASp1B,EAAQA,EAAMi1B,SAE7C,OAAKj2B,EAAMtV,SAAYsV,EAAM81B,KAAO90B,EAAQA,EAAQA,EAAMzT,KAAOyS,EAAMA,MAAMmxB,OAMjE,QAARt/B,EAAuB,CAAElG,MAAOqV,EAAM/V,IAAKkC,MAAM,GACzC,UAAR0E,EAAyB,CAAElG,MAAOqV,EAAMrV,MAAOwB,MAAM,GAClD,CAAExB,MAAO,CAACqV,EAAM/V,IAAK+V,EAAMrV,OAAQwB,MAAM,IAN9C6S,EAAMtV,YAASmB,EACR,CAAEF,WAAOE,EAAWsB,MAAM,MAMlCyqB,EAAS,UAAY,UAAWA,GAAQ,GAK3CyR,GAAWC,KCnMfmL,GAAW,OAAO,SAAUkC,GAC1B,OAAO,WAAiB,OAAOA,EAAKnpC,KAAMyB,UAAU3E,OAAS2E,UAAU,QAAKpD,MAC3EgqC,cCRCe,GAAMryB,KAAK2mB,IAKf2L,GAAiBtyB,KAAKuyB,OAAS,SAAe7N,GAC5C,OAAQA,GAAKA,IAAK,MAASA,EAAI,KAAOA,EAAIA,EAAIA,EAAI,EAAI2N,GAAI,EAAI3N,ICFhE,IAAI8N,GAASxyB,KAAKyyB,MACdC,GAAM1yB,KAAK2mB,IACXgM,GAAO3yB,KAAK4yB,KACZC,GAAM7yB,KAAK6mB,IAEXiM,IAAUN,IAE+B,KAAxCxyB,KAAKuK,MAAMioB,GAAO3gC,OAAOkhC,aAEzBP,GAAO7K,EAAAA,IAAaA,EAAAA,EAIzBta,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,EAAME,OAAQglB,IAAU,CAChDL,MAAO,SAAe/N,GACpB,OAAQA,GAAKA,GAAK,EAAIoD,IAAMpD,EAAI,kBAC5BgO,GAAIhO,GAAKmO,GACTP,GAAM5N,EAAI,EAAIiO,GAAKjO,EAAI,GAAKiO,GAAKjO,EAAI,OClB7C,IAAIsO,GAAShzB,KAAKizB,MACdC,GAAMlzB,KAAK2mB,IACXwM,GAAOnzB,KAAK4yB,KAShBvlB,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,EAAME,SAAUklB,IAAU,EAAIA,GAAO,GAAK,IAAM,CACxEC,eAROG,EAAM1O,GACb,OAAQyI,SAASzI,GAAKA,IAAW,GAALA,EAAaA,EAAI,GAAK0O,GAAO1O,GAAKwO,GAAIxO,EAAIyO,GAAKzO,EAAIA,EAAI,IAA9CA,KCLvC,IAAI2O,GAASrzB,KAAKszB,MACdC,GAAMvzB,KAAK2mB,IAKftZ,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,EAAME,SAAUulB,IAAU,EAAIA,IAAO,GAAM,IAAM,CACzEC,MAAO,SAAe5O,GACpB,OAAmB,IAAXA,GAAKA,GAAUA,EAAI6O,IAAK,EAAI7O,IAAM,EAAIA,IAAM,eCRxD8O,GAAiBxzB,KAAK0nB,MAAQ,SAAchD,GAE1C,OAAmB,IAAXA,GAAKA,IAAWA,GAAKA,EAAIA,EAAIA,EAAI,GAAI,EAAK,GCFpD,IAAI+O,GAAMzzB,KAAKsmB,IACXoN,GAAM1zB,KAAKwmB,IAIfnZ,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChC+lB,KAAM,SAAcjP,GAClB,OAAO8O,GAAK9O,GAAKA,GAAKgP,GAAID,GAAI/O,GAAI,EAAI,MCR1C,IAAIkP,GAAQ5zB,KAAKuK,MACbspB,GAAM7zB,KAAK2mB,IACXmN,GAAQ9zB,KAAK+zB,MAIjB1mB,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChComB,MAAO,SAAetP,GACpB,OAAQA,KAAO,GAAK,GAAKkP,GAAMC,GAAInP,EAAI,IAAOoP,IAAS,gBCTvDG,GAASj0B,KAAKk0B,MACdC,GAAMn0B,KAAKo0B,IAIfC,IAAmBJ,IAEdA,GAAO,IAAM,oBAAsBA,GAAO,IAAM,qBAE9B,OAAlBA,IAAO,OACR,SAAevP,GACjB,OAAmB,IAAXA,GAAKA,GAAUA,EAAIA,GAAI,MAASA,EAAI,KAAOA,EAAIA,EAAIA,EAAI,EAAIyP,GAAIzP,GAAK,GAC1EuP,GCTJ,IAAIK,GAAQt0B,KAAKu0B,KACbC,GAAMx0B,KAAKsmB,IACXmO,GAAIz0B,KAAKwY,EAIbnL,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,EAAME,QAASwmB,IAASA,GAAM,OAAS3M,EAAAA,GAAY,CAC3E4M,KAAM,SAAc7P,GAClB,IAAIgQ,EAAIL,GAAMG,GAAI9P,GAAK,GAAK,EAC5B,OAAQgQ,EAAI,GAAKA,EAAID,GAAIA,MAAOA,GAAI,MCPxCpnB,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,EAAME,OAAQumB,IAASr0B,KAAKk0B,OAAS,CAAEA,MAAOG,eCJpEM,GAAM30B,KAAKsmB,IACXsO,GAAM50B,KAAKwmB,IACXqO,GAAUD,GAAI,GAAG,IACjBE,GAAYF,GAAI,GAAG,IACnBG,GAAQH,GAAI,EAAG,MAAQ,EAAIE,IAC3BE,GAAQJ,GAAI,GAAG,KASnBK,GAAiBj1B,KAAKk1B,QAAU,SAAgBxQ,GAC9C,IAEIr4B,EAAGnE,EAFHitC,EAAOR,GAAIjQ,GACX0Q,EAAQ5B,GAAK9O,GAEjB,OAAIyQ,EAAOH,GAAcI,GAAwBD,EAAOH,GAAQF,GAVrD,EAAID,GAAU,EAAIA,IAUgDG,GAAQF,IAErF5sC,GADAmE,GAAK,EAAIyoC,GAAYD,IAAWM,IAClB9oC,EAAI8oC,IAELJ,IAAS7sC,GAAUA,EAAektC,GAAQzN,EAAAA,GAChDyN,EAAQltC,GCpBjBmlB,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAAEsnB,OAAQD,KCF5C,IAAII,GAASr1B,KAAKs1B,MACdC,GAAMv1B,KAAKsmB,IACXkP,GAAOx1B,KAAK4yB,KAIZ6C,KAAUJ,IAAUA,GAAO1N,EAAAA,EAAUG,OAASH,EAAAA,EAIlDta,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,EAAME,OAAQ2nB,IAAS,CAE/CH,MAAO,SAAet/B,EAAQ0/B,OAC5B,IAIIhtC,EAAKitC,EAJLC,EAAM,EACN9vC,EAAI,EACJ+vC,EAAOnrC,UAAU3E,OACjB+vC,EAAO,EAEJhwC,EAAI+vC,GAELC,GADJptC,EAAM6sC,GAAI7qC,UAAU5E,QAGlB8vC,EAAMA,GADND,EAAMG,EAAOptC,GACKitC,EAAM,EACxBG,EAAOptC,GAGPktC,GAFSltC,EAAM,GACfitC,EAAMjtC,EAAMotC,GACCH,EACDjtC,EAEhB,OAAOotC,IAASnO,EAAAA,EAAWA,EAAAA,EAAWmO,EAAON,GAAKI,MC5BtD,IAAIG,GAAQ/1B,KAAKg2B,KAEbC,GAAS51B,GAAM,WACjB,OAA+B,GAAxB01B,GAAM,WAAY,IAA4B,GAAhBA,GAAMhwC,UAM7CsnB,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,EAAME,OAAQmoB,IAAU,CAChDD,KAAM,SAActR,EAAGC,GACrB,IAAIuR,EAAS,MACTC,GAAMzR,EACN0R,GAAMzR,EACN0R,EAAKH,EAASC,EACdG,EAAKJ,EAASE,EAClB,OAAO,EAAIC,EAAKC,IAAOJ,EAASC,IAAO,IAAMG,EAAKD,GAAMH,EAASE,IAAO,KAAO,KAAO,aCpBtFG,GAAMv2B,KAAK2mB,IACX6P,GAASx2B,KAAKy2B,OAGlBC,GAAiB12B,KAAK22B,OAAS,SAAejS,GAC5C,OAAO6R,GAAI7R,GAAK8R,ICAlBnpB,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChC+oB,MAAOD,KCDTrpB,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAAE2kB,MAAOD,KCH3C,IAAIsE,GAAM52B,KAAK2mB,IACXkQ,GAAM72B,KAAK6mB,IAIfxZ,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChCkpB,KAAM,SAAcpS,GAClB,OAAOkS,GAAIlS,GAAKmS,MCJpBxpB,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChC8Z,KAAM8L,KCFR,IAAIuD,GAAM/2B,KAAKsmB,IACX0Q,GAAMh3B,KAAKo0B,IACX6C,GAAIj3B,KAAKwY,EAET0e,GAAS72B,GAAM,WAEjB,OAA4B,OAArBL,KAAKm3B,MAAK,UAMnB9pB,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,EAAME,OAAQopB,IAAU,CAChDC,KAAM,SAAczS,GAClB,OAAOqS,GAAIrS,GAAKA,GAAK,GAAK2P,GAAM3P,GAAK2P,IAAO3P,IAAM,GAAKsS,GAAItS,EAAI,GAAKsS,IAAKtS,EAAI,KAAOuS,GAAI,MCf5F,IAAIG,GAAMp3B,KAAKo0B,IAIf/mB,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChCypB,KAAM,SAAc3S,GAClB,IAAIr4B,EAAIgoC,GAAM3P,GAAKA,GACfJ,EAAI+P,IAAO3P,GACf,OAAOr4B,GAAKs7B,EAAAA,EAAW,EAAIrD,GAAKqD,EAAAA,GAAW,GAAMt7B,EAAIi4B,IAAM8S,GAAI1S,GAAK0S,IAAK1S,OCP7E7S,GAAe7R,KAAM,QAAQ,GCF7B,IAAIs3B,GAAOt3B,KAAKqK,KACZktB,GAAQv3B,KAAKuK,MAIjB8C,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChC4pB,MAAO,SAAethC,GACpB,OAAQA,EAAK,EAAIqhC,GAAQD,IAAMphC,qCCG/BiU,MACArK,KACA2G,SCVJgxB,GAAiBn2B,EAAY,GAAI9J,mBCHjCkgC,GAAiB,gDCIjB,IAAIC,GAAUr2B,EAAY,GAAGzJ,SAEzB+/B,GAAQC,OAAO,oGACfC,GAAQD,OAAOE,oGAGfC,GAAe,SAAU/uB,GAC3B,OAAO,SAAUqC,GACf,IAAIyB,EAAS+B,GAAS/M,EAAuBuJ,IAG7C,OAFW,EAAPrC,IAAU8D,EAAS4qB,GAAQ5qB,EAAQ6qB,GAAO,KACnC,EAAP3uB,IAAU8D,EAAS4qB,GAAQ5qB,EAAQ+qB,GAAO,KACvC/qB,QAIXkrB,GAAiB,CAGflnB,MAAOinB,GAAa,GAGpBhnB,IAAKgnB,GAAa,GAGlBE,KAAMF,GAAa,KHbjBE,KAEAC,GAAS,SACTC,GAAen4B,EAAa,OAC5Bo4B,GAAkBD,GAAa5uC,UAC/B8uC,GAAYr4B,EAAO/V,UACnBquC,GAAaj3B,EAAY,GAAGva,OAC5ByxC,GAAal3B,EAAY,GAAGm3B,YAI5BC,GAAY,SAAUtxC,GACxB,IAAIuxC,EAAYzyB,EAAY9e,EAAO,UACnC,MAA2B,gBAAJ,IAATuxC,EAAS,YAAApnC,EAAAlJ,QAATswC,IAAwBA,EAAYC,GAASD,IAKzDC,GAAW,SAAU12B,GACvB,IACI0qB,EAAOiM,EAAOC,EAAOC,EAASC,EAAQjzC,EAAQglB,EAAOmZ,EADrDhuB,EAAKgQ,EAAYhE,EAAU,UAE/B,GAAIwB,EAASxN,GAAK,MAAMoiC,GAAU,6CAClC,GAAiB,iBAANpiC,GAAkBA,EAAGnQ,OAAS,EAGvC,GAFAmQ,EAAE+iC,GAAQ/iC,GAEI,MADd02B,EAAQ4L,GAAWtiC,EAAI,KACO,KAAV02B,GAElB,GAAc,MADdiM,EAAQL,GAAWtiC,EAAI,KACO,MAAV2iC,EAAe,OAAO/Q,SACrC,GAAc,KAAV8E,EAAc,CACvB,OAAQ4L,GAAWtiC,EAAI,IACrB,KAAK,GAAI,KAAK,GAAI4iC,EAAQ,EAAGC,EAAU,GAAI,MAC3C,KAAK,GAAI,KAAK,IAAKD,EAAQ,EAAGC,EAAU,GAAI,cACnC,OAAQ7iC,EAInB,IADAnQ,GADAizC,EAAST,GAAWriC,EAAI,IACRnQ,OACXglB,EAAQ,EAAGA,EAAQhlB,EAAQglB,IAI9B,IAHAmZ,EAAOsU,GAAWQ,EAAQjuB,IAGf,IAAMmZ,EAAO6U,EAAS,OAAOjR,IACxC,OAAOoR,SAASF,EAAQF,GAE5B,OAAQ5iC,GAKZ,GAAIkX,GAAS+qB,IAASC,GAAa,UAAYA,GAAa,QAAUA,GAAa,SAAU,CAQ3F,IAPA,IAcqBe,GAdjBC,GAAgB,SAAgBhyC,GAClC,IAAI8pB,EAAIxmB,UAAU3E,OAAS,EAAI,EAAIqyC,GAAaM,GAAUtxC,IACtD4oC,EAAQ/mC,KAEZ,OAAOsZ,EAAc81B,GAAiBrI,IAAU3vB,GAAM,WAAco3B,GAAgBzH,MAChFD,GAAkBlqC,OAAOqrB,GAAI8e,EAAOoJ,IAAiBloB,GAElDmoB,GAAOj5B,EAAWk5B,GAAuBlB,IAEhD,oLAKAx2B,MAAM,KAAM23B,GAAI,EAAQF,GAAKtzC,OAASwzC,GAAGA,KACrCp0B,GAAOizB,GAAce,GAAME,GAAKE,OAAQp0B,GAAOi0B,GAAeD,KAAGK,GACpDJ,GAAeD,GAAGM,GAA2BrB,GAAce,KAG9EC,GAAc5vC,UAAY6uC,GAC1BA,GAAgBroC,YAAcopC,GAC9BxvB,GAAS3J,EAAQk4B,GAAQiB,IIlF3B/rB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAClC8rB,QAAS15B,KAAKwmB,IAAI,GAAG,gBCHnBmT,GAAiB15B,EAAAktB,SAKrByM,GAAiB/nC,OAAOs7B,UAAY,SAAkBj3B,GACpD,MAAoB,iBAANA,GAAkByjC,GAAezjC,ICHjDmX,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAAEuf,SAAUyM,eCH5CC,GAAQ75B,KAAKuK,MAKjBuvB,GAAiBjoC,OAAOkoC,WAAa,SAAmB7jC,GACtD,OAAQiM,EAASjM,IAAOi3B,SAASj3B,IAAO2jC,GAAM3jC,KAAQA,GCHxDmX,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAClCmsB,UAAWD,KCFbzsB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAClCvQ,MAAO,SAAeoN,GAEpB,OAAOA,GAAUA,KCJrB,IAAIuvB,GAAMh6B,KAAKsmB,IAIfjZ,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAClCqsB,cAAe,SAAuBxvB,GACpC,OAAOqvB,GAAiBrvB,IAAWuvB,GAAIvvB,IAAW,oBCLtD4C,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAClCssB,iBAAkB,mBCDpB7sB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAClCusB,kBAAkB,6BCDhBlC,GAAAC,KAGAkC,GAAS94B,EAAY,GAAG3C,QACxB07B,GAAep6B,EAAAq6B,WACfC,GAASt6B,EAAA5W,OACTmxC,GAAWD,IAAUA,GAAOxwC,SAOhC0wC,GANa,EAAIJ,GAAa3C,qDAAyB/P,EAAAA,GAEjD6S,KAAan6B,GAAM,WAAcg6B,GAAax0C,OAAO20C,QAIjC,SAAoBztB,GAC5C,IAAI2tB,EAAaC,GAAQ7rB,GAAS/B,IAC9B7kB,EAASmyC,GAAaK,GAC1B,OAAkB,IAAXxyC,GAA4C,KAA5BkyC,GAAOM,EAAe,IAAY,EAAKxyC,GAC5DmyC,GCfJhtB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQjc,OAAOyoC,YAAcG,IAAc,CAC3EH,WAAYG,kBCHVxC,GAAAC,KAGA0C,GAAY36B,EAAAi5B,SACZ2B,GAAS56B,EAAA5W,OACTyxC,GAAWD,IAAUA,GAAO9wC,SAC5BgxC,GAAG,YACHC,GAAO15B,EAAYy5B,GAAIz6B,MACvB26B,GAA2C,IAAlCL,GAAUlD,oDAAiE,KAApCkD,GAAUlD,sDAExDoD,KAAaz6B,GAAM,WAAcu6B,GAAU/0C,OAAOi1C,QAIxDI,GAAiBD,GAAS,SAAkBluB,EAAQ+rB,GAClD,IAAI1M,EAAC+O,GAAQrsB,GAAS/B,IACtB,OAAO6tB,GAAUxO,EAAI0M,IAAU,IAAOkC,GAAKD,GAAK3O,GAAK,GAAK,MACxDwO,GCfJvtB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQjc,OAAOqnC,UAAYgC,IAAY,CACvEhC,SAAUgC,YCDRE,GAAan7B,EAAAimB,WAIjBmV,GAAiB,SAAgBviB,GAC/B,IAAIwiB,EAAMxsB,GAAS/M,EAAuB9Y,OACtCf,EAAS,GACTgpB,EAAI1G,GAAoBsO,GAC5B,GAAI5H,EAAI,GAAKA,GAAKyW,EAAAA,EAAU,MAAMyT,GAAW,+BAC7C,KAAMlqB,EAAI,GAAIA,KAAO,KAAOoqB,GAAOA,GAAc,EAAJpqB,IAAOhpB,GAAUozC,GAC9D,OAAOpzC,GCPT,IAAIqzC,GAAat7B,EAAAimB,WACbsV,GAASv7B,EAAAnP,OACT2qC,GAAQz7B,KAAKuK,MACbmxB,GAASp6B,EAAY+5B,IACrBM,GAAcr6B,EAAY,GAAGva,OAC7B60C,GAAat6B,EAAY,GAAIu6B,SAE7BC,GAAM,SAAUpX,EAAGxT,EAAG6qB,GACxB,OAAa,IAAN7qB,EAAU6qB,EAAM7qB,EAAI,GAAM,EAAI4qB,GAAIpX,EAAGxT,EAAI,EAAG6qB,EAAMrX,GAAKoX,GAAIpX,EAAIA,EAAGxT,EAAI,EAAG6qB,IAgB9EC,GAAW,SAAU/uB,EAAMiE,EAAGkW,OAChC,IAAIrc,GAAQ,EACRkxB,EAAK7U,IACArc,EAAQ,GACfkxB,GAAM/qB,EAAIjE,EAAKlC,GACfkC,EAAKlC,GAASkxB,EAAK,IACnBA,EAAKR,GAAMQ,EAAK,MAIhBC,GAAS,SAAUjvB,EAAMiE,OAC3B,IAAInG,EAAQ,EACRqc,EAAI,IACCrc,GAAS,GAChBqc,GAAKna,EAAKlC,GACVkC,EAAKlC,GAAS0wB,GAAMrU,EAAIlW,GACxBkW,EAAKA,EAAIlW,EAAK,KAIdirB,GAAe,SAAUlvB,OAC3B,IAAIlC,EAAQ,EACRqxB,EAAI,KACCrxB,GAAS,MACN,KAANqxB,GAAsB,IAAVrxB,GAA+B,IAAhBkC,EAAKlC,GAAc,CAChD,IAAI2pB,EAAI8G,GAAOvuB,EAAKlC,IACpBqxB,EAAU,KAANA,EAAW1H,EAAI0H,EAAIV,GAAO,IAAK,EAAIhH,EAAE3uC,QAAU2uC,EAErD,OAAO0H,GAGPC,GAASh8B,GAAM,WACjB,MAAkC,UAA3Bu7B,GAAW,KAAS,IACF,MAAvBA,GAAW,GAAK,IACS,SAAzBA,GAAW,MAAO,IACuB,wBAAzCA,GAAW,kBAAuB,QAC/Bv7B,GAAM,WAEXu7B,GAAW,OAKbvuB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQuuB,IAAU,CACnDR,QAAS,SAAiBS,GACxB,IAKIxwC,EAAGywC,EAAG1tC,EAAGM,EALTsb,EAASgtB,GAAgBxuC,MACzBuzC,EAAchyB,GAAoB8xB,GAClCrvB,EAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GACvBya,EAAO,GACPx/B,EAAS,IAIb,GAAIs0C,EAAc,GAAKA,EAAc,GAAI,MAAMjB,GAAW,6BAE1D,GAAI9wB,GAAUA,EAAQ,MAAO,MAC7B,GAAIA,IAAU,MAASA,GAAU,KAAM,OAAO+wB,GAAO/wB,GAKrD,GAJIA,EAAS,IACXid,EAAO,IACPjd,GAAUA,GAERA,EAAS,MAKX,GAHA8xB,GADAzwC,EA3EI,SAAU44B,OAClB,IAAIxT,EAAI,EACJurB,EAAK/X,EACF+X,GAAM,MACXvrB,GAAK,GACLurB,GAAM,UAEDA,GAAM,GACXvrB,GAAK,EACLurB,GAAM,EACN,OAAOvrB,EAiEDwrB,CAAIjyB,EAASqxB,GAAI,EAAG,GAAI,IAAM,IAC1B,EAAIrxB,EAASqxB,GAAI,GAAIhwC,EAAG,GAAK2e,EAASqxB,GAAI,EAAGhwC,EAAG,GACxDywC,GAAK,kBACLzwC,EAAI,GAAKA,GACD,EAAG,KACTkwC,GAAS/uB,EAAM,EAAGsvB,GAClB1tC,EAAI2tC,EACG3tC,GAAK,GACVmtC,GAAS/uB,EAAM,IAAK,GACpBpe,GAAK,MAEPmtC,GAAS/uB,EAAM6uB,GAAI,GAAIjtC,EAAG,GAAI,GAC9BA,EAAI/C,EAAI,EACD+C,GAAK,IACVqtC,GAAOjvB,EAAM,SACbpe,GAAK,GAEPqtC,GAAOjvB,EAAM,GAAKpe,GAClBmtC,GAAS/uB,EAAM,EAAG,GAClBivB,GAAOjvB,EAAM,GACb/kB,EAASi0C,GAAalvB,QAEtB+uB,GAAS/uB,EAAM,EAAGsvB,GAClBP,GAAS/uB,EAAM,IAAMnhB,EAAG,GACxB5D,EAASi0C,GAAalvB,GAAQyuB,GAAO,IAAKc,GAU5C,OALAt0C,EAFEs0C,EAAc,EAEP9U,IADTv4B,EAAIjH,EAAOnC,SACWy2C,EAClB,KAAOd,GAAO,IAAKc,EAAcrtC,GAAKjH,EACtCyzC,GAAYzzC,EAAQ,EAAGiH,EAAIqtC,GAAe,IAAMb,GAAYzzC,EAAQiH,EAAIqtC,IAEnE9U,EAAOx/B,eCpHlBy0C,GAAU92C,OAAOkL,OAEjB6rC,GAAiB/2C,OAAO+G,eACxBiwC,GAASv7B,EAAY,GAAGhM,QAI5BwnC,IAAkBH,IAAWt8B,GAAM,WAEjC,GAAID,GAQiB,IARFu8B,GAAQ,CAAErY,EAAG,GAAKqY,GAAQC,GAAe,GAAI,IAAK,CACnEj2C,YAAY,EACZuE,IAAK,WACH0xC,GAAe3zC,KAAM,IAAK,CACxB7B,MAAO,EACPT,YAAY,OAGd,CAAE29B,EAAG,KAAMA,EAAS,OAAO,EAE/B,IAAI7L,EAAI,GACJskB,EAAI,GAEJx5B,EAASla,SACT2zC,EAAW,uBAGf,OAFAvkB,EAAElV,GAAU,EACZy5B,EAASp7B,MAAM,IAAInb,SAAQ,SAAU09B,GAAO4Y,EAAE5Y,GAAOA,KACpB,GAA1BwY,GAAQ,GAAIlkB,GAAGlV,IAAgByL,GAAW2tB,GAAQ,GAAII,IAAI7yB,KAAK,KAAO8yB,KAC1E,SAAgB72C,EAAQmM,OAC3B,IAAI2qC,EAAIh4B,GAAS9e,GACbizB,EAAkB1uB,UAAU3E,OAC5BglB,EAAQ,EACR7Y,EAAwB6Z,GACxBnW,EAAuB6K,EACpB2Y,EAAkBrO,OACvB,IAIIrkB,EAJA0lC,EAAIvqB,EAAcnX,UAAUqgB,MAC5BnlB,EAAOsM,EAAwB2qC,GAAO7tB,GAAWod,GAAIl6B,EAAsBk6B,IAAMpd,GAAWod,GAC5FrmC,EAASH,EAAKG,OACd8I,EAAI,EAED9I,EAAS8I,GACdnI,EAAMd,EAAKiJ,KACNuR,IAAeO,EAAK/K,EAAsBw2B,EAAG1lC,KAAMu2C,EAAEv2C,GAAO0lC,EAAE1lC,IAErE,OAAOu2C,GACPN,GClDJtvB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQjoB,OAAOkL,SAAW+rC,IAAU,CACpE/rC,OAAQ+rC,YCAVI,IAA6B78B,GAAM,WAGjC,KAAIojB,IAAUA,GAAS,KAAvB,CACA,IAAI/8B,EAAMsZ,KAAKsF,SAGf63B,iBAAiB91C,KAAK,KAAMX,GAAK,sBAC1BuZ,EAAOvZ,OCLZ0Z,GACFiN,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQovB,IAAU,CACnDE,iBAAkB,SAA0Bp5B,EAAGq5B,GAC7C52B,GAAuBxB,GAAShc,MAAO+a,EAAG,CAAE9Y,IAAK4Y,GAAUu5B,GAAS12C,YAAY,EAAMC,cAAc,OCHtGwZ,GACFiN,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQovB,IAAU,CACnDC,iBAAkB,SAA0Bn5B,EAAGsS,GAC7C7P,GAAuBxB,GAAShc,MAAO+a,EAAG,CAAE1T,IAAKwT,GAAUwS,GAAS3vB,YAAY,EAAMC,cAAc,cCPtG02C,GAAuBh8B,EAFvBb,GAGA88B,GAAOj8B,EAAY,GAAGhV,MAGtBkxC,GAAe,SAAUC,GAC3B,OAAO,SAAUvnC,OACf,IAKIxP,EALA2G,EAAI2U,EAAgB9L,GACpBtQ,EAAOopB,GAAW3hB,GAClBtH,EAASH,EAAKG,OACdD,EAAI,EACJoC,EAAS,GAENnC,EAASD,GACdY,EAAMd,EAAKE,KACNsa,IAAek9B,GAAqBjwC,EAAG3G,IAC1C62C,GAAKr1C,EAAQu1C,EAAa,CAAC/2C,EAAK2G,EAAE3G,IAAQ2G,EAAE3G,IAGhD,OAAOwB,QAIXw1C,GAAiB,CAGfxd,QAASsd,IAAa,GAGtBtgC,OAAQsgC,IAAa,KCjCnBtd,QAIJ7S,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAClCsS,QAAS,SAAiB7yB,GACxB,OAAMswC,GAAUtwC,aCHhByhC,GAAAI,SAGA0O,GAAU/3C,OAAOyQ,OACjBunC,GAAsBx9B,GAAM,WAAcu9B,GAAQ,MAItDvwB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQ+vB,GAAqBnyC,MAAO2iC,IAAY,CAChF/3B,OAAQ,SAAgBJ,GACtB,OAAO0nC,IAAWz7B,EAASjM,GAAM0nC,GAAOE,GAAU5nC,IAAOA,KCR7DmX,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAClCmwB,YAAa,SAAqB/zC,GAChC,IAAI+E,EAAM,GAIV,OAHAwgC,GAAQvlC,GAAU,SAAUmF,EAAGk1B,GAC7B3T,GAAe3hB,EAAKI,EAAGk1B,KACtB,CAAEqL,YAAY,IACV3gC,YCTP+Q,EAGAk+B,GAAsB39B,GAAM,cAA6C,MAK7EgN,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,QAJpB1N,GAAe49B,GAIqBtyC,MAAO0U,GAAe,CACtEpO,yBAA0B,SAAkCkE,EAAIxP,GAC9D,OAAMu3C,GAAgCj8B,EAAgB9L,GAAKxP,MCJ/D2mB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAMliB,MAAO0U,GAAe,CACtD89B,0BAA2B,SAAmCprC,OAC5D,IAKIpM,EAAKJ,EALL+G,EAAI2U,EAAgBlP,GACpBd,EAA2B8N,EAC3Bla,EAAOumB,GAAQ9e,GACfnF,EAAS,GACT6iB,EAAQ,EAELnlB,EAAKG,OAASglB,QAEAzjB,KADnBhB,EAAa0L,EAAyB3E,EAAG3G,EAAMd,EAAKmlB,QACtB2F,GAAexoB,EAAQxB,EAAKJ,GAE5D,OAAO4B,YCnBPknB,GAGA+uB,GAAsB99B,GAAM,WAAc,OAAQxa,OAAOkM,oBAAoB,MAIjFsb,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQqwB,IAAuB,CAC/DpsC,oBAAmBqsC,KCJrB,IAAIC,GAAsBh+B,GAAM,WAAcid,GAAqB,MAInEjQ,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQuwB,GAAqB3yC,MAAOwxB,IAA4B,CAChG/pB,eAAgB,SAAwB+C,GACtC,OAAOonB,GAAqBrY,GAAS/O,iBCTzCooC,GAAiBz4C,OAAO04C,IAAM,SAAY7Z,EAAGC,GAE3C,OAAOD,IAAMC,EAAU,IAAND,GAAW,EAAIA,GAAM,EAAIC,EAAID,GAAKA,GAAKC,GAAKA,GCA/DtX,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAClC2wB,GAAID,KCANjxB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQjoB,OAAOooC,eAAiBG,IAAiB,CACjFH,aAAcG,KCAhB,IAAIoQ,GAAY34C,OAAO44C,SACnBC,GAAsBr+B,GAAM,WAAcm+B,GAAU,MAIxDnxB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQ4wB,IAAuB1Q,IAA+B,CAC9FyQ,SAAU,SAAkBvoC,GAC1B,OAAKiM,EAASjM,QACV83B,IAA8C,eAAfvsB,EAAQvL,OACpCsoC,IAAYA,GAAUtoC,OCTjC,IAAIyoC,GAAY94C,OAAO+4C,SACnBC,GAAsBx+B,GAAM,WAAcs+B,GAAU,MAIxDtxB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQ+wB,IAAuB7Q,IAA+B,CAC9F4Q,SAAU,SAAkB1oC,GAC1B,OAAKiM,EAASjM,QACV83B,IAA8C,eAAfvsB,EAAQvL,OACpCyoC,IAAYA,GAAUzoC,OCXjC,IAAI4oC,GAAsBz+B,GAAM,WAAc2O,GAAW,MAIzD3B,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQgxB,IAAuB,CAC/Dl5C,KAAM,SAAcsQ,GAClB,OAAO8Y,GAAW/J,GAAS/O,cCJ3B4J,EAIAM,GACFiN,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQovB,IAAU,CACnD6B,iBAAkB,SAA0B/6B,GAC1C,IAEI9c,EAFAmG,EAAI4X,GAAShc,MACbvC,EAAM0f,EAAcpC,MAGtB,GAAI9c,EAAI83C,GAA4B3xC,EAAG3G,GAAM,OAAOQ,EAAKgE,UAClDmC,EAAIiwB,GAAejwB,cCZ9ByS,EAIAM,GACFiN,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQovB,IAAU,CACnD+B,iBAAkB,SAA0Bj7B,GAC1C,IAEI9c,EAFAmG,EAAI4X,GAAShc,MACbvC,EAAM0f,EAAcpC,MAGtB,GAAI9c,EAAIg4C,GAA4B7xC,EAAG3G,GAAM,OAAOQ,EAAKoJ,UAClDjD,EAAIiwB,GAAejwB,cCjB9ByhC,GAAAI,SAKAiQ,GAAqBt5C,OAAOyoC,kBAC5B8Q,GAAsB/+B,GAAM,WAAc8+B,GAAmB,MAIjE9xB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQsxB,GAAqB1zC,MAAO2iC,IAAY,CAChFC,kBAAmB,SAA2Bp4B,GAC5C,OAAOipC,IAAsBh9B,EAASjM,GAAMipC,GAAkBE,GAAUnpC,IAAOA,YCZ/E44B,GAAAI,SAKAoQ,GAAQz5C,OAAO05C,KACfC,GAAsBn/B,GAAM,WAAci/B,GAAM,MAIpDjyB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQ0xB,GAAqB9zC,MAAO2iC,IAAY,CAChFkR,KAAM,SAAcrpC,GAClB,OAAOopC,IAASn9B,EAASjM,GAAMopC,GAAKG,GAAUvpC,IAAOA,KCTzDmX,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAClC1a,eAAgBsrB,YCAlBkhB,GAAiBrxB,GAAqB,GAAMxiB,SAAW,WACrD,MAAO,WAAa4iB,GAAQxlB,MAAQ,KCDjColB,IACHzE,GAAS/jB,OAAO2D,UAAW,WAAYk2C,GAAU,CAAE51B,QAAQ,WCNzD4zB,GAAAxgC,OAIJmQ,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAClC1Q,OAAQ,SAAgB7P,GACtB,OAAMsyC,GAAStyC,MCFnBggB,EAAE,CAAEK,QAAQ,EAAMI,OAAQwsB,YAAcG,IAAe,CACrDH,WAAYG,KCDdptB,EAAE,CAAEK,QAAQ,EAAMI,OAAQorB,UAAYgC,IAAa,CACjDhC,SAAUgC,eCJZ0E,GAAiB3/B,EAAA3X,kBCAjBu3C,GAAc,qCAAwCr/B,KAAKiC,GCU3D,IAUIq9B,GAAUC,GAAOC,GAASC,GAV1BC,GAAMjgC,EAAAkgC,aACNC,GAAQngC,EAAAogC,eACRC,GAAUrgC,EAAA4C,QACV09B,GAAWtgC,EAAAugC,SACXC,GAAWxgC,EAAA1T,SACXm0C,GAAiBzgC,EAAA0gC,eACjBC,GAAS3gC,EAAAnP,OACT+vC,GAAU,EACVC,GAAQ,GACRC,GAAqB,qBAGzB,IAEEjB,GAAW7/B,EAAA+gC,SACX,MAAOz2C,IAET,IAAI02C,GAAM,SAAUj7C,GAClB,GAAImf,GAAO27B,GAAO96C,GAAK,CACrB,IAAIwE,EAAKs2C,GAAM96C,UACR86C,GAAM96C,GACbwE,MAIA02C,GAAS,SAAUl7C,GACrB,OAAO,WACLi7C,GAAIj7C,KAIJm7C,GAAW,SAAUC,GACvBH,GAAIG,EAAMn0B,OAGRo0B,GAAO,SAAUr7C,GAEnBia,EAAAqhC,YAAmBV,GAAO56C,GAAK85C,GAASyB,SAAW,KAAOzB,GAAS0B,OAIhEtB,IAAQE,KACXF,GAAM,SAAsB11C,GAC1B,IAAIC,EAAO8mB,GAAW7mB,UAAW,GAKjC,OAJAo2C,KAAQD,IAAW,WACjB3yB,GAAMjM,EAAWzX,GAAMA,EAAKi2C,GAASj2C,QAAKlD,EAAWmD,IAEvDs1C,GAAMc,IACCA,IAETT,GAAQ,SAAwBp6C,UACvB86C,GAAM96C,IAGX87B,GACFie,GAAQ,SAAU/5C,GAChBs6C,GAAQmB,SAASP,GAAOl7C,KAGjBu6C,IAAYA,GAASmB,IAC9B3B,GAAQ,SAAU/5C,GAChBu6C,GAASmB,IAAIR,GAAOl7C,KAIb06C,KAAmBb,IAE5BI,IADAD,GAAU,IAAIU,IACCiB,MACf3B,GAAQ4B,MAAMC,UAAYV,GAC1BpB,GAAQ9tB,GAAKguB,GAAKqB,YAAarB,KAI/BhgC,EAAA6hC,kBACA7/B,EAAWhC,EAAAqhC,eACVrhC,EAAA8hC,eACDjC,IAAkC,UAAtBA,GAASyB,WACpBlhC,EAAMghC,KAEPtB,GAAQsB,GACRphC,EAAA6hC,iBAAwB,UAAWX,IAAU,IAG7CpB,GADSgB,MAAsBx6B,GAAc,UACrC,SAAUvgB,GAChBkpB,GAAA5V,YAAiBiN,GAAc,WAA6B,mBAAI,WAC9D2I,GAAA8yB,YAAiB/4C,MACjBg4C,GAAIj7C,KAKA,SAAUA,GAChBi8C,WAAWf,GAAOl7C,GAAK,gBAK7Bk8C,GAAiB,CACf5xC,IAAK4vC,GACLhP,MAAOkP,KC3FL9vC,aClBAwP,KACAoiC,GAAA5xC,ICAJ6xC,GAAc,oBAAuB3hC,KAAKiC,SAAgCnb,IAAlB2Y,EAAAmiC,cCDxDC,GAAc,qBAAwB7hC,KAAKiC,GFO3C,IAQI6/B,GAAOC,GAAMC,GAAMC,GAAQC,GAAQC,GAAMC,GAASC,GARlDC,GAAmB7iC,EAAO8iC,kBAAoB9iC,EAAO+iC,uBACrDC,GAAWhjC,EAAOxH,SAClByqC,GAAUjjC,EAAO4C,QACjBsgC,GAAUljC,EAAO3X,QAEjB86C,GAAwBC,GAA4BpjC,EAAQ,kBAC5DqjC,GAAiBF,IAA4BA,GAAyBh8C,MAKrEk8C,KACHhB,GAAQ,WACN,IAAIiB,EAAQ/4C,MACRs3B,KAAYyhB,EAASL,GAAQ9yB,SAASmzB,EAAOC,OAC1CjB,IAAM,CACX/3C,EAAK+3C,GAAK/3C,GACV+3C,GAAOA,GAAKv5C,KACZ,IACEwB,IACA,MAAOD,GAGP,MAFIg4C,GAAME,KACLD,QAAOl7C,EACNiD,GAERi4C,QAAOl7C,EACLi8C,GAAQA,EAAOE,SAKhB5D,IAAW/d,IAAYugB,KAAmBS,KAAoBG,IAQvDd,IAAiBgB,IAAWA,GAAQ56C,UAE9Cq6C,GAAUO,GAAQ56C,aAAQjB,IAElB0I,YAAcmzC,GACtBN,GAAO5wB,GAAK2wB,GAAQn6C,KAAMm6C,IAC1BH,GAAS,WACPI,GAAKP,MAGExgB,GACT2gB,GAAS,WACPS,GAAQzB,SAASa,SAUPrwB,GAAIyxB,GAAYzjC,GAC5BwiC,GAAS,cACGH,OA/BZI,IAAS,EACTC,GAAOM,GAASU,eAAe,IAC/B,IAAIb,GAAiBR,IAAOsB,QAAQjB,GAAM,CAAEkB,eAAe,IAC3DpB,GAAS,WACPE,GAAK11B,KAAOy1B,IAAUA,MAgC5BoB,GAAiBR,IAAkB,SAAU94C,GAC3C,IAAIu5C,EAAO,CAAEv5C,GAAIA,EAAIxB,UAAM1B,GACvBk7C,KAAMA,GAAKx5C,KAAO+6C,GACjBxB,KACHA,GAAOwB,EACPtB,MACAD,GAAOuB,UGnEKC,GAbZC,GAAoB,SAAUhxB,GAChC,IAAI1qB,EAASQ,EACbE,KAAKi7C,QAAU,IAAIjxB,GAAE,SAAUkxB,EAAWC,GACxC,QAAgB98C,IAAZiB,QAAoCjB,IAAXyB,EAAsB,MAAMmB,UAAU,2BACnE3B,EAAU47C,EACVp7C,EAASq7C,KAEXn7C,KAAKV,QAAUub,GAAUvb,GACzBU,KAAKF,OAAS+a,GAAU/a,IAK1Bi7C,GAAmB,SAAU/wB,GAC3B,OAAO,IAAIgxB,GAAkBhxB,ICb/BoxB,GAAiB,SAAUpxB,EAAGyR,GAE5B,GADA5d,GAASmM,GACL9Q,EAASuiB,IAAMA,EAAE10B,cAAgBijB,EAAG,OAAOyR,EAC/C,IAAI4f,EAAoBN,GAAuB/wB,GAG/C,OADA1qB,EADc+7C,EAAkB/7C,SACxBm8B,GACD4f,EAAkBJ,gBCR3BK,GAAiB,SAAUl4C,EAAGi4B,GAC5B,IAAIkgB,EAAUvkC,EAAAukC,QACVA,GAAWA,EAAQj6C,QACD,GAApBG,UAAU3E,OAAcy+C,EAAQj6C,MAAM8B,GAAKm4C,EAAQj6C,MAAM8B,EAAGi4B,YCLhEmgB,GAAiB,SAAUnkC,GACzB,IACE,MAAO,CAAE/V,OAAO,EAAOnD,MAAOkZ,KAC9B,MAAO/V,GACP,MAAO,CAAEA,OAAO,EAAMnD,MAAOmD,eCJ7Bm6C,GAAQ,WACVz7C,KAAK07C,KAAO,KACZ17C,KAAK27C,KAAO,MAGdF,GAAMl7C,UAAY,CAChBuoC,IAAK,SAAU8S,GACb,IAAIpoC,EAAQ,CAAEooC,KAAMA,EAAM77C,KAAM,MAC5BC,KAAK07C,KAAM17C,KAAK27C,KAAK57C,KAAOyT,EAC3BxT,KAAK07C,KAAOloC,EACjBxT,KAAK27C,KAAOnoC,GAEdvR,IAAK,WACH,IAAIuR,EAAQxT,KAAK07C,KACjB,GAAIloC,EAGF,OAFAxT,KAAK07C,KAAOloC,EAAMzT,KACdC,KAAK27C,OAASnoC,IAAOxT,KAAK27C,KAAO,MAC9BnoC,EAAMooC,OAKnBC,GAAiBJ,UCtBjBK,GAAkC,iBAAV7kC,OTkCxB,IA0BI8kC,GAAUC,GAAsBC,GAAgBC,GA1BhDC,GAAUt/B,GAAgB,WAC1Bu/B,GAAU,UAEVC,GAAmBx8B,GAAAE,UAA8Bq8B,IACjDE,GAAmBz8B,GAAAxY,IACnBk1C,GAA0B18B,GAAAE,UAA8Bq8B,IACxDI,GAAyB7F,IAAiBA,GAAcp2C,UACxDk8C,GAAqB9F,GACrB+F,GAAmBF,GACnBG,GAAY3lC,EAAO/V,UACnB27C,GAAW5lC,EAAOxH,SAClBqtC,GAAU7lC,EAAO4C,QACjBkjC,GAAuB/B,GACvBgC,GAA8BD,GAE9BE,MAAoBJ,IAAYA,GAASK,aAAejmC,EAAOkmC,eAC/DC,GAAyBnkC,EAAWhC,EAAOomC,uBAC3CC,GAAsB,qBAOtBC,IAAc,EAIdC,GAASp5B,GAASi4B,IAAS,WAC7B,IAAIoB,EAA6B/+B,GAAcg+B,IAC3CgB,EAAyBD,IAA+B31C,OAAO40C,IAInE,IAAKgB,GAAyC,KAAfrjC,EAAmB,OAAO,EAMzD,GAAIA,GAAc,IAAE,cAAkB7C,KAAKimC,GAA6B,OAAO,EAE/E,IAAIvC,EAAU,IAAIwB,IAAmB,SAAUn9C,GAAWA,EAAQ,MAC9Do+C,EAAc,SAAUrmC,GAC1BA,GAAK,eAA6B,gBAKpC,OAHkB4jC,EAAQl0C,YAAc,IAC5Bo1C,IAAWuB,IACvBJ,GAAcrC,EAAQz7C,MAAK,yBAAwCk+C,KAG3DD,GAA0B3B,KAAeqB,MAG/CQ,GAAsBJ,KAAWhqB,IAA4B,SAAUxyB,GACzE07C,GAAmBmB,IAAI78C,GAAiB,OAAE,kBAIxC88C,GAAa,SAAU5wC,GACzB,IAAIzN,EACJ,SAAO0Z,EAASjM,KAAO+L,EAAWxZ,EAAOyN,EAAGzN,QAAQA,GAGlDs+C,GAAe,SAAUC,EAAUvrC,GACrC,IAMIvT,EAAQO,EAAMw+C,EANd7/C,EAAQqU,EAAMrU,MACd8/C,EA9CU,GA8CLzrC,EAAMA,MACX0rC,EAAUD,EAAKF,EAASE,GAAKF,EAASI,KACtC7+C,EAAUy+C,EAASz+C,QACnBQ,EAASi+C,EAASj+C,OAClBqnB,EAAS42B,EAAS52B,OAEtB,IACM+2B,GACGD,IAnDK,IAoDJzrC,EAAM4rC,WAAyBC,GAAkB7rC,GACrDA,EAAM4rC,UAtDA,IAwDQ,IAAZF,EAAkBj/C,EAASd,GAEzBgpB,GAAQA,EAAOqzB,QACnBv7C,EAASi/C,EAAQ//C,GACbgpB,IACFA,EAAOozB,OACPyD,GAAS,IAGT/+C,IAAW8+C,EAAS9C,QACtBn7C,EAAO68C,GAAU,yBACRn9C,EAAOq+C,GAAW5+C,IAC3ByY,EAAKlY,EAAMP,EAAQK,EAASQ,GACvBR,EAAQL,IACVa,EAAO3B,GACd,MAAOmD,GACH6lB,IAAW62B,GAAQ72B,EAAOozB,OAC9Bz6C,EAAOwB,KAIPg9C,GAAS,SAAU9rC,EAAO+rC,GACxB/rC,EAAMgsC,WACVhsC,EAAMgsC,UAAW,EACjB3D,IAAU,eACR,IACIkD,EADAU,EAAYjsC,EAAMisC,UAEfV,EAAWU,EAAUx8C,OAC1B67C,GAAaC,EAAUvrC,GAEzBA,EAAMgsC,UAAW,EACbD,IAAa/rC,EAAM4rC,WAAWM,GAAYlsC,QAI9CmsC,GAAgB,SAAU98C,EAAMo5C,EAAS2D,GAC3C,IAAIzG,EAAO+F,EACPlB,KACF7E,EAAQyE,GAASK,YAAY,UACvBhC,QAAUA,EAChB9C,EAAMyG,OAASA,EACfzG,EAAM0G,UAAUh9C,GAAM,GAAO,GAC7BmV,EAAOkmC,cAAc/E,IAChBA,EAAQ,CAAE8C,QAASA,EAAS2D,OAAQA,IACtCzB,KAA2Be,EAAUlnC,EAAO,KAAOnV,IAAQq8C,EAAQ/F,GAC/Dt2C,IAASw7C,IAAqB/B,GAAiB,8BAA+BsD,IAGrFF,GAAc,SAAUlsC,GAC1BkF,EAAIonC,GAAO9nC,GAAQ,WACjB,IAGI/X,EAHAg8C,EAAUzoC,EAAMmN,OAChBxhB,EAAQqU,EAAMrU,MAGlB,GAFmB4gD,GAAYvsC,KAG7BvT,EAASu8C,IAAQ,WACX3iB,GACFgkB,GAAQmC,KAAK,qBAAsB7gD,EAAO88C,GACrC0D,GAActB,GAAqBpC,EAAS98C,MAGrDqU,EAAM4rC,UAAYvlB,IAAWkmB,GAAYvsC,GApH/B,EADF,EAsHJvT,EAAOqC,OAAO,MAAMrC,EAAOd,UAKjC4gD,GAAc,SAAUvsC,GAC1B,OA5HY,IA4HLA,EAAM4rC,YAA0B5rC,EAAM8nC,QAG3C+D,GAAoB,SAAU7rC,GAChCkF,EAAIonC,GAAO9nC,GAAQ,WACjB,IAAIikC,EAAUzoC,EAAMmN,OAChBkZ,GACFgkB,GAAQmC,KAAK,mBAAoB/D,GAC5B0D,GAxIa,mBAwIoB1D,EAASzoC,EAAMrU,WAIvD8gD,GAAO,SAAU19C,EAAIiR,EAAO0sC,GAC9B,OAAO,SAAU/gD,GACfoD,EAAGiR,EAAOrU,EAAO+gD,KAIjBC,GAAiB,SAAU3sC,EAAOrU,EAAO+gD,GACvC1sC,EAAM7S,OACV6S,EAAM7S,MAAO,EACTu/C,IAAQ1sC,EAAQ0sC,GACpB1sC,EAAMrU,MAAQA,EACdqU,EAAMA,MApJO,EAqJb8rC,GAAO9rC,GAAO,KAGZ4sC,GAAkB,SAAU5sC,EAAOrU,EAAO+gD,GAC5C,IAAI1sC,EAAM7S,KAAV,CACA6S,EAAM7S,MAAO,EACTu/C,IAAQ1sC,EAAQ0sC,GACpB,IACE,GAAI1sC,EAAMmN,SAAWxhB,EAAO,MAAMw+C,GAAU,oCAC5C,IAAIn9C,EAAOq+C,GAAW1/C,GAClBqB,EACFq7C,IAAU,WACR,IAAI3T,EAAU,CAAEvnC,MAAM,GACtB,IACE+X,EAAKlY,EAAMrB,EACT8gD,GAAKG,GAAiBlY,EAAS10B,GAC/BysC,GAAKE,GAAgBjY,EAAS10B,IAEhC,MAAOlR,GACP69C,GAAejY,EAAS5lC,EAAOkR,QAInCA,EAAMrU,MAAQA,EACdqU,EAAMA,MA9KI,EA+KV8rC,GAAO9rC,GAAO,IAEhB,MAAOlR,GACP69C,GAAe,CAAEx/C,MAAM,GAAS2B,EAAOkR,MAK3C,GAAI+qC,KAaFb,IAXAD,GAAqB,SAAiB4C,GACpCviB,GAAW98B,KAAM08C,IACjB7hC,GAAUwkC,GACV3nC,EAAKqkC,GAAU/7C,MACf,IAAIwS,EAAQ6pC,GAAiBr8C,MAC7B,IACEq/C,EAASJ,GAAKG,GAAiB5sC,GAAQysC,GAAKE,GAAgB3sC,IAC5D,MAAOlR,GACP69C,GAAe3sC,EAAOlR,MAGYf,WAEtCw7C,GAAW,SAAiBsD,GAC1B/C,GAAiBt8C,KAAM,CACrBH,KAAMu8C,GACNz8C,MAAM,EACN6+C,UAAU,EACVlE,QAAQ,EACRmE,UAAW,IAAI5C,GACfuC,WAAW,EACX5rC,MA/MQ,EAgNRrU,WAAOE,MAGFkC,UAAYq8B,GAAY8f,GAAkB,CAIjDl9C,KAAM,SAAc8/C,EAAaC,GAC/B,IAAI/sC,EAAQ+pC,GAAwBv8C,MAChC+9C,EAAWjB,GAAqB7Z,GAAmBjjC,KAAMy8C,KAS7D,OARAjqC,EAAM8nC,QAAS,EACfyD,EAASE,IAAKjlC,EAAWsmC,IAAeA,EACxCvB,EAASI,KAAOnlC,EAAWumC,IAAeA,EAC1CxB,EAAS52B,OAAS0R,GAAUgkB,GAAQ11B,YAAS9oB,EA7NrC,GA8NJmU,EAAMA,MAAkBA,EAAMisC,UAAU3V,IAAIiV,GAC3ClD,IAAU,WACbiD,GAAaC,EAAUvrC,MAElBurC,EAAS9C,SAIlBrqC,MAAS,SAAU2uC,GACjB,OAAOv/C,KAAKR,UAAKnB,EAAWkhD,MAGhCvD,GAAuB,WACrB,IAAIf,EAAU,IAAIc,GACdvpC,EAAQ6pC,GAAiBpB,GAC7Bj7C,KAAKi7C,QAAUA,EACfj7C,KAAKV,QAAU2/C,GAAKG,GAAiB5sC,GACrCxS,KAAKF,OAASm/C,GAAKE,GAAgB3sC,IAErCuoC,GAA+B+B,GAAuB,SAAU9yB,GAC9D,OAAOA,IAAMyyB,IAAsBzyB,IAAMiyB,GACrC,IAAID,GAAqBhyB,GACzB+yB,GAA4B/yB,IAGlBhR,EAAW29B,KAAkB6F,KAA2B5/C,OAAO2D,WAAW,CACxF27C,GAAaM,GAAuBh9C,KAE/B89C,KAEH38B,GAAS67B,GAAwB,QAAQ,SAAc8C,EAAaC,GAClE,IAAIt2B,EAAOjpB,KACX,OAAO,IAAIy8C,IAAmB,SAAUn9C,EAASQ,GAC/C4X,EAAKwkC,GAAYjzB,EAAM3pB,EAASQ,MAC/BN,KAAK8/C,EAAaC,KAEpB,CAAE1+B,QAAQ,IAGbF,GAAS67B,GAAwB,QAASE,GAAwB,MAAG,CAAE77B,QAAQ,KAIjF,WACS27B,GAAuBz1C,YAC9B,MAAOzF,IAGLi0B,IACFA,GAAeinB,GAAwBE,IAK7Ct4B,EAAE,CAAEK,QAAQ,EAAMvT,MAAM,EAAM2T,OAAQ04B,IAAU,CAC9Cl+C,QAASo9C,KAGX7zB,GAAe6zB,GAAoBL,IAAS,GAC5CvgB,GAAWugB,IAEXH,GAAiB7iC,EAAWgjC,IAG5Bh4B,EAAE,CAAElnB,OAAQk/C,GAASz3B,MAAM,EAAME,OAAQ04B,IAAU,CAGjDz9C,OAAQ,SAAgBqE,GACtB,IAAIq7C,EAAa1C,GAAqB98C,MAEtC,OADA0X,EAAK8nC,EAAW1/C,YAAQzB,EAAW8F,GAC5Bq7C,EAAWvE,WAItB72B,EAAE,CAAElnB,OAAQk/C,GAASz3B,MAAM,EAAME,OAAmB04B,IAAU,CAG5Dj+C,QAAS,SAAiBm8B,GACxB,OAAO2f,GAAyEp7C,KAAMy7B,MAI1FrX,EAAE,CAAElnB,OAAQk/C,GAASz3B,MAAM,EAAME,OAAQ84B,IAAuB,CAG9DC,IAAK,SAAa78C,GAChB,IAAIipB,EAAIhqB,KACJw/C,EAAa1C,GAAqB9yB,GAClC1qB,EAAUkgD,EAAWlgD,QACrBQ,EAAS0/C,EAAW1/C,OACpBb,EAASu8C,IAAQ,WACnB,IAAIiE,EAAkB5kC,GAAUmP,EAAE1qB,SAC9B2U,EAAS,GACTyrC,EAAU,EACVC,EAAY,EAChBrZ,GAAQvlC,GAAU,SAAUk6C,GAC1B,IAAIn5B,EAAQ49B,IACRE,GAAgB,EACpBD,IACAjoC,EAAK+nC,EAAiBz1B,EAAGixB,GAASz7C,MAAK,SAAUrB,GAC3CyhD,IACJA,GAAgB,EAChB3rC,EAAO6N,GAAS3jB,IACdwhD,GAAargD,EAAQ2U,MACtBnU,QAEH6/C,GAAargD,EAAQ2U,MAGzB,OADIhV,EAAOqC,OAAOxB,EAAOb,EAAOd,OACzBqhD,EAAWvE,SAIpB4E,KAAM,SAAc9+C,GAClB,IAAIipB,EAAIhqB,KACJw/C,EAAa1C,GAAqB9yB,GAClClqB,EAAS0/C,EAAW1/C,OACpBb,EAASu8C,IAAQ,WACnB,IAAIiE,EAAkB5kC,GAAUmP,EAAE1qB,SAClCgnC,GAAQvlC,GAAU,SAAUk6C,GAC1BvjC,EAAK+nC,EAAiBz1B,EAAGixB,GAASz7C,KAAKggD,EAAWlgD,QAASQ,SAI/D,OADIb,EAAOqC,OAAOxB,EAAOb,EAAOd,OACzBqhD,EAAWvE,WUnYtB,IAAI6E,KAAgBnJ,IAAiBv/B,GAAM,WAEzCu/B,GAAcp2C,UAAmB,QAAEnC,KAAK,CAAEoB,KAAM,eAA+B,kBAqBjF,GAhBA4kB,EAAE,CAAElnB,OAAQ,UAAWgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQi7B,IAAe,CACrEE,QAAW,SAAUC,GACnB,IAAIj2B,EAAIiZ,GAAmBjjC,KAAMoZ,EAAW,YACxC8mC,EAAalnC,EAAWinC,GAC5B,OAAOjgD,KAAKR,KACV0gD,EAAa,SAAUzkB,GACrB,OAAO2f,GAAepxB,EAAGi2B,KAAazgD,MAAK,WAAc,OAAOi8B,MAC9DwkB,EACJC,EAAa,SAAUr9C,GACrB,OAAOu4C,GAAepxB,EAAGi2B,KAAazgD,MAAK,WAAc,MAAMqD,MAC7Do9C,MAMMjnC,EAAW29B,IAAgB,CACzC,IAAIwJ,GAAS/mC,EAAW,WAAW7Y,UAAmB,QAClDo2C,GAAcp2C,UAAmB,UAAM4/C,IACzCx/B,GAASg2B,GAAcp2C,UAAW,UAAW4/C,GAAQ,CAAEt/B,QAAQ,IC/BnE,IAAIu/B,IAA2BhpC,GAAM,WAEnC7U,QAAQb,OAAM,kBAKhB0iB,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,EAAME,OAAQu7B,IAA2B,CACpE1+C,MAAO,SAAexE,EAAQmjD,EAAcC,GAC1C,OAAOr7B,GAAcpK,GAAU3d,GAASmjD,EAAcxiC,GAASyiC,cCP/DC,GAAWvpC,EAAA1T,SACXk9C,GAASnoC,EAAY,GAAGhM,QACxBo0C,GAAOpoC,EAAY,GAAG4I,MACtBy/B,GAAY,GAEZC,GAAY,SAAU32B,EAAG42B,EAAYp/C,GACvC,IAAK0a,GAAOwkC,GAAWE,GAAa,CAClC,IAAK,IAAIC,EAAO,GAAIhkD,EAAI,EAAGA,EAAI+jD,EAAY/jD,IAAKgkD,EAAKhkD,GAAK,KAAOA,EAAI,IACrE6jD,GAAUE,GAAcL,GAAS,MAAO,gBAAkBE,GAAKI,EAAM,KAAO,KAC5E,OAAOH,GAAUE,GAAY52B,EAAGxoB,IAKpCs/C,GAAiBxpC,EAAcipC,GAASh9C,KAAO,SAAc0lB,GAC3D,IAAIjlB,EAAI6W,GAAU7a,MACd+8B,EAAY/4B,EAAEzD,UACdwgD,EAAWz4B,GAAW7mB,UAAW,GACjCopB,EAAgB,WAClB,IAAIrpB,EAAOg/C,GAAOO,EAAUz4B,GAAW7mB,YACvC,OAAOzB,gBAAgB6qB,EAAgB81B,GAAU38C,EAAGxC,EAAK1E,OAAQ0E,GAAQwC,EAAEtC,MAAMunB,EAAMznB,IAGzF,OADI0X,EAAS6jB,KAAYlS,EAActqB,UAAYw8B,GAC5ClS,GCtBT,IAAIm2B,GAAkB5nC,EAAW,UAAW,aACxC6nC,GAAkBrkD,OAAO2D,UACzB2gD,GAAO,GAAG79C,KAMV89C,GAAiB/pC,GAAM,eAChBpT,EAAT,aACA,QAASg9C,IAAgB,cAA6B,GAAIh9C,aAAcA,MAGtEo9C,IAAYhqC,GAAM,WACpB4pC,IAAgB,kBAGdK,GAASF,IAAkBC,GAE/Bh9B,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,EAAME,OAAQw8B,GAAQ5+C,KAAM4+C,IAAU,CACjE7+C,UAAW,SAAmB8+C,EAAQ9/C,GACpCuhC,GAAaue,GACbzjC,GAASrc,GACT,IAAI+/C,EAAY9/C,UAAU3E,OAAS,EAAIwkD,EAASve,GAAathC,UAAU,IACvE,GAAI2/C,KAAaD,GAAgB,OAAOH,GAAgBM,EAAQ9/C,EAAM+/C,GACtE,GAAID,GAAUC,EAAW,CAEvB,OAAQ//C,EAAK1E,QACX,KAAK,EAAG,OAAO,IAAIwkD,EACnB,KAAK,EAAG,OAAO,IAAIA,EAAO9/C,EAAK,IAC/B,KAAK,EAAG,OAAO,IAAI8/C,EAAO9/C,EAAK,GAAIA,EAAK,IACxC,KAAK,EAAG,OAAO,IAAI8/C,EAAO9/C,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACjD,KAAK,EAAG,OAAO,IAAI8/C,EAAO9/C,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAG5D,IAAIggD,EAAQ,CAAC,MAEb,OADAv8B,GAAMi8B,GAAMM,EAAOhgD,GACZ,IAAKyjB,GAAM67B,GAAMQ,EAAQE,IAGlC,IAAIt9C,EAAQq9C,EAAUhhD,UAClBoB,EAAW6lB,GAAOtO,EAAShV,GAASA,EAAQ+8C,IAC5ChiD,EAASgmB,GAAMq8B,EAAQ3/C,EAAUH,GACrC,OAAO0X,EAASja,GAAUA,EAAS0C,KC7CvC,IAAI8/C,GAAyBrqC,GAAM,WAEjC7U,QAAQoB,eAAe6Z,GAAuB,GAAI,EAAG,CAAErf,MAAO,IAAM,EAAG,CAAEA,MAAO,OAKlFimB,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,EAAME,OAAQ48B,GAAwBh/C,MAAO0U,GAAe,CACvFxT,eAAgB,SAAwBzG,EAAQwqB,EAAag6B,GAC3D7jC,GAAS3gB,GACT,IAAIO,EAAM0f,EAAcuK,GACxB7J,GAAS6jC,GACT,IAEE,OADAlkC,GAAuBtgB,EAAQO,EAAKikD,IAC7B,EACP,MAAOpgD,GACP,OAAO,aCtBTuV,EAIJuN,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnCg9B,eAAgB,SAAwBzkD,EAAQwqB,GAC9C,IAAIrqB,EAAUukD,GAA4B/jC,GAAS3gB,GAASwqB,GAC5D,QAAOrqB,IAAeA,EAAWM,sBAA8BT,EAAOwqB,aCP1Em6B,GAAiB,SAAUxkD,GACzB,YAAsBgB,IAAfhB,IAA6B6e,GAAO7e,EAAY,UAAY6e,GAAO7e,EAAY,cCkBxF+mB,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnC1iB,aAZO6/C,EAAI5kD,EAAQwqB,GACnB,IACIrqB,EAAYkD,EADZuB,EAAWL,UAAU3E,OAAS,EAAII,EAASuE,UAAU,GAEzD,OAAIoc,GAAS3gB,KAAY4E,EAAiB5E,EAAOwqB,IACjDrqB,EAAawZ,EAAiC3Z,EAAQwqB,IAC/Bm6B,GAAiBxkD,GACpCA,EAAWc,WACQE,IAAnBhB,EAAW4E,SAAoB5D,EAAYqZ,EAAKra,EAAW4E,IAAKH,GAChEoX,EAAS3Y,EAAY8zB,GAAen3B,IAAiB4kD,EAAIvhD,EAAWmnB,EAAa5lB,QAArF,KCXFsiB,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,EAAMliB,MAAO0U,GAAe,CACvDpO,yBAA0B,SAAkC7L,EAAQwqB,GAClE,OAAO7Q,EAAiCgH,GAAS3gB,GAASwqB,MCF9DtD,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,EAAMliB,MAAOwxB,IAA4B,CACpE/pB,eAAgB,SAAwBhN,GACtC,OAAOm3B,GAAqBxW,GAAS3gB,OCLzCknB,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnC3iB,IAAK,SAAa9E,EAAQwqB,GACxB,OAAOA,KAAexqB,KCA1BknB,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnCqgB,aAAc,SAAsB9nC,GAElC,OADA2gB,GAAS3gB,GACFioC,GAAcjoC,MCJzBknB,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnCvY,QAAS8W,KCCXkB,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,EAAMliB,MAAO2iC,IAAY,CACpDC,kBAAmB,SAA2BnoC,GAC5C2gB,GAAS3gB,GACT,IACE,IAAI6kD,EAA0B3oC,EAAW,SAAU,qBAEnD,OADI2oC,GAAyBA,EAAwB7kD,IAC9C,EACP,MAAOoE,GACP,OAAO,MCwBb,IAAI0gD,GAAc5qC,GAAM,WACtB,IAAIxV,EAAc,aACdiI,EAAS2T,GAAuB,IAAI5b,EAAe,IAAK,CAAEjE,cAAc,IAE5E,OAA8D,IAAvD4E,QAAQ8E,IAAIzF,EAAYrB,UAAW,IAAK,EAAGsJ,MAGpDua,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,EAAME,OAAQm9B,IAAe,CACxD36C,aAlCO46C,EAAI/kD,EAAQwqB,EAAa5P,GAChC,IAEIoqC,EAAoB3hD,EAAW8sB,EAF/BvrB,EAAWL,UAAU3E,OAAS,EAAII,EAASuE,UAAU,GACrD0gD,EAAgBtrC,EAAiCgH,GAAS3gB,GAASwqB,GAEvE,IAAKy6B,EAAe,CAClB,GAAIjpC,EAAS3Y,EAAY8zB,GAAen3B,IACtC,OAAO+kD,EAAI1hD,EAAWmnB,EAAa5P,EAAGhW,GAExCqgD,EAAgBpqC,EAAyB,GAE3C,GAAI8pC,GAAiBM,GAAgB,CACnC,IAA+B,IAA3BA,EAActkD,WAAuBqb,EAASpX,GAAW,OAAO,EACpE,GAAIogD,EAAqBrrC,EAAiC/U,EAAU4lB,GAAc,CAChF,GAAIw6B,EAAmBjgD,KAAOigD,EAAmB76C,MAAuC,IAAhC66C,EAAmBrkD,SAAoB,OAAO,EACtGqkD,EAAmB/jD,MAAQ2Z,EAC3B0F,GAAuB1b,EAAU4lB,EAAaw6B,QACzC1kC,GAAuB1b,EAAU4lB,EAAa3P,EAAyB,EAAGD,QAC5E,CAEL,QAAezZ,KADfgvB,EAAS80B,EAAc96C,KACG,OAAO,EACjCqQ,EAAK2V,EAAQvrB,EAAUgW,GACvB,OAAO,KC3BPyd,IAAsBnR,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CAC7D1a,eAAgB,SAAwB/M,EAAQgH,GAC9C2Z,GAAS3gB,GACTo4B,GAAmBpxB,GACnB,IAEE,OADAqxB,GAAqBr4B,EAAQgH,IACtB,EACP,MAAO5C,GACP,OAAO,gBCTTkc,MACA0D,GCHAkhC,GAAQvlC,GAAgB,SAI5BwlC,GAAiB,SAAUp1C,GACzB,IAAIq1C,EACJ,OAAOppC,EAASjM,UAAmC5O,KAA1BikD,EAAWr1C,EAAGm1C,OAA0BE,EAA0B,UAAf9pC,EAAQvL,YCLtFs1C,GAAiB,WACf,IAAIt5B,EAAOpL,GAAS7d,MAChBf,EAAS,GAOb,OANIgqB,EAAKxE,SAAQxlB,GAAU,KACvBgqB,EAAKu5B,aAAYvjD,GAAU,KAC3BgqB,EAAKw5B,YAAWxjD,GAAU,KAC1BgqB,EAAKy5B,SAAQzjD,GAAU,KACvBgqB,EAAK05B,UAAS1jD,GAAU,KACxBgqB,EAAK25B,SAAQ3jD,GAAU,KACpBA,UCVL4jD,GAAU7rC,EAAA43B,OAEVkU,GAAgB1rC,GAAM,WACxB,IAAI2rC,EAAKF,GAAQ,IAAK,KAEtB,OADAE,EAAGC,UAAY,EACW,MAAnBD,EAAG1rC,KAAK,WAKb4rC,GAAgBH,IAAiB1rC,GAAM,WACzC,OAAQyrC,GAAQ,IAAK,KAAKD,UAU5BM,GAAiB,CACfC,aARiBL,IAAiB1rC,GAAM,WAExC,IAAI2rC,EAAKF,GAAQ,KAAM,MAEvB,OADAE,EAAGC,UAAY,EACU,MAAlBD,EAAG1rC,KAAK,UAKf+rC,cAAeH,GACfI,cAAeP,cHZbjjC,GAAAC,QIZAwjC,GAAUtsC,EAAA43B,OAEd2U,GAAiBnsC,GAAM,WACrB,IAAI2rC,EAAKO,GAAQ,IAAK,KACtB,QAASP,EAAGL,QAAUK,EAAG1rC,KAAK,OAAsB,MAAb0rC,EAAGS,iBCJxCC,GAAUzsC,EAAA43B,OAEd8U,GAAiBtsC,GAAM,WACrB,IAAI2rC,EAAKU,GAAQ,UAAW,KAC5B,MAAiC,MAA1BV,EAAG1rC,KAAK,KAAKssC,OAAOvgD,GACI,OAA7B,IAAIwL,QAAQm0C,EAAI,YLapB,IAAIa,GAAQ/mC,GAAgB,SACxBgnC,GAAe7sC,EAAO43B,OACtBkV,GAAkBD,GAAatjD,UAC/BwjD,GAAc/sC,EAAOgtC,YACrBC,GAAW5rC,EAAYkqC,IACvB2B,GAAO7rC,EAAYyrC,GAAgBzsC,MACnC8sC,GAAS9rC,EAAY,GAAG3C,QACxB0uC,GAAU/rC,EAAY,GAAGzJ,SACzBy1C,GAAgBhsC,EAAY,GAAGhT,SAC/Bi/C,GAAcjsC,EAAY,GAAGva,OAE7BymD,GAAM,2CACNC,GAAG,KACHC,GAAG,KAGHC,GAAc,IAAIb,GAAaW,MAASA,GAExCG,GAAgBzB,GAAAE,cAChBwB,GAAgB1B,GAAAG,cAEhBwB,GAAc1tC,KACdutC,IAAeC,IAAiBpB,IAAuBG,IAAmBtsC,GAAM,WAGhF,OAFAqtC,GAAIb,KAAS,EAENC,GAAaW,KAAQA,IAAOX,GAAaY,KAAQA,IAAiC,QAA1BZ,GAAaW,GAAK,SAyErF,GAAIrgC,GAAS,SAAU0gC,IAAc,CAoEnC,IAnEA,IAAIC,GAAgB,SAAgBC,EAASvB,GAC3C,IAKIwB,EAAUtC,EAAQE,EAAQqC,EAAShmD,EAAQuT,EAL3C0yC,EAAe5rC,EAAcwqC,GAAiB9jD,MAC9CmlD,EAAkB9C,GAAS0C,GAC3BK,OAA8B/mD,IAAVmlD,EACpBG,EAAS,GACT0B,EAAaN,EAGjB,IAAKG,GAAgBC,GAAmBC,GAAqBL,EAAQh+C,cAAgB+9C,GACnF,OAAOC,EA0CT,IAvCII,GAAmB7rC,EAAcwqC,GAAiBiB,MACpDA,EAAUA,EAAQ17C,OACd+7C,IAAmB5B,EAAQ,UAAW6B,EAAaA,EAAW7B,MAAQS,GAASoB,KAGrFN,OAAsB1mD,IAAZ0mD,EAAwB,GAAKl/B,GAASk/B,GAChDvB,OAAkBnlD,IAAVmlD,EAAsB,GAAK39B,GAAS29B,GAC5C6B,EAAaN,EAETxB,IAAuB,WAAYiB,KACrC9B,IAAWc,GAASa,GAAcb,EAAO,MAAO,KACpCA,EAAQY,GAAQZ,EAAK,KAAQ,KAG3CwB,EAAWxB,EAEPmB,IAAiB,WAAYH,KAC/B5B,IAAWY,GAASa,GAAcb,EAAO,MAAO,IAClCoB,KAAepB,EAAQY,GAAQZ,EAAK,KAAQ,KAGxDE,KACFuB,EAjFU,SAAUnhC,GAWxB,IAVA,IASIoX,EATAp+B,EAASgnB,EAAOhnB,OAChBglB,EAAQ,EACR7iB,EAAS,GACTqmD,EAAQ,GACR1iC,EAAQ,GACR2iC,GAAW,EACXC,GAAM,EACNC,EAAU,EACVC,EAAY,GAET5jC,GAAShlB,EAAQglB,IAAS,CAE/B,GAAY,QADZoZ,EAAMipB,GAAOrgC,EAAQhC,IAEnBoZ,GAAYipB,GAAOrgC,IAAUhC,QACxB,GAAY,MAARoZ,EACTqqB,GAAW,OACN,IAAKA,EAAU,QAAQ,GAC5B,IAAa,MAARrqB,EACHqqB,GAAW,EACX,MACF,IAAa,MAARrqB,EACCgpB,GAAKK,GAAQD,GAAYxgC,EAAQhC,EAAQ,MAC3CA,GAAS,EACT0jC,GAAM,GAERvmD,GAAUi8B,EACVuqB,IACA,SACF,IAAa,MAARvqB,GAAesqB,EAClB,GAAkB,KAAdE,GAAoBxpC,GAAO0G,EAAO8iC,GACpC,MAAM,IAAI3B,GAAY,8BAExBnhC,EAAM8iC,IAAa,EACnBJ,EAAMA,EAAMxoD,QAAU,CAAC4oD,EAAWD,GAClCD,GAAM,EACNE,EAAY,GACZ,SAEAF,EAAKE,GAAaxqB,EACjBj8B,GAAUi8B,EACf,MAAO,CAACj8B,EAAQqmD,GAwCJK,CAAUZ,GACpBA,EAAUE,EAAQ,GAClBtB,EAASsB,EAAQ,IAGnBhmD,EAAS6nC,GAAkB+c,GAAakB,EAASvB,GAAQ0B,EAAellD,KAAO8jD,GAAiBgB,KAE5FpC,GAAUE,GAAUe,EAAO7mD,UAC7B0V,EAAKozC,GAAwB3mD,GACzByjD,IACFlwC,EAAMkwC,QAAS,EACflwC,EAAMpF,IAAM03C,GApHD,SAAUhhC,GAM3B,IALA,IAIIoX,EAJAp+B,EAASgnB,EAAOhnB,OAChBglB,EAAQ,EACR7iB,EAAS,GACTsmD,GAAW,EAERzjC,GAAShlB,EAAQglB,IAEV,QADZoZ,EAAMipB,GAAOrgC,EAAQhC,IAKhByjC,GAAoB,MAARrqB,GAGH,MAARA,EACFqqB,GAAW,EACM,MAARrqB,IACTqqB,GAAW,GACXtmD,GAAUi8B,GANZj8B,GAAU,WAJVA,GAAUi8B,EAAMipB,GAAOrgC,IAAUhC,GAYnC,OAAO7iB,EA+FuB4mD,CAAad,GAAUC,IAE/CpC,IAAQpwC,EAAMowC,QAAS,GACvBe,EAAO7mD,SAAQ0V,EAAMmxC,OAASA,IAGhCoB,IAAYM,EAAY,IAE1B/mC,GAA4Brf,EAAQ,SAAyB,KAAfomD,EAAoB,OAASA,GAC3E,MAAO/jD,IAET,OAAOrC,GAGL6mD,GAAQ,SAAUroD,GACpBA,KAAOqnD,IAAaiB,GAAmBjB,GAAernD,EAAK,CACzDE,cAAc,EACdsE,IAAK,WAAc,OAAO4hD,GAAapmD,IACvC4J,IAAK,SAAU4F,GAAM42C,GAAapmD,GAAOwP,MAIpC+4C,GAAIC,GAAuBpC,IAAeqC,GAAQ,EAAGF,GAAKlpD,OAASopD,IAC1EJ,GAAME,GAAKE,OAGbpC,GAAgB/8C,YAAc+9C,GAC9BA,GAAcvkD,UAAYujD,GAC1BnjC,GAAS3J,EAAQ,SAAU8tC,IAI7BjpB,GAAW,iBM/KLsqB,GACAC,MAdFvmC,GAAA5d,IAIAokD,GAAgB1qC,GAAO,wBAAyB9T,OAAOtH,UAAUqO,SACjE03C,GAAa1X,OAAOruC,UAAU8W,KAC9BkvC,GAAcD,GACdE,GAASnuC,EAAY,GAAG3C,QACxB+wC,GAAUpuC,EAAY,GAAGhT,SACzBqhD,GAAUruC,EAAY,GAAGzJ,SACzB+3C,GAActuC,EAAY,GAAGva,OAE7B8oD,IAEER,GAAG,MACP1uC,EAAK4uC,GAFDH,GAAG,IAEe,KACtBzuC,EAAK4uC,GAAYF,GAAK,KACG,IAAlBD,GAAInD,WAAqC,IAAlBoD,GAAIpD,WAGhC6D,GAAgB3D,GAAAC,aAGhB2D,QAAuCzoD,IAA1B,OAAUgZ,KAAK,IAAI,IAExBuvC,IAA4BE,IAAiBD,IAAiBtD,IAAuBG,MAG/F6C,GAAc,SAAcziC,GAC1B,IAII7kB,EAAQ8nD,EAAQ/D,EAAWj0C,EAAOlS,EAAGgN,EAAQm9C,EAJ7CjE,EAAK/iD,KACLwS,EAAKy0C,GAAoBlE,GACzB1Q,EAAMxsB,GAAS/B,GACf1W,EAAMoF,EAAMpF,IAGhB,GAAIA,EAIF,OAHAA,EAAI41C,UAAYD,EAAGC,UACnB/jD,EAASyY,EAAK6uC,GAAan5C,EAAKilC,GAChC0Q,EAAGC,UAAY51C,EAAI41C,UACZ/jD,EAGT,IAAI0kD,EAASnxC,EAAMmxC,OACff,EAASiE,IAAiB9D,EAAGH,OAC7BY,EAAQ9rC,EAAK6qC,GAAaQ,GAC1B15C,EAAS05C,EAAG15C,OACZ69C,EAAa,EACbC,EAAU9U,EA+Cd,GA7CIuQ,IACFY,EAAQkD,GAAQlD,EAAO,IAAK,KACA,IAAxBiD,GAAQjD,EAAO,OACjBA,GAAS,KAGX2D,EAAUR,GAAYtU,EAAK0Q,EAAGC,WAE1BD,EAAGC,UAAY,KAAOD,EAAGN,WAAaM,EAAGN,WAA+C,OAAlC+D,GAAOnU,EAAK0Q,EAAGC,UAAY,MACnF35C,EAAS,OAASA,EAAS,IAC3B89C,EAAU,IAAMA,EAChBD,KAIFH,EAAS,IAAInY,OAAO,OAASvlC,EAAS,IAAKm6C,IAGzCsD,KACFC,EAAS,IAAInY,OAAO,IAAMvlC,EAAS,WAAYm6C,IAE7CoD,KAA0B5D,EAAYD,EAAGC,WAE7Cj0C,EAAQ2I,EAAK4uC,GAAY1D,EAASmE,EAAShE,EAAIoE,GAE3CvE,EACE7zC,GACFA,EAAMxG,MAAQo+C,GAAY53C,EAAMxG,MAAO2+C,GACvCn4C,EAAM,GAAK43C,GAAY53C,EAAM,GAAIm4C,GACjCn4C,EAAM+S,MAAQihC,EAAGC,UACjBD,EAAGC,WAAaj0C,EAAM,GAAGjS,QACpBimD,EAAGC,UAAY,EACb4D,IAA4B73C,IACrCg0C,EAAGC,UAAYD,EAAGt+B,OAAS1V,EAAM+S,MAAQ/S,EAAM,GAAGjS,OAASkmD,GAEzD8D,IAAiB/3C,GAASA,EAAMjS,OAAS,GAG3C4a,EAAK2uC,GAAet3C,EAAM,GAAIg4C,GAAQ,WACpC,IAAKlqD,EAAI,EAAGA,EAAI4E,UAAU3E,OAAS,EAAGD,SACfwB,IAAjBoD,UAAU5E,KAAkBkS,EAAMlS,QAAKwB,MAK7C0Q,GAAS40C,EAEX,IADA50C,EAAM40C,OAAS95C,EAAS2d,GAAO,MAC1B3qB,EAAI,EAAGA,EAAI8mD,EAAO7mD,OAAQD,IAE7BgN,GADAm9C,EAAQrD,EAAO9mD,IACF,IAAMkS,EAAMi4C,EAAM,IAInC,OAAOj4C,IC1GXqV,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAM,IAAMxN,QD8G/C+vC,GAAiBb,KC9G+C,CAC9DlvC,KAAM+vC,KCFR,IAAIC,GAAkBzY,OAAOruC,UAEhB4W,GAAeC,GAAM,WAEhC,MAA8G,OAAvGxa,OAAOmM,yBAAyBs+C,GAAiB,SAASplD,IAAI7D,KAAK,CAAEskD,QAAQ,EAAME,QAAQ,QAKxFplC,GAA6B6pC,GAAiB,QAAS,CACjE1pD,cAAc,EACdsE,IAAKsgD,YCdHniC,GAAAE,OAQAgnC,GAAY,WACZC,GAAkB3Y,OAAOruC,UACzBinD,GAAaD,GAAyB,SACtCE,GAAWpvC,EAAYkqC,IAEvBmF,GAActwC,GAAM,WAAc,MAAuD,QAAhDowC,GAAWppD,KAAK,CAAEiL,OAAQ,IAAKm6C,MAAO,SAE/EmE,GAAcC,IAA2BJ,GAAW3lD,MAAQylD,IAI5DI,IAAeC,KACjBhnC,GAASiuB,OAAOruC,UAAW+mD,IAAW,WACpC,IAAIO,EAAIhqC,GAAS7d,MACb0K,EAAImb,GAAUgiC,EAAEx+C,QAChBy+C,EAAKD,EAAErE,MAEX,MAAO,IAAM94C,EAAI,IADTmb,QAAiBxnB,IAAPypD,GAAoBxuC,EAAciuC,GAAiBM,MAAQ,UAAWN,IAAmBE,GAASI,GAAKC,KAExH,CAAEjnC,QAAQ,ICtBfomB,GAAW,OAAO,SAAUkC,GAC1B,OAAO,WAAiB,OAAOA,EAAKnpC,KAAMyB,UAAU3E,OAAS2E,UAAU,QAAKpD,MAC3EgqC,WCHC0f,GAAS1vC,EAAY,GAAG3C,QACxBsyC,GAAa3vC,EAAY,GAAGm3B,YAC5ByY,GAAc5vC,EAAY,GAAGva,OAE7BoqD,GAAe,SAAUC,GAC3B,OAAO,SAAU9lC,EAAO+lC,GACtB,IAGIzkB,EAAO0kB,EAHPllB,EAAItd,GAAS/M,EAAuBuJ,IACpCimC,EAAW/mC,GAAoB6mC,GAC/B7f,EAAOpF,EAAErmC,OAEb,OAAIwrD,EAAW,GAAKA,GAAY/f,EAAa4f,EAAoB,QAAK9pD,GACtEslC,EAAQqkB,GAAW7kB,EAAGmlB,IACP,OAAU3kB,EAAQ,OAAU2kB,EAAW,IAAM/f,IACtD8f,EAASL,GAAW7kB,EAAGmlB,EAAW,IAAM,OAAUD,EAAS,MAC3DF,EACEJ,GAAO5kB,EAAGmlB,GACV3kB,EACFwkB,EACEF,GAAY9kB,EAAGmlB,EAAUA,EAAW,GACVD,EAAS,OAAlC1kB,EAAQ,OAAU,IAA0B,YAIzD4kB,GAAiB,CAGfC,OAAQN,IAAa,GAGrBxyC,OAAQwyC,IAAa,KChCnBM,OAIJpkC,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,GAAQ,CACnCukD,YAAa,SAAqBL,GAChC,OAAMM,GAAQ1oD,KAAMooD,gBCLpBvxC,ECAA8xC,GAAY3xC,EAAA/V,UAEhB2nD,GAAiB,SAAU37C,GACzB,GAAIo1C,GAASp1C,GACX,MAAM07C,GAAU,iDAChB,OAAO17C,UCNP47C,GAAQhsC,GAAgB,SAE5BisC,GAAiB,SAAUn6B,GACzB,IAAIo6B,EAAM,IACV,IACE,MAAMp6B,GAAao6B,GACnB,MAAOC,GACP,IAEE,OADAD,EAAOF,KAAS,EACT,MAAMl6B,GAAao6B,GAC1B,MAAOE,KACT,OAAO,GFDX,IAOM5rD,GAPF6rD,GAAc7wC,EAAY,GAAG8wC,UAC7BC,GAAQ/wC,EAAY,GAAGva,OACvBurD,GAAMtyC,KAAK6K,IAEX0nC,GAA0BR,GAAqB,YAE/CS,KAAgCD,KAC9BjsD,GAAUmsD,GAA4B3hD,OAAOtH,UAAW,aACrDlD,IAAeA,GAAWQ,WAKnCumB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,QAAS0kC,KAAqBD,IAA2B,CAC1FH,SAAU,SAAkBM,GAC1B,IAAIxgC,EAAOpD,GAAS/M,EAAuB9Y,OAC3C4oD,GAAWa,GACX,IAAIC,EAAcjoD,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,EACpDixB,EAAMrG,EAAKnsB,OACXirB,OAAsB1pB,IAAhBqrD,EAA4Bp6B,EAAM+5B,GAAIpnC,GAASynC,GAAcp6B,GACnEq6B,EAAS9jC,GAAS4jC,GACtB,OAAOP,GACHA,GAAYjgC,EAAM0gC,EAAQ5hC,GAC1BqhC,GAAMngC,EAAMlB,EAAM4hC,EAAO7sD,OAAQirB,KAAS4hC,KG9BlD,IAAIC,GAAa5yC,EAAAimB,WACb4sB,GAAehiD,OAAOszB,aAEtB2uB,GAAiBjiD,OAAOkiD,cACxBC,GAAO3xC,EAAY,GAAG4I,MAGtBgpC,KAAqBH,IAA2C,GAAzBA,GAAehtD,OAI1DsnB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,OAAQolC,IAAoB,CAE5DF,cAAe,SAAuBtuB,OACpC,IAGIR,EAHAh3B,EAAW,GACXnH,EAAS2E,UAAU3E,OACnBD,EAAI,EAEDC,EAASD,GAAG,CAEjB,GADAo+B,GAAQx5B,UAAU5E,KACdglB,GAAgBoZ,EAAM,WAAcA,EAAM,MAAM2uB,GAAW3uB,EAAO,8BACtEh3B,EAASpH,GAAKo+B,EAAO,MACjB4uB,GAAa5uB,GACb4uB,GAAyC,QAA1B5uB,GAAQ,QAAY,IAAcA,EAAO,KAAQ,OACpE,OAAO+uB,GAAK/lD,EAAU,OCrB5B,IAAIimD,GAAgB7xC,EAAY,GAAGhT,SAInC+e,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,QAASikC,GAAqB,aAAe,CAC9ErmC,SAAU,SAAkBgnC,GAC1B,SAAUS,GACRrkC,GAAS/M,EAAuB9Y,OAChC6lB,GAAS+iC,GAAWa,IACpBhoD,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,aChBxCkqD,GAAA7yC,OAKAy0C,GAAkB,kBAClBC,GAAmBvqC,GAAAxY,IACnBgjD,GAAmBxqC,GAAAE,UAA8BoqC,IAIrDj0B,GAAeruB,OAAQ,UAAU,SAAUyvB,GACzC8yB,GAAiBpqD,KAAM,CACrBH,KAAMsqD,GACNrmC,OAAQ+B,GAASyR,GACjBxV,MAAO,OAIR,WACD,IAGIwoC,EAHA93C,EAAQ63C,GAAiBrqD,MACzB8jB,EAAStR,EAAMsR,OACfhC,EAAQtP,EAAMsP,MAElB,OAAIA,GAASgC,EAAOhnB,OAAe,CAAEqB,WAAOE,EAAWsB,MAAM,IAC7D2qD,EAAKC,GAAUzmC,EAAQhC,GACvBtP,EAAMsP,OAASwoC,EAAMxtD,OACd,CAAEqB,MAAOmsD,EAAO3qD,MAAM,cClB3B6qD,GAAU3tC,GAAgB,WAC1B4tC,GAAkB7b,OAAOruC,UAE7BmqD,GAAiB,SAAUj0B,EAAKpf,EAAMif,EAAQq0B,GAC5C,IAAIC,EAAS/tC,GAAgB4Z,GAEzBo0B,GAAuBzzC,GAAM,WAE/B,IAAIhT,EAAI,GAER,OADAA,EAAEwmD,GAAU,WAAc,OAAO,GACZ,GAAd,GAAGn0B,GAAKryB,MAGb0mD,EAAoBD,IAAwBzzC,GAAM,WAEpD,IAAI2zC,GAAa,EACbhI,EAAE,IAkBN,MAhBY,UAARtsB,KAIFssB,EAAK,IAGFh8C,YAAc,GACjBg8C,EAAGh8C,YAAYyjD,IAAW,WAAc,OAAOzH,GAC/CA,EAAGS,MAAQ,GACXT,EAAG6H,GAAM,IAAQA,IAGnB7H,EAAG1rC,KAAO,WAAiC,OAAnB0zC,GAAa,EAAa,MAElDhI,EAAG6H,GAAQ,KACHG,KAGV,IACGF,IACAC,GACDx0B,EACA,CACA,IAAI00B,EAA8B3yC,EAAW,IAAKuyC,IAC9Cp0B,EAAUnf,EAAKuzC,EAAQ,GAAGn0B,IAAM,SAAUw0B,EAAclC,EAAQ1W,EAAK6Y,EAAMC,GAC7E,IAAIzjB,EAAwBrvB,EAAY4yC,GACpCG,EAAQrC,EAAO1xC,KACnB,OAAI+zC,IAAUhE,IAAcgE,IAAUX,GAAgBpzC,KAChDwzC,IAAwBM,EAInB,CAAExrD,MAAM,EAAMxB,MAAO6sD,EAA4BjC,EAAQ1W,EAAK6Y,IAEhE,CAAEvrD,MAAM,EAAMxB,MAAOupC,EAAsB2K,EAAK0W,EAAQmC,IAE1D,CAAEvrD,MAAM,MAGjBghB,GAAS9Y,OAAOtH,UAAWk2B,EAAKD,EAAQ,IACxC7V,GAAS8pC,GAAiBG,EAAQp0B,EAAQ,IAGxCm0B,GAAMrsC,GAA4BmsC,GAAgBG,GAAS,QAAQ,cCvErErC,GAAA7yC,OAIJ21C,GAAiB,SAAUloB,EAAGrhB,EAAO6gC,GACnC,OAAO7gC,GAAS6gC,EAAO2I,GAAUnoB,EAAGrhB,GAAOhlB,OAAS,WCClDyuD,GAAYv0C,EAAA/V,UAIhBuqD,GAAiB,SAAU3D,EAAG1kB,GAC5B,IAAI9rB,EAAOwwC,EAAExwC,KACb,GAAI2B,EAAW3B,GAAO,CACpB,IAAIpY,EAASyY,EAAKL,EAAMwwC,EAAG1kB,GAE3B,OADe,OAAXlkC,GAAiB4e,GAAS5e,GACvBA,EAET,GAAmB,WAAfuZ,EAAQqvC,GAAiB,OAAOnwC,EAAK0vC,GAAYS,EAAG1kB,GACxD,MAAMooB,GAAU,gDCPlBb,GAA8B,SAAS,SAAUe,EAAOC,EAAaC,GACnE,MAAO,CAGL,SAAe5C,GACb,IAAI3kD,EAAI0U,EAAuB9Y,MAC3B4rD,EAAoBvtD,MAAV0qD,OAAsB1qD,EAAYyc,GAAUiuC,EAAQ0C,GAClE,OAAOG,EAAUl0C,EAAKk0C,EAAS7C,EAAQ3kD,GAAK,IAAIwqC,OAAOma,GAAQ0C,GAAO5lC,GAASzhB,KAIjF,SAAU0f,GACR,IAAI+nC,EAAKhuC,GAAS7d,MACdmjC,EAAItd,GAAS/B,GACbnb,EAAMgjD,EAAgBD,EAAaG,EAAI1oB,GAE3C,GAAIx6B,EAAIhJ,KAAM,OAAOgJ,EAAIxK,MAEzB,IAAK0tD,EAAGpnC,OAAQ,OAAO+mC,GAAWK,EAAI1oB,GAEtC,IAAI2oB,EAAcD,EAAGlJ,QACrBkJ,EAAG7I,UAAY,MACf,IAEI/jD,EAFAuwB,EAAI,GACJvH,EAAI,EAEgC,QAAhChpB,EAASusD,GAAWK,EAAI1oB,KAAc,CAC5C,IAAI4oB,EAAWlmC,GAAS5mB,EAAO,IAC/BuwB,EAAEvH,GAAK8jC,EACU,KAAbA,IAAiBF,EAAG7I,UAAYqI,GAAmBloB,EAAGlhB,GAAS4pC,EAAG7I,WAAY8I,IAClF7jC,IAEF,OAAa,IAANA,EAAU,KAAOuH,iBCpC1Bw8B,GAAS3zC,EAAY+5B,IACrB6Z,GAAc5zC,EAAY,GAAGva,OAC7BouD,GAAOn1C,KAAKqK,KAGZ+qC,GAAe,SAAUC,GAC3B,OAAO,SAAU/pC,EAAOgqC,EAAWC,GACjC,IAIIC,EAASC,EAJTrpB,EAAItd,GAAS/M,EAAuBuJ,IACpCoqC,EAAexqC,GAASoqC,GACxBK,EAAevpB,EAAErmC,OACjB6vD,OAAyBtuD,IAAfiuD,EAA2B,IAAMzmC,GAASymC,GAExD,OAAIG,GAAgBC,GAA2B,IAAXC,EAAsBxpB,IAE1DqpB,EAAeR,GAAOW,EAAST,IAD/BK,EAAUE,EAAeC,GACqBC,EAAQ7vD,UACrCA,OAASyvD,IAASC,EAAeP,GAAYO,EAAc,EAAGD,IACxEH,EAASjpB,EAAIqpB,EAAeA,EAAerpB,SAItDypB,GAAiB,CAGf9kC,MAAOqkC,IAAa,GAGpBpkC,IAAKokC,IAAa,KC/BhBpkC,ICCJ8kC,GAAc,mEAAsEt1C,KAAKiC,GDIzF4K,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQgoC,IAAc,CACvDC,OAAQ,SAAgBT,GACtB,OAAMU,GAAS/sD,KAAMqsD,EAAW5qD,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,aEPtEuuD,GAAA9kC,MAKJ1D,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQgoC,IAAc,CACvDG,SAAU,SAAkBX,GAC1B,OAAMY,GAAWjtD,KAAMqsD,EAAW5qD,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,MCF5E,IAAI6uD,GAAO70C,EAAY,GAAGhV,MACtB8pD,GAAO90C,EAAY,GAAG4I,MAI1BmD,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAClCvX,IAAK,SAAaggD,OAChB,IAAIC,EAAct0C,EAAgBiD,GAASoxC,GAAUhgD,KACjDkgD,EAAkBprC,GAAkBmrC,GACpCl9B,EAAkB1uB,UAAU3E,OAC5BmH,EAAW,GACXpH,EAAI,EACDywD,EAAkBzwD,GAAG,CAE1B,GADAqwD,GAAKjpD,EAAU4hB,GAASwnC,EAAYxwD,OAChCA,IAAMywD,EAAiB,OAAOH,GAAKlpD,EAAU,IAC7CpH,EAAIszB,GAAiB+8B,GAAKjpD,EAAU4hB,GAASpkB,UAAU5E,SCjBjEunB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,GAAQ,CACnCqpD,OAAQnb,YCHNob,GAAQz2C,KAAKuK,MACbmsC,GAASp1C,EAAY,GAAG3C,QACxBg4C,GAAUr1C,EAAY,GAAGzJ,SACzB++C,GAAct1C,EAAY,GAAGva,OAC7B8vD,GAAoB,8BACpBC,GAA6B,sBAIjCC,GAAiB,SAAUC,EAAS1b,EAAKiW,EAAU0F,EAAUC,EAAeC,GAC1E,IAAIC,EAAU7F,EAAWyF,EAAQjxD,OAC7BsxD,EAAIJ,EAASlxD,OACbuxD,EAAUR,GAKd,YAJsBxvD,IAAlB4vD,IACFA,EAAgBjyC,GAASiyC,GACzBI,EAAUT,IAELF,GAAQQ,EAAaG,GAAS,SAAUt/C,EAAOu/C,GACpD,IAAIC,EACJ,OAAQd,GAAOa,EAAI,IACjB,IAAK,IAAK,MAAO,IACjB,IAAK,IAAK,OAAOP,EACjB,IAAK,IAAK,OAAOJ,GAAYtb,EAAK,EAAGiW,GACrC,IAAK,IAAK,OAAOqF,GAAYtb,EAAK8b,GAClC,IAAK,IACHI,EAAUN,EAAcN,GAAYW,EAAI,GAAG,IAC3C,cAEA,IAAIrmC,GAAKqmC,EACT,GAAU,IAANrmC,EAAS,OAAOlZ,EACpB,GAAIkZ,EAAImmC,EAAG,CACT,IAAII,EAAIhB,GAAMvlC,EAAI,IAClB,OAAU,IAANumC,EAAgBz/C,EAChBy/C,GAAKJ,OAA8B/vD,IAApB2vD,EAASQ,EAAI,GAAmBf,GAAOa,EAAI,GAAKN,EAASQ,EAAI,GAAKf,GAAOa,EAAI,GACzFv/C,EAETw/C,EAAUP,EAAS/lC,EAAI,GAE3B,YAAmB5pB,IAAZkwD,EAAwB,GAAKA,MCvBxC,IAAIE,GAAU5xC,GAAgB,WAC1B6xC,GAAM33C,KAAK2K,IACXitC,GAAM53C,KAAK6K,IACXgtC,GAASv2C,EAAY,GAAGhM,QACxBwiD,GAAOx2C,EAAY,GAAGhV,MACtByrD,GAAgBz2C,EAAY,GAAGhT,SAC/B0pD,GAAc12C,EAAY,GAAGva,OAQ7BkxD,GAEgC,OAA3B,IAAIpgD,QAAO,IAAM,MAItBqgD,KACA,IAAMR,KAC6B,KAA7B,IAAKA,IAAS,IAAK,MAKzBS,IAAiC93C,GAAM,WACzC,IAAI2rC,EAAE,IAON,OANAA,EAAG1rC,KAAO,WACR,IAAIpY,EAAS,GAEb,OADAA,EAAO0kD,OAAS,CAAEvgD,EAAG,KACdnE,GAGyB,MAA3B,GAAG2P,QAAQm0C,EAAI,WAIxB2H,GAA8B,WAAW,SAAUyE,EAAGC,EAAezD,GACnE,IAAI0D,EAAoBJ,GAA+C,IAAM,KAE7E,MAAO,CAGL,SAAiBK,EAAaC,GAC5B,IAAInrD,EAAI0U,EAAuB9Y,MAC3B2tB,EAA0BtvB,MAAfixD,OAA2BjxD,EAAYyc,GAAUw0C,EAAab,IAC7E,OAAO9gC,EACHjW,EAAKiW,EAAU2hC,EAAalrD,EAAGmrD,GAC/B73C,EAAK03C,EAAevpC,GAASzhB,GAAIkrD,EAAaC,IAIpD,SAAUzrC,EAAQyrC,GAChB,IAAI1D,EAAKhuC,GAAS7d,MACdmjC,EAAItd,GAAS/B,GAEjB,GACyB,iBAAhByrC,IAC4C,IAAnDT,GAAcS,EAAcF,KACU,IAAtCP,GAAcS,EAAc,MAC5B,CACA,IAAI5mD,EAAMgjD,EAAgByD,EAAevD,EAAI1oB,EAAGosB,GAChD,GAAI5mD,EAAIhJ,KAAM,OAAOgJ,EAAIxK,MAG3B,IAAIqxD,EAAoBx2C,EAAWu2C,GAC9BC,IAAmBD,EAAe1pC,GAAS0pC,IAEhD,IAAI9qC,EAASonC,EAAGpnC,OAChB,GAAIA,EAAQ,CACV,IAAIqnC,EAAcD,EAAGlJ,QACrBkJ,EAAG7I,UAAY,MAEjB,IAAIyM,EAAU,KACD,CACX,IAAIxwD,EAASusD,GAAWK,EAAI1oB,GAC5B,GAAe,OAAXlkC,EAAiB,MAGrB,GADA4vD,GAAKY,EAASxwD,IACTwlB,EAAQ,MAGI,KADFoB,GAAS5mB,EAAO,MACV4sD,EAAG7I,UAAYqI,GAAmBloB,EAAGlhB,GAAS4pC,EAAG7I,WAAY8I,IAKpF,IAFA,IA/EwB7+C,EA+EpByiD,EAAoB,GACpBC,EAAqB,EAChB9yD,EAAI,EAAGA,EAAI4yD,EAAQ3yD,OAAQD,IAAK,CAWvC,IARA,IAAIkxD,EAAUloC,IAFd5mB,EAASwwD,EAAQ5yD,IAEa,IAC1ByrD,EAAWoG,GAAIC,GAAIptC,GAAoBtiB,EAAO6iB,OAAQqhB,EAAErmC,QAAS,GACjEkxD,EAAW,GAMNpoD,EAAI,EAAGA,EAAI3G,EAAOnC,OAAQ8I,IAAKipD,GAAKb,OA3FrC3vD,KADc4O,EA4F+ChO,EAAO2G,IA3FxDqH,EAAKpF,OAAOoF,IA4FhC,IAAIghD,EAAgBhvD,EAAO0kD,OAC3B,GAAI6L,EAAmB,CACrB,IAAII,EAAehB,GAAO,CAACb,GAAUC,EAAU1F,EAAUnlB,QACnC9kC,IAAlB4vD,GAA6BY,GAAKe,EAAc3B,GACpD,IAAIC,EAAcroC,GAASZ,GAAMsqC,OAAclxD,EAAWuxD,SAE1D1B,EAAcJ,GAAgBC,EAAS5qB,EAAGmlB,EAAU0F,EAAUC,EAAesB,GAE3EjH,GAAYqH,IACdD,GAAqBX,GAAY5rB,EAAGwsB,EAAoBrH,GAAY4F,EACpEyB,EAAqBrH,EAAWyF,EAAQjxD,QAG5C,OAAO4yD,EAAoBX,GAAY5rB,EAAGwsB,QAG5CT,KAAkCF,IAAoBC,IC5H1DvE,GAA8B,UAAU,SAAUmF,EAAQC,EAAcnE,GACtE,MAAO,CAGL,SAAgB5C,GACd,IAAI3kD,EAAI0U,EAAuB9Y,MAC3B+vD,EAAqB1xD,MAAV0qD,OAAsB1qD,EAAYyc,GAAUiuC,EAAQ8G,GACnE,OAAOE,EAAWr4C,EAAKq4C,EAAUhH,EAAQ3kD,GAAK,IAAIwqC,OAAOma,GAAQ8G,GAAQhqC,GAASzhB,KAIpF,SAAU0f,GACR,IAAI+nC,EAAKhuC,GAAS7d,MACdmjC,EAAItd,GAAS/B,GACbnb,EAAMgjD,EAAgBmE,EAAcjE,EAAI1oB,GAE5C,GAAIx6B,EAAIhJ,KAAM,OAAOgJ,EAAIxK,MAEzB,IAAI6xD,EAAoBnE,EAAG7I,UACtB3N,GAAU2a,EAAmB,KAAInE,EAAG7I,UAAY,GACrD,IAAI/jD,EAASusD,GAAWK,EAAI1oB,GAE5B,OADKkS,GAAUwW,EAAG7I,UAAWgN,KAAoBnE,EAAG7I,UAAYgN,GAC9C,OAAX/wD,GAAkB,EAAKA,EAAO6iB,WCd3C,IAAImuC,GAAgB/M,GAAAG,cAChB6M,GAAa,WACbC,GAAMp5C,KAAK6K,IACXwuC,GAAQ,GAAG/sD,KACXgtD,GAAOh4C,EAAW,IAAKhB,MACvBi5C,GAAOj4C,EAAY+3C,IACnBG,GAAcl4C,EAAY,GAAGva,OAI7B0yD,IAAqCp5C,GAAM,WAE7C,IAAI2rC,EAAE,OACF0N,EAAe1N,EAAG1rC,KACtB0rC,EAAG1rC,KAAO,WAAc,OAAOo5C,EAAa/uD,MAAM1B,KAAMyB,YACxD,IAAIxC,EAAS,KAAK0Z,MAAMoqC,GACxB,OAAyB,IAAlB9jD,EAAOnC,QAA8B,MAAdmC,EAAO,IAA4B,MAAdA,EAAO,MAI5DyrD,GAA8B,SAAS,SAAUgG,EAAOC,EAAahF,GACnE,IAAIiF,EAqDJ,OAzCEA,EAV2B,KAA3B,OAAOj4C,MAAK,QAAS,IAEc,GAAnC,OAAOA,MAAK,QAAS,GAAI7b,QACO,GAAhC,KAAK6b,MAAK,WAAY7b,QACU,GAAhC,IAAI6b,MAAK,YAAa7b,QAEtB,IAAI6b,MAAK,QAAS7b,OAAS,GAC3B,GAAG6b,MAAK,MAAO7b,OAGC,SAAU86B,EAAWi5B,GACnC,IAAI/sC,EAAS+B,GAAS/M,EAAuB9Y,OACzC8wD,OAAgBzyD,IAAVwyD,EAAsBX,GAAaW,IAAU,EACvD,GAAY,IAARC,EAAW,MAAO,GACtB,QAAkBzyD,IAAdu5B,EAAyB,MAAO,CAAC9T,GAErC,IAAKu+B,GAASzqB,GACZ,OAAOlgB,EAAKi5C,EAAa7sC,EAAQ8T,EAAWk5B,OAE9C,IAQI/hD,EAAOi0C,EAAW+N,EARlBC,EAAS,GACTxN,GAAS5rB,EAAU4qB,WAAa,IAAM,KAC7B5qB,EAAU6qB,UAAY,IAAM,KAC5B7qB,EAAU+qB,QAAU,IAAM,KAC1B/qB,EAAUgrB,OAAS,IAAM,IAClCqO,EAAgB,EAEhBC,EAAgB,IAAItiB,OAAOhX,EAAUvuB,OAAQm6C,EAAQ,MAElDz0C,EAAQ2I,EAAK0vC,GAAY8J,EAAeptC,QAC7Ck/B,EAAYkO,EAAclO,WACViO,IACdX,GAAKU,EAAQT,GAAYzsC,EAAQmtC,EAAeliD,EAAM+S,QAClD/S,EAAMjS,OAAS,GAAKiS,EAAM+S,MAAQgC,EAAOhnB,QAAQmoB,GAAMmrC,GAAOY,EAAQnpC,GAAW9Y,EAAO,IAC5FgiD,EAAahiD,EAAM,GAAGjS,OACtBm0D,EAAgBjO,EACZgO,EAAOl0D,QAAUg0D,KAEnBI,EAAclO,YAAcj0C,EAAM+S,OAAOovC,EAAclO,YAK7D,OAHIiO,IAAkBntC,EAAOhnB,QACvBi0D,GAAeV,GAAKa,EAAe,KAAKZ,GAAKU,EAAQ,IACpDV,GAAKU,EAAQT,GAAYzsC,EAAQmtC,IACjCD,EAAOl0D,OAASg0D,EAAMjpC,GAAWmpC,EAAQ,EAAGF,GAAOE,GAGnD,IAAIr4C,WAAMta,EAAW,GAAGvB,OACjB,SAAU86B,EAAWi5B,GACnC,YAAqBxyD,IAAdu5B,GAAqC,IAAVi5B,EAAc,GAAKn5C,EAAKi5C,EAAa3wD,KAAM43B,EAAWi5B,IAErEF,EAEhB,CAGL,SAAe/4B,EAAWi5B,GACxB,IAAIzsD,EAAI0U,EAAuB9Y,MAC3BmxD,EAAwB9yD,MAAbu5B,OAAyBv5B,EAAYyc,GAAU8c,EAAW84B,GACzE,OAAOS,EACHz5C,EAAKy5C,EAAUv5B,EAAWxzB,EAAGysD,GAC7Bn5C,EAAKk5C,EAAe/qC,GAASzhB,GAAIwzB,EAAWi5B,IAOlD,SAAU/sC,EAAQ+sC,GAChB,IAAIhF,EAAKhuC,GAAS7d,MACdmjC,EAAItd,GAAS/B,GACbnb,EAAMgjD,EAAgBiF,EAAe/E,EAAI1oB,EAAG0tB,EAAOD,IAAkBD,GAEzE,GAAIhoD,EAAIhJ,KAAM,OAAOgJ,EAAIxK,MAEzB,IAAI6rB,EAAIiZ,GAAmB4oB,EAAIjd,QAE3BwiB,EAAkBvF,EAAGlJ,QACrBa,GAASqI,EAAGrJ,WAAa,IAAM,KACtBqJ,EAAGpJ,UAAY,IAAM,KACrBoJ,EAAGlJ,QAAU,IAAM,KACnBsN,GAAgB,IAAM,KAI/BkB,EAAW,IAAInnC,EAAEimC,GAAgB,OAASpE,EAAGxiD,OAAS,IAAMwiD,EAAIrI,GAChEsN,OAAgBzyD,IAAVwyD,EAAsBX,GAAaW,IAAU,EACvD,GAAY,IAARC,EAAW,MAAO,GACtB,GAAiB,IAAb3tB,EAAErmC,OAAc,OAAuC,OAAhC0uD,GAAe2F,EAAUhuB,GAAc,CAACA,GAAK,OACxE,IAAIz4B,EAAI,EACJ2mD,EAAI,EACJ7hC,EAAI,GACD6hC,EAAIluB,EAAErmC,QAAQ,CACnBq0D,EAASnO,UAAYiN,GAAgB,EAAIoB,EACzC,IACIxuD,EADAywC,EAAIkY,GAAe2F,EAAUlB,GAAgBM,GAAYptB,EAAGkuB,GAAKluB,GAErE,GACQ,OAANmQ,IACCzwC,EAAIstD,GAAIluC,GAASkvC,EAASnO,WAAaiN,GAAgBoB,EAAI,IAAKluB,EAAErmC,WAAa4N,EAEhF2mD,EAAIhG,GAAmBloB,EAAGkuB,EAAGD,OACxB,CAEL,GADAd,GAAK9gC,EAAG+gC,GAAYptB,EAAGz4B,EAAG2mD,IACtB7hC,EAAE1yB,SAAWg0D,EAAK,OAAOthC,EAC7B,IAAK,IAAI3yB,EAAI,EAAGA,GAAKy2C,EAAEx2C,OAAS,EAAGD,IAEjC,GADAyzD,GAAK9gC,EAAG8jB,EAAEz2C,IACN2yB,EAAE1yB,SAAWg0D,EAAK,OAAOthC,EAE/B6hC,EAAI3mD,EAAI7H,GAIZ,OADAytD,GAAK9gC,EAAG+gC,GAAYptB,EAAGz4B,IAChB8kB,OAGTghC,GAAmCP,WCxJnCp5C,EASAy6C,GAAgBj5C,EAAY,GAAGk5C,YAC/BC,GAAcn5C,EAAY,GAAGva,OAC7B2zD,GAAM16C,KAAK6K,IAEX8vC,GAA0B5I,GAAqB,cAE/C6I,IAAgCD,MAA6B,WAC/D,IAAIr0D,EAAUu0D,GAA4B/pD,OAAOtH,UAAW,cAC5D,OAAOlD,IAAeA,EAAWQ,SAF8B,GAOjEumB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,QAAS8sC,KAAqBD,IAA2B,CAC1FH,WAAY,SAAoB9H,GAC9B,IAAIxgC,EAAOpD,GAAS/M,EAAuB9Y,OAC3C4oD,GAAWa,GACX,IAAI3nC,EAAQG,GAASwvC,GAAIhwD,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,EAAW4qB,EAAKnsB,SAC3E6sD,EAAS9jC,GAAS4jC,GACtB,OAAO6H,GACHA,GAAcroC,EAAM0gC,EAAQ7nC,GAC5B0vC,GAAYvoC,EAAMnH,EAAOA,EAAQ6nC,EAAO7sD,UAAY6sD,eC/BxD3a,GAAAC,QCFA7uB,GAAAE,ODOJ8D,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,QCCnCgtC,GAAiB,SAAUljC,GACzB,OAAOvX,GAAM,WACX,QAASq3B,GAAY9f,MANf,QAAA,MAOGA,MAAsBmjC,IACDrjB,GAAY9f,GAAa9sB,OAAS8sB,ODLF,SAAW,CAC3EsgB,KAAM,WACJ,OAAM8iB,GAAO/xD,gBEPbgvC,GAAAjnB,IAGAiqC,GAASH,GAAuB,WAEhCI,GAAUD,GAAS,WACrB,OAAME,GAAUlyD,OAEd,GAAGmyD,QAKP/tC,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAMrC,KAAM,UAAWgjB,OAAQmtC,IAAU,CACpEG,QAASF,GACTG,UAAWH,YCfTjjB,GAAAlnB,MAGAuqC,GAASR,GAAuB,aAEhCS,GAAYD,GAAS,WACvB,OAAME,GAAYvyD,OAEhB,GAAGwyD,UAKPpuC,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAMrC,KAAM,YAAagjB,OAAQwtC,IAAU,CACtEG,UAAWF,GACXG,SAAUH,YCbRI,GAAI,KACJC,GAAUt6C,EAAY,GAAGzJ,SAI7BgkD,GAAiB,SAAU9uC,EAAQ2B,EAAKotC,EAAW10D,GACjD,IAAIglC,EAAItd,GAAS/M,EAAuBgL,IACpCrZ,EAAK,IAAMgb,EAEf,MADkB,KAAdotC,IAAkBpoD,GAAM,IAAMooD,EAAY,KAAOF,GAAQ9sC,GAAS1nB,GAAQu0D,GAAM,UAAY,KACzFjoD,EAAK,IAAM04B,EAAI,KAAO1d,EAAM,YCTrCqtC,GAAiB,SAAUnkC,GACzB,OAAOvX,GAAM,WACX,IAAIG,EAAO,GAAGoX,GAAa,KAC3B,OAAOpX,IAASA,EAAKwM,eAAiBxM,EAAKoB,MAAM,KAAK7b,OAAS,MCAnEsnB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQiuC,GAAuB,WAAa,CAC7EC,OAAQ,SAAgBlxD,GACtB,OAAO+wD,GAAW5yD,KAAM,IAAK,OAAQ6B,MCFzCuiB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQiuC,GAAuB,QAAU,CAC1EE,IAAK,WACH,OAAOJ,GAAW5yD,KAAM,MAAO,GAAI,OCFvCokB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQiuC,GAAuB,UAAY,CAC5EG,MAAO,WACL,OAAOL,GAAW5yD,KAAM,QAAS,GAAI,OCFzCokB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQiuC,GAAuB,SAAW,CAC3EI,KAAM,WACJ,OAAON,GAAW5yD,KAAM,IAAK,GAAI,OCFrCokB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQiuC,GAAuB,UAAY,CAC5EK,MAAO,WACL,OAAOP,GAAW5yD,KAAM,KAAM,GAAI,OCFtCokB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQiuC,GAAuB,cAAgB,CAChFM,UAAW,SAAmBC,GAC5B,OAAOT,GAAW5yD,KAAM,OAAQ,QAASqzD,MCF7CjvC,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQiuC,GAAuB,aAAe,CAC/EQ,SAAU,SAAkB/qB,GAC1B,OAAOqqB,GAAW5yD,KAAM,OAAQ,OAAQuoC,MCF5CnkB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQiuC,GAAuB,YAAc,CAC9ES,QAAS,WACP,OAAOX,GAAW5yD,KAAM,IAAK,GAAI,OCFrCokB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQiuC,GAAuB,SAAW,CAC3EU,KAAM,SAAc7kD,GAClB,OAAOikD,GAAW5yD,KAAM,IAAK,OAAQ2O,MCFzCyV,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQiuC,GAAuB,UAAY,CAC5EW,MAAO,WACL,OAAOb,GAAW5yD,KAAM,QAAS,GAAI,OCFzCokB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQiuC,GAAuB,WAAa,CAC7EY,OAAQ,WACN,OAAOd,GAAW5yD,KAAM,SAAU,GAAI,OCF1CokB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQiuC,GAAuB,QAAU,CAC1Ea,IAAK,WACH,OAAOf,GAAW5yD,KAAM,MAAO,GAAI,OCFvCokB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQiuC,GAAuB,QAAU,CAC1Ec,IAAK,WACH,OAAOhB,GAAW5yD,KAAM,MAAO,GAAI,iBCwBnC6zD,GAAMC,GAAaC,YAtBnBv2C,GAOAw2C,GAAYh9C,EAAOi9C,UACnBC,GAAqBF,IAAaA,GAAUzzD,UAC5C4zD,GAAoBn9C,EAAOo9C,kBAC3BC,GAA6BF,IAAqBA,GAAkB5zD,UACpE+zD,GAAaN,IAAa3/B,GAAe2/B,IACzCO,GAAsBL,IAAsB7/B,GAAe6/B,IAC3DM,GAAkB53D,OAAO2D,UACzBk0D,GAAYz9C,EAAO/V,UAEnByzD,GAAgB73C,GAAgB,eAChC83C,GAAkBp4C,GAAI,mBACtBq4C,GAA0Br4C,GAAI,2BAE9Bs4C,GAA4Bp4B,MAAyBlH,IAA4C,UAA1B/P,GAAQxO,EAAO89C,OACtFC,IAA2B,EAG3BC,GAA6B,CAC/Bf,UAAW,EACXgB,WAAY,EACZb,kBAAmB,EACnBc,WAAY,EACZC,YAAa,EACbC,WAAY,EACZC,YAAa,EACbC,aAAc,EACdC,aAAc,GAGZC,GAA8B,CAChCC,cAAe,EACfC,eAAgB,GAWdC,GAAe,SAAU1oD,GAC3B,IAAKiM,EAASjM,GAAK,OAAO,EAC1B,IAAI2oD,EAAQpwC,GAAQvY,GACpB,OAAOiP,GAAO84C,GAA4BY,IACrC15C,GAAOs5C,GAA6BI,IAyD3C,IAAK/B,MAAQmB,IAEXjB,IADAD,GAAc98C,EAAO68C,MACMC,GAAYvzD,WACxB+d,GAA4By1C,GAAWa,GAAyBd,IAC1Ee,IAA4B,EAGnC,IAAKhB,MAAQ2B,IAEXzB,IADAD,GAAc98C,EAAO68C,MACMC,GAAYvzD,YACxB+d,GAA4By1C,GAAWa,GAAyBd,IAIjF,KAAKe,KAA8B77C,EAAWs7C,KAAeA,KAAehxD,SAAS/C,aAEnF+zD,GAAa,WACX,MAAMG,GAAU,yBAEdI,IAA2B,IAAKhB,MAAQmB,GACtCh+C,EAAO68C,KAAOt+B,GAAeve,EAAO68C,IAAOS,IAInD,KAAKO,KAA8BN,IAAuBA,KAAwBC,MAChFD,GAAsBD,GAAW/zD,UAC7Bs0D,IAA2B,IAAKhB,MAAQmB,GACtCh+C,EAAO68C,KAAOt+B,GAAeve,EAAO68C,IAAMtzD,UAAWg0D,IAS7D,GAJIM,IAA6BxgC,GAAeggC,MAAgCE,IAC9Eh/B,GAAe8+B,GAA4BE,IAGzCp9C,IAAgB+E,GAAOq4C,GAAqBG,IAK9C,IAAKb,MAJLkB,IAA2B,KACZR,GAAqBG,GAAe,CAAEzyD,IAAK,WACxD,OAAOiX,EAASlZ,MAAQA,KAAK20D,SAAmBt2D,KAErC22D,GAAgCh+C,EAAO68C,KAClDv1C,GAA4BtH,EAAO68C,IAAOc,GAAiBd,YAI/DgC,GAAiB,CACfC,0BAA2BjB,GAC3BkB,wBAAyBnB,GACzBoB,gBAAiBjB,IAA4BJ,GAC7CsB,YAxGgB,SAAUhpD,GAC1B,GAAI0oD,GAAa1oD,GAAK,OAAOA,EAC7B,MAAMwnD,GAAU,gCAuGhByB,uBApG2B,SAAUlsC,GACrC,GAAIhR,EAAWgR,MAAQuL,IAAkBjc,EAAcg7C,GAAYtqC,IAAK,OAAOA,EAC/E,MAAMyqC,GAAU95C,GAAYqP,GAAK,sCAmGjCmsC,uBAhG2B,SAAU1/B,EAAKt5B,EAAU0nB,EAAQjE,GAC5D,GAAKzJ,EAAL,CACA,GAAI0N,EAAQ,IAAK,IAAIuxC,KAASpB,GAA4B,CACxD,IAAIqB,EAAwBr/C,EAAOo/C,GACnC,GAAIC,GAAyBn6C,GAAOm6C,EAAsB91D,UAAWk2B,GAAM,WAClE4/B,EAAsB91D,UAAUk2B,GACvC,MAAOn1B,GAEP,IACE+0D,EAAsB91D,UAAUk2B,GAAOt5B,EACvC,MAAO8rD,MAGRsL,GAAoB99B,KAAQ5R,GAC/BlE,GAAS4zC,GAAqB99B,EAAK5R,EAAS1nB,EACxC03D,IAA6BX,GAAmBz9B,IAAQt5B,EAAUyjB,KAkFxE01C,6BA9EiC,SAAU7/B,EAAKt5B,EAAU0nB,GAC1D,IAAIuxC,EAAOC,EACX,GAAKl/C,EAAL,CACA,GAAIoe,GAAgB,CAClB,GAAI1Q,EAAQ,IAAKuxC,KAASpB,GAExB,IADAqB,EAAwBr/C,EAAOo/C,KACFl6C,GAAOm6C,EAAuB5/B,GAAM,WACxD4/B,EAAsB5/B,GAC7B,MAAOn1B,IAEX,GAAKgzD,GAAW79B,KAAQ5R,EAKjB,OAHL,IACE,OAAOlE,GAAS2zC,GAAY79B,EAAK5R,EAAS1nB,EAAW03D,IAA6BP,GAAW79B,IAAQt5B,GACrG,MAAOmE,KAGb,IAAK80D,KAASpB,KACZqB,EAAwBr/C,EAAOo/C,KACAC,EAAsB5/B,KAAQ5R,GAC3DlE,GAAS01C,EAAuB5/B,EAAKt5B,KA2DzCo5D,OA3HW,SAAgBtpD,GAC3B,IAAKiM,EAASjM,GAAK,OAAO,EAC1B,IAAI2oD,EAAQpwC,GAAQvY,GACpB,MAAiB,aAAV2oD,GACF15C,GAAO84C,GAA4BY,IACnC15C,GAAOs5C,GAA6BI,IAuHzCY,aAAcb,GACdc,WAAYnC,GACZoC,oBAAqBnC,KC9KnBuB,0BAEAa,GAAc3/C,EAAA0lB,YACdk6B,GAAY5/C,EAAAi9C,UAEhB4C,IAAcC,KAAkC1/C,GAAM,WACpDw/C,GAAU,QACLx/C,GAAM,WACX,IAAIw/C,IAAU,QACTrjC,IAA4B,SAAUxyB,GAC3C,IAAI61D,GACJ,IAAIA,GAAU,MACd,IAAIA,GAAU,KACd,IAAIA,GAAU71D,MACb,IAASqW,GAAM,WAEhB,OAAkE,IAA3D,IAAIw/C,GAAU,IAAID,GAAY,GAAI,OAAGt4D,GAAWvB,oBCjBrDi6D,GAAa//C,EAAAimB,WAEjB+5B,GAAiB,SAAU/pD,GACzB,IAAIhO,EAASsiB,GAAoBtU,GACjC,GAAIhO,EAAS,EAAG,MAAM83D,GAAW,qCACjC,OAAO93D,GCLT,IAAIg4D,GAAajgD,EAAAimB,WAEjBi6B,GAAiB,SAAUjqD,EAAIkqD,GAC7B,IAAIv1B,EAASo1B,GAAkB/pD,GAC/B,GAAI20B,EAASu1B,EAAO,MAAMF,GAAW,gBACrC,OAAOr1B,aCeL1gB,MCfA20C,GAAAK,uBAEJkB,GAAiB,SAAc/tD,GAC7B,IAMIxM,EAAGC,EAAQmC,EAAQg0B,EAAMnyB,EAAUf,EANnCiqB,EAAI+Y,GAAa/iC,MACjBoE,EAAI4X,GAAS3S,GACb8mB,EAAkB1uB,UAAU3E,OAC5Bi2B,EAAQ5C,EAAkB,EAAI1uB,UAAU,QAAKpD,EAC7C20B,OAAoB30B,IAAV00B,EACV7e,EAAiBqe,GAAkBnuB,GAEvC,GAAI8P,IAAmBme,GAAsBne,OAE3CnU,GADAe,EAAW2xB,GAAYruB,EAAG8P,IACVnU,KAChBqE,EAAI,KACK6uB,EAAOvb,EAAK3X,EAAMe,IAAWnB,MACpCyE,EAAEf,KAAK4vB,EAAK90B,OAQhB,IALI60B,GAAW7C,EAAkB,IAC/B4C,EAAQ/J,GAAK+J,EAAOtxB,UAAU,KAEhC3E,EAASolB,GAAkB9d,GAC3BnF,EAAS,IAAGo4D,GAAyBrtC,GAA5B,CAAgCltB,GACpCD,EAAI,EAAGC,EAASD,EAAGA,IACtBoC,EAAOpC,GAAKm2B,EAAUD,EAAM3uB,EAAEvH,GAAIA,GAAKuH,EAAEvH,GAE3C,OAAOoC,UDTL6rB,GAAAttB,QAOA85D,GAAmBz3C,GAAA5d,IACnBs1D,GAAmB13C,GAAAxY,IACnBmwD,GAAuBh6C,GACvBi6C,GAAiC5gD,EACjC6gD,GAAQ3gD,KAAK4gD,MACbC,GAAa5gD,EAAOimB,WACpB46B,GAAcj1B,GAAAlG,YACdo7B,GAAuBD,GAAYt3D,UACnCw3D,GAAWn1B,GAAAjG,SACXq7B,GAA4BnC,GAAAC,0BAC5BmC,GAA0BpC,GAAAE,wBAC1BmC,GAAkBrC,GAAAG,gBAClBmC,GAAatC,GAAAY,WACb2B,GAAsBvC,GAAAa,oBACtB2B,GAAyBxC,GAAAK,uBACzBoC,GAAezC,GAAAW,aACf+B,GAAoB,oBACpBC,GAAe,eAEfC,GAAW,SAAUzuC,EAAG62B,GAC1BwX,GAAuBruC,OACvB,IAAIlI,EAAQ,EACRhlB,EAAS+jD,EAAK/jD,OACdmC,EAAS,IAAI+qB,EAAEltB,GACZA,EAASglB,GAAO7iB,EAAO6iB,GAAS++B,EAAK/+B,KAC5C,OAAO7iB,GAGLy5D,GAAY,SAAUzrD,EAAIxP,GAC5B+5D,GAAqBvqD,EAAIxP,EAAK,CAAEwE,IAAK,WACnC,OAAOq1D,GAAiBt3D,MAAMvC,OAI9Bk7D,GAAgB,SAAU1rD,GAC5B,IAAI2oD,EACJ,OAAOt8C,EAAcw+C,GAAsB7qD,IAAgC,gBAAxB2oD,EAAQpwC,GAAQvY,KAAkC,qBAAT2oD,GAG1FgD,GAAoB,SAAU17D,EAAQO,GACxC,OAAO66D,GAAap7D,KACdud,EAAShd,IACVA,KAAOP,GACP2zC,IAAkBpzC,IAClBA,GAAO,GAGVo7D,GAAkC,SAAkC37D,EAAQO,GAE9E,OADAA,EAAM0f,EAAc1f,GACbm7D,GAAkB17D,EAAQO,GAC7Bsa,EAAyB,EAAG7a,EAAOO,IACnCg6D,GAA+Bv6D,EAAQO,IAGzCq7D,GAAwB,SAAwB57D,EAAQO,EAAKJ,GAE/D,OADAI,EAAM0f,EAAc1f,KAChBm7D,GAAkB17D,EAAQO,IACzByb,EAAS7b,IACT6e,GAAO7e,EAAY,WAClB6e,GAAO7e,EAAY,QACnB6e,GAAO7e,EAAY,QAEnBA,EAAWM,cACVue,GAAO7e,EAAY,cAAeA,EAAWQ,UAC7Cqe,GAAO7e,EAAY,gBAAiBA,EAAWK,WAI7C85D,GAAqBt6D,EAAQO,EAAKJ,IAFzCH,EAAOO,GAAOJ,EAAWc,MAClBjB,IAIPia,GACG6gD,KACHnhD,EAAmCgiD,GACnCr7C,GAAyBs7C,GACzBJ,GAAUN,GAAqB,UAC/BM,GAAUN,GAAqB,cAC/BM,GAAUN,GAAqB,cAC/BM,GAAUN,GAAqB,WAGjCh0C,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,EAAME,QAASmzC,IAA6B,CACtEjvD,yBAA0B8vD,GAC1Bl1D,eAAgBm1D,KAGlBC,GAAiB,SAAU/4C,EAAMknB,EAAS8xB,GACxC,IAAI7B,EAAQn3C,EAAKjR,MAAK,QAAS,GAAK,EAChC+sB,EAAmB9b,GAAQg5C,EAAU,UAAY,IAAM,QACvDC,EAAS,MAAQj5C,EACjBk5C,EAAS,MAAQl5C,EACjBm5C,EAA8BniD,EAAO8kB,GACrCu6B,EAAwB8C,EACxBC,EAAiC/C,GAAyBA,EAAsB91D,UAChFinC,EAAW,GAaX6xB,EAAa,SAAUpwC,EAAMnH,GAC/B01C,GAAqBvuC,EAAMnH,EAAO,CAChC7f,IAAK,WACH,OAdO,SAAUgnB,EAAMnH,GAC3B,IAAIkC,EAAOszC,GAAiBruC,GAC5B,OAAOjF,EAAKyc,KAAKw4B,GAAQn3C,EAAQq1C,EAAQnzC,EAAK8c,YAAY,GAY/CsT,CAAOp0C,KAAM8hB,IAEtBza,IAAK,SAAUlJ,GACb,OAZO,SAAU8qB,EAAMnH,EAAO3jB,GAClC,IAAI6lB,EAAOszC,GAAiBruC,GACxB+vC,IAAS76D,GAASA,EAAQu5D,GAAMv5D,IAAU,EAAI,EAAIA,EAAQ,IAAO,IAAe,IAARA,GAC5E6lB,EAAKyc,KAAKy4B,GAAQp3C,EAAQq1C,EAAQnzC,EAAK8c,WAAY3iC,GAAO,GAS/CkvB,CAAOrtB,KAAM8hB,EAAO3jB,IAE7BT,YAAY,KAIXs6D,GAwCMnB,KACTR,EAAwBnvB,GAAQ,SAAUH,EAAO/iB,EAAMs1C,EAAkBC,GAEvE,OADAz8B,GAAWiK,EAAOqyB,GACXtyB,GACA5tB,EAAS8K,GACV20C,GAAc30C,QAA0B3lB,IAAZk7D,EAC5B,IAAIJ,EAA4Bn1C,EAAMkzC,GAASoC,EAAkBnC,GAAQoC,QACpDl7D,IAArBi7D,EACE,IAAIH,EAA4Bn1C,EAAMkzC,GAASoC,EAAkBnC,IACjE,IAAIgC,EAA4Bn1C,GAClCs0C,GAAat0C,GAAcy0C,GAASpC,EAAuBryC,GACxDtM,EAAK0/C,GAAgBf,EAAuBryC,GAPvB,IAAIm1C,EAA4Bj8B,GAAQlZ,IAQjE+iB,EAAOsvB,MAGV9gC,IAAgBA,GAAe8gC,EAAuB8B,UAC9BgB,IAA8B,SAAU17D,GAC5DA,KAAO44D,GACX/3C,GAA4B+3C,EAAuB54D,EAAK07D,EAA4B17D,OAGxF44D,EAAsB91D,UAAY64D,IA5DlC/C,EAAwBnvB,GAAQ,SAAUje,EAAMjF,EAAM4d,EAAQ23B,GAC5Dz8B,GAAW7T,EAAMmwC,GACjB,IAEIh7B,EAAQyC,EAAY/jC,EAFpBglB,EAAQ,EACRgf,EAAa,EAEjB,GAAK5nB,EAAS8K,GAIP,CAAA,IAAI20C,GAAc30C,GAalB,OAAIs0C,GAAat0C,GACfy0C,GAASpC,EAAuBryC,GAEhCtM,EAAK0/C,GAAgBf,EAAuBryC,GAfnDoa,EAASpa,EACT8c,EAAao2B,GAASt1B,EAAQu1B,GAC9B,IAAIqC,EAAOx1C,EAAK6c,WAChB,QAAgBxiC,IAAZk7D,EAAuB,CACzB,GAAIC,EAAOrC,EAAO,MAAMS,GAAWY,IAEnC,IADA33B,EAAa24B,EAAO14B,GACH,EAAG,MAAM82B,GAAWY,SAGrC,IADA33B,EAAa5e,GAASs3C,GAAWpC,GAChBr2B,EAAa04B,EAAM,MAAM5B,GAAWY,IAEvD17D,EAAS+jC,EAAas2B,OAftBr6D,EAASogC,GAAQlZ,GAEjBoa,EAAS,IAAIy5B,GADbh3B,EAAa/jC,EAASq6D,OAoBxBI,GAAiBtuC,EAAM,CACrBmV,OAAQA,EACR0C,WAAYA,EACZD,WAAYA,EACZ/jC,OAAQA,EACR2jC,KAAM,IAAIs3B,GAAS35B,KAEdtc,EAAQhlB,GAAQu8D,EAAWpwC,EAAMnH,QAGtCyT,IAAgBA,GAAe8gC,EAAuB8B,IAC1DiB,EAAiC/C,EAAsB91D,UAAYinB,GAAO4wC,KAyBxEgB,EAA+BryD,cAAgBsvD,GACjD/3C,GAA4B86C,EAAgC,cAAe/C,GAG7E/3C,GAA4B86C,EAAgCnB,GAAyB5B,GAEjF6B,IACF55C,GAA4B86C,EAAgClB,GAAiBp8B,GAG/E0L,EAAS1L,GAAoBu6B,EAE7BjyC,EAAE,CACAK,QAAQ,EAAMI,OAAQwxC,GAAyB8C,EAA6B12D,MAAOu1D,IAClFxwB,GAEG+wB,MAAqBlC,GACzB/3C,GAA4B+3C,EAAuBkC,GAAmBpB,GAGlEoB,MAAqBa,GACzB96C,GAA4B86C,EAAgCb,GAAmBpB,GAGjFt7B,GAAWC,KAERi9B,GAAiB,aE7OxBA,GAA4B,WAAW,SAAU5vB,GAC/C,OAAO,SAAsBnlB,EAAM8c,EAAYhkC,GAC7C,OAAOqsC,EAAKnpC,KAAMgkB,EAAM8c,EAAYhkC,OCFxCi8D,GAA4B,WAAW,SAAU5vB,GAC/C,OAAO,SAAsBnlB,EAAM8c,EAAYhkC,GAC7C,OAAOqsC,EAAKnpC,KAAMgkB,EAAM8c,EAAYhkC,OCFxCi8D,GAA4B,QAAQ,SAAU5vB,GAC5C,OAAO,SAAmBnlB,EAAM8c,EAAYhkC,GAC1C,OAAOqsC,EAAKnpC,KAAMgkB,EAAM8c,EAAYhkC,OCFxCi8D,GAA4B,SAAS,SAAU5vB,GAC7C,OAAO,SAAoBnlB,EAAM8c,EAAYhkC,GAC3C,OAAOqsC,EAAKnpC,KAAMgkB,EAAM8c,EAAYhkC,OCFxCi8D,GAA4B,SAAS,SAAU5vB,GAC7C,OAAO,SAAoBnlB,EAAM8c,EAAYhkC,GAC3C,OAAOqsC,EAAKnpC,KAAMgkB,EAAM8c,EAAYhkC,OCFxCi8D,GAA4B,SAAS,SAAU5vB,GAC7C,OAAO,SAAoBnlB,EAAM8c,EAAYhkC,GAC3C,OAAOqsC,EAAKnpC,KAAMgkB,EAAM8c,EAAYhkC,OCFxCi8D,GAA4B,SAAS,SAAU5vB,GAC7C,OAAO,SAA2BnlB,EAAM8c,EAAYhkC,GAClD,OAAOqsC,EAAKnpC,KAAMgkB,EAAM8c,EAAYhkC,OAErC,GCJHi8D,GAA4B,UAAU,SAAU5vB,GAC9C,OAAO,SAAqBnlB,EAAM8c,EAAYhkC,GAC5C,OAAOqsC,EAAKnpC,KAAMgkB,EAAM8c,EAAYhkC,OCFxCi8D,GAA4B,UAAU,SAAU5vB,GAC9C,OAAO,SAAqBnlB,EAAM8c,EAAYhkC,GAC5C,OAAOqsC,EAAKnpC,KAAMgkB,EAAM8c,EAAYhkC,OCDxC,IAAI28D,GAAoBphD,EAAYqX,IAChCgqC,GAAc7D,GAAAI,aAKlB0D,EAJ6B9D,GAAAM,wBAIN,cAAc,SAAoBj5D,EAAQ4qB,GAC/D,OAAO2xC,GAAkBC,GAAY15D,MAAO9C,EAAQ4qB,EAAOrmB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,aCV/FysB,GAAAC,MAEA6uC,GAAc/D,GAAAI,aAKlB4D,EAJ6BhE,GAAAM,wBAIN,SAAS,SAAexrC,GAC7C,OAAMmvC,GAAQF,GAAY55D,MAAO2qB,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,MCLrF,IAAI07D,GAAclE,GAAAI,aAKlB+D,EAJ6BnE,GAAAM,wBAIN,QAAQ,SAAch4D,GAC3C,IAAIrB,EAAS2E,UAAU3E,OACvB,OAAO4a,EACLwY,GACA6pC,GAAY/5D,MACZ7B,EACArB,EAAS,EAAI2E,UAAU,QAAKpD,EAC5BvB,EAAS,EAAI2E,UAAU,QAAKpD,mBCf5BysB,GAAAxe,OCAJ2tD,GAAiB,SAAUr4D,EAAai/C,OACtC,IAAI/+B,EAAQ,EACRhlB,EAASolB,GAAkB2+B,GAC3B5hD,EAAS,IAAI2C,EAAY9E,GACtBA,EAASglB,GAAO7iB,EAAO6iB,GAAS++B,EAAK/+B,KAC5C,OAAO7iB,UCJLi7D,GAA0BrE,GAAAE,wBAC1BoE,GAAyBtE,GAAAK,uBAI7BkE,GAAiB,SAAUrwC,GACzB,OAAOowC,GAAuBl3B,GAAmBlZ,EAAeA,EAAcmwC,OCNhFG,GAAiB,SAAU14D,EAAUk/C,GACnC,OAAOoZ,GAA4BG,GAA6Bz4D,GAAWk/C,IHC7E,IAAIyZ,GAAczE,GAAAI,aAKlBsE,EAJ6B1E,GAAAM,wBAIN,UAAU,SAAgBxrC,GAC/C,IAAIk2B,EAAI2Z,GAAWF,GAAYt6D,MAAO2qB,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GACxF,OAAOg8D,GAAmBr6D,KAAM6gD,aIV9B/1B,GAAAtkB,KAEAi0D,GAAc5E,GAAAI,aAKlByE,EAJ6B7E,GAAAM,wBAIN,QAAQ,SAAcwE,GAC3C,OAAMC,GAAOH,GAAYz6D,MAAO26D,EAAWl5D,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,aCR/EysB,GAAAE,UAEA6vC,GAAchF,GAAAI,aAKlB6E,EAJ6BjF,GAAAM,wBAIN,aAAa,SAAmBwE,GACrD,OAAMI,GAAYF,GAAY76D,MAAO26D,EAAWl5D,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,aCRpFysB,GAAAttB,QAEAw9D,GAAcnF,GAAAI,aAKlBgF,EAJ6BpF,GAAAM,wBAIN,WAAW,SAAiBxrC,MACxCqwC,GAAYh7D,MAAO2qB,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,SCR5Ew3D,GAAAS,8BAKyB,OAAQc,GAAgBP,WCLjDr0C,GAAAC,SAEAy4C,GAAcrF,GAAAI,aAKlBkF,EAJ6BtF,GAAAM,wBAIN,YAAY,SAAkBpiC,GACnD,OAAMqnC,GAAWF,GAAYl7D,MAAO+zB,EAAetyB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,aCRvFmkB,GAAAnd,QAEAg2D,GAAcxF,GAAAI,aAKlBqF,EAJ6BzF,GAAAM,wBAIN,WAAW,SAAiBpiC,GACjD,OAAMwnC,GAAUF,GAAYr7D,MAAO+zB,EAAetyB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,MCF1F,IAAIm9D,GAAW3+C,GAAgB,YAC3B4+C,GAAazkD,EAAAi+C,WACbyG,GAAcrjD,EAAYgf,GAAApjB,QAC1B0nD,GAAYtjD,EAAYgf,GAAA16B,MACxBi/D,GAAevjD,EAAYgf,GAAAJ,SAC3B4kC,GAAchG,GAAAI,YACd6F,GAAyBjG,GAAAM,uBACzB4F,GAAsBN,IAAcA,GAAWl7D,UAE/Cy7D,IAAW5kD,GAAM,WACnB2kD,GAAoBP,IAAUp9D,KAAK,CAAC,OAGlC69D,KAAuBF,IACtBA,GAAoB9nD,QACpB8nD,GAAoBP,MAAcO,GAAoB9nD,QAClB,WAApC8nD,GAAoB9nD,OAAOpS,KAE5Bq6D,GAAmB,WACrB,OAAOR,GAAYG,GAAY77D,QAKjC87D,GAAuB,WAAW,WAChC,OAAOF,GAAaC,GAAY77D,SAC/Bg8D,IAGHF,GAAuB,QAAQ,WAC7B,OAAOH,GAAUE,GAAY77D,SAC5Bg8D,IAGHF,GAAuB,SAAUI,GAAkBF,KAAYC,GAAoB,CAAEp6D,KAAM,WAG3Fi6D,GAAuBN,GAAUU,GAAkBF,KAAYC,GAAoB,CAAEp6D,KAAM,WCzC3F,IAAIs6D,GAActG,GAAAI,YACdmG,GAAyBvG,GAAAM,uBACzBkG,GAAQhkD,EAAY,GAAG4I,MAI3Bm7C,GAAuB,QAAQ,SAAcxkC,GAC3C,OAAOykC,GAAMF,GAAYn8D,MAAO43B,MCNlC,IAAI0kC,GAAczG,GAAAI,aAKlBsG,EAJ6B1G,GAAAM,wBAIN,eAAe,SAAqBpiC,GACzD,IAAIj3B,EAAS2E,UAAU3E,OACvB,OAAOmoB,GAAMiT,GAAcokC,GAAYt8D,MAAOlD,EAAS,EAAI,CAACi3B,EAAetyB,UAAU,IAAM,CAACsyB,cCV1FjJ,GAAAjkB,IAGA21D,GAAc3G,GAAAI,aAKlBwG,EAJ6B5G,GAAAM,wBAIN,OAAO,SAAapjC,GACzC,OAAM2pC,GAAMF,GAAYx8D,MAAO+yB,EAAOtxB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GAAW,SAAU+F,EAAGtH,GAClG,OAAO,IAAKs9D,GAA6Bh2D,GAAlC,CAAsCtH,SCRjD,IAAI6/D,GAAyB9G,GAAAK,wBAK7B0G,EAJmC/G,GAAAS,8BAIN,MAAM,eACjC,IAAIx0C,EAAQ,EACRhlB,EAAS2E,UAAU3E,OACnBmC,EAAS,IAAK09D,GAAuB38D,MAA5B,CAAmClD,GACzCA,EAASglB,GAAO7iB,EAAO6iB,GAASrgB,UAAUqgB,KACjD,OAAO7iB,IACN43D,WCbCj+B,GAAAjuB,KAEAkyD,GAAchH,GAAAI,aAKlB6G,EAJ6BjH,GAAAM,wBAIN,UAAU,SAAgBxrC,GAC/C,IAAI7tB,EAAS2E,UAAU3E,OACvB,OAAMigE,GAASF,GAAY78D,MAAO2qB,EAAY7tB,EAAQA,EAAS,EAAI2E,UAAU,QAAKpD,aCThFu6B,GAAAhuB,MAEAoyD,GAAcnH,GAAAI,aAKlBgH,EAJ6BpH,GAAAM,wBAIN,eAAe,SAAqBxrC,GACzD,IAAI7tB,EAAS2E,UAAU3E,OACvB,OAAMogE,GAAcF,GAAYh9D,MAAO2qB,EAAY7tB,EAAQA,EAAS,EAAI2E,UAAU,QAAKpD,MCRzF,IAAI8+D,GAActH,GAAAI,YACdmH,GAAyBvH,GAAAM,uBACzBkH,GAAQtmD,KAAKuK,MAIjB87C,GAAuB,WAAW,eAChC,IAIIj/D,EAJA8qB,EAAOjpB,KACPlD,EAASqgE,GAAYl0C,GAAMnsB,OAC3B88B,EAASyjC,GAAMvgE,EAAS,GACxBglB,EAAQ,EAELA,EAAQ8X,GACbz7B,EAAQ8qB,EAAKnH,GACbmH,EAAKnH,KAAWmH,IAAOnsB,GACvBmsB,EAAKnsB,GAAUqB,EACf,OAAO8qB,KCVX,IAAIq0C,GAAatmD,EAAAimB,WACbsgC,GAAYvmD,EAAAi9C,UACZuJ,GAAqBD,IAAaA,GAAUh9D,UAC5Ck9D,GAAOD,IAAsBA,GAAmBn2D,IAChDq2D,GAAc7H,GAAAI,YACd0H,GAAyB9H,GAAAM,uBAEzByH,IAAiDxmD,GAAM,WAEzD,IAAIwX,EAAQ,IAAIwlC,kBAAkB,GAElC,OADA18C,EAAK+lD,GAAM7uC,EAAO,CAAE9xB,OAAQ,EAAG,EAAG,GAAK,GACnB,IAAb8xB,EAAM,MAIXivC,GAAgBD,IAAiD/H,GAAAC,2BAAiD1+C,GAAM,WAC1H,IAAIwX,EAAQ,IAAI2uC,GAAU,GAG1B,OAFA3uC,EAAMvnB,IAAI,GACVunB,EAAMvnB,IAAI,IAAK,GACK,IAAbunB,EAAM,IAAyB,IAAbA,EAAM,MAKjC+uC,GAAuB,OAAO,SAAa9qC,GACzC6qC,GAAY19D,MACZ,IAAI4hC,EAASs1B,GAASz1D,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,EAAW,GACnEuR,EAAMoM,GAAgB6W,GAC1B,GAAI+qC,GAA+C,OAAOlmD,EAAK+lD,GAAMz9D,KAAM4P,EAAKgyB,GAChF,IAAI9kC,EAASkD,KAAKlD,OACdwyB,EAAMpN,GAAkBtS,GACxBkS,EAAQ,EACZ,GAAIwN,EAAMsS,EAAS9kC,EAAQ,MAAMwgE,GAAW,qBACrCx7C,EAAQwN,GAAKtvB,KAAK4hC,EAAS9f,GAASlS,EAAIkS,QAC7C87C,IAAiDC,ICrCrD,IAAIC,GAAcjI,GAAAI,aAUlB8H,EAT6BlI,GAAAM,wBASN,SAAS,SAAeruC,EAAOC,OACpD,IAAI84B,EAAOv4B,GAAWw1C,GAAY99D,MAAO8nB,EAAOC,GAC5CiC,EAAIowC,GAA6Bp6D,MACjC8hB,EAAQ,EACRhlB,EAAS+jD,EAAK/jD,OACdmC,EAAS,IAAI+qB,EAAEltB,GACZA,EAASglB,GAAO7iB,EAAO6iB,GAAS++B,EAAK/+B,KAC5C,OAAO7iB,IAdImY,GAAM,WAEjB,IAAI68C,UAAU,GAAGn2D,mBCTfgtB,GAAApb,KAEAsuD,GAAcnI,GAAAI,aAKlBgI,EAJ6BpI,GAAAM,wBAIN,QAAQ,SAAcxrC,GAC3C,OAAMuzC,GAAOF,GAAYh+D,MAAO2qB,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,MCEpF,IAAI8/D,GAAQnnD,EAAAzY,MACR6/D,GAAcvI,GAAAI,YACdoI,GAAyBxI,GAAAM,uBACzBmI,GAActnD,EAAAm+C,YACdoJ,GAAUD,IAAejmD,EAAYimD,GAAY/9D,UAAUo6B,MAG3D6jC,MAA+BD,IAAannD,GAAM,WACpDmnD,GAAQ,IAAID,GAAY,GAAI,UACxBlnD,GAAM,WACVmnD,GAAQ,IAAID,GAAY,GAAI,QAG1BG,KAAgBF,KAAYnnD,GAAM,WAEpC,GAAIgD,EAAI,OAAOA,EAAK,GACpB,GAAIigB,GAAI,OAAOA,GAAK,GACpB,GAAIC,GAAY,OAAO,EACvB,GAAIE,GAAQ,OAAOA,GAAS,IAE5B,IAEI1Y,EAAO48C,EAFP9vC,EAAQ,IAAI0vC,GAAY,KACxBK,EAAWR,GAAM,KAGrB,IAAKr8C,EAAQ,EAAGA,EAAQ,IAAKA,IAC3B48C,EAAM58C,EAAQ,EACd8M,EAAM9M,GAAS,IAAMA,EACrB68C,EAAS78C,GAASA,EAAQ,EAAI48C,EAAM,EAOtC,IAJAH,GAAQ3vC,GAAO,SAAUxrB,EAAGi4B,GAC1B,OAAQj4B,EAAI,EAAI,IAAMi4B,EAAI,EAAI,MAG3BvZ,EAAQ,EAAGA,EAAQ,IAAKA,IAC3B,GAAI8M,EAAM9M,KAAW68C,EAAS78C,GAAQ,OAAO,KAkBjDu8C,GAAuB,QAAQ,SAAc1kC,GAE3C,YADkBt7B,IAAds7B,GAAyB9e,GAAU8e,GACnC8kC,GAAoBF,GAAQv+D,KAAM25B,GAE/BQ,GAAaikC,GAAYp+D,MAlBb,SAAU25B,GAC7B,OAAO,SAAU8B,EAAGC,GAClB,YAAkBr9B,IAAds7B,GAAiCA,EAAU8B,EAAGC,IAAM,EAEpDA,GAAMA,GAAU,EAEhBD,GAAMA,EAAU,EACV,IAANA,GAAiB,IAANC,EAAgB,EAAID,EAAI,GAAK,EAAIC,EAAI,EAAI,GAAI,EACrDD,EAAIC,GAU0BkjC,CAAejlC,OACpD8kC,IAAeD,IChEnB,IAAIK,GAAchJ,GAAAI,aAKlB6I,EAJ6BjJ,GAAAM,wBAIN,YAAY,SAAkB4I,EAAOh3C,GAC1D,IAAI3jB,EAAIy6D,GAAY7+D,MAChBlD,EAASsH,EAAEtH,OACXkiE,EAAan9C,GAAgBk9C,EAAOjiE,GAExC,OAAO,IADCs9D,GAA6Bh2D,GAC9B,CACLA,EAAEg6B,OACFh6B,EAAE08B,WAAak+B,EAAa56D,EAAE66D,kBAC9Bh9C,SAAkB5jB,IAAR0pB,EAAoBjrB,EAAS+kB,GAAgBkG,EAAKjrB,IAAWkiE,OCZ3E,IAAIE,GAAYloD,EAAAi9C,UACZkL,GAActJ,GAAAI,YACdmJ,GAAyBvJ,GAAAM,uBACzBkJ,GAAkB,GAAGC,eAGrBC,KAAyBL,IAAa9nD,GAAM,WAC9CioD,GAAgBjhE,KAAK,IAAI8gE,GAAU,OAWrCE,GAAuB,kBAAkB,WACvC,OAAOn6C,GACLo6C,GACAE,GAAuBj3C,GAAW62C,GAAYn/D,OAASm/D,GAAYn/D,MACnEsoB,GAAW7mB,cAZF2V,GAAM,WACjB,MAAO,CAAC,EAAG,GAAGkoD,kBAAoB,IAAIJ,GAAU,CAAC,EAAG,IAAII,sBACnDloD,GAAM,WACX8nD,GAAU3+D,UAAU++D,eAAelhE,KAAK,CAAC,EAAG,eCnB1Cy3D,GAAAM,uBAKAqJ,GAAaxoD,EAAAi+C,WACbwK,GAAsBD,IAAcA,GAAWj/D,WAAa,GAC5Dm/D,GAAgB,GAAG98D,SACnB+8D,GAAOtnD,EAAY,GAAG4I,MAEtB7J,GAAM,WAAcsoD,GAActhE,KAAK,SACzCshE,GAAgB,WACd,OAAOC,GAAK3/D,QAIhB,IAAI4/D,GAAsBH,GAAoB78D,UAAY88D,MAInC,WAAYA,GAAeE,cClB9C/5B,GAAAG,YASA65B,GAAmBhgD,GAAAxY,IACnBy4D,GAAyBjgD,GAAAE,UACzBggD,GAAOj1C,GAAAtkB,KACPw5D,GAAYl1C,GAAAE,UACZi1C,GAAS5nD,EAAY,GAAGjT,QACxB86D,GAAK,EAGLC,GAAsB,SAAUv/B,GAClC,OAAOA,EAAMw/B,SAAWx/B,EAAMw/B,OAAS,IAAIC,KAGzCA,GAAsB,WACxBrgE,KAAKi3B,QAAU,IAGbqpC,GAAqB,SAAU1/B,EAAOnjC,GACxC,OAAOsiE,GAAKn/B,EAAM3J,SAAS,SAAUhqB,GACnC,OAAOA,EAAG,KAAOxP,MAIrB4iE,GAAoB9/D,UAAY,CAC9B0B,IAAK,SAAUxE,GACb,IAAI+V,EAAQ8sD,GAAmBtgE,KAAMvC,GACrC,GAAI+V,EAAO,OAAOA,EAAM,IAE1BxR,IAAK,SAAUvE,GACb,QAAS6iE,GAAmBtgE,KAAMvC,IAEpC4J,IAAK,SAAU5J,EAAKU,GAClB,IAAIqV,EAAQ8sD,GAAmBtgE,KAAMvC,GACjC+V,EAAOA,EAAM,GAAKrV,EACjB6B,KAAKi3B,QAAQ5zB,KAAK,CAAC5F,EAAKU,KAE/B0qC,OAAU,SAAUprC,GAClB,IAAIqkB,EAAQk+C,GAAUhgE,KAAKi3B,SAAS,SAAUhqB,GAC5C,OAAOA,EAAG,KAAOxP,KAGnB,OADKqkB,GAAOm+C,GAAOjgE,KAAKi3B,QAASnV,EAAO,MAC9BA,IAIdy+C,GAAiB,CACf54B,eAAgB,SAAUT,EAASpL,EAAkB1R,EAAQid,GAC3D,IAAIzlC,EAAcslC,GAAQ,SAAUje,EAAMloB,GACxC+7B,GAAW7T,EAAM8T,GACjB8iC,GAAiB52C,EAAM,CACrBppB,KAAMi8B,EACN/+B,GAAImjE,KACJE,YAAQ/hE,IAEMA,MAAZ0C,GAAuBulC,GAAQvlC,EAAUkoB,EAAKoe,GAAQ,CAAEpe,KAAMA,EAAMwd,WAAYrc,OAGlF2S,EAAYn7B,EAAYrB,UAExBioC,EAAmBs3B,GAAuBhkC,GAE1C7qB,EAAS,SAAUgY,EAAMxrB,EAAKU,GAChC,IAAIqU,EAAQg2B,EAAiBvf,GACzBjF,EAAIw8C,GAAe3iD,GAASpgB,IAAM,GAGtC,OAFa,IAATumB,EAAem8C,GAAoB3tD,GAAOnL,IAAI5J,EAAKU,GAClD6lB,EAAKxR,EAAMzV,IAAMoB,EACf8qB,GAkDT,OA/CA2T,GAAYG,EAAW,CAIrB8L,OAAU,SAAUprC,GAClB,IAAI+U,EAAQg2B,EAAiBxoC,MAC7B,IAAKkZ,EAASzb,GAAM,OAAO,EAC3B,IAAIumB,EAAIw8C,GAAe/iE,GACvB,OAAa,IAATumB,EAAsBm8C,GAAoB3tD,GAAe,OAAE/U,GACxDumB,GAAQ9H,GAAO8H,EAAMxR,EAAMzV,YAAcinB,EAAKxR,EAAMzV,KAK7DiF,IAAK,SAAavE,GAChB,IAAI+U,EAAQg2B,EAAiBxoC,MAC7B,IAAKkZ,EAASzb,GAAM,OAAO,EAC3B,IAAIumB,EAAIw8C,GAAe/iE,GACvB,OAAa,IAATumB,EAAsBm8C,GAAoB3tD,GAAOxQ,IAAIvE,GAClDumB,GAAQ9H,GAAO8H,EAAMxR,EAAMzV,OAItC6/B,GAAYG,EAAW3S,EAAS,CAG9BnoB,IAAK,SAAaxE,GAChB,IAAI+U,EAAQg2B,EAAiBxoC,MAC7B,GAAIkZ,EAASzb,GAAM,CACjB,IAAIumB,EAAIw8C,GAAe/iE,GACvB,OAAa,IAATumB,EAAsBm8C,GAAoB3tD,GAAOvQ,IAAIxE,GAClDumB,EAAOA,EAAKxR,EAAMzV,SAAMsB,IAKnCgJ,IAAK,SAAa5J,EAAKU,GACrB,OAAO8S,EAAOjR,KAAMvC,EAAKU,KAEzB,CAGF2qC,IAAK,SAAa3qC,GAChB,OAAO8S,EAAOjR,KAAM7B,GAAO,MAIxByD,QClHP6+D,MAJA5gD,GAAAC,QAGA4gD,IAAW1pD,EAAOgQ,eAAiB,kBAAmBhQ,EAGtD2pD,GAAU,SAAUx3B,GACtB,OAAO,WACL,OAAOA,EAAKnpC,KAAMyB,UAAU3E,OAAS2E,UAAU,QAAKpD,KAMpDuiE,GAAW35B,GAAW,UAAW05B,GAASJ,IAK9C,GAAI3hD,IAAmB8hD,GAAS,CAC9BD,GAAkBF,GAAe54B,eAAeg5B,GAAS,WAAW,GACpE96B,GAAAC,SACA,IAAI+6B,GAAmBD,GAASrgE,UAC5BugE,GAAezoD,EAAYwoD,GAAyB,QACpDE,GAAY1oD,EAAYwoD,GAAiB7+D,KACzCg/D,GAAY3oD,EAAYwoD,GAAiB5+D,KACzCg/D,GAAY5oD,EAAYwoD,GAAiBx5D,KAC7Cu1B,GAAYikC,GAAkB,CAC5Bh4B,OAAU,SAAUprC,GAClB,GAAIyb,EAASzb,KAAS0nC,GAAa1nC,GAAM,CACvC,IAAI+U,EAAK0uD,GAAwBlhE,MAEjC,OADKwS,EAAM4tD,SAAQ5tD,EAAM4tD,OAAS,IAAIK,IAC/BK,GAAa9gE,KAAMvC,IAAQ+U,EAAM4tD,OAAe,OAAE3iE,GACzD,OAAOqjE,GAAa9gE,KAAMvC,IAE9BuE,IAAK,SAAavE,GAChB,GAAIyb,EAASzb,KAAS0nC,GAAa1nC,GAAM,CACvC,IAAI+U,EAAK0uD,GAAwBlhE,MAEjC,OADKwS,EAAM4tD,SAAQ5tD,EAAM4tD,OAAS,IAAIK,IAC/BM,GAAU/gE,KAAMvC,IAAQ+U,EAAM4tD,OAAOp+D,IAAIvE,GAChD,OAAOsjE,GAAU/gE,KAAMvC,IAE3BwE,IAAK,SAAaxE,GAChB,GAAIyb,EAASzb,KAAS0nC,GAAa1nC,GAAM,CACvC,IAAI+U,EAAK0uD,GAAwBlhE,MAEjC,OADKwS,EAAM4tD,SAAQ5tD,EAAM4tD,OAAS,IAAIK,IAC/BM,GAAU/gE,KAAMvC,GAAOujE,GAAUhhE,KAAMvC,GAAO+U,EAAM4tD,OAAOn+D,IAAIxE,GACtE,OAAOujE,GAAUhhE,KAAMvC,IAE3B4J,IAAK,SAAa5J,EAAKU,GACrB,GAAI+a,EAASzb,KAAS0nC,GAAa1nC,GAAM,CACvC,IAAI+U,EAAK0uD,GAAwBlhE,MAC5BwS,EAAM4tD,SAAQ5tD,EAAM4tD,OAAS,IAAIK,IACtCM,GAAU/gE,KAAMvC,GAAOwjE,GAAUjhE,KAAMvC,EAAKU,GAASqU,EAAM4tD,OAAO/4D,IAAI5J,EAAKU,QACtE8iE,GAAUjhE,KAAMvC,EAAKU,GAC5B,OAAO6B,QC1DbinC,GAAW,WAAW,SAAUkC,GAC9B,OAAO,WAAqB,OAAOA,EAAKnpC,KAAMyB,UAAU3E,OAAS2E,UAAU,QAAKpD,MAC/EkiE,WCNCY,GAAU9oD,EAAY,GAAGzJ,SAEzBwyD,GAAgCv5D,OAAO5K,MAAsB,UAAX6R,OAClDuyD,GAAwB,uBACxBC,GAAwBD,GAAyB9pD,KAAK6pD,IAE1DG,GAAiB,SAAUzyD,EAAO0yD,GAChC,GAAIF,IAAyC,iBAATxyD,EAAiB,KAC5C0yD,KAAe1yD,EAAQqyD,GAAQryD,EAAOuyD,GAA0B,IACvE,OAAOvyD,UCNX2yD,GAAiB,SAAUr9D,EAAGwc,GACxB1H,EAAS0H,IAAY,UAAWA,GAClCtC,GAA4Bla,EAAG,QAASwc,EAAQ8gD,eCLpDC,GAAiB,SAAU1oD,EAAU2oD,GACnC,YAAoBvjE,IAAb4a,EAAyBxX,UAAU3E,OAAS,EAAI,GAAK8kE,EAAW/7C,GAAS5M,WCAlF4oD,IAAkBzqD,GAAM,WACtB,IAAI9V,EAAQrE,MAAM,KAClB,QAAM,UAAWqE,KAEjB1E,OAAO+G,eAAerC,EAAO,QAASyW,EAAyB,EAAG,IAC3C,IAAhBzW,EAAMwN,UCSf,IAAIgzD,GAAgBjlD,GAAgB,eAChCklD,GAAQ/qD,EAAA/Z,MACR+kE,GAAO,GAAG3+D,KAEV4+D,GAAkB,SAAwBC,EAAQhyD,GACpD,IAEI+Y,EAFArI,EAAUnf,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,EAChD8jE,EAAa7oD,EAAc8oD,GAAyBpiE,MAEpDu1B,GACFtM,EAAOsM,GAAe,IAAIwsC,GAASI,EAAa9tC,GAAer0B,MAAQoiE,KAEvEn5C,EAAOk5C,EAAaniE,KAAOwnB,GAAO46C,IAClC9jD,GAA4B2K,EAAM64C,GAAe,eAEnCzjE,IAAZ6R,GAAuBoO,GAA4B2K,EAAM,UAAW04C,GAAwBzxD,IAC5F2xD,IAAyBvjD,GAA4B2K,EAAM,QAASs4C,GAAgBt4C,EAAKna,MAAO,IACpG2yD,GAAkBx4C,EAAMrI,GACxB,IAAIyhD,EAAc,GAGlB,OAFA/7B,GAAQ47B,EAAQF,GAAM,CAAE/4C,KAAMo5C,IAC9B/jD,GAA4B2K,EAAM,SAAUo5C,GACrCp5C,GAGLsM,GAAgBA,GAAe0sC,GAAiBF,IAC/C5+C,GAA0B8+C,GAAiBF,GAAO,CAAElgE,MAAM,IAE/D,IAAIugE,GAA0BH,GAAgB1hE,UAAYinB,GAAOu6C,GAAMxhE,UAAW,CAChFwG,YAAagR,EAAyB,EAAGkqD,IACzC/xD,QAAS6H,EAAyB,EAAG,IACrClW,KAAMkW,EAAyB,EAAG,oBAKpCqM,EAAE,CAAEK,QAAQ,GAAQ,CAClB69C,eAAgBL,KC3Cd9qD,KAAiB,aAAe,MAJhCqG,GAKajf,MAAMgC,UAAW,YAAa,CAC3C5C,cAAc,EACdsE,IAAK,WACH,IAAImC,EAAI4X,GAAShc,MACbsvB,EAAMpN,GAAkB9d,GAC5B,OAAc,GAAPkrB,EAAW,EAAIA,EAAM,KAIhCW,GAAiB,cCVf9Y,KAAiB,YAAc,MAJ/BqG,GAKajf,MAAMgC,UAAW,WAAY,CAC1C5C,cAAc,EACdsE,IAAK,WACH,IAAImC,EAAI4X,GAAShc,MACbsvB,EAAMpN,GAAkB9d,GAC5B,OAAc,GAAPkrB,OAAWjxB,EAAY+F,EAAEkrB,EAAM,IAExCjoB,IAAK,SAAkBlJ,GACrB,IAAIiG,EAAI4X,GAAShc,MACbsvB,EAAMpN,GAAkB9d,GAC5B,OAAOA,EAAS,GAAPkrB,EAAW,EAAIA,EAAM,GAAKnxB,KAIvC8xB,GAAiB,oBChBfsyC,GAASvrD,EAAApa,OACT4lE,GAAYxrD,EAAA/V,UACZwhE,GAAMrpD,EAAW,OACjBspD,GAAUtpD,EAAW,WAErBupD,GAAO,WAET3iE,KAAK6J,OAAS,KACd7J,KAAKsa,OAAS,KAEdta,KAAK4iE,WAAa,KAClB5iE,KAAK6iE,eAAiBr7C,GAAO,OAG/Bm7C,GAAKpiE,UAAU0B,IAAM,SAAUxE,EAAKG,GAClC,OAAOoC,KAAKvC,KAASuC,KAAKvC,GAAOG,MAGnC+kE,GAAKpiE,UAAUR,KAAO,SAAUlD,EAAGoQ,EAAI61D,GACrC,IAAIliC,EAAQkiC,EACR9iE,KAAK6iE,eAAehmE,KAAOmD,KAAK6iE,eAAehmE,GAAK,IAAI6lE,IACxD1iE,KAAK4iE,aAAe5iE,KAAK4iE,WAAa,IAAIH,IAC1CjvD,EAAQotB,EAAM3+B,IAAIgL,GAEtB,OADKuG,GAAOotB,EAAMv5B,IAAI4F,EAAIuG,EAAQ,IAAImvD,IAC/BnvD,GAGT,IAAIuvD,GAAO,IAAIJ,GAEfK,GAAiB,WACf,IAEInmE,EAAGoQ,EAFHg2D,EAASF,GACTjmE,EAAS2E,UAAU3E,OAGvB,IAAKD,EAAI,EAAGA,EAAIC,EAAQD,IAClBqc,EAASjM,EAAKxL,UAAU5E,MAAKomE,EAASA,EAAOljE,KAAKlD,EAAGoQ,GAAI,IAE/D,GAAIjN,OAASuiE,IAAUU,IAAWF,GAAM,MAAMP,GAAU,yDACxD,IAAK3lE,EAAI,EAAGA,EAAIC,EAAQD,IACjBqc,EAASjM,EAAKxL,UAAU5E,MAAKomE,EAASA,EAAOljE,KAAKlD,EAAGoQ,GAAI,IAC9D,OAAOg2D,GCzCX,IAAIC,GAASlsD,EAAApa,OAETumE,GAAc,WAChB,IAAI91D,EAAS+L,EAAW,SAAU,UAClC,OAAO/L,EAASA,EAAOma,GAAO,OAASA,GAAO,OAIhDpD,EAAE,CAAEK,QAAQ,GAAQ,CAClB2+C,aAAc,WACZ,OAAOn+C,GAAM+9C,GAAqBE,GAAQzhE,WAAWQ,IAAI,SAAUkhE,OCXvE/+C,EAAE,CAAEK,QAAQ,GAAQ,CAClB4+C,gBAAiB,WACf,OAAwB,GAApB5hE,UAAU3E,QAAsC,iBAAhB2E,UAAU,GAAuB2X,EAAW,UAAe,IAAE3X,UAAU,IACpGwjB,GAAM+9C,GAAqB,KAAMvhE,WAAWQ,IAAI,SAAUmX,EAAW,cCJhFgL,EAAE,CAAEK,QAAQ,GAAQ,CAClB7N,WAAYI,WCAdssD,GAAiB,WAKf,IAJA,IAGIC,EAHAC,EAAa3lD,GAAS7d,MACtByjE,EAAU5oD,GAAU2oD,EAAmB,QACvCE,GAAa,EAERx9D,EAAI,EAAGopB,EAAM7tB,UAAU3E,OAAQoJ,EAAIopB,EAAKppB,IAC/Cq9D,EAAa7rD,EAAK+rD,EAASD,EAAY/hE,UAAUyE,IACjDw9D,EAAaA,GAAcH,EAE7B,QAASG,GCRXt/C,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7DsoD,UAAWL,YCNbM,GAAiB,SAAU32D,GAEzB,OAAOyK,EAAK9J,IAAIrN,UAAU02B,QAAShqB,ICMrCmX,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7D0P,MAAO,SAAeJ,GACpB,IAAI9jB,EAAMgX,GAAS7d,MACfc,EAAW8iE,GAAe/8D,GAC1BgkB,EAAgB7B,GAAK2B,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GAC3E,OAAQioC,GAAQxlC,GAAU,SAAUrD,EAAKU,EAAOwX,GAC9C,IAAKkV,EAAc1sB,EAAOV,EAAKoJ,GAAM,OAAO8O,MAC3C,CAAE8wB,YAAY,EAAMC,aAAa,EAAMC,aAAa,IAAQP,WCHnEhiB,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7D/O,OAAQ,SAAgBqe,GACtB,IAAI9jB,EAAMgX,GAAS7d,MACfc,EAAW8iE,GAAe/8D,GAC1BgkB,EAAgB7B,GAAK2B,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GACvEwlE,EAAS,IAAK5gC,GAAmBp8B,EAAKuS,EAAW,SACjDiU,EAASxS,GAAUgpD,EAAOx8D,KAI9B,OAHAi/B,GAAQxlC,GAAU,SAAUrD,EAAKU,GAC3B0sB,EAAc1sB,EAAOV,EAAKoJ,IAAM6Q,EAAK2V,EAAQw2C,EAAQpmE,EAAKU,KAC7D,CAAEsoC,YAAY,EAAMC,aAAa,IAC7Bm9B,KCdXz/C,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7D7U,KAAM,SAAcmkB,GAClB,IAAI9jB,EAAMgX,GAAS7d,MACfc,EAAW8iE,GAAe/8D,GAC1BgkB,EAAgB7B,GAAK2B,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GAC3E,OAAOioC,GAAQxlC,GAAU,SAAUrD,EAAKU,EAAOwX,GAC7C,GAAIkV,EAAc1sB,EAAOV,EAAKoJ,GAAM,OAAO8O,EAAKxX,KAC/C,CAAEsoC,YAAY,EAAMC,aAAa,EAAMC,aAAa,IAAQ1nC,UCPnEmlB,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7DyoD,QAAS,SAAiBn5C,GACxB,IAAI9jB,EAAMgX,GAAS7d,MACfc,EAAW8iE,GAAe/8D,GAC1BgkB,EAAgB7B,GAAK2B,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GAC3E,OAAOioC,GAAQxlC,GAAU,SAAUrD,EAAKU,EAAOwX,GAC7C,GAAIkV,EAAc1sB,EAAOV,EAAKoJ,GAAM,OAAO8O,EAAKlY,KAC/C,CAAEgpC,YAAY,EAAMC,aAAa,EAAMC,aAAa,IAAQ1nC,iBCT/D8kE,GAAO,GAAG1gE,KAEd2gE,GAAiB,SAAc36D,GAC7B,IAEI2pB,EAASpE,EAAO3G,EAAG4C,EAFnB/tB,EAAS2E,UAAU3E,OACnB00B,EAAQ10B,EAAS,EAAI2E,UAAU,QAAKpD,EAKxC,OAHA0kC,GAAa/iC,OACbgzB,OAAoB30B,IAAVmzB,IACG3W,GAAU2W,GACTnzB,MAAVgL,EAA4B,IAAIrJ,MACpC4uB,EAAQ,GACJoE,GACF/K,EAAI,EACJ4C,EAAgB7B,GAAKwI,EAAO10B,EAAS,EAAI2E,UAAU,QAAKpD,GACxDioC,GAAQj9B,GAAQ,SAAU46D,GACxBvsD,EAAKqsD,GAAMn1C,EAAO/D,EAAco5C,EAAUh8C,UAG5Cqe,GAAQj9B,EAAQ06D,GAAM,CAAE96C,KAAM2F,IAEzB,IAAI5uB,KAAK4uB,KCvBlBxK,EAAE,CAAElnB,OAAQ,MAAOynB,MAAM,GAAQ,CAC/Bvc,KAAM47D,KCER,IAAIE,GAAO7rD,EAAY,GAAGhV,MAI1B+gB,EAAE,CAAElnB,OAAQ,MAAOynB,MAAM,GAAQ,CAC/Bw/C,QAAS,SAAiBpjE,EAAUqjE,GAClCvpD,GAAUupD,GACV,IAAItjE,EAAW2xB,GAAY1xB,GACvB8iE,EAAS,IAAI7jE,KACbgC,EAAM6Y,GAAUgpD,EAAO7hE,KACvBC,EAAM4Y,GAAUgpD,EAAO5hE,KACvBoF,EAAMwT,GAAUgpD,EAAOx8D,KAM3B,OALAi/B,GAAQxlC,GAAU,SAAUwD,GAC1B,IAAI+/D,EAAaD,EAAc9/D,GAC1BoT,EAAK1V,EAAK6hE,EAAQQ,GAClBH,GAAKxsD,EAAKzV,EAAK4hE,EAAQQ,GAAa//D,GADLoT,EAAKrQ,EAAKw8D,EAAQQ,EAAY,CAAC//D,MAElE,CAAEoiC,aAAa,IACXm9B,YCvBXS,GAAiB,SAAU7oC,EAAGC,GAE5B,OAAOD,IAAMC,GAAKD,GAAKA,GAAKC,GAAKA,GCMnCtX,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7DoH,SAAU,SAAkBsR,GAC1B,OAAOuS,GAAQs9B,GAAe/lD,GAAS7d,QAAQ,SAAUvC,EAAKU,EAAOwX,GACnE,GAAI2uD,GAAcnmE,EAAO41B,GAAgB,OAAOpe,MAC/C,CAAE8wB,YAAY,EAAMC,aAAa,EAAMC,aAAa,IAAQP,WCNnEhiB,EAAE,CAAElnB,OAAQ,MAAOynB,MAAM,GAAQ,CAC/B4/C,MAAO,SAAexjE,EAAUqjE,GAC9B,IAAIP,EAAS,IAAI7jE,KACjB6a,GAAUupD,GACV,IAAI/2C,EAASxS,GAAUgpD,EAAOx8D,KAI9B,OAHAi/B,GAAQvlC,GAAU,SAAUuD,GAC1BoT,EAAK2V,EAAQw2C,EAAQO,EAAc9/D,GAAUA,MAExCu/D,KCPXz/C,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7DmpD,MAAO,SAAezwC,GACpB,OAAOuS,GAAQs9B,GAAe/lD,GAAS7d,QAAQ,SAAUvC,EAAKU,EAAOwX,GACnE,GAAIxX,IAAU41B,EAAe,OAAOpe,EAAKlY,KACxC,CAAEgpC,YAAY,EAAMC,aAAa,EAAMC,aAAa,IAAQ1nC,UCCnEmlB,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7DopD,QAAS,SAAiB95C,GACxB,IAAI9jB,EAAMgX,GAAS7d,MACfc,EAAW8iE,GAAe/8D,GAC1BgkB,EAAgB7B,GAAK2B,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GACvEwlE,EAAS,IAAK5gC,GAAmBp8B,EAAKuS,EAAW,SACjDiU,EAASxS,GAAUgpD,EAAOx8D,KAI9B,OAHAi/B,GAAQxlC,GAAU,SAAUrD,EAAKU,GAC/BuZ,EAAK2V,EAAQw2C,EAAQh5C,EAAc1sB,EAAOV,EAAKoJ,GAAM1I,KACpD,CAAEsoC,YAAY,EAAMC,aAAa,IAC7Bm9B,KCVXz/C,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7DqpD,UAAW,SAAmB/5C,GAC5B,IAAI9jB,EAAMgX,GAAS7d,MACfc,EAAW8iE,GAAe/8D,GAC1BgkB,EAAgB7B,GAAK2B,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GACvEwlE,EAAS,IAAK5gC,GAAmBp8B,EAAKuS,EAAW,SACjDiU,EAASxS,GAAUgpD,EAAOx8D,KAI9B,OAHAi/B,GAAQxlC,GAAU,SAAUrD,EAAKU,GAC/BuZ,EAAK2V,EAAQw2C,EAAQpmE,EAAKotB,EAAc1sB,EAAOV,EAAKoJ,MACnD,CAAE4/B,YAAY,EAAMC,aAAa,IAC7Bm9B,KCfXz/C,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAE7DspD,MAAO,SAAe5jE,OACpB,IAAI8F,EAAMgX,GAAS7d,MACfqtB,EAASxS,GAAUhU,EAAIQ,KACvB8oB,EAAkB1uB,UAAU3E,OAC5BD,EAAI,EACDA,EAAIszB,GACTmW,GAAQ7kC,UAAU5E,KAAMwwB,EAAQ,CAAEpE,KAAMpiB,EAAK4/B,YAAY,IAE3D,OAAO5/B,YCfX+9D,GAAiB,WACf,OAAO,IAAI5kE,KAAKsoB,GAAW7mB,aCA7B2iB,EAAE,CAAElnB,OAAQ,MAAOynB,MAAM,GAAQ,CAC/B4T,GAAIqsC,KCGN,IAAIC,GAAY7tD,EAAA/V,UAIhBmjB,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7Drd,OAAQ,SAAgB2sB,GACtB,IAAI9jB,EAAMgX,GAAS7d,MACfc,EAAW8iE,GAAe/8D,GAC1Bi+D,EAAYrjE,UAAU3E,OAAS,EAC/BioE,EAAcD,OAAYzmE,EAAYoD,UAAU,GAUpD,GATAoZ,GAAU8P,GACV2b,GAAQxlC,GAAU,SAAUrD,EAAKU,GAC3B2mE,GACFA,GAAY,EACZC,EAAc5mE,GAEd4mE,EAAcp6C,EAAWo6C,EAAa5mE,EAAOV,EAAKoJ,KAEnD,CAAE4/B,YAAY,EAAMC,aAAa,IAChCo+B,EAAW,MAAMD,GAAU,6CAC/B,OAAOE,KCnBX3gD,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7D3L,KAAM,SAAcib,GAClB,IAAI9jB,EAAMgX,GAAS7d,MACfc,EAAW8iE,GAAe/8D,GAC1BgkB,EAAgB7B,GAAK2B,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GAC3E,OAAOioC,GAAQxlC,GAAU,SAAUrD,EAAKU,EAAOwX,GAC7C,GAAIkV,EAAc1sB,EAAOV,EAAKoJ,GAAM,OAAO8O,MAC1C,CAAE8wB,YAAY,EAAMC,aAAa,EAAMC,aAAa,IAAQP,WCTnE,IAAI4+B,GAAYhuD,EAAA/V,UAIhBmjB,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7D4pD,OAAQ,SAAgBxnE,EAAKynE,GAC3B,IAAIr+D,EAAMgX,GAAS7d,MACfiC,EAAM4Y,GAAUhU,EAAI5E,KACpBD,EAAM6Y,GAAUhU,EAAI7E,KACpBqF,EAAMwT,GAAUhU,EAAIQ,KACpBvK,EAAS2E,UAAU3E,OACvB+d,GAAUqqD,GACV,IAAIC,EAAiBztD,EAAK1V,EAAK6E,EAAKpJ,GACpC,IAAK0nE,GAAkBroE,EAAS,EAC9B,MAAMkoE,GAAU,yBAElB,IAAI7mE,EAAQgnE,EAAiBztD,EAAKzV,EAAK4E,EAAKpJ,GAAOod,GAAU/d,EAAS,EAAI2E,UAAU,QAAKpD,EAAtCwc,CAAiDpd,EAAKoJ,GAEzG,OADA6Q,EAAKrQ,EAAKR,EAAKpJ,EAAKynE,EAAS/mE,EAAOV,EAAKoJ,IAClCA,KCxBX,IAAIu+D,GAAMruD,KAAK6K,IACXyjD,GAAMtuD,KAAK2K,IAIf0C,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChC2gD,MAAO,SAAe7pC,EAAG8pC,EAAOC,GAC9B,OAAOJ,GAAII,EAAOH,GAAIE,EAAO9pC,OCLjCrX,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChC8gD,YAAa1uD,KAAK2uD,GAAK,MCHzB,IAAIC,GAAc,IAAM5uD,KAAK2uD,GAI7BthD,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChCihD,QAAS,SAAiBC,GACxB,OAAOA,EAAUF,gBCNrBG,GAAiB/uD,KAAKgvD,OAAS,SAAetqC,EAAGuqC,EAAOC,EAAQC,EAAQC,GACtE,IAAIC,GAAM3qC,EACN4qC,GAAUL,EACVM,GAAWL,EACXM,GAAWL,EACXM,GAAYL,EAEhB,OAAIC,GAAMA,GAAMC,GAAUA,GAAUC,GAAWA,GAAWC,GAAWA,GAAWC,GAAYA,EAAiB3nC,IACzGunC,IAAO1nC,EAAAA,GAAY0nC,KAAQ1nC,EAAAA,EAAiB0nC,GACxCA,EAAKC,IAAWG,EAAWD,IAAYD,EAAUD,GAAUE,GCJrEniD,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChC8hD,OAAQ,SAAgBhrC,EAAGuqC,EAAOC,EAAQC,EAAQC,GAChD,OAAOn6B,GAAO85B,GAAMrqC,EAAGuqC,EAAOC,EAAQC,EAAQC,OCJlD/hD,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChC+hD,MAAO,SAAeC,EAAIC,EAAIC,EAAIC,GAChC,IAAIC,EAAMJ,IAAO,EAEbK,EAAMH,IAAO,EACjB,OAFUD,IAAO,IAEHE,IAAO,KAAOC,EAAMC,GAAOD,EAAMC,KAASD,EAAMC,IAAQ,MAAQ,IAAM,KCLxF5iD,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChCsiD,MAAO,SAAeC,EAAG9rC,GACvB,IAAI6R,EAAS,MACTk6B,GAAMD,EACNE,GAAMhsC,EACNisC,EAAKF,EAAKl6B,EACVq6B,EAAKF,EAAKn6B,EACVs6B,EAAKJ,GAAM,GACXK,EAAKJ,GAAM,GACX37B,GAAK87B,EAAKD,IAAO,IAAMD,EAAKC,IAAO,IACvC,OAAOC,EAAKC,GAAM/7B,GAAK,MAAQ47B,EAAKG,IAAO,IAAM/7B,EAAIwB,IAAW,OCVpE7oB,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChC8iD,MAAO,SAAed,EAAIC,EAAIC,EAAIC,GAChC,IAAIC,EAAMJ,IAAO,EAEbK,EAAMH,IAAO,EACjB,OAFUD,IAAO,IAEHE,IAAO,MAAQC,EAAMC,IAAQD,EAAMC,GAAOD,EAAMC,IAAQ,KAAO,IAAM,KCNvF5iD,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChC+iD,YAAa,IAAM3wD,KAAK2uD,KCH1B,IAAIiC,GAAc5wD,KAAK2uD,GAAK,IAI5BthD,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChCkhD,QAAS,SAAiBD,GACxB,OAAOA,EAAU+B,MCHrBvjD,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChCohD,MAAOD,KCCT,IAAI8B,GAAgB,gBAChBC,GAA0BD,0BAE1BE,GAAmBjoD,GAAAxY,IACnB0gE,GAAmBloD,GAAAE,UAA8B8nD,IACjDG,GAAYhxD,EAAA/V,UAEZgnE,GAAyBlzC,IAA0B,SAA+BmzC,GACpFJ,GAAiB9nE,KAAM,CACrBH,KAAMgoE,GACNK,KAAMA,EAAO,eAEdN,IAAe,WAChB,IAAIp1D,EAAQu1D,GAAiB/nE,MAE7B,MAAO,CAAE7B,OAAe,YADbqU,EAAM01D,MAAqB,WAAb11D,EAAM01D,KAAoB,OAAS,aACtB,WAAYvoE,MAAM,MAM1DykB,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,EAAME,QAAQ,GAAQ,CAC9CsjD,WAAY,SAAoBl7D,GAC9B,IAAIi7D,EAAOrqD,GAAS5Q,GAAIi7D,KACxB,IAAKv3B,GAAeu3B,GAAO,MAAMF,GAtBf,8EAuBlB,OAAO,IAAIC,GAAuBC,MC5BtC9jD,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChCyjD,QAAS,SAAiB3sC,GACxB,OAAQA,GAAKA,IAAMA,GAAU,GAALA,EAAS,EAAIA,IAAMiD,EAAAA,EAAWjD,EAAI,KCD9DrX,EAAE,CAAElnB,OAAQ,OAAQynB,MAAM,GAAQ,CAChC0jD,MAAO,SAAenB,EAAG9rC,GACvB,IAAI6R,EAAS,MACTk6B,GAAMD,EACNE,GAAMhsC,EACNisC,EAAKF,EAAKl6B,EACVq6B,EAAKF,EAAKn6B,EACVs6B,EAAKJ,IAAO,GACZK,EAAKJ,IAAO,GACZ37B,GAAK87B,EAAKD,IAAO,IAAMD,EAAKC,IAAO,IACvC,OAAOC,EAAKC,GAAM/7B,IAAM,MAAQ47B,EAAKG,IAAO,IAAM/7B,EAAIwB,KAAY,OCRtE,IAAIq7B,GAAgC,gCAEhCC,GAAavxD,EAAAimB,WACburC,GAAcxxD,EAAAgtC,YACdykB,GAAYzxD,EAAA/V,UACZynE,GAAK,aACLC,GAAStwD,EAAY,GAAG3C,QACxBkzD,GAAOvwD,EAAYqwD,GAAMrxD,MACzBwxD,GAAiBxwD,EAAY,GAAIzV,UACjCkmE,GAAczwD,EAAY,GAAGva,OAIjCsmB,EAAE,CAAElnB,OAAQ,SAAUynB,MAAM,GAAQ,CAClCokD,WAAY,SAAoBjlD,EAAQ+rB,GACtC,IACIgY,EAAGmhB,EADHvqC,EAAO,EAEX,GAAqB,iBAAV3a,EAAoB,MAAM2kD,GAAUH,IAC/C,IAAKxkD,EAAOhnB,OAAQ,MAAM0rE,GAAYF,IACtC,GAAyB,KAArBK,GAAO7kD,EAAQ,KACjB2a,GAAO,IACP3a,EAASglD,GAAYhlD,EAAQ,IACjBhnB,QAAQ,MAAM0rE,GAAYF,IAGxC,IADAzgB,OAAcxpD,IAAVwxC,EAAsB,GAAKtuB,GAAoBsuB,IAC3C,GAAKgY,EAAI,GAAI,MAAM0gB,GAxBX,iBAyBhB,IAAKK,GAAKF,GAAO5kD,IAAW+kD,GAAeG,EAAU/2B,GAASnuB,EAAQ+jC,GAAIA,KAAO/jC,EAC/E,MAAM0kD,GAAYF,IAEpB,OAAO7pC,EAAOuqC,YCvBdxrD,GAUAyrD,GAAepsD,GAAgB,cAC/BqsD,GAAa,aACbC,GAAe,eACfC,GAAwB,uBACxBC,GAAYxpD,GAAAE,UACZupD,GAAmBzpD,GAAAxY,IACnBkiE,GAA6BF,GAAUH,IACvCM,GAA+BH,GAAUF,IACzCM,GAAuCJ,GAAUD,IACjDM,GAAQ1yD,EAAAzY,MAERorE,GAAoB,SAAUC,GAChC5pE,KAAK4pE,SAAW/rD,GAAS+rD,GACzB5pE,KAAK6pE,aAAUxrE,EACf2B,KAAK8pE,0BAAuBzrE,GAG9BsrE,GAAkBppE,UAAY,CAC5BV,KAAMspE,GACNY,MAAO,WACL,IAAIF,EAAU7pE,KAAK6pE,QACnB,GAAIA,EAAS,CACX7pE,KAAK6pE,aAAUxrE,EACf,IACEwrE,IACA,MAAOvoE,GACPg6C,GAAiBh6C,MAIvBslB,MAAO,WACL,IAAKzP,EAAa,CAChB,IAAI6yD,EAAehqE,KAAK2f,OACpBmqD,EAAuB9pE,KAAK8pE,qBAChCE,EAAaC,QAAS,EAClBH,IAAsBA,EAAqBG,QAAS,GACxDjqE,KAAK4pE,cAAWvrE,GAEpB6rE,SAAU,WACR,YAAyB7rE,IAAlB2B,KAAK4pE,WAIhB,IAAIO,GAAe,SAAUP,EAAUQ,GACrC,IACItiD,EADAuiD,EAAoBf,GAAiBtpE,KAAM,IAAI2pE,GAAkBC,IAEhEzyD,IAAanX,KAAKiqE,QAAS,GAChC,KACMniD,EAAQhN,GAAU8uD,EAAU,WAAUlyD,EAAKoQ,EAAO8hD,EAAU5pE,MAChE,MAAOsB,GACPg6C,GAAiBh6C,GAEnB,IAAI+oE,EAAkBH,WAAtB,CACA,IAAIJ,EAAuBO,EAAkBP,qBAAuB,IAAIQ,GAAqBD,GAC7F,IACE,IAAIR,EAAUO,EAAWN,GACrBE,EAAeH,EACJ,MAAXA,IAAiBQ,EAAkBR,QAAU7wD,EAAW6wD,EAAQU,aAChE,WAAcP,EAAaO,eAC3B1vD,GAAUgvD,IACd,MAAO7gB,GAEP,YADA8gB,EAAqBxoE,MAAM0nD,GAEvBqhB,EAAkBH,YAAYG,EAAkBN,UAGxDI,GAAa5pE,UAAYq8B,GAAY,GAAI,CACvC2tC,YAAa,WACX,IAAIF,EAAoBb,GAA6BxpE,MAChDqqE,EAAkBH,aACrBG,EAAkBzjD,QAClByjD,EAAkBN,YAKpB5yD,GAAWqzD,GAAiBL,GAAa5pE,UAAW,SAAU,CAChE5C,cAAc,EACdsE,IAAK,WACH,OAAOunE,GAA6BxpE,MAAMkqE,cAI9C,IAAII,GAAuB,SAAUD,GACnCf,GAAiBtpE,KAAM,CACrBH,KAAMupE,GACNiB,kBAAmBA,IAEhBlzD,IAAanX,KAAKiqE,QAAS,IAGlCK,GAAqB/pE,UAAYq8B,GAAY,GAAI,CAC/C78B,KAAM,SAAc5B,GAClB,IAAIksE,EAAoBZ,GAAqCzpE,MAAMqqE,kBACnE,IAAKA,EAAkBH,WAAY,CACjC,IAAIN,EAAWS,EAAkBT,SACjC,IACE,IAAIa,EAAa3vD,GAAU8uD,EAAU,QACjCa,GAAY/yD,EAAK+yD,EAAYb,EAAUzrE,GAC3C,MAAOmD,GACPg6C,GAAiBh6C,MAIvBA,MAAO,SAAenD,GACpB,IAAIksE,EAAoBZ,GAAqCzpE,MAAMqqE,kBACnE,IAAKA,EAAkBH,WAAY,CACjC,IAAIN,EAAWS,EAAkBT,SACjCS,EAAkBzjD,QAClB,IACE,IAAI8jD,EAAc5vD,GAAU8uD,EAAU,SAClCc,EAAahzD,EAAKgzD,EAAad,EAAUzrE,GACxCm9C,GAAiBn9C,GACtB,MAAOyB,GACP07C,GAAiB17C,GACjByqE,EAAkBN,UAGxB1zD,SAAU,WACR,IAAIg0D,EAAoBZ,GAAqCzpE,MAAMqqE,kBACnE,IAAKA,EAAkBH,WAAY,CACjC,IAAIN,EAAWS,EAAkBT,SACjCS,EAAkBzjD,QAClB,IACE,IAAI+jD,EAAiB7vD,GAAU8uD,EAAU,YACrCe,GAAgBjzD,EAAKizD,EAAgBf,GACzC,MAAOtoE,GACPg6C,GAAiBh6C,GACjB+oE,EAAkBN,YAKtB5yD,GAAWqzD,GAAiBF,GAAqB/pE,UAAW,SAAU,CACxE5C,cAAc,EACdsE,IAAK,WACH,OAAOwnE,GAAqCzpE,MAAMqqE,kBAAkBH,cAIxE,IAAIU,GAAc,SAAoBR,GACpCttC,GAAW98B,KAAM6qE,IACjBvB,GAAiBtpE,KAAM,CACrBH,KAAMqpE,GACNkB,WAAYvvD,GAAUuvD,MAItBS,GAAsBD,GAAYrqE,UAEtCq8B,GAAYiuC,GAAqB,CAC/BC,UAAW,SAAmBlB,GAC5B,IAAI9sE,EAAS2E,UAAU3E,OACvB,OAAO,IAAIqtE,GAAanxD,EAAW4wD,GAAY,CAC7C7pE,KAAM6pE,EACNtoE,MAAOxE,EAAS,EAAI2E,UAAU,QAAKpD,EACnCgY,SAAUvZ,EAAS,EAAI2E,UAAU,QAAKpD,GACpC6a,EAAS0wD,GAAYA,EAAW,GAAIL,GAA2BvpE,MAAMoqE,eAI7ExtC,GAAYguC,GAAa,CACvBxiE,KAAM,SAAcqzB,GAClB,IAAIzR,EAAIN,GAAc1pB,MAAQA,KAAO4qE,GACjCG,EAAmBjwD,GAAU+C,GAAS4d,GAAIwtC,IAC9C,GAAI8B,EAAkB,CACpB,IAAIC,EAAantD,GAASnG,EAAKqzD,EAAkBtvC,IACjD,OAAOuvC,EAAWjkE,cAAgBijB,EAAIghD,EAAa,IAAIhhD,GAAE,SAAU4/C,GACjE,OAAOoB,EAAWF,UAAUlB,MAGhC,IAAI9oE,EAAW2xB,GAAYgJ,GAC3B,OAAO,IAAIzR,GAAE,SAAU4/C,GACrBtjC,GAAQxlC,GAAU,SAAUmM,EAAI0I,GAE9B,GADAi0D,EAAS7pE,KAAKkN,GACV28D,EAASK,OAAQ,OAAOt0D,MAC3B,CAAE+wB,aAAa,EAAMC,aAAa,IACrCijC,EAASvzD,eAGbkiB,GAAI,eACF,IAAIvO,EAAIN,GAAc1pB,MAAQA,KAAO4qE,GACjC9tE,EAAS2E,UAAU3E,OACnBy+B,EAAQmuC,GAAM5sE,GACdglB,EAAQ,EACLA,EAAQhlB,GAAQy+B,EAAMzZ,GAASrgB,UAAUqgB,KAChD,OAAO,IAAIkI,GAAE,SAAU4/C,GACrB,IAAK,IAAI/sE,EAAI,EAAGA,EAAIC,EAAQD,IAE1B,GADA+sE,EAAS7pE,KAAKw7B,EAAM1+B,IAChB+sE,EAASK,OAAQ,OACrBL,EAASvzD,iBAKjBsK,GAASkqD,GAAqB5B,IAAc,WAAc,OAAOjpE,QAEjEokB,EAAE,CAAEK,QAAQ,GAAQ,CAClBwmD,WAAYL,KAGd/uC,GAAWqtC,ICtNX9kD,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnCumD,WAAY,SAAoBnqE,GAC9B,IAAIipB,EAAIhqB,KACJw/C,EAAazE,GAA6B/wB,GAC1C1qB,EAAUkgD,EAAWlgD,QACrBQ,EAAS0/C,EAAW1/C,OACpBb,EAASu8C,IAAQ,WACnB,IAAI2vB,EAAiBtwD,GAAUmP,EAAE1qB,SAC7B2U,EAAS,GACTyrC,EAAU,EACVC,EAAY,EAChBrZ,GAAQvlC,GAAU,SAAUk6C,GAC1B,IAAIn5B,EAAQ49B,IACRE,GAAgB,EACpBD,IACAjoC,EAAKyzD,EAAgBnhD,EAAGixB,GAASz7C,MAAK,SAAUrB,GAC1CyhD,IACJA,GAAgB,EAChB3rC,EAAO6N,GAAS,CAAEspD,OAAQ,YAAajtE,MAAOA,KAC5CwhD,GAAargD,EAAQ2U,OACtB,SAAU3S,GACPs+C,IACJA,GAAgB,EAChB3rC,EAAO6N,GAAS,CAAEspD,OAAQ,WAAYxsB,OAAQt9C,KAC5Cq+C,GAAargD,EAAQ2U,YAGzB0rC,GAAargD,EAAQ2U,MAGzB,OADIhV,EAAOqC,OAAOxB,EAAOb,EAAOd,OACzBqhD,EAAWvE,WC/BtB,IAAIowB,GAAoB,0BAIxBjnD,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnC2mD,IAAK,SAAavqE,GAChB,IAAIipB,EAAIhqB,KACJsiE,EAAiBlpD,EAAW,kBAC5BomC,EAAazE,GAA6B/wB,GAC1C1qB,EAAUkgD,EAAWlgD,QACrBQ,EAAS0/C,EAAW1/C,OACpBb,EAASu8C,IAAQ,WACnB,IAAI2vB,EAAiBtwD,GAAUmP,EAAE1qB,SAC7B4iE,EAAS,GACTxiB,EAAU,EACVC,EAAY,EACZ4rB,GAAkB,EACtBjlC,GAAQvlC,GAAU,SAAUk6C,GAC1B,IAAIn5B,EAAQ49B,IACR8rB,GAAkB,EACtB7rB,IACAjoC,EAAKyzD,EAAgBnhD,EAAGixB,GAASz7C,MAAK,SAAUrB,GAC1CqtE,GAAmBD,IACvBA,GAAkB,EAClBjsE,EAAQnB,OACP,SAAUmD,GACPkqE,GAAmBD,IACvBC,GAAkB,EAClBtJ,EAAOpgD,GAASxgB,IACdq+C,GAAa7/C,EAAO,IAAIwiE,EAAeJ,EAAQmJ,cAGnD1rB,GAAa7/C,EAAO,IAAIwiE,EAAeJ,EAAQmJ,QAGnD,OADIpsE,EAAOqC,OAAOxB,EAAOb,EAAOd,OACzBqhD,EAAWvE,WCrCtB72B,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnC8mD,IAAO,SAAU9gD,GACf,IAAI0wB,EAAoBN,GAA6B/6C,MACjDf,EAASu8C,GAAQ7wB,GAErB,OADC1rB,EAAOqC,MAAQ+5C,EAAkBv7C,OAASu7C,EAAkB/7C,SAASL,EAAOd,OACtEk9C,EAAkBJ,8CCLzBywB,GAAMtyD,EAAW,OACjBuyD,GAAUvyD,EAAW,WACrBwyD,GAAOvzD,EAAY,GAAGhV,MAEtBwoE,GAAWlwD,GAAO,YAClBmwD,GAAQD,GAASjrC,QAAUirC,GAASjrC,MAAQ,IAAI+qC,IAEhDI,GAAyB,SAAU7uE,EAAQ8uE,EAAW1hE,GACxD,IAAI2hE,EAAiBH,GAAM7pE,IAAI/E,GAC/B,IAAK+uE,EAAgB,CACnB,IAAK3hE,EAAQ,OACbwhE,GAAMzkE,IAAInK,EAAQ+uE,EAAiB,IAAIP,IAEzC,IAAIQ,EAAcD,EAAehqE,IAAI+pE,GACrC,IAAKE,EAAa,CAChB,IAAK5hE,EAAQ,OACb2hE,EAAe5kE,IAAI2kE,EAAWE,EAAc,IAAIR,IAChD,OAAOQ,GCpBPC,IDgDJC,GAAiB,CACfxrC,MAAOkrC,GACPO,OAAQN,GACR/pE,IA5B2B,SAAUsqE,EAAaloE,EAAG2W,GACrD,IAAIwxD,EAAcR,GAAuB3nE,EAAG2W,GAAG,GAC/C,YAAuB1c,IAAhBkuE,GAAoCA,EAAYvqE,IAAIsqE,IA2B3DrqE,IAxB2B,SAAUqqE,EAAaloE,EAAG2W,GACrD,IAAIwxD,EAAcR,GAAuB3nE,EAAG2W,GAAG,GAC/C,YAAuB1c,IAAhBkuE,OAA4BluE,EAAYkuE,EAAYtqE,IAAIqqE,IAuB/DjlE,IApB8B,SAAUilE,EAAaE,EAAepoE,EAAG2W,GACvEgxD,GAAuB3nE,EAAG2W,GAAG,GAAM1T,IAAIilE,EAAaE,IAoBpD7vE,KAjB4B,SAAUO,EAAQ8uE,GAC9C,IAAIO,EAAcR,GAAuB7uE,EAAQ8uE,GAAW,GACxDrvE,EAAO,GAEX,OADI4vE,GAAaA,EAAY/uE,SAAQ,SAAU2xD,EAAG1xD,GAAOmuE,GAAKjvE,EAAMc,MAC7Dd,GAcP8vE,MAXkB,SAAUx/D,GAC5B,YAAc5O,IAAP4O,GAAiC,gBAAJ,IAAFA,EAAE,YAAA3E,EAAAlJ,QAAF6N,IAAiBA,EAAKpF,OAAOoF,MC7C7Cw/D,MAChBC,GAA4BN,GAAA/kE,IAIhC+c,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnCgoD,eAAgB,SAAwBC,EAAaC,EAAe3vE,GAClE,IAAI8uE,EAAYvqE,UAAU3E,OAAS,OAAIuB,EAAY8tE,GAAc1qE,UAAU,IAC3EirE,GAA0BE,EAAaC,EAAehvD,GAAS3gB,GAAS8uE,MCR5E,IAAIc,GAAgBV,GAAAK,MAChBM,GAAyBX,GAAAC,OACzBW,GAAQZ,GAAAxrC,MAIZxc,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnCsoD,eAAgB,SAAwBL,EAAa1vE,GACnD,IAAI8uE,EAAYvqE,UAAU3E,OAAS,OAAIuB,EAAYyuE,GAAcrrE,UAAU,IACvE8qE,EAAcQ,GAAuBlvD,GAAS3gB,GAAS8uE,GAAW,GACtE,QAAoB3tE,IAAhBkuE,IAA8BA,EAAoB,OAAEK,GAAc,OAAO,EAC7E,GAAIL,EAAYhkC,KAAM,OAAO,EAC7B,IAAI0jC,EAAiBe,GAAM/qE,IAAI/E,GAE/B,OADA+uE,EAAuB,OAAED,KAChBC,EAAe1jC,MAAQykC,GAAc,OAAE9vE,MCbpD,IAAIgwE,GAAyBd,GAAApqE,IACzBmrE,GAAyBf,GAAAnqE,IACzBmrE,GAAgBhB,GAAAK,MAEhBY,GAAsB,SAAUf,EAAaloE,EAAG2W,GAElD,GADamyD,GAAuBZ,EAAaloE,EAAG2W,GACxC,OAAOoyD,GAAuBb,EAAaloE,EAAG2W,GAC1D,IAAIu/B,EAASjmB,GAAejwB,GAC5B,OAAkB,OAAXk2C,EAAkB+yB,GAAoBf,EAAahyB,EAAQv/B,QAAK1c,GAKzE+lB,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnC2oD,YAAa,SAAqBV,EAAa1vE,GAC7C,IAAI8uE,EAAYvqE,UAAU3E,OAAS,OAAIuB,EAAY+uE,GAAc3rE,UAAU,IAC3E,OAAO4rE,GAAoBT,EAAa/uD,GAAS3gB,GAAS8uE,aCb1DuB,GAAMn0D,EAAW,OACjBo0D,GAAeD,GAAIhtE,UACnBktE,GAAap1D,EAAYm1D,GAAahwE,SACtCkwE,GAASr1D,EAAYm1D,GAAaxrE,KAClC2rE,GAASt1D,EAAYm1D,GAAanmE,KAClCumE,GAAOv1D,EAAY,GAAGhV,MAI1BwqE,GAAiB,SAAkBC,GACjC,IAOIhsD,EAAO85B,EAAMn+C,EAPbwrB,EAAOjN,GAAShc,MAChBlD,EAASolB,GAAkB+G,GAC3BhqB,EAASgrB,GAAmBhB,EAAM,GAClCpiB,EAAM,IAAI0mE,GACVQ,EAA+B,MAAZD,EAAmBjzD,GAAUizD,GAAY,SAAU3vE,GACxE,OAAOA,GAGT,IAAK2jB,EAAQ,EAAGA,EAAQhlB,EAAQglB,IAE9BrkB,EAAMswE,EADNnyB,EAAO3yB,EAAKnH,IAEP4rD,GAAO7mE,EAAKpJ,IAAMkwE,GAAO9mE,EAAKpJ,EAAKm+C,GAK1C,OAHA6xB,GAAW5mE,GAAK,SAAU1I,GACxByvE,GAAK3uE,EAAQd,MAERc,GC3BT,IAAI+uE,GAAgB31D,EAAYw1D,IAC5BI,GAAS51D,EAAY,GAAGhM,QACxB6hE,GAA0B9B,GAAAzvE,KAC1BwxE,GAAgB/B,GAAAK,MAEhB2B,GAAuB,SAAUhqE,EAAG2W,GACtC,IAAIszD,EAAQH,GAAwB9pE,EAAG2W,GACnCu/B,EAASjmB,GAAejwB,GAC5B,GAAe,OAAXk2C,EAAiB,OAAO+zB,EAC5B,IAAIC,EAAQF,GAAqB9zB,EAAQv/B,GACzC,OAAOuzD,EAAMxxE,OAASuxE,EAAMvxE,OAASkxE,GAAcC,GAAOI,EAAOC,IAAUA,EAAQD,GAKrFjqD,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnC4pD,gBAAiB,SAAyBrxE,GACxC,IAAI8uE,EAAYvqE,UAAU3E,OAAS,OAAIuB,EAAY8vE,GAAc1sE,UAAU,IAC3E,OAAO2sE,GAAqBvwD,GAAS3gB,GAAS8uE,MCrBlD,IAAIwC,GAAyBpC,GAAAnqE,IACzBwsE,GAAgBrC,GAAAK,MAIpBroD,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnC+pD,eAAgB,SAAwB9B,EAAa1vE,GACnD,IAAI8uE,EAAYvqE,UAAU3E,OAAS,OAAIuB,EAAYowE,GAAchtE,UAAU,IAC3E,OAAO+sE,GAAuB5B,EAAa/uD,GAAS3gB,GAAS8uE,MCRjE,IAAI2C,GAA0BvC,GAAAzvE,KAC1BiyE,GAAgBxC,GAAAK,MAIpBroD,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnCkqD,mBAAoB,SAA4B3xE,GAC9C,IAAI8uE,EAAYvqE,UAAU3E,OAAS,OAAIuB,EAAYuwE,GAAcntE,UAAU,IAC3E,OAAOktE,GAAwB9wD,GAAS3gB,GAAS8uE,MCPrD,IAAI8C,GAAyB1C,GAAApqE,IACzB+sE,GAAgB3C,GAAAK,MAEhBuC,GAAsB,SAAU1C,EAAaloE,EAAG2W,GAElD,GADa+zD,GAAuBxC,EAAaloE,EAAG2W,GACxC,OAAO,EACnB,IAAIu/B,EAASjmB,GAAejwB,GAC5B,OAAkB,OAAXk2C,GAAkB00B,GAAoB1C,EAAahyB,EAAQv/B,IAKpEqJ,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnCsqD,YAAa,SAAqBrC,EAAa1vE,GAC7C,IAAI8uE,EAAYvqE,UAAU3E,OAAS,OAAIuB,EAAY0wE,GAActtE,UAAU,IAC3E,OAAOutE,GAAoBpC,EAAa/uD,GAAS3gB,GAAS8uE,MChB9D,IAAIkD,GAAyB9C,GAAApqE,IACzBmtE,GAAgB/C,GAAAK,MAIpBroD,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnCyqD,eAAgB,SAAwBxC,EAAa1vE,GACnD,IAAI8uE,EAAYvqE,UAAU3E,OAAS,OAAIuB,EAAY8wE,GAAc1tE,UAAU,IAC3E,OAAOytE,GAAuBtC,EAAa/uD,GAAS3gB,GAAS8uE,MCRjE,IAAIqD,GAAgBjD,GAAAK,MAChB6C,GAA4BlD,GAAA/kE,IAIhC+c,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnCjF,SAAU,SAAkBktD,EAAaC,GACvC,OAAO,SAAmB3vE,EAAQO,GAChC6xE,GAA0B1C,EAAaC,EAAehvD,GAAS3gB,GAASmyE,GAAc5xE,eCN5F8xE,GAAiB,WAGf,IAFA,IAAIloE,EAAMwW,GAAS7d,MACfwvE,EAAQ30D,GAAUxT,EAAIyhC,KACjB5iC,EAAI,EAAGopB,EAAM7tB,UAAU3E,OAAQoJ,EAAIopB,EAAKppB,IAC/CwR,EAAK83D,EAAOnoE,EAAK5F,UAAUyE,IAE7B,OAAOmB,GCLT+c,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7Do0D,OAAQF,KCDVnrD,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7DsoD,UAAWL,KCIbl/C,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7Dq0D,WAAY,SAAoB3uE,GAC9B,IAAIsG,EAAMwW,GAAS7d,MACf2vE,EAAS,IAAK1sC,GAAmB57B,EAAK+R,EAAW,QAAxC,CAAiD/R,GAC1Do8D,EAAU5oD,GAAU80D,EAAe,QAIvC,OAHArpC,GAAQvlC,GAAU,SAAU5C,GAC1BuZ,EAAK+rD,EAASkM,EAAQxxE,MAEjBwxE,YClBXC,GAAiB,SAAU3iE,GAEzB,OAAOyK,EAAKm4D,IAAItvE,UAAU0T,OAAQhH,ICMpCmX,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7D0P,MAAO,SAAeJ,GACpB,IAAItjB,EAAMwW,GAAS7d,MACfc,EAAW8uE,GAAevoE,GAC1BwjB,EAAgB7B,GAAK2B,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GAC3E,OAAQioC,GAAQxlC,GAAU,SAAU3C,EAAOwX,GACzC,IAAKkV,EAAc1sB,EAAOA,EAAOkJ,GAAM,OAAOsO,MAC7C,CAAE+wB,aAAa,EAAMC,aAAa,IAAQP,WCHjDhiB,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7D/O,OAAQ,SAAgBqe,GACtB,IAAItjB,EAAMwW,GAAS7d,MACfc,EAAW8uE,GAAevoE,GAC1BwjB,EAAgB7B,GAAK2B,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GACvEsxE,EAAS,IAAK1sC,GAAmB57B,EAAK+R,EAAW,SACjDo2D,EAAQ30D,GAAU80D,EAAO7mC,KAI7B,OAHAxC,GAAQxlC,GAAU,SAAU3C,GACtB0sB,EAAc1sB,EAAOA,EAAOkJ,IAAMqQ,EAAK83D,EAAOG,EAAQxxE,KACzD,CAAEuoC,aAAa,IACXipC,KCdXvrD,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7D7U,KAAM,SAAcmkB,GAClB,IAAItjB,EAAMwW,GAAS7d,MACfc,EAAW8uE,GAAevoE,GAC1BwjB,EAAgB7B,GAAK2B,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GAC3E,OAAOioC,GAAQxlC,GAAU,SAAU3C,EAAOwX,GACxC,GAAIkV,EAAc1sB,EAAOA,EAAOkJ,GAAM,OAAOsO,EAAKxX,KACjD,CAAEuoC,aAAa,EAAMC,aAAa,IAAQ1nC,UCZjDmlB,EAAE,CAAElnB,OAAQ,MAAOynB,MAAM,GAAQ,CAC/Bvc,KAAM47D,KCMR5/C,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7Dy0D,aAAc,SAAsB/uE,GAClC,IAAIsG,EAAMwW,GAAS7d,MACf2vE,EAAS,IAAK1sC,GAAmB57B,EAAK+R,EAAW,SACjD22D,EAAWl1D,GAAUxT,EAAIrF,KACzBwtE,EAAQ30D,GAAU80D,EAAO7mC,KAI7B,OAHAxC,GAAQvlC,GAAU,SAAU5C,GACtBuZ,EAAKq4D,EAAU1oE,EAAKlJ,IAAQuZ,EAAK83D,EAAOG,EAAQxxE,MAE/CwxE,KCXXvrD,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7D20D,eAAgB,SAAwBjvE,GACtC,IAAIsG,EAAMwW,GAAS7d,MACf+vE,EAAWl1D,GAAUxT,EAAIrF,KAC7B,OAAQskC,GAAQvlC,GAAU,SAAU5C,EAAOwX,GACzC,IAAmC,IAA/B+B,EAAKq4D,EAAU1oE,EAAKlJ,GAAiB,OAAOwX,MAC/C,CAAEgxB,aAAa,IAAQP,WCH9BhiB,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7D40D,WAAY,SAAoBlvE,GAC9B,IAAID,EAAW2xB,GAAYzyB,MACvBkwE,EAAWryD,GAAS9c,GACpBgvE,EAAWG,EAASluE,IAKxB,OAJKgX,EAAW+2D,KACdG,EAAW,IAAK92D,EAAW,OAAhB,CAAwBrY,GACnCgvE,EAAWl1D,GAAUq1D,EAASluE,OAExBskC,GAAQxlC,GAAU,SAAU3C,EAAOwX,GACzC,IAAwC,IAApC+B,EAAKq4D,EAAUG,EAAU/xE,GAAkB,OAAOwX,MACrD,CAAE+wB,aAAa,EAAMC,aAAa,IAAQP,WCdjDhiB,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7D80D,aAAc,SAAsBpvE,GAClC,IAAIsG,EAAMwW,GAAS7d,MACf+vE,EAAWl1D,GAAUxT,EAAIrF,KAC7B,OAAQskC,GAAQvlC,GAAU,SAAU5C,EAAOwX,GACzC,IAAmC,IAA/B+B,EAAKq4D,EAAU1oE,EAAKlJ,GAAkB,OAAOwX,MAChD,CAAEgxB,aAAa,IAAQP,WCP9B,IAAIgqC,GAAY/3D,EAAY,GAAG4I,MAC3BovD,GAAO,GAAGhtE,KAId+gB,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7D4F,KAAM,SAAc2W,GAClB,IAAIvwB,EAAMwW,GAAS7d,MACfc,EAAW8uE,GAAevoE,GAC1BipE,OAAoBjyE,IAAdu5B,EAA0B,IAAM/R,GAAS+R,GAC/C34B,EAAS,GAEb,OADAqnC,GAAQxlC,EAAUuvE,GAAM,CAAEpnD,KAAMhqB,EAAQynC,aAAa,IAC9C0pC,GAAUnxE,EAAQqxE,MCP7BlsD,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7DxU,IAAK,SAAa8jB,GAChB,IAAItjB,EAAMwW,GAAS7d,MACfc,EAAW8uE,GAAevoE,GAC1BwjB,EAAgB7B,GAAK2B,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GACvEsxE,EAAS,IAAK1sC,GAAmB57B,EAAK+R,EAAW,SACjDo2D,EAAQ30D,GAAU80D,EAAO7mC,KAI7B,OAHAxC,GAAQxlC,GAAU,SAAU3C,GAC1BuZ,EAAK83D,EAAOG,EAAQ9kD,EAAc1sB,EAAOA,EAAOkJ,MAC/C,CAAEq/B,aAAa,IACXipC,KCnBXvrD,EAAE,CAAElnB,OAAQ,MAAOynB,MAAM,GAAQ,CAC/B4T,GAAIqsC,KCGN,IAAI2L,GAAYv5D,EAAA/V,UAIhBmjB,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7Drd,OAAQ,SAAgB2sB,GACtB,IAAItjB,EAAMwW,GAAS7d,MACfc,EAAW8uE,GAAevoE,GAC1By9D,EAAYrjE,UAAU3E,OAAS,EAC/BioE,EAAcD,OAAYzmE,EAAYoD,UAAU,GAUpD,GATAoZ,GAAU8P,GACV2b,GAAQxlC,GAAU,SAAU3C,GACtB2mE,GACFA,GAAY,EACZC,EAAc5mE,GAEd4mE,EAAcp6C,EAAWo6C,EAAa5mE,EAAOA,EAAOkJ,KAErD,CAAEq/B,aAAa,IACdo+B,EAAW,MAAMyL,GAAU,6CAC/B,OAAOxL,KCnBX3gD,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7D3L,KAAM,SAAcib,GAClB,IAAItjB,EAAMwW,GAAS7d,MACfc,EAAW8uE,GAAevoE,GAC1BwjB,EAAgB7B,GAAK2B,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GAC3E,OAAOioC,GAAQxlC,GAAU,SAAU3C,EAAOwX,GACxC,GAAIkV,EAAc1sB,EAAOA,EAAOkJ,GAAM,OAAOsO,MAC5C,CAAE+wB,aAAa,EAAMC,aAAa,IAAQP,WCLjDhiB,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7Dm1D,oBAAqB,SAA6BzvE,GAChD,IAAIsG,EAAMwW,GAAS7d,MACf2vE,EAAS,IAAK1sC,GAAmB57B,EAAK+R,EAAW,QAAxC,CAAiD/R,GAC1Do8D,EAAU5oD,GAAU80D,EAAe,QACnCH,EAAQ30D,GAAU80D,EAAO7mC,KAI7B,OAHAxC,GAAQvlC,GAAU,SAAU5C,GAC1BuZ,EAAK+rD,EAASkM,EAAQxxE,IAAUuZ,EAAK83D,EAAOG,EAAQxxE,MAE/CwxE,KCVXvrD,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CAC7Do1D,MAAO,SAAe1vE,GACpB,IAAIsG,EAAMwW,GAAS7d,MACf2vE,EAAS,IAAK1sC,GAAmB57B,EAAK+R,EAAW,QAAxC,CAAiD/R,GAE9D,OADAi/B,GAAQvlC,EAAU8Z,GAAU80D,EAAO7mC,KAAM,CAAE7f,KAAM0mD,IAC1CA,YCdPpnB,GAAA7yC,OAMAg7D,GAASt5D,GAAM,WACjB,MAAmB,OAAZ,KAAGu5D,IAAM,MAKfvsD,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQ6rD,IAAU,CACnDC,GAAI,SAAY7uD,GACd,IAAIqhB,EAAItd,GAAS/M,EAAuB9Y,OACpCsvB,EAAM6T,EAAErmC,OACR8zE,EAAgBrvD,GAAoBO,GACpC5b,EAAI0qE,GAAiB,EAAIA,EAAgBthD,EAAMshD,EACnD,OAAQ1qE,EAAI,GAAKA,GAAKopB,OAAOjxB,EAASwyE,GAAU1tC,EAAGj9B,MCZ1D,IAAI4qE,GAASvoB,GAAAC,OACTuoB,GAASxoB,GAAA7yC,OACTs7D,GAAkB,kBAClBC,GAAmBpxD,GAAAxY,IACnB6pE,GAAmBrxD,GAAAE,UAA8BixD,IAGjDG,GAAkBp8C,IAA0B,SAAwBjR,GACtEmtD,GAAiBjxE,KAAM,CACrBH,KAAMmxE,GACNltD,OAAQA,EACRhC,MAAO,MAER,UAAU,WACX,IAGIwoC,EAHA93C,EAAQ0+D,GAAiBlxE,MACzB8jB,EAAStR,EAAMsR,OACfhC,EAAQtP,EAAMsP,MAElB,OAAIA,GAASgC,EAAOhnB,OAAe,CAAEqB,WAAOE,EAAWsB,MAAM,IAC7D2qD,EAAQymB,GAAOjtD,EAAQhC,GACvBtP,EAAMsP,OAASwoC,EAAMxtD,OACd,CAAEqB,MAAO,CAAEizE,UAAWN,GAAOxmB,EAAO,GAAIhC,SAAUxmC,GAASniB,MAAM,OAK1EykB,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,GAAQ,CACnCmtE,WAAY,WACV,OAAO,IAAIF,GAAgBtrD,GAAS/M,EAAuB9Y,WCX/D,IAAIsxE,GAAYz0D,GAAgB,YAC5B00D,GAAgB,gBAChBC,GAAyBD,yBACzBE,GAAmB5xD,GAAAxY,IACnBqqE,GAAmB7xD,GAAAE,UAA8ByxD,IACjDG,GAAkB/iC,OAAOruC,UACzBqxE,GAAY56D,EAAA/V,UACZ4wE,GAAWx5D,EAAYkqC,IACvBuvB,GAAgBz5D,EAAY,GAAGhT,SAC/B0sE,GAAc15D,EAAY,GAAG25D,UAE7BC,KAAgCF,KAAgB36D,GAAM,WACxD26D,GAAY,IAAG,QAGbG,GAAwBn9C,IAA0B,SAA8Bg0B,EAAQjlC,EAAQquD,EAASrmB,GAC3G2lB,GAAiBzxE,KAAM,CACrBH,KAAM2xE,GACNzoB,OAAQA,EACRjlC,OAAQA,EACRW,OAAQ0tD,EACRxvB,QAASmJ,EACTnsD,MAAM,MAEP4xE,IAAe,WAChB,IAAI/+D,EAAQk/D,GAAiB1xE,MAC7B,GAAIwS,EAAM7S,KAAM,MAAO,CAAExB,WAAOE,EAAWsB,MAAM,GACjD,IAAIkoD,EAAIr1C,EAAMu2C,OACV5lB,EAAI3wB,EAAMsR,OACV/U,EAAQy8C,GAAW3D,EAAG1kB,GAC1B,OAAc,OAAVp0B,EAAuB,CAAE5Q,WAAOE,EAAWsB,KAAM6S,EAAM7S,MAAO,GAC9D6S,EAAMiS,QACmB,KAAvBoB,GAAS9W,EAAM,MAAY84C,EAAE7E,UAAYqI,GAAmBloB,EAAGlhB,GAAS4lC,EAAE7E,WAAYxwC,EAAMmwC,UACzF,CAAExkD,MAAO4Q,EAAOpP,MAAM,KAE/B6S,EAAM7S,MAAO,EACN,CAAExB,MAAO4Q,EAAOpP,MAAM,OAG3ByyE,GAAY,SAAUtuD,GACxB,IAEIkG,EAAGqoD,EAAY7uB,EAAOoI,EAASumB,EAASrmB,EAFxCjE,EAAIhqC,GAAS7d,MACbmjC,EAAItd,GAAS/B,GAYjB,OAVAkG,EAAIiZ,GAAmB4kB,EAAGjZ,aAEPvwC,KADnBg0E,EAAaxqB,EAAErE,QACiBlqC,EAAcq4D,GAAiB9pB,MAAQ,UAAW8pB,MAChFU,EAAaR,GAAShqB,IAExBrE,OAAuBnlD,IAAfg0E,EAA2B,GAAKxsD,GAASwsD,GACjDzmB,EAAU,IAAI5hC,EAAEA,IAAM4kB,OAASiZ,EAAEx+C,OAASw+C,EAAGrE,GAC7C2uB,KAAaL,GAActuB,EAAO,KAClCsI,KAAiBgmB,GAActuB,EAAO,KACtCoI,EAAQ5I,UAAY/gC,GAAS4lC,EAAE7E,WACxB,IAAIkvB,GAAsBtmB,EAASzoB,EAAGgvC,EAASrmB,IAKxD1nC,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,EAAM2gB,OAAQotD,IAA+B,CACxED,SAAU,SAAkBjpB,GAC1B,IACIvF,EAAOrgB,EAAGyoB,EADVxnD,EAAI0U,EAAuB9Y,MAE/B,GAAc,MAAV+oD,EAAgB,CAClB,GAAI1G,GAAS0G,KACXvF,EAAQ39B,GAAS/M,EAAuB,UAAW64D,GAC/C5oB,EAAOvF,MACPquB,GAAS9oB,OAEP+oB,GAActuB,EAAO,MAAM,MAAMouB,GAAU,iDAEnD,GAAIK,GAA6B,OAAOF,GAAY3tE,EAAG2kD,GAGvD,GAFA6C,EAAU9wC,GAAUiuC,EAAQuoB,IAEf,OAAO55D,EAAKk0C,EAAS7C,EAAQ3kD,QACrC,GAAI6tE,GAA6B,OAAOF,GAAY3tE,EAAG2kD,GAG9D,OAFA5lB,EAAItd,GAASzhB,GACR,IAAIwqC,OAAOma,EAAQ,KACqBuoB,IAAWnuC,MAIjDmuC,MAAaK,IAAmBhxD,GAASgxD,GAAiBL,GAAWc,IC3FhF,IAAIE,GAAUz1D,GAAgB,WAC1B01D,GAAkB3jC,OAAOruC,UACzBiyE,GAAYx7D,EAAA/V,UACZwxE,GAAWp6D,EAAYkqC,IACvBmwB,GAAUr6D,EAAY,GAAGhT,SAEzBstE,IADUt6D,EAAY,GAAGzJ,SACXyJ,EAAY,GAAGva,QAC7B80E,GAAM77D,KAAK2K,IAEXmxD,GAAgB,SAAU/uD,EAAQwrC,EAAa/sC,GACjD,OAAIA,EAAYuB,EAAOhnB,QAAe,EAClB,KAAhBwyD,EAA2B/sC,EACxBmwD,GAAQ5uD,EAAQwrC,EAAa/sC,IAKtC6B,EAAE,CAAElnB,OAAQ,SAAUgH,OAAO,GAAQ,CACnC4uE,WAAY,SAAoBxjB,EAAaC,GAC3C,IACgB/L,EAAO71B,EAAU7J,EAAQ2lC,EAAc+F,EAAmBujB,EAAcC,EAAW9kB,EAD/F9pD,EAAI0U,EAAuB9Y,MAE3BsoD,EAAW,EACX2qB,EAAiB,EACjBh0E,EAAS,GACb,GAAmB,MAAfqwD,EAAqB,CAEvB,GADajN,GAASiN,KAEpB9L,EAAQ39B,GAAS/M,EAAuB,UAAWy5D,GAC/CjjB,EAAY9L,MACZivB,GAASnjB,OAEPojB,GAAQlvB,EAAO,MAAM,MAAMgvB,GAAU,mDAG7C,GADA7kD,EAAW7S,GAAUw0C,EAAagjB,IAEhC,OAAO56D,EAAKiW,EAAU2hC,EAAalrD,EAAGmrD,OAK1CzrC,EAAS+B,GAASzhB,GAClBqlD,EAAe5jC,GAASypC,IACxBE,EAAoBx2C,EAAWu2C,MACPA,EAAe1pC,GAAS0pC,IAChDwjB,EAAetpB,EAAa3sD,OAC5Bk2E,EAAYJ,GAAI,EAAGG,GACnBzqB,EAAWuqB,GAAc/uD,EAAQ2lC,EAAc,IAC3B,IAAbnB,GACL4F,EAAcsB,EACV3pC,GAAS0pC,EAAa9F,EAAcnB,EAAUxkC,IAC9CgqC,GAAgBrE,EAAc3lC,EAAQwkC,EAAU,QAAIjqD,EAAWkxD,GACnEtwD,GAAU0zE,GAAY7uD,EAAQmvD,EAAgB3qB,GAAY4F,EAC1D+kB,EAAiB3qB,EAAWyqB,EAC5BzqB,EAAWuqB,GAAc/uD,EAAQ2lC,EAAcnB,EAAW0qB,GAK5D,OAHIC,EAAiBnvD,EAAOhnB,SAC1BmC,GAAU0zE,GAAY7uD,EAAQmvD,IAEzBh0E,KCrEXupB,GAAsB,WCAtBA,GAAsB,cCCtBA,GAAsB,gBCEtBpE,EAAE,CAAElnB,OAAQ,UAAWgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CACjEsoD,UAAWL,KCHbl/C,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnCvc,KAAM47D,KCDR5/C,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnC4T,GAAIqsC,KCCNxgD,EAAE,CAAElnB,OAAQ,UAAWgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CACjEo0D,OAAQF,KCDVnrD,EAAE,CAAElnB,OAAQ,UAAWgH,OAAO,EAAM67C,MAAM,EAAMl7B,OAAQxJ,IAAW,CACjEsoD,UAAWL,KCHbl/C,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnCvc,KAAM47D,KCDR5/C,EAAE,CAAElnB,OAAQ,UAAWynB,MAAM,GAAQ,CACnC4T,GAAIqsC,YCJNsO,GAAiB,CACfC,YAAa,EACbC,oBAAqB,EACrBC,aAAc,EACdC,eAAgB,EAChBC,YAAa,EACbC,cAAe,EACfC,aAAc,EACdC,qBAAsB,EACtBC,SAAU,EACVC,kBAAmB,EACnBC,eAAgB,EAChBC,gBAAiB,EACjBC,kBAAmB,EACnBC,UAAW,EACXC,cAAe,EACfC,aAAc,EACdC,SAAU,EACVC,iBAAkB,EAClBC,OAAQ,EACRC,YAAa,EACbC,cAAe,EACfC,cAAe,EACfC,eAAgB,EAChBC,aAAc,EACdC,cAAe,EACfC,iBAAkB,EAClBC,iBAAkB,EAClBC,eAAgB,EAChBC,iBAAkB,EAClBC,cAAe,EACfC,UAAW,UC9BTC,GAAY53D,GAAsB,QAAQ63D,UAC1CC,GAAwBF,IAAaA,GAAUnuE,aAAemuE,GAAUnuE,YAAYxG,UAExF80E,GAAiBD,KAA0Bx4E,OAAO2D,eAAYlC,EAAY+2E,aCLtEtqD,GAAAttB,QAGA83E,GAAgB3hD,GAAoB,WAIxC4hD,GAAkBD,GAGd,GAAG93E,QAH2B,SAAiBmtB,GACjD,OAAM6qD,GAAUx1E,KAAM2qB,EAAYlpB,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,ICH1E,IAAIo3E,GAAkB,SAAUC,GAE9B,GAAIA,GAAuBA,EAAoBl4E,UAAY+3E,GAAS,IAClEj3D,GAA4Bo3D,EAAqB,UAAWH,IAC5D,MAAOj0E,GACPo0E,EAAoBl4E,QAAU+3E,KAIlC,IAAK,IAAII,MAAmBzC,GACtBA,GAAayC,KACfF,GAAgBz+D,EAAO2+D,KAAoB3+D,EAAO2+D,IAAiBp1E,WAIvEk1E,GAAgBJ,ICdhB,IAAIO,GAAW/4D,GAAgB,YAC3Bg5D,GAAgBh5D,GAAgB,eAChCi5D,GAAcz+C,GAAqBpjB,OAEnC8hE,GAAkB,SAAUL,EAAqBM,GACnD,GAAIN,EAAqB,CAEvB,GAAIA,EAAoBE,MAAcE,GAAa,IACjDx3D,GAA4Bo3D,EAAqBE,GAAUE,IAC3D,MAAOx0E,GACPo0E,EAAoBE,IAAYE,GAKlC,GAHKJ,EAAoBG,KACvBv3D,GAA4Bo3D,EAAqBG,GAAeG,GAE9D9C,GAAa8C,GAAkB,IAAK,IAAIrnD,KAAe0I,GAEzD,GAAIq+C,EAAoB/mD,KAAiB0I,GAAqB1I,GAAc,IAC1ErQ,GAA4Bo3D,EAAqB/mD,EAAa0I,GAAqB1I,IACnF,MAAOrtB,GACPo0E,EAAoB/mD,GAAe0I,GAAqB1I,MAMhE,IAAK,IAAIsnD,MAAmB/C,GAC1B6C,GAAgB/+D,EAAOi/D,KAAoBj/D,EAAOi/D,IAAiB11E,UAAW01E,IAGhFF,GAAgBV,GAAuB,gBCjCvC,IAAIa,IAAUl/D,EAAAkgC,eAAwBlgC,EAAAogC,eAGtChzB,EAAE,CAAEK,QAAQ,EAAMlhB,MAAM,EAAM7F,YAAY,EAAMmnB,OAAQqxD,IAAU,CAGhEh/B,aAAc+B,GAAA5xC,IAGd+vC,eAAgB6B,GAAAhR,QCRlB,IAAIkuC,GAAUn/D,EAAA4C,QAIdwK,EAAE,CAAEK,QAAQ,EAAM/mB,YAAY,EAAMqjB,aAAa,GAAQ,CACvDq1D,eAAgB,SAAwB70E,GACtC,IAAI4lB,EAAS0R,IAAWs9C,GAAQhvD,OAChC0zB,GAAU1zB,EAASA,EAAO5jB,KAAKhC,GAAMA,aCRrC80E,GAAWx5D,GAAgB,YAE/By5D,IAAkBl/D,GAAM,WAEtB,IAAIzI,EAAM,IAAI4nE,IAAI,gBAAiB,YAC/BC,EAAe7nE,EAAI6nE,aACnBv3E,EAAS,GAMb,OALA0P,EAAI8nE,SAAW,QACfD,EAAah5E,SAAQ,SAAUW,EAAOV,GACpC+4E,EAAqB,OAAE,KACvBv3E,GAAUxB,EAAMU,MAGZq4E,EAAa77C,MACD,2BAAbhsB,EAAI+nE,MACsB,MAA1BF,EAAav0E,IAAI,MACuB,QAAxC4F,OAAO,IAAI8uE,gBAAgB,WAC1BH,EAAaH,KAEsB,MAApC,IAAIE,IAAI,eAAeK,UACsC,MAA7D,IAAID,gBAAgB,IAAIA,gBAAgB,QAAQ10E,IAAI,MAErB,eAA/B,IAAIs0E,IAAI,eAAah+B,MAEK,YAFsB,IAE5Cg+B,IAAA,cAAgBM,MAEd,SAFkC53E,GAIL,MAFlB,IAAAs3E,IAEd,gBAAel4E,GAAEk6C,kBCvBvBzyB,MAOAyiC,GAAAC,OCXAsuB,GAAS,WASTC,GAAa,eACbC,GAAe,yBACfC,GAAiB,kDAGjBC,GAAalgE,EAAAimB,WACbk6C,GAAO9+D,EAAY2+D,GAAgB3/D,MACnC+/D,GAAQrgE,KAAKuK,MACb+1D,GAAexvE,OAAOszB,aACtBm8C,GAAaj/D,EAAY,GAAGm3B,YAC5B+nC,GAAOl/D,EAAY,GAAG4I,MACtBu2D,GAAOn/D,EAAY,GAAGhV,MACtBo0E,GAAUp/D,EAAY,GAAGzJ,SACzB8oE,GAAQr/D,EAAY,GAAGM,OACvBg/D,GAAct/D,EAAY,GAAG0L,aAoC7B6zD,GAAe,SAAUC,GAG3B,OAAOA,EAAQ,GAAK,IAAMA,EAAQ,KAOhCC,GAAQ,SAAUC,EAAOC,EAAWC,GACtC,IAAI/xE,EAAI,MACR6xE,EAAQE,EAAYb,GAAMW,EAlEjB,KAkEiCA,GAAS,EACnDA,GAASX,GAAMW,EAAQC,GAChBD,EAAQG,KACbH,EAAQX,GAAMW,EA9DEI,IA+DhBjyE,GA1EO,GA4ET,OAAOkxE,GAAMlxE,EAAC,GAAyB6xE,GAASA,EAzEvC,MAgFPK,GAAS,SAAU7vE,GACrB,IAAIyoD,EAAS,GAGbzoD,EAxDe,SAAUub,OACzB,IAAIktC,EAAS,GACTtR,EAAU,EACV5iD,EAASgnB,EAAOhnB,OACb4iD,EAAU5iD,GAAQ,CACvB,IAAIqB,EAAQm5E,GAAWxzD,EAAQ47B,KAC/B,GAAIvhD,GAAS,OAAUA,GAAS,OAAUuhD,EAAU5iD,EAAQ,CAE1D,IAAIu7E,EAAQf,GAAWxzD,EAAQ47B,KACP,QAAX,MAAR24B,GACHb,GAAKxmB,IAAkB,KAAR7yD,IAAkB,KAAe,KAARk6E,GAAiB,QAIzDb,GAAKxmB,EAAQ7yD,GACbuhD,UAGF83B,GAAKxmB,EAAQ7yD,GAGjB,OAAO6yD,EAmCCsnB,CAAW/vE,GAGnB,IAMI1L,EAAG07E,EANHC,EAAcjwE,EAAMzL,OAGpBmrB,EAvFS,IAwFT8vD,EAAQ,EACRU,EA1FY,GA8FhB,IAAK57E,EAAI,EAAGA,EAAI0L,EAAMzL,OAAQD,KAC5B07E,EAAehwE,EAAM1L,IACF,KACjB26E,GAAKxmB,EAAQqmB,GAAakB,IAI9B,IAAIG,EAAc1nB,EAAOl0D,OACrB67E,EAAiBD,MAGjBA,GACFlB,GAAKxmB,EAxGO,KA4GP2nB,EAAiBH,GAAa,CAEnC,IAAIpqB,EAAI0oB,GACR,IAAKj6E,EAAI,EAAGA,EAAI0L,EAAMzL,OAAQD,KAC5B07E,EAAehwE,EAAM1L,KACDorB,GAAKswD,EAAenqB,IACtCA,EAAImqB,GAKR,IAAIK,EAAwBD,EAAiB,EAC7C,GAAIvqB,EAAInmC,EAAImvD,IAAON,GAASiB,GAASa,GACnC,MAAM1B,GAAWD,IAMnB,IAHAc,IAAU3pB,EAAInmC,GAAK2wD,EACnB3wD,EAAImmC,EAECvxD,EAAI,EAAGA,EAAI0L,EAAMzL,OAAQD,IAAK,CAEjC,IADA07E,EAAehwE,EAAM1L,IACForB,KAAO8vD,EAAQjB,GAChC,MAAMI,GAAWD,IAEnB,GAAIsB,GAAgBtwD,EAAG,KAErB,IAAIopC,EAAI0mB,EACJ7xE,EA9ID,KA+IU,CACX,IAAIulC,EAAIvlC,GAAKuyE,EA/IZ,EA+I2BvyE,GAAKuyE,EA9IhC,GAAA,GA8IqDvyE,EAAIuyE,EAC1D,GAAIpnB,EAAI5lB,EAAG,MACX,IAAIotC,EAAUxnB,EAAI5lB,EACdqtC,EAnJH,GAmJuBrtC,EACxB+rC,GAAKxmB,EAAQqmB,GAAaO,GAAansC,EAAIotC,EAAUC,KACrDznB,EAAI+lB,GAAMyB,EAAUC,GACpB5yE,GAtJC,GAyJHsxE,GAAKxmB,EAAQqmB,GAAaO,GAAavmB,KACvConB,EAAOX,GAAMC,EAAOa,EAAuBD,GAAkBD,GAC7DX,EAAQ,EACRY,KAIJZ,IACA9vD,IAEF,OAAOsvD,GAAKvmB,EAAQ,KAGtB+nB,GAAiB,SAAUxwE,GACzB,IAEI1L,EAAGm8E,EAFHC,EAAU,GACVC,EAASxB,GAAMD,GAAQE,GAAYpvE,GAAQyuE,GAAiB,KAAW,KAE3E,IAAKn6E,EAAI,EAAGA,EAAIq8E,EAAOp8E,OAAQD,IAC7Bm8E,EAAQE,EAAOr8E,GACf26E,GAAKyB,EAAS9B,GAAKJ,GAAeiC,GAAS,OAASZ,GAAOY,GAASA,GAEtE,OAAOzB,GAAK0B,EAAS,gBClLnBE,GAAYniE,EAAA/V,UAEhBm4E,GAAiB,SAAUC,EAAQC,GACjC,GAAID,EAASC,EAAU,MAAMH,GAAU,wBACvC,OAAOE,GCwBT,IAAIE,GAAW18D,GAAgB,YAC3B28D,GAAoB,kBACpBC,GAA6BD,0BAC7BE,GAAmB75D,GAAAxY,IACnBsyE,GAAyB95D,GAAAE,UAA8By5D,IACvDI,GAA2B/5D,GAAAE,UAA8B05D,IAEzDI,GAAUzgE,EAAW,SACrB0gE,GAAY1gE,EAAW,WACvB2gE,GAAU3gE,EAAW,WACrB4gE,GAAmBF,IAAaA,GAAUv5E,UAC1C05E,GAAmBF,IAAWA,GAAQx5E,UACtC25E,GAASljE,EAAA43B,OACTurC,GAAYnjE,EAAA/V,UACZm5E,GAAqBpjE,EAAAqjE,mBACrBC,GAAqBtjE,EAAAujE,mBACrBC,GAASniE,EAAY,GAAG3C,QACxB+kE,GAAOpiE,EAAY,GAAG4I,MACtBy5D,GAAOriE,EAAY,GAAGhV,MACtBs3E,GAAUtiE,EAAY,GAAGzJ,SACzBgsE,GAAQviE,EAAY,GAAGwiE,OACvBC,GAASziE,EAAY,GAAGjT,QACxB21E,GAAQ1iE,EAAY,GAAGM,OACvBqiE,GAAc3iE,EAAY,GAAGva,OAE7Bm9E,GAAI,MACJC,GAAY38E,MAAM,GAElB48E,GAAkB,SAAUn9C,GAC9B,OAAOk9C,GAAUl9C,EAAQ,KAAOk9C,GAAUl9C,EAAQ,GAAKk8C,GAAO,qBAAuBl8C,EAAQ,KAAM,QAGjGo9C,GAAgB,SAAUC,GAC5B,IACE,OAAOjB,GAAmBiB,GAC1B,MAAO/5E,GACP,OAAO+5E,IAIPC,GAAc,SAAUruE,GAC1B,IAAIhO,EAAS07E,GAAQ1tE,EAAIguE,GAAM,KAC3Bj9C,EAAQ,EACZ,IACE,OAAOo8C,GAAmBn7E,GAC1B,MAAOqC,QACA08B,GACL/+B,EAAS07E,GAAQ17E,EAAQk8E,GAAgBn9C,KAAUo9C,IAErD,OAAOn8E,IAIPs8E,GAAI,eAEJC,GAAe,CACjB,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,MAAO,KAGLC,GAAW,SAAU1sE,GACvB,OAAOysE,GAAazsE,IAGlB2sE,GAAY,SAAUzuE,GACxB,OAAO0tE,GAAQL,GAAmBrtE,GAAKsuE,GAAME,KAG3CE,GAA0B5mD,IAA0B,SAAkB6mD,EAAQv3E,GAChFq1E,GAAiB15E,KAAM,CACrBH,KAAM45E,GACN34E,SAAU2xB,GAAYknD,GAAuBiC,GAAQ3kD,SACrD5yB,KAAMA,MAEP,YAAY,WACb,IAAImO,EAAQonE,GAAyB55E,MACjCqE,EAAOmO,EAAMnO,KACb4uB,EAAOzgB,EAAM1R,SAASf,OACtByT,EAAQyf,EAAK90B,MAGf,OAFG80B,EAAKtzB,OACRszB,EAAK90B,MAAiB,SAATkG,EAAkBmP,EAAM/V,IAAe,WAAT4G,EAAoBmP,EAAMrV,MAAQ,CAACqV,EAAM/V,IAAK+V,EAAMrV,QACxF80B,KACR,GAEC4oD,GAAuB,SAAU1yC,GACnCnpC,KAAKi3B,QAAU,GACfj3B,KAAK2O,IAAM,UAEEtQ,IAAT8qC,IACEjwB,EAASiwB,GAAOnpC,KAAK87E,YAAY3yC,GAChCnpC,KAAK+7E,WAA0B,iBAAR5yC,EAAuC,MAApBqxC,GAAOrxC,EAAM,GAAa6xC,GAAY7xC,EAAM,GAAKA,EAAOtjB,GAAUsjB,MAIrH0yC,GAAqBt7E,UAAY,CAC/BV,KAAM25E,GACNwC,QAAS,SAAUrtE,GACjB3O,KAAK2O,IAAMA,EACX3O,KAAKilE,UAEP6W,YAAa,SAAUjyE,GACrB,IACI/I,EAAUf,EAAMkzB,EAAMgpD,EAAeC,EAAWv4C,EAAO0kB,EADvDn0C,EAAiBqe,GAAkB1oB,GAGvC,GAAIqK,MAEFnU,GADAe,EAAW2xB,GAAY5oB,EAAQqK,IACfnU,OACPkzB,EAAOvb,EAAK3X,EAAMe,IAAWnB,MAAM,CAG1C,GADAu8E,GADAD,EAAgBxpD,GAAY5U,GAASoV,EAAK90B,SAChB4B,MAEvB4jC,EAAQjsB,EAAKwkE,EAAWD,IAAgBt8E,OACxC0oD,EAAS3wC,EAAKwkE,EAAWD,IAAgBt8E,OACzC+X,EAAKwkE,EAAWD,GAAet8E,KAChC,MAAMw6E,GAAU,mCAClBO,GAAK16E,KAAKi3B,QAAS,CAAEx5B,IAAKooB,GAAU8d,EAAMxlC,OAAQA,MAAO0nB,GAAUwiC,EAAOlqD,cAEvE,IAAK,IAAIV,KAAOoM,EAAYqS,GAAOrS,EAAQpM,IAChDi9E,GAAK16E,KAAKi3B,QAAS,CAAEx5B,IAAKA,EAAKU,MAAO0nB,GAAUhc,EAAOpM,OAG3Ds+E,WAAY,SAAUI,GACpB,GAAIA,MACF,IAEItpB,EAAWr/C,EAFXkuC,EAAaq5B,GAAMoB,EAAO,KAC1Br6D,EAAQ,EAELA,EAAQ4/B,EAAW5kD,SACxB+1D,EAAYnR,EAAW5/B,MACThlB,SACZ0W,EAAQunE,GAAMloB,EAAW,KACzB6nB,GAAK16E,KAAKi3B,QAAS,CACjBx5B,IAAK69E,GAAYV,GAAMpnE,IACvBrV,MAAOm9E,GAAYb,GAAKjnE,EAAO,UAMzC4oE,UAAW,eACT,IAGI5oE,EAHAyjB,EAAUj3B,KAAKi3B,QACfh4B,EAAS,GACT6iB,EAAQ,EAELA,EAAQmV,EAAQn6B,QACrB0W,EAAQyjB,EAAQnV,KAChB44D,GAAKz7E,EAAQy8E,GAAUloE,EAAM/V,KAAO,IAAMi+E,GAAUloE,EAAMrV,QAC1D,OAAOs8E,GAAKx7E,EAAQ,MAExBgmE,OAAQ,WACNjlE,KAAKi3B,QAAQn6B,OAAS,EACtBkD,KAAK+7E,WAAW/7E,KAAK2O,IAAIwtE,QAE3BE,UAAW,WACLr8E,KAAK2O,KAAK3O,KAAK2O,IAAIs2D,WAM3B,IAAIqX,GAA6B,WAC/Bx/C,GAAW98B,KAAMu8E,IACjB,IAAIpzC,EAAO1nC,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,EACjDq7E,GAAiB15E,KAAM,IAAI67E,GAAqB1yC,KAG9CozC,GAA2BD,GAA2B/7E,UAwI1D,GAtIAq8B,GAAY2/C,GAA0B,CAGpCC,OAAQ,SAAgB36E,EAAM1D,GAC5Bi7E,GAAwB33E,UAAU3E,OAAQ,GAC1C,IAAI0V,EAAQmnE,GAAuB35E,MACnC06E,GAAKloE,EAAMykB,QAAS,CAAEx5B,IAAKooB,GAAUhkB,GAAO1D,MAAO0nB,GAAU1nB,KAC7DqU,EAAM6pE,aAIRxzC,OAAU,SAAUhnC,GAClBu3E,GAAwB33E,UAAU3E,OAAQ,OAC1C,IAAI0V,EAAQmnE,GAAuB35E,MAC/Bi3B,EAAUzkB,EAAMykB,QAChBx5B,EAAMooB,GAAUhkB,GAChBigB,EAAQ,EACLA,EAAQmV,EAAQn6B,QACjBm6B,EAAQnV,GAAOrkB,MAAQA,EAAKq9E,GAAO7jD,EAASnV,EAAO,GAClDA,IAEPtP,EAAM6pE,aAIRp6E,IAAK,SAAaJ,GAChBu3E,GAAwB33E,UAAU3E,OAAQ,GAI1C,IAHA,IAAIm6B,EAAU0iD,GAAuB35E,MAAMi3B,QACvCx5B,EAAMooB,GAAUhkB,GAChBigB,EAAQ,EACLA,EAAQmV,EAAQn6B,OAAQglB,IAC7B,GAAImV,EAAQnV,GAAOrkB,MAAQA,EAAK,OAAOw5B,EAAQnV,GAAO3jB,MAExD,OAAO,MAITs+E,OAAQ,SAAgB56E,GACtBu3E,GAAwB33E,UAAU3E,OAAQ,GAK1C,IAJA,IAAIm6B,EAAU0iD,GAAuB35E,MAAMi3B,QACvCx5B,EAAMooB,GAAUhkB,GAChB5C,EAAS,GACT6iB,EAAQ,EACLA,EAAQmV,EAAQn6B,OAAQglB,IACzBmV,EAAQnV,GAAOrkB,MAAQA,GAAKi9E,GAAKz7E,EAAQg4B,EAAQnV,GAAO3jB,OAE9D,OAAOc,GAIT+C,IAAK,SAAaH,GAChBu3E,GAAwB33E,UAAU3E,OAAQ,OAC1C,IAAIm6B,EAAU0iD,GAAuB35E,MAAMi3B,QACvCx5B,EAAMooB,GAAUhkB,GAChBigB,EAAQ,EACLA,EAAQmV,EAAQn6B,QACrB,GAAIm6B,EAAQnV,KAASrkB,MAAQA,EAAK,OAAO,EAE3C,OAAO,GAIT4J,IAAK,SAAaxF,EAAM1D,GACtBi7E,GAAwB33E,UAAU3E,OAAQ,GAQ1C,IAPA,IAMI0W,EANAhB,EAAQmnE,GAAuB35E,MAC/Bi3B,EAAUzkB,EAAMykB,QAChBylD,GAAQ,EACRj/E,EAAMooB,GAAUhkB,GAChBuZ,EAAMyK,GAAU1nB,GAChB2jB,EAAQ,EAELA,EAAQmV,EAAQn6B,OAAQglB,KAC7BtO,EAAQyjB,EAAQnV,IACNrkB,MAAQA,IACZi/E,EAAO5B,GAAO7jD,EAASnV,IAAS,IAElC46D,GAAQ,EACRlpE,EAAMrV,MAAQid,IAIfshE,GAAOhC,GAAKzjD,EAAS,CAAEx5B,IAAKA,EAAKU,MAAOid,IAC7C5I,EAAM6pE,aAIR1hD,KAAM,WACJ,IAAInoB,EAAQmnE,GAAuB35E,MACnCm6B,GAAU3nB,EAAMykB,SAAS,SAAU7zB,EAAGi4B,GACpC,OAAOj4B,EAAE3F,IAAM49B,EAAE59B,IAAM,GAAI,KAE7B+U,EAAM6pE,aAGR7+E,QAAS,SAAiB0nE,OACxB,IAGI1xD,EAHAyjB,EAAU0iD,GAAuB35E,MAAMi3B,QACvCpM,EAAgB7B,GAAKk8C,EAAUzjE,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,GACrEyjB,EAAQ,EAELA,EAAQmV,EAAQn6B,QAErB+tB,GADArX,EAAQyjB,EAAQnV,MACI3jB,MAAOqV,EAAM/V,IAAKuC,OAI1CrD,KAAM,WACJ,OAAO,IAAIg/E,GAAwB37E,KAAM,SAG3CiU,OAAQ,WACN,OAAO,IAAI0nE,GAAwB37E,KAAM,WAG3Ci3B,QAAS,WACP,OAAO,IAAI0kD,GAAwB37E,KAAM,aAE1C,CAAEtC,YAAY,IAGjBijB,GAAS47D,GAA0BhD,GAAUgD,GAAyBtlD,QAAS,CAAEp1B,KAAM,YAIvF8e,GAAS47D,GAA0B,YAAY,WAC7C,OAAO5C,GAAuB35E,MAAMo8E,cACnC,CAAE1+E,YAAY,IAEjBkrB,GAAe0zD,GAA4B9C,IAE3Cp1D,EAAE,CAAEK,QAAQ,EAAMI,QAASyxD,IAAkB,CAC3CK,gBAAiB2F,MAIdhG,IAAkBt9D,EAAW+gE,IAAU,CAC1C,IAAI4C,GAAatkE,EAAY4hE,GAAiBj4E,KAC1C46E,GAAavkE,EAAY4hE,GAAiB5yE,KAE1Cw1E,GAAqB,SAAU1zC,GACjC,GAAIjwB,EAASiwB,GAAO,CAClB,IACI2zC,EADAC,EAAO5zC,EAAK4zC,KAEhB,GAAIv3D,GAAQu3D,KAAUvD,GAKpB,OAJAsD,EAAU3zC,EAAK2zC,QAAU,IAAI/C,GAAQ5wC,EAAK2zC,SAAW,IAAI/C,GACpD4C,GAAWG,EAAS,iBACvBF,GAAWE,EAAS,eAAgB,mDAE/Bt1D,GAAO2hB,EAAM,CAClB4zC,KAAMhlE,EAAyB,EAAG8N,GAAUk3D,IAC5CD,QAAS/kE,EAAyB,EAAG+kE,KAGzC,OAAO3zC,GAWX,GARInwB,EAAW6gE,KACbz1D,EAAE,CAAEK,QAAQ,EAAM/mB,YAAY,EAAMmnB,QAAQ,GAAQ,CAClDm4D,MAAO,SAAez0E,GACpB,OAAOsxE,GAAQtxE,EAAO9G,UAAU3E,OAAS,EAAI+/E,GAAmBp7E,UAAU,IAAM,OAKlFuX,EAAW8gE,IAAY,CACzB,IAAImD,GAAqB,SAAiB10E,GAExC,OADAu0B,GAAW98B,KAAMg6E,IACV,IAAIF,GAAUvxE,EAAO9G,UAAU3E,OAAS,EAAI+/E,GAAmBp7E,UAAU,IAAM,KAGxFu4E,GAAiBjzE,YAAck2E,GAC/BA,GAAmB18E,UAAYy5E,GAE/B51D,EAAE,CAAEK,QAAQ,EAAMI,QAAQ,GAAQ,CAChCq4D,QAASD,MAKfE,GAAiB,CACfxG,gBAAiB2F,GACjBc,SAAUzD,IHtWZ,IA0CI0D,GA1CAC,GAAmBz9D,GAAAxY,IACnBk2E,GAAsB19D,GAAAE,UAA8B,OACpDy9D,GAAkBL,GAAAxG,gBAClB8G,GAA+BN,GAAAC,SAE/BM,GAAY1mE,EAAAu/D,IACZoH,GAAY3mE,EAAA/V,UACZ28E,GAAW5mE,EAAAi5B,SACX4tC,GAAQ9mE,KAAKuK,MACbw8D,GAAM/mE,KAAKwmB,IACXwgD,GAAS1lE,EAAY,GAAG3C,QACxBsoE,GAAO3lE,EAAW,IAAKhB,MACvB4mE,GAAO5lE,EAAY,GAAG4I,MACtBi9D,GAAiB7lE,EAAY,GAAIzV,UACjCu7E,GAAM9lE,EAAY,GAAG9C,KACrB6oE,GAAO/lE,EAAY,GAAGhV,MACtBg7E,GAAUhmE,EAAY,GAAGzJ,SACzB0vE,GAAQjmE,EAAY,GAAGwiE,OACvB0D,GAAQlmE,EAAY,GAAGM,OACvB6lE,GAAcnmE,EAAY,GAAGva,OAC7B2gF,GAAcpmE,EAAY,GAAG0L,aAC7B26D,GAAUrmE,EAAY,GAAGsmE,SAGzBC,GAAiB,iBACjBC,GAAe,eACfC,GAAe,eAEfC,GAAK,SAELC,GAAY,cACZC,GAAK,KACLC,GAAS,OACTC,GAAG,WACHC,GAAG,QACHC,GAAG,cAEHC,GAAyB,6BACzBC,GAA2C,4BAC3CC,GAAwC,uCACxCC,GAAgB,YAoJhBC,GAAgB,SAAUnnC,GAC5B,IAAIt5C,EAAQ6iB,EAAO69D,EAAUC,EAE7B,GAAmB,iBAARrnC,EAAkB,CAE3B,IADAt5C,EAAS,GACJ6iB,EAAQ,EAAGA,EAAQ,EAAGA,IACzB48D,GAAQz/E,EAAQs5C,EAAO,KACvBA,EAAOslC,GAAMtlC,EAAO,KACpB,OAAO0lC,GAAKh/E,EAAQ,KAEjB,GAAmB,iBAARs5C,EAAkB,CAGlC,IAFAt5C,EAAS,GACT0gF,EAvC0B,SAAUE,GAMtC,IALA,IAAIC,EAAW,KACXzzB,EAAY,EACZ0zB,EAAY,KACZC,EAAa,EACbl+D,EAAQ,EACLA,EAAQ,EAAGA,IACI,IAAhB+9D,EAAK/9D,IACHk+D,EAAa3zB,IACfyzB,EAAWC,EACX1zB,EAAY2zB,GAEdD,EAAY,KACZC,EAAa,IAEK,OAAdD,IAAoBA,EAAYj+D,KAClCk+D,GAON,OAJIA,EAAa3zB,IACfyzB,EAAWC,EACX1zB,EAAY2zB,GAEPF,EAgBMG,CAAwB1nC,GAC9Bz2B,EAAQ,EAAGA,EAAQ,EAAGA,IACrB89D,GAA2B,IAAhBrnC,EAAKz2B,KAChB89D,IAASA,GAAU,GACnBD,IAAa79D,GACf7iB,GAAU6iB,EAAQ,IAAM,KACxB89D,GAAU,IAEV3gF,GAAUi/E,GAAe3lC,EAAKz2B,GAAQ,IAClCA,EAAQ,IAAG7iB,GAAU,OAG7B,MAAO,IAAMA,EAAS,IACtB,OAAOs5C,GAGP2nC,GAA4B,GAC5BC,GAA2BtsC,GAAO,GAAIqsC,GAA2B,CACnE,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,IAEnCE,GAAuBvsC,GAAO,GAAIssC,GAA0B,CAC9D,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,IAE3BE,GAA2BxsC,GAAO,GAAIusC,GAAsB,CAC9D,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,EAAG,KAAM,EAAG,IAAK,EAAG,IAAK,EAAG,IAAK,IAG5EE,GAAgB,SAAUplD,EAAK7zB,GACjC,IAAI4zB,EAAIslD,GAAUrlD,EAAK,GACvB,OAAOD,EAAO,IAAQA,EAAO,MAAS/e,GAAO7U,EAAK6zB,GAAOA,EAAMq/C,mBAAmBr/C,IAIhFslD,GAAiB,CACnBC,IAAK,GACLC,KAAM,KACNC,KAAM,GACNC,MAAO,IACPC,GAAI,GACJC,IAAK,KAIHC,GAAuB,SAAUj9D,EAAQk9D,GAC3C,IAAI34B,EACJ,OAAwB,GAAjBvkC,EAAOhnB,QAAekhF,GAAKe,GAAOhB,GAAOj6D,EAAQ,MAClB,MAA/BukC,EAAS01B,GAAOj6D,EAAQ,MAAgBk9D,GAAwB,KAAV34B,IAI3D44B,GAA+B,SAAUn9D,GAC3C,IAAI8rB,EACJ,OAAO9rB,EAAOhnB,OAAS,GAAKikF,GAAqBvC,GAAY16D,EAAQ,EAAG,MACrD,GAAjBA,EAAOhnB,QAC0B,OAA/B8yC,EAAQmuC,GAAOj6D,EAAQ,KAAyB,OAAV8rB,GAA4B,MAAVA,GAA2B,MAAVA,IAK3EsxC,GAAc,SAAUC,GAC1B,MAAmB,MAAZA,GAA4C,QAAzB1C,GAAY0C,IAUpCC,GAAe,GACfC,GAAS,GACTC,GAAY,GACZC,GAAgC,GAChCC,GAAoB,GACpBC,GAAW,GACXC,GAAiB,GACjBC,GAA4B,GAC5BC,GAAmC,GACnCC,GAAY,GACZC,GAAO,GACPC,GAAW,GACXC,GAAO,GACPC,GAAO,GACPC,GAAa,GACbC,GAAY,GACZC,GAAa,GACbC,GAAO,GACPC,GAA4B,GAC5BC,GAAQ,GACRC,GAAW,GAEXC,GAAW,SAAU9zE,EAAK+zE,EAAQh5E,GACpC,IACIi5E,EAAWC,EAASpM,EADpBqM,EAAYh9D,GAAUlX,GAE1B,GAAI+zE,EAAQ,CAEV,GADAE,EAAU5iF,KAAK+Q,MAAM8xE,GACR,MAAMlF,GAAUiF,GAC7B5iF,KAAKw2E,aAAe,SACf,CAGL,QAFan4E,IAATqL,IAAoBi5E,EAAY,IAAIF,GAAS/4E,GAAM,IACvDk5E,EAAU5iF,KAAK+Q,MAAM8xE,EAAW,KAAMF,GACzB,MAAMhF,GAAUiF,IAC7BpM,EAAeiH,GAA6B,IAAID,KACnCxB,QAAQh8E,MACrBA,KAAKw2E,aAAeA,IAIxBiM,GAASliF,UAAY,CACnBV,KAAM,MAGNkR,MAAO,SAAUxI,EAAOu6E,EAAep5E,GACrC,IAOI2nE,EAAYn2C,EAAK6nD,EAAkBH,EAzDfzB,EAkDpBxyE,EAAM3O,KACNwS,EAAQswE,GAAiB1B,GACzB4B,EAAU,EACV5kD,EAAS,GACT6kD,GAAS,EACTC,GAAc,EACdC,GAAoB,MAGxB56E,EAAQsd,GAAUtd,GAEbu6E,IACHn0E,EAAIy0E,OAAS,GACbz0E,EAAIioE,SAAW,GACfjoE,EAAI00E,SAAW,GACf10E,EAAI4pC,KAAO,KACX5pC,EAAI20E,KAAO,KACX30E,EAAI40E,KAAO,GACX50E,EAAIwtE,MAAQ,KACZxtE,EAAI60E,SAAW,KACf70E,EAAI80E,kBAAmB,EACvBl7E,EAAQ81E,GAAQ91E,EAAOi3E,GAA0C,KAGnEj3E,EAAQ81E,GAAQ91E,EAAOk3E,GAAkB,IAEzCpO,EAAaz+C,GAAUrqB,GAEhBy6E,GAAW3R,EAAWv0E,QAAQ,CAEnC,OADAo+B,EAAMm2C,EAAW2R,GACTxwE,GACN,KAAK4uE,GACH,IAAIlmD,IAAO8iD,GAAKe,GAAO7jD,GAGhB,CAAA,GAAK4nD,EAGL,OAAOlE,GAFZpsE,EAAQ8uE,GACR,SAJAljD,GAAUqgD,GAAYvjD,GACtB1oB,EAAQ6uE,GAKV,MAEF,KAAKA,GACH,GAAInmD,IAAQ8iD,GAAKgB,GAAc9jD,IAAe,KAAPA,GAAqB,KAAPA,GAAqB,KAAPA,GACjEkD,GAAUqgD,GAAYvjD,OACjB,CAAA,GAAW,KAAPA,EA0BJ,CAAA,GAAK4nD,EAKL,OAAOlE,GAJZxgD,EAAS,GACT5rB,EAAQ8uE,GACR0B,EAAU,EACV,SA7BA,GAAIF,IACDn0E,EAAI+0E,aAAexnE,GAAOskE,GAAgBpiD,IAChC,QAAVA,IAAqBzvB,EAAIg1E,uBAAsC,OAAbh1E,EAAI20E,OACxC,QAAd30E,EAAIy0E,SAAqBz0E,EAAI4pC,MAC7B,OAEH,GADA5pC,EAAIy0E,OAAShlD,EACT0kD,EAEF,YADIn0E,EAAI+0E,aAAelD,GAAe7xE,EAAIy0E,SAAWz0E,EAAI20E,OAAM30E,EAAI20E,KAAO,OAG5EllD,EAAS,GACS,QAAdzvB,EAAIy0E,OACN5wE,EAAQyvE,GACCtzE,EAAI+0E,aAAeh6E,GAAQA,EAAK05E,QAAUz0E,EAAIy0E,OACvD5wE,EAAQ+uE,GACC5yE,EAAI+0E,YACblxE,EAAQmvE,GAC4B,KAA3BtQ,EAAW2R,EAAU,IAC9BxwE,EAAQgvE,GACRwB,MAEAr0E,EAAI80E,kBAAmB,EACvBrF,GAAKzvE,EAAI40E,KAAM,IACf/wE,EAAQ8vE,IAQZ,MAEF,KAAKhB,GACH,IAAK53E,GAASA,EAAK+5E,kBAA2B,KAAPvoD,EAAa,OAAO0jD,GAC3D,GAAIl1E,EAAK+5E,kBAA2B,KAAPvoD,EAAY,CACvCvsB,EAAIy0E,OAAS15E,EAAK05E,OAClBz0E,EAAI40E,KAAO17D,GAAWne,EAAK65E,MAC3B50E,EAAIwtE,MAAQzyE,EAAKyyE,MACjBxtE,EAAI60E,SAAW,GACf70E,EAAI80E,kBAAmB,EACvBjxE,EAAQgwE,GACR,MAEFhwE,EAAuB,QAAf9I,EAAK05E,OAAmBnB,GAAOR,GACvC,SAEF,KAAKF,GACH,GAAW,KAAPrmD,GAAyC,KAA3Bm2C,EAAW2R,EAAU,GAGhC,CACLxwE,EAAQivE,GACR,SAJAjvE,EAAQovE,GACRoB,IAIA,MAEJ,KAAKxB,GACH,GAAW,KAAPtmD,EAAY,CACd1oB,EAAQqvE,GACR,MAEArvE,EAAQ6vE,GACR,SAGJ,KAAKZ,GAEH,GADA9yE,EAAIy0E,OAAS15E,EAAK05E,OACdloD,GAAOmiD,GACT1uE,EAAIioE,SAAWltE,EAAKktE,SACpBjoE,EAAI00E,SAAW35E,EAAK25E,SACpB10E,EAAI4pC,KAAO7uC,EAAK6uC,KAChB5pC,EAAI20E,KAAO55E,EAAK45E,KAChB30E,EAAI40E,KAAO17D,GAAWne,EAAK65E,MAC3B50E,EAAIwtE,MAAQzyE,EAAKyyE,WACZ,GAAW,KAAPjhD,GAAsB,MAAPA,GAAevsB,EAAI+0E,YAC3ClxE,EAAQkvE,QACH,GAAW,KAAPxmD,EACTvsB,EAAIioE,SAAWltE,EAAKktE,SACpBjoE,EAAI00E,SAAW35E,EAAK25E,SACpB10E,EAAI4pC,KAAO7uC,EAAK6uC,KAChB5pC,EAAI20E,KAAO55E,EAAK45E,KAChB30E,EAAI40E,KAAO17D,GAAWne,EAAK65E,MAC3B50E,EAAIwtE,MAAQ,GACZ3pE,EAAQ+vE,OACH,CAAA,GAAW,KAAPrnD,EASJ,CACLvsB,EAAIioE,SAAWltE,EAAKktE,SACpBjoE,EAAI00E,SAAW35E,EAAK25E,SACpB10E,EAAI4pC,KAAO7uC,EAAK6uC,KAChB5pC,EAAI20E,KAAO55E,EAAK45E,KAChB30E,EAAI40E,KAAO17D,GAAWne,EAAK65E,MAC3B50E,EAAI40E,KAAKzmF,SACT0V,EAAQ6vE,GACR,SAhBA1zE,EAAIioE,SAAWltE,EAAKktE,SACpBjoE,EAAI00E,SAAW35E,EAAK25E,SACpB10E,EAAI4pC,KAAO7uC,EAAK6uC,KAChB5pC,EAAI20E,KAAO55E,EAAK45E,KAChB30E,EAAI40E,KAAO17D,GAAWne,EAAK65E,MAC3B50E,EAAIwtE,MAAQzyE,EAAKyyE,MACjBxtE,EAAI60E,SAAW,GACfhxE,EAAQgwE,GAUR,MAEJ,KAAKd,GACH,IAAI/yE,EAAI+0E,aAAuB,KAAPxoD,GAAqB,MAAPA,EAE/B,CAAA,GAAW,KAAPA,EAEJ,CACLvsB,EAAIioE,SAAWltE,EAAKktE,SACpBjoE,EAAI00E,SAAW35E,EAAK25E,SACpB10E,EAAI4pC,KAAO7uC,EAAK6uC,KAChB5pC,EAAI20E,KAAO55E,EAAK45E,KAChB9wE,EAAQ6vE,GACR,SAPA7vE,EAAQqvE,QAFRrvE,EAAQovE,GAUR,MAEJ,KAAKD,GAEH,GADAnvE,EAAQovE,GACG,KAAP1mD,GAA6C,KAA/B6iD,GAAO3/C,EAAQ4kD,EAAU,GAAW,SACtDA,IACA,MAEF,KAAKpB,GACH,GAAW,KAAP1mD,GAAqB,MAAPA,EAAa,CAC7B1oB,EAAQqvE,GACR,SACA,MAEJ,KAAKA,GACH,GAAW,KAAP3mD,EAAY,CACV+nD,IAAQ7kD,EAAS,MAAQA,GAC7B6kD,GAAS,EACTF,EAAmBnwD,GAAUwL,GAC7B,IAAK,IAAIvhC,EAAI,EAAGA,EAAIkmF,EAAiBjmF,OAAQD,IAAK,CAChD,IAAIu0E,EAAY2R,EAAiBlmF,GACjC,GAAiB,KAAbu0E,GAAqB+R,EAAzB,CAIA,IAAIS,EAAoBtD,GAAclP,EAAWiP,IAC7C8C,EAAmBx0E,EAAI00E,UAAYO,EAClCj1E,EAAIioE,UAAYgN,OALnBT,GAAoB,EAOxB/kD,EAAS,QACJ,GACLlD,GAAOmiD,IAAc,KAAPniD,GAAqB,KAAPA,GAAqB,KAAPA,GAClC,MAAPA,GAAevsB,EAAI+0E,YACpB,CACA,GAAIT,GAAoB,IAAV7kD,EAAc,MAtehB,oBAueZ4kD,GAAWpwD,GAAUwL,GAAQthC,OAAS,EACtCshC,EAAS,GACT5rB,EAAQsvE,QACH1jD,GAAUlD,EACjB,MAEF,KAAK4mD,GACL,KAAKC,GACH,GAAIe,GAA+B,QAAdn0E,EAAIy0E,OAAkB,CACzC5wE,EAAQ2vE,GACR,SACK,GAAW,KAAPjnD,GAAegoD,EAOnB,CAAA,GACLhoD,GAAOmiD,IAAc,KAAPniD,GAAqB,KAAPA,GAAqB,KAAPA,GAClC,MAAPA,GAAevsB,EAAI+0E,YACpB,CACA,GAAI/0E,EAAI+0E,aAAyB,IAAVtlD,EAAc,OAAOygD,GAC5C,GAAIiE,GAA2B,IAAV1kD,IAAiBzvB,EAAIg1E,uBAAsC,OAAbh1E,EAAI20E,MAAgB,OAEvF,GADAV,EAAUj0E,EAAIk1E,UAAUzlD,GACX,OAAOwkD,EAGpB,GAFAxkD,EAAS,GACT5rB,EAAQ4vE,GACJU,EAAe,OACnB,SAEW,KAAP5nD,EAAYgoD,GAAc,EACd,KAAPhoD,IAAYgoD,GAAc,GACnC9kD,GAAUlD,MAtB2B,CACrC,GAAc,IAAVkD,EAAc,OAAOygD,GAEzB,GADA+D,EAAUj0E,EAAIk1E,UAAUzlD,GACX,OAAOwkD,EAGpB,GAFAxkD,EAAS,GACT5rB,EAAQwvE,GACJc,GAAiBf,GAAU,OAiB/B,MAEJ,KAAKC,GACH,IAAIhE,GAAKiB,GAAO/jD,GAET,CAAA,GACLA,GAAOmiD,IAAc,KAAPniD,GAAqB,KAAPA,GAAqB,KAAPA,GAClC,MAAPA,GAAevsB,EAAI+0E,aACpBZ,EACA,CACA,GAAc,IAAV1kD,EAAc,CAChB,IAAIklD,EAAO1F,GAASx/C,EAAQ,IAC5B,GAAIklD,EAAO,MAAQ,OAAOxE,GAC1BnwE,EAAI20E,KAAQ30E,EAAI+0E,aAAeJ,IAAS9C,GAAe7xE,EAAIy0E,QAAW,KAAOE,EAC7EllD,EAAS,GAEX,GAAI0kD,EAAe,OACnBtwE,EAAQ4vE,GACR,SACK,OAAOtD,GAfZ1gD,GAAUlD,EAgBZ,MAEF,KAAK+mD,GAEH,GADAtzE,EAAIy0E,OAAS,OACF,KAAPloD,GAAqB,MAAPA,EAAa1oB,EAAQ0vE,OAClC,CAAA,IAAIx4E,GAAuB,QAAfA,EAAK05E,OAyBf,CACL5wE,EAAQ6vE,GACR,SA1BA,GAAInnD,GAAOmiD,GACT1uE,EAAI4pC,KAAO7uC,EAAK6uC,KAChB5pC,EAAI40E,KAAO17D,GAAWne,EAAK65E,MAC3B50E,EAAIwtE,MAAQzyE,EAAKyyE,WACZ,GAAW,KAAPjhD,EACTvsB,EAAI4pC,KAAO7uC,EAAK6uC,KAChB5pC,EAAI40E,KAAO17D,GAAWne,EAAK65E,MAC3B50E,EAAIwtE,MAAQ,GACZ3pE,EAAQ+vE,OACH,CAAA,GAAW,KAAPrnD,EAMJ,CACA+lD,GAA6BhD,GAAKp2D,GAAWwpD,EAAY2R,GAAU,OACtEr0E,EAAI4pC,KAAO7uC,EAAK6uC,KAChB5pC,EAAI40E,KAAO17D,GAAWne,EAAK65E,MAC3B50E,EAAIm1E,eAENtxE,EAAQ6vE,GACR,SAZA1zE,EAAI4pC,KAAO7uC,EAAK6uC,KAChB5pC,EAAI40E,KAAO17D,GAAWne,EAAK65E,MAC3B50E,EAAIwtE,MAAQzyE,EAAKyyE,MACjBxtE,EAAI60E,SAAW,GACfhxE,EAAQgwE,IAaV,MAEJ,KAAKN,GACH,GAAW,KAAPhnD,GAAqB,MAAPA,EAAa,CAC7B1oB,EAAQ2vE,GACR,MAEEz4E,GAAuB,QAAfA,EAAK05E,SAAqBnC,GAA6BhD,GAAKp2D,GAAWwpD,EAAY2R,GAAU,OACnGjC,GAAqBr3E,EAAK65E,KAAK,IAAI,GAAOnF,GAAKzvE,EAAI40E,KAAM75E,EAAK65E,KAAK,IAClE50E,EAAI4pC,KAAO7uC,EAAK6uC,MAEvB/lC,EAAQ6vE,GACR,SAEF,KAAKF,GACH,GAAIjnD,GAAOmiD,IAAc,KAAPniD,GAAqB,MAAPA,GAAsB,KAAPA,GAAqB,KAAPA,EAAY,CACvE,IAAK4nD,GAAiB/B,GAAqB3iD,GACzC5rB,EAAQ6vE,QACH,GAAc,IAAVjkD,EAAc,CAEvB,GADAzvB,EAAI4pC,KAAO,GACPuqC,EAAe,OACnBtwE,EAAQ4vE,OACH,CAEL,GADAQ,EAAUj0E,EAAIk1E,UAAUzlD,GACX,OAAOwkD,EAEpB,GADgB,aAAZj0E,EAAI4pC,OAAqB5pC,EAAI4pC,KAAO,IACpCuqC,EAAe,OACnB1kD,EAAS,GACT5rB,EAAQ4vE,GACR,SACGhkD,GAAUlD,EACjB,MAEF,KAAKknD,GACH,GAAIzzE,EAAI+0E,aAEN,GADAlxE,EAAQ6vE,GACG,KAAPnnD,GAAqB,MAAPA,EAAa,cAC1B,GAAK4nD,GAAwB,KAAP5nD,EAGtB,GAAK4nD,GAAwB,KAAP5nD,GAGtB,GAAIA,GAAOmiD,KAChB7qE,EAAQ6vE,GACG,KAAPnnD,GAAY,cAJhBvsB,EAAI60E,SAAW,GACfhxE,EAAQgwE,QAJR7zE,EAAIwtE,MAAQ,GACZ3pE,EAAQ+vE,GAOR,MAEJ,KAAKF,GACH,GACEnnD,GAAOmiD,IAAc,KAAPniD,GACN,MAAPA,GAAevsB,EAAI+0E,cAClBZ,IAAyB,KAAP5nD,GAAqB,KAAPA,GAClC,CAkBA,GAlZS,QADnBimD,EAAU1C,GADgB0C,EAmYA/iD,KAjYa,SAAZ+iD,GAAkC,SAAZA,GAAkC,WAAZA,GAkY3DxyE,EAAIm1E,cACO,KAAP5oD,GAAuB,MAAPA,GAAevsB,EAAI+0E,aACrCtF,GAAKzvE,EAAI40E,KAAM,KAERrC,GAAY9iD,GACV,KAAPlD,GAAuB,MAAPA,GAAevsB,EAAI+0E,aACrCtF,GAAKzvE,EAAI40E,KAAM,KAGC,QAAd50E,EAAIy0E,SAAqBz0E,EAAI40E,KAAKzmF,QAAUikF,GAAqB3iD,KAC/DzvB,EAAI4pC,OAAM5pC,EAAI4pC,KAAO,IACzBna,EAAS2/C,GAAO3/C,EAAQ,GAAK,KAE/BggD,GAAKzvE,EAAI40E,KAAMnlD,IAEjBA,EAAS,GACS,QAAdzvB,EAAIy0E,SAAqBloD,GAAOmiD,IAAc,KAAPniD,GAAqB,KAAPA,GAAU,KAC1DvsB,EAAI40E,KAAKzmF,OAAS,GAAqB,KAAhB6R,EAAI40E,KAAK,IACrCjF,GAAM3vE,EAAI40E,MAGH,KAAProD,GACFvsB,EAAIwtE,MAAQ,GACZ3pE,EAAQ+vE,IACQ,KAAPrnD,IACTvsB,EAAI60E,SAAW,GACfhxE,EAAQgwE,SAGVpkD,GAAUkiD,GAAcplD,EAAKklD,IAC7B,MAEJ,KAAKkC,GACQ,KAAPpnD,GACFvsB,EAAIwtE,MAAQ,GACZ3pE,EAAQ+vE,IACQ,KAAPrnD,GACTvsB,EAAI60E,SAAW,GACfhxE,EAAQgwE,IACCtnD,GAAOmiD,KAChB1uE,EAAI40E,KAAK,IAAMjD,GAAcplD,EAAKglD,KAClC,MAEJ,KAAKqC,GACEO,GAAwB,KAAP5nD,EAGXA,GAAOmiD,KACL,KAAPniD,GAAcvsB,EAAI+0E,YAAa/0E,EAAIwtE,OAAS,MAC3BxtE,EAAIwtE,OAAT,KAAPjhD,EAAyB,MAChBolD,GAAcplD,EAAKglD,MALrCvxE,EAAI60E,SAAW,GACfhxE,EAAQgwE,IAKR,MAEJ,KAAKA,GACCtnD,GAAOmiD,KAAK1uE,EAAI60E,UAAYlD,GAAcplD,EAAKilD,KAIvD6C,MAIJa,UAAW,SAAUt7E,GACnB,IAAItJ,EAAQoyE,EAAYvvD,EACxB,GAAwB,KAApBi8D,GAAOx1E,EAAO,GAAW,CAC3B,GAAuC,KAAnCw1E,GAAOx1E,EAAOA,EAAMzL,OAAS,GAAW,OAAO+hF,GAEnD,GADA5/E,EAznBU,SAAUsJ,GACxB,IAIIpK,EAAOrB,EAAQinF,EAAaC,EAAWxiE,EAAQyiE,EAAOC,EAJtDC,EAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAChCC,EAAa,EACbzE,EAAW,KACXqD,EAAU,EAGV9nD,EAAM,WACR,OAAO6iD,GAAOx1E,EAAOy6E,IAGvB,GAAa,KAAT9nD,IAAc,CAChB,GAAwB,KAApB6iD,GAAOx1E,EAAO,GAAW,OAC7By6E,GAAW,EAEXrD,IADAyE,OAGKlpD,KAAO,CACZ,GAAkB,GAAdkpD,EAAiB,OACrB,GAAa,KAATlpD,IAAJ,KAOA/8B,EAAQrB,EAAS,EACVA,EAAS,GAAKkhF,GAAKqB,GAAKnkD,MAC7B/8B,EAAgB,GAARA,EAAay/E,GAAS1iD,IAAO,IACrC8nD,IACAlmF,IAEF,GAAa,KAATo+B,IAAc,CAChB,GAAc,GAAVp+B,EAAa,OAEjB,GADAkmF,GAAWlmF,EACPsnF,EAAa,EAAG,WACpBL,EAAc,EACP7oD,KAAO,CAEZ,GADA8oD,EAAY,KACRD,EAAc,EAAG,CACnB,KAAa,KAAT7oD,KAAgB6oD,EAAc,GAC7B,OADgCf,IAGvC,IAAKhF,GAAKiB,GAAO/jD,KAAQ,YAClB8iD,GAAKiB,GAAO/jD,MAAQ,CAEzB,GADA1Z,EAASo8D,GAAS1iD,IAAO,IACP,OAAd8oD,EAAoBA,EAAYxiE,MAC/B,CAAA,GAAiB,GAAbwiE,EAAgB,OACpBA,EAAwB,GAAZA,EAAiBxiE,EAClC,GAAIwiE,EAAY,IAAK,OACrBhB,IAEFmB,EAAQC,GAAoC,IAAtBD,EAAQC,GAAoBJ,EAE/B,KADnBD,GACuC,GAAfA,GAAkBK,IAE5C,GAAmB,GAAfL,EAAkB,OACtB,MACK,GAAa,KAAT7oD,KAET,GADA8nD,KACK9nD,IAAO,YACP,GAAIA,IAAO,OAClBipD,EAAQC,KAAgBjmF,MA3CxB,CACE,GAAiB,OAAbwhF,EAAmB,OACvBqD,IAEArD,IADAyE,GA0CJ,GAAiB,OAAbzE,MACFsE,EAAQG,EAAazE,EACrByE,EAAa,EACQ,GAAdA,GAAmBH,EAAQ,GAChCC,EAAOC,EAAQC,GACfD,EAAQC,KAAgBD,EAAQxE,EAAWsE,EAAQ,GACnDE,EAAQxE,IAAasE,GAASC,OAE3B,GAAkB,GAAdE,EAAiB,OAC5B,OAAOD,EAgjBME,CAAU7F,GAAYj2E,EAAO,GAAG,KACpCtJ,EAAQ,OAAO4/E,GACpB7+E,KAAKu4C,KAAOt5C,OAEP,GAAKe,KAAK0jF,YAQV,CAEL,GADAn7E,EAAQwwE,GAAQxwE,GACZy1E,GAAKsB,GAA2B/2E,GAAQ,OAAOs2E,GAEnD,GADA5/E,EAhrBU,SAAUsJ,GACxB,IACI+7E,EAAaC,EAASziE,EAAO0iE,EAAM30C,EAAOruB,EAAQijE,EADlDC,EAAQnG,GAAMh2E,EAAO,KAMzB,GAJIm8E,EAAM5nF,QAAqC,IAA3B4nF,EAAMA,EAAM5nF,OAAS,IACvC4nF,EAAM5nF,UAERwnF,EAAcI,EAAM5nF,QACF,EAAG,OAAOyL,EAE5B,IADAg8E,EAAU,GACLziE,EAAQ,EAAGA,EAAQwiE,EAAaxiE,IAAS,CAE5C,GAAY,KADZ0iE,EAAOE,EAAM5iE,IACG,OAAOvZ,EAMvB,GALAsnC,EAAQ,GACJ20C,EAAK1nF,OAAS,GAAwB,KAAnBihF,GAAOyG,EAAM,KAClC30C,EAAQmuC,GAAKkB,GAAWsF,GAAQ,GAAK,EACrCA,EAAOhG,GAAYgG,EAAe,GAAT30C,EAAa,EAAI,IAE/B,KAAT20C,EACFhjE,EAAS,MACJ,CACL,IAAKw8D,GAAc,IAATnuC,EAAcuvC,GAAe,GAATvvC,EAAasvC,GAAME,GAAKmF,GAAO,OAAOj8E,EACpEiZ,EAASo8D,GAAS4G,EAAM30C,GAE1BuuC,GAAKmG,EAAS/iE,GAEhB,IAAKM,EAAQ,EAAGA,EAAQwiE,EAAaxiE,IAEnC,GADAN,EAAS+iE,EAAQziE,GACbA,GAASwiE,EAAc,GACzB,GAAI9iE,GAAUs8D,GAAI,IAAK,EAAIwG,GAAc,OAAO,UAC3C,GAAI9iE,EAAS,IAAK,OAAO,KAGlC,IADAijE,EAAOtG,GAAIoG,GACNziE,EAAQ,EAAGA,EAAQyiE,EAAQznF,OAAQglB,IACtC2iE,GAAQF,EAAQziE,GAASg8D,GAAI,IAAK,EAAIh8D,GAExC,OAAO2iE,EA6oBME,CAAUp8E,GACJ,OAAXtJ,EAAiB,OAAO4/E,GAC5B7+E,KAAKu4C,KAAOt5C,MAbgB,CAC5B,GAAI++E,GAAKuB,GAA6Ch3E,GAAQ,OAAOs2E,GAGrE,IAFA5/E,EAAS,GACToyE,EAAaz+C,GAAUrqB,GAClBuZ,EAAQ,EAAGA,EAAQuvD,EAAWv0E,OAAQglB,IACzC7iB,GAAUqhF,GAAcjP,EAAWvvD,GAAQo+D,IAE7ClgF,KAAKu4C,KAAOt5C,IAUhB2lF,+BAAgC,WAC9B,OAAQ5kF,KAAKu4C,MAAQv4C,KAAKyjF,kBAAmC,QAAfzjF,KAAKojF,QAGrDO,oBAAqB,WACnB,MAAwB,IAAjB3jF,KAAK42E,UAAmC,IAAjB52E,KAAKqjF,UAGrCK,UAAW,WACT,OAAOxnE,GAAOskE,GAAgBxgF,KAAKojF,SAGrCU,YAAa,WACX,IAAIP,EAAOvjF,KAAKujF,KACZsB,EAAWtB,EAAKzmF,QAChB+nF,GAA4B,QAAf7kF,KAAKojF,QAAgC,GAAZyB,GAAkB9D,GAAqBwC,EAAK,IAAI,IACxFA,EAAKzmF,UAITs/E,UAAW,WACT,IAAIztE,EAAM3O,KACNojF,EAASz0E,EAAIy0E,OACbxM,EAAWjoE,EAAIioE,SACfyM,EAAW10E,EAAI00E,SACf9qC,EAAO5pC,EAAI4pC,KACX+qC,EAAO30E,EAAI20E,KACXC,EAAO50E,EAAI40E,KACXpH,EAAQxtE,EAAIwtE,MACZqH,EAAW70E,EAAI60E,SACfxyB,EAASoyB,EAAS,IAYtB,OAXa,OAAT7qC,GACFyY,GAAU,KACNriD,EAAIg1E,wBACN3yB,GAAU4lB,GAAYyM,EAAW,IAAMA,EAAW,IAAM,KAE1DryB,GAAU0uB,GAAcnnC,GACX,OAAT+qC,IAAetyB,GAAU,IAAMsyB,IAChB,QAAVF,IAAkBpyB,GAAU,MACvCA,GAAUriD,EAAI80E,iBAAmBF,EAAK,GAAKA,EAAKzmF,OAAS,IAAMmhF,GAAKsF,EAAM,KAAO,GACnE,OAAVpH,IAAgBnrB,GAAU,IAAMmrB,GACnB,OAAbqH,IAAmBxyB,GAAU,IAAMwyB,GAChCxyB,GAGT8zB,QAAS,SAAUpO,GACjB,IAAIkM,EAAU5iF,KAAK+Q,MAAM2lE,GACzB,GAAIkM,EAAS,MAAMjF,GAAUiF,GAC7B5iF,KAAKw2E,aAAavR,UAGpB8f,UAAW,WACT,IAAI3B,EAASpjF,KAAKojF,OACdE,EAAOtjF,KAAKsjF,KAChB,GAAc,QAAVF,EAAkB,IACpB,OAAO,IAAI4B,GAAe5B,EAAOG,KAAK,IAAI0B,OAC1C,MAAO3jF,GACP,MAAO,OAET,MAAc,QAAV8hF,GAAqBpjF,KAAK0jF,YACvBN,EAAS,MAAQ1D,GAAc1/E,KAAKu4C,OAAkB,OAAT+qC,EAAgB,IAAMA,EAAO,IAD/B,QAIpD4B,YAAa,WACX,OAAOllF,KAAKojF,OAAS,KAEvB+B,YAAa,SAAU7sC,GACrBt4C,KAAK+Q,MAAM8U,GAAUyyB,GAAY,IAAK8oC,KAGxCgE,YAAa,WACX,OAAOplF,KAAK42E,UAEdyO,YAAa,SAAUzO,GACrB,IAAIvF,EAAaz+C,GAAU/M,GAAU+wD,IACrC,IAAI52E,KAAK4kF,iCAAT,CACA5kF,KAAK42E,SAAW,GAChB,IAAK,IAAI/5E,EAAI,EAAGA,EAAIw0E,EAAWv0E,OAAQD,IACrCmD,KAAK42E,UAAY0J,GAAcjP,EAAWx0E,GAAIwjF,MAIlDiF,YAAa,WACX,OAAOtlF,KAAKqjF,UAEdkC,YAAa,SAAUlC,GACrB,IAAIhS,EAAaz+C,GAAU/M,GAAUw9D,IACrC,IAAIrjF,KAAK4kF,iCAAT,CACA5kF,KAAKqjF,SAAW,GAChB,IAAK,IAAIxmF,EAAI,EAAGA,EAAIw0E,EAAWv0E,OAAQD,IACrCmD,KAAKqjF,UAAY/C,GAAcjP,EAAWx0E,GAAIwjF,MAIlDmF,QAAS,WACP,IAAIjtC,EAAOv4C,KAAKu4C,KACZ+qC,EAAOtjF,KAAKsjF,KAChB,OAAgB,OAAT/qC,EAAgB,GACV,OAAT+qC,EAAgB5D,GAAcnnC,GAC9BmnC,GAAcnnC,GAAQ,IAAM+qC,GAElCmC,QAAS,SAAUltC,GACbv4C,KAAKyjF,kBACTzjF,KAAK+Q,MAAMwnC,EAAMupC,KAGnB4D,YAAa,WACX,IAAIntC,EAAOv4C,KAAKu4C,KAChB,OAAgB,OAATA,EAAgB,GAAKmnC,GAAcnnC,IAE5CotC,YAAa,SAAUC,GACjB5lF,KAAKyjF,kBACTzjF,KAAK+Q,MAAM60E,EAAU7D,KAGvB8D,QAAS,WACP,IAAIvC,EAAOtjF,KAAKsjF,KAChB,OAAgB,OAATA,EAAgB,GAAKz9D,GAAUy9D,IAExCwC,QAAS,SAAUxC,GACbtjF,KAAK4kF,mCAEG,KADZtB,EAAOz9D,GAAUy9D,IACDtjF,KAAKsjF,KAAO,KACvBtjF,KAAK+Q,MAAMuyE,EAAMtB,MAGxB+D,YAAa,WACX,IAAIxC,EAAOvjF,KAAKujF,KAChB,OAAOvjF,KAAKyjF,iBAAmBF,EAAK,GAAKA,EAAKzmF,OAAS,IAAMmhF,GAAKsF,EAAM,KAAO,IAEjFyC,YAAa,SAAUvP,GACjBz2E,KAAKyjF,mBACTzjF,KAAKujF,KAAO,GACZvjF,KAAK+Q,MAAM0lE,EAAU2L,MAGvB6D,UAAW,WACT,IAAI9J,EAAQn8E,KAAKm8E,MACjB,OAAOA,EAAQ,IAAMA,EAAQ,IAE/B+J,UAAW,SAAUv8B,GAEL,KADdA,EAAS9jC,GAAU8jC,IAEjB3pD,KAAKm8E,MAAQ,MAET,KAAO4B,GAAOp0B,EAAQ,KAAIA,EAAS60B,GAAY70B,EAAQ,IAC3D3pD,KAAKm8E,MAAQ,GACbn8E,KAAK+Q,MAAM44C,EAAQ44B,KAErBviF,KAAKw2E,aAAavR,UAGpBkhB,gBAAiB,WACf,OAAOnmF,KAAKw2E,aAAa72D,QAG3BymE,QAAS,WACP,IAAI5C,EAAWxjF,KAAKwjF,SACpB,OAAOA,EAAW,IAAMA,EAAW,IAErC6C,QAAS,SAAUxP,GAEL,KADZA,EAAOhxD,GAAUgxD,KAKb,KAAOkH,GAAOlH,EAAM,KAAIA,EAAO2H,GAAY3H,EAAM,IACrD72E,KAAKwjF,SAAW,GAChBxjF,KAAK+Q,MAAM8lE,EAAM2L,KALfxiF,KAAKwjF,SAAW,MAOpBve,OAAQ,WACNjlE,KAAKm8E,MAAQn8E,KAAKw2E,aAAa4F,aAAe,OAMlD,II36BqBkK,GJ26BjBtB,GAAiB,SAAar2E,GAChC,IAAIsa,EAAO6T,GAAW98B,KAAMumF,IACxB78E,EAAOjI,UAAU3E,OAAS,EAAI2E,UAAU,QAAKpD,EAC7CmU,EAAQ8qE,GAAiBr0D,EAAM,IAAIw5D,GAAS9zE,GAAK,EAAOjF,IACvDyN,IACH8R,EAAKytD,KAAOlkE,EAAM4pE,YAClBnzD,EAAKg8D,OAASzyE,EAAMuyE,YACpB97D,EAAKqvB,SAAW9lC,EAAM0yE,cACtBj8D,EAAK2tD,SAAWpkE,EAAM4yE,cACtBn8D,EAAKo6D,SAAW7wE,EAAM8yE,cACtBr8D,EAAKsvB,KAAO/lC,EAAMgzE,UAClBv8D,EAAK28D,SAAWpzE,EAAMkzE,cACtBz8D,EAAKq6D,KAAO9wE,EAAMqzE,UAClB58D,EAAKwtD,SAAWjkE,EAAMuzE,cACtB98D,EAAK0gC,OAASn3C,EAAMyzE,YACpBh9D,EAAKutD,aAAehkE,EAAM2zE,kBAC1Bl9D,EAAK4tD,KAAOrkE,EAAM4zE,YAIlBG,GAAevB,GAAezkF,UAE9BimF,GAAqB,SAAUpyC,EAAQ/mB,GACzC,MAAO,CACLprB,IAAK,WACH,OAAOs7E,GAAoBv9E,MAAMo0C,MAEnC/sC,IAAKgmB,GAAU,SAAUlvB,GACvB,OAAOo/E,GAAoBv9E,MAAMqtB,GAAQlvB,IAE3CR,cAAc,EACdD,YAAY,IAyDhB,GArDIyZ,GAAWsvE,GACIF,GAAc,CAG7B7P,KAAM8P,GAAmB,YAAa,WAGtCvB,OAAQuB,GAAmB,aAG3BluC,SAAUkuC,GAAmB,cAAe,eAG5C5P,SAAU4P,GAAmB,cAAe,eAG5CnD,SAAUmD,GAAmB,cAAe,eAG5CjuC,KAAMiuC,GAAmB,UAAW,WAGpCZ,SAAUY,GAAmB,cAAe,eAG5ClD,KAAMkD,GAAmB,UAAW,WAGpC/P,SAAU+P,GAAmB,cAAe,eAG5C78B,OAAQ68B,GAAmB,YAAa,aAGxChQ,aAAcgQ,GAAmB,mBAGjC3P,KAAM2P,GAAmB,UAAW,aAMxC7lE,GAAS4lE,GAAc,UAAU,WAC/B,OAAOhJ,GAAoBv9E,MAAMo8E,cAChC,CAAE1+E,YAAY,IAIjBijB,GAAS4lE,GAAc,YAAY,WACjC,OAAOhJ,GAAoBv9E,MAAMo8E,cAChC,CAAE1+E,YAAY,IAEbggF,GAAW,CACb,IAAIgJ,GAAwBhJ,GAAUiJ,gBAClCC,GAAwBlJ,GAAUmJ,gBAGlCH,IAAuB/lE,GAASqkE,GAAgB,kBAAmBh8D,GAAK09D,GAAuBhJ,KAG/FkJ,IAAuBjmE,GAASqkE,GAAgB,kBAAmBh8D,GAAK49D,GAAuBlJ,KKr/BrG,GLw/BA90D,GAAeo8D,GAAgB,OAE/B5gE,EAAE,CAAEK,QAAQ,EAAMI,QAASyxD,GAAgB7zE,MAAO0U,GAAe,CAC/Do/D,IAAKyO,KM3gCP5gE,EAAE,CAAElnB,OAAQ,MAAOgH,OAAO,EAAMxG,YAAY,GAAQ,CAClDqmC,OAAQ,WACN,OAAOrsB,EAAK6+D,IAAIh2E,UAAUqC,SAAU5C,SFRnBsmF,GAAT,WAAa,IAAIQ,EAAEvoF,MAAMgC,UAAUzC,MAAMM,KAAKqD,WAAWwmB,EAAEzY,SAASu3E,yBAAyBD,EAAEtpF,SAAQ,SAASqF,GAAG,IAAI4oC,EAAE5oC,aAAamkF,KAAK/+D,EAAE5X,YAAYo7B,EAAE5oC,EAAE2M,SAASkrC,eAAe7yC,OAAOhF,QAAO7C,KAAKqQ,YAAY4X,IAAG,CAACg/D,QAAQ1mF,UAAU2mF,SAAS3mF,UAAU4mF,iBAAiB5mF,WAAW/C,SAAQ,SAASqF,GAAGA,EAAEV,eAAe,WAAWvF,OAAO+G,eAAed,EAAE,SAAS,CAAClF,cAAY,EAAID,YAAU,EAAIG,UAAQ,EAAIM,MAAMmoF,QCGja,aAAcW,QAAQ1mF,WACxB3D,OAAO+G,eAAesjF,QAAQ1mF,UAAW,WAAY,CACjDpC,MAAO,SAAUs9B,EAAGC,GAChB17B,KAAKonF,WAAa3rD,EAClBz7B,KAAKqnF,UAAY3rD,KAKvB,aAAcurD,QAAQ1mF,WACxB3D,OAAO+G,eAAesjF,QAAQ1mF,UAAW,WAAY,CACjDpC,MAAO,SAAUs9B,EAAGC,GAChB17B,KAAKonF,YAAc3rD,EACnBz7B,KAAKqnF,WAAa3rD,OAMxB,iBAAkBzkB,QACpB,IACIA,OAAqB,aAAI,CACrBqwE,QAAS,WAAM,OAAA,MACfC,QAAS,aACTC,WAAY,cAElB,MAAO3kF,aE7BG4kF,GAAaC,EAAYC,GACrC,IAAM1oF,EAASuQ,SAASM,cAAc,UAKtC,OAJI43E,GAAKC,IACL1oF,EAAO2oF,MAAQF,EACfzoF,EAAO4oF,OAASF,GAEb1oF,ECJJ,IAgDG6oF,GAgBAC,GAkBGxwE,GAFLtY,GAhFK+oF,GAAYC,UAAUC,UAAUnkE,cAAc1e,QAAQ,YAAa,EAEnE8iF,GAA6B,WAEtC,IAGchwC,EAHVgwC,EAA4C,KAYhD,OAXI34E,SAASutE,MAEC5kC,EAAQ,IAAIiwC,MAAM,IACxBD,EAA4BhwC,EAAMkwC,UAAY,MAGlDpxE,OAAO4hC,iBAAiB,oBAAoB,SAASV,GACjDgwC,EAA4BhwC,EAAMkwC,UAAY,QAI/C,WACH,GAAkC,OAA9BF,EACA,KAAM,4CAEV,OAAOA,GAlB2B,GAsB7BG,GAAyB,WAKlC,KAAM,eAAgBrxE,QAClB,OAAO,EAEX,IAAIsxE,EACJ,IACIA,EAAa,IAAIC,WAAW,aAC9B,MAAO3lF,GACL,OAAO,EAEX,MAAM,cAAe0lF,IAGbP,GAjB0B,GAoBzBS,KAAqBxxE,OAAOyxE,aAE5BC,IAEHb,GAAY,WACd,IAAMc,EAASnB,KACf,IAEI,OADAmB,EAAOC,WAAW,qBAAsB,CAAEC,oBAAoB,KACvD,EACT,MAAOjmF,GACL,OAAO,GANG,GAUX,WACH,OAAOilF,KAIFiB,IACHhB,GAAU,CACZiB,QAAQ,EACRC,IAAI,GAGHhyE,OAAe+xE,QAAW/xE,OAAe+xE,OAAOE,MACjDnB,GAAQiB,QAAS,GAGrBjB,GAAQkB,GAAKN,KACN,WACH,OAAO73E,KAAKC,MAAMD,KAAK4c,UAAUq6D,OAI5BoB,IAGA5xE,GAAT,WACI,IAAMm1B,EAAMl9B,SAASM,cAAc,OACnC48B,EAAItlB,MAAMkhC,SAAW,WACrB5b,EAAItlB,MAAMgiE,IAAM,IAChB18C,EAAItlB,MAAMzc,KAAO,iBACjB6E,SAASutE,KAAK1sE,YAAYq8B,GAC1BsM,YAAW,WACP/5C,GAA4B,KAAnBytC,EAAI28C,WACb75E,SAASutE,KAAKhkC,YAAYrM,KAC3B,KAXHztC,GAAyB,KAczBuQ,SAASutE,KACTxlE,KAEAN,OAAO4hC,iBAAiB,oBAAoB,WACxCthC,QAID,WACH,GAAe,OAAXtY,GACA,MAAM,IAAIhC,MAAM,wCAEpB,OAAOgC,KC1GTqqF,GAAkB,GASXC,GAAmB,SAAUC,EAAO3pF,EAAM4pF,EAAU7oE,GACxD6nE,KACD5oF,EAAOA,EAAK+O,QAAQ,UAAW,UAE7B/O,KAAQypF,KACVA,GAAgBzpF,GAAQ,IAE5BypF,GAAgBzpF,GAAMwD,KAAKomF,GAC3BD,EAAM3wC,iBAAiBh5C,EAAM4pF,EAAU7oE,IAG9B8oE,GAAsB,SAAUF,EAAO3pF,EAAM4pF,EAAU7oE,GAIhE,GAHK6nE,KACD5oF,EAAOA,EAAK+O,QAAQ,UAAW,UAE/B/O,KAAQypF,GACR,IAAK,IAAIzsF,EAAI,EAAGA,EAAIysF,GAAgBzpF,GAAM/C,OAAQD,IAC1CysF,GAAgBzpF,GAAMhD,KAAO4sF,IAC7BH,GAAgBzpF,GAAMuF,OAAOvI,EAAG,GAChCA,KAIZ2sF,EAAMG,oBAAoB9pF,EAAM4pF,EAAU7oE,aCP9BgpE,GAAKtnE,EAA8BunE,GAI/C,IAHA,IACIC,EADEC,EAASntF,OAAOD,KAAKktF,GAErBziE,EAAS9E,EAAG8E,MACTvqB,EAAI,EAAGA,EAAIktF,EAAOjtF,OAAQD,IAE/BuqB,EADA0iE,EAASC,EAAOltF,IACAgtF,EAASC,GACzB1iE,EAAM4iE,aAAe,OACN,eAAXF,IACA1iE,EAAM6iE,iBAAmBJ,EAASC,aAmG9BI,GAAK9mF,EAAWi4B,GAC5B,OAAOA,EAAI6uD,GAAI7uD,EAAGj4B,EAAIi4B,GAAKj4B,WAGf+mF,GAAQC,EAAmBC,GACvC,IAAMC,EAAIJ,GAAIE,EAAWC,GACzB,MAAO,CAACD,EAAYE,EAAGD,EAAcC,8CC1InCC,GAAa,WA4Cf,QAaSC,EAAT,SAAkBpnF,EAAGi4B,EAAG8C,EAAGv3B,GACvB6jF,EAAYjtF,SAAQ,SAAAo+C,GACXA,EAAK,IAGVA,EAAK,GAAGx4C,EAAGi4B,EAAG8C,EAAGv3B,OAIhB8jF,EAAT,SAAgBtnF,EAAGi4B,EAAG8C,GAClBssD,EAAYjtF,SAAQ,SAAAo+C,GACXA,EAAK,IAGVA,EAAK,GAAGx4C,EAAGi4B,EAAG8C,OAabwsD,EAAT,SAAiB9nF,GACb,IAAMpF,EAAMoF,EAAEpF,IACRw9B,EAAO,SAAUp4B,EAAIA,EAAEo4B,KAAOp4B,EAAE+nF,QAEtC,GAAIntF,KAAOotF,EAAgB,CACvB,IAAMf,EAASe,EAAeptF,GAC9B,GAAIqtF,EAAUhB,GAEV,YADAU,EAASV,EAAQjnF,EAAGkoF,EAAS9pE,KAAK,MAAM,GAG5C6pE,EAAUhB,IAAU,EACpBkB,EAAc/vD,GAAQ6uD,EAGtBiB,EAAS1nF,KAAKymF,GAEdU,EAASV,EAAQjnF,EAAGkoF,EAAS9pE,KAAK,QAKjCgqE,EAAT,SAAepoF,GACCA,EAAEpF,IAAd,IACMw9B,EAAO,SAAUp4B,EAAIA,EAAEo4B,KAAOp4B,EAAE+nF,QAChCM,EAAcH,EAAS9pE,KAAK,KAIlC,GAAI,CACA,OAAQ,WAAY,YACpB,SAAU,WACZwB,SAASwY,GACPkwD,EAAK,WAIT,GAAIlwD,KAAQ+vD,GAAyC,OAAxBA,EAAc/vD,GAAgB,CACvD,IAAM6uD,EAASkB,EAAc/vD,GAC7B6vD,EAAUhB,IAAU,EACpBkB,EAAc/vD,GAAQ,KAGtB,IAAK,IAAIp+B,EAAI,EAAGA,EAAIkuF,EAASjuF,OAAQD,IAC7BkuF,EAASluF,IAAMitF,IACfiB,EAAS3lF,OAAOvI,EAAG,GACnBA,KAIR6tF,EAAOZ,EAAQjnF,EAAGqoF,KAIjBC,EAAT,SAAchzC,GACV,IAAM+yC,EAAcH,EAAS9pE,KAAK,KAClC8pE,EAAW,GACXC,EAAgB,GAGhB,IADA,IAAMI,EAAW,GACRvuF,EAAI,EAAGA,EAAIwuF,EAAevuF,OAAQD,IACnCiuF,EAAUO,EAAexuF,MACzBiuF,EAAUO,EAAexuF,KAAM,EAC/BuuF,EAAS/nF,KAAKgoF,EAAexuF,KAGrC,IAAK,IAAIyuF,EAAI,EAAGA,EAAIF,EAAStuF,OAAQwuF,IACjCZ,EACIU,EAASE,GACT,CACIC,eAAgB,aAChBC,gBAAiB,cAErBN,GAhFRT,EAAYjtF,SAAQ,SAAAo+C,GACXA,EAAK,IAGVA,EAAK,SA9EP6vC,EAAiB,CACnB79D,MAAS,CAAC,IAAK,YACf89D,IAAO,CAAC,MAAO,YACf7Q,MAAS,QACT8Q,KAAQ,UACRC,IAAO,CAAC,OAAQ,WAAY,aAC5BpxC,MAAS,QACTqxC,IAAO,SACPC,UAAa,YACbjjD,OAAU,SACVkjD,UAAa,IACbC,WAAc,IACd5oF,EAAK,CAAC,IAAK,KACXi4B,EAAK,CAAC,IAAK,KACX8C,EAAK,CAAC,IAAK,KACXt7B,EAAK,CAAC,IAAK,KACX2rD,EAAK,CAAC,IAAK,KACX87B,EAAK,CAAC,IAAK,KACXnmF,EAAK,CAAC,IAAK,KACXgvC,EAAK,CAAC,IAAK,KACX1H,EAAK,CAAC,IAAK,KACXy7B,EAAK,CAAC,IAAK,KACXzrC,EAAK,CAAC,IAAK,KACXC,EAAK,CAAC,IAAK,KACX4X,EAAK,CAAC,IAAK,KACX24C,KAAQ,IACRC,MAAS,IACTvhF,KAAQ,YACRC,MAAS,aACTuhF,GAAM,UACNC,KAAQ,YACRC,KAAQ,OACRtkE,IAAO,OAELsjE,EAAiBzuF,OAAOD,KAAK8uF,GAC7BX,EAAY,GACZD,EAAiB,GACnBE,EAAW,GAEXC,EAAgB,GACdP,EAAc,GAEX6B,EAAI,EAAGA,EAAIjB,EAAevuF,OAAQwvF,IAAK,CAC5CxB,EAAUO,EAAeiB,KAAM,EAE/B,IAAMC,EAAOd,EAAeJ,EAAeiB,IAC3C,GAAoB,iBAATC,EACP1B,EAAeY,EAAeJ,EAAeiB,KAAOjB,EAAeiB,QAEnE,IAAK,IAAIxF,EAAI,EAAGA,EAAIyF,EAAKzvF,OAAQgqF,IAC7B+D,EAAe0B,EAAKzF,IAAMuE,EAAeiB,GAgHrD,MAAO,CACHxjD,IAAK,SAAC0jD,GACF,IAAI/B,EAAYhoE,SAAS+pE,GAAzB,CAGA,IAAM7oD,EAA+B,IAAvB8mD,EAAY3tF,OAC1B2tF,EAAYpnF,KAAKmpF,GAEb7oD,IACA4lD,GAAiB/5E,SAAU,UAAWm7E,GACtCpB,GAAiB/5E,SAAU,QAASy7E,GACpC1B,GAAiBtyE,OAAQ,OAAQk0E,MAGzC/6E,OAAQ,SAACo8E,GACL,GAAK/B,EAAYhoE,SAAS+pE,GAA1B,CAIA,IADA,IAAMlkD,EAA8B,IAAvBmiD,EAAY3tF,OAChBD,EAAI,EAAGA,EAAI4tF,EAAY3tF,OAAQD,IACpC,GAAI4tF,EAAY5tF,KAAO2vF,EAAa,CAChC/B,EAAYrlF,OAAOvI,EAAG,GACtB,MAGJyrC,IACAohD,GAAoBl6E,SAAU,UAAWm7E,GACzCjB,GAAoBl6E,SAAU,QAASy7E,GACvCvB,GAAoBzyE,OAAQ,OAAQk0E,MAG5CsB,UAAW,WACP,OAAO3B,GAEX4B,SAAU,WACN,OAAO3B,IAvMA,GAsNN4B,GAAN,iCAAMA,EAQLjiF,mBARKiiF,GAcL3sF,KAAK4sF,OAASliF,EAAEkiF,OAChB5sF,KAAK6sF,KAAOniF,EAAEmiF,KACd7sF,KAAK8sF,OAASpiF,EAAEoiF,OAChB9sF,KAAKgM,IAAM,CAAChM,KAAK4sF,OAAQ5sF,KAAK6sF,KAAM7sF,KAAK8sF,QACzCvC,GAAUzhD,IAAI9oC,KAAKgM,uBAlBd2gF,EAAW,EAqBpBlvF,IAAA,kBAAA,SAAWqsF,GACP,KAAMA,KAAUS,GAAUkC,aACtB,KAAM,QAAU3C,EAAS,cAE7B,OAAOS,GAAUkC,YAAY3C,MAGjCrsF,IAAA,oBAAA,WACI,OAAO8sF,GAAUmC,WAAWzrE,KAAK,QAGrCxjB,IAAA,0BAAA,SAAmBsvF,GACf,IAAK,IAAIlwF,EAAI,EAAGA,EAAI0tF,GAAUmC,WAAW5vF,OAAQD,IAC7C,IAAKkwF,EAAUtqE,SAAS8nE,GAAUmC,WAAW7vF,IACzC,OAAO,EAGf,OAAO,KAGXY,IAAA,gBAAA,WACI8sF,GAAUn6E,OAAOpQ,KAAKgM,SA1CjB2gF,EAAN,YCvNSK,GAAK5pF,EAAWi4B,EAAWmzB,GACvC,OAAOprD,GAAK,EAAIorD,GAAKnzB,EAAImzB,WAGby+B,GAAMC,EAAYC,EAAYC,EAAYC,GACtD,OAAOt2E,KAAK4yB,KAAK5yB,KAAKwmB,IAAI2vD,EAAKE,EAAI,GAAKr2E,KAAKwmB,IAAI4vD,EAAKE,EAAI,aAa9CC,GAAkB7iF,EAAe8iF,GAC7C,OAAOx2E,KAAKy2E,MAAMD,EAAG7xD,EAAIjxB,EAAGixB,EAAG6xD,EAAG9xD,EAAIhxB,EAAGgxB,YAG7BgyD,GAAkBhjF,EAAe8iF,GAC7C,OAAkC,IAA3BD,GAAiB7iF,EAAI8iF,GAAYx2E,KAAK2uD,YAGjCgoB,GAAOC,EAAa/rE,EAAaF,GAC7C,OAAOisE,GAAO/rE,EACRA,EACA+rE,GAAOjsE,EACHA,EACAisE,WAGEC,GAAQnyD,EAAWC,EAAWmyD,GAC1C,IAAMC,EAAQD,GAAO92E,KAAK2uD,GAAK,KACzBqoB,EAAKh3E,KAAKi3E,IAAIF,GACdG,EAAKl3E,KAAKm3E,IAAIJ,GAEpB,MAAO,CACHryD,EAAGA,EAAIsyD,EAAKryD,EAAIuyD,EAChBvyD,EAAGD,EAAIwyD,EAAKvyD,EAAIqyD,GCrBxB,IA0KUI,GA2BFC,GACAC,GACAC,GACAC,GAxMFC,GAAe,SAAUtpB,OAMvBupB,EAKKzvC,EAAT,SAAc+4B,GACV7S,EAAS,CACLwpB,OAAQ33E,KAAK4gD,MAAMogB,EAAQ4W,GAC3BC,MAAOtmC,EAASsmC,MAChBC,MAAOvmC,EAASumC,MAChBC,QAASxmC,EAASwmC,QAClBC,QAASzmC,EAASymC,WAIjBC,EAAT,WACwB,OAAhBC,IACAjwC,EAAKiwC,GACLA,EAAc,MAEG,OAAjBN,GAA2BO,EAAazsE,SAASksE,IACjDO,EAAa7rF,KAAKsrF,GAEtBQ,EAAiB,EACjBR,EAAe,MA3BbO,EAAe,CAAC,KAClBC,EAAiB,EACjBR,EAAe,KAEfM,EAAc,KACd3mC,EAAW,KA0BftoD,KAAK4Z,QAAU,SAAUu+B,GAErBmQ,EAAW,CACPsmC,MAAOz2C,EAAMy2C,MACbC,MAAO12C,EAAM02C,MACbC,QAAS32C,EAAM22C,QACfC,QAAS52C,EAAM42C,SAGnBK,aAAaX,GACbA,EAAqBz1C,WAAWg2C,EA3CV,KA8CtB,IAAIjX,EAAQ5/B,EAAMu2C,OACd,cAAev2C,GAA6B,IAApBA,EAAMk3C,YAC9BtX,GAAS,IAAM,GAEnB,IAAMuX,EAAWv4E,KAAKsmB,IAAI06C,GAG1B,GAAIoX,EAAiB,GAAsB,OAAjBR,EAEtBM,EAAc,SAFlB,CAOA,GAAuB,IAAnBE,EAAsB,CAEtB,GADAA,IACIG,EAAW,GAEX,OAWJ,OARAX,EAAeW,OACXJ,EAAazsE,SAASksE,GAEtB3vC,EAAK+4B,GAGLkX,EAAclX,GAMtB,GAAiB,IAAbuX,EAAJ,CAIA,GACIA,IAAaX,GACZW,EAAWX,EAAgB,EAAI,WAG7B,GAAKA,EAAeW,EAAY,EAAI,KAEvCX,EAAeW,OAEZ,GAAIA,IAAaX,EAIpB,OAFAA,EAAe,UACfM,EAAc,MAKE,OAAhBA,IACAjwC,EAAKiwC,GACLA,EAAc,MAElBjwC,EAAK+4B,OA8DAwX,IAGHpB,GAAa,GA2BfC,GAA4B,EAC5BC,GAA+B,KAC/BC,IAA8B,EAC9BC,GAA0B,EAEvB,SAAU7jF,OA2iBT8kF,EACAC,EACAC,EA7fKC,EAAT,SAAoBC,GAChB,IAAK,IAAI/yF,EAAI,EAAGA,EAAIgzF,EAAW/yF,OAAQD,IACnC,GAAI+yF,IAAcC,EAAWhzF,GAAG+yF,UAC5B,OAAOC,EAAWhzF,GAG1B,OAAO,MAGFizF,EAAT,SAAuBF,GAEnB,IADA,IAAIG,EAAiB,KACZlzF,EAAI,EAAGA,EAAImzF,EAAiBlzF,OAAQD,IACrCmzF,EAAiBnzF,KAAO+yF,IACxBG,EAAiBF,EAAWhzF,GAC5BgzF,EAAWzqF,OAAOvI,EAAG,GACrBmzF,EAAiB5qF,OAAOvI,EAAG,GAC3BA,KAGR,OAAOkzF,GAIFE,EAAT,SAA2BC,EAAUrwF,GACjC,OAAiB,IAAbqwF,GAA+B,IAAbA,EACXA,GAQP9B,GAA4B,IAExBC,GAD8B,IAA9BD,GAC+B8B,EAEAlD,GAAIkD,EAAU7B,GAA8B,KAE/ED,MACQE,KACRA,IAA8B,EAE1BD,GAA+B,MAC/BE,GAA0B,MAK3Bx3E,KAAKwmB,IAAI2yD,EAAU,EAAI3B,MAYzB4B,EAAT,SAA6Bh4C,GACzB,GAAIA,EAAMi4C,UACN,OAAOj4C,EAAMi4C,UASjB,IAAMC,EAAe,CACjBT,UAAWz3C,EAAMy3C,UACjBU,YAAan4C,EAAMm4C,YACnB1B,MAAOz2C,EAAMy2C,MACbC,MAAO12C,EAAM02C,MACbC,QAAS32C,EAAM22C,QACfC,QAAS52C,EAAM42C,QACfwB,UAAWp4C,EAAMo4C,UACjBC,UAAWr4C,EAAMq4C,UACjBnI,UAAWlwC,EAAMkwC,UAAYoI,EAC7BP,SAAUD,EAAkB93C,EAAM+3C,SAAU/3C,EAAMt4C,MAClD6wF,QAASv4C,EAAMu4C,QACfC,OAAQx4C,EAAMw4C,OACdC,aAAc,GACdC,oBAAqB,WACjB14C,EAAMozC,kBAEVuF,qBAAsB,WAClB34C,EAAMqzC,oBAGdrzC,EAAMi4C,UAAYC,EAElB,IAAIU,EAAiB,KACjB,cAAe54C,EACX,aAAcA,GAA2B,IAAlBA,EAAMu4C,UAAkB,CAAC,SAASjuE,SAAS01B,EAAMm4C,cAAuC,UAAtBn4C,EAAMm4C,aAA8C,IAAnBn4C,EAAM+3C,YAChIG,EAAaH,SAAW,EACxBa,EAAiB,IAGrBV,EAAaT,UAAY,EACzBS,EAAaC,YAAc,QAC3BD,EAAaH,SAA6B,IAAlB/3C,EAAMu4C,QAAgB,EAAI,EAClDK,EAAiBV,EAAaH,UAG9BlI,IAAkC,SAArB7vC,EAAMm4C,aAAyC,gBAAfn4C,EAAMt4C,MAA4C,IAAlBs4C,EAAMu4C,UACnFL,EAAaK,QAAU,GAG3B,IAAIM,EAAoB,GACpB,uBAAwB74C,IACxB64C,EAAoB74C,EAAM84C,sBAM9B,IAAIC,EAvLZ,SAAoB/4C,GAChB,IAAK,IAAIt7C,EAAIsxF,GAAWrxF,OAAS,EAAGD,GAAK,EAAGA,IACxC,GAAIs7C,EAAMy3C,YAAczB,GAAWtxF,GAAG+yF,UAClC,OAAOzB,GAAWtxF,GAG1B,OAAO,KAiLcs0F,CAAWd,GACT,OAAfa,IACAA,EAxMZ,SAAoB/4C,GAChB,IAAM+4C,EAAa,CACftB,UAAWz3C,EAAMy3C,UACjBwB,UAAW,KACXC,UAAW,MAQf,OANAlD,GAAW9qF,KAAK6tF,GAEZ/C,GAAWrxF,OAAS,IACpBqxF,GAAWtT,QAGRqW,EA4LcI,CAAWjB,IAM5B,IAHA,IAAMkB,EAAaL,EAAWE,UACxBI,EAAaN,EAAWG,UAErBx0F,EAAI,EAAGA,EAAIm0F,EAAkBl0F,OAAQD,IAAK,CAC/C,IAAM40F,EAAYT,EAAkBn0F,GAEpCwzF,EAAaO,aAAavtF,KAAK,CAC3BurF,MAAO6C,EAAU7C,MACjBC,MAAO4C,EAAU5C,MACjBC,QAAS2C,EAAU3C,QACnBC,QAAS0C,EAAU1C,QACnBwB,UAAoC,OAAzBW,EAAWE,UAAqB,EAAIK,EAAU7C,MAAQsC,EAAWE,UAC5EZ,UAAoC,OAAzBU,EAAWG,UAAqB,EAAII,EAAU5C,MAAQqC,EAAWG,UAC5EhJ,UAAmC,IAAxBoJ,EAAUpJ,UAAkBgI,EAAahI,UAAaoJ,EAAUpJ,UAAYoI,EACvFP,SAA6B,OAAnBa,EAA0Bd,EAAkBwB,EAAUvB,UAAYa,IAGhFG,EAAWE,UAAYK,EAAU7C,MACjCsC,EAAWG,UAAYI,EAAU5C,MAQrC,OALAqC,EAAWE,UAAYf,EAAazB,MACpCsC,EAAWG,UAAYhB,EAAaxB,MACpCwB,EAAaE,UAA2B,OAAfgB,EAAsB,EAAIL,EAAWE,UAAYG,EAC1ElB,EAAaG,UAA2B,OAAfgB,EAAsB,EAAIN,EAAWG,UAAYG,EAEnEnB,GAYFqB,EAAT,SAA+BC,EAASC,EAAgBC,GAEpD,IAAMC,EAASC,EAAcC,wBACvB/yF,EAAc,CAChBY,KAAM8xF,EACN/B,UAAWgC,EAAehC,UAC1BU,YAAasB,EAAetB,YAC5B1B,MAAOgD,EAAehD,MACtBC,MAAO+C,EAAe/C,MACtBC,QAAS8C,EAAe9C,QACxBC,QAAS6C,EAAe7C,QACxBkD,KAAML,EAAe9C,QAAUgD,EAAOnnF,KAAOonF,EAAc3K,WAC3D8K,KAAMN,EAAe7C,QAAU+C,EAAO1I,IAAM2I,EAAc1K,UAC1D8K,GAAIP,EAAerB,UACnB6B,GAAIR,EAAepB,UACnB6B,KAAMT,EAAevJ,UACrBwI,oBAAqBe,EAAef,oBACpCC,qBAAsBc,EAAed,sBAGzC,GAAgB,gBAAZa,IACA1yF,EAAO2xF,aAAe,GAClBgB,EAAehB,aAAa9zF,OAAS,GAErC,IADA,IAAIw1F,EACKz1F,EAAI,EAAGA,EAAI+0F,EAAehB,aAAa9zF,OAAQD,IACpDy1F,EAAgBV,EAAehB,aAAa/zF,GAC5CoC,EAAO2xF,aAAavtF,KAAK,CACrBurF,MAAO0D,EAAc1D,MACrBC,MAAOyD,EAAczD,MACrBC,QAASwD,EAAcxD,QACvBC,QAASuD,EAAcvD,QACvBkD,KAAMK,EAAcxD,QAAUgD,EAAOnnF,KAAOonF,EAAc3K,WAC1D8K,KAAMI,EAAcvD,QAAU+C,EAAO1I,IAAM2I,EAAc1K,UACzD8K,GAAIG,EAAc/B,UAClB6B,GAAIE,EAAc9B,UAClB6B,KAAMC,EAAcjK,YAMpC,GAAIwJ,EAEA,IADA,IAAM9H,EAASntF,OAAOD,KAAKk1F,GAClBvF,EAAI,EAAGA,EAAIvC,EAAOjtF,OAAQwvF,IAC/BrtF,EAAO8qF,EAAOuC,IAAMuF,EAAO9H,EAAOuC,IAI1C,OAAOrtF,GAYFszF,EAAT,SAA6BZ,EAASa,EAAeC,EAAYZ,GAC7D,IAAMC,EAASC,EAAcC,wBACvB/yF,EAAc,CAChBY,KAAM8xF,EACN/B,UAAW4C,EAAcE,WACzBpC,YAAa,QACb1B,MAAO4D,EAAc5D,MACrBC,MAAO2D,EAAc3D,MACrBC,QAAS0D,EAAc1D,QACvBC,QAASyD,EAAczD,QACvBkD,KAAMO,EAAc5D,MAAQkD,EAAOnnF,KAAOonF,EAAc3K,WACxD8K,KAAMM,EAAc3D,MAAQiD,EAAO1I,IAAM2I,EAAc1K,UACvDgL,KAAMI,EAAWpK,UAAYoI,EAC7BI,oBAAqB,WAAa4B,EAAWlH,kBAC7CuF,qBAAsB,WAAa2B,EAAWjH,oBAGlC,gBAAZmG,IACA1yF,EAAO2xF,aAAe,IAI1B,IADA,IAAM7G,EAASntF,OAAOD,KAAKk1F,GAClBh1F,EAAI,EAAGA,EAAIktF,EAAOjtF,OAAQD,IAC/BoC,EAAO8qF,EAAOltF,IAAMg1F,EAAO9H,EAAOltF,IAGtC,OAAOoC,GASF0zF,EAAT,WACIjJ,GAAoBl6E,SAAU,cAAeojF,GAC7ClJ,GAAoBl6E,SAAU,YAAaqjF,GAC3CnJ,GAAoBl6E,SAAU,eAAgBsjF,IAIzCC,EAAT,WACIC,IACIC,GACAA,GAAqB,IAIpBC,EAAT,WACIF,IACIC,GACAA,GAAqB,IAIpBE,EAAT,SAAuBh7C,GACnBA,EAAQg4C,EAAoBh4C,GAE5B,IAAMi7C,EAAsBC,EAG5B,GAFAA,EAAkBl7C,EAAMm4C,YAEpBN,EAAiBvtE,SAAS01B,EAAMy3C,YAAcI,EAAiBlzF,SAAWw2F,GAAqC,UAAtBn7C,EAAMm4C,YAC/FiD,GAAU,OAKd,GAAKA,GAAiC,UAAtBp7C,EAAMm4C,aAAmD,QAAxB8C,EAAjD,CAIAG,GAAU,EAEV,IAAMC,EAAW9B,EAAsB,cAAev5C,GACtDs7C,EAAkBD,QANdD,GAAU,GAUTG,EAAT,SAAuBv7C,GAInB,GAFAA,EAAQg4C,EAAoBh4C,IAExB63C,EAAiBvtE,SAAS01B,EAAMy3C,YAAcI,EAAiBlzF,SAAWw2F,GAAiB,CAAC,EAAG,EAAG,GAAG7wE,SAAS01B,EAAMu4C,SAAxH,CAO0B,IAAtBb,EAAW/yF,SA5DfysF,GAAiB/5E,SAAU,cAAeojF,GAC1CrJ,GAAiB/5E,SAAU,YAAaqjF,GACxCtJ,GAAiB/5E,SAAU,eAAgBsjF,IA6D3C,IAAMa,EAAU,CACZ/D,UAAWz3C,EAAMy3C,UACjBU,YAAan4C,EAAMm4C,YACnBsD,UAAWz7C,EAAMy2C,MACjBiF,UAAW17C,EAAM02C,MACjB6B,QAASv4C,EAAMu4C,QACfU,UAAWj5C,EAAMy2C,MACjByC,UAAWl5C,EAAM02C,MACjBiF,cAAe37C,EAAMkwC,WAEzBwH,EAAWxsF,KAAKswF,GAChBI,EAAgBJ,GAChB3D,EAAiB3sF,KAAK80C,EAAMy3C,WAE5B,IAAM4D,EAAW9B,EAAsB,cAAev5C,EAAO,CACzDy7C,UAAWz7C,EAAMy2C,MACjBiF,UAAW17C,EAAM02C,MACjB8B,OAAQqD,EAAa77C,EAAMu4C,SAC3BR,SAAU/3C,EAAM+3C,WAGpBuD,EAAkBD,KAIbZ,EAAT,SAA6Bz6C,GAIzB,GAFAA,EAAQg4C,EAAoBh4C,GAEtB63C,EAAiBvtE,SAAS01B,EAAMy3C,WAAtC,CAIA,IAAM+D,EAAUhE,EAAWx3C,EAAMy3C,WAIjC,GAHAqE,EAAkBN,GAGdx7C,EAAMu4C,UAAYiD,EAAQjD,SAqB9B,GAHAqD,EAAgBJ,GAIU,QAAtBx7C,EAAMm4C,aACNn4C,EAAMy2C,QAAU+E,EAAQvC,WACxBj5C,EAAM02C,QAAU8E,EAAQtC,WACxBl5C,EAAMkwC,YAAcsL,EAAQG,cAJhC,CAUA,IAAMI,EAAWxC,EAAsB,cAAev5C,EAAO,CACzDy7C,UAAWD,EAAQC,UACnBC,UAAWF,EAAQE,UACnBlD,OAAQqD,EAAa77C,EAAMu4C,SAC3BR,SAAU/3C,EAAM+3C,WAGpByD,EAAQvC,UAAYj5C,EAAMy2C,MAC1B+E,EAAQtC,UAAYl5C,EAAM02C,MAC1B8E,EAAQG,cAAgB37C,EAAMkwC,UAE9BoL,EAAkBS,QA1ClB,CAI8B,IAAtBrE,EAAW/yF,QACX61F,IAEJ7C,EAAc33C,EAAMy3C,WAEpB,IAAM4D,EAAW9B,EAAsB,YAAav5C,EAAO,CACvDy7C,UAAWD,EAAQC,UACnBC,UAAWF,EAAQE,YAEvBJ,EAAkBD,MAiCjBX,EAAT,SAA2B16C,GAIvB,GAFAA,EAAQg4C,EAAoBh4C,GAEtB63C,EAAiBvtE,SAAS01B,EAAMy3C,WAAtC,CAK0B,IAAtBC,EAAW/yF,QACX61F,IAEJ,IAAMgB,EAAU7D,EAAc33C,EAAMy3C,WACpCqE,EAAkBN,GAElB,IAAMH,EAAW9B,EAAsB,YAAav5C,EAAO,CACvDy7C,UAAWD,EAAQC,UACnBC,UAAWF,EAAQE,YAEvBJ,EAAkBD,KAIbV,EAAT,SAA8B36C,GAI1B,GAFAA,EAAQg4C,EAAoBh4C,GAEtB63C,EAAiBvtE,SAAS01B,EAAMy3C,WAAtC,CAK0B,IAAtBC,EAAW/yF,QACX61F,IAEJ,IAAMgB,EAAU7D,EAAc33C,EAAMy3C,WACpCqE,EAAkBN,GAElB,IAAMH,EAAW9B,EAAsB,YAAav5C,EAAO,CACvDy7C,UAAWD,EAAQC,UACnBC,UAAWF,EAAQE,YAEvBJ,EAAkBD,KAmCbO,EAAT,SAAyBJ,GACO,UAAxBA,EAAQrD,cAGZqD,EAAQQ,aAAen7C,YAAW,YA1BtC,SAAwB26C,GAGpB,IAAMS,EAAY,CACdxE,UAAW+D,EAAQ/D,UACnBU,YAAaqD,EAAQrD,YACrBzwF,KAAM,YACNwoF,UAAWgM,YAAY57C,MACvBm2C,MAAO,EACPC,MAAO,EACPC,QAAS,EACTC,QAAS,EACTxD,eAAgB,aAEhBC,gBAAiB,cAKrBqH,EAAkBuB,GAQdE,CAAeX,KAChB,QAGEM,EAAT,SAA2BN,GAClBA,EAAQQ,eAGb/E,aAAauE,EAAQQ,cACrBR,EAAQQ,aAAe,OAzhBrBpC,EAAgBrnF,EAAExN,OAClBu2F,EAAoB/oF,EAAE6pF,UACtBC,EAAkB9pF,EAAE+pF,QACpBxB,EAAuBvoF,EAAEgqF,aACzBpB,EAAc,gBAAiB5oF,EAAIA,EAAE4oF,YAAc,EACnDU,EAAe,CACjB,EAAK,OACL,EAAK,QACL,EAAK,UAEHW,EAAe,IAAInG,IAAa,SAAUoG,GAC5C,IAAIC,GAGAL,EAAiB,CACjB,IAAM1C,EAASC,EAAcC,wBAC7B4C,EAAW3C,KAAO2C,EAAW9F,QAAUgD,EAAOnnF,KAAOonF,EAAc3K,WACnEwN,EAAW1C,KAAO0C,EAAW7F,QAAU+C,EAAO1I,IAAM2I,EAAc1K,UAClEmN,EAAgBI,OAGpBC,GAAc,EAEZpE,EAAkBtI,KAA8B,GAAKkM,YAAYS,OAAOC,gBAI1E1B,EAAkB,GAClBE,GAAU,EAgBR1D,EAAa,GACbG,EAAmB,GA0QrBgD,EAAgB,EAsOhBC,IACA1J,GAAiBwI,EAAe,eAAgBgB,GAChDxJ,GAAiBwI,EAAe,eAAgBmB,IAEhDO,IACAlK,GAAiBwI,EAAe,cAAeoB,GAC/C5J,GAAiBwI,EAAe,cAAe2B,IAE/Cc,GACAjL,GAAiBwI,EAAe,QAAS4C,EAAa/6E,SASpD6uE,GA2GK/9E,EAAEsqF,aAKTzL,GAAiBwI,EAAe,YAHhCtC,EAAc,SAAS5sF,GACnBA,EAAE0oF,oBA5GNiE,EAAe,SAAUr3C,GAErBA,EAAMozC,iBAGN,IADA,IAAM0J,EAAW98C,EAAM+8C,eACdr4F,EAAI,EAAGA,EAAIo4F,EAASn4F,QAAU+yF,EAAW/yF,OAASw2F,EAAaz2F,IAAK,CACzE,IAAMs4F,EAAWF,EAASp4F,GAGA,IAAtBgzF,EAAW/yF,SACXysF,GAAiB/5E,SAAU,YAAaigF,GACxClG,GAAiB/5E,SAAU,WAAYkgF,GACvCnG,GAAiB/5E,SAAU,cAAekgF,IAE9CG,EAAWxsF,KAAK,CACZusF,UAAWuF,EAASzC,WACpBkB,UAAWuB,EAASvG,MACpBiF,UAAWsB,EAAStG,MACpB6B,QAAS,EACTU,UAAW+D,EAASvG,MACpByC,UAAW8D,EAAStG,QAExBmB,EAAiB3sF,KAAK8xF,EAASzC,YAE/B,IAAMc,EAAWjB,EAAoB,cAAe4C,EAAUh9C,EAAO,CACjEg6C,GAAI,EACJC,GAAI,EACJwB,UAAWuB,EAASvB,UACpBC,UAAWsB,EAAStB,UACpBlD,OAAQ,OACRT,SAAU,IAEduD,EAAkBD,KAK1B/D,EAAc,SAAUt3C,GACpBA,EAAMozC,iBAIN,IADA,IAAM0J,EAAW98C,EAAM+8C,eACdr4F,EAAI,EAAGA,EAAIo4F,EAASn4F,OAAQD,IAAK,CACtC,IAAMs4F,EAAWF,EAASp4F,GAE1B,GAAMmzF,EAAiBvtE,SAAS0yE,EAASzC,YAAzC,CAGA,IAAMiB,EAAUhE,EAAWwF,EAASzC,YAE9Bc,EAAWjB,EAAoB,cAAe4C,EAAUh9C,EAAO,CACjEg6C,GAAIgD,EAASvG,MAAQ+E,EAAQvC,UAC7BgB,GAAI+C,EAAStG,MAAQ8E,EAAQtC,UAC7BuC,UAAWD,EAAQC,UACnBC,UAAWF,EAAQE,UACnBlD,OAAQ,OACRyE,aAAa,EACblF,SAAU,IAEdyD,EAAQvC,UAAY+D,EAASvG,MAC7B+E,EAAQtC,UAAY8D,EAAStG,MAC7B4E,EAAkBD,MAM1B9D,EAAa,SAAUv3C,GACA,gBAAfA,EAAMt4C,MACNs4C,EAAMozC,iBAKV,IADA,IAAM0J,EAAW98C,EAAM+8C,eACdr4F,EAAI,EAAGA,EAAIo4F,EAASn4F,OAAQD,IAAK,CACtC,IAAMs4F,EAAWF,EAASp4F,GAE1B,GAAMmzF,EAAiBvtE,SAAS0yE,EAASzC,YAAzC,CAK0B,IAAtB7C,EAAW/yF,SACX4sF,GAAoBl6E,SAAU,YAAaigF,GAC3C/F,GAAoBl6E,SAAU,WAAYkgF,GAC1ChG,GAAoBl6E,SAAU,cAAekgF,IAEjD,IAAMiE,EAAU7D,EAAcqF,EAASzC,YAEjCc,EAAWjB,EAAoB,YAAa4C,EAAUh9C,EAAO,CAC/Dg6C,GAAIgD,EAASvG,MAAQ+E,EAAQvC,UAC7BgB,GAAI+C,EAAStG,MAAQ8E,EAAQtC,UAC7BuC,UAAWD,EAAQC,UACnBC,UAAWF,EAAQE,YAGvBJ,EAAkBD,MAKtBC,GACAlK,GAAiBwI,EAAe,aAAcvC,IAetDxvF,KAAKq1F,OAAS,WACV,OAAOrC,EAAgB,GAG3BhzF,KAAKs1F,QAAU,WACPT,IAGJA,GAAc,EACdnL,GAAoBqI,EAAe,eAAgBgB,GACnDrJ,GAAoBqI,EAAe,eAAgBmB,GACnDxJ,GAAoBqI,EAAe,cAAeoB,GAClDzJ,GAAoBqI,EAAe,cAAe2B,GAClDhK,GAAoBqI,EAAe,QAAS4C,EAAa/6E,SACrDi2E,EAAW/yF,OAAS,GACpB61F,IAGElK,GAQFiB,GAAoBqI,EAAe,YAAatC,IAPhD/F,GAAoBqI,EAAe,aAAcvC,GAC7CK,EAAW/yF,OAAS,IACpB4sF,GAAoBl6E,SAAU,YAAaigF,GAC3C/F,GAAoBl6E,SAAU,WAAYkgF,GAC1ChG,GAAoBl6E,SAAU,cAAekgF,mbC14B1D,IAAM6F,GAAa,SAAU7qF,GAgBhC,QAXS8qF,EAAT,SAAuB34F,EAAGs7C,GACtB,KAAOt7C,EAAI44F,EAAS34F,OAAQD,IAExB,GAAc,QADds7C,EAAQs9C,EAAS54F,GAAG64F,QAAQv9C,IAExB,OAAO,KAIf,OADAw9C,EAASx9C,GACF,MAXLs9C,EAAW/qF,EAAE+qF,SACfE,EAAyB,aAapBrJ,EAAI,EAAGA,EAAImJ,EAAS34F,OAAQwvF,KAAC,SACvBzvF,GACP44F,EAAS54F,GAAG+4F,aAAY,SAAUz9C,GAC9Bq9C,EAAc34F,EAAI,EAAGs7C,MAHK,CAK/Bm0C,GAKPtsF,KAAK01F,QAAU,SAAUv9C,GACrB,OAAOq9C,EAAc,EAAGr9C,IAE5Bn4C,KAAK41F,YAAc,SAAU56E,GACzB26E,EAAW36E,IAoBN66E,GAAe,SAAUnrF,OAuBzByzC,EAAT,WACI,GAA2B,IAAvB23C,EAAYh5F,OAAhB,CAGAsyF,aAAa2G,EAAW53C,MACxBixC,aAAa2G,EAAWC,oBACxB5G,aAAa2G,EAAWE,SACxBF,EAAW53C,KAAO,KAClB43C,EAAWC,mBAAqB,KAChCD,EAAWE,QAAU,KAGrB,IAAK,IAAIp5F,EAAI,EAAGA,EAAIq5F,EAAcp5F,OAAQD,IACtC84F,EAASO,EAAcr5F,IAE3Bq5F,EAAgB,GAEhBJ,EAAc,KAITG,EAAT,WACIF,EAAW53C,KAAO,KAClB43C,EAAWE,QAAU,KACrBC,EAAgB,GAChB,IAAMC,EAAmBL,EAAYA,EAAYh5F,OAAS,GAC1Dg5F,EAAc,GACdprF,EAAE0rF,YAAY,CAACxH,MAAOuH,EAAiBvH,MAAOC,MAAOsH,EAAiBtH,SAWjEwH,EAAT,SAAsBC,EAAYC,EAAYC,GAC1C,IAAMC,EAAOD,EAASE,EAEtB,QAAID,GAAQ,KAGZV,EAAWO,GAAct9C,WAAWu9C,EAAYE,IACzC,IAlEPd,EAAyB,aAEvBgB,EAA6B,IAC7BC,EAAuB,IACvBC,EAAuB,GACvBC,EAAyB,GACzBC,EAAsB,IACtBC,EAA+B,IAC/BC,EAAoB,IAEtBC,EAAwB,CAAC,QAAS,QAAS,OAC3CC,EAAmB,CAAC,QAEpBrB,EAAc,GACZsB,EAAoB,GACtBC,EAAa,EACbX,EAAU,EAEVR,EAAgB,GAkCdH,EAAa,CACf53C,KAAM,KACN63C,mBAAoB,KACpBC,QAAS,MAqKbj2F,KAAK01F,QAAU,SAAUv9C,GAIrB,OAvJJ,SAAsBA,GAElB,GAAmB,gBAAfA,EAAMt4C,KACNu3F,EAAkB/zF,KAAK80C,EAAMy3C,gBAC1B,GAAmB,cAAfz3C,EAAMt4C,KACb,IAAK,IAAIhD,EAAI,EAAGA,EAAIu6F,EAAkBt6F,OAAQD,IAC1C,GAAIu6F,EAAkBv6F,KAAOs7C,EAAMy3C,UAAW,CAC1CwH,EAAkBhyF,OAAOvI,EAAG,GAC5B,MAKZ,GAAKq6F,EAAsBz0E,SAAS01B,EAAMm4C,aAA1C,CAMAoG,EAAUrC,YAAY57C,MACtB,IAAM09C,EAAmBL,EAAYh5F,OAAS,EAAIg5F,EAAYA,EAAYh5F,OAAS,GAAK,KAKxF,GAJmB,cAAfq7C,EAAMt4C,OACNw3F,EAAal/C,EAAMk6C,MAGJ,gBAAfl6C,EAAMt4C,KAAwB,CAC9B,GAAIu3F,EAAkBt6F,OAAS,EAG3B,YADAqhD,IAGJ,GAA2B,OAAvB43C,EAAWE,QAGX,YADA93C,IAGJ,GAA2B,IAAvB23C,EAAYh5F,QAAgB45F,EAAUW,EAAaV,EAGnD,YADAx4C,IAGJ,IAAKg5C,EAAiB10E,SAAS01B,EAAMw4C,QAGjC,YADAxyC,IAGJ,GAAIg4C,GAAoBA,EAAiBmB,QAAUxB,EAAYh5F,OAAS,EAGpE,YADAqhD,IAGJ,GAAIg4C,GACiBlJ,GAAKkJ,EAAiB7tC,SAAS,GAAI6tC,EAAiB7tC,SAAS,GAAInQ,EAAMy2C,MAAOz2C,EAAM02C,OACtFiI,IAEX34C,IAEIu4C,EAAUP,EAAiB9D,KAAOsE,GAClC,OAYZ,GARAb,EAAYzyF,KAAK,CACbi0F,QAAQ,EACRjF,KAAMqE,EACNpuC,SAAU,CAACnQ,EAAMy2C,MAAOz2C,EAAM02C,OAC9Be,UAAWz3C,EAAMy3C,YAIjBkG,EAAYh5F,OAAS,EACrBsyF,aAAa2G,EAAWC,yBACrB,IAAKK,EAAa,qBAAsBl4C,EAAMhG,EAAMk6C,KAAO2E,GAG9D,YADA74C,IAMJ,GADAixC,aAAa2G,EAAW53C,OACnBk4C,EAAa,OAAQl4C,EAAMhG,EAAMk6C,KAAOuE,GAGzC,YADAz4C,IAIR,GAAIg4C,GAAmC,gBAAfh+C,EAAMt4C,MAA0Bs2F,EAAiBvG,YAAcz3C,EAAMy3C,WAMxE3C,GAAKkJ,EAAiB7tC,SAAS,GAAI6tC,EAAiB7tC,SAAS,GAAInQ,EAAMy2C,MAAOz2C,EAAM02C,OACtFgI,EAGX,YADA14C,IAIR,GAAIg4C,GAAmC,cAAfh+C,EAAMt4C,KAAsB,CAChD,GAAIs2F,EAAiBvG,YAAcz3C,EAAMy3C,UAErC,YADAzxC,IAGJ,GAAIu4C,GAAWP,EAAiB9D,KAAOuE,EAEnC,YADAz4C,IAKJ,GAFAixC,aAAa2G,EAAW53C,MAEpB23C,EAAYh5F,OAAS,EACrB,OAAKu5F,EAAa,OAAQl4C,EAAMhG,EAAMk6C,KAAO0E,QAK7CjB,EAAc,CACVK,EACA,CACIoB,MAAM,EACNlF,KAAMqE,EACNpuC,SAAU,CAACnQ,EAAMy2C,MAAOz2C,EAAM02C,eATlC1wC,IAeJu4C,EAAUZ,EAAY,GAAGzD,KAAO0E,GAGhCjB,EAAYzyF,KAAK,CACburF,MAAOz2C,EAAMy2C,MACbC,MAAO12C,EAAM02C,QAEZwH,EAAa,UAAWJ,EAAS99C,EAAMk6C,KAAO4E,IAC/C94C,KAGJA,UA3HJA,IAsIJq5C,CAAar/C,GAEc,IAAvB29C,EAAYh5F,QACZqhD,IACOhG,IAGX+9C,EAAc7yF,KAAK80C,GACZ,OAGXn4C,KAAK41F,YAAc,SAAU56E,GACzB26E,EAAW36E,GAGfhb,KAAKy3F,yBAA2B,SAAUn5F,GACtC44F,EAAwB54F,GAG5B0B,KAAK03F,oBAAsB,SAAUp5F,GACjC64F,EAAmB74F,IAmBdq5F,GAAgB,SAAUjtF,OAuB/BktF,EA0BAlB,EArBKv4C,EAAT,WACI,GAA6B,IAAzB+3C,EAAcp5F,OAAlB,CAGAsyF,aAAa2G,EAAW8B,sBACxBzI,aAAa2G,EAAW+B,YACxB,IAAK,IAAIj7F,EAAI,EAAGA,EAAIq5F,EAAcp5F,OAAQD,IACtC84F,EAASO,EAAcr5F,IAE3Bq5F,EAAgB,GAChB6B,EAAY,KAiBP1B,EAAT,SAAsBC,EAAYE,GAC9B,IAAMC,EAAOD,EAASE,EAEtB,QAAID,GAAQ,KAGZV,EAAWO,GAAct9C,WAAWmF,EAAMs4C,IACnC,IAGFe,EAAT,SAAsBr/C,GAElB,IAAM6/C,EAAoBC,EAG1B,GAFAA,EAAgB9/C,EAAMk6C,KAEH,gBAAfl6C,EAAMt4C,KACNu3F,EAAkB/zF,KAAK80C,EAAMy3C,gBAC1B,GAAmB,cAAfz3C,EAAMt4C,KACb,IAAK,IAAIhD,EAAI,EAAGA,EAAIu6F,EAAkBt6F,OAAQD,IAC1C,GAAIu6F,EAAkBv6F,KAAOs7C,EAAMy3C,UAAW,CAC1CwH,EAAkBhyF,OAAOvI,EAAG,GAC5B,MAKZ,GAA0B,UAAtBs7C,EAAMm4C,YAAV,CASA,GAFAoG,EAAUrC,YAAY57C,MAEH,gBAAfN,EAAMt4C,KAEN,OAAIk4F,EAAUj7F,OAAS,IAAMs6F,EAAkBt6F,QAI3Ci7F,EAAUj7F,SAAWo7F,GAKrBH,EAAUj7F,OAAS,GAAKq7C,EAAMk6C,KAAO8F,EAA2BJ,EAAU,GAAGK,UAKxD,IAArBL,EAAUj7F,QAAgBq7C,EAAMk6C,KAAOsE,EAA6BqB,OAbpE75C,IAmBqB,IAArB45C,EAAUj7F,SACV86F,EAAgBz/C,EAAMk6C,KAEjBgE,EAAa,uBAAwBl+C,EAAMk6C,KAAO8F,IAA8B9B,EAAa,aAAcl+C,EAAMk6C,KAAOgG,SAMjIN,EAAU10F,KAAK,CACXusF,UAAWz3C,EAAMy3C,UACjBwI,SAAUjgD,EAAMk6C,KAChBuB,UAAWz7C,EAAMy2C,MACjBiF,UAAW17C,EAAM02C,aATb1wC,IAeZ,GAAmB,gBAAfhG,EAAMt4C,KAAwB,CAE9B,GAAyB,IAArBk4F,EAAUj7F,OAEV,OAIJ,IADA,IAAIw7F,EAAY,KACPhN,EAAI,EAAGA,EAAIyM,EAAUj7F,OAAQwuF,IAClC,GAAIyM,EAAUzM,GAAGsE,YAAcz3C,EAAMy3C,UAAW,CAC5C0I,EAAYP,EAAUzM,GACtB,MAGR,GAAkB,OAAdgN,EAEA,YADAn6C,IAIJ,GAAIhG,EAAMk6C,KAAOgG,EAAWT,EAGxB,YADAz5C,IAKJ,GADiB8uC,GAAK90C,EAAMy2C,MAAOz2C,EAAM02C,MAAOyJ,EAAU1E,UAAW0E,EAAUzE,WAChEgD,EAGX,YADA14C,IAMR,GAAmB,cAAfhG,EAAMt4C,KAAsB,CAE5B,GAAyB,IAArBk4F,EAAUj7F,OAEV,OAIJ,GAAIi7F,EAAUj7F,SAAWo7F,EAGrB,YADA/5C,IAMJ,IAFA,IAAIo6C,EAAY,KACZC,EAAI,EACDA,EAAIT,EAAUj7F,OAAQ07F,IACzB,GAAIT,EAAUS,GAAG5I,YAAcz3C,EAAMy3C,UAAW,CAC5C2I,EAAYR,EAAUS,GACtB,MAGR,GAAkB,OAAdD,EAEA,OAGJ,GAAIpgD,EAAMk6C,KAAOgG,EAAWT,EAGxB,YADAz5C,IAKJ,GADiB8uC,GAAK90C,EAAMy2C,MAAOz2C,EAAM02C,MAAO0J,EAAU3E,UAAW2E,EAAU1E,WAChEgD,EAIX,YADA14C,IAIJo6C,EAAUhB,MAAO,EAGjB,IADA,IAAIkB,GAAW,EACNC,EAAI,EAAGA,EAAIX,EAAUj7F,OAAQ47F,IAClC,IAAKX,EAAUW,GAAGnB,KAAM,CACpBkB,GAAW,EACX,MAKR,GAAIA,EAEA,OAjLRrJ,aAAa2G,EAAW8B,sBACxBzI,aAAa2G,EAAW+B,YACxB5B,EAAgB,GAChB6B,EAAY,GACZrtF,EAAEiuF,SA6Ka,QAzIPZ,EAAUj7F,OAAS,GACnBqhD,KAjFN+5C,EAAUxtF,EAAEwtF,QACdvC,EAAyB,aAGvBgB,EAA6B,GAC7B0B,EAAW,IACXF,EAA2B,IAC3BtB,EAAuB,GAazBkB,EAAY,GAEZ7B,EAAgB,GAChB+B,EAAgB,EACdb,EAAoB,GAwBpBrB,EAAa,CACf8B,qBAAsB,KACtBC,WAAY,MAkLhB93F,KAAK01F,QAAU,SAAUv9C,GAMrB,OAAe,IAJAq/C,EAAar/C,GAMjB,KAEc,IAArB4/C,EAAUj7F,OACHq7C,GAEP+9C,EAAc7yF,KAAK80C,GAGhB,OAIXn4C,KAAK41F,YAAc,SAAU56E,GACzB26E,EAAW36E,IA6BN49E,GAAc,SAAUluF,OA6C7BgsF,EApBK3uE,EAAT,WACI8wE,EAAa,KACb3C,EAAgB,IAGX/3C,EAAT,SAAc26C,GACV,GAAKD,EAAL,CAKA,GADAzJ,aAAa2G,EAAWgD,sBACnBD,EACD,IAAK,IAAIj8F,EAAI,EAAGA,EAAIq5F,EAAcp5F,OAAQD,IACtC84F,EAASO,EAAcr5F,IAG/BkrB,MAmBKyvE,EAAT,SAAsBr/C,GAElB,GAAmB,gBAAfA,EAAMt4C,KACNu3F,EAAkB/zF,KAAK80C,EAAMy3C,gBAE1B,GAAmB,cAAfz3C,EAAMt4C,KACb,IAAK,IAAIhD,EAAI,EAAGA,EAAIu6F,EAAkBt6F,OAAQD,IAC1C,GAAIu6F,EAAkBv6F,KAAOs7C,EAAMy3C,UAAW,CAC1CwH,EAAkBhyF,OAAOvI,EAAG,GAC5B,MAMZ,GACKg8F,KACyB,UAAtB1gD,EAAMm4C,aACU,gBAAfn4C,EAAMt4C,MAA0Bu3F,EAAkBt6F,OAAS,GAC5Ds6F,EAAkBt6F,OAAS,GACZ,cAAfq7C,EAAMt4C,MALd,CAeA,GAJA62F,EAAUrC,YAAY57C,MAIH,gBAAfN,EAAMt4C,KAEN,OAAIg5F,EAC0B,UAAtB1gD,EAAMm4C,aAENuI,EAAWG,gBAAgB31F,KAAK,CAC5BusF,UAAWz3C,EAAMy3C,UACjBqC,KAAM95C,EAAM85C,KACZC,KAAM/5C,EAAM+5C,YAGZ2G,EAAWI,aACXC,EAAcL,EAAY,CACtBh5F,KAAM,OACNiiB,MAAO+2E,EAAWG,gBAAgBl8F,OAAS,KAG/CsyF,aAAa2G,EAAWgD,qBACxBF,EAAWI,cAAe,EAC1BE,EAAWN,WAMXA,EAAWI,aACXJ,EAAWO,kBAAkB/1F,KAAK80C,EAAMy3C,WAExCzxC,MAQR06C,EAAa,CACTG,gBAAiB,CAAC,CACdpJ,UAAWz3C,EAAMy3C,UACjBqC,KAAM95C,EAAM85C,KACZC,KAAM/5C,EAAM+5C,KACZmH,SAAUlhD,EAAM85C,KAChBqH,SAAUnhD,EAAM+5C,OAEpBkH,kBAAmB,GACnBH,cAAc,GArFR3C,EAuFQ,sBAvFIC,EAuFmB,WACrCp4C,KAxF8Bq4C,EAyF/Br+C,EAAMk6C,KAAOkH,GAxFlB9C,EAAOD,EAASE,IACV,IAGZX,EAAWO,GAAct9C,WAAWu9C,EAAYE,GACzC,QAoFKt4C,SAGJ,GA7FZ,IAAsBm4C,EAAYC,EAAYC,EACpCC,EAmGN,GAAmB,gBAAft+C,EAAMt4C,MAAgD,UAAtBs4C,EAAMm4C,aAsC1C,GAAmB,cAAfn4C,EAAMt4C,KAAsB,CAG5B,GAA0B,UAAtBs4C,EAAMm4C,YAAyB,CAE/B,IADA,IAAIkJ,EAAI,EACDA,EAAIX,EAAWG,gBAAgBl8F,OAAQ08F,IAC1C,GAAIX,EAAWG,gBAAgBQ,GAAG5J,YAAcz3C,EAAMy3C,UAAW,CAC7DiJ,EAAWG,gBAAgB5zF,OAAOo0F,EAAG,GACrC,MAGJX,EAAWG,gBAAgBl8F,OAAS,GACpCo8F,EAAcL,EAAY,CACtBh5F,KAAM,KACNiiB,MAAO03E,SAKf,IAAK,IAAIC,EAAI,EAAGA,EAAIZ,EAAWO,kBAAkBt8F,OAAQ28F,IACrD,GAAIZ,EAAWO,kBAAkBK,KAAOthD,EAAMy3C,UAAW,CACrDiJ,EAAWO,kBAAkBh0F,OAAOq0F,EAAG,GACvC,MAMZ,GAA0C,IAAtCZ,EAAWG,gBAAgBl8F,QAAwD,IAAxC+7F,EAAWO,kBAAkBt8F,OAOxE,YANI+7F,EAAWI,cACXlxE,IACA2xE,KAEAv7C,UAvEZ,CAKI,IAFA,IAAIw7C,EAAkB,KAClBC,EAAI,EACDA,EAAIf,EAAWG,gBAAgBl8F,OAAQ88F,IAC1C,GAAIzhD,EAAMy3C,YAAciJ,EAAWG,gBAAgBY,GAAGhK,UAAW,CAC7D+J,EAAkBd,EAAWG,gBAAgBY,GAC7C,MASR,GAHAD,EAAgB1H,KAAO95C,EAAM85C,KAC7B0H,EAAgBzH,KAAO/5C,EAAM+5C,KAExB2G,EAAWI,aAQRW,EAAI,GACJV,EAAcL,EAAY,CACtBh5F,KAAM,OACNiiB,MAAO83E,SATf,GADiB3M,GAAK0M,EAAgBN,SAAUM,EAAgBL,SAAUK,EAAgB1H,KAAM0H,EAAgBzH,MACjG2H,EAEX,YADA17C,OAkEPg7C,EAAT,SAAoBW,GAEhB,IAAK,IAAIj9F,EAAI,EAAGA,EAAIi9F,EAAWd,gBAAgBl8F,OAAQD,IAAK,CACxD,IAAMq0F,EAAa4I,EAAWd,gBAAgBn8F,GAC9Ck9F,EAAW12F,KAAK,CACZusF,UAAWsB,EAAWtB,UACtBqC,KAAMf,EAAWe,KACjBC,KAAMhB,EAAWgB,KACjBmH,SAAUnI,EAAWe,KACrBqH,SAAUpI,EAAWgB,OAI7B,IAAM/5C,EAAa,CACft4C,KAAM,OACNm6F,SAAU,EACVj0B,MAAO,GAGe,IAAtBg0B,EAAWj9F,QACXq7C,EAAM85C,KAAO8H,EAAW,GAAGV,SAC3BlhD,EAAM+5C,KAAO6H,EAAW,GAAGT,WAE3BnhD,EAAM85C,KAAO,IAAO8H,EAAW,GAAGV,SAAWU,EAAW,GAAGV,UAC3DlhD,EAAM+5C,KAAO,IAAO6H,EAAW,GAAGT,SAAWS,EAAW,GAAGT,WAE/DnhD,EAAMkhD,SAAWlhD,EAAM85C,KACvB95C,EAAMmhD,SAAWnhD,EAAM+5C,KAEvBxnF,EAAEuvF,QAAQ9hD,IAKL+gD,EAAT,SAAuBY,EAAYI,GAE/B,KAAIA,EAAUp4E,MAAQ,GAItB,GAAuB,SAAnBo4E,EAAUr6F,KAAiB,CAE3B,IAAIs4C,EAIJ,GAHA4hD,EAAWG,EAAUp4E,OAAOmwE,KAAO6H,EAAWd,gBAAgBkB,EAAUp4E,OAAOmwE,KAC/E8H,EAAWG,EAAUp4E,OAAOowE,KAAO4H,EAAWd,gBAAgBkB,EAAUp4E,OAAOowE,KAErD,IAAtB6H,EAAWj9F,OAEXq7C,EAAQ,CACJt4C,KAAM,OACNw5F,SAAUU,EAAW,GAAGV,SACxBC,SAAUS,EAAW,GAAGT,SACxBrH,KAAM8H,EAAW,GAAG9H,KACpBC,KAAM6H,EAAW,GAAG7H,KACpB8H,SAAU,EACVj0B,MAAO,OAGR,CAEH,IAAMo0B,EAAYlN,GAAK8M,EAAW,GAAGV,SAAUU,EAAW,GAAGT,SAAUS,EAAW,GAAGV,SAAUU,EAAW,GAAGT,UACvGc,EAAWnN,GAAK8M,EAAW,GAAG9H,KAAM8H,EAAW,GAAG7H,KAAM6H,EAAW,GAAG9H,KAAM8H,EAAW,GAAG7H,MAE1FmI,EAAa/M,GAAiB,CAChC7xD,EAAGs+D,EAAW,GAAGV,SACjB39D,EAAGq+D,EAAW,GAAGT,UAClB,CAAC79D,EAAGs+D,EAAW,GAAGV,SAAU39D,EAAGq+D,EAAW,GAAGT,WAC1CgB,EAAQhN,GAAiB,CAC3B7xD,EAAGs+D,EAAW,GAAG9H,KACjBv2D,EAAGq+D,EAAW,GAAG7H,MAClB,CAACz2D,EAAGs+D,EAAW,GAAG9H,KAAMv2D,EAAGq+D,EAAW,GAAG7H,OAE5C/5C,EAAQ,CACJt4C,KAAM,OACNw5F,SAAU,IAAOU,EAAW,GAAGV,SAAWU,EAAW,GAAGV,UACxDC,SAAU,IAAOS,EAAW,GAAGT,SAAWS,EAAW,GAAGT,UACxDrH,KAAM,IAAO8H,EAAW,GAAG9H,KAAO8H,EAAW,GAAG9H,MAChDC,KAAM,IAAO6H,EAAW,GAAG7H,KAAO6H,EAAW,GAAG7H,MAChD8H,SAAUM,EAAQD,EAClBt0B,MAAOq0B,EAAWD,GAK1BzvF,EAAEuvF,QAAQ9hD,OAEgB,SAAnB+hD,EAAUr6F,MAAsC,OAAnBq6F,EAAUr6F,OAC9C65F,IACAP,EAAWW,KAKVJ,EAAT,WACIK,EAAa,GACbrvF,EAAEuvF,QAAQ,CACNp6F,KAAM,SA1URg6F,EAA2B,GAC3BN,EAA8B,IAEhC5D,EAAyB,aAEvByB,EAAoB,GActByB,EAAa,KACb3C,EAAgB,GAwBdH,EAAa,CACfgD,oBAAqB,MA2LrBgB,EAAa,GAyGjB/5F,KAAK01F,QAAU,SAAUv9C,GAErB,OADAq/C,EAAar/C,GACT0gD,GACKA,EAAWI,cACZ/C,EAAc7yF,KAAK80C,GAKpB,MAFIA,GAKfn4C,KAAK41F,YAAc,SAAU56E,GACzB26E,EAAW36E,IAUNu/E,GAAoB,WAE7B,IAAI5E,EAAyB,aAK7B31F,KAAK01F,QAAU,SAAUv9C,GAErB,GAAmB,gBAAfA,EAAMt4C,KAiCN,OAAOs4C,EA/BP,KAAIA,EAAMy4C,aAAa9zF,OAAS,GA4B5B,OAAOq7C,EA1BP,IAEIm6C,EAFAkI,EAAY1pF,KAAKC,MAAMD,KAAK4c,UAAUyqB,IAC1CqiD,EAAU5J,aAAe,GAGzB,IAAK,IAAI/zF,EAAI,EAAGA,EAAIs7C,EAAMy4C,aAAa9zF,OAAQD,IAEvCA,EAAI,IACJ29F,EAAY1pF,KAAKC,MAAMD,KAAK4c,UAAUyqB,KAE1Cm6C,EAAgBn6C,EAAMy4C,aAAa/zF,GAEnC29F,EAAU5L,MAAQ0D,EAAc1D,MAChC4L,EAAU3L,MAAQyD,EAAczD,MAChC2L,EAAUvI,KAAOK,EAAcL,KAC/BuI,EAAUtI,KAAOI,EAAcJ,KAC/BsI,EAAUrI,GAAKG,EAAcH,GAC7BqI,EAAUpI,GAAKE,EAAcF,GAC7BoI,EAAUnI,KAAOC,EAAcD,KAC3Bx1F,EAAIs7C,EAAMy4C,aAAa9zF,OAAS,IAChC09F,EAAUpF,aAAc,GAG5BO,EAAS6E,GAUrB,OAAO,MAGXx6F,KAAK41F,YAAc,SAAU56E,GACzB26E,EAAW36E,IAINy/E,GAAoB,SAAUC,GAEvC,IAGIC,EAAgB,KACdC,EAAqB,GAK3B56F,KAAK01F,QAAU,SAAUv9C,GAErB,GAAIyiD,EAAmBn4E,SAAS01B,EAAMy3C,WAAY,CAC9C,GAAmB,cAAfz3C,EAAMt4C,KACN,IAAK,IAAIhD,EAAI,EAAGA,EAAI+9F,EAAmB99F,OAAQD,IAC3C,GAAI+9F,EAAmB/9F,KAAOs7C,EAAMy3C,UAAW,CAC3CgL,EAAmBx1F,OAAOvI,EAAG,GAC7B,MAIZ,OAAO,KAGX,OAAsB,OAAlB89F,GACmB,gBAAfxiD,EAAMt4C,OACN86F,EAAgBxiD,EAAMy3C,WAEnBz3C,GAGHA,EAAMy3C,YAAc+K,GACD,gBAAfxiD,EAAMt4C,MACN+6F,EAAmBv3F,KAAK80C,EAAMy3C,WAE3B,OAEQ,cAAfz3C,EAAMt4C,OACN86F,EAAgB,MAEbxiD,IAOfn4C,KAAK41F,YAAc,SAAU56E,GACdA,IAgCN6/E,GAAoB,SAAUnwF,GAEvC,IAAIowF,EAAY,KACZC,EAAa,GACbC,EAAY,KAGhBh7F,KAAK4Z,QAAU,SAAUu+B,GACrB,GAAmB,SAAfA,EAAMt4C,OACNi7F,EAAY3iD,EACZ6iD,EAAY,KAER7iD,EAAM8iD,gBAaN,OAXAvwF,EAAEwwF,OAAO,CACLr7F,KAAM,OACN8mE,GAAI,KACJE,GAAI,KACJs0B,UAAW,KACXv0B,GAAIzuB,EAAM1c,EACVqrC,GAAI3uB,EAAMzc,EACV0/D,UAAWjjD,EAAM+3C,gBAGrB6K,EAAW13F,KAAK80C,GAMxB,GAAmB,SAAfA,EAAMt4C,KAEN,GAAIs4C,EAAM8iD,eAAgB,CAEtB,GAAkB,OAAdD,EAAoB,CACpB,IAAM7I,EAAKp7E,KAAKsmB,IAAI8a,EAAM1c,EAAIq/D,EAAUr/D,GAClC22D,EAAKr7E,KAAKsmB,IAAI8a,EAAMzc,EAAIo/D,EAAUp/D,GAExC,GAAIy2D,EAAK,GAAKC,EAAK,EAAG,CAClB4I,EAAY7I,EAAKC,EAlCvB,EAAW,EAoCL,IAAK,IAAIv1F,EAAI,EAAGA,EAAIk+F,EAAWj+F,OAAQD,IAAK,CACxC,IAAMgG,EAAIk4F,EAAWl+F,GArC/B,IAsCcm+F,EACAn4F,EAAE64B,EAAIo/D,EAAUp/D,EAEhB74B,EAAE44B,EAAIq/D,EAAUr/D,EAEpB/wB,EAAEwwF,OAAOpqF,KAAKC,MAAMD,KAAK4c,UAAU7qB,KAEvCk4F,EAAa,IAIrB,GAAkB,OAAdC,EAEA,YADAD,EAAW13F,KAAK80C,GAlDlB,IAsDE6iD,EACA7iD,EAAMzc,EAAIo/D,EAAUp/D,EAEpByc,EAAM1c,EAAIq/D,EAAUr/D,OAIxB,GAAIs/D,EAAWj+F,OAAS,EAAG,CACvB,IAAK,IAAIu+F,EAAI,EAAGA,EAAIN,EAAWj+F,OAAQu+F,IACnC3wF,EAAEwwF,OAAOpqF,KAAKC,MAAMD,KAAK4c,UAAUqtE,EAAWM,MAElDN,EAAa,GAMN,OAAf5iD,EAAMt4C,OACNk7F,EAAa,IAGjBrwF,EAAEwwF,OAAOpqF,KAAKC,MAAMD,KAAK4c,UAAUyqB,OAY9BmjD,GAAgB,WAEzB,IAAI3F,EAAyB,aAGzB4F,GAAY,EAGhBv7F,KAAK01F,QAAU,SAAUv9C,GAerB,MAbmB,SAAfA,EAAMt4C,OACF07F,EAEA5F,EAAS,CACL91F,KAAM,KACNkmE,MAAO5tB,EAAM4tB,MACbk1B,eAAgB9iD,EAAM8iD,eACtB7F,aAAa,IAGjBmG,GAAY,GAGfA,GAA6B,SAAfpjD,EAAMt4C,MAAkC,OAAfs4C,EAAMt4C,MAK/B,OAAfs4C,EAAMt4C,MAAiB07F,IACvBA,GAAY,GAGTpjD,GAPI,MASfn4C,KAAK41F,YAAc,SAAU56E,GACzB26E,EAAW36E,GAEfhb,KAAKw7F,aAAe,WAChB,OAAOD,IAoBFE,GAAgB,SAAU/wF,GAEnC,IAGIgxF,EACAC,EACAC,EALAjG,EAAyB,aAEzBkG,EAAYnO,GAAMhjF,EAAEmxF,UAAW,EAAG,GAOtC77F,KAAK01F,QAAU,SAAUv9C,GAarB,GAZAA,EAAQrnC,KAAKC,MAAMD,KAAK4c,UAAUyqB,IAClCi3C,aAAawM,GACbE,cAAcH,GAEK,SAAfxjD,EAAMt4C,OACN67F,EAAiB,CACbjgE,EAAG0c,EAAM1c,EACTC,EAAGyc,EAAMzc,EACTw0D,SAAU/3C,EAAM+3C,WAIL,SAAf/3C,EAAMt4C,KAAiB,CAEvB,IAAMk8F,EAAS5jD,EAAM1c,EACfugE,EAAS7jD,EAAMzc,EACfugE,EAAgB9jD,EAAM+3C,SAE5B/3C,EAAM1c,EAAIuxD,GAAI70C,EAAM1c,EAAGigE,EAAejgE,EAAGogE,GACzC1jD,EAAMzc,EAAIsxD,GAAI70C,EAAMzc,EAAGggE,EAAehgE,EAAGmgE,GACzC1jD,EAAM+3C,SAAWlD,GAAI70C,EAAM+3C,SAAUwL,EAAexL,SAAU2L,GAC9DH,EAAiB,CACbjgE,EAAG0c,EAAM1c,EACTC,EAAGyc,EAAMzc,EACTw0D,SAAU/3C,EAAM+3C,UAGhB2L,EAAY,IACZD,EAAU5iD,YAAW,WACjB2iD,EAAWO,aAAY,YACnB/jD,EAAQrnC,KAAKC,MAAMD,KAAK4c,UAAUyqB,KAE5B1c,EAAIuxD,GAAI+O,EAAQL,EAAejgE,EAAGogE,GACxC1jD,EAAMzc,EAAIsxD,GAAIgP,EAAQN,EAAehgE,EAAGmgE,GACxC1jD,EAAM+3C,SAAWlD,GAAIiP,EAAeP,EAAexL,SAAU2L,GAC7DH,EAAiB,CACbjgE,EAAG0c,EAAM1c,EACTC,EAAGyc,EAAMzc,EACTw0D,SAAU/3C,EAAM+3C,UAGpByF,EAASx9C,KACV,MACJ,KAKX,OAAOA,GAGXn4C,KAAK41F,YAAc,SAAU56E,GACzB26E,EAAW36E,GAGfhb,KAAKm8F,aAAe,SAAUhpD,GAC1B0oD,EAAYnO,GAAMv6C,EAAG,EAAG,KCvpCzB,IAgCGxiC,GAhCGyrF,GAAsB,SAAS7zD,GACxC,IACI8zD,EADEzT,EAASnB,KAEf,GAAIl/C,EAAO,EAAG,CAIV,GAHAqgD,EAAOhB,MAAQ,EACfgB,EAAOf,OAAS,IAChBwU,EAAMzT,EAAOC,WAAW,OAEpB,MAAM,IAAI5rF,MAAM,0DAEpBo/F,EAAIC,UAAY,qBAChBD,EAAIE,SAAS,EAAG,EAAG,EAAG,QACnB,GAAIh0D,EAAO,IACdqgD,EAAOhB,MAAQ,IACfgB,EAAOf,OAAS,QACb,CAIH,GAHAe,EAAOhB,MAAe,EAAPr/C,EACfqgD,EAAOf,OAAgB,EAAPt/C,IAChB8zD,EAAMzT,EAAOC,WAAW,OAEpB,MAAM,IAAI5rF,MAAM,0DAEpBo/F,EAAIC,UAAY,qBAChBD,EAAIE,SAAS,EAAG,EAAU,EAAPh0D,EAAiB,EAAPA,GAC7B8zD,EAAIC,UAAY,qBAChBD,EAAIE,SAAS,EAAG,EAAGh0D,EAAMA,GACzB8zD,EAAIE,SAASh0D,EAAMA,EAAa,EAAPA,EAAiB,EAAPA,GAEvC,OAAOqgD,GAGE4T,IACH7rF,GAAoB,CACtB,EAAK,qKACL,EAAK,0JAGF,SAAU8rF,EAAcv3B,OAClB56D,EAAT,SAAgBi+B,GAEZ,GADAA,EAAO0H,SAAS,GAAK1H,GACjB53B,GAAM,GAAK43B,GACX,OAAO53B,GAAM,GAAK43B,GAEtB,IACMtpC,EADSm9F,GAAoB7zD,GACbm0D,UAAU,aAEhC,OADA/rF,GAAM,GAAK43B,GAAQtpC,EACZA,GAGX,IAAIimE,EAKA,OAAO56D,EAAOmyF,GAJdzjD,YAAW,WACPksB,EAAS56D,EAAOmyF,MACjB,KC5MR,IAQME,GARAC,GAsEF,CACHC,YAAa,WACT,MAAO,CACH,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,IAGjBF,uBAvEKA,GAAT,SAAgCG,EAAQxyC,GAOpC,MANe,CACVA,EAAM,GAAKwyC,EAAO,GAAOxyC,EAAM,GAAKwyC,EAAO,GAAOxyC,EAAM,GAAKwyC,EAAO,GAAOxyC,EAAM,GAAKwyC,EAAO,IAC7FxyC,EAAM,GAAKwyC,EAAO,GAAOxyC,EAAM,GAAKwyC,EAAO,GAAOxyC,EAAM,GAAKwyC,EAAO,GAAOxyC,EAAM,GAAKwyC,EAAO,IAC7FxyC,EAAM,GAAKwyC,EAAO,GAAOxyC,EAAM,GAAKwyC,EAAO,GAAOxyC,EAAM,GAAKwyC,EAAO,IAAQxyC,EAAM,GAAKwyC,EAAO,IAC9FxyC,EAAM,GAAKwyC,EAAO,GAAOxyC,EAAM,GAAKwyC,EAAO,GAAOxyC,EAAM,GAAKwyC,EAAO,IAAQxyC,EAAM,GAAKwyC,EAAO,MAmEnGC,iBA7DJ,SAA0BC,EAASC,GAG/B,IAAMC,EAAO,CAACD,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,IACpDE,EAAO,CAACF,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,IACpDG,EAAO,CAACH,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,IAAKA,EAAQ,KACrDI,EAAO,CAACJ,EAAQ,IAAKA,EAAQ,IAAKA,EAAQ,IAAKA,EAAQ,KAGvDK,EAAUX,GAAuBK,EAASE,GAC1CK,EAAUZ,GAAuBK,EAASG,GAC1CK,EAAUb,GAAuBK,EAASI,GAC1CK,EAAUd,GAAuBK,EAASK,GAGhD,MAAO,CACHC,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAC5CC,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAC5CC,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAC5CC,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,KA2ChDC,wBAvCJ,SAAiCjiE,EAAGC,GAChC,MAAO,CACH,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACTD,EAAGC,EAAG,EAAG,IAmCbiiE,qBA/BJ,SAA8B3D,GAE1B,MAAO,CACHjjF,KAAKi3E,KAAKgM,IAAYjjF,KAAKm3E,KAAK8L,GAAW,EAAG,EAC9CjjF,KAAKm3E,KAAK8L,GAAWjjF,KAAKi3E,KAAKgM,GAAW,EAAG,EAC7C,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,IA0Bb4D,kBAtBJ,SAA2BpvC,GACvB,MAAO,CACHA,EAAG,EAAG,EAAG,EACT,EAAGA,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,KChERqvC,GAAO,CAChB/0D,IAAK,SAAUr+B,EAAe8iF,GAC1B,MAAO,CAAC9xD,EAAGhxB,EAAGgxB,EAAI8xD,EAAG9xD,EAAGC,EAAGjxB,EAAGixB,EAAI6xD,EAAG7xD,IAEzCi4B,IAAK,SAAUlpD,EAAe8iF,GAC1B,MAAO,CAAC9xD,EAAGhxB,EAAGgxB,EAAI8xD,EAAG9xD,EAAGC,EAAGjxB,EAAGixB,EAAI6xD,EAAG7xD,IAEzCoiE,IAAK,SAAUpzF,GACX,IAAM4kB,EAAMvY,KAAK4yB,KAAK5yB,KAAKwmB,IAAI7yB,EAAE+wB,EAAG,GAAK1kB,KAAKwmB,IAAI7yB,EAAEgxB,EAAG,IACvD,MAAO,CAACD,EAAG/wB,EAAE+wB,EAAInM,EAAKoM,EAAGhxB,EAAEgxB,EAAIpM,IAEnCA,IAAK,SAAU5kB,GACX,OAAOqM,KAAK4yB,KAAK5yB,KAAKwmB,IAAI7yB,EAAE+wB,EAAG,GAAK1kB,KAAKwmB,IAAI7yB,EAAEgxB,EAAG,KAEtDqiE,KAAM,SAAUtzF,EAAe8iF,GAC3B,OAAOsQ,GAAKvuE,IAAIuuE,GAAKlqC,IAAIlpD,EAAI8iF,KAEjCyQ,IAAK,SAAUtzF,EAAcyoC,GACzB,MAAO,CAAC1X,EAAG/wB,EAAE+wB,EAAI0X,EAAGzX,EAAGhxB,EAAEgxB,EAAIyX,IAEjCmnD,MAAO,SAAU7vF,EAAe8iF,GAC5B,OAAOx2E,KAAKy2E,MAAMD,EAAG7xD,EAAIjxB,EAAGixB,EAAG6xD,EAAG9xD,EAAIhxB,EAAGgxB,IAE7CwiE,IAAK,SAAS76F,EAAci4B,GACxB,IAAM6iE,EAAO,CAAC96F,EAAEq4B,EAAGr4B,EAAEs4B,GACfyiE,EAAO,CAAC9iE,EAAEI,EAAGJ,EAAEK,GACrB,OAAOwiE,EAAKr3F,KAAI,SAAC40B,EAAG5+B,GAAM,OAAAqhG,EAAKrhG,GAAKshG,EAAKthG,MAAImB,QAAO,SAACowD,EAAGnmC,GAAM,OAAAmmC,EAAInmC,OCgB7Dm2E,GAAY,SAAUxiB,GAI/B,IAHA,IAAMyiB,EAAa,GACbC,EAAQt+F,KAELssF,EAAI,EAAGA,EAAI1Q,EAAO2iB,OAAOzhG,OAAQwvF,KAAC,SAC5BzvF,GACP,IAAIC,OAASuB,EACTxB,EAAI++E,EAAO2iB,OAAOzhG,OAAS,IAC3BA,EAASmwF,GAAKrR,EAAO2iB,OAAO1hG,GAAG4+B,EAAGmgD,EAAO2iB,OAAO1hG,GAAG6+B,EAAGkgD,EAAO2iB,OAAO1hG,EAAI,GAAG4+B,EAAGmgD,EAAO2iB,OAAO1hG,EAAI,GAAG6+B,IAEvG2iE,EAAWxhG,GAAK,CACZ4+B,EAAGmgD,EAAO2iB,OAAO1hG,GAAG4+B,EACpBC,EAAGkgD,EAAO2iB,OAAO1hG,GAAG6+B,EACpB5+B,OAAQA,GATuB,CAWpCwvF,GAOPtsF,KAAKw+F,UAAY,SAAUT,GAIvB,IAHA,IAAIU,EAAY1nF,KAAK6K,IAAI08E,EAAMI,YAAaX,GACxClhG,EAAI,EAED4hG,EAAYJ,EAAWxhG,GAAGC,QAAUD,EAAIwhG,EAAWvhG,OAAS,EAAGD,IAClE4hG,GAAaJ,EAAWxhG,GAAGC,OAG/B,IAAM6hG,EAAM5nF,KAAK6K,IAAI,EAAG7K,KAAK2K,IAAI,EAAG+8E,EAAYJ,EAAWxhG,GAAGC,SAE9D,MAAO,CACH2+B,EAAI4iE,EAAWxhG,GAAG4+B,GAAK,EAAIkjE,GAAON,EAAWxhG,EAAI,GAAG4+B,EAAIkjE,EACxDjjE,EAAI2iE,EAAWxhG,GAAG6+B,GAAK,EAAIijE,GAAON,EAAWxhG,EAAI,GAAG6+B,EAAIijE,IAGhE3+F,KAAK0+F,UAAY,WAEb,IADA,IAAIz/F,EAAS,EACJpC,EAAI,EAAGA,EAAIwhG,EAAWvhG,OAAS,EAAGD,IACvCoC,GAAUo/F,EAAWxhG,GAAGC,OAE5B,OAAOmC,IA6JF2/F,GAAqB,SAAUL,GACxC,IAKI1hG,EALEorB,EAAIs2E,EAAOzhG,OACjBkD,KAAK6+F,GAAK,GACV7+F,KAAK8+F,GAAK,GACV9+F,KAAKknE,EAAI,GACTlnE,KAAK++F,GAAK,GAGV,IAAMp7D,EAAQ46D,EAAO,GAAG,GAClBj2D,EAAOi2D,EAAOA,EAAOzhG,OAAS,GAAG,GAKvC,IAHAyhG,EAAO5jE,MAAK,SAAUv3B,EAAGi4B,GACrB,OAAOj4B,EAAE,GAAKi4B,EAAE,MAEfx+B,EAAI,EAAGA,EAAIorB,EAAGprB,IACfmD,KAAK6+F,GAAGx7F,KAAKk7F,EAAO1hG,GAAG,IACvBmD,KAAK8+F,GAAGz7F,KAAKk7F,EAAO1hG,GAAG,IAM3B,IAHAmD,KAAKknE,EAAE,GAAK,EACZlnE,KAAK++F,GAAG,GAAK,EAERliG,EAAI,EAAGA,EAAIorB,EAAI,IAAKprB,EAAG,CAGxB,IAAMmiG,EAAKh/F,KAAK6+F,GAAGhiG,EAAI,GAAKmD,KAAK6+F,GAAGhiG,EAAI,GAClCoiG,GAAOj/F,KAAK6+F,GAAGhiG,GAAKmD,KAAK6+F,GAAGhiG,EAAI,IAAMmiG,EACtCt0F,EAAIu0F,EAAMj/F,KAAK++F,GAAGliG,EAAI,GAAK,EAEjCmD,KAAK++F,GAAGliG,IAAMoiG,EAAM,GAAOv0F,EAE3B,IAAMw0F,GACDl/F,KAAK8+F,GAAGjiG,EAAI,GAAKmD,KAAK8+F,GAAGjiG,KAAOmD,KAAK6+F,GAAGhiG,EAAI,GAAKmD,KAAK6+F,GAAGhiG,KACzDmD,KAAK8+F,GAAGjiG,GAAKmD,KAAK8+F,GAAGjiG,EAAI,KAAOmD,KAAK6+F,GAAGhiG,GAAKmD,KAAK6+F,GAAGhiG,EAAI,IAE9DmD,KAAKknE,EAAErqE,IAAM,EAAMqiG,EAAQF,EAAKC,EAAMj/F,KAAKknE,EAAErqE,EAAI,IAAM6N,EAM3D,IAHA1K,KAAK++F,GAAG92E,EAAI,GAAK,EAGZprB,EAAIorB,EAAI,EAAGprB,GAAK,IAAKA,EACtBmD,KAAK++F,GAAGliG,GAAKmD,KAAK++F,GAAGliG,GAAKmD,KAAK++F,GAAGliG,EAAI,GAAKmD,KAAKknE,EAAErqE,GAGtDmD,KAAKm/F,UAAY,WACb,OAAOx7D,GAEX3jC,KAAKo/F,SAAW,WACZ,OAAO92D,IAIfs2D,GAAmBr+F,UAAU8+F,YAAc,SAAU5jE,OACjD,IACI6jE,EAAM,EACNC,EAFMv/F,KAAK8+F,GAAGhiG,OAEJ,EAOPyiG,EAAMD,EAAM,GAAG,CAClB,IAAMp5F,EAAKq5F,EAAMD,GAAQ,EAErBt/F,KAAK6+F,GAAG34F,GAAKu1B,EACb8jE,EAAMr5F,EAENo5F,EAAMp5F,EAId,IAAMyhF,EAAI3nF,KAAK6+F,GAAGU,GAAOv/F,KAAK6+F,GAAGS,GAC3Bl8F,GAAKpD,KAAK6+F,GAAGU,GAAO9jE,GAAKksD,EACzBtsD,GAAKI,EAAIz7B,KAAK6+F,GAAGS,IAAQ3X,EAG/B,OAAOvkF,EAAIpD,KAAK8+F,GAAGQ,GAAOjkE,EAAIr7B,KAAK8+F,GAAGS,KAChCn8F,EAAIA,EAAIA,EAAIA,GAAKpD,KAAK++F,GAAGO,IAAQjkE,EAAIA,EAAIA,EAAIA,GAAKr7B,KAAK++F,GAAGQ,KAAS5X,EAAIA,GAAK,GAUtFiX,GAAmBr+F,UAAUi/F,MAAQ,SAAU9jE,EAAG+jE,GAG9C,IAFA,IAAIhkE,EAAI,KACJsiE,EAAO,KACFlhG,EAAI,EAAGA,GAAK4iG,EAAY5iG,IAAK,CAClC,IAAM6iG,EAAQ7iG,EAAI4iG,EACZE,EAAQ3/F,KAAKq/F,YAAYK,GAC/B,GAAU,OAANjkE,EAAJ,CAMA,IAAMmkE,EAAW7oF,KAAKsmB,IAAIsiE,EAAQjkE,GAElC,KAAIkkE,EAAW7B,GAKX,MAJAtiE,EAAIikE,EACJ3B,EAAO6B,OATPnkE,EAAIikE,EACJ3B,EAAOhnF,KAAKsmB,IAAIsiE,EAAQjkE,GAchC,OAAOD,gCC5VEokE,GAAG,SAAHA,EAIGlY,EAAWx0C,EAAW/X,gCAJzBykE,GAKL7/F,KAAK2nF,EAAI5wE,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,IAAK+lE,IACnC3nF,KAAKmzC,EAAIp8B,KAAK2K,IAAI,KAAO3K,KAAK6K,IAAI,IAAKuxB,IACvCnzC,KAAKo7B,EAAIrkB,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,IAAKwZ,KAI9B0kE,GAAG,SAAHA,EAIG37F,EAAWmmF,EAAWjvD,gCAJzBykE,GAKL9/F,KAAKmE,EAAI4S,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,IAAKzd,IACnCnE,KAAKsqF,EAAIvzE,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,IAAK0oE,IACnCtqF,KAAKq7B,EAAItkB,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,IAAKyZ,KAI9B0kE,GAAI,SAAJA,EAKG5hE,EAAWiwB,EAAW1yB,EAAWx1B,gCALpC65F,GAML//F,KAAKm+B,EAAIpnB,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,IAAKuc,IACnCn+B,KAAKouD,EAAIr3C,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,IAAKwsC,IACnCpuD,KAAK07B,EAAI3kB,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,IAAK8Z,IACnC17B,KAAKkG,EAAI6Q,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,IAAK1b,KAI9B85F,GAAiB,CAE1BC,UAAW,SAAUH,GACjB,IAAM7gG,EAAS,IAAI4gG,GAAI,EAAG,EAAG,GAEvB17F,EAAI27F,EAAI37F,EAAI,IACZmmF,EAAIwV,EAAIxV,EAAI,IACZjvD,EAAIykE,EAAIzkE,EAAI,IAEZ6kE,EAASnpF,KAAK6K,IAAIzd,EAAGmmF,EAAGjvD,GACxB8kE,EAASppF,KAAK2K,IAAIvd,EAAGmmF,EAAGjvD,GACxB08C,EAAQooB,EAASD,EAIvB,GAFAjhG,EAAOm8B,EAAI+kE,EAEE,GAATpoB,EACA94E,EAAO0oF,EAAI,EACX1oF,EAAOk0C,EAAI,MACR,CACHl0C,EAAOk0C,EAAI4kC,EAAQooB,EACnB,IAAMC,IAAWD,EAASh8F,GAAK,EAAM4zE,EAAQ,GAAMA,EAC7CsoB,IAAWF,EAAS7V,GAAK,EAAMvS,EAAQ,GAAMA,EAC7CuoB,IAAWH,EAAS9kE,GAAK,EAAM08C,EAAQ,GAAMA,EAE/C5zE,GAAKg8F,EACLlhG,EAAO0oF,EAAI2Y,EAAQD,EACZ/V,GAAK6V,EACZlhG,EAAO0oF,EAAK,EAAI,EAAKyY,EAAQE,EACtBjlE,GAAK8kE,IACZlhG,EAAO0oF,EAAK,EAAI,EAAK0Y,EAAQD,GAG7BnhG,EAAO0oF,EAAI,IACX1oF,EAAO0oF,GAAK,GAEZ1oF,EAAO0oF,EAAI,IACX1oF,EAAO0oF,GAAK,GAQpB,OAJA1oF,EAAO0oF,EAAI5wE,KAAK4gD,MAAiB,IAAX14D,EAAO0oF,GAC7B1oF,EAAOk0C,EAAIp8B,KAAK4gD,MAAiB,IAAX14D,EAAOk0C,GAC7Bl0C,EAAOm8B,EAAIrkB,KAAK4gD,MAAiB,IAAX14D,EAAOm8B,GAEtBn8B,GAGXshG,UAAW,SAAUV,GACjB,IAEIW,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAAOC,EAF/C9hG,EAAS,IAAI6gG,GAAI,EAAG,EAAG,GAIvBnY,EAAKkY,EAAIlY,EAAI,IAAO,EACpBx0C,EAAI0sD,EAAI1sD,EAAI,IACZ/X,EAAIykE,EAAIzkE,EAAI,IAgDlB,OA9CS,GAAL+X,GACAl0C,EAAOkF,EAAQ,IAAJi3B,EACXn8B,EAAOqrF,EAAQ,IAAJlvD,EACXn8B,EAAOo8B,EAAQ,IAAJD,IAIXslE,EAAQtlE,GAAK,EAAI+X,GACjBwtD,EAAQvlE,GAAK,EAAI+X,IAHjBqtD,EAAY,EAAJ7Y,IACR8Y,EAAQ1pF,KAAKuK,MAAMk/E,MAGnBI,EAAQxlE,GAAK,EAAI+X,GAAK,GAAKqtD,EAAQC,KAEtB,GAATA,GACAI,EAAQzlE,EACR0lE,EAAQF,EACRG,EAAQL,GACQ,GAATD,GACPI,EAAQF,EACRG,EAAQ1lE,EACR2lE,EAAQL,GACQ,GAATD,GACPI,EAAQH,EACRI,EAAQ1lE,EACR2lE,EAAQH,GACQ,GAATH,GACPI,EAAQH,EACRI,EAAQH,EACRI,EAAQ3lE,GACQ,GAATqlE,GACPI,EAAQD,EACRE,EAAQJ,EACRK,EAAQ3lE,IAERylE,EAAQzlE,EACR0lE,EAAQJ,EACRK,EAAQJ,GAGZ1hG,EAAOkF,EAAY,IAAR08F,EACX5hG,EAAOqrF,EAAY,IAARwW,EACX7hG,EAAOo8B,EAAY,IAAR0lE,EAEX9hG,EAAOkF,EAAI4S,KAAK4gD,MAAM14D,EAAOkF,GAC7BlF,EAAOqrF,EAAIvzE,KAAK4gD,MAAM14D,EAAOqrF,GAC7BrrF,EAAOo8B,EAAItkB,KAAK4gD,MAAM14D,EAAOo8B,IAG1Bp8B,GAGX+hG,WAAY,SAAUjB,GAClB,IAAM9gG,EAAS,IAAI6gG,GAAI,EAAG,EAAG,GAEvB3hE,EAAI4hE,EAAK5hE,EAAI,IACbiwB,EAAI2xC,EAAK3xC,EAAI,IACb1yB,EAAIqkE,EAAKrkE,EAAI,IACbx1B,EAAI65F,EAAK75F,EAAI,IAUnB,OARAjH,EAAOkF,EAAI,EAAI4S,KAAK6K,IAAI,EAAGuc,GAAK,EAAIj4B,GAAKA,GACzCjH,EAAOqrF,EAAI,EAAIvzE,KAAK6K,IAAI,EAAGwsC,GAAK,EAAIloD,GAAKA,GACzCjH,EAAOo8B,EAAI,EAAItkB,KAAK6K,IAAI,EAAG8Z,GAAK,EAAIx1B,GAAKA,GAEzCjH,EAAOkF,EAAI4S,KAAK4gD,MAAiB,IAAX14D,EAAOkF,GAC7BlF,EAAOqrF,EAAIvzE,KAAK4gD,MAAiB,IAAX14D,EAAOqrF,GAC7BrrF,EAAOo8B,EAAItkB,KAAK4gD,MAAiB,IAAX14D,EAAOo8B,GAEtBp8B,GAGXgiG,WAAY,SAAUnB,GAClB,IAAM7gG,EAAS,IAAI8gG,GAAK,EAAG,EAAG,EAAG,GAE3B57F,EAAI27F,EAAI37F,EAAI,IACZmmF,EAAIwV,EAAIxV,EAAI,IACZjvD,EAAIykE,EAAIzkE,EAAI,IAYlB,OAVAp8B,EAAOiH,EAAI6Q,KAAK6K,IAAI,EAAIzd,EAAG,EAAImmF,EAAG,EAAIjvD,GACtCp8B,EAAOk/B,GAAK,EAAIh6B,EAAIlF,EAAOiH,IAAM,EAAIjH,EAAOiH,GAC5CjH,EAAOmvD,GAAK,EAAIk8B,EAAIrrF,EAAOiH,IAAM,EAAIjH,EAAOiH,GAC5CjH,EAAOy8B,GAAK,EAAIL,EAAIp8B,EAAOiH,IAAM,EAAIjH,EAAOiH,GAE5CjH,EAAOk/B,EAAIpnB,KAAK4gD,MAAiB,IAAX14D,EAAOk/B,GAC7Bl/B,EAAOmvD,EAAIr3C,KAAK4gD,MAAiB,IAAX14D,EAAOmvD,GAC7BnvD,EAAOy8B,EAAI3kB,KAAK4gD,MAAiB,IAAX14D,EAAOy8B,GAC7Bz8B,EAAOiH,EAAI6Q,KAAK4gD,MAAiB,IAAX14D,EAAOiH,GAEtBjH,GAGXiiG,MAAO,SAAU/2F,GACb,OAAIA,aAAa21F,GACN31F,EAEPA,aAAa01F,GACN7/F,KAAKugG,UAAUp2F,GAEtBA,aAAa41F,GACN//F,KAAKghG,WAAW72F,QAD3B,GAKJg3F,MAAO,SAAUh3F,GACb,OAAIA,aAAa01F,GACN11F,EAEPA,aAAa21F,GACN9/F,KAAKigG,UAAU91F,GAEtBA,aAAa41F,GACN//F,KAAKigG,UAAUjgG,KAAKghG,WAAW72F,SAD1C,GAKJi3F,OAAQ,SAAUj3F,GACd,OAAIA,aAAa41F,GACN51F,EAEPA,aAAa21F,GACN9/F,KAAKihG,WAAW92F,GAEvBA,aAAa01F,GACN7/F,KAAKihG,WAAWjhG,KAAKugG,UAAUp2F,SAD1C,GAIJk3F,YAAa,SAAUl3F,GACnB,GAAIA,aAAa21F,GAAK,CAClB,IAAIwB,EAAMrxD,SAAS,GAAK9lC,EAAEhG,GAAIvB,SAAS,IACnC2+F,EAAMtxD,SAAS,GAAK9lC,EAAEmgF,GAAI1nF,SAAS,IACnC4+F,EAAMvxD,SAAS,GAAK9lC,EAAEkxB,GAAIz4B,SAAS,IAOvC,OANiB,GAAb0+F,EAAGxkG,SACHwkG,EAAK,IAAMA,GACE,GAAbC,EAAGzkG,SACHykG,EAAK,IAAMA,GACE,GAAbC,EAAG1kG,SACH0kG,EAAK,IAAMA,GACRF,EAAKC,EAAKC,IAGzBC,SAAU,SAASC,GACf,MAAO,OAAS3qF,KAAK4gD,MAAM+pC,EAAOv9F,GAAK,KAAO4S,KAAK4gD,MAAM+pC,EAAOpX,GAAK,KAAOvzE,KAAK4gD,MAAM+pC,EAAOrmE,GAAK,KAEvGsmE,UAAW,SAASC,GAChB,MAAO,QAAU7qF,KAAK4gD,MAAMiqC,EAAQz9F,GAAK,KAAO4S,KAAK4gD,MAAMiqC,EAAQtX,GAAK,KAAOvzE,KAAK4gD,MAAMiqC,EAAQvmE,GAAK,KAAOumE,EAAQx+F,EAAI,KAE9Hy+F,SAAU,SAASC,GAIfA,GAHAA,EAASA,EAAO7yD,QAGArgC,QADI,oCACoB,SAASw/C,EAAGjqD,EAAGmmF,EAAGjvD,GACtD,OAAOl3B,EAAIA,EAAImmF,EAAIA,EAAIjvD,EAAIA,KAG/B,IAAMp8B,EAAM,4CAA+CoY,KAAKyqF,GAChE,OAAO7iG,EAAS,IAAI6gG,GAChB7vD,SAAShxC,EAAO,GAAI,IACpBgxC,SAAShxC,EAAO,GAAI,IACpBgxC,SAAShxC,EAAO,GAAI,KACpB,OC1ML,IAEM8iG,GAFAC,IAEAD,GAAT,SAAsB5pD,GAClBA,EAAMozC,iBACN,IAAI0W,GAAkB,EACtB,GAAI9pD,EAAM+pD,cACN,IACK/pD,EAAM+pD,cAA8BC,QACrCF,GAAkB,EACpB,MAAMp/F,GACJ04C,QAAQj6C,MAAM,mBAGjB2gG,GACA9pD,EAAMiqD,cAA8BjX,QAItC,SAASkX,GACZA,EAAGC,aAAa,WAAY,MAC5B/Y,GAAiB8Y,EAAI,QAASN,MAKhCQ,GAGA,8CC9EOC,GAAN,iCAAMA,oBAAAA,qBAAAA,EAAK,KAAA,EAOP/kG,IAAA,kBAAP,SAAiBgsF,GACT+Y,EAAMC,UAAUhgF,SAASgnE,IAG7B+Y,EAAMC,UAAUp/F,KAAKomF,MAGlBhsF,IAAA,oBAAP,SAAmBgsF,GACf,IAAK,IAAI5sF,EAAI,EAAGA,EAAI2lG,EAAMC,UAAU3lG,OAAQD,IACxC,GAAI4sF,IAAa+Y,EAAMC,UAAU5lG,GAE7B,YADA2lG,EAAMC,UAAUr9F,OAAOvI,EAAG,MAM/BY,IAAA,aAAP,SAAailG,GACTF,EAAMC,UAAUjlG,SAAQ,SAAAo+C,GACpBA,EAAK8mD,UAzBJF,EAAN,GAAMA,GAEMC,UAAmB,8CCCzBE,GAAN,iCAAMA,oBAAAA,qBAAAA,EAAY,KAAA,EAIdllG,IAAA,gBAAP,SAAgBA,GACZ,IAAIwB,EAAS,KACb,IACIA,EAAS2jG,aAAatb,QAAQ7pF,GAChC,MAAOoF,GACL7C,KAAKsB,MAAQuB,EAEjB,OAAO5D,KAGJxB,IAAA,gBAAP,SAAgBA,EAAaU,GACzB,IACIykG,aAAarb,QAAQ9pF,EAAKU,GAC5B,MAAO0E,GACL7C,KAAKsB,MAAQuB,MAIdpF,IAAA,mBAAP,SAAmBA,GACf,IACImlG,aAAapb,WAAW/pF,GAC1B,MAAOoF,GACL7C,KAAKsB,MAAQuB,MAIdpF,IAAA,iBAAP,WACI,OAAOuC,KAAKsB,UA/BPqhG,EAAN,GC6CME,GAAK,CAGdC,0BAAA3a,GACA4a,sBAAAza,GACA0a,iBAAAva,GACAwa,SAAAta,GACAua,WAAAna,GACAoa,qBAAAha,GACAia,cfsDyB,WACzB,MAAO,UAAWnb,WAAa,aAAcA,WepD7Cob,qBb3DyBC,EAAwBC,GAC7CD,EAAcE,YACdF,EAAcE,WAAWC,aAAaF,EAASD,EAAcI,ca0DjEC,mBbtDuBC,EAAsB1+B,GAC7C,IAAIxlB,EAAU,YAELmkD,IACW,MAAZnkD,EAIAkkD,EAAGvtF,UACHqpC,IACAwlB,KAEAlsB,WAAW6qD,EAAO,GAPlBC,MAAM,iBAWdD,IauCAE,IAAAna,GACAoa,uBbvB2B1hF,EAAiB2hF,GAG5C,IAFA,IACIna,EADEC,EAASntF,OAAOD,KAAKsnG,GAElBpnG,EAAI,EAAGA,EAAIktF,EAAOjtF,OAAQD,IAC/BitF,EAASC,EAAOltF,GAChBylB,EAAGggF,aAAaxY,EAAQma,EAAQna,KamBpCoa,sBbf0B5hF,EAA8B6hF,GACxD,IAAMC,EAAY9hF,EAAG+hF,aAAa,SAC5BC,EAAyB,OAAdF,EAAqB,GAAKA,EAAUzrF,MAAM,KACvD2rF,EAAS7hF,SAAS0hF,KAGtBG,EAASjhG,KAAK8gG,GACd7hF,EAAGggF,aAAa,QAASgC,EAASrjF,KAAK,QaSvCsjF,yBbN6BjiF,EAA8B6hF,GAC3D,IAAMC,EAAY9hF,EAAG+hF,aAAa,SAC5BC,EAAyB,OAAdF,EAAqB,GAAKA,EAAUzrF,MAAM,KAC3D,GAAK2rF,EAAS7hF,SAAS0hF,GAAvB,CAGA,IAAK,IAAItnG,EAAI,EAAGA,EAAIynG,EAASxnG,OAAQD,IAC7BynG,EAASznG,KAAOsnG,IAChBG,EAASl/F,OAAOvI,EAAG,GACnBA,KAGRylB,EAAGggF,aAAa,QAASgC,EAASrjF,KAAK,QaLvCu7D,gBbamBt/E,EAAqBsnG,GACxC,IAAMhhB,EAAWh0E,SAASu3E,yBAC1Byd,EAAIhnG,SAAQ,SAAAo+C,GAAQ,OAAAA,EAAO4nC,EAAShH,OAAO5gC,GAAQ,QACnD1+C,EAAOs/E,OAAOgH,IafdihB,iBb0BqBC,EAAYC,EAAYC,EAAYC,EAAYjjF,GACrE,IAAIgmE,EAAQ8c,EAAKE,EAAI/c,EAAS8c,EAAKC,EAanC,OAZIhd,EAAQgd,IACR/c,GAAS+c,EAAKhd,EACdA,EAAQgd,GAER/c,EAASgd,IACTjd,GAAQid,EAAKhd,EACbA,EAASgd,GAETjjF,IACAgmE,EAAQ7wE,KAAK2K,IAAIE,EAAKgmE,GACtBC,EAAS9wE,KAAK2K,IAAIE,EAAKimE,IAEpB,CAACD,MAAAA,EAAOC,OAAAA,IavCfid,sBbiD0BJ,EAAYC,EAAYC,EAAYC,GAC9D,MAAO,CACHppE,EAAGipE,EAAK,EAAIE,EAAK,EACjBlpE,EAAGipE,EAAK,EAAIE,EAAK,IanDrBE,mBbwDA,IAAMC,EAAO,IAAIriG,KAMjB,OALaqiG,EAAKC,cAKJ,KAJCD,EAAKE,WAAa,GAAGtiG,WAAWoqD,SAAS,EAAG,KAI/B,IAHhBg4C,EAAKD,UAAUniG,WAAWoqD,SAAS,EAAG,KAGV,KAFL,GAAlBg4C,EAAKG,WAAkBH,EAAKI,cAAcxiG,SAAS,IAAIoqD,SAAS,EAAG,KAE5B,Ka7DxDq4C,IAAAnb,GACAlsF,OAAAmsF,GACAmb,uBbuE2BC,GAC3B,IAAMj2E,EAAMi2E,EAAc3iG,WAAW9F,OAAS,EACxCutF,EAActzE,KAAKwmB,IAAI,GAAIjO,GAEjC,OAAO66D,GADWob,EAAgBlb,EACTA,Ia1EzBmb,wBbkF2BC,GAC3B,IAAKA,EACD,MAAM,IAAIxoG,MAAM,gCAEpB,GAAIga,OAAOyuF,MAAQD,aAAmBC,KAClC,OAAOnvB,IAAIoQ,gBAAgB8e,GACxB,GAAiC,WAA7BA,EAAQ1+F,YAAYlF,KAAmB,CAC9C,IAAM8jG,EAAYF,EAClB,MAAO,QAAUE,EAAS9lG,KAAO,IAAM8lG,EAASC,SAAW,IAAMD,EAAS3hF,KAE1E,MAAM,IAAI/mB,MAAM,wBa3FpB4oG,2Bb+F+BC,EAAsBC,GAKrD,OAJAD,EAAQ,IAAInjG,KAAKmjG,GACjBC,EAAQ,IAAIpjG,KAAKojG,GACjBD,EAAME,SAAS,EAAG,EAAG,EAAG,GACxBD,EAAMC,SAAS,EAAG,EAAG,EAAG,IAChBD,EAAME,UAAYH,EAAMG,WAAc,OanG9CC,iBbuGqBpgG,GACrB,OAAOgL,KAAKC,MAAMD,KAAK4c,UAAU5nB,KavGjCqgG,qBbuHyBz7F,GACzB,IAAM07F,EAAW,YACXxmG,EAAM,WAAM,OAAAkkG,MAAM,0BACxBp5F,EAAEk+E,OAAOyd,QAAO,SAASC,GACrB,GAAa,OAATA,EAGA,OAFA1mG,SACA8K,EAAEw6D,WAGN,IACI,IAAMqhC,EAAa,CAAC,IAAIC,KAAK,CAACF,GAAO57F,EAAE+7F,SAAU,CAAC5mG,KAAMumG,KACxDne,UAAUye,MAAM,CACZC,MAAOj8F,EAAEi8F,MACTC,MAAOL,IAEN/mG,MAAK,SAAA2E,OAGLyM,OAAM,SAAA/N,GACHjD,OAEV,MAAMiD,GACJjD,IAEJ8K,EAAEw6D,aACHkhC,Ia/IHS,qBbyJyBC,GACzB,IAAM5pG,EAA6B4pG,EAAW5pG,OAC9C,QAAKA,OAGD,CAAC,IAAK,QAAS,SAASulB,SAASvlB,EAAO6pG,WAAa7pG,EAAe8pG,cAGxEF,EAAWvb,kBACJ,KajKP0b,mBbyKYC,EAAW5kF,GAIvB,IAHA,IAEIwnE,EAFE7qF,EAASuQ,SAAS23F,gBAAgB,6BAA8B7kF,EAAG8kF,aACnErd,EAASntF,OAAOD,KAAK2lB,GAElBzlB,EAAI,EAAGA,EAAIktF,EAAOjtF,OAAQD,IAE/B,GAAe,iBADfitF,EAASC,EAAOltF,IAEZ,IAAK,IAAIgG,EAAI,EAAGA,EAAIyf,EAAG+kF,YAAYvqG,OAAQ+F,IACvC5D,EAAOoR,YAAY62F,EAAU5kF,EAAG+kF,YAAYxkG,SAE9B,gBAAXinF,GACP7qF,EAAOqjG,aAAaxY,EAAQxnE,EAAGwnE,IAGvC,OAAO7qF,GatLPqoG,MAAA9E,GACA+E,aAAA5E,GAGA6E,IAAAxa,GACA+Q,KAAA9Q,GACAwa,qBX5EyBva,EAAYC,EAAYC,EAAYC,GAE7D,OAAOt2E,KAAKwmB,IAAI2vD,EAAKE,EAAI,GAAKr2E,KAAKwmB,IAAI4vD,EAAKE,EAAI,IW2EhDqa,oBXxEwBjsE,EAAWC,GAEnC,OAAOD,EAAIA,EAAIC,EAAIA,GWuEnBisE,iBAAAra,GACAsa,iBAAAna,GACAnoB,MAAAooB,GACAma,OAAAja,GACAka,sBX7C0BC,EAAmBz9C,EAAkBujC,GAC/D,IAAMma,EAAMpa,GAAOtjC,EAAM7uB,EAAIssE,EAAOtsE,EAAG6uB,EAAM5uB,EAAIqsE,EAAOrsE,EAAGmyD,GAG3D,OAFAma,EAAIvsE,GAAKssE,EAAOtsE,EAChBusE,EAAItsE,GAAKqsE,EAAOrsE,EACTssE,GW0CPC,OAAArL,GACAsL,KAAArK,GACAsK,gBXzCmB1J,EAAsB2J,EAAaC,GACtD5J,EAAUhjE,GAAK2sE,EACf3J,EAAU/iE,GAAK2sE,EACf,IAAMlW,EAAKp7E,KAAK4gD,MAAM8mC,EAAUhjE,GAC1B22D,EAAKr7E,KAAK4gD,MAAM8mC,EAAU/iE,GAGhC,OAFA+iE,EAAUhjE,GAAK02D,EACfsM,EAAU/iE,GAAK02D,EACR,CACHD,GAAAA,EACAC,GAAAA,IWiCJkW,mBXzBsB95C,GACtB,GAAIA,EAAI,GAAM,EACV,OAAIA,EAAI,GAAM,EACHA,EAEJA,EAAI,EAEf,IAAM+5C,EAAQxxF,KAAKqK,KAAKotC,GAClBg6C,EAAQzxF,KAAKuK,MAAMktC,GACzB,OAAI+5C,EAAQ,GAAM,EACPA,EAEAC,GWcXC,qBXNwBj6C,GACxB,GAAIA,EAAI,GAAM,EACV,OAAIA,EAAI,GAAM,EACHA,EAAI,EAERA,EAEX,IAAM+5C,EAAQxxF,KAAKqK,KAAKotC,GAClBg6C,EAAQzxF,KAAKuK,MAAMktC,GACzB,OAAI+5C,EAAQ,GAAM,EACPA,EAEAC,GWLXE,sBXc0BxrG,EAAiB40F,GAC3C,OAAKA,GAGA50F,GAGDA,EAAO0pE,GAAK7vD,KAAK6K,IAAI1kB,EAAO0pE,GAAIkrB,EAAOlrB,IACvC1pE,EAAO4pE,GAAK/vD,KAAK6K,IAAI1kB,EAAO4pE,GAAIgrB,EAAOhrB,IACvC5pE,EAAOs2C,GAAKz8B,KAAK2K,IAAIxkB,EAAOs2C,GAAIs+C,EAAOt+C,IACvCt2C,EAAO6hG,GAAKhoF,KAAK2K,IAAIxkB,EAAO6hG,GAAIjN,EAAOiN,KALvC7hG,EAAS,CAAE0pE,GAAIkrB,EAAOlrB,GAAIE,GAAIgrB,EAAOhrB,GAAItzB,GAAIs+C,EAAOt+C,GAAIurD,GAAIjN,EAAOiN,IAOhE7hG,GAVIA,GWfXyrG,sBX+B0B7W,EAAiBlK,EAAeC,GAC1D,IAAIjhB,EAAK7vD,KAAK2K,IAAI,EAAGowE,EAAOlrB,IACxBE,EAAK/vD,KAAK2K,IAAI,EAAGowE,EAAOhrB,IACxBtzB,EAAKz8B,KAAK6K,IAAIgmE,EAAQ,EAAGkK,EAAOt+C,IAChCurD,EAAKhoF,KAAK6K,IAAIimE,EAAS,EAAGiK,EAAOiN,IACrC,OAAIn4B,EAAKpzB,GAAMszB,EAAKi4B,EACT,KAEJ,CAAEn4B,GAAAA,EAAIE,GAAAA,EAAItzB,GAAAA,EAAIurD,GAAAA,IWpCrB6J,mBL5F8B,SAAUC,EAAsBC,EAAoBp+F,GAElF,GAAIm+F,EAAUptE,IAAMqtE,EAAQrtE,EAIxB,MAAO,CACHA,EAJAotE,EAAUptE,EAKVC,EAJAhxB,EAAEgxB,GAOV,IAAM0yB,GAAK06C,EAAQptE,EAAImtE,EAAUntE,IAAMotE,EAAQrtE,EAAIotE,EAAUptE,GACvDJ,EAAIwtE,EAAUntE,EAAK0yB,EAAIy6C,EAAUptE,EAKvC,MAAO,CACHA,GAJC2yB,EAAI1jD,EAAEgxB,EAAIhxB,EAAE+wB,EAAI2yB,EAAI/yB,IAAM+yB,EAAIA,EAAI,GAKnC1yB,GAJC0yB,EAAIA,EAAI1jD,EAAEgxB,EAAI0yB,EAAI1jD,EAAE+wB,EAAIJ,IAAM+yB,EAAIA,EAAI,KK8E3C26C,UAAA3K,GACA4K,WLRsB,eAIlBC,EACAC,EACAC,EALE7K,EAAQt+F,KACRopG,EAAW,GACbC,EAAU,EAIVC,EAAc,KAoClBtpG,KAAK8oC,IAAM,SAAUrN,EAAGC,EAAG6tE,EAASrkC,EAAUskC,GAC1C,IAAIP,GAAaxtE,IAAMwtE,EAAUxtE,GAAKC,IAAMutE,EAAUvtE,EAWtD,GARAutE,EAAY,CAACxtE,EAAGA,EAAGC,EAAGA,GACtB0tE,EAASA,EAAStsG,QAAU,CACxB2+B,EAAGA,EACHC,EAAGA,EACH6tE,QAASA,GAIW,IAApBH,EAAStsG,OAAb,CAGO,GAAwB,IAApBssG,EAAStsG,OAIhB,OAHAssG,EAAS,GAAGK,IAAM5L,GAAKC,IAAID,GAAKlqC,IAAIy1C,EAAS,GAAIA,EAAS,KAC1DC,EAAUE,OACVD,EAAcC,GAGd,IAAMG,EAAUN,EAASA,EAAStsG,OAAS,GACrC6sG,EAAUP,EAASA,EAAStsG,OAAS,GACrC8sG,EAAUR,EAASA,EAAStsG,OAAS,GAC3C6sG,EAAQF,IAAM5L,GAAKC,IAAID,GAAKlqC,IAAI+1C,EAASE,KACrCx1F,MAAMu1F,EAAQF,IAAIhuE,IAAMrnB,MAAMu1F,EAAQF,IAAI/tE,MAE1CiuE,EAAQF,IAAM34F,KAAKC,MAAMD,KAAK4c,UAAUk8E,EAAQH,OAKxD,IAQII,EAEIC,EAVF1mG,EAAIgmG,EAASA,EAAStsG,OAAS,GAC/Bu+B,EAAI+tE,EAASA,EAAStsG,OAAS,GAC/B2N,EAAKrH,EACLmqF,EAAKsQ,GAAK/0D,IAAI1lC,EAAGy6F,GAAKG,IAAI56F,EAAEqmG,IAAK5L,GAAKE,KAAK36F,EAAGi4B,GAAK,IACnD0uE,EAAKlM,GAAKlqC,IAAIt4B,EAAGwiE,GAAKG,IAAI3iE,EAAEouE,IAAK5L,GAAKE,KAAK36F,EAAGi4B,GAAK,IACnD2uE,EAAK3uE,EAIX,GAAI6pC,EAEA4kC,EAnER,SAAyBr/F,EAAI8iF,EAAIwc,EAAIC,EAAIvK,GAGrC,IAFA,IACIh0D,EAAGxsC,EADD6qG,EAAc,GAEXjtG,EAAI,EAAGA,GAAK4iG,EAAY5iG,IAC7B4uC,EAAI5uC,EAAI4iG,GACRxgG,EAAS,IACFw8B,EAAI1kB,KAAKwmB,IAAI,EAAIkO,EAAG,GAAKhhC,EAAGgxB,EAAI,EAAI1kB,KAAKwmB,IAAI,EAAIkO,EAAG,GAAKA,EAAI8hD,EAAG9xD,EAAI,GAAK,EAAIgQ,GAAK10B,KAAKwmB,IAAIkO,EAAG,GAAKs+D,EAAGtuE,EAAI1kB,KAAKwmB,IAAIkO,EAAG,GAAKu+D,EAAGvuE,EACrIx8B,EAAOy8B,EAAI3kB,KAAKwmB,IAAI,EAAIkO,EAAG,GAAKhhC,EAAGixB,EAAI,EAAI3kB,KAAKwmB,IAAI,EAAIkO,EAAG,GAAKA,EAAI8hD,EAAG7xD,EAAI,GAAK,EAAI+P,GAAK10B,KAAKwmB,IAAIkO,EAAG,GAAKs+D,EAAGruE,EAAI3kB,KAAKwmB,IAAIkO,EAAG,GAAKu+D,EAAGtuE,EACrIouE,EAAYA,EAAYhtG,QAAUmC,EAEtC,OAAO6qG,EAyDWG,CAAgBx/F,EAAI8iF,EAAIwc,EAAIC,EAAI,IAC9CH,EAAY,IAAIzL,GAAU,CAACG,OAAQuL,SAEnCD,EAAY,IAAIzL,GAAU,CAACG,OAAQ,CAAC9zF,EAAIu/F,KAO5C,IAHA,IAAM16E,EAAMu6E,EAAUnL,YAClBwL,EAAcld,GAAIsc,EAAaC,EAAS7b,GAAM2b,EAAU/5E,EAAK,EAAG,IAChE1oB,EAAIyiG,EACDziG,GAAK0oB,EAAK1oB,GAAKsjG,EAAa,CAC/BA,EAAcld,GAAIsc,EAAaC,EAAS7b,GAAM9mF,EAAI0oB,EAAK,EAAG,IAC1D,IAAMg7B,EAAQu/C,EAAUrL,UAAU53F,GAC5B0zF,EAAQ4O,EAAoBzb,GAAiByb,EAAmB5+C,QAASjsD,EAC3E6mE,GACAA,EAAS,CACLzpC,EAAG6uB,EAAM7uB,EACTC,EAAG4uB,EAAM5uB,EACT+P,EAAG7kC,EAAI0oB,EACPgrE,MAAOA,EACP6P,OAAQjB,EAAoB5O,EAAQ6O,EAAY,IAGxDD,EAAoB5+C,EACpB6+C,EAAY7O,EAGZp1B,EACAmkC,EAAUziG,EAAI0oB,GAEd+5E,EAAU,EACVG,EAAiB,CAAC/+F,GAAIA,EAAI8iF,GAAIA,EAAIwc,GAAIA,EAAIC,GAAIA,KAGlDV,EAAcC,OAhEVD,EAAcC,GAmEtBvpG,KAAKoqG,SAAW,SAASb,EAASrkC,EAAUskC,GACxC,KAAIJ,EAAStsG,OAAS,GAAtB,CAIA,IAAM2N,EAAK2+F,EAASA,EAAStsG,OAAS,GAChCywF,EAAK6b,EAASA,EAAStsG,OAAS,GAEhCutG,EAAOxM,GAAK/0D,IAAIykD,EAAIsQ,GAAKlqC,IAAI45B,EAAI9iF,IAEvC6zF,EAAMx1D,IAAIuhE,EAAK5uE,EAAG4uE,EAAK3uE,EAAG6tE,EAASrkC,EAAUskC,MK5HjDc,mBAAA1L,GACA2L,qBLmQgC,SAAUC,EAAUC,EAAQC,GAM5D,QALS/yC,EAAT,SAAev8B,EAAGuvE,GACd,OAAO5zF,KAAK4gD,MAAMv8B,EAAIrkB,KAAKwmB,IAAI,GAAIotE,IAAQ5zF,KAAKwmB,IAAI,GAAIotE,IAGtDC,EAAY,GACT/tG,EAAI,EAAGA,GAAK,EAAGA,GAAK6tG,EACzBE,EAAUvnG,KAAK,CAACs0D,EAAM96D,EAAG,GAAI86D,EAAM6yC,EAAWzzF,KAAKwmB,IAAI1gC,EAAG,IAAM4tG,EAASD,GAAW,KAExF,OAAOI,GKzQPhiB,OAAQnB,GACRojB,oBR3GuBjiB,GACvB,IAAMkiB,EAAerjB,GAAamB,EAAOhB,MAAOgB,EAAOf,QACjDwU,EAAMyO,EAAajiB,WAAW,MACpC,IAAKwT,EACD,MAAM,IAAIp/F,MAAM,0DAGpB,OADAo/F,EAAI0O,UAAUniB,EAAQ,EAAG,GAClBkiB,GQqGPE,4BR7FAC,EACAC,EACAC,GAEA,IACK,CAAC,GAAG,GAAI1oF,SAASyoF,KAAY,CAAC,GAAG,GAAIzoF,SAAS0oF,IAC/CF,EAAUrjB,MAAQ,GAAM,GAAKqjB,EAAUpjB,OAAS,GAAM,GACtD9wE,KAAKsmB,IAAI4tE,EAAUG,UAAY,IAAO,EAEtC,OAAO,EAEX,IAAMC,EAAYt0F,KAAKsmB,IAAI4tE,EAAUG,SAAW,IAAM,KAAQ,EACxDxjB,EAAQyjB,EAAYJ,EAAUpjB,OAASojB,EAAUrjB,MACjDC,EAASwjB,EAAYJ,EAAUrjB,MAAQqjB,EAAUpjB,OACvD,OACS9wE,KAAKsmB,IAAIuqD,GAAS,GAAM,GAAKqjB,EAAUxvE,EAAI,GAAM,GACjD1kB,KAAKsmB,IAAIuqD,GAAS,GAAM,GAAKqjB,EAAUxvE,EAAI,GAAM,MAGjD1kB,KAAKsmB,IAAIwqD,GAAU,GAAM,GAAKojB,EAAUvvE,EAAI,GAAM,GAClD3kB,KAAKsmB,IAAIwqD,GAAU,GAAM,GAAKojB,EAAUvvE,EAAI,GAAM,KQ0E3D4vE,wCR7DAC,EACAC,EACAP,EACAnZ,EACA2Z,GAEK3Z,IACDA,EAAS,CACLr2D,EAAG,EACHC,EAAG,EACHksD,MAAO4jB,EAAe5jB,MACtBC,OAAQ2jB,EAAe3jB,SAI/B0jB,EAAQG,OACJD,EACAF,EAAQI,uBAAwB,GAEhCJ,EAAQI,uBAAwB,EAChCJ,EAAQK,sBAAwB,QAGpCL,EAAQM,UAAUZ,EAAUxvE,EAAGwvE,EAAUvvE,GACzC6vE,EAAQ1D,OAAOoD,EAAUG,SAAW,IAAMr0F,KAAK2uD,IAC/C6lC,EAAQxlC,MAAMklC,EAAUrjB,MAAQ,EAAI,GAAI,EAAIqjB,EAAUpjB,OAAS,EAAI,GAAI,GACvE0jB,EAAQR,UACJS,EACA1Z,EAAOr2D,EAAGq2D,EAAOp2D,EAAGo2D,EAAOlK,MAAOkK,EAAOjK,QACxC9wE,KAAKsmB,IAAI4tE,EAAUrjB,OAAS,GAAI7wE,KAAKsmB,IAAI4tE,EAAUpjB,QAAU,EAAG9wE,KAAKsmB,IAAI4tE,EAAUrjB,OAAQ7wE,KAAKsmB,IAAI4tE,EAAUpjB,SAEnH0jB,EAAQO,WQ+BRC,sCRnBAC,EACAR,EACAS,IAOAA,EAAen7F,KAAKC,MAAMD,KAAK4c,UAAUu+E,KACvBlE,SACdkE,EAAalE,OAAS,CAClBtsE,EAAG+vE,EAAe5jB,MAAQ,EAC1BlsD,EAAG8vE,EAAe3jB,OAAS,IAG9BokB,EAAalmC,QACdkmC,EAAalmC,MAAQ,CACjBtqC,EAAG,EACHC,EAAG,IAGNuwE,EAAaC,cACdD,EAAaC,YAAc,GAE1BD,EAAaJ,YACdI,EAAaJ,UAAY,CACrBpwE,EAAG,EACHC,EAAG,IAIX,IAAM2gE,EAAM2P,EAAWnjB,WAAW,MAClC,IAAKwT,EACD,MAAM,IAAIp/F,MAAM,0DAEpBo/F,EAAIqP,OAEA30F,KAAKsmB,IAAI4uE,EAAalmC,MAAMtqC,EAAI,GAAM,MACtC1kB,KAAKsmB,IAAI4uE,EAAalmC,MAAMrqC,EAAI,GAAK,MACrC3kB,KAAKsmB,IAAI4uE,EAAaC,YAAc,IAAM,MAE1C7P,EAAIsP,uBAAwB,EAC5BtP,EAAIuP,sBAAwB,QAE5BvP,EAAIsP,uBAAwB,EAGhCtP,EAAIwP,UAAUI,EAAaJ,UAAUpwE,EAAGwwE,EAAaJ,UAAUnwE,GAC/D2gE,EAAIwP,UAAUI,EAAalE,OAAOtsE,EAAGwwE,EAAalE,OAAOrsE,GACzD2gE,EAAIwL,OAAOoE,EAAaC,YAAc,IAAMn1F,KAAK2uD,IACjD22B,EAAIt2B,MAAMkmC,EAAalmC,MAAMtqC,EAAGwwE,EAAalmC,MAAMrqC,GACnD2gE,EAAIwP,WAAWI,EAAalE,OAAOtsE,GAAIwwE,EAAalE,OAAOrsE,GAC3D2gE,EAAI0O,UAAUS,EAAgB,EAAG,EAAGA,EAAe5jB,MAAO4jB,EAAe3jB,QAEzEwU,EAAIyP,WQnCJK,oBAAA/P,GACAgQ,qBAAA5P,GACA6P,sBRuGYC,EACZ1jB,EACAlB,EACAC,EACA4kB,EACAC,GAgBA,GAAK9kB,GAAMC,IAAMD,IAAMkB,EAAOhB,OAASD,IAAMiB,EAAOf,QAKpD,GAFAH,EAAI3wE,KAAK2K,IAAIgmE,EAAG,GAChBC,EAAI5wE,KAAK2K,IAAIimE,EAAG,GACZD,GAAKkB,EAAOhB,OAASD,GAAKiB,EAAOf,OAAQ,CAEzC0kB,EAAQA,GAAO9kB,KACf+kB,EAAQA,GAAO/kB,KAEf,IAQIglB,EAAIC,EARFC,EAtBV,SAAqBC,EAAcC,EAAcC,EAAcC,GAC3D,IAAM9tG,EAAS,CACX+tG,WAAYj2F,KAAK4gD,MAAM5gD,KAAK82B,KAAK++D,IACjCK,YAAal2F,KAAK4gD,MAAM5gD,KAAK82B,KAAKg/D,IAClCK,WAAYn2F,KAAKqK,KAAKrK,KAAK82B,KAAKi/D,IAChCK,YAAap2F,KAAKqK,KAAKrK,KAAK82B,KAAKk/D,KAIrC,OAFA9tG,EAAO+tG,WAAaj2F,KAAK2K,IAAIziB,EAAO+tG,WAAY/tG,EAAOiuG,YACvDjuG,EAAOguG,YAAcl2F,KAAK2K,IAAIziB,EAAOguG,YAAahuG,EAAOkuG,aAClDluG,EAaOmuG,CAAYxkB,EAAOhB,MAAOgB,EAAOf,OAAQH,EAAGC,GAG1D6kB,EAAK5kB,MAAQ+kB,EAAMK,WAAaL,EAAMO,WAAan2F,KAAKwmB,IAAI,EAAGovE,EAAMK,YAActlB,EACnF8kB,EAAK3kB,OAAS8kB,EAAMM,YAAcN,EAAMQ,YAAcp2F,KAAKwmB,IAAI,EAAGovE,EAAMM,aAAetlB,EACvF4kB,EAAK1jB,WAAW,MAAO6iB,OACvBc,EAAK3jB,WAAW,MAAO6iB,OAGvB,IAAI2B,EAAUd,EAAMe,EAAUd,EAE9BC,EAAKE,EAAMK,WACXN,EAAKC,EAAMM,YAEX,IAAIM,EAAYD,EAAQzkB,WAAW,MACnC0kB,EAAU5B,uBAAwB,EAClC4B,EAAU3B,sBAAyB,OACnC2B,EAAUC,yBAA4B,OACtCD,EAAUxC,UAAUniB,EAAQ,EAAG,EAAG0kB,EAAQ1lB,MAAO0lB,EAAQzlB,QAMzD,IAJA,IAAI4lB,EAAeH,EAAQ1lB,MACvB8lB,EAAgBJ,EAAQzlB,OAGrB4kB,EAAKE,EAAMO,YAAcR,EAAKC,EAAMQ,YAAaV,IAAMC,IAAM,EAChEa,EAAYF,EAAQxkB,WAAW,OACrB8iB,uBAAwB,EAClC4B,EAAU3B,sBAAyB,OACnC2B,EAAUC,yBAA4B,OAEtC,IAAMG,EAAYlB,EAAKE,EAAMO,WAAcO,EAAe,EAAIA,EACxDG,EAAalB,EAAKC,EAAMQ,YAAeO,EAAgB,EAAIA,EAGjEL,EAAQzlB,MAAQ+lB,EAChBN,EAAQxlB,OAAS+lB,EAEjBL,EAAUxC,UACNuC,EACA,EAAG,EACHG,EAAcC,EACd,EAAG,EACHC,EAAUC,GAEdH,EAAeE,EACfD,EAAgBE,EAGhB,IAAMC,EAAMR,EACZA,EAAUC,EACVA,EAAUO,EAIdjlB,EAAOhB,MAAQF,EACfkB,EAAOf,OAASF,EAChB,IAAMmmB,EAAYllB,EAAOC,WAAW,MACpCilB,EAAUpC,OACVoC,EAAUnC,uBAAwB,EAClCmC,EAAUlC,sBAAyB,OACnCkC,EAAU/C,UACNuC,EACA,EAAG,EACHG,EAAcC,EACd,EAAG,EACHhmB,EAAGC,GAEPmmB,EAAUhC,UACVS,EAAK1jB,WAAW,MAAOijB,UACvBU,EAAK3jB,WAAW,MAAOijB,eAEpB,GAAIpkB,GAAKkB,EAAOhB,OAASD,GAAKiB,EAAOf,OAAQ,EAEhD0kB,EAAQA,GAAO9kB,MACVG,MAAQF,EACb6kB,EAAK1kB,OAASF,EACd,IAAMomB,EAAUxB,EAAK1jB,WAAW,MAChCklB,EAAQrC,OACRqC,EAAQpC,uBAAwB,EAChCoC,EAAQnC,sBAAyB,OACjCmC,EAAQhD,UAAUniB,EAAQ,EAAG,EAAGlB,EAAGC,GACnComB,EAAQjC,UAERljB,EAAOhB,MAAQF,EACfkB,EAAOf,OAASF,EAChBiB,EAAOC,WAAW,MAAOkiB,UAAUwB,EAAM,EAAG,QAG5CD,EAAa1jB,EAAQlB,EAAGkB,EAAOf,OAAQ0kB,EAAMC,GAC7CF,EAAa1jB,EAAQlB,EAAGC,EAAG4kB,EAAMC,IQ9NrCwB,qCRuOwCplB,GAExC,IADA,IAAMqlB,EAAQrlB,EAAOC,WAAW,MAAOqlB,aAAa,EAAG,EAAGtlB,EAAOhB,MAAOgB,EAAOf,QACtEhrF,EAAI,EAAGA,EAAIoxG,EAAMjqF,KAAKlnB,OAAQD,GAAK,EACd,IAAtBoxG,EAAMjqF,KAAKnnB,EAAI,KAGnBoxG,EAAMjqF,KAAKnnB,EAAI,IAAMoxG,EAAMjqF,KAAKnnB,GAAKoxG,EAAMjqF,KAAKnnB,EAAI,GAAKoxG,EAAMjqF,KAAKnnB,EAAI,IAAM,GAAKoxG,EAAMjqF,KAAKnnB,EAAI,GAAK,MAE3G+rF,EAAOC,WAAW,MAAOslB,aAAaF,EAAO,EAAG,IQ5OhDG,IAAAvO,GACAwO,IAAAvO,GACAwO,KAAAvO,GACAwO,eAAAvO,GACAwO,iCJsIoC9M,GACpC,MAAmB,KAAXA,EAAOv9F,EAAuB,KAAXu9F,EAAOpX,EAAuB,KAAXoX,EAAOrmE,EAAa,KIpIlEozE,uBH1H0BvxG,EAAqBwxG,GAC/C,IAAMhiE,EAAMl9B,SAASM,cAAc,OAGnC,OAFA48B,EAAIiiE,UAAYD,EAChBxxG,EAAOmT,YAAYq8B,GACZA,GGuHPkiE,0BHjGA,GAAI33F,OAAO43F,aAAc,CACrB,IAAMC,EAAM73F,OAAO43F,eACfC,IACIA,EAAIC,MACJD,EAAIC,QACGD,EAAIE,iBACXF,EAAIE,uBAGL,cAAex/F,UACrBA,SAAiBy/F,UAAUF,SGwFhCG,gBAAAlN,GACA1/E,YH/BAs5D,GAcA,IAAMlvC,EAAMl9B,SAASM,cAAc8rE,EAAOmrB,QAAUnrB,EAAOmrB,QAAU,OAEjEnrB,EAAOmoB,KACPna,GAAIl9C,EAAKkvC,EAAOmoB,KAGhBnoB,EAAOr1D,UACuB,iBAAnBq1D,EAAOr1D,QACdmmB,EAAIiiE,UAAY/yB,EAAOr1D,QAEhBhoB,MAAMC,QAAQo9E,EAAOr1D,SAC5Bs8E,GAAGrmB,OAAO9vC,EAAKkvC,EAAOr1D,SAGtBmmB,EAAIr8B,YAAYurE,EAAOr1D,UAI3Bq1D,EAAOuzB,cACPziE,EAAIyiE,YAAcvzB,EAAOuzB,aAEzBvzB,EAAOwzB,YACP1iE,EAAI0iE,UAAYxzB,EAAOwzB,WAEvBxzB,EAAO7+E,KACP2vC,EAAI3vC,GAAK6+E,EAAO7+E,IAEhB6+E,EAAOthC,QACPshC,EAAOthC,OAAOjqC,YAAYq8B,GAE1B,UAAWkvC,QAA2Bv9E,IAAjBu9E,EAAO+qB,QAC5Bj6D,EAAIi6D,MAAQ/qB,EAAO+qB,OAEvB,IAAMlE,EAAY,GAiBlB,GAhBI,YAAa7mB,IACb2N,GAAiB78C,EAAK,QAASkvC,EAAOyzB,SACtC5M,EAAUp/F,KAAK,CAAC,QAASu4E,EAAOyzB,WAEhC,aAAczzB,IACd2N,GAAiB78C,EAAK,SAAUkvC,EAAO0zB,UACvC7M,EAAUp/F,KAAK,CAAC,SAAUu4E,EAAO0zB,YAEjC7M,EAAU3lG,OAAS,GACnBylG,GAAIl/F,KAAK,CACLif,GAAIoqB,EACJ+1D,UAAWA,IAKf,WAAY7mB,EAEZ,IADA,IAAM2zB,EAAe3yG,OAAOD,KAAKi/E,EAAOiW,QAC/Bh1F,EAAI,EAAGA,EAAI0yG,EAAazyG,OAAQD,IACrC6vC,EAAI41D,aAAaiN,EAAa1yG,GAAI++E,EAAOiW,OAAO0d,EAAa1yG,KAGrE,OAAO6vC,GGtCP8iE,mBH6CsBnN,GACtB,IAAK,IAAIxlG,EAAI,EAAGA,EAAI0lG,GAAIzlG,OAAQD,IAAK,CACjC,IAAM4yG,EAAOlN,GAAI1lG,GACjB,GAAI4yG,EAAKntF,KAAO+/E,EAKZ,OAJAoN,EAAKhN,UAAUjlG,SAAQ,SAAAo+C,GACnBymD,EAAG1Y,oBAAoB/tC,EAAK,GAAIA,EAAK,YAEzC2mD,GAAIn9F,OAAOvI,EAAG,KGnDtB6yG,8BHlH2BjzB,EAAeh7E,UAAA3E,OAAA,QAAA,IAAA2E,UAAA,IAAAA,UAAA,GACtCxC,EAASuQ,SAASmgG,eAAiB,CAAC,QAAS,YAAYltF,SAASjT,SAASmgG,cAAc5I,SAC7F,OAAItqB,EACOx9E,EAEAA,IAAWuQ,SAASmgG,cAActL,aAAa,sBGkH1DxrD,iBAAkB0wC,GAClBI,oBAAqBD,GACrBkmB,iBdvI4B,SAAUpmB,EAAO3pF,EAAM4pF,GAC9ChB,KACD5oF,EAAOA,EAAK+O,QAAQ,UAAW,UAEnC46E,EAAM3pF,GAAQ4pF,GcqIdomB,YAAAljB,GACAmjB,gBAAAvgB,GACAwgB,kBZwHqBC,EAAmBC,GACxC,OAAOD,EAAUr3F,MAAM,KAAKgiB,OAAO1Z,KAAK,OAAQgvF,EAAUt3F,MAAM,KAAKgiB,OAAO1Z,KAAK,MYvHjFivF,WAAAC,+CC/HAC,IAA2B,EAelBC,GAAN,iCAAMA,oBAAAA,qBAAAA,EAAc,EACvB5yG,IAAA,cAAA,SAAO49B,OACP59B,IAAA,oBAAA,SAAa6yG,OACb7yG,IAAA,aAAA,SAAMoF,OACNpF,IAAA,aAAA,WAAoC,MAAO,MAC3CA,IAAA,aAAA,WAAoC,MAAO,MAC3CA,IAAA,eAAA,WAAsC,MAAO,MAC7CA,IAAA,gBAAA,WAAsB,OAAO,KAC7BA,IAAA,gBAAA,WAAsB,OAAO,KAC7BA,IAAA,iBAAA,WAAsB,OAAO,KAC7BA,IAAA,wBAAA,WAA6B,OAAO,MAV3B4yG,EAAN,GAaME,GAAN,iCAAMA,IAsBL,mBAtBKA,GAANvwG,KAMc0hB,IAAc,GAgBvB0uF,GACA,MAAM,IAAInzG,MAAM,kCAEpBmzG,IAAkB,EAClBpwG,KAAKwS,MAAQ,EACbxS,KAAKwwG,QAAU,GACfxwG,KAAKyiG,UAAY,GACjBziG,KAAKywG,WAAa,EAClBzwG,KAAK0wG,UAAW,EAChB1wG,KAAK2wG,cAAe,oBA/BfJ,EAAS,EAUV9yG,IAAA,kBAAR,SAAmBiN,cACfsuC,YAAW,WACP,IAAK,IAAIn8C,EAAI,EAAGA,EAACyhG,EAAQmE,UAAU3lG,OAAQD,IAACyhG,EACnCmE,UAAU5lG,GAAG6N,KAEjB8H,UACN,MA4BP/U,IAAA,cAAA,SAAO49B,IACO,IAANA,EACAr7B,KAAKywG,WAAa15F,KAAK2K,IAAI,EAAG1hB,KAAKywG,WAAa,GAEhDzwG,KAAKywG,gBAIbhzG,IAAA,oBAAA,SAAa6yG,GACTtwG,KAAKyiG,UAAUp/F,KAAKitG,MAGxB7yG,IAAA,aAAA,SAAMoF,GACF,KAAI7C,KAAKywG,WAAa,GAAtB,MAGOzwG,KAAK2wG,aAAe3wG,KAAKwwG,QAAQ1zG,OAAS,GAC7CkD,KAAKwwG,QAAQj7F,MAIjB,IAAM6zE,EAAMppF,KAAKwwG,QAAQxwG,KAAKwwG,QAAQ1zG,OAAS,GAC/C,GAAiB,iBAAb+F,EAAE+tG,QAA6BxnB,GAAsB,iBAAfA,EAAIwnB,QAA6BxnB,EAAIxN,OAAO,KAAO/4E,EAAE+4E,OAAO,GAGlG,OAFA57E,KAAKwwG,QAAQxwG,KAAKwwG,QAAQ1zG,OAAS,GAAK+F,OACxC7C,KAAKwS,QAGT,GAAiB,eAAb3P,EAAE+tG,QAA2BxnB,GAAsB,eAAfA,EAAIwnB,OAGxC,OAFA5wG,KAAKwwG,QAAQxwG,KAAKwwG,QAAQ1zG,OAAS,GAAK+F,OACxC7C,KAAKwS,QAKTxS,KAAKwwG,QAAQxwG,KAAKwwG,QAAQ1zG,QAAU+F,EACpC7C,KAAK2wG,aAAe3wG,KAAKwwG,QAAQ1zG,OAAS,EAC1C,IAAM+zG,EAAY7wG,KAAK0wG,SACvB1wG,KAAK0wG,SAAW35F,KAAK2K,IAAI1hB,KAAK0wG,SAAU1wG,KAAK2wG,aAAe3wG,KAAK0hB,KAC7DmvF,EAAY7wG,KAAK0wG,SACjB1wG,KAAK8wG,UAAU,CAACC,aAAc/wG,KAAKwwG,QAAQxwG,KAAK0wG,YAEhD1wG,KAAK8wG,UAAU,MAEf9wG,KAAK0wG,UAAY,IACjB1wG,KAAKwwG,QAAQxwG,KAAK0wG,UAAY,UAItCjzG,IAAA,aAAA,WACI,IAAIwB,EACJ,GAAIe,KAAKgxG,UAAW,CAChB/xG,EAAS,GACT,IAAK,IAAIpC,EAAImD,KAAK0wG,SAAW,EAAG7zG,EAAImD,KAAK2wG,aAAc9zG,IACnDoC,EAAOoE,KAAKrD,KAAKwwG,QAAQ3zG,IAE7BmD,KAAK2wG,eACL3wG,KAAK8wG,UAAU,MAGnB,OAAO7xG,KAGXxB,IAAA,aAAA,WACI,IAAMwB,EAAS,GAMf,OALIe,KAAKixG,YACLjxG,KAAK2wG,eACL1xG,EAAOoE,KAAKrD,KAAKwwG,QAAQxwG,KAAK2wG,eAC9B3wG,KAAK8wG,UAAU,OAEZ7xG,KAGXxB,IAAA,eAAA,WACI,MAAO,GAAG4O,OAAOrM,KAAKwwG,YAG1B/yG,IAAA,gBAAA,WACI,OAAOuC,KAAK2wG,aAAe3wG,KAAKwwG,QAAQ1zG,OAAS,KAGrDW,IAAA,gBAAA,WACI,OAAOuC,KAAK2wG,aAAe3wG,KAAK0wG,YAGpCjzG,IAAA,iBAAA,WACI,OAAOuC,KAAKwS,SAMhB/U,IAAA,wBAAA,WACI,OAAQuC,KAAK2wG,aAAe,MAxIvBJ,EAAN,GA6IMW,GAAY,IAAIX,iDClJhBY,GAAgB,IAlCtB,iCAAMC,oBAAAA,GAANpxG,KACKyiG,UAAqC,GAD1CziG,KAEK6vB,MAAQ,oBAFPuhF,EAAa,EAId3zG,IAAA,aAAR,sBACIuC,KAAKyiG,UAAUjlG,SAAQ,SAAAo+C,GACnBA,EAAI0iD,EAAMzuE,aAIlBpyB,IAAA,iBAAA,SAAU29B,QACI/8B,IAAN+8B,EACAp7B,KAAK6vB,OAASuL,EAEdp7B,KAAK6vB,QAET7vB,KAAKg/C,UAETvhD,IAAA,iBAAA,SAAU29B,QACI/8B,IAAN+8B,EACAp7B,KAAK6vB,OAASuL,EAEdp7B,KAAK6vB,QAET7vB,KAAKg/C,UAETvhD,IAAA,YAAA,WACI,OAAOuC,KAAK6vB,SAEhBpyB,IAAA,kBAAA,SAAWgsF,GACPzpF,KAAKyiG,UAAUp/F,KAAKomF,OA9Bf2nB,EAAN,ICPPC,GAAiBliG,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHgyG,GAAiBniG,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,uDCKzGiyG,GAAUC,ECLN1gG,KAAKC,MAAM,y6UDMf0gG,GAA4C,CACrD,CACIx2E,KAAM,KACNp5B,KAAM,WAEV,CACIo5B,KAAM,KACNp5B,KAAM,WAEV,CACIo5B,KAAM,KACNp5B,KAAM,OAEV,CACIo5B,KAAM,QACNp5B,KAAM,SAGD6vG,GAAYC,EAAAvyG,QAAAoyG,EAAA/6F,GAAArB,MAAG,SAAQw8F,EAAD32E,wEAClB,OAATA,EAAa,yCACNs2E,cACS,OAATt2E,EAAa,iCAEP9rB,EAAA,4EACG,OAAT8rB,EAAa,kCAEP9rB,EAAA,oBACG,UAAT8rB,EAAgB,kCAEV9rB,EAAA,iBAEjB,MAAM,IAAIlS,MAAM,qEElCP40G,GAAkB,kBAElBC,GAAN,iCAAMA,2BAAAA,GAAN9xG,KAEKyiG,UAA4B,GAMhCziG,KAAKgkB,KAAI+tF,GAAAC,aAAA,GAAOT,IAChBvxG,KAAKi7B,KAAO,2BATP62E,EAAe,EAYlBr0G,IAAA,oBAAN,SAAmBw0G,yCAAnB,SAAQL,yEACa,OAAbK,EAAiB,gBACjBjyG,KAAKgkB,KAAI+tF,GAAAC,aAAA,GAAOT,uDAEAA,YAAmBG,GAAaO,sBAAhDjyG,KAAKgkB,KAAIkuF,EAAAC,GAAAH,aAAA5zG,KAAA8zG,EAAAC,GAAAD,EAAA5rB,GAAA4rB,EAAAE,GAAAF,EAAAG,YAEbryG,KAAKi7B,KAAOg3E,EACZziG,SAAS8iG,gBAAgBhQ,aAAa,OAAQ2P,GAC9CjyG,KAAKyiG,UAAUjlG,SAAQ,SAAAo+C,GACnBA,uDAEPr4C,KAAAvD,YAEDvC,IAAA,YAAA,SAAKw9B,GACD,KAAMA,KAAQj7B,KAAKgkB,MACf,MAAM,IAAI/mB,MAAM,mCAAsCg+B,GAE1D,OAAOj7B,KAAKgkB,KAAKiX,MAGrBx9B,IAAA,oBAAA,sBACI,OAAOg0G,GAAUjrG,MAAK,SAAAo1C,GAClB,OAAOA,EAAK3gB,OAAIqjE,EAAUrjE,WAIlCx9B,IAAA,gBAAA,WACI,OAAOuC,KAAKi7B,QAIhBx9B,IAAA,kBAAA,SAAW2sE,GACHpqE,KAAKyiG,UAAUhgF,SAAS2nD,IAG5BpqE,KAAKyiG,UAAUp/F,KAAK+mE,MAGxB3sE,IAAA,oBAAA,SAAa2sE,GACT,IAAK,IAAIkiB,EAAI,EAAGA,EAAItsF,KAAKyiG,UAAU3lG,OAAQwvF,IACvC,GAAIliB,IAAepqE,KAAKyiG,UAAUnW,GAE9B,YADAtsF,KAAKyiG,UAAUr9F,OAAOknF,EAAG,OArD5BwlB,EAAN,GA4DHS,GAA6B,oBAmBzB,IAAMC,EAAOC,GAAM51G,GACnB,GAAI40G,GAAUjrG,MAAK,SAAAo1C,GACf,OAAOA,EAAK3gB,KAAKlX,gBAAkByuF,EAAKzuF,iBAGxC,OADAwuF,GAAqBC,EACrB,SAtBFC,GAAkB,IACPxqB,UAAUyqB,UAAYzqB,UAAUyqB,UAAY,CAACzqB,UAAU0qB,WAC/Dn1G,SAAQ,SAAAo+C,GACb,IAAMjjC,EAAQijC,EAAKjjC,MAAM,KACzB85F,GAAMpvG,KAAKu4C,GACU,IAAjBjjC,EAAM7b,QACN21G,GAAMpvG,KAAKsV,EAAM,OAGzB,IACQiqF,aAAatb,QAAQuqB,KACrBY,GAAM9zB,QAAQikB,aAAatb,QAAQuqB,KAEzC,MAAOhvG,IAGT,IAAK,IAAIhG,GAAI,EAAGA,GAAI41G,GAAM31G,OAAQD,KAAC,2BAWhC,IAAM+1G,GAAkB,IAAId,GAEtBe,GAAO,SAAC53E,EAA+BrsB,GAChD,GAAIA,EAAS,CACT,IAAI3P,EAAS2zG,GAAgB3wG,IAAIg5B,GAKjC,OAJer+B,OAAOD,KAAKiS,GACpBpR,SAAQ,SAAAC,GACXwB,EAASA,EAAO2P,QAAS,IAAOvC,OAAJ5O,EAAI,KAAImR,EAAQnR,OAEzCwB,EAEP,OAAO2zG,GAAgB3wG,IAAIg5B,aC5FnB63E,GACZpoG,OAyOSkc,EAAT,SAAgBzoB,GACR+rE,IAIJA,GAAW,EACX24B,GAAG+L,iBACHp/F,SAASutE,KAAKhkC,YAAYg6D,GAC1B5B,GAAc6B,WACdnQ,GAAG2M,UAAUyD,GACbpQ,GAAG2M,UAAU0D,GACb1mB,EAAY8I,UACZuN,GAAGlZ,oBAAoBwpB,EAAQ,QAASC,GACxCD,EAAOE,QAAU,KACjBC,EAAS91G,SAAQ,SAAAo+C,GACbinD,GAAG2M,UAAU5zD,MAEjB03D,EAASluG,OAAO,EAAGkuG,EAASx2G,QAExB4N,EAAEw6D,UACFx6D,EAAEw6D,SAAS/mE,KA9OnBgzG,GAAcoC,WACd,IAAIrpC,GAAW,EAIT6oC,EAAalQ,GAAGvgF,GAAG,CACrBg4B,OAAQ9qC,SAASutE,KACjBgnB,IAAK,CACDz7C,SAAU,WACV39C,KAAM,IACNy+E,IAAK,IACLx+E,MAAO,IACP4oG,OAAQ,IACRC,SAAU,YAGZN,EAAStQ,GAAGvgF,GAAG,CACjBg4B,OAAQy4D,EACR3D,UAAW,aAGTsE,EAAgB7Q,GAAGvgF,GAAG,CACxBg4B,OAAQ64D,EACRpP,IAAK,CACDnc,MAAO,OACP+rB,UAAW,OAEXrrD,SAAU,WACVjhC,QAAS,OACTusF,cAAe,SACfC,eAAgB,SAChBC,WAAY,YAIdZ,EAAOrQ,GAAGvgF,GAAG,CACfg4B,OAAQo5D,EACRrE,QAAS,WACD3kG,EAAEqpG,kBAGNntF,EAAM,WAEVm9E,IAAK,CACDz7C,SAAU,WACV39C,KAAM,IACNy+E,IAAK,IACL4qB,OAAQ,IACRpsB,MAAO,OACPC,OAAQ,UAKVorB,EAAUpQ,GAAGvgF,GAAG,CAClBykF,QAAS,SACTqI,UAAW,UACX7oF,QAAU,aAAqDla,OAAzCwmG,GAAK,eAAe,uBAA+BxmG,OAAVmlG,EAAAF,IAAU,MACzE3K,MAAOkM,GAAK,eACZxD,QAAS,WACLzoF,EAAM,WAEVm9E,IAAK,CACDnc,MAAOqsB,OACPpsB,OAAQosB,OACRC,WAAYD,OACZ3rD,SAAU,WACV19C,MAAO,IACPw+E,IAAK,IACL+qB,WAAY,OACZC,UAAW,UAIbC,EAAa,CAAC,gBACpBA,EAAWhxG,KAAK,oBAChB,IAAMixG,EAAQzR,GAAGvgF,GAAG,CAChBiE,QAAS,CACL0sF,EACApQ,GAAGvgF,GAAG,CACFiE,QAAQ7b,EAAEwF,QACV6zF,IAAK,CACDwQ,aAAc7pG,EAAEgiC,IAAM,OAAS,KAC/B8nE,YAAa,UAGrB9pG,EAAEgiC,KAEN0iE,UAAWiF,EAAWpzF,KAAK,KAC3B8iF,IAAKr5F,EAAE0c,MAAQ1c,EAAE0c,MAAQ,OAG7BssF,EAAcl3B,OACVqmB,GAAGvgF,GAAG,CACFyhF,IAAK,CACD0Q,KAAM,SAGdH,EACAzR,GAAGvgF,GAAG,CACFyhF,IAAK,CACD0Q,KAAM,QAKH,UAAX/pG,EAAE7K,MACFgjG,GAAGqB,aAAaoQ,EAAO,YAEZ,OAAX5pG,EAAE7K,MACFgjG,GAAGqB,aAAaoQ,EAAO,SAEZ,YAAX5pG,EAAE7K,MACFgjG,GAAGqB,aAAaoQ,EAAO,cAEZ,WAAX5pG,EAAE7K,MACFgjG,GAAGqB,aAAaoQ,EAAO,aAG3B,IAAM9nB,EAAc,IAAIqW,GAAGgN,YAAY,CACnCjjB,OAAQ,SAAS9C,EAAQjnF,EAAG6xG,GACpBxqC,IAGAyqC,GAAgC,UAAbD,IAAyB7R,GAAG6M,mBAC/C7sG,EAAE2oF,kBACFxyC,YAAW,WACP27D,EAAgBC,UACjB,KAEU,QAAbF,IACA7xG,EAAE2oF,kBACF5kE,EAAM,eAKZwsF,EAAe,SAACj7D,GACdq0C,EAAYqoB,UAAU,SACtB18D,EAAMozC,kBAGdsX,GAAGhqD,iBAAiBs6D,EAAQ,QAASC,GACrCD,EAAOE,QAAUxQ,GAAGgE,YAEpB,IAAIiO,EAAY,KAEZA,EADApqG,EAAEoqG,UACUpqG,EAAEoqG,WACS,IAAhBpqG,EAAEoqG,UACG,KAEA,KAGhB,IAUIH,EAVEI,EAAcrqG,EAAEgmF,SAAWhmF,EAAEgmF,QAAQ5zF,OAAS,EAAI+lG,GAAGvgF,GAAG,CAC1Dg4B,OAAQg6D,EACRvQ,IAAK,CACD18E,QAAS,OACT2tF,SAAU,OACVnB,eAAgB,WAChBoB,UAAW,OACXC,WAAY,UAEf,KAEC5B,EAAW,GACb5oG,EAAEgmF,SACFhmF,EAAEgmF,QAAQlzF,SAAQ,SAAA23G,GACd,IAIIC,EAJEC,EAAa,CAAC,kBACD,OAAfF,GAAwBzqG,EAAE4qG,WAAa5qG,EAAE4qG,UAAU7yF,SAAS0yF,KAC5DE,EAAWhyG,KAAK,qBAGpB,IAAI21E,EAAQm8B,EACO,OAAfA,IACAn8B,EAAQ65B,GAAK,YACbuC,EAAU5D,EAAAH,KAEK,WAAf8D,IACAn8B,EAAQ65B,GAAK,gBACbuC,EAAU5D,EAAAF,KAEd,IAAIiE,EAAU,KACVH,IACAG,EAAU1S,GAAGvgF,GAAG,CACZykF,QAAS,MACTlV,OAAQ,CACJjiF,IAAKwlG,EACLvtB,OAAQ,SAIpB,IAAM2tB,EAAM3S,GAAGvgF,GAAG,CACdg4B,OAAQy6D,EACRhO,QAAS,SACTqI,UAAWiG,EAAWp0F,KAAK,KAC3BsF,QAAS,CAACgvF,EAASv8B,GACnBq2B,QAAS,WACLzoF,EAAMuuF,MAGd7B,EAASjwG,KAAKmyG,GACVV,IAAcK,IACdn8D,YAAW,WACPw8D,EAAIrT,QACJgR,EAAOsC,SAAS,EAAG,KACpB,IACHz8D,YAAW,WAEPm6D,EAAOsC,SAAS,EAAG,KACpB,KAEHN,IAAezqG,EAAEgrG,eACjBf,EAAkBa,MA6B1B9qG,EAAEirG,WACFjrG,EAAEirG,WAAU,WACR/uF,EAAM,aAxQlB3P,OAAO2+F,SAAW,SAAC/yG,GACfA,EAAE0oF,kBAsSC,IAAMsqB,GAAQ,SAASnrG,OAuBjBkc,EAAT,WACIuqF,GAAc6B,WACdtmE,EAAI2mE,QAAU,KACd/4D,EAAOvB,YAAYrM,GACnBovD,cANAga,WAOA7+F,OAAO0yE,oBAAoB,SAAUosB,GACrCvpB,EAAY8I,UACZuN,GAAG2M,UAAUyD,GACbpQ,GAAG2M,UAAU0D,GACTxoG,EAAEsrG,SACFtrG,EAAEsrG,WAkCDD,EAAT,WACI,IAAME,EAAMC,EAAQC,YACdC,EAAMF,EAAQG,aAEpBxT,GAAGkB,IAAImS,EAAS,CACZvrG,KAAMoM,KAAK2K,IAAI,GAAIzK,OAAOq/F,WAAaL,GAAO,GAAK,KACnD7sB,IAAKryE,KAAK2K,IAAI,IAAKzK,OAAOs/F,YAAcH,GAAO,EAAW,GAANA,GAAe,QAxE3EjF,GAAcoC,WACd,IAAMj5D,EAAS9qC,SAASutE,KAClBrwC,EAAMm2D,GAAGvgF,GAAG,CACdg4B,OAAQA,EACR80D,UAAW,SACXrL,IAAK,CACDz7C,SAAU,QACV39C,KAAM,IACNy+E,IAAK,IACLoqB,OAAQ,IACR5oG,MAAO,IACPupG,WAAY,sBACZV,SAAU,OACV+C,cAAe,YACfC,kBAAmB,OACnBC,wBAAyB,cAGjChqE,EAAI2mE,QAAUxQ,GAAGgE,YAmBjB,IAAMqM,EAAOrQ,GAAGvgF,GAAG,CACfg4B,OAAQ5N,EACRq3D,IAAK,CACDz7C,SAAU,WACV39C,KAAM,IACNy+E,IAAK,IACLoqB,OAAQ,IACR5oG,MAAO,KAEXykG,QAASzoF,IAIPsvF,EAAUrT,GAAGvgF,GAAG,CAClBg4B,OAAQ5N,EACRq3D,IAAK,CACDz7C,SAAU,WACVs/B,MAAQib,GAAGM,uBACP,2BAA6Bz4F,EAAEk9E,MAAQl9E,EAAEk9E,MAAQ,KAAO,OACvDl9E,EAAEk9E,MAAQl9E,EAAEk9E,MAAQ,KAAO,KAChCC,OAAQ,oBACRssB,WAAY,OACZwC,aAAc,OACdlD,SAAU,SACVW,UAAW,sCAgBnB2B,IACA9+F,OAAO4hC,iBAAiB,SAAUk9D,GAGlC,IACMa,EAAU/T,GAAGvgF,GAAG,CAClBg4B,OAAQ47D,EACRnS,IAAK,CACDlc,OAAQosB,OACR5sF,QAAS,OACTwsF,eAAgB,gBAChBC,WAAY,SACZ+C,YAAc5C,UAGlBvpG,EAAEi8F,OACFiQ,EAAQvmG,YAAY3F,EAAEi8F,OAE1B,IAAMsM,EAAUpQ,GAAGvgF,GAAG,CAClBg4B,OAAQs8D,EACR7P,QAAS,SACTqI,UAAW,UACX7oF,QAAU,aAAqDla,OAAzCwmG,GAAK,eAAe,uBAA+BxmG,OAAVmlG,EAAAF,IAAU,MACzE3K,MAAOkM,GAAK,eACZxD,QAASzoF,EACTm9E,IAAK,CACDnc,MAAOqsB,OACPpsB,OAAQosB,OACRC,WAAYD,OACZE,WAAY,OACZC,UAAW,QAEfviB,OAAQ,CACJilB,SAAU,OAIZC,EAAYlU,GAAGvgF,GAAG,CACpBg4B,OAAQ47D,EACRnS,IAAK,CACDlc,OAAQ,uBAGZn9E,EAAE6b,SACFwwF,EAAU1mG,YAAY3F,EAAE6b,SAG5B,IAAMimE,EAAc,IAAIqW,GAAGgN,YAAY,CACnCjjB,OAAQ,SAAS9C,EAAQjnF,GACN,QAAXinF,IACAjnF,EAAE2oF,kBACF5kE,QAOZ5mB,KAAK4mB,MAAQ,WACTA,iDCpbKowF,GAAN,iCAAMA,EAOIp7B,8BAPJo7B,GAgBLh3G,KAAKsE,QAAUu+F,GAAGvgF,GAAG,CACjB8sF,UAAW,gBAGf,IAAM6H,EAAUpU,GAAGvgF,GAAG,CAClBg4B,OAAQt6C,KAAKsE,QACbyiG,QAAS,QACTqI,UAAW,uBAGfpvG,KAAK6jG,MAAQhB,GAAGvgF,GAAG,CACfg4B,OAAQ28D,EACRlQ,QAAS,QACThD,IAAK,CACDmR,WAAY,IACZ7tF,QAAS,gBAEbwqE,OAAQ,CACJhyF,KAAM,cAGdG,KAAK6jG,MAAMqT,QAAUt7B,EAAOzyC,KACxByyC,EAAOu7B,aAAen3G,KAAK6jG,MAAMqT,SACjCrU,GAAGqB,aAAalkG,KAAKsE,QAAS,0BAE7Bs3E,EAAOw7B,WACRp3G,KAAK6jG,MAAMwT,UAAW,GAGtBz7B,EAAO+qB,QACPsQ,EAAQtQ,MAAQ/qB,EAAO+qB,OAG3B,IAAM3tB,EAAQxpE,SAASM,cAAc,OACrCkpE,EAAM5xD,MAAMC,QAAU,eACtB2xD,EAAM21B,UAAY/yB,EAAO5C,MACxBA,EAAcguB,YAAa,EAC5BiQ,EAAQ5mG,YAAY2oE,GAEpBh5E,KAAK6jG,MAAMyT,SAAW,mBACd17B,EAAOu7B,cACL7Y,EAAOuF,MAAMqT,QACXrU,GAAGqB,aAAY5F,EAAMh6F,QAAS,0BAE9Bu+F,GAAG0B,gBAAejG,EAAMh6F,QAAS,2BAGzCs3E,EAAO1W,SAAQo5B,EAAMuF,MAAMqT,SAC3Bl+D,YAAW,aACF6qD,MAAM1Y,SACZ,IAEHvP,EAAOmoB,KACPlB,GAAGkB,IAAI/jG,KAAKsE,QAASs3E,EAAOmoB,uBArE3BiT,EAAQ,EAyEjBv5G,IAAA,iBAAA,WACI,OAAOuC,KAAK6jG,MAAMqT,WAGtBz5G,IAAA,mBAAA,WACI,OAAOuC,KAAKsE,WAGhB7G,IAAA,gBAAA,WACIuC,KAAK6jG,MAAMyT,SAAW,SAlFjBN,EAAN,GCFMO,GAAQ,SAAU37B,GAQ3B,IAAM38E,EAASuQ,SAASM,cAAc,SACtC,GAAI8rE,EAAO/7E,KACP,IACIZ,EAAOY,KAAO+7E,EAAO/7E,KACvB,MAAMgD,SAER5D,EAAOY,KAAO,OAkBlB,YAhBmBxB,IAAfu9E,EAAOh6D,MACP3iB,EAAO2iB,IAAM,GAAKg6D,EAAOh6D,UAEVvjB,IAAfu9E,EAAOl6D,MACPziB,EAAOyiB,IAAM,GAAKk6D,EAAOl6D,KAE7BziB,EAAOd,MAAQ,GAAKy9E,EAAOzyC,KACvByyC,EAAO1W,WACPjmE,EAAOq4G,SAAW,WACd17B,EAAO1W,SAASjmE,EAAOd,SAG3By9E,EAAOmoB,KACPlB,GAAGkB,IAAI9kG,EAAQ28E,EAAOmoB,KAGnB9kG,iDC7BEu4G,GAAN,iCAAMA,EASI9sG,8BATJ8sG,GAANx3G,KAmFHs1F,QAAU,aACDmiB,SAAS9tB,oBAAoB,SAAQ2U,EAAOoZ,iBAnEjD13G,KAAKy3G,SAAW5U,GAAGvgF,GAAG,CAClBykF,QAAS,SACTJ,MAAOj8F,EAAEi8F,MACT5C,IAAK,CACD4T,OAAQ,UACRC,SAAU,OACVC,QAAS,MACT1D,WAAY,OAEZ2D,YAAa,gBAGjBptG,EAAEq5F,KACFlB,GAAGkB,IAAI/jG,KAAKy3G,SAAU/sG,EAAEq5F,KAG5B,IAAMgU,EAAcrtG,EAAEqtG,YACjBA,IACD/3G,KAAKy3G,SAASJ,UAAW,GAE7Br3G,KAAKg4G,UAAYttG,EAAEstG,UACnB,IAAK,IAAIn7G,EAAI,EAAGA,EAAImD,KAAKg4G,UAAUl7G,OAAQD,IACvC,GAA0B,OAAtBmD,KAAKg4G,UAAUn7G,GAAnB,CAGA,IAAMo7G,EAASzoG,SAASM,cAAc,UACtCmoG,EAAO95G,MAAQ6B,KAAKg4G,UAAUn7G,GAAG,GACjCo7G,EAAO9I,YAAcnvG,KAAKg4G,UAAUn7G,GAAG,GACvCmD,KAAKy3G,SAASj7B,OAAOy7B,GAEzBj4G,KAAKsvG,SAAW5kG,EAAE4kG,SAClBtvG,KAAK03G,eAAiB,SAAC70G,GACdk1G,GAAWzZ,EACPmZ,SAAStsB,SAEbmkB,SAAQhR,EAAMmZ,SAASt5G,QAEhC6B,KAAKy3G,SAAS5+D,iBAAiB,SAAU74C,KAAK03G,gBAC9C13G,KAAKy3G,SAASt5G,MAAQ,cAAeuM,EAAIA,EAAEwtG,UAAY,uBAvDlDV,EAAM,EA0Df/5G,IAAA,iBAAA,SAAU2d,GACNpb,KAAKy3G,SAASt5G,MAAQid,KAG1B3d,IAAA,iBAAA,WACI,OAAOuC,KAAKy3G,SAASt5G,SAGzBV,IAAA,sBAAA,SAAes6E,GAEX,IADA,IAAIj2D,EAAQ,EACHjlB,EAAI,EAAGA,EAAImD,KAAKg4G,UAAUl7G,OAAQD,IACvC,GAAI,GAAKmD,KAAKg4G,UAAUn7G,GAAG,KAAOmD,KAAKy3G,SAASt5G,MAAO,CACnD2jB,EAAQjlB,EACR,MAGRilB,EAAQ/K,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI5hB,KAAKg4G,UAAUl7G,OAAQ,EAAGglB,EAAQi2D,IAC/D/3E,KAAKy3G,SAASt5G,MAAQ6B,KAAKg4G,UAAUl2F,GAAO,GAC5C9hB,KAAKsvG,SAAStvG,KAAKy3G,SAASt5G,UAGhCV,IAAA,mBAAA,WACI,OAAOuC,KAAKy3G,aAhFPD,EAAN,GCUMW,GAAc,SAASztG,OAmBvBu6D,EAAT,WACQmzC,EACAvV,GAAGqB,aAAax3D,EAAK,uBAErBm2D,GAAG0B,gBAAgB73D,EAAK,wBAtB5B0rE,IAAa1tG,EAAEwtG,UACbxrE,EAAMm2D,GAAGvgF,GAAG,CACd8sF,UAAW,eACXzI,MAAOj8F,EAAEi8F,MACT5C,IAAK,CACDsU,gBAAiB,QAAU3tG,EAAE4tG,MAAQ,MAEzCjJ,QAAS,SAASxsG,GACdA,EAAE0oF,iBACE7gF,EAAE6tG,SAAWH,IAGjBA,GAAYA,EACZnzC,IACAv6D,EAAE4kG,SAAS8I,OAYnBnzC,IAGAjlE,KAAKw4G,SAAW,SAASn9E,GACrB+8E,IAAa/8E,EACb4pC,KAEJjlE,KAAKy4G,WAAa,WACd,OAAO/rE,GAEX1sC,KAAK04G,SAAW,WACZ,OAAON,ICnCFO,GAAiB,SAASjuG,GAuCnC,QA9BIkuG,EAWKC,EAAT,SAAsB/2F,EAAO3X,GACrBA,EAAEpN,KAAO2N,EAAEouG,SACXF,EAAc92F,GAElB,IAAMi3F,EAAU,IAAIZ,GAAY,CAC5BG,MAAOnuG,EAAEmuG,MACT3R,MAAOx8F,EAAEw8F,MACTuR,UAAW/tG,EAAEpN,KAAO2N,EAAEouG,OACtBP,SAAS,EACTjJ,SAAU,YAjBlB,SAAgBxtF,EAAO/kB,GACnB67G,EAAc92F,EACd,IAAK,IAAIjlB,EAAI,EAAGA,EAAIm7G,EAAUl7G,OAAQD,IAClCm7G,EAAUn7G,GAAG27G,SAAS37G,IAAM+7G,GAEhCluG,EAAE4kG,SAASvyG,GAaHi8G,CAAOl3F,EAAO3X,EAAEpN,OAKxB,OAFA2vC,EAAIr8B,YAAY0oG,EAAQN,cAEjBM,GAjCLrsE,EAAMm2D,GAAGvgF,GAAG,CACd8sF,UAAW,sBACXrL,IAAK,CACD18E,QAAS,UAKX2wF,EAAY,GA6BT1rB,EAAI,EAAGA,EAAI5hF,EAAEstG,UAAUl7G,OAAQwvF,IACpC0rB,EAAU30G,KAAKw1G,EAAavsB,EAAG5hF,EAAEstG,UAAU1rB,KAK/CtsF,KAAKy4G,WAAa,WACd,OAAO/rE,GAEX1sC,KAAK04G,SAAW,WACZ,OAAOhuG,EAAEstG,UAAUY,GAAa77G,KCpExCk8G,GAAiB9pG,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SCY/G,OAAM45G,GAAoB,SAASC,EAAWC,OAqBxCC,EAAT,WACQF,EACAtW,GAAGkB,IAAIuV,EAAW,CACdC,gBAAiB,OACjBC,QAAS,MACTC,OAAQ,4CAGZ5W,GAAGkB,IAAIuV,EAAW,CACdC,gBAAiB,cACjBC,QAAS,MACTC,OAAQ,oBA9BdH,EAAYzW,GAAGvgF,GAAG,CACpByhF,IAAK,CACD2V,SAAU,QACV/C,aAAc,MACd/uB,MAAO,OACPC,OAAQ,OACRwwB,gBAAiB,QAAU7G,EAAAyH,IAAU,KACrCU,eAAgB,UAChBC,iBAAkB,YAClBjC,OAAQ,UACRkC,UAAW,aACX/B,YAAa,gBAkCrB,OA9BKjV,GAAGG,mBACJsW,EAAUlyF,MAAMC,QAAU,QAmB9BiyF,EAAU3S,MAAQkM,GAAK,yBACvByG,EAAUjG,QAAU,WAChB8F,GAAaA,EACbE,IACAD,EAAeD,IAGnBE,IACAD,EAAeD,GAERG,GCpDEQ,GAA0B,SAASprB,EAAQqrB,GACpD,IAAI96G,EAAS8X,KAAK6K,IAAI,GAAI,EAAI7K,KAAKwmB,IAAIxmB,KAAKuK,MAAMotE,EAAS,IAAK,IAIhE,OAHIqrB,IACA96G,GAAU,GAEP,EAAIA,GCuBF+6G,GAAW,SAAUtvG,OAI1BuvG,EA6BKC,EAAT,SAAuB/7G,GACnB,OAAIg8G,EACOF,EAAmBza,MAAMrhG,EAAO4Y,KAAKuK,MAAmB,IAAbm+E,KAE9CthG,EAAQyjB,IAAQF,EAAME,IAuDzBw4F,EAAT,WACQC,EACAxX,GAAGkB,IAAIr3D,EAAK,CACR8sE,QAAS,KACTc,cAAe,OAGnBzX,GAAGkB,IAAIr3D,EAAK,CACR8sE,QAAS,MACTc,cAAe,UAMlBC,EAAT,WACI,IAAIt7G,EAAS2iB,EAAM44F,GAAe94F,EAAME,GAIxC,OAHIu4F,IACAl7G,EAASg7G,EAAmB5a,YAAYmb,IAErCv7G,GAGFw7G,EAAT,WACI,IAAIC,EA5ER,SAAiBC,GACb,IAAI17G,EAAS2iB,EAAM+4F,GAAgBj5F,EAAME,GAIzC,OAHIu4F,IACAl7G,EAASg7G,EAAmB5a,YAAYsb,IAErC17G,EAuEM27G,CAAQJ,GAErBE,GADAA,EAASG,EAAaA,EAAWH,GAAUzqE,SAASyqE,IACpCp7C,eAAeszC,GAAgBkI,WAC/C9hC,EAAM21B,UAAYoM,EAAe,8CAAgDL,EAAS,UAC1FM,EAAQ5zF,MAAMwgE,MAAS4yB,EAAcS,EAAgB,MAIhDj8D,EAAT,SAAck8D,GACV,GAAKA,IAAWC,EAGhB,GAAIC,IAAeF,EAAS,CACxB,IAAMziE,EAAM47C,YAAY57C,MACpBA,EAAM4iE,GAAoBD,IAC1BC,EAAmB5iE,EACnB62D,EAASiL,WAGbjL,EAASiL,MAKRhmB,EAAT,SAAmBp8C,GAGf,GAFAA,EAAM04C,sBAEDwpB,EAAL,CAgBA,GAZmB,gBAAfliE,EAAMt4C,OACN6sC,EAAI0iE,UAAY,oCAEK,SAAjBj3D,EAAMw4C,SACN6pB,EAAcriE,EAAM85C,KAAOgpB,EAC3BT,EAAczjG,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,EAAG44F,IACtCC,IACAz7D,GAAK,IAETs8D,EAAad,GAGE,gBAAfriE,EAAMt4C,MAA0B,CAAC,OAAQ,SAAS4iB,SAAS01B,EAAMw4C,QAAS,CAE1E,IAAI4qB,EAASpjE,EAAMg6C,GACbzD,EAAS33E,KAAKsmB,IAAI8a,EAAM02C,MAAQ12C,EAAM07C,WAE5C0nB,GADezB,GAAwBprB,EAAyB,UAAjBv2C,EAAMw4C,QAIrD2qB,GAFAC,GAAUN,EAGVT,EAAczjG,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,EAAG05F,IAEtCb,IACAz7D,GAAK,GAGU,cAAf7G,EAAMt4C,OACN6sC,EAAI0iE,UAAY,gBAChBpwD,GAAK,MA/KPs/C,EAAQt+F,KACVq6G,GAA4B,IAAhB3vG,EAAE2vG,UACdF,IAAczvG,EAAE8wG,MAGpB,IAAK9wG,EAAEsuE,QAAUtuE,EAAE4kG,SACf,KAAM,0BAEV,KAAa,GAAT5kG,EAAEkX,KAAqB,GAATlX,EAAEgX,KAA2B,GAAfhX,EAAEwtG,WACzBxtG,EAAEkX,KAAQlX,EAAEgX,KAAQhX,EAAEwtG,WACvB,KAAM,yBAGd,GAAIxtG,EAAEkX,KAAOlX,EAAEgX,IACX,KAAM,yBAGV,IAAMu5F,EAAevwG,EAAEk9E,MACjB6zB,EAAgB/wG,EAAEm9E,OAClB4X,EAAa/0F,EAAE+0F,WAAa/0F,EAAE+0F,WAAawb,EAC7Cr5F,EAAMlX,EAAEkX,IACRF,EAAMhX,EAAEgX,IACN4tF,EAAW5kG,EAAE4kG,SACb6L,IAAoBzwG,EAAEywG,gBACtBN,EAAanwG,EAAEmwG,WACfO,EAAa1wG,EAAE0wG,WAErB,GAAIjB,EAAW,CACX,IAAMuB,EAAuB,cAAZhxG,EAAE8wG,MAAwB3Y,GAAG0H,qBAAqB3oF,EAAKF,EAAK,IAAOhX,EAAE8wG,MACtFvB,EAAqB,IAAIpX,GAAGyH,mBAAmBoR,GAkBnD,IAAMhvE,EAAMm2D,GAAGvgF,GAAG,CACd8sF,UAAW,gBACXrL,IAAK,CACD0P,SAAU,SACVnrD,SAAU,WACVs/B,MAAOqzB,EAAe,KACtBpzB,OAAQ4zB,EAAgB,KACxBE,WAAY,UAGdZ,EAAerwG,EAAEsuE,MACjBA,EAAQxpE,SAASM,cAAc,OAC/BkrG,EAAUxrG,SAASM,cAAc,OACjC8rG,EAAepsG,SAASM,cAAc,OACxC0qG,EAAcN,EAAcxvG,EAAEwtG,WAElCxrE,EAAIr8B,YAAY2qG,GAChBtuE,EAAIr8B,YAAY2oE,GAChBgiC,EAAQ3qG,YAAYurG,GACpBZ,EAAQ5L,UAAY,cAGpB1iE,EAAImvE,cAAgB,WAChB,OAAO,GAGX7iC,EAAM21B,UAAYoM,EAElBC,EAAQ5zF,MAAMkhC,SAAW,WACzB0yD,EAAQ5zF,MAAMzc,KAAO,IACrBqwG,EAAQ5zF,MAAMgiE,IAAM,IACpB4xB,EAAQ5zF,MAAMwgE,MAAS4yB,EAAcS,EAAgB,KACrDD,EAAQ5zF,MAAMygE,OAAS4zB,EAAgB,KAEvC,IAAMK,EAAgBL,EAAgB,GACtC5Y,GAAGkB,IAAI/qB,EAAO,CACV1wB,SAAU,WACV39C,KAAM,MACNy+E,IAAMqyB,EAAgB,EAAIK,EAAgB,EAAI,EAAK,KACnD5H,WAAY4H,EAAgB,KAC5BlE,SAAUkE,EAAgB,KAC1BxB,cAAe,SAgBnBF,IAkBA,IAgBIkB,EA0CAS,EA1DAV,EAAmB,EA2DjBW,EAAyBhjE,YAAW,WACtC+iE,EAAkB,IAAIlZ,GAAGiN,gBAAgB,CACrC5yG,OAAQwvC,EACR4mD,YAAa,EACb0B,aAAa,EACbT,UAAWA,EACXE,QAAS,SAASt8C,GACVgiE,GACAK,IAAgBriE,EAAMu2C,QAAUurB,EAAmB7a,WAAa6a,EAAmB9a,aAAe,GAClGqb,EAAczjG,KAAK2K,IAAIu4F,EAAmB9a,YAAapoF,KAAK6K,IAAIq4F,EAAmB7a,WAAYob,MAE/FA,IAAgBriE,EAAMu2C,OAAS,GAC/B8rB,EAAczjG,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,EAAG44F,KAE1CC,IACAnL,EAASiL,QAGjBE,MACD,GAIHz6G,KAAKi8G,cAAgB,SAAUztD,GAC3BgsD,EAAczjG,KAAK6K,IAAI,EAAG44F,EAAczjG,KAAKsmB,IAAImxB,IACjDisD,IACAnL,EAASiL,MAEbv6G,KAAKk8G,cAAgB,SAAU1tD,GAC3BgsD,EAAczjG,KAAK2K,IAAI,EAAG84F,EAAczjG,KAAKsmB,IAAImxB,IACjDisD,IACAnL,EAASiL,MAEbv6G,KAAKw4G,SAAW,SAASp9E,GACrBo/E,EAAcN,EAAc9+E,GAC5Bq/E,KAEJz6G,KAAK04G,SAAW,WACZ,OAAO6B,KAEXv6G,KAAKilE,OAAS,SAASk3C,GAInB,GAHAv6F,EAAMu6F,EAAOv6F,IACbF,EAAMy6F,EAAOz6F,IACby4F,IAAcgC,EAAOX,MACN,CACX,IAAME,EAA4B,cAAjBS,EAAOX,MAAwB3Y,GAAG0H,qBAAqB3oF,EAAKF,EAAK,IAAOy6F,EAAOX,MAChGvB,EAAqB,IAAIpX,GAAGyH,mBAAmBoR,QAE/CzB,EAAqB,KAEzB3b,EAAM8d,cAAcD,EAAOE,aAE/Br8G,KAAKo8G,aAAe,SAAUv5G,GAC1Bw3G,IAAcx3G,EACdu3G,KAGJp6G,KAAKs1F,QAAU,WACXlG,aAAa4sB,GACTD,GACAA,EAAgBzmB,WAIxBt1F,KAAKy4G,WAAa,WACd,OAAO/rE,IC1Rf4vE,GAAiBntG,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SCY/G,OAAMi9G,GAAiB,SAAU7xG,OA4E3B8xG,EAAT,SAA2BC,EAAUC,GACjC,IAAMz9G,EAAc,GAEd09G,EAAQ9Z,GAAGvgF,GAAG,CAChByhF,IAAK,CACD18E,QAAS,OACTysF,WAAY,SACZmB,UAAW,SAGb2H,EAAU/Z,GAAGvgF,GAAG,CAClBiE,QAASk2F,EACT1Y,IAAK,CACDnc,MAAO,UAITi1B,EAAUtF,GAAM,CAClBpuE,KAAM2zE,EAAaJ,GACnB96F,IAAK,EACLF,IAAK,IACL7hB,KAAM,SACNkkG,IAAK,CACDnc,MAAO,QAEX1iB,SAAU,WACgB,KAAlB23C,EAAQ1+G,OAAgBkzC,WAAWwrE,EAAQ1+G,OAAS,GAAKkzC,WAAWwrE,EAAQ1+G,OAAS,IACrFc,EAAOgmE,UAGX43C,EAAQ1+G,MAAQ,GAAK4Y,KAAK4gD,MAAMtmB,WAAWwrE,EAAQ1+G,QACnD2+G,EAAaJ,GAAgBG,EAAQ1+G,MACrC4+G,EAAU31F,MAAM+sF,WAAa,IAAMtR,GAAG0L,eAAelN,YAAYyb,GACjEE,EAAS7+G,MAAQ,IAAM0kG,GAAG0L,eAAelN,YAAYyb,OAY7D,OARAH,EAAMtsG,YAAYusG,GAClBD,EAAMtsG,YAAYwsG,GAClBnwE,EAAIr8B,YAAYssG,GAGhB19G,EAAOgmE,OAAS,WACZ43C,EAAQ1+G,MAAQ2+G,EAAaJ,IAE1Bz9G,GAvHP69G,EAAe,IAAIja,GAAGwL,IAAI3jG,EAAE2oD,MAAMlvD,EAAGuG,EAAE2oD,MAAMi3B,EAAG5/E,EAAE2oD,MAAMh4B,GAEtDqR,EAAMm2D,GAAGvgF,GAAG,IAEZy6F,EAAYla,GAAGvgF,GAAG,CACpByhF,IAAK,CACDnc,MAAO,OACPC,OAAQ,OACR0sB,aAAc,OACdH,UAAW,uCACXD,WAAY,IAAMtR,GAAG0L,eAAelN,YAAYyb,GAChDhF,YAAa,gBAGrBprE,EAAIr8B,YAAY0sG,GAIhB,IAAME,EAAWpa,GAAGvgF,GAAG,CACnByhF,IAAK,CACD18E,QAAS,OACTysF,WAAY,SACZS,aAAc,UAGhB2I,EAAWra,GAAGvgF,GAAG,CACnBiE,QAASssF,GAAK,WACd9O,IAAK,CACDnc,MAAO,UAGTo1B,EAAWzF,GAAM,CACnBpuE,KAAM,IAAM05D,GAAG0L,eAAelN,YAAYyb,GAC1C/Y,IAAK,CACDnc,MAAO,QAEX1iB,SAAU,WACN,IAAIw8B,EAASmB,GAAG0L,eAAe1M,SAASmb,EAAS7+G,OAClC,OAAXujG,GACAA,EAASob,EACTE,EAAS7+G,MAAQ,IAAM0kG,GAAG0L,eAAelN,YAAYyb,IAErDA,EAAepb,EAEnBqb,EAAU31F,MAAM+sF,WAAa,IAAMtR,GAAG0L,eAAelN,YAAYK,GAEjE,IAAK,IAAI7kG,EAAI,EAAGA,EAAIsgH,EAAOrgH,OAAQD,IAC/BsgH,EAAOtgH,GAAGooE,YAIhBm4C,EAAava,GAAGvgF,GAAG,CACrBykF,QAAS,SACTxgF,QAAS,aAAeirF,EAAA8K,IAAU,kBAClC3V,MAAOkM,GAAK,YACZ9O,IAAK,CACDmR,WAAY,QAEhB7F,QAAS,WACL2N,EAAShE,SACTxpG,SAAS6tG,YAAY,WAG7BJ,EAAS5sG,YAAY6sG,GACrBD,EAAS5sG,YAAY2sG,GACrBC,EAAS5sG,YAAY+sG,GACrB1wE,EAAIr8B,YAAY4sG,GAChBjkE,YAAW,WACPgkE,EAAS7a,QACT6a,EAAShE,WACV,GAmDH,IAAMmE,EAAS,GACfA,EAAO95G,KAAKm5G,EAAkB3J,GAAK,OAAQ,MAC3CsK,EAAO95G,KAAKm5G,EAAkB3J,GAAK,SAAU,MAC7CsK,EAAO95G,KAAKm5G,EAAkB3J,GAAK,QAAS,MAG5CC,GAAM,CACF51G,OAAQsS,SAASutE,KACjB7sE,QAAU,MAAgC7D,OAA3BwmG,GAAK,sBAAsB,QAC1CnmE,IAAKA,EACLooE,WAAW,EACXY,aAAc,KACdhlB,QAAS,CAAC,KAAM,UAChBxrB,SAAU,SAAUo4C,GAChB,IAAI5b,EAAS,KACK,OAAd4b,IACA5b,EAASmB,GAAG0L,eAAe1M,SAASmb,EAAS7+G,QAEjDuM,EAAEsrG,QAAQtU,OCzJtB6b,GAAiBpuG,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SCsB/G,ICJMk+G,GAAqB,SAAU5hC,OAkB/B6hC,EAAT,WAEI,IADA,IAAMphB,EAAMqhB,EAAS70B,WAAW,MACvBhsF,EAAI,EAAGA,EAAI6gH,EAAS71B,OAAQhrF,GAAK,EAAG,CACzC,IAAM8gH,EAAYthB,EAAIuhB,qBAAqB,EAAG,EAAGF,EAAS91B,MAAO,GAE3Di2B,EAAUhb,GAAG0L,eAAerN,MAAM,IAAI2B,GAAGuL,IAAI/6C,EAAMs0B,EAAG,EAAG,IAAO9qF,EAAI6gH,EAAS71B,OAAS,MACtFi2B,EAAWjb,GAAG0L,eAAerN,MAAM,IAAI2B,GAAGuL,IAAI/6C,EAAMs0B,EAAG,IAAK,IAAO9qF,EAAI6gH,EAAS71B,OAAS,MAC/F81B,EAAUI,aAAa,EAAG,IAAMlb,GAAG0L,eAAelN,YAAYwc,IAC9DF,EAAUI,aAAa,EAAG,IAAMlb,GAAG0L,eAAelN,YAAYyc,IAC9DzhB,EAAIC,UAAY,UAChBD,EAAIC,UAAYqhB,EAChBthB,EAAIE,SAAS,EAAG1/F,EAAG6gH,EAAS91B,MAAO,KAwDlCo2B,EAAT,WACI,IAAMrzG,EAAO0oD,EAAMlgB,EAAI,IAAMyoC,EAAOgM,MAAQ,EACtCwB,GAAO,EAAI/1B,EAAMj4B,EAAI,KAAOwgD,EAAOqiC,SAAW,EACpDpb,GAAGkB,IAAIma,EAAW,CACdvzG,KAAMA,EAAO,KACby+E,IAAKA,EAAM,QASV+0B,EAAT,WACIC,EAASh3F,MAAMzc,KAAQ0oD,EAAMs0B,EAAI,QAAU/L,EAAOgM,MAAQ,EAAK,MAnG7Dl7C,EAAMl9B,SAASM,cAAc,OACnC48B,EAAImvE,cAAgB,SAASh5G,GACzBA,EAAE0oF,kBAEN,IAAIl4B,EAAQwvC,GAAG0L,eAAepN,MAAM,IAAI0B,GAAGwL,IAAIzyB,EAAOvoB,MAAMlvD,EAAGy3E,EAAOvoB,MAAMi3B,EAAG1O,EAAOvoB,MAAMh4B,IAC5FwnE,GAAGkB,IAAIr3D,EAAK,CACRk7C,MAAOhM,EAAOgM,MAAQ,KACtBt/B,SAAU,WACVmrD,SAAU,SACVkI,WAAY,SAGhB,IAAM+B,EAAW7a,GAAGja,OAAO,GAAI,IAC/B80B,EAASt2F,MAAMwgE,MAAQhM,EAAOgM,MAAQ,KACtC81B,EAASt2F,MAAMygE,OAASjM,EAAOqiC,SAAW,KAC1CP,EAASt2F,MAAMuwF,OAAS,YAiBxB8F,IAEA,IAAMY,EAAUxb,GAAGja,OAAOhN,EAAOgM,MAAOhM,EAAO0iC,SAC/CD,EAAQj3F,MAAMuwF,OAAS,uBAKnB,IAHA,IAAMtb,EAAMgiB,EAAQx1B,WAAW,MAEzB01B,EAAQliB,EAAIuhB,qBAAqB,EAAG,EAAGhiC,EAAOgM,MAAO,GAClD/qF,EAAI,EAAGA,EAAI,EAAGA,GAAK,IAAM,CAC9B,IAAM2hH,EAAM3b,GAAG0L,eAAerN,MAAM,IAAI2B,GAAGuL,IAAQ,IAAJvxG,EAAS,IAAK,MAC7D0hH,EAAMR,aAAalhH,EAAG,QAAUozC,SAAS,GAAKuuE,EAAIr6G,GAAK,KAAO8rC,SAAS,GAAKuuE,EAAIl0B,GAAK,KAAOr6C,SAAS,GAAKuuE,EAAInjF,GAAK,QAEvHghE,EAAIC,UAAYiiB,EAChBliB,EAAIE,SAAS,EAAG,EAAG3gB,EAAOgM,MAAOhM,EAAO0iC,YAG5Czb,GAAGkB,IAAI2Z,EAAU,CACb91B,MAAOhM,EAAOgM,MAAQ,KACtBC,OAAQjM,EAAOqiC,SAAW,KAC1BxK,SAAU,SACVnrD,SAAU,aAEdo1D,EAASt2F,MAAMsyF,SAAW,OAC1B2E,EAAQj3F,MAAMsyF,SAAW,OAEzBhtE,EAAIr8B,YAAYqtG,GAChBhxE,EAAIr8B,YAAYguG,GAEhB,IAAMH,EAAY1uG,SAASM,cAAc,OACzC+yF,GAAGkB,IAAIma,EAAW,CACdt2B,MAAO,MACPC,OAAQ,MACR8uB,aAAc,MACdruD,SAAU,WACVgyD,cAAe,OACflG,UAAW,yCAEf1nE,EAAIr8B,YAAY6tG,GAEhB,IAAME,EAAW5uG,SAASM,cAAc,OACxC+yF,GAAGkB,IAAIqa,EAAU,CACbx2B,MAAO,IACPC,OAAQjM,EAAO0iC,QAAU,KACzBG,WAAY,iBACZC,YAAa,iBACbp2D,SAAU,WACV8gC,IAAKxN,EAAOqiC,SAAW,KACvB3D,cAAe,SAEnB5tE,EAAIr8B,YAAY+tG,GAqBhBJ,IACAG,IAEA,IAAMQ,EAAa,CACfh3B,EAAG,EACHx0C,EAAG,EACH/X,EAAG,GAGHwjF,EAAc,KACZC,EAAoB,IAAIhc,GAAGiN,gBAAgB,CAC7C5yG,OAAQwgH,EACRpqB,YAAa,EACb0B,aAAa,EACbT,UAAW,SAASp8C,GAmBhB,GAjBmB,gBAAfA,EAAMt4C,OACN++G,EAAczmE,EAAMy3C,UACC,SAAjBz3C,EAAMw4C,QAENguB,EAAWxrE,EAAIgF,EAAM85C,KAAOrW,EAAOgM,MAAQ,IAC3C+2B,EAAWvjF,EAAI,IAAM+c,EAAM+5C,KAAOtW,EAAOqiC,SAAW,IAEpD5qD,EAAQ,IAAIwvC,GAAGuL,IAAI/6C,EAAMs0B,EAAGg3B,EAAWxrE,EAAGwrE,EAAWvjF,GAErD4iF,IACApiC,EAAO1W,SAAS29B,GAAG0L,eAAerN,MAAM7tC,MAExCsrD,EAAWxrE,EAAIkgB,EAAMlgB,EACrBwrE,EAAWvjF,EAAIi4B,EAAMj4B,IAIV,gBAAf+c,EAAMt4C,MAA0B,CAAC,OAAQ,SAAS4iB,SAAS01B,EAAMw4C,SAAWiuB,IAAgBzmE,EAAMy3C,UAAW,CAE7G,IAAIkvB,EAAS,EACQ,UAAjB3mE,EAAMw4C,SACNmuB,EAAS,IAGbH,EAAWxrE,GAAKgF,EAAMg6C,GAAKvW,EAAOgM,MAAQ,IAAMk3B,EAChDH,EAAWvjF,GAAK+c,EAAMi6C,GAAKxW,EAAOqiC,SAAW,IAAMa,EAEnDzrD,EAAQ,IAAIwvC,GAAGuL,IAAI/6C,EAAMs0B,EAAGg3B,EAAWxrE,EAAGwrE,EAAWvjF,GACrD4iF,IACApiC,EAAO1W,SAAS29B,GAAG0L,eAAerN,MAAM7tC,IAGzB,cAAflb,EAAMt4C,OACN++G,EAAc,SAMtBG,EAAa,KACXC,EAAmB,IAAInc,GAAGiN,gBAAgB,CAC5C5yG,OAAQmhH,EACR/qB,YAAa,EACb0B,aAAa,EACbT,UAAW,SAASp8C,GAiBhB,GAfmB,gBAAfA,EAAMt4C,OACNk/G,EAAa5mE,EAAMy3C,UACE,SAAjBz3C,EAAMw4C,QAENguB,EAAWh3B,EAAIxvC,EAAM85C,KAAOrW,EAAOgM,MAAQ,OAE3Cv0B,EAAQ,IAAIwvC,GAAGuL,IAAIuQ,EAAWh3B,EAAGt0B,EAAMlgB,EAAGkgB,EAAMj4B,GAChDqiF,IACAU,IACAviC,EAAO1W,SAAS29B,GAAG0L,eAAerN,MAAM7tC,KAExCsrD,EAAWh3B,EAAIt0B,EAAMs0B,GAIV,gBAAfxvC,EAAMt4C,MAA0B,CAAC,OAAQ,SAAS4iB,SAAS01B,EAAMw4C,SAAWouB,IAAe5mE,EAAMy3C,UAAW,CAE5G,IAAMlB,EAAS33E,KAAKsmB,IAAI8a,EAAM02C,MAAQ12C,EAAM07C,WACtCirB,EAAShF,GAAwBprB,EAAyB,UAAjBv2C,EAAMw4C,QAErDguB,EAAWh3B,GAAKxvC,EAAMg6C,GAAKvW,EAAOgM,MAAQ,OAASk3B,EAE9B,UAAjB3mE,EAAMw4C,SACNguB,EAAWh3B,EAAIg3B,EAAWh3B,EAAI,OAC1Bg3B,EAAWh3B,EAAI,IACfg3B,EAAWh3B,GAAK,SAGxBg3B,EAAWh3B,EAAI5wE,KAAK6K,IAAI,OAAQ+8F,EAAWh3B,GAC3Ct0B,EAAQ,IAAIwvC,GAAGuL,IAAIuQ,EAAWh3B,EAAGt0B,EAAMlgB,EAAGkgB,EAAMj4B,GAChDqiF,IACAU,IACAviC,EAAO1W,SAAS29B,GAAG0L,eAAerN,MAAM7tC,IAGzB,cAAflb,EAAMt4C,OACNk/G,EAAa,SAMnBE,EAAWzvG,SAASM,cAAc,OACxCmvG,EAAS73F,MAAM6gB,MAAQ,OACvByE,EAAIr8B,YAAY4uG,GAGhBj/G,KAAKk/G,SAAW,SAAU/gF,GACtBk1B,EAAQwvC,GAAG0L,eAAepN,MAAM,IAAI0B,GAAGwL,IAAIlwE,EAAEh6B,EAAGg6B,EAAEmsD,EAAGnsD,EAAE9C,IACvDoiF,IACAO,IACAG,KAEJn+G,KAAKm/G,SAAW,WACZ,OAAOtc,GAAG0L,eAAerN,MAAM7tC,IAEnCrzD,KAAKy4G,WAAa,WACd,OAAO/rE,GAEX1sC,KAAKs1F,QAAU,WACXupB,EAAkBvpB,UAClB0pB,EAAiB1pB,WAErBt1F,KAAK+nB,IAAM,WACP62F,EAAc,KACdG,EAAa,OC5ORK,GAAc,SAASC,OAmCvBC,EAAT,WACIC,EAAYn4F,MAAMzc,KAAO60G,EAAY,KAEjCD,EAAYn4F,MAAMgtF,UADlBqL,EAC8B,wBAEA,2BAG7B/G,EAAT,WACI,OAAO8G,GAAcH,EAAMz3B,MAAQy3B,EAAMK,YA1CvChzE,EAAMl9B,SAASM,cAAc,OACnC48B,EAAItlB,MAAMkhC,SAAW,WACrB,IAQIk3D,EAREG,EAAa9c,GAAGvgF,GAAG,IACnBi9F,EAAc1c,GAAGvgF,GAAG,CACtByhF,IAAK,CACD+T,YAAa,gBAGrBprE,EAAIr8B,YAAYsvG,GAChBjzE,EAAIr8B,YAAYkvG,GAEhB,IAAIE,GAAa,EAIb5c,GAAGkB,IAAI4b,EAAY,CACf1K,UAAWhlE,SAAS,IAAMovE,EAAMK,UAAY,EAAI,IAAM,KACtD73B,OAAQ,MACRssB,WAAY,OACZvsB,MAAOy3B,EAAMz3B,MAAQ,OAI7B,IAsBIm0B,EAEI6D,EAcAC,EAtCYhd,GAAGvgF,GAAG,CACtBg4B,OAAQilE,EACRxb,IAAK,CAED+b,OAAQ,gBACRl4B,MAAO,oBACPC,OAAQ,sBAmBZ23B,EAAY3c,GAAGv9B,MAAM+5C,EAAMl2E,MAAQk2E,EAAMz3B,MAAQy3B,EAAMK,WAAY,EAAGL,EAAMz3B,MAAQy3B,EAAMK,WAC1F7c,GAAGkB,IAAIwb,EAAa,CAChBj3D,SAAU,WACV8gC,IAAK,MACLmwB,gBAAiB,UACjBnF,UAAW,0BACXxsB,MAAOy3B,EAAMK,UAAY,KACzB73B,OAAQw3B,EAAMK,UAAY,KAC1B/I,aAAc0I,EAAMK,UAAY,KAChC/H,OAAQ,YACRoI,WAAY,gCAEhBT,IAEAvD,EAAkB,IAAIlZ,GAAGiN,gBAAgB,CACrC5yG,OAAQqiH,EACRvqB,aAAa,EACbT,UAAW,SAASp8C,GACG,gBAAfA,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,QACtCivB,GAAU,EACVH,GAAa,EACbI,EAAeL,EACfF,IACAnnE,EAAM24C,wBACgB,gBAAf34C,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,SAC7Cx4C,EAAM24C,uBACN+uB,GAA8B1nE,EAAMg6C,GACpCqtB,EAAYvvE,SAAS,GAAK4yD,GAAGv9B,MAAMu6C,EAAc,EAAGR,EAAMz3B,MAAQy3B,EAAMK,YACxEJ,IACAD,EAAMn6C,SAASwzC,IAAYkH,GAAS,GACpCA,GAAU,GAEK,cAAfznE,EAAMt4C,OACNs4C,EAAM24C,uBACN2uB,GAAa,EACbH,IACAD,EAAMn6C,SAASwzC,KAAY,GAAO,OAOlD14G,KAAKggH,MAAQ,WACT,OAAOtzE,GAEX1sC,KAAKigH,UAAY,SAAS7H,GAElBmH,EAAYn4F,MAAMmyF,gBADlBnB,EACoC,OAEA,WAG5Cp4G,KAAKs1F,QAAU,WACXymB,EAAgBzmB,YCnGX4qB,GAAe,SAASx1G,GAiBjC,QAwESu6D,EAAT,WACI,IAAK,IAAIpoE,EAAI,EAAGA,EAAIsjH,EAAUrjH,OAAQD,IAClCsjH,EAAUtjH,GAAGujH,cAAcvjH,IAAMwjH,IA1FnC3zE,EAAMm2D,GAAGvgF,GAAG,CACdiE,QAAS7b,EAAEsuE,MAAQtuE,EAAEsuE,MAAQ,GAC7B+qB,IAAK,CACD18E,QAAS,OACTysF,WAAY,SACZgE,YAAa,gBAIjBuI,EAAgB,EACdC,EAAW,GACXH,EAAY,GAEZI,EAAa1d,GAAGuJ,qBAAqB,GAGlC9gB,EAAI,EAAGA,EAAI5gF,EAAE41G,SAASxjH,OAAQwuF,IAAK,CAGxC,IAFA,IAAM1vC,EAAOlxC,EAAE41G,SAASh1B,GACpB5O,GAAQ,EACH75E,EAAI,EAAGA,EAAIy9G,EAASxjH,OAAQ+F,IAAK,CACtC,IAAM29G,EAAQF,EAASz9G,GACvB,GAAc,OAAV29G,GAA2B,OAAT5kE,IAGlB4kE,EAAMr8G,IAAMy3C,EAAKz3C,GAAKq8G,EAAMl2B,IAAM1uC,EAAK0uC,GAAKk2B,EAAMnlF,IAAMugB,EAAKvgB,GAAKmlF,EAAMp9G,IAAMw4C,EAAKx4C,GAAG,CACtFs5E,GAAQ,EACR,OAGJA,IAGJ4jC,EAASj9G,KAAKu4C,GACV,iBAAkBlxC,GAAKA,EAAE+1G,eAAiBn1B,IAC1C+0B,EAAgBC,EAASxjH,OAAS,IAI1C,IAAK,IAAIwvF,EAAI,EAAGA,EAAIg0B,EAASxjH,OAAQwvF,KAAC,SACxBzvF,GAEN,IAAM6jH,EAAc7d,GAAGvgF,GAAG,CACtBiE,QAAS+5F,EAASzjH,GAAK,GAAK,IAC5BknG,IAAK,CACDnc,MAAO+4B,OACP94B,OAAQ84B,OACRpH,gBAAiB+G,EAASzjH,GAAKgmG,GAAG0L,eAAe5M,UAAU2e,EAASzjH,IAAM,cAC1Eq4G,WAAY,MACZd,UAAW,iBACXuD,OAAQ,UACRgE,WAAY,OACZiF,UAAW,SACX1M,WAAayM,OACbttD,MAAO,UAGXitD,EAASzjH,IAAwB,IAAlByjH,EAASzjH,GAAGuG,IAC3Bs9G,EAAYt5F,MAAMixF,gBAAkB,OAASkI,EAAa,KAG9DG,EAAYrN,QAAU,SAASxwG,GAC3BA,EAAE0oF,iBACF80B,EAAgBxjH,EAChBooE,IACAv6D,EAAE4kG,SAASgR,EAASzjH,KAGvB6jH,EAAoBN,cAAgB,SAAS/kF,GACtCA,EACAwnE,GAAGkB,IAAI2c,EAAa,CAChBtM,UAAW,mFACXkG,cAAe,SAGnBzX,GAAGkB,IAAI2c,EAAa,CAChBtM,UAAW,iBACXkG,cAAe,MAM3B5tE,EAAIr8B,YAAYqwG,GAChBP,EAAU98G,KAAKq9G,GA7Ce,CA8C/Bp0B,GASPrnB,IAGAjlE,KAAKy4G,WAAa,WACd,OAAO/rE,GAGX1sC,KAAKs1F,QAAU,WACX6qB,EAAU3iH,SAAQ,SAAAo+C,GACdA,EAAKy3D,QAAU,QAEnB8M,EAAU/6G,OAAO,EAAG+6G,EAAUrjH,UCzGzB+jH,GAAU,SAASn2G,GAiE5B,QAhDSmuG,EAAT,SAAsB1uG,GAClB,IAAM22G,EAAY,CACd/jH,GAAIoN,EAAEpN,GACNulB,GAAI,MAGFy+F,EAAW,CAAC,aACdr2G,EAAEs2G,SACFD,EAAS19G,KAAK,oBAEK,iBAAZ8G,EAAE6uE,QACT+nC,EAAS19G,KAAK,wBACdw/F,GAAGkB,IAAI55F,EAAE6uE,MAAO,CACZ3xD,QAAS,QACTizF,cAAe,UAIvBwG,EAAUx+F,GAAKugF,GAAGvgF,GAAG,CACjBg4B,OAAQ2mE,EACR16F,QAASpc,EAAE6uE,MACXo2B,UAAW2R,EAAS9/F,KAAK,KACzBouF,QAAS,WACD6R,IAAeJ,EAAU/jH,KACzBmkH,EAAaJ,EAAU/jH,GACvBkoE,IACAv6D,EAAE4kG,SAAS4R,OAKnB/2G,EAAEw8F,QACFma,EAAUx+F,GAAGqkF,MAAQx8F,EAAEw8F,OAG3BqR,EAAU30G,KAAKy9G,IAGV77C,EAAT,WACI,IAAK,IAAIpoE,EAAI,EAAGA,EAAIm7G,EAAUl7G,OAAQD,IAC9Bm7G,EAAUn7G,GAAGE,KAAOmkH,EACpBre,GAAGqB,aAAa8T,EAAUn7G,GAAGylB,GAAI,sBAEjCugF,GAAG0B,gBAAgByT,EAAUn7G,GAAGylB,GAAI,uBAiBvC6+F,EAAT,WACI,IAAK,IAAItkH,EAAI,EAAGA,EAAIm7G,EAAUl7G,OAAQD,IAClC,GAAIm7G,EAAUn7G,GAAGE,KAAOmkH,EACpB,OAAOrkH,GA/Eb6vC,EAAMm2D,GAAGvgF,GAAG,IAEZ2+F,EAAYpe,GAAGvgF,GAAG,CACpBg4B,OAAQ5N,EACR0iE,UAAW,oBACXrL,IAAK,CACD18E,QAAS,UAIX2wF,EAGA,GACFkJ,GAAa,cAAex2G,EAAIA,EAAE02G,UAAY12G,EAAEstG,UAAU,GAAGj7G,IAkDxDuvF,EAAI,EAAGA,EAAI5hF,EAAEstG,UAAUl7G,OAAQwvF,IACpCusB,EAAanuG,EAAEstG,UAAU1rB,IAG7BrnB,IAEIv6D,EAAE22G,cACFroE,YAAW,WACPtuC,EAAE4kG,SAAS4R,KACZ,GAYPlhH,KAAKy4G,WAAa,WACd,OAAO/rE,GAEX1sC,KAAK04G,SAAW,WACZ,OAAOwI,GAEXlhH,KAAKD,KAAO,WACRmhH,EAAalJ,GAAWmJ,IAAa,GAAKnJ,EAAUl7G,QAAQC,GAC5DkoE,IACAv6D,EAAE4kG,SAAS4R,IAEflhH,KAAKyoC,SAAW,WACZy4E,EAAalJ,GAAWA,EAAUl7G,OAASqkH,IAAa,GAAKnJ,EAAUl7G,QAAQC,GAC/EkoE,IACAv6D,EAAE4kG,SAAS4R,IAEflhH,KAAKs1F,QAAU,WACX0iB,EAAUx6G,SAAQ,SAAAo+C,GACdinD,GAAG2M,UAAU5zD,EAAKt5B,OAEtB01F,EAAU5yG,OAAO,EAAG4yG,EAAUl7G,wDC3HtCwkH,GAAiBnyG,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,aCUzGiiH,GAAN,iCAAMA,oBAAAA,GAkELvhH,KAAKmpC,yBAlEAo4E,EAAa,EAad9jH,IAAA,sBAAR,WACSuC,KAAKsiB,KAGV02B,YAAW,cAAQ,KACE,SAAjBh5C,KAAKwhH,QACLxhH,KAAKsiB,GAAG8E,MAAMzc,KAAO,QAErB3K,KAAKsiB,GAAG8E,MAAMq6F,eAAe,YAI7BhkH,IAAA,aAAR,WACIuC,KAAKsiB,GAAKugF,GAAGvgF,GAAG,CACZ8sF,UAAW,qBACXC,QAASxM,GAAGgE,cAGZ7mG,KAAK0hH,SACL1hH,KAAKsiB,GAAG8E,MAAMwgE,MAAQ,QAG1B5nF,KAAK2hH,gBAEL3hH,KAAKi3G,QAAUpU,GAAGvgF,GAAG,CACjB8sF,UAAW,sBAIfpvG,KAAK4hH,QAAU,IAAIC,MACnB7hH,KAAK4hH,QAAQhyG,IAAM4hG,EAAA8P,IACnBze,GAAGkB,IAAI/jG,KAAK4hH,QAAS,CACjBE,cAAe,SACfl6B,MAAO,OACPC,OAAQ,OACRqtB,WAAY,MACZyB,aAAc,SAGlB32G,KAAK+hH,aAAevyG,SAASM,cAAc,OAC3C9P,KAAK+hH,aAAa36F,MAAMC,QAAU,eAElCrnB,KAAKi3G,QAAQ5mG,YAAYrQ,KAAK+hH,cAC9B/hH,KAAKi3G,QAAQ5mG,YAAYrQ,KAAK4hH,SAC9B5hH,KAAKsiB,GAAGjS,YAAYrQ,KAAKi3G,SACzBznG,SAASutE,KAAK1sE,YAAYrQ,KAAKsiB,IAC/BtiB,KAAKsiB,GAAG8E,MAAMC,QAAU,UAU5B5pB,IAAA,gBAAA,SAAQ49B,GACJr7B,KAAK0hH,SAAWrmF,EAEXr7B,KAAKsiB,KAINtiB,KAAK0hH,QACL1hH,KAAKsiB,GAAG8E,MAAMwgE,MAAQ,OACtB5nF,KAAKsiB,GAAG8E,MAAMzc,KAAO,KAErB3K,KAAKsiB,GAAG8E,MAAMq6F,eAAe,SAC7BzhH,KAAKsiB,GAAG8E,MAAMzc,KAAwB,SAAjB3K,KAAKwhH,QAAqB,QAAU,QAIjE/jH,IAAA,mBAAA,SAAW+U,GACPxS,KAAKwhH,QAAUhvG,EACfxS,KAAK2hH,mBAGTlkH,IAAA,YAAA,SAAIilG,EAAoEsf,cA4BpE,GA1BItf,GAAsB,iBAARA,EAEG,cAAbA,EAAI7iG,MACJG,KAAK4hH,QAAQx6F,MAAMC,QAAU,eAC7BrnB,KAAK4hH,QAAQx6F,MAAM6jF,UAAY,UAAYvI,EAAI0I,SAAW,OAEtD1I,EAAI0I,SAAW,IAAO,EACtBprG,KAAK4hH,QAAQx6F,MAAMgtF,UAAY,2CAE/Bp0G,KAAK4hH,QAAQx6F,MAAMgtF,UAAY,GAGnCp0G,KAAK+hH,aAAapT,UAAY53F,KAAK4gD,MAAkB,IAAZ+qC,EAAI38B,OAAe,KAI5D/lE,KAAK4hH,QAAQx6F,MAAMC,QAAU,OAKX,iBAARq7E,IACd1iG,KAAK4hH,QAAQx6F,MAAMC,QAAU,OAC7BrnB,KAAK+hH,aAAapT,UAAYjM,GAG9Bsf,EAAS,YACThiH,KAAKi3G,QAAQ7vF,MAAM66F,UAAY,GAC/BjpE,YACI,WAAM,OAAMkpE,EAADjL,QAAQ7vF,MAAM66F,UAAY,oCACrC,IAEAjiH,KAAKmiH,UACL/yB,aAAapvF,KAAKmiH,UAEtBniH,KAAKmiH,SAAWlrG,OAAO+hC,YACnB,WAAM,OAAMkpE,EAADjL,QAAQ7vF,MAAM66F,UAAY,KACrC,KAMJjiH,KAAK47F,SACLxM,aAAapvF,KAAK47F,SAElB57F,KAAKoiH,UACLhzB,aAAapvF,KAAKoiH,UAEtBpiH,KAAKsiB,GAAG8E,MAAMovF,cAAgBwL,EAAU,gBAAkB,YAC1DhiH,KAAKsiB,GAAG8E,MAAMoyF,QAAU,IACxBx5G,KAAK47F,QAAU3kF,OAAO+hC,YAAW,qBACxB12B,GAAG8E,MAAMoyF,QAAU,MACnBl3F,GAAG8E,MAAMovF,cAAgB,eACzB4L,SAAWnrG,OAAO+hC,YAAW,aACzB12B,GAAG8E,MAAMC,QAAU,SACnB+6F,SAAW,IACjB,OACExmB,QAAU,IAChB,MACH57F,KAAKsiB,GAAG8E,MAAMC,QAAU,WAxJnBk6F,EAAN,YCMSc,GAAShD,OAWjBiD,EACKC,EAAT,WACID,EAAO,CACH7mF,EAAG,EACHC,EAAG,EACHksD,MAAOy3B,EAAMz2B,OAAOhB,MACpBC,OAAQw3B,EAAMz2B,OAAOf,SAMpB26B,EAAT,WACIC,EAAc76B,MAAQ7wE,KAAK4gD,MAAM2qD,EAAK16B,OACtC66B,EAAc56B,OAAS9wE,KAAK4gD,MAAM2qD,EAAKz6B,QAC7B46B,EAAc55B,WAAW,MAC/BkiB,UAAUsU,EAAMz2B,OAAQ7xE,KAAK4gD,OAAO2qD,EAAK7mF,GAAI1kB,KAAK4gD,OAAO2qD,EAAK5mF,IAC9DgnF,IACAA,EAAa9yG,IAAM6yG,EAAc/lB,UAAU,cAG3C2iB,EAAM/P,UACN+P,EAAM/P,SAASmT,EAAc76B,MAAO66B,EAAc56B,SAGjD86B,EAAT,WACI9f,GAAGkB,IAAI6e,EAAe,CAClBj4G,KAAOk4G,EAASP,EAAK7mF,EAAIqnF,EAAU,KACnC15B,IAAM25B,EAAST,EAAK5mF,EAAIsnF,EAAU,KAClCp7B,MAAQ06B,EAAK16B,MAAQk7B,EAAU,KAC/Bj7B,OAASy6B,EAAKz6B,OAASm7B,EAAU,OAEjC3D,EAAM/P,UACN+P,EAAM/P,SAASv4F,KAAK4gD,MAAM2qD,EAAK16B,OAAQ7wE,KAAK4gD,MAAM2qD,EAAKz6B,UAuEtDo7B,EAAT,SAAyBv4G,GACrB,MAAO,CACH+wB,EAAGonE,GAAGv9B,OAAO56D,EAAE+wB,EAAIonF,GAAUC,EAAQ,EAAGzD,EAAMz2B,OAAOhB,OACrDlsD,EAAGmnE,GAAGv9B,OAAO56D,EAAEgxB,EAAIqnF,GAAUC,EAAQ,EAAG3D,EAAMz2B,OAAOf,UAIpDq7B,EAAT,SAAiBz4G,EAAI8iF,GACjB,IAAI41B,EAAW,CACX1nF,EAAG1kB,KAAK6K,IAAInX,EAAGgxB,EAAG8xD,EAAG9xD,GACrBC,EAAG3kB,KAAK6K,IAAInX,EAAGixB,EAAG6xD,EAAG7xD,IAErB0nF,EAAe,CACf3nF,EAAG1kB,KAAK2K,IAAIjX,EAAGgxB,EAAG8xD,EAAG9xD,GACrBC,EAAG3kB,KAAK2K,IAAIjX,EAAGixB,EAAG6xD,EAAG7xD,IAErB2nF,EAAeJ,EAAgBE,GAC/BG,EAAmBL,EAAgBG,GAKvC,OAJAC,EAAa5nF,EAAI1kB,KAAKuK,MAAM+hG,EAAa5nF,GACzC4nF,EAAa3nF,EAAI3kB,KAAKuK,MAAM+hG,EAAa3nF,GACzC4nF,EAAiB7nF,EAAI1kB,KAAKqK,KAAKkiG,EAAiB7nF,GAChD6nF,EAAiB5nF,EAAI3kB,KAAKqK,KAAKkiG,EAAiB5nF,GACzC,CACHD,EAAG4nF,EAAa5nF,EAChBC,EAAG2nF,EAAa3nF,EAChBksD,MAAO07B,EAAiB7nF,EAAI4nF,EAAa5nF,EACzCosD,OAAQy7B,EAAiB5nF,EAAI2nF,EAAa3nF,IAIzC6nF,EAAT,WACI,OAAkB,IAAXjB,EAAK7mF,GAAsB,IAAX6mF,EAAK5mF,GAAW4mF,EAAK16B,QAAUy3B,EAAMz2B,OAAOhB,OAAS06B,EAAKz6B,SAAWw3B,EAAMz2B,OAAOf,QAjJvGn7C,EAAMl9B,SAASM,cAAc,OACnC+yF,GAAGkB,IAAIr3D,EAAK,CACR4b,SAAU,WACVu/B,OAAQw3B,EAAMx3B,OAAS,KACvBD,MAAOy3B,EAAMz3B,MAAQ,KACrB6rB,SAAU,SACVqE,YAAa,eAEjBprE,EAAItlB,MAAMkhC,SAAW,WAWrBi6D,IAsCA,IAAME,EAAgB5f,GAAGja,SACrB46B,EAAcf,EACdC,EAAe,KACdrD,EAAMoE,YACPf,EAAe,IAAIb,MACnB2B,EAAcd,GAElB7f,GAAGkB,IAAIyf,EAAa,CAChB37B,OAAQw3B,EAAMx3B,OAAS,KACvBD,MAAOy3B,EAAMz3B,MAAQ,OAEzBl7C,EAAIr8B,YAAYmzG,GAChBhB,IAEA,IACMkB,EAAiB7gB,GAAGvgF,GAAG,CACzByhF,IAAK,CACDnc,MAAOy3B,EAAMz3B,MAAQ,KACrBC,OAAQw3B,EAAMx3B,OAAS,KACvBv/B,SAAU,WACV39C,KAAM,IACNy+E,IAAK,IACLkxB,cAAe,UAGvB5tE,EAAIr8B,YAAYqzG,GAChB7gB,GAAGuJ,qBAAqB,GAAG,SAAShxE,GAChCsoF,EAAet8F,MAAMixF,gBAAkB,OAAOj9E,EAAE,OAGpD,IAAMuoF,EAAY9gB,GAAG4B,QAAQ4a,EAAMz2B,OAAOhB,MAAOy3B,EAAMz2B,OAAOf,OAAQw3B,EAAMz3B,MAAQiwB,GAAawH,EAAMx3B,OAASgwB,GAAa,GACvH+L,EAAc/gB,GAAGja,OAAO7xE,KAAK4gD,MAAMgsD,EAAU/7B,OAAQ7wE,KAAK4gD,MAAMgsD,EAAU97B,SAChF+7B,EAAYx8F,MAAMy8F,eAAiB,YACnC,IAAMf,EAASc,EAAYh8B,MAAQy3B,EAAMz2B,OAAOhB,MAC1Co7B,EAASY,EAAY/7B,OAASw3B,EAAMz2B,OAAOf,OAC3Ci8B,EAAWF,EAAY/6B,WAAW,MACxCi7B,EAASnY,uBAAwB,EACjCmY,EAAS/Y,UAAUsU,EAAMz2B,OAAQ,EAAG,EAAGg7B,EAAYh8B,MAAOg8B,EAAY/7B,QACtE67B,EAAerzG,YAAYuzG,GAC3B,IAAMf,EAAS5yE,SAAS,IAAOovE,EAAMz3B,MAAQg8B,EAAYh8B,OAAS,GAC5Dm7B,EAAS9yE,SAAS,IAAOovE,EAAMx3B,OAAS+7B,EAAY/7B,QAAU,GACpEgb,GAAGkB,IAAI6f,EAAa,CAChBt7D,SAAU,WACV39C,KAAMk4G,EAAS,KACfz5B,IAAK25B,EAAS,OAGlB,IA4CIgB,EA5CEnB,EAAgB/f,GAAGvgF,GAAG,CACxByhF,IAAK,CACDz7C,SAAU,WACV8rD,UAAW,uDAGnBsP,EAAerzG,YAAYuyG,GAC3BD,IAsCA,IAGIqB,EAHAC,EAAY,KACZxE,GAAa,EACbyE,GAAU,EAERnI,EAAkB,IAAIlZ,GAAGiN,gBAAgB,CAC3C5yG,OAAQsmH,EACRxuB,aAAa,EACbT,UAAW,SAASp8C,GAChB,IA/GuBztC,EACvBy5G,EAAAA,EAAAA,EAAAA,EA+GmB,gBAAfhsE,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,QACtCx4C,EAAM04C,sBACN4uB,GAAa,EACbsE,EAAS,CACLtoF,EAAG0c,EAAM85C,KACTv2D,EAAGyc,EAAM+5C,OAERqxB,MAvHc74G,EAuHqBq5G,EAtH5CI,EACGptG,KAAK4gD,MAAMkrD,EAASP,EAAK7mF,EAAIqnF,GADhCqB,EAEGptG,KAAK4gD,MAAMorD,EAAST,EAAK5mF,EAAIsnF,GAFhCmB,EAGOptG,KAAK4gD,MAAM2qD,EAAK16B,MAAQk7B,GAH/BqB,EAIQptG,KAAK4gD,MAAM2qD,EAAKz6B,OAASm7B,GAE9BmB,GAAUz5G,EAAE+wB,GAAK/wB,EAAE+wB,GAAK0oF,EAASA,GACpCA,GAAUz5G,EAAEgxB,GAAKhxB,EAAEgxB,GAAKyoF,EAASA,GAgHzBF,EAAY,CACRxoF,EAAG6mF,EAAK7mF,EACRC,EAAG4mF,EAAK5mF,EACRksD,MAAO06B,EAAK16B,MACZC,OAAQy6B,EAAKz6B,QAGjBy6B,EAAOY,EAAQa,EAAQA,IAEL,gBAAf5rE,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,QAC7Cx4C,EAAM04C,sBACNqzB,GAAU,EACND,GACA3B,EAAK7mF,EAAIwoF,EAAUxoF,EAAI1kB,KAAK4gD,OAAOxf,EAAM85C,KAAO8xB,EAAOtoF,GAAKqnF,GAC5DR,EAAK5mF,EAAIuoF,EAAUvoF,EAAI3kB,KAAK4gD,OAAOxf,EAAM+5C,KAAO6xB,EAAOroF,GAAKsnF,GAC5DV,EAAK7mF,EAAIonE,GAAGv9B,MAAMg9C,EAAK7mF,EAAG,EAAG4jF,EAAMz2B,OAAOhB,MAAQ06B,EAAK16B,OACvD06B,EAAK5mF,EAAImnE,GAAGv9B,MAAMg9C,EAAK5mF,EAAG,EAAG2jF,EAAMz2B,OAAOf,OAASy6B,EAAKz6B,SAExDy6B,EAAOY,EAAQa,EAAQ,CAACtoF,EAAG0c,EAAM85C,KAAMv2D,EAAGyc,EAAM+5C,OAEpDywB,KACsB,cAAfxqE,EAAMt4C,MAAwBkkH,IACrC5rE,EAAM04C,sBACN4uB,GAAa,EACbwE,EAAY,KACZF,EAAS,KACU,IAAfzB,EAAK16B,OAA+B,IAAhB06B,EAAKz6B,QAAiBq8B,IAC1C3B,IACAI,KAEJuB,GAAU,EACVF,EAAoBhrE,WAAWwpE,EAAqB,OAK1Dh2B,EAAc,IAAIqW,GAAGgN,YAAY,CACnCjjB,OAAQ,SAAS9C,EAAQjnF,EAAG6xG,GACxB,IAAI+K,EAAJ,CAGA,IAAI2E,GAAW,EAEX1Z,EAAW3zF,KAAK2K,IAAI,EAAG,EAAIohG,GAC3B7nB,EAAiBzO,EAAYqoB,UAAU,SAE5B,SAAX/qB,IACImR,EACAqnB,EAAK16B,MAAQib,GAAGv9B,MAAMg9C,EAAK16B,MAAQ8iB,EAAU,EAAG2U,EAAMz2B,OAAOhB,MAAQ06B,EAAK7mF,GAE1E6mF,EAAK7mF,EAAIonE,GAAGv9B,MAAMg9C,EAAK7mF,EAAIivE,EAAU,EAAG2U,EAAMz2B,OAAOhB,MAAQ06B,EAAK16B,OAEtEw8B,GAAW,GAEA,UAAXt6B,IACImR,EACAqnB,EAAK16B,MAAQib,GAAGv9B,MAAMg9C,EAAK16B,MAAQ8iB,EAAU,EAAG2U,EAAMz2B,OAAOhB,MAAQ06B,EAAK7mF,GAE1E6mF,EAAK7mF,EAAIonE,GAAGv9B,MAAMg9C,EAAK7mF,EAAIivE,EAAU,EAAG2U,EAAMz2B,OAAOhB,MAAQ06B,EAAK16B,OAEtEw8B,GAAW,GAEA,OAAXt6B,IACImR,EACAqnB,EAAKz6B,OAASgb,GAAGv9B,MAAMg9C,EAAKz6B,OAAS6iB,EAAU,EAAG2U,EAAMz2B,OAAOf,OAASy6B,EAAK5mF,GAE7E4mF,EAAK5mF,EAAImnE,GAAGv9B,MAAMg9C,EAAK5mF,EAAIgvE,EAAU,EAAG2U,EAAMz2B,OAAOf,OAASy6B,EAAKz6B,QAEvEu8B,GAAW,GAEA,SAAXt6B,IACImR,EACAqnB,EAAKz6B,OAASgb,GAAGv9B,MAAMg9C,EAAKz6B,OAAS6iB,EAAU,EAAG2U,EAAMz2B,OAAOf,OAASy6B,EAAK5mF,GAE7E4mF,EAAK5mF,EAAImnE,GAAGv9B,MAAMg9C,EAAK5mF,EAAIgvE,EAAU,EAAG2U,EAAMz2B,OAAOf,OAASy6B,EAAKz6B,QAEvEu8B,GAAW,GAGXA,IACAvhH,EAAE0oF,iBACFo3B,IACAvzB,aAAa40B,GACbA,EAAoBhrE,WAAWwpE,EAAqB,UAKhExiH,KAAKggH,MAAQ,WACT,OAAOtzE,GAEX1sC,KAAKgU,MAAQ,WACTuuG,IACAC,IACAG,KAEJ3iH,KAAKs1F,QAAU,WACXkuB,EAAYp8F,MAAMq6F,eAAe,SACjC+B,EAAYp8F,MAAMq6F,eAAe,UACjCj1B,EAAY8I,UACZymB,EAAgBzmB,WAEpBt1F,KAAKujH,QAAU,WACX,OAAOA,KAEXvjH,KAAKqkH,QAAU,WACX,OAAOvzG,KAAKC,MAAMD,KAAK4c,UAAU40F,KAErCtiH,KAAKskH,gBAAkB,WACnB,OAAO7B,oDCpSf8B,GAAiBp1G,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHklH,GAAiBr1G,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHmlH,GAAiBt1G,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHolH,GAAiBv1G,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHqlH,GAAiBx1G,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,wBC4BlHslH,GAAIC,+BAZL,SACMC,GAAS9gG,EAAM4jE,EAAOjhB,EAAIE,EAAID,EAAIE,GACvC,IAAK,IAAIrrC,EAAIkrC,EAAIlrC,GAAKmrC,EAAInrC,IACtB,IAAK,IAAIC,EAAImrC,EAAInrC,GAAKorC,EAAIprC,IACM,MAAxB1X,EAAK0X,EAAIksD,EAAQnsD,KAGrBzX,EAAK0X,EAAIksD,EAAQnsD,GAAK,KAiB/B,SACMspF,GAAUn9B,EAAOC,EAAQhrF,EAAGs1F,EAAIC,GAIrC,OAHAwyB,GAAK/nH,EAAI+qF,EAAQuK,EACjB0yB,GAAK9tG,KAAKuK,MAAMzkB,EAAI+qF,GAASwK,EAEzBwyB,GAAK,GAAKC,GAAK,GAAKD,IAAMh9B,GAASi9B,IAAMh9B,EAClC,KAGJg9B,GAAKj9B,EAAQg9B,GAerB,SACMI,GAAYC,EAAQC,EAAWt9B,EAAOC,EAAQs9B,EAAUC,EAAWvoH,GACxE,OAAU,OAANA,GAA+B,MAAjBqoH,EAAUroH,MAKxBooH,EAAW,EAAJpoH,KAAWsoH,EAAS,IAC3BF,EAAW,EAAJpoH,EAAQ,KAAOsoH,EAAS,IAC/BF,EAAW,EAAJpoH,EAAQ,KAAOsoH,EAAS,IAC/BF,EAAW,EAAJpoH,EAAQ,KAAOsoH,EAAS,IAO/BC,EAAY,GACZruG,KAAKsmB,IAAI4nF,EAAW,EAAJpoH,GAASsoH,EAAS,KAAOC,GACzCruG,KAAKsmB,IAAI4nF,EAAW,EAAJpoH,EAAQ,GAAKsoH,EAAS,KAAOC,GAC7CruG,KAAKsmB,IAAI4nF,EAAW,EAAJpoH,EAAQ,GAAKsoH,EAAS,KAAOC,GAC7CruG,KAAKsmB,IAAI4nF,EAAW,EAAJpoH,EAAQ,GAAKsoH,EAAS,KAAOC,KAT7CF,EAAUroH,GAAK,KACR,aAyKCwoH,GAAcC,EAAS19B,EAAOC,EAAQpsD,EAAGC,EAAG0pF,EAAWG,EAAMC,GACzE/pF,EAAI1kB,KAAK4gD,MAAMl8B,GACfC,EAAI3kB,KAAK4gD,MAAMj8B,GAEf,IAAIkvE,EAAY,IAAI31C,WAAW,IAAIv4B,YAAYkrD,EAAQC,IAIvD,OApJD,SACgBo9B,EAAQC,EAAWt9B,EAAOC,EAAQ49B,EAAIC,EAAIN,EAAWG,EAAMC,GAE1E,IAAIL,EAAW,CACXF,EAA2B,GAAnBS,EAAK99B,EAAQ69B,IACrBR,EAA2B,GAAnBS,EAAK99B,EAAQ69B,GAAU,GAC/BR,EAA2B,GAAnBS,EAAK99B,EAAQ69B,GAAU,GAC/BR,EAA2B,GAAnBS,EAAK99B,EAAQ69B,GAAU,IAGnC,GAAID,EAAc,CACd,IAII3oH,EAAGgG,EAJHwuD,EAAI,OACRA,EAAEhuD,KAAKqiH,EAAK99B,EAAQ69B,GACpBP,EAAUQ,EAAK99B,EAAQ69B,GAAM,IAGtBp0D,EAAEv0D,QAKLkoH,GAAYC,EAAQC,EAAWt9B,EAAOC,EAAQs9B,EAAUC,EADxDviH,EAAIkiH,GAAUn9B,EAAOC,EAHrBhrF,EAAIw0D,EAAE97C,OAG0B,EAAI,KACqC87C,EAAEhuD,KAAKR,GAGhFmiH,GAAYC,EAAQC,EAAWt9B,EAAOC,EAAQs9B,EAAUC,EADxDviH,EAAIkiH,GAAUn9B,EAAOC,EAAQhrF,EAAG,EAAG,KACsCw0D,EAAEhuD,KAAKR,GAGhFmiH,GAAYC,EAAQC,EAAWt9B,EAAOC,EAAQs9B,EAAUC,EADxDviH,EAAIkiH,GAAUn9B,EAAOC,EAAQhrF,EAAG,GAAG,KACsCw0D,EAAEhuD,KAAKR,GAGhFmiH,GAAYC,EAAQC,EAAWt9B,EAAOC,EAAQs9B,EAAUC,EADxDviH,EAAIkiH,GAAUn9B,EAAOC,EAAQhrF,EAAG,EAAG,KACsCw0D,EAAEhuD,KAAKR,QAGpF,IAAK,IAAIypF,EAAI,EAAGA,EAAI1E,EAAQC,EAAQyE,IAChC04B,GAAYC,EAAQC,EAAWt9B,EAAOC,EAAQs9B,EAAUC,EAAW94B,GAM3E,GAAa,IAATi5B,EAAJ,CAUA,IAFA,IAAI5+C,OAAA,EAAIC,OAAA,EAAIC,OAAA,EAAIC,OAAA,EACZwpC,OAAA,EAAGqV,OAAA,EAAIl6E,OAAA,EAAGm6E,OAAA,EAAIzhH,OAAA,EAAG0hH,OAAA,EAAIxqF,OAAA,EAAGyqF,OAAA,EACnBrqF,EAAI,EAAGA,EAAImsD,EAAOnsD,IACvB,IAAK,IAAIC,EAAI,EAAGA,EAAImsD,EAAQnsD,IACS,MAA7BwpF,EAAUxpF,EAAIksD,EAAQnsD,KAK1BkrC,EAAKlrC,EACLmrC,EAAKnrC,EACLorC,EAAKnrC,EACLorC,EAAKprC,EAEL40E,EAAuC,MAAnC4U,EAAWxpF,EAAKksD,EAAQnsD,EAAI,GAChCkqF,EAA4C,MAAvCT,GAAWxpF,EAAI,GAAKksD,EAAQnsD,EAAI,GACrCgQ,EAAuC,MAAnCy5E,GAAWxpF,EAAI,GAAKksD,EAAQnsD,GAChCmqF,EAA4C,MAAvCV,GAAWxpF,EAAI,GAAKksD,EAAQnsD,EAAI,GACrCt3B,EAAuC,MAAnC+gH,EAAWxpF,EAAKksD,EAAQnsD,EAAI,GAChCoqF,EAA4C,MAAvCX,GAAWxpF,EAAI,GAAKksD,EAAQnsD,EAAI,GACrCJ,EAAuC,MAAnC6pF,GAAWxpF,EAAI,GAAKksD,EAAQnsD,GAChCqqF,EAA4C,MAAvCZ,GAAWxpF,EAAI,GAAKksD,EAAQnsD,EAAI,GAEjC60E,IACA3pC,EAAKlrC,EAAI8pF,GAETjV,GAAKqV,GAAMl6E,IACXk7B,EAAKlrC,EAAI8pF,EACT1+C,EAAKnrC,EAAI6pF,GAET95E,IACAo7B,EAAK9vD,KAAK6K,IAAIilD,EAAInrC,EAAI6pF,IAEtB95E,GAAKm6E,GAAMzhH,IACX0iE,EAAK9vD,KAAK6K,IAAIilD,EAAInrC,EAAI6pF,GACtB3+C,EAAKnrC,EAAI8pF,GAETphH,IACAyiE,EAAK7vD,KAAK2K,IAAIklD,EAAInrC,EAAI,EAAI8pF,IAE1BphH,GAAK0hH,GAAMxqF,IACXurC,EAAK7vD,KAAK2K,IAAIklD,EAAInrC,EAAI,EAAI8pF,GAC1Bz+C,EAAK/vD,KAAK2K,IAAIolD,EAAIprC,EAAI,EAAI6pF,IAE1BlqF,IACAyrC,EAAK/vD,KAAK2K,IAAIolD,EAAIprC,EAAI,EAAI6pF,IAE1BlqF,GAAKyqF,GAAMxV,IACX3pC,EAAK5vD,KAAK6K,IAAI+kD,EAAIlrC,EAAI,EAAI8pF,GAC1Bz+C,EAAK/vD,KAAK2K,IAAIolD,EAAIprC,EAAI,EAAI6pF,KAGzBjV,GAAMqV,GAAOl6E,GAAMm6E,GAAOzhH,GAAM0hH,GAAOxqF,GAAMyqF,IAIlDhB,GACII,EACAt9B,EACA7wE,KAAK2K,IAAI,EAAGilD,GACZ5vD,KAAK2K,IAAI,EAAGmlD,GACZ9vD,KAAK6K,IAAIgmE,EAAQ,EAAGhhB,GACpB7vD,KAAK6K,IAAIimE,EAAS,EAAG/gB,KAIjC,IAAK,IAAIwkB,EAAI,EAAGA,EAAI1D,EAAQC,EAAQyD,IACX,MAAjB45B,EAAU55B,KACV45B,EAAU55B,GAAK,MA8BvBy6B,CAAUT,EAAS1a,EAAWhjB,EAAOC,EAAQpsD,EAAGC,EAAG0pF,EAAWG,EAAMC,GAE7D,CACHxhG,KAAM4mF,YC1NEob,GACZ3pB,EACA4pB,GAGA,IAAI,CAAC,OAAQ,UAAW,QAAQxjG,SAASwjG,EAASpmH,MAsS9C,MAAM,IAAI5C,MAAM,iBArShB,IAAMipH,EAAYnvG,KAAK4gD,MAAMsuD,EAASC,WAChC9a,EAA+B,IAApB6a,EAASjsB,SAAiBjjF,KAAK2uD,GAGhD22B,EAAIqP,OACAua,EAASzM,UACTnd,EAAI8pB,YAAcF,EAASzM,SAE3ByM,EAASG,WACT/pB,EAAImR,yBAA2B,mBAEnCnR,EAAIwL,QAAQoe,EAASjsB,UACjBisB,EAASI,QACThqB,EAAIC,UAAYuG,GAAG0L,eAAe9M,SAASwkB,EAASI,SAC7CJ,EAASK,YAChBjqB,EAAIkqB,YAAc1jB,GAAG0L,eAAe9M,SAASwkB,EAASK,WACtDjqB,EAAI6pB,UAAYA,GAGpB,IAAIt/C,EAAKq/C,EAASr/C,GACdE,EAAKm/C,EAASn/C,GACdtzB,EAAKyyE,EAASzyE,GACdurD,EAAKknB,EAASlnB,GAGlB,GAAIknB,EAASO,YAAa,CACtB,IAAIC,EAAK5jB,GAAGgF,OAAOjhC,EAAIE,EAAIm/C,EAASjsB,SAAWjjF,KAAK2uD,GAAK,KACrDghD,EAAK7jB,GAAGgF,OAAOr0D,EAAIurD,EAAIknB,EAASjsB,SAAWjjF,KAAK2uD,GAAK,KAErDihD,EAAY9jB,GAAG+E,iBAAiB6e,EAAIC,GAAM,GAC1CE,EAAgD,GAA7B7vG,KAAK4gD,MAAMgvD,EAAY,IAC1CE,EAAUhkB,GAAGiF,aAAa,CAACrsE,EAAGmrC,EAAIlrC,EAAGorC,GAAK,CAACrrC,EAAG+X,EAAI9X,EAAGqjE,GAAK6nB,EAAmBD,GACjFnzE,EAAKqzE,EAAQprF,EACbsjE,EAAK8nB,EAAQnrF,GAGR0vE,EAAWwb,GAAoB,IAAO,IACnC7vG,KAAK4gD,OAAOyzC,EAAWwb,GAAoB,IAAM,GAAM,EACvDpzE,EAAKozB,EAELm4B,EAAKj4B,GAKjB,IAkDIr8D,EACA8iF,EAnDA9xD,EAAImrC,EACJlrC,EAAIorC,EACJqrB,EAAK3+C,EAAKozB,EACVwrB,EAAK2M,EAAKj4B,EAGd,GAAsB,SAAlBm/C,EAASpmH,MAAmBomH,EAASa,aAAc,CACnD,IAAIC,EAAKlkB,GAAGgF,OAAOoe,EAASr/C,GAAIq/C,EAASn/C,GAAIm/C,EAASjsB,SAAWjjF,KAAK2uD,GAAK,KACvEshD,EAAKnkB,GAAGgF,OAAOoe,EAASzyE,GAAIyyE,EAASlnB,GAAIknB,EAASjsB,SAAWjjF,KAAK2uD,GAAK,KAEvE7Z,EAAKk7D,EAAGtrF,EACRwrF,EAAKF,EAAGrrF,EACRwrF,EAAMF,EAAGvrF,EAAIsrF,EAAGtrF,EAChB0rF,EAAMH,EAAGtrF,EAAIqrF,EAAGrrF,EAEhB3kB,KAAKsmB,IAAI6pF,GAAOnwG,KAAKsmB,IAAI8pF,GACzBA,EAAMpwG,KAAKsmB,IAAI6pF,IAAQC,EAAM,GAAI,EAAK,GAEtCD,EAAMnwG,KAAKsmB,IAAI8pF,IAAQD,EAAM,GAAI,EAAK,GAE1CF,EAAGvrF,EAAIowB,EAAKq7D,EACZF,EAAGtrF,EAAIurF,EAAKE,EAEZJ,EAAKlkB,GAAGgF,OAAOkf,EAAGtrF,EAAGsrF,EAAGrrF,GAAIuqF,EAASjsB,SAAWjjF,KAAK2uD,GAAK,KAC1DshD,EAAKnkB,GAAGgF,OAAOmf,EAAGvrF,EAAGurF,EAAGtrF,GAAIuqF,EAASjsB,SAAWjjF,KAAK2uD,GAAK,KAO1DjqC,EALAmrC,EAAKmgD,EAAGtrF,EAMRC,EALAorC,EAAKigD,EAAGrrF,EAMRy2D,GALA3+C,EAAKwzE,EAAGvrF,GAKEmrC,EACVwrB,GALA2M,EAAKioB,EAAGtrF,GAKEorC,EAkBd,GAdIm/C,EAASmB,aAMTxgD,EALAnrC,GAAK02D,EAMLrrB,EALAprC,GAAK02D,EAML5+C,EAAK/X,GALL02D,GAAM,GAMN4M,EAAKrjE,GALL02D,GAAM,IAUY,SAAlB6zB,EAASpmH,KAAiB,CAG1B,IAAMwnH,EAAMtwG,KAAK4gD,MAAMiP,GACjB0gD,EAAMvwG,KAAK4gD,MAAMmP,GACjBygD,EAAMxwG,KAAK4gD,MAAMnkB,GACjBg0E,EAAMzwG,KAAK4gD,MAAMonC,GAGjB0oB,EAAM1wG,KAAKuK,MAAMslD,GACjB8gD,EAAM3wG,KAAKuK,MAAMwlD,GACjB6gD,EAAM5wG,KAAKuK,MAAMkyB,GACjBo0E,EAAM7wG,KAAKuK,MAAMy9E,GAEnBmnB,EAAY,GAAM,EAEdoB,IAAQE,GACR/8G,EAAK,CACDgxB,EAAGgsF,EACH/rF,EAAG4rF,GAEP/5B,EAAK,CACD9xD,EAAGksF,EACHjsF,EAAG8rF,GAGHC,EAAME,EACNp6B,EAAG9xD,GAAK,EAERhxB,EAAGgxB,GAAK,GAEL4rF,IAAQE,GACf98G,EAAK,CACDgxB,EAAG4rF,EACH3rF,EAAGgsF,GAEPn6B,EAAK,CACD9xD,EAAG8rF,EACH7rF,EAAGksF,GAGHF,EAAME,EACNr6B,EAAG7xD,GAAK,EAERjxB,EAAGixB,GAAK,IAGZjxB,EAAK,CACDgxB,EAAGmrC,EACHlrC,EAAGorC,GAEPymB,EAAK,CACD9xD,EAAG+X,EACH9X,EAAGqjE,KAKXt0F,EAAK,CACDgxB,EAAGgsF,EACH/rF,EAAGgsF,GAEPn6B,EAAK,CACD9xD,EAAGksF,EACHjsF,EAAGksF,GAEHF,IAAQE,GACJH,EAAME,EACNp6B,EAAG9xD,GAAK,EAERhxB,EAAGgxB,GAAK,EAEZhxB,EAAGixB,GAAK,GACR6xD,EAAG7xD,GAAK,IACD+rF,IAAQE,GACXD,EAAME,EACNr6B,EAAG7xD,GAAK,EAERjxB,EAAGixB,GAAK,EAEZjxB,EAAGgxB,GAAK,GACR8xD,EAAG9xD,GAAK,KAERhxB,EAAGgxB,EAAImrC,EACPn8D,EAAGixB,EAAIorC,EACPymB,EAAG9xD,EAAI+X,EACP+5C,EAAG7xD,EAAIqjE,IAIft0F,EAAKo4F,GAAGgF,OAAOp9F,EAAGgxB,EAAGhxB,EAAGixB,EAAGuqF,EAASjsB,SAAWjjF,KAAK2uD,GAAK,KACzD6nB,EAAKsV,GAAGgF,OAAOta,EAAG9xD,EAAG8xD,EAAG7xD,EAAGuqF,EAASjsB,SAAWjjF,KAAK2uD,GAAK,KAEzD22B,EAAIwrB,YACJxrB,EAAIyrB,OAAOr9G,EAAGgxB,EAAGhxB,EAAGixB,GACpB2gE,EAAI0rB,OAAOx6B,EAAG9xD,EAAG8xD,EAAG7xD,GACpB2gE,EAAI2rB,cAED,GAAsB,SAAlB/B,EAASpmH,KAAiB,CAGjC,IAAMooH,EAAMlxG,KAAKuK,MAAMslD,GACjBshD,EAAMnxG,KAAKuK,MAAMwlD,GACjBqhD,EAAMpxG,KAAKuK,MAAMkyB,GACjB40E,EAAMrxG,KAAKuK,MAAMy9E,GAEnBqM,EAAW,IAAO,EACd6a,EAASI,SACLz/C,EAAK,GAAM,IACXA,GAAM,GAENE,EAAK,GAAM,IACXA,GAAM,GAENtzB,EAAK,GAAM,IACXA,GAAM,GAENurD,EAAK,GAAM,IACXA,GAAM,GAGVt0F,EAAK,CACDgxB,EAAGmrC,EAAKpzB,EAAKy0E,EAAME,EACnBzsF,EAAGorC,EAAKi4B,EAAKmpB,EAAME,IAEvB76B,EAAK,CACD9xD,EAAG1kB,KAAKqK,MAAMwlD,EAAKpzB,EAAKA,EAAKozB,GAAMn8D,EAAGgxB,GACtCC,EAAG3kB,KAAKqK,MAAM0lD,EAAKi4B,EAAKA,EAAKj4B,GAAMr8D,EAAGixB,KAEvCD,EAAIhxB,EAAGgxB,EAAI8xD,EAAG9xD,EACjB8xD,EAAG7xD,EAAIjxB,EAAGixB,EAAI6xD,EAAG7xD,GAGbwqF,EAAY,GAAM,GAClBz7G,EAAK,CACDgxB,EAAGwsF,EACHvsF,EAAGwsF,GAEP36B,EAAK,CACD9xD,EAAG0sF,EACHzsF,EAAG0sF,KAGP39G,EAAK,CACDgxB,EAAGwsF,EAAM,GACTvsF,EAAGwsF,EAAM,IAEb36B,EAAK,CACD9xD,EAAG0sF,EAAM,GACTzsF,EAAG0sF,EAAM,MAKrB39G,EAAK,CACDgxB,EAAGmrC,EACHlrC,EAAGorC,GAEPymB,EAAK,CACD9xD,EAAG+X,EACH9X,EAAGqjE,IAIXt0F,EAAKo4F,GAAGgF,OAAOp9F,EAAGgxB,EAAGhxB,EAAGixB,EAAGuqF,EAASjsB,SAAWjjF,KAAK2uD,GAAK,MACzD6nB,EAAKsV,GAAGgF,OAAOta,EAAG9xD,EAAG8xD,EAAG7xD,EAAGuqF,EAASjsB,SAAWjjF,KAAK2uD,GAAK,MACtDjqC,EAAI8xD,EAAG9xD,EAAIhxB,EAAGgxB,EACjB8xD,EAAG7xD,EAAI6xD,EAAG7xD,EAAIjxB,EAAGixB,EAEbuqF,EAASI,QACThqB,EAAIE,SAAS9xF,EAAGgxB,EAAGhxB,EAAGixB,EAAG6xD,EAAG9xD,EAAG8xD,EAAG7xD,GAElC2gE,EAAIgsB,WAAW59G,EAAGgxB,EAAGhxB,EAAGixB,EAAG6xD,EAAG9xD,EAAG8xD,EAAG7xD,QAIxCjxB,EAAKo4F,GAAGgF,OAAOjhC,EAAIE,EAAIm/C,EAASjsB,SAAWjjF,KAAK2uD,GAAK,KACrD6nB,EAAKsV,GAAGgF,OAAOr0D,EAAIurD,EAAIknB,EAASjsB,SAAWjjF,KAAK2uD,GAAK,KACrDjqC,EAAIhxB,EAAGgxB,EACPC,EAAIjxB,EAAGixB,EACPy2D,EAAK5E,EAAG9xD,EAAIhxB,EAAGgxB,EACf22D,EAAK7E,EAAG7xD,EAAIjxB,EAAGixB,EAEf2gE,EAAIwrB,YACJxrB,EAAIisB,QAAQ7sF,EAAI02D,EAAK,EAAGz2D,EAAI02D,EAAK,EAAGr7E,KAAKsmB,IAAI80D,EAAK,GAAIp7E,KAAKsmB,IAAI+0D,EAAK,GAAI,EAAG,EAAa,EAAVr7E,KAAK2uD,IAC/EugD,EAASI,QACThqB,EAAIhsE,OAEJgsE,EAAI2rB,SAKZ3rB,EAAIyP,mBCnTIyc,GAAW3/B,EAA2Bl+E,GAwClD,IArCA,IAAI89G,EAAwB,KAAd99G,EAAE89G,QAAiB,IAAM99G,EAAE89G,QAKrCC,EAAQ5lB,GAAGvgF,GAAG,CACdyhF,IAAK,CACDz7C,SAAU,QACV39C,KAAM,IACNy+E,IAAK,IACLxB,MAAO,WACPgwB,SAAUltG,EAAE69B,KAAO,KACnB2rE,WAAYxpG,EAAEwpG,WAAaxpG,EAAEwpG,WAAa,KAAO,aAGrDxnE,EAAMm2D,GAAGvgF,GAAG,CACZg4B,OAAQmuE,EACR1kB,IAAK,CACD18E,QAAS,eACTu5F,UAAWl2G,EAAEg+G,MAAQh+G,EAAEg+G,MAAQ,OAC/BC,WAAYj+G,EAAEk+G,KAAOl+G,EAAEk+G,KAAO,aAC9BhR,SAAUltG,EAAE69B,KAAO,KACnBsgF,WAAYn+G,EAAEo+G,OAAS,OAAS,SAChCC,UAAWr+G,EAAEs+G,SAAW,SAAW,SACnC9U,WAAYxpG,EAAEwpG,WAAaxpG,EAAEwpG,WAAa,KAAO,UAGjDsF,QAAS,IACTc,cAAe,UAGnB2O,EAAU,GAMLpsH,EAAI,EAAGA,EAAI2rH,EAAQ1rH,OAAQD,IACb,OAAf2rH,EAAQ3rH,GAcZosH,GAAWT,EAAQ3rH,GAAG+R,QAAQ,KAAM,SAbhC89B,EAAIr8B,YAAYwyF,GAAGvgF,GAAG,CAClBykF,QAAS,OACToI,YAAa8Z,EACbllB,IAAK,CACDmlB,WAAY,UAGpBD,EAAU,GACVv8E,EAAIr8B,YAAYwyF,GAAGvgF,GAAG,CAClBykF,QAAS,SAMrBr6D,EAAIr8B,YAAYwyF,GAAGvgF,GAAG,CAClBykF,QAAS,OACToI,YAAa8Z,EACbllB,IAAK,CACDmlB,WAAY,UAGpB15G,SAASutE,KAAK1sE,YAAYo4G,GAU1B,IANA,IAAI32B,EAAS,CACTnrB,GAAI,SACJE,GAAI,SACJD,GAAI,EACJE,GAAI,GAECwlB,EAAI,EAAGA,EAAI5/C,EAAIjhC,SAAS3O,OAAQwvF,IAAK,CAC1C,IAAIhqE,EAAKoqB,EAAIjhC,SAAS6gF,GACtBwF,EAAOnrB,GAAK5vD,KAAK6K,IAAIkwE,EAAOnrB,GAAIrkD,EAAG+mE,YACnCyI,EAAOjrB,GAAK9vD,KAAK6K,IAAIkwE,EAAOjrB,GAAIvkD,EAAG6mG,WACnCr3B,EAAOlrB,GAAK7vD,KAAK2K,IAAIowE,EAAOlrB,GAAItkD,EAAG+mE,WAAa/mE,EAAG6zF,aACnDrkB,EAAOhrB,GAAK/vD,KAAK2K,IAAIowE,EAAOhrB,GAAIxkD,EAAG6mG,UAAY7mG,EAAG+zF,cAItD,IAAIha,EAAMzT,EAAOC,WAAW,MAC5BwT,EAAIqP,OAEJ,IAAIkd,EAAO,GACPl+G,EAAEs+G,UACFJ,EAAKvlH,KAAK,UAEVqH,EAAEo+G,QACFF,EAAKvlH,KAAK,QAEdulH,EAAKvlH,KAAKqH,EAAE69B,KAAO,OAAS79B,EAAEk+G,KAAOl+G,EAAEk+G,KAAO,eAC9CvsB,EAAIusB,KAAOA,EAAK3nG,KAAK,KACrBo7E,EAAIC,UAAY5xF,EAAE2oD,MAAQ3oD,EAAE2oD,MAAQ,OAEpC,IAAI53B,EAAI/wB,EAAE+wB,EACNC,EAAIhxB,EAAEgxB,EACM,UAAZhxB,EAAEg+G,QACFjtF,IAAMq2D,EAAOlrB,GAAKkrB,EAAOnrB,IAEb,WAAZj8D,EAAEg+G,QACFjtF,KAAOq2D,EAAOlrB,GAAKkrB,EAAOnrB,IAAM,GAEpC01B,EAAIwP,UAAUnhG,EAAE+wB,EAAG/wB,EAAEgxB,GACrB2gE,EAAIwL,OAAOn9F,EAAEsvF,UAAYtvF,EAAEsvF,SAAW,GACtCqC,EAAIwP,WAAWnhG,EAAE+wB,GAAI/wB,EAAEgxB,GACvB2gE,EAAIwP,UAAUpwE,EAAGC,GAGjB,IAAK,IAAI4vD,EAAI,EAAGA,EAAI5+C,EAAIjhC,SAAS3O,OAAQwuF,IAAK,CAC1C,IAAI89B,EAAK18E,EAAIjhC,SAAS6/E,GAGtB+Q,EAAIgtB,SAASD,EAAGE,UAAWF,EAAG//B,WAAY+/B,EAAGD,WAcjD,OAXIz+G,EAAE6+G,SACFltB,EAAI6pB,UAAY,EAChB7pB,EAAIgsB,WAAW,EAAa,KAAT39G,EAAE69B,KAAaupD,EAAOlrB,GAAIkrB,EAAOhrB,IACpDu1B,EAAIyP,UACJzP,EAAIE,SAAS7xF,EAAE+wB,EAAI,EAAG/wB,EAAEgxB,EAAI,EAAG,EAAG,IAElC2gE,EAAIyP,UAGRt8F,SAASutE,KAAKhkC,YAAY0vE,GAEnB,CACHhtF,EAAGA,EAAI/wB,EAAE+wB,EACTC,EAAGA,EAAIhxB,EAAEgxB,EAAY,IAAThxB,EAAE69B,KACdq/C,MAAOkK,EAAOlrB,GAAKkrB,EAAOnrB,GAC1BkhB,OAAQiK,EAAOhrB,GAAKgrB,EAAOjrB,aC5JnB2iD,GAAYC,EAAqB3K,GAC7C,IAAIhU,EAAejI,GAAGja,OAClB7xE,KAAK2K,IAAI,EAAG3K,KAAK4gD,MAAM8xD,EAAQ7hC,MAAQk3B,IACvC/nG,KAAK2K,IAAI,EAAG3K,KAAK4gD,MAAM8xD,EAAQ5hC,OAASi3B,KAExCziB,EAAMyO,EAAajiB,WAAW,MAClCwT,EAAIqP,OACAoT,EAAS,IACTziB,EAAIsP,uBAAwB,GAEhC,IAAK,IAAI9uG,EAAI,EAAGA,EAAI4sH,EAAQC,OAAO5sH,OAAQD,IACL,IAA9B4sH,EAAQC,OAAO7sH,GAAG28G,UAGtBnd,EAAI8pB,YAAcsD,EAAQC,OAAO7sH,GAAG28G,QACpCnd,EAAImR,yBAA2Bic,EAAQC,OAAO7sH,GAAG8sH,WAAaF,EAAQC,OAAO7sH,GAAG8sH,WAAa,cAC7FttB,EAAI0O,UAAU0e,EAAQC,OAAO7sH,GAAGy7G,MAAO,EAAG,EAAGxN,EAAaljB,MAAOkjB,EAAajjB,SAGlF,OADAwU,EAAIyP,UACGhB,ECZX,IAAM8e,GAAkB,CACpB,cACA,SACA,WACA,aACA,UACA,SACA,cACA,UACA,aACA,aACA,aACA,YACA,MACA,aACA,QACA,cAGSC,GAAa,GAkBbC,GAAN,iCAAMA,EAmCLluC,OAiBQmuC,EAAqBtoH,UAAA3E,OAAA,QAAA,IAAA2E,UAAA,GAAAA,UAAA,GAAG,EAqBhC,mBAzEKqoH,QAoDGC,cAAAA,EAER/pH,KAAKgqH,eAAiB,GACtBhqH,KAAKiqH,WAAapnB,GAAGja,OAAO,EAAG,GAC/B5oF,KAAKkqH,QAAU,IAAI7Z,GACf,SAAUz0B,GACV57E,KAAK4nF,MAAQ,EACb5nF,KAAK6nF,OAAS,GAEV,UAAWjM,GAAU,WAAYA,GACjC57E,KAAK4nF,MAAQhM,EAAOgM,MACpB5nF,KAAK6nF,OAASjM,EAAOiM,SAErB7nF,KAAK4nF,MAAQ,EACb5nF,KAAK6nF,OAAS,GAGtB7nF,KAAKmpC,KAAKnpC,KAAK4nF,MAAO5nF,KAAK6nF,QAE3B7nF,KAAKmqH,kBAAoB,GAErB,SAAUvuC,EACV57E,KAAKoqH,KAAKxuC,EAAOwuC,WACd,GAAI,eAAgBxuC,EAAQ,CAC/B,IAAMyuC,EAAa,GAAGh+G,OAAOuvE,EAAO0uC,WAAWZ,QAG/C,GAFA1pH,KAAKmpC,KAAKyyC,EAAO0uC,WAAW1iC,MAAOhM,EAAO0uC,WAAWziC,SAEhDwiC,EAAWvtH,OACZ,MAAM,IAAIG,MAAM,yCAGpB,IAAK,IAAIJ,EAAI,EAAGA,EAAIwtH,EAAWvtH,OAAQD,IAAK,CACxC,GAAIwtH,EAAWxtH,GAAG8sH,aAAeC,GAAgBnnG,SAAS4nG,EAAWxtH,GAAG8sH,YACpE,MAAM,IAAI1sH,MAAM,sBAAwBotH,EAAWxtH,GAAG8sH,YAG1D3pH,KAAKuqH,WACLvqH,KAAKwqH,aAAa3tH,EAAGwtH,EAAWxtH,GAAG28G,SACnCx5G,KAAKgqH,eAAentH,GAAGgF,KAAOwoH,EAAWxtH,GAAGgF,KAC5C7B,KAAKgqH,eAAentH,GAAG8sH,WAAaU,EAAWxtH,GAAG8sH,WAAaU,EAAWxtH,GAAG8sH,WAAa,cAC1F3pH,KAAKgqH,eAAentH,GAAGgsF,WAAW,MAAMkiB,UAAUsf,EAAWxtH,GAAGy7G,MAAO,EAAG,IAGlFt4G,KAAKyqH,kCA/FAX,EAAQ,EAaTrsH,IAAA,aAAR,SAAciqF,EAAWC,GACrB,IAAKD,IAAMC,GAAKvzE,MAAMszE,IAAMtzE,MAAMuzE,IAAMD,EAAI,GAAKC,EAAI,EACjD,MAAM,IAAI1qF,MAAM,8BAEpB+C,KAAK4nF,MAAQF,EACb1nF,KAAK6nF,OAASF,KAGVlqF,IAAA,mBAAR,WAEIuC,KAAKmqH,kBAAkB3sH,SAAQ,SAAAo+C,GAAQ,OAAAA,UAGnCn+C,IAAA,sBAAR,WACIuC,KAAKgqH,eAAexsH,SAAQ,SAACo+C,EAAM95B,GAC/B85B,EAAK95B,MAAQA,QAsErBrkB,IAAA,mBAAA,SAAYkqF,GACR3nF,KAAKkqH,QAAUviC,KAQnBlqF,IAAA,cAAA,SACIiN,GAcA,IAAKA,EAAEk9E,QAAUl9E,EAAEm9E,QAAUn9E,EAAEk9E,MAAQ,GAAKl9E,EAAEm9E,OAAS,GAAKzzE,MAAM1J,EAAEk9E,QAAUxzE,MAAM1J,EAAEm9E,QAClF,MAAM,IAAI5qF,MAAM,uBAUpB,GAPA+C,KAAKkqH,QAAQQ,OAAM,GAEnB1qH,KAAK4nF,MAAQl9E,EAAEk9E,MACf5nF,KAAK6nF,OAASn9E,EAAEm9E,OAEhB7nF,KAAKgqH,eAAe5kH,OAAO,EAAG2R,KAAK2K,IAAI,EAAG1hB,KAAKgqH,eAAeltH,OAAS,IAEnE4N,EAAEg/G,OACF,IAAK,IAAI7sH,EAAI,EAAGA,EAAI6N,EAAEg/G,OAAO5sH,OAAQD,IAAK,CACtC,IAAI++C,EAAOlxC,EAAEg/G,OAAO7sH,GACfmD,KAAKgqH,eAAentH,IACrBmD,KAAKuqH,WAETvqH,KAAKgqH,eAAentH,GAAGgF,KAAO+5C,EAAK/5C,KACnC7B,KAAKgqH,eAAentH,GAAG+qF,MAAQ5nF,KAAK4nF,MACpC5nF,KAAKgqH,eAAentH,GAAGgrF,OAAS7nF,KAAK6nF,OACrC7nF,KAAKgqH,eAAentH,GAAG8sH,WAAa/tE,EAAK+tE,WAAa/tE,EAAK+tE,WAAa,cACxE3pH,KAAKgqH,eAAentH,GAAGgsF,WAAW,MAAMkiB,UAAUnvD,EAAK08D,MAAO,EAAG,GACjEt4G,KAAKwqH,aAAa3tH,EAAG++C,EAAK49D,cAG9Bx5G,KAAKgqH,eAAe,GAAGnoH,KAAO6I,EAAEigH,UAAYjgH,EAAEigH,UAAY9X,GAAK,gBAAkB,KACjF7yG,KAAKgqH,eAAe,GAAGpiC,MAAQ5nF,KAAK4nF,MACpC5nF,KAAKgqH,eAAe,GAAGniC,OAAS7nF,KAAK6nF,OACrC7nF,KAAKgqH,eAAe,GAAGL,WAAa,cACpC3pH,KAAKwqH,aAAa,EAAG,GACjB9/G,EAAE2oD,MACFrzD,KAAK4qH,UAAU,EAAGlgH,EAAE2oD,OACb3oD,EAAE4tG,OACTt4G,KAAKgqH,eAAe,GAAGnhC,WAAW,MAAMkiB,UAAUrgG,EAAE4tG,MAAO,EAAG,GAatE,OAVAt4G,KAAKyqH,gBAELzqH,KAAKkqH,QAAQQ,OAAM,GAEnB1qH,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,QACRh1B,OAAQ,CAAClxE,KAGN1K,KAAKgqH,eAAeltH,OAAS,KAGxCW,IAAA,4BAAA,WACI,OAAOuC,KAAKgqH,eAAeltH,QAAU+sH,MAGzCpsH,IAAA,iBAAA,WACI,OAAOuC,KAAK4nF,SAGhBnqF,IAAA,kBAAA,WACI,OAAOuC,KAAK6nF,UAGhBpqF,IAAA,aAAA,SAAMqtH,GACF,GACIA,EAAaC,WAAa,GAC1BD,EAAaE,YAAc,GAC3B52G,MAAM02G,EAAaC,aACnB32G,MAAM02G,EAAaE,aAEnB,MAAM,IAAI/tH,MAAM,2BAKpB,IAAIotH,EAAaS,EAAaG,YAEvBjrH,KAAKgqH,eAAeltH,OAASutH,EAAWvtH,QAC3CkD,KAAKkrH,YAAYlrH,KAAKgqH,eAAeltH,OAAS,GAG9CguH,EAAaC,YAAc/qH,KAAK4nF,OAASkjC,EAAaE,aAAehrH,KAAK6nF,QAC1E7nF,KAAKmpC,KAAK2hF,EAAaC,WAAYD,EAAaE,aAEpD,IAAK,IAAInuH,EAAI,EAAGA,EAAIwtH,EAAWvtH,OAAQD,IAC/BA,GAAKmD,KAAKgqH,eAAeltH,OACzBkD,KAAKuqH,YAELvqH,KAAKgqH,eAAentH,GAAG+qF,MAAQ5nF,KAAK4nF,MACpC5nF,KAAKgqH,eAAentH,GAAGgrF,OAAS7nF,KAAK6nF,QAEzC7nF,KAAKwqH,aAAa3tH,EAAGwtH,EAAWxtH,GAAG28G,SACnCx5G,KAAKgqH,eAAentH,GAAGgF,KAAOwoH,EAAWxtH,GAAGgF,KAC5C7B,KAAKgqH,eAAentH,GAAG8sH,WAAaU,EAAWxtH,GAAG8sH,WAClD3pH,KAAKgqH,eAAentH,GAAGgsF,WAAW,MAAMkiB,UAAUsf,EAAWxtH,GAAGS,QAAQsrF,OAAQ,EAAG,GAEvF5oF,KAAKyqH,mBAGThtH,IAAA,sBAAA,WACI,OAAOuC,KAAKgqH,eAAeltH,UAG/BW,IAAA,eAAA,SAAQiqF,EAAWC,OAOX4kB,EAAMC,EAPgB2e,EAAiC1pH,UAAA3E,OAAA,QAAA,IAAA2E,UAAA,GAAAA,UAAA,GAAG,SAC9D,IAAKimF,IAAMC,GAAMD,IAAM1nF,KAAK4nF,OAASD,IAAM3nF,KAAK6nF,QAAWzzE,MAAMszE,IAAMtzE,MAAMuzE,IAAMD,EAAI,GAAKC,EAAI,EAC5F,OAAO,EAOX,GALAD,EAAI3wE,KAAK2K,IAAIgmE,EAAG,GAChBC,EAAI5wE,KAAK2K,IAAIimE,EAAG,GAIE,cAAdwjC,EAA2B,CAE3B,IAAIpd,GADJxB,EAAO1J,GAAGja,OAAOlB,EAAGC,IACDkB,WAAW,MAC9BklB,EAAQpC,uBAAwB,EAChC,IAAK,IAAI9uG,EAAI,EAAGA,EAAImD,KAAKgqH,eAAeltH,OAAQD,IAAK,CAC7CA,EAAI,GACJkxG,EAAQqd,UAAU,EAAG,EAAG1jC,EAAGC,GAE/B,IAAI0jC,EAAcrrH,KAAKgqH,eAAentH,GACtCkxG,EAAQhD,UAAUsgB,EAAa,EAAG,EAAG3jC,EAAGC,GACxC0jC,EAAYzjC,MAAQF,EACpB2jC,EAAYxjC,OAASF,EACrB,IAAI2jC,EAAeD,EAAYxiC,WAAW,MAC1CyiC,EAAavgB,UAAUwB,EAAM,EAAG,QAGjC,CAAA,GAAkB,WAAd4e,EAOP,MAAM,IAAIluH,MAAM,4BANhBsvG,EAAO1J,GAAGja,SACV4jB,EAAO3J,GAAGja,SACV,IAAK,IAAI0D,EAAI,EAAGA,EAAItsF,KAAKgqH,eAAeltH,OAAQwvF,IAC5CuW,GAAGwJ,aAAarsG,KAAKgqH,eAAe19B,GAAI5E,EAAGC,EAAG4kB,EAAMC,GAQ5D,OAFAxsG,KAAK4nF,MAAQF,EACb1nF,KAAK6nF,OAASF,GACP,KAOXlqF,IAAA,qBAAA,SAAciN,GAQV,IAAMoiG,EAAO/1F,KAAK4gD,MAAMjtD,EAAEC,MAAQ3K,KAAK4nF,MAAQ7wE,KAAK4gD,MAAMjtD,EAAEE,OACtDmiG,EAAOh2F,KAAK4gD,MAAMjtD,EAAE0+E,KAAOppF,KAAK6nF,OAAS9wE,KAAK4gD,MAAMjtD,EAAE8oG,QACtD+X,EAAOx0G,KAAK4gD,MAAMjtD,EAAEC,MACpB6gH,EAAOz0G,KAAK4gD,MAAMjtD,EAAE0+E,KAE1B,GAAIh1E,MAAM04F,IAAS14F,MAAM24F,IAASD,EAAO,GAAKC,EAAO,EACjD,MAAM,IAAI9vG,MAAM,+CAGpB,IAAK,IAAIJ,EAAI,EAAGA,EAAImD,KAAKgqH,eAAeltH,OAAQD,IAAK,CACjD,IAAM4uH,EAAQ5oB,GAAGja,OAAO5oF,KAAK4nF,MAAO5nF,KAAK6nF,QACrCwjC,EAAcrrH,KAAKgqH,eAAentH,GAClC6uH,EAAW1rH,KAAKgqH,eAAentH,GAAGgsF,WAAW,MACjD4iC,EAAM5iC,WAAW,MAAMkiB,UAAUsgB,EAAa,EAAG,GAEjDrrH,KAAKgqH,eAAentH,GAAG+qF,MAAQklB,EAC/B9sG,KAAKgqH,eAAentH,GAAGgrF,OAASklB,EAEhC2e,EAAShgB,OACC,IAAN7uG,GAAW6N,EAAEihH,YACbD,EAASpvB,UAAYuG,GAAG0L,eAAe9M,SAAS/2F,EAAEihH,WAClDD,EAASnvB,SAAS,EAAG,EAAGuQ,EAAMC,GAC9B2e,EAASN,UAAUG,EAAMC,EAAMxrH,KAAK4nF,MAAO5nF,KAAK6nF,SAEpD6jC,EAAS3gB,UAAU0gB,EAAOF,EAAMC,GAChCE,EAAS5f,UAEb9rG,KAAK4nF,MAAQklB,EACb9sG,KAAK6nF,OAASklB,KAOlBtvG,IAAA,iBAAA,SAAUmuH,GACN,GAAI5rH,KAAK6rH,sBACL,OAAO,EAEX,IAAIjjC,EAASia,GAAGja,OAAO5oF,KAAK4nF,MAAO5nF,KAAK6nF,QAqBxC,OApBCe,EAAe+gC,WAAa,mBAEZtrH,IAAbutH,GACA5rH,KAAKgqH,eAAehqH,KAAKgqH,eAAeltH,QAAU8rF,EAClDgjC,EAAW70G,KAAK2K,IAAI,EAAG1hB,KAAKgqH,eAAeltH,OAAS,KAEpDkD,KAAKgqH,eAAe5kH,OAAOwmH,EAAW,EAAG,EAAGhjC,GAC5CgjC,KAGHhjC,EAAe/mF,KAAOgxG,GAAK,gBAAkB,KAAO7yG,KAAKgqH,eAAeltH,OAASkD,KAAK+pH,eACvF/pH,KAAKkqH,QAAQQ,OAAM,GACnB1qH,KAAKwqH,aAAaoB,EAAU,GAC5B5rH,KAAKkqH,QAAQQ,OAAM,GACnB1qH,KAAKyqH,gBACLzqH,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,WACRh1B,OAAQ,CAACgwC,EAAW,KAEjBA,KAGXnuH,IAAA,uBAAA,SAAgBZ,GACZ,IAAKmD,KAAKgqH,eAAentH,IAAMmD,KAAK6rH,sBAChC,OAAO,EAEX,IAAIjjC,EAASia,GAAGja,OAAO5oF,KAAK4nF,MAAO5nF,KAAK6nF,QAiBxC,OAhBA7nF,KAAKgqH,eAAe5kH,OAAOvI,EAAI,EAAG,EAAG+rF,GAEpCA,EAAe/mF,KAAO7B,KAAKgqH,eAAentH,GAAGgF,KAAO,IAAMgxG,GAAK,eAC/DjqB,EAAe+gC,WAAa3pH,KAAKgqH,eAAentH,GAAG8sH,WACpD/gC,EAAOC,WAAW,MAAMkiB,UAAU/qG,KAAKgqH,eAAentH,GAAI,EAAG,GAC7DmD,KAAKkqH,QAAQQ,OAAM,GACnB1qH,KAAKwqH,aAAa3tH,EAAI,EAAGmD,KAAKgqH,eAAentH,GAAG28G,SAChDx5G,KAAKkqH,QAAQQ,OAAM,GAEnB1qH,KAAKyqH,gBAELzqH,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,iBACRh1B,OAAQ,CAAC/+E,KAENA,EAAI,KAGfY,IAAA,wBAAA,SAAiBZ,EAAWivH,GACxB,GAAI9rH,KAAKgqH,eAAentH,GACpB,OAAOmD,KAAKgqH,eAAentH,GAAGgsF,WAAW,MAE7C,GAAIijC,EACA,OAAO,KAEX,MAAM,IAAI7uH,MAAM,kBAAoBJ,EAAI,kBAAoBmD,KAAKgqH,eAAeltH,OAAS,eAG7FW,IAAA,oBAAA,SAAaZ,GACT,QAAImD,KAAKgqH,eAAentH,KACpBmD,KAAKgqH,eAAe5kH,OAAOvI,EAAG,GAC9BmD,KAAKyqH,gBAITzqH,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,cACRh1B,OAAQ,CAAC/+E,KAGNka,KAAK2K,IAAI,EAAG7kB,EAAI,OAG3BY,IAAA,oBAAA,SAAaZ,EAAWgF,GACpB,QAAI7B,KAAKgqH,eAAentH,KACpBmD,KAAKgqH,eAAentH,GAAGgF,KAAOA,EAKlC7B,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,cACRh1B,OAAQ,CAAC/+E,EAAGgF,MAGT,MAGXpE,IAAA,qBAAA,SAAcZ,EAAWsN,GAChBnK,KAAKgqH,eAAentH,KAGzBsN,EAAI4M,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,EAAGzX,IAC5BnK,KAAKgqH,eAAentH,GAAG28G,QAAUrvG,EAEjCnK,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,eACRh1B,OAAQ,CAAC/+E,EAAGsN,KAGhBnK,KAAK+rH,iBAGTtuH,IAAA,kBAAA,SAAWZ,EAAW+J,GAClB,GAAU,IAANA,GAGA5G,KAAKgqH,eAAentH,GAAI,CACxB,IAAMgqB,EAAO7mB,KAAKgqH,eAAentH,GACjCmD,KAAKgqH,eAAe5kH,OAAOvI,EAAG,GAC9B,IAAMy0B,EAAcva,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI/kB,EAAI+J,EAAG5G,KAAKgqH,eAAeltH,SAQpE,OAPAkD,KAAKgqH,eAAe5kH,OAAOksB,EAAa,EAAGzK,GAC3C7mB,KAAKyqH,gBACLzqH,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,YACRh1B,OAAQ,CAAC/+E,EAAG+J,KAET0qB,MAIf7zB,IAAA,oBAAA,SAAauuH,EAA0BC,EAAuBtC,GAC1D,GACK3pH,KAAKgqH,eAAegC,IACpBhsH,KAAKgqH,eAAeiC,IACrBD,IAAqBC,EAHzB,CAQA,GAAID,EAAmBC,EAAe,CAClC,IAAIplG,EAAOmlG,EACXA,EAAmBC,EACnBA,EAAgBplG,EAGpB,IAAIqlG,EAAalsH,KAAKgqH,eAAeiC,GAAezS,QACpD,GAAmB,IAAf0S,GAAoBA,EAAY,CAChC,IAAI7vB,EAAMr8F,KAAKgqH,eAAegC,GAAkBnjC,WAAW,MAC3DwT,EAAIqP,OAEe,aAAfie,GAEA9mB,GAAGmL,4BAA4BhuG,KAAKgqH,eAAeiC,IACnD5vB,EAAImR,yBAA2B,iBAC/BnR,EAAI8pB,YAAc+F,EAClBlsH,KAAKgqH,eAAegC,GAAkBnjC,WAAW,MAAMkiB,UAAU/qG,KAAKgqH,eAAeiC,GAAgB,EAAG,KAIpGtC,IACAttB,EAAImR,yBAA2Bmc,GAEnCttB,EAAI8pB,YAAc+F,EAClBlsH,KAAKgqH,eAAegC,GAAkBnjC,WAAW,MAAMkiB,UAAU/qG,KAAKgqH,eAAeiC,GAAgB,EAAG,IAI5G5vB,EAAIyP,UAIA6d,IACAttB,EAAIqP,OACJrP,EAAIC,UAAY,mBAChBD,EAAIE,UAAS,UAAY,SAAY,EAAG,GACxCF,EAAIyP,WAaZ,OAVA9rG,KAAKyqH,gBACLzqH,KAAKkqH,QAAQQ,OAAM,GACnB1qH,KAAKkrH,YAAYe,GACjBjsH,KAAKkqH,QAAQQ,OAAM,GACnB1qH,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,cACRh1B,OAAQ,CAACowC,EAAkBC,EAAetC,KAGvCqC,MAGXvuH,IAAA,eAAA,SAAQowF,QACGA,EAAM,GACTA,GAAO,IAGX,IADAA,GAAO,KACG,IAAM,GAAa,IAARA,EAArB,CAEA,IAAIhnE,EAAOg8E,GAAGja,SACF,IAARiF,GAAqB,MAARA,GACbhnE,EAAK+gE,MAAQ5nF,KAAK4nF,MAClB/gE,EAAKghE,OAAS7nF,KAAK6nF,QACJ,KAARgG,GAAsB,MAARA,IACrBhnE,EAAK+gE,MAAQ5nF,KAAK6nF,OAClBhhE,EAAKghE,OAAS7nF,KAAK4nF,OAGvB,IADA,IAAIyU,EAAMx1E,EAAKgiE,WAAW,MACjBhsF,EAAI,EAAGA,EAAImD,KAAKgqH,eAAeltH,OAAQD,IAC5Cw/F,EAAI+uB,UAAU,EAAG,EAAGvkG,EAAK+gE,MAAO/gE,EAAKghE,QACrCwU,EAAIqP,OACJrP,EAAIwP,UAAUhlF,EAAK+gE,MAAQ,EAAG/gE,EAAKghE,OAAS,GAC5CwU,EAAIwL,OAAOha,EAAM92E,KAAK2uD,GAAK,KACf,MAARmoB,EACAwO,EAAI0O,UAAU/qG,KAAKgqH,eAAentH,IAAKgqB,EAAK+gE,MAAQ,GAAI/gE,EAAKghE,OAAS,GACvD,KAARgG,GAAsB,MAARA,GACrBwO,EAAI0O,UAAU/qG,KAAKgqH,eAAentH,IAAKgqB,EAAKghE,OAAS,GAAIhhE,EAAK+gE,MAAQ,GAE1E5nF,KAAKgqH,eAAentH,GAAG+qF,MAAQ/gE,EAAK+gE,MACpC5nF,KAAKgqH,eAAentH,GAAGgrF,OAAShhE,EAAKghE,OACrC7nF,KAAKgqH,eAAentH,GAAGgsF,WAAW,MAAMuiC,UAAU,EAAG,EAAGprH,KAAKgqH,eAAentH,GAAG+qF,MAAO5nF,KAAKgqH,eAAentH,GAAGgrF,QAC7G7nF,KAAKgqH,eAAentH,GAAGgsF,WAAW,MAAMkiB,UAAUlkF,EAAM,EAAG,GAC3Dw1E,EAAIyP,UAER9rG,KAAK4nF,MAAQ/gE,EAAK+gE,MAClB5nF,KAAK6nF,OAAShhE,EAAKghE,WAGvBpqF,IAAA,aAAA,SAAM0uH,EAAuBC,EAAqBC,GAC9C,GAAKF,GAAiBC,EAAtB,CAIA,IAAIvlG,EAAOg8E,GAAGja,OAAO5oF,KAAK4nF,MAAO5nF,KAAK6nF,QACtChhE,EAAK+gE,MAAQ5nF,KAAK4nF,MAClB/gE,EAAKghE,OAAS7nF,KAAK6nF,OAGnB,IAFA,IAAIykC,EAAUzlG,EAAKgiE,WAAW,MAErBhsF,EAAI,EAAGA,EAAImD,KAAKgqH,eAAeltH,OAAQD,MAEtCwvH,GAA6B,IAAfA,GAAqBxvH,IAAMwvH,KAI/CC,EAAQ5gB,OACR4gB,EAAQlB,UAAU,EAAG,EAAGvkG,EAAK+gE,MAAO/gE,EAAKghE,QACzCykC,EAAQzgB,UAAUhlF,EAAK+gE,MAAQ,EAAG/gE,EAAKghE,OAAS,GAChDykC,EAAQvmD,MAAOomD,GAAe,EAAK,EAAKC,GAAa,EAAK,GAC1DE,EAAQvhB,UAAU/qG,KAAKgqH,eAAentH,IAAKgqB,EAAK+gE,MAAQ,GAAI/gE,EAAKghE,OAAS,GAC1EykC,EAAQxgB,UAER9rG,KAAKgqH,eAAentH,GAAGgsF,WAAW,MAAMuiC,UAAU,EAAG,EAAGprH,KAAKgqH,eAAentH,GAAG+qF,MAAO5nF,KAAKgqH,eAAentH,GAAGgrF,QAC7G7nF,KAAKgqH,eAAentH,GAAGgsF,WAAW,MAAMkiB,UAAUlkF,EAAM,EAAG,QAInEppB,IAAA,kBAAA,SAAW4uH,EAAoBE,EAAgBC,GAC3C,IAAInwB,EAAMr8F,KAAKgqH,eAAeqC,GAAYxjC,WAAW,MACrDwT,EAAIqP,OACA8gB,IACAnwB,EAAImR,yBAA2Bgf,GAEnCnwB,EAAIC,UAAY,QAAUiwB,EAASpoH,EAAI,IAAMooH,EAASjiC,EAAI,IAAMiiC,EAASlxF,EAAI,MAC7EghE,EAAIE,SAAS,EAAG,EAAGv8F,KAAKgqH,eAAeqC,GAAYzkC,MAAO5nF,KAAKgqH,eAAeqC,GAAYxkC,QAC1FwU,EAAIyP,UAIJzP,EAAIqP,OACJrP,EAAIC,UAAY,mBAChBD,EAAIE,UAAS,UAAY,SAAY,EAAG,GACxCF,EAAIyP,UAgCJ9rG,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,YACRh1B,OAAQ,CAACywC,EAAYE,EAAUC,QAIvC/uH,IAAA,kBAAA,SACI4uH,EACA5wF,EACAC,EACA+wF,EACAjT,EACA4L,EACAsH,EACAnH,EACAC,GAEA,KAAI/pF,EAAI,GAAKC,EAAI,GAAKD,GAAKz7B,KAAK4nF,OAASlsD,GAAK17B,KAAK6nF,QAAsB,IAAZ2xB,GAA7D,CAKA,GAFA4L,EAAYruG,KAAK4gD,MAAMytD,IAEjB,CAAC,QAAS,UAAW,OAAO3iG,SAASiqG,GACvC,MAAM,IAAIzvH,MAAM,qBAGpB,IAAIgC,EAEA0tH,EACAC,EAGAC,EACAC,EACAC,EAGJ,GAAkB,QAAdL,EAAqB,CAErB,IAAIM,EAA2C,IAA/BhtH,KAAKgqH,eAAeltH,OAAekD,KAAKgqH,eAAe,GAAKhqH,KAAKitH,kBAAkB,GAInGhuH,EAASomH,IAFTuH,GADAD,EAASK,EAAUnkC,WAAW,OACRqlB,aAAa,EAAG,EAAGluG,KAAK4nF,MAAO5nF,KAAK6nF,SACnC7jE,KACShkB,KAAK4nF,MAAO5nF,KAAK6nF,OAAQpsD,EAAGC,EAAG0pF,EAAWruG,KAAK4gD,MAAM4tD,GAAOC,GAE5FwH,EAAY,KACZL,EAAS,KACTC,EAAe,KACL,KAGVE,GADAD,EAAY7sH,KAAKgqH,eAAeqC,GAAYxjC,WAAW,OAC3BqlB,aAAa,EAAG,EAAGluG,KAAK4nF,MAAO5nF,KAAK6nF,YAE7D,CACH,IAAIqlC,EAAyB,UAAdR,EAAwBL,EAAa,EAAIA,EAExD,GAAIa,GAAYltH,KAAKgqH,eAAeltH,OAChC,OAMJmC,EAASomH,IAFTuH,GADAD,EAAS3sH,KAAKgqH,eAAekD,GAAUrkC,WAAW,OAC5BqlB,aAAa,EAAG,EAAGluG,KAAK4nF,MAAO5nF,KAAK6nF,SACnC7jE,KACShkB,KAAK4nF,MAAO5nF,KAAK6nF,OAAQpsD,EAAGC,EAAG0pF,EAAWruG,KAAK4gD,MAAM4tD,GAAOC,GAExF6G,IAAea,IACfP,EAAS,KACTC,EAAe,KACL,MAGdC,EAAYR,IAAea,EAAWP,EAAS3sH,KAAKgqH,eAAeqC,GAAYxjC,WAAW,MAC1FikC,EAAkBT,IAAea,EAAWN,EAAeC,EAAU3e,aAAa,EAAG,EAAGluG,KAAK4nF,MAAO5nF,KAAK6nF,QAK7G,GADAklC,EAAaD,EAAgB9oG,KACb,IAAZw1F,EACA,IAAK,IAAI38G,EAAI,EAAGA,EAAImD,KAAK4nF,MAAQ5nF,KAAK6nF,OAAQhrF,IACnB,MAAnBoC,EAAO+kB,KAAKnnB,KACZkwH,EAAe,EAAJlwH,GAAS4vH,EAAItoH,EACxB4oH,EAAe,EAAJlwH,EAAQ,GAAK4vH,EAAIniC,EAC5ByiC,EAAe,EAAJlwH,EAAQ,GAAK4vH,EAAIpxF,EAC5B0xF,EAAe,EAAJlwH,EAAQ,GAAK,UAIhC,IAAK,IAAIyuF,EAAI,EAAGA,EAAItrF,KAAK4nF,MAAQ5nF,KAAK6nF,OAAQyD,IACnB,MAAnBrsF,EAAO+kB,KAAKsnE,KACZyhC,EAAe,EAAJzhC,GAASuX,GAAG2E,IAAIulB,EAAe,EAAJzhC,GAAQmhC,EAAItoH,EAAGq1G,GACrDuT,EAAe,EAAJzhC,EAAQ,GAAKuX,GAAG2E,IAAIulB,EAAe,EAAJzhC,EAAQ,GAAImhC,EAAIniC,EAAGkvB,GAC7DuT,EAAe,EAAJzhC,EAAQ,GAAKuX,GAAG2E,IAAIulB,EAAe,EAAJzhC,EAAQ,GAAImhC,EAAIpxF,EAAGm+E,GAC7DuT,EAAe,EAAJzhC,EAAQ,GAAKuX,GAAG2E,IAAIulB,EAAe,EAAJzhC,EAAQ,GAAI,IAAKkuB,IAIvEqT,EAAU1e,aAAa2e,EAAiB,EAAG,GAG3C9sH,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,eACRh1B,OAAQ,CAACywC,EAAYS,SAS7BrvH,IAAA,kBAAA,SAAW4uH,EAAoBpG,GAC3BD,GAAUhmH,KAAKgqH,eAAeqC,GAAYxjC,WAAW,MAAOo9B,GAC5DjmH,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,YACRh1B,OAAQ,CAACywC,EAAYxpB,GAAGqD,QAAQ+f,SAIxCxoH,IAAA,aAAA,SAAM4uH,EAAoB3hH,GACtB69G,GAAWvoH,KAAKgqH,eAAeqC,GAAaxpB,GAAGqD,QAAQx7F,IACvD1K,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,OACRh1B,OAAQ,CAACywC,EAAYxpB,GAAGqD,QAAQx7F,SAIxCjN,IAAA,qBAAA,SAAc4uH,EAAoBc,GACpBntH,KAAKgqH,eAAeqC,GAAYxjC,WAAW,MACjDslB,aAAagf,EAAW,EAAG,GAC/BntH,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,eACRh1B,OAAQ,CAACywC,EAAYc,QAI7B1vH,IAAA,mBAAA,SAAY4uH,GACR,IAAIhwB,EAAMr8F,KAAKgqH,eAAeqC,GAAYxjC,WAAW,MACrDwT,EAAIqP,OACJrP,EAAI+uB,UAAU,EAAG,EAAGprH,KAAKgqH,eAAeqC,GAAYzkC,MAAO5nF,KAAKgqH,eAAeqC,GAAYxkC,QAC3FwU,EAAIyP,UAEJ9rG,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,aACRh1B,OAAQ,CAACywC,QAIjB5uH,IAAA,kBAAA,WAMI,OAAOuC,KAAKgqH,eAAenjH,KAAI,SAAA+0C,GAC3B,MAAO,CACHt+C,QAASs+C,EAAKitC,WAAW,MACzB2wB,QAAS59D,EAAK49D,QACd33G,KAAM+5C,EAAK/5C,KACX8nH,WAAY/tE,EAAK+tE,kBAK7BlsH,IAAA,sBAAA,WAMI,OAAOuC,KAAKgqH,eAAenjH,KAAI,SAAA+0C,GAC3B,MAAO,CACHgtC,OAAQhtC,EACR49D,QAAS59D,EAAK49D,QACd33G,KAAM+5C,EAAK/5C,KACX8nH,WAAY/tE,EAAK+tE,kBAK7BlsH,IAAA,sBAAA,SAAe2vH,EAA8BtB,GACzC,IAAK,IAAIjvH,EAAI,EAAGA,EAAImD,KAAKgqH,eAAeltH,OAAQD,IAC5C,GAAImD,KAAKgqH,eAAentH,KAAOuwH,EAC3B,OAAOvwH,EAGf,IAAKivH,EACD,MAAM,IAAI7uH,MAAM,uBAAyB+C,KAAKgqH,eAAeltH,OAAS,YAE1E,OAAO,QAGXW,IAAA,iBAAA,SAAUqkB,EAAegqG,GAMrB,GAAI9rH,KAAKgqH,eAAeloG,GACpB,MAAO,CACHxkB,QAAS0C,KAAKgqH,eAAeloG,GAAO+mE,WAAW,MAC/C2wB,QAASx5G,KAAKgqH,eAAeloG,GAAO03F,QACpC33G,KAAM7B,KAAKgqH,eAAeloG,GAAOjgB,KACjC9E,GAAI+kB,GAGZ,IAAKgqG,EACD,MAAM,IAAI7uH,MAAM,kBAAoB6kB,EAAQ,kBAAoB9hB,KAAKgqH,eAAeltH,OAAS,YAEjG,OAAO,QAGXW,IAAA,mBAAA,SAAYg+B,EAAWC,GACnBD,EAAI1kB,KAAKuK,MAAMma,GACfC,EAAI3kB,KAAKuK,MAAMoa,GACf,IAAI2gE,EAAMr8F,KAAKiqH,WAAWphC,WAAW,MACrCwT,EAAIqP,OACJrP,EAAIsP,uBAAwB,EAC5BtP,EAAI+uB,UAAU,EAAG,EAAG,EAAG,GACvB,IAAK,IAAIvuH,EAAI,EAAGA,EAAImD,KAAKgqH,eAAeltH,OAAQD,IAC5Cw/F,EAAI8pB,YAAcnmH,KAAKgqH,eAAentH,GAAG28G,QACzCnd,EAAImR,yBAA2BxtG,KAAKgqH,eAAentH,GAAG8sH,WACtDttB,EAAI0O,UAAU/qG,KAAKgqH,eAAentH,IAAK4+B,GAAIC,GAE/C2gE,EAAIyP,UACJ,IAAIuhB,EAAShxB,EAAI6R,aAAa,EAAG,EAAG,EAAG,GACvC,OAAO,IAAIrL,GAAGwL,IAAIgf,EAAOrpG,KAAK,GAAIqpG,EAAOrpG,KAAK,GAAIqpG,EAAOrpG,KAAK,OAGlEvmB,IAAA,0BAAA,SAAmBqhH,GACf,OAAO0K,GAAYxpH,KAAKstH,aAAcxO,MAG1CrhH,IAAA,mBAAA,WACI,MAAO,CACHmqF,MAAO5nF,KAAK4nF,MACZC,OAAQ7nF,KAAK6nF,OACb6hC,OAAQ1pH,KAAKgqH,eAAenjH,KAAI,SAAA0mH,GAC5B,MAAO,CACH1rH,KAAM0rH,EAAM1rH,KACZ23G,QAAS+T,EAAM/T,QACfmQ,WAAY4D,EAAM5D,WAClBrR,MAAOiV,UAMvB9vH,IAAA,0BAAA,SAAmBud,GACXhb,KAAKmqH,kBAAkB1nG,SAASzH,IAGpChb,KAAKmqH,kBAAkB9mH,KAAK2X,MAGhCvd,IAAA,6BAAA,SAAsBud,GAClB,IAAK,IAAIne,EAAI,EAAGA,EAAImD,KAAKmqH,kBAAkBrtH,OAAQD,IAC/C,GAAImD,KAAKmqH,kBAAkBttH,KAAOme,EAE9B,YADAhb,KAAKmqH,kBAAkB/kH,OAAOvI,EAAG,MAM7CY,IAAA,mBAAA,SAAY4uH,EAAoB1C,GAC5B,IAAK3pH,KAAKgqH,eAAeqC,GACrB,MAAM,IAAIpvH,MAAM,iBAEpB+C,KAAKgqH,eAAeqC,GAAY1C,WAAaA,EAE7C3pH,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,UACPja,OAAQ,aACRh1B,OAAQ,CAACywC,EAAY,GAAK1C,QAWlClsH,IAAA,qBAAA,SACI4uH,EACAmB,GAIA,IAAKxtH,KAAKgqH,eAAeqC,GACrB,MAAM,IAAIpvH,MAAM,iBAEpB+C,KAAKgqH,eAAeqC,GAAYmB,aAAeA,MA74B1C1D,EAAN,YC3CS2D,GAAkBC,GAC9B,IAAKA,EACD,OAAO7a,GAAK,uBAGhB,IAAM8a,EAEF,CACA,cAAe,sBACfC,OAAU,sBACVC,SAAY,wBACZ,aAAc,0BACdC,QAAW,uBACXC,OAAU,sBACV,cAAe,2BACfC,QAAW,uBACX,aAAc,0BACd,aAAc,0BACdt+C,WAAc,0BACdu+C,UAAa,yBACbC,IAAO,mBACPC,WAAc,0BACd96D,MAAS,qBACT+6D,WAAc,2BAGlB,KAAMV,KAAaC,GACf,MAAM,IAAI1wH,MAAM,sBAEpB,OAAO41G,GAAK8a,EAAMD,+CCxBTW,GAAN,iCAAMA,EAiBL3jH,mBAjBK2jH,GAsBLruH,KAAKsuH,YAAczrB,GAAGoE,UAAU,CAC5BG,YAAa,MACbxf,MAAO,GAAKl9E,EAAEk9E,MACdC,OAAQ,GAAKn9E,EAAEm9E,SAEnBgb,GAAGkB,IAAI/jG,KAAKsuH,YAAa,CACrBhmE,SAAU,WACV39C,KAAM,IACNy+E,IAAK,IACLkxB,cAAe,OACfqB,WAAY,SAIhB37G,KAAKuuH,iBAAmB1rB,GAAGoE,UAAU,CACjCG,YAAa,SACbjjG,EAAG,KACH6jH,OAAQ,kBACR,eAAgB,IAChB33F,KAAM,SAEVrwB,KAAKwuH,iBAAmB3rB,GAAGoE,UAAU,CACjCG,YAAa,SACbjjG,EAAG,IACH6jH,OAAQ,wBACR,eAAgB,IAChB33F,KAAM,SAEVrwB,KAAKsuH,YAAY9xC,OAAOx8E,KAAKuuH,iBAAkBvuH,KAAKwuH,kBAGpDxuH,KAAKyuH,oBAAsB5rB,GAAGoE,UAAU,CACpCG,YAAa,SACbjjG,EAAG,KACH6jH,OAAQ,QACR,eAAgB,KAChB33F,KAAM,SAEVrwB,KAAKyuH,oBAAoBrnG,MAAMoyF,QAAU,IACzCx5G,KAAK0uH,iBAAmB7rB,GAAGoE,UAAU,CACjCG,YAAa,SACbjjG,EAAG,KACH6jH,OAAQ,QACR,eAAgB,KAChB33F,KAAM,SAEVrwB,KAAK0uH,iBAAiBtnG,MAAMoyF,QAAU,IACtCx5G,KAAKsuH,YAAY9xC,OAAOx8E,KAAKyuH,oBAAqBzuH,KAAK0uH,kBAIvD1uH,KAAK2uH,YAAc,GACnB3uH,KAAK4uH,QAAU/rB,GAAGoE,UAAU,CACxBG,YAAa,IACb6D,UAAW,aAAgBvgG,EAAEk9E,MAAM,EAAK,KAAQl9E,EAAEm9E,OAAO,EAAK,MAElEgb,GAAGkB,IAAI/jG,KAAK4uH,QAAS,CACjB7O,WAAY,4BACZvG,QAAS,MAEbx5G,KAAK6uH,aAAehsB,GAAGoE,UAAU,CAC7BG,YAAa,IACb6D,UAAW,eAEfjrG,KAAK8uH,kBAAoBjsB,GAAGoE,UAAU,CAClCG,YAAa,SACb/2E,KAAM,kBACN23F,OAAQ,OACR+G,GAAI,IACJC,GAAI,IACJ7qH,EAAG,GAAKnE,KAAK2uH,cAEjB3uH,KAAKivH,kBAAoBpsB,GAAGoE,UAAU,CAClCG,YAAa,SACb/2E,KAAM,OACN23F,OAAQ,yBACR,eAAgB,IAChB+G,GAAI,IACJC,GAAI,IACJ7qH,EAAG,GAAyB,GAAnBnE,KAAK2uH,cAElB3uH,KAAKkvH,qBAAuBrsB,GAAGoE,UAAU,CACrCG,YAAa,OACb/2E,KAAM,OACN23F,OAAQ,OACRphH,EAAG,MAA0B,IAAnB5G,KAAK2uH,YAAoB,MAA0B,IAAnB3uH,KAAK2uH,YAAoB,SAA6B,GAAnB3uH,KAAK2uH,YAAmB,OAEzG3uH,KAAKmvH,qBAAuBtsB,GAAGoE,UAAU,CACrCG,YAAa,OACb/2E,KAAM,OACN23F,OAAQ,OACRphH,EAAG,MAA0B,IAAnB5G,KAAK2uH,YAAoB,MAA0B,IAAnB3uH,KAAK2uH,YAAoB,QAA4B,GAAnB3uH,KAAK2uH,YAAmB,OAGxG3uH,KAAK6uH,aAAaryC,OACdx8E,KAAK8uH,kBACL9uH,KAAKivH,kBACLjvH,KAAKkvH,qBACLlvH,KAAKmvH,sBAETnvH,KAAK4uH,QAAQpyC,OAAOx8E,KAAK6uH,cACzB7uH,KAAKsuH,YAAY9xC,OAAOx8E,KAAK4uH,2BA3HxBP,EAAmB,EA8H5B5wH,IAAA,mBAAA,WACI,OAAOuC,KAAKsuH,eAGhB7wH,IAAA,gBAAA,SAASmqF,EAAeC,GACpB7nF,KAAKsuH,YAAYhsB,aAAa,QAAS,GAAK1a,GAC5C5nF,KAAKsuH,YAAYhsB,aAAa,SAAU,GAAKza,GAC7C7nF,KAAK4uH,QAAQtsB,aAAa,YAAa,aAAgB1a,EAAM,EAAK,KAAQC,EAAO,EAAK,QAG1FpqF,IAAA,qBAAA,SAAciN,GAMN,MAAOA,IACP1K,KAAKuuH,iBAAiBjsB,aAAa,KAAM,GAAK53F,EAAE+wB,GAChDz7B,KAAKwuH,iBAAiBlsB,aAAa,KAAM,GAAK53F,EAAE+wB,IAEhD,MAAO/wB,IACP1K,KAAKuuH,iBAAiBjsB,aAAa,KAAM,GAAK53F,EAAEgxB,GAChD17B,KAAKwuH,iBAAiBlsB,aAAa,KAAM,GAAK53F,EAAEgxB,IAEhD,WAAYhxB,IACZ1K,KAAKuuH,iBAAiBjsB,aAAa,IAAK,GAAKvrF,KAAK2K,IAAI,EAAGhX,EAAE0kH,SAC3DpvH,KAAKwuH,iBAAiBlsB,aAAa,IAAK,GAAKvrF,KAAK2K,IAAI,EAAGhX,EAAE0kH,OAAS,KAEpE,cAAe1kH,IACf1K,KAAKuuH,iBAAiBnnG,MAAMoyF,QAAU9uG,EAAE2kH,UAAY,IAAM,IAC1DrvH,KAAKwuH,iBAAiBpnG,MAAMoyF,QAAU9uG,EAAE2kH,UAAY,IAAM,QAIlE5xH,IAAA,2BAAA,SAAoBiN,GAchB,GARI,MAAOA,IACP1K,KAAK0uH,iBAAiBpsB,aAAa,KAAM,GAAK53F,EAAE+wB,GAChDz7B,KAAKyuH,oBAAoBnsB,aAAa,KAAM,GAAK53F,EAAE+wB,IAEnD,MAAO/wB,IACP1K,KAAK0uH,iBAAiBpsB,aAAa,KAAM,GAAK53F,EAAEgxB,GAChD17B,KAAKyuH,oBAAoBnsB,aAAa,KAAM,GAAK53F,EAAEgxB,IAEnD,UAAWhxB,EAAG,CACd1K,KAAK0uH,iBAAiBpsB,aAAa,SAAUO,GAAG0L,eAAe9M,SAAS/2F,EAAE2oD,QAC1E,IAAIi8D,EAAczsB,GAAG2L,wBAAwB9jG,EAAE2oD,OAAS,wBAA0B,kBAClFrzD,KAAKyuH,oBAAoBnsB,aAAa,SAAUgtB,GAEhD,cAAe5kH,IACf1K,KAAK0uH,iBAAiBtnG,MAAMoyF,QAAU9uG,EAAE2kH,UAAY,IAAM,IAC1DrvH,KAAKyuH,oBAAoBrnG,MAAMoyF,QAAU9uG,EAAE2kH,UAAY,IAAM,QAIrE5xH,IAAA,sBAAA,SAAeiN,GAIP,aAAcA,IACd1K,KAAK6uH,aAAavsB,aAAa,YAAa,UAAY53F,EAAE0gG,SAAW,KACrEprG,KAAKivH,kBAAkB7nG,MAAMoyF,QAAU9uG,EAAE0gG,SAAW,IAAO,EAAI,IAAM,KAErE,cAAe1gG,IACf1K,KAAK4uH,QAAQxnG,MAAMoyF,QAAU9uG,EAAE2kH,UAAY,IAAM,SAlMhDhB,EAAN,iDCTPkB,GAAiBpgH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHkwH,GAAiBrgH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHmwH,GAAiBtgH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHowH,GAAiBvgH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SCwBtH,OAEKqwH,GAFCC,GAAY,OAEbD,GAAAE,KAAAA,GAAK,KAALF,GACG,KAAJ,GAAA,OADCA,GAAAA,GAEG,KAAJ,GAAA,OAFCA,GAAAA,GAGW,aAAZ,GAAA,eAHCA,GAAAA,GAIG,KAAJ,GAAA,OAJCA,GAAAA,GAKG,KAAJ,GAAA,OALCA,GAAAA,GAMK,OAAN,GAAA,SANCA,GAAAA,GAOO,SAAR,GAAA,WAPCA,GAAAA,GAQG,KAAJ,GAAA,OARCA,GAAAA,GASG,KAAJ,GAAA,OATCA,GAAAA,GAUI,MAAL,GAAA,QAEJ,IAeaG,GAAN,iCAAMA,EA8gBLplH,8BA9gBKolH,GA4hBL,IAAM5N,EAAQliH,KACdA,KAAKmzG,OAAStQ,GAAGvgF,GAAG,CAChByhF,IAAK,CACDz7C,SAAU,WACV39C,KAAM,IACNC,MAAO,IACPw+E,IAAK,IACLoqB,OAAQ,IACRmE,OAAQ,YACRgE,WAAY,OACZ7D,YAAa,gBAGrB93G,KAAK+vH,SAAWrlH,EAAEqlH,SAClB/vH,KAAKgwH,aAAetlH,EAAEslH,aACtBhwH,KAAKiwH,mBAAqBptB,GAAGja,OAAOl+E,EAAEk9E,MAAOl9E,EAAEm9E,QAC/C7nF,KAAKkwH,gBAAkBlwH,KAAKiwH,mBAAmBpnC,WAAW,MAC1D7oF,KAAKmwH,YAAczlH,EAAEk9E,MACrB5nF,KAAKowH,aAAe1lH,EAAEm9E,OACtB7nF,KAAKqwH,gBAAkBxtB,GAAGja,OAAO,EAAG,GACpC5oF,KAAKswH,aAAetwH,KAAKqwH,gBAAgBxnC,WAAW,MACpD7oF,KAAKuwH,gBAAiB,EACtBvwH,KAAKwwH,gBAAkB,KACvBxwH,KAAKywH,mBAAqB,CACtBh1F,EAAG,EACHC,EAAG,EACHqqC,MAAO,EACPu0B,MAAO,GAEXt6F,KAAK0wH,oBAAsB,CACvBj1F,EAAG,EACHC,EAAG,EACHqqC,MAAO,EACPu0B,MAAO,GAEXt6F,KAAK2wH,qBAAuB,CACxBl1F,EAAG,KACHC,EAAG,KACHqqC,MAAO,KACPu0B,MAAO,MAEXt6F,KAAK4wH,UAAY,CACbn1F,EAAG,EACHC,EAAG,GAEP17B,KAAK6wH,eAAgB,EACrB7wH,KAAK8wH,WAAY,EACjB9wH,KAAK+wH,kBAAmB,EACxB/wH,KAAKgxH,oBAAqB,EAE1BhxH,KAAKixH,WAAa,IAAI5C,GAAoB,CACtCzmC,MAAOl9E,EAAEk9E,MACTC,OAAQn9E,EAAEm9E,SAGdgb,GAAGkB,IAAI/jG,KAAKiwH,mBAAoB,CAC5BtU,WAAY,OACZrB,cAAe,SAEnBzX,GAAGuJ,qBAAqB,GAAG,SAACz9F,KACnBshH,mBAAmB7oG,MAAM+sF,WAAa,OAASxlG,EAAM,OAE9D3O,KAAKmzG,OAAO9iG,YAAYrQ,KAAKiwH,oBAC7BjwH,KAAKmzG,OAAO9iG,YAAYrQ,KAAKixH,WAAWxY,cACxC5V,GAAGhqD,iBAAiB74C,KAAKmzG,OAAQ,YAAY,SAACtwG,GAE1C,OADAA,EAAE0oF,kBACK,KAEXsX,GAAGhqD,iBAAiB74C,KAAKmzG,OAAQ,eAAe,SAACtwG,GAE7C,OADAA,EAAE0oF,kBACK,KAEXsX,GAAGhqD,iBAAiB74C,KAAKmzG,OAAQ,aAAa,SAACtwG,GAE3C,OADAA,EAAE0oF,kBACK,KAGXvrF,KAAKkxH,YAAcruB,GAAGja,OAAO,EAAG,GAEhB5oF,KAAKkxH,YAAYroC,WAAW,MACpC0T,SAAS,EAAG,EAAG,EAAG,GAG1Bv8F,KAAKwsF,YAAc,IAAIqW,GAAGgN,YAAY,CAClCjjB,OAAQ,SAAC9C,EAAQ3xC,EAAOu8D,EAAUyc,GAK9B,GAHe,QAAXrnC,GACA3xC,EAAMozC,kBAEN4lC,EAIJ,GAAE7yB,EAAO8yB,sBAAqB9yB,EACrB8yB,sBAAsBC,UAAUvnC,EAAQ3xC,EAAOu8D,EAAUyc,OAE3D,CAEH,GAAI,CAACtB,GAAMyB,KAAMzB,GAAM0B,KAAM1B,GAAM2B,KAAM3B,GAAM4B,KAAM5B,GAAM6B,OAAOjvG,SAAQ67E,EAAMqzB,aAA4B,UAAbjd,EAG3F,SAFK0c,sBAAqB9yB,EAAQszB,kBAAkBC,iBAC/CT,sBAAsBC,UAAUvnC,EAAQ3xC,EAAOu8D,EAAUyc,GAIlE,GAAI,CAACtB,GAAMyB,KAAMzB,GAAMiC,KAAMjC,GAAM2B,KAAM3B,GAAM4B,KAAM5B,GAAM6B,OAAOjvG,SAAQ67E,EAAMqzB,aAA4B,QAAbjd,EAG3F,SAFK0c,sBAAqB9yB,EAAQszB,kBAAkBG,iBAC/CX,sBAAsBC,UAAUvnC,EAAQ3xC,EAAOu8D,EAAUyc,GAIlE,GAAI,CAAC,IAAK,WAAW1uG,SAASiyF,GAG1B,SAFK0c,sBAAqB9yB,EAAQszB,kBAAkB/pB,cAC/CupB,sBAAsBC,UAAUvnC,EAAQ3xC,EAAOu8D,EAAUyc,GAIlE,GAAI,MAAQzc,EAGR,SAFK0c,sBAAqB9yB,EAAQszB,kBAAkBI,YAC/CZ,sBAAsBC,UAAUvnC,EAAQ3xC,EAAOu8D,EAAUyc,KAO1EtkC,KAAM,SAAC/C,EAAQ3xC,EAAO+yC,GAChBoT,EAAO8yB,uBAAqB9yB,EACrB8yB,sBAAsBa,QAAQnoC,EAAQ3xC,EAAO+yC,MAK9DlrF,KAAKkyH,uBAELlyH,KAAKmyH,YAActC,GAAMyB,KACzBtxH,KAAK2xH,WAAa9B,GAAMyB,KAExBtxH,KAAKoyH,WAAa,EAElBpyH,KAAKqyH,cAAgB,KAErBryH,KAAKsyH,kBAAoB,IAAIzvB,GAAGqN,WAAWqiB,kBAAkB,CACzDr3B,OAAQ,SAAC/iD,WACCq6E,EAAY,WACd,IAAMC,EAAGC,EAAQC,uBACb71B,EAAS+F,GAAGoF,OAAOpL,cAIvB,OAHAC,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOrK,kBAAkB,EAAE60B,EAAI1sD,QAC9E+2B,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOtK,sBAAsB80B,EAAIn4B,QAChFwC,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOvK,yBAAyB+0B,EAAIh3F,GAAIg3F,EAAI/2F,KAI/F,GAAmB,SAAfyc,EAAMt4C,OAAey+F,EAAU+zB,cAAe,CAC9C,IAAMO,EAASJ,IACXK,EAAS,CAAC16E,EAAMyuB,GAAIzuB,EAAM2uB,GAAI,EAAG,GAOrC,OANA+rD,EAAShwB,GAAGoF,OAAOtL,uBAAuBi2B,EAAQC,UAC7CR,cAAgB,CACjB52F,EAAGo3F,EAAO,GACVn3F,EAAGm3F,EAAO,GACV3iC,SAAU/3C,EAAMijD,YAKxB,GAAI,MAAOjjD,GAAS,OAAQA,EAAO,CAE/B,IAAM26E,EAASN,IAEf,GAAI,MAAOr6E,EAAO,CACd,IAAI46E,EAAS,CAAC56E,EAAM1c,EAAG0c,EAAMzc,EAAG,EAAG,GACnCq3F,EAASlwB,GAAGoF,OAAOtL,uBAAuBm2B,EAAQC,GAClD56E,EAAM1c,EAAIs3F,EAAO,GACjB56E,EAAMzc,EAAIq3F,EAAO,GAErB,GAAI,OAAQ56E,EAAO,CACfA,EAAMwuB,GAAE23B,EAAQ+zB,cAAc52F,EAC9B0c,EAAM0uB,GAAEy3B,EAAQ+zB,cAAc32F,EAC9Byc,EAAMgjD,UAASmD,EAAQ+zB,cAAcniC,SACrC,IAAI8iC,EAAS,CAAC76E,EAAMyuB,GAAIzuB,EAAM2uB,GAAI,EAAG,GACrCksD,EAASnwB,GAAGoF,OAAOtL,uBAAuBm2B,EAAQE,GAClD76E,EAAMyuB,GAAKosD,EAAO,GAClB76E,EAAM2uB,GAAKksD,EAAO,KAEbX,cAAgB,CACjB52F,EAAG0c,EAAMyuB,GACTlrC,EAAGyc,EAAM2uB,GACTopB,SAAU/3C,EAAMijD,YAMxB,CAAC,OAAQ,QAAQ34E,SAAS01B,EAAMt4C,QAAIy+F,EAC/B+zB,cAAgBl6E,GAEzBztC,EAAEwwF,OAAO/iD,MAIjBn4C,KAAKgjF,QAAU,KACfhjF,KAAKu7F,WAAY,EAGjBv7F,KAAK4xH,kBAAoB,CACrBqB,KAAM,CACF1+B,UAAW,SAACn5E,KAEH83G,aACAC,aAAatD,GAAMyB,MAExB,IAAM5c,EAAQpW,EAAQ9R,YAAY4mC,cAE5Bj7E,EAAa,CACf4tB,MAAKu4B,EAAOoyB,oBAAoB3qD,OAMpC,GAJA5tB,EAAM8iD,eAA8B,UAAbyZ,EACvBv8D,EAAM+3C,SAAW90E,EAAI80E,SACrB/3C,EAAMi9C,cAAgBh6E,EAAIg6E,YAET,gBAAbh6E,EAAIvb,OAEC07F,WAAY,EACjBpjD,EAAMt4C,KAAO,WAEV,CAAA,IAAIub,EAAIu1E,OAGR,MAAiB,cAAbv1E,EAAIvb,QAEN07F,WAAY,EACjBpjD,EAAMt4C,KAAO,OAERyyH,kBAAkB14G,QAAQu+B,UAC1Bk7E,4BAGL,EAXAl7E,EAAMt4C,KAAO,OAcjBs4C,EAAM1c,EAAIrgB,EAAI62E,KACd95C,EAAMzc,EAAItgB,EAAI82E,OAETogC,kBAAkB14G,QAAQu+B,IAEnCk5E,UAAW,SAACvnC,EAAQ3xC,EAAOu8D,EAAUyc,KAGrCc,QAAS,SAACnoC,EAAQ3xC,EAAO+yC,MAI7B76D,KAAM,CACFkkE,UAAW,SAACp8C,GAKR,KAHK+6E,aACAC,aAAatD,GAAM2B,MAEL,gBAAfr5E,EAAMt4C,KAAwB,CAC9B,IAAMyzH,EAAKh1B,EAAQi1B,uBAAuB,CAAC93F,EAAG0c,EAAM85C,KAAMv2D,EAAGyc,EAAM+5C,OACnExnF,EAAE8oH,OAAOz8G,KAAKuK,MAAMgyG,EAAM73F,GAAI1kB,KAAKuK,MAAMgyG,EAAM53F,SAE5C,GAAmB,cAAfyc,EAAMt4C,KAEb,cADKwzH,uBAMbhC,UAAW,SAACvnC,EAAQ3xC,EAAOu8D,EAAUyc,KAGrCc,QAAS,SAACnoC,EAAQ3xC,EAAO+yC,MAI7BwjB,KAAM,CACFna,UAAW,SAACp8C,GAKR,KAHK+6E,aACAC,aAAatD,GAAM4B,MAEL,gBAAft5E,EAAMt4C,KAAwB,CAC9B,IAAMyzH,EAAKh1B,EAAQi1B,uBAAuB,CAAC93F,EAAG0c,EAAM85C,KAAMv2D,EAAGyc,EAAM+5C,OACnExnF,EAAE+oH,OAAO18G,KAAKuK,MAAMgyG,EAAM73F,GAAI1kB,KAAKuK,MAAMgyG,EAAM53F,GAAC4iE,EAAQqyB,qBAAqBr2B,YAE1E,GAAmB,cAAfniD,EAAMt4C,KAEb,cADKwzH,uBAMbhC,UAAW,SAACvnC,EAAQ3xC,EAAOu8D,EAAUyc,KAGrCc,QAAS,SAACnoC,EAAQ3xC,EAAO+yC,MAI7BwoC,MAAO,CACHn/B,UAAW,SAACp8C,KAEH+6E,aACAC,aAAatD,GAAM6B,OACxB,IAAM4B,EAAKh1B,EAAQi1B,uBAAuB,CAAC93F,EAAG0c,EAAM85C,KAAMv2D,EAAGyc,EAAM+5C,OAEhD,gBAAf/5C,EAAMt4C,QACD07F,WAAY,EACjB7wF,EAAEipH,QAAQ,OAAQL,EAAM73F,EAAG63F,EAAM53F,EAAC4iE,EAAOqyB,qBAAqBr2B,QAExC,gBAAfniD,EAAMt4C,KACb6K,EAAEipH,QAAQ,OAAQL,EAAM73F,EAAG63F,EAAM53F,EAAC4iE,EAAOqyB,qBAAqBr2B,OAExC,cAAfniD,EAAMt4C,SACR07F,WAAY,EACjB7wF,EAAEipH,QAAQ,KAAML,EAAM73F,EAAG63F,EAAM53F,EAAC4iE,EAAOqyB,qBAAqBr2B,SACvD+4B,wBAIbhC,UAAW,SAACvnC,EAAQ3xC,EAAOu8D,EAAUyc,KAGrCc,QAAS,SAACnoC,EAAQ3xC,EAAO+yC,MAI7B0oC,KAAM,CACFr/B,UAAW,SAACp8C,KACHg7E,aAAatD,GAAMiC,MACpB,CAAC,OAAQ,UAAUrvG,SAAS01B,EAAMw4C,WAC7BwiC,aAAatD,GAAMgE,gBACnBpD,mBAAmBh1F,GAAK0c,EAAMg6C,KAC9Bs+B,mBAAmB/0F,GAAKyc,EAAMi6C,KAC9Bs+B,oBAAsB5/G,KAAKC,MAAMD,KAAK4c,UAAS4wE,EAAMmyB,uBACrDO,oBAAqB,IACrBD,kBAAmB,IACnBmC,UAAS,IACQ,cAAf/6E,EAAMt4C,MAAoBy+F,EAC5B+0B,uBAGbhC,UAAW,SAACvnC,EAAQ3xC,EAAOu8D,EAAUyc,KAGrCc,QAAS,SAACnoC,EAAQ3xC,EAAO+yC,MAI7B2mC,UAAW,CACPt9B,UAAW,SAACp8C,KACHg7E,aAAatD,GAAMiC,MACpB,CAAC,OAAQ,UAAUrvG,SAAS01B,EAAMw4C,YAC7BwiC,aAAatD,GAAMgE,gBACnBpD,mBAAmBh1F,GAAK0c,EAAMg6C,KAC9Bs+B,mBAAmB/0F,GAAKyc,EAAMi6C,KAC9Bs+B,oBAAsB5/G,KAAKC,MAAMD,KAAK4c,UAAS4wE,EAAMmyB,uBACrDO,oBAAqB,IACrBD,kBAAmB,IACnBmC,UAAS,KAGtB7B,UAAW,SAACvnC,EAAQ3xC,EAAOu8D,EAAUyc,GAChB,UAAbzc,EAAoBpW,EACf+0B,wBAEAF,aAAatD,GAAMiC,OAGhCG,QAAS,SAACnoC,EAAQ3xC,EAAO+yC,KAChBmoC,wBAGbrB,KAAM,CACFz9B,UAAW,SAACp8C,GAGR,KAFKg7E,aAAatD,GAAMiE,MAEH,SAAjB37E,EAAMw4C,SAAsBx4C,EAAMi9C,aAA2B,GAAZj9C,EAAMg6C,GAAS,CAEhE,IAAM4hC,EAAU57E,EAAMy2C,MAAQz2C,EAAM85C,KAC9B+hC,EAAU77E,EAAM02C,MAAQ12C,EAAM+5C,OAE/B+hC,mBAAmB97E,EAAMg6C,GAAK,IAAKh6C,EAAMy7C,UAAYmgC,EAAS57E,EAAM07C,UAAYmgC,KAChFtD,oBAAsB5/G,KAAKC,MAAMD,KAAK4c,UAAS4wE,EAAMmyB,uBACrDyD,mBAAoB,IACpBhB,aAEAlD,aAAa,CACdmE,QAAS,CAAC,SACV75B,MAAKgE,EAAOmyB,mBAAmBn2B,MAC/Bv0B,MAAKu4B,EAAOmyB,mBAAmB1qD,UAI3CsrD,UAAW,SAACvnC,EAAQ3xC,EAAOu8D,EAAUyc,GAChB,MAAbzc,EAAgBpW,EACX+0B,wBAEAF,aAAatD,GAAMiE,OAGhC7B,QAAS,SAACnoC,EAAQ3xC,EAAO+yC,KAChBmoC,wBAGbe,OAAQ,CACJ7/B,UAAW,SAACp8C,GAER,KADKg7E,aAAatD,GAAM0B,MAEnB,CAAC,OAAQ,SAAS9uG,SAAS01B,EAAMw4C,UAAYx4C,EAAMi9C,aACrC,cAAfj9C,EAAMt4C,KACR,CACE,IAAMyzH,EAAKh1B,EAAQi1B,uBAAuB,CAAC93F,EAAG0c,EAAM85C,KAAMv2D,EAAGyc,EAAM+5C,OAC7DmiC,EAAW/1B,EAAQyxB,SAASuE,WAAWhB,EAAM73F,EAAG63F,EAAM53F,GAC5DhxB,EAAE6pH,OAAOF,EAA4B,cAAfl8E,EAAMt4C,QACvBoxH,WAAWuD,mBAAmB,CAC/B/4F,EAAG0c,EAAM85C,KACTv2D,EAAGyc,EAAM+5C,KACT7+B,MAAOghE,EACPhF,UAA0B,cAAfl3E,EAAMt4C,OAGF,cAAfs4C,EAAMt4C,MAAoBy+F,EACrB+0B,wBAIjBhC,UAAW,SAACvnC,EAAQ3xC,EAAOu8D,EAAUyc,KAGrCc,QAAS,SAACnoC,EAAQ3xC,EAAO+yC,MAI7B6mC,UAAW,CACPx9B,UAAW,SAACp8C,GAER,KADKg7E,aAAatD,GAAM0B,MAEnB,CAAC,OAAQ,SAAS9uG,SAAS01B,EAAMw4C,UAAYx4C,EAAMi9C,aACrC,cAAfj9C,EAAMt4C,KACR,CACE,IAAMyzH,EAAKh1B,EAAQi1B,uBAAuB,CAAC93F,EAAG0c,EAAM85C,KAAMv2D,EAAGyc,EAAM+5C,OAC7DmiC,EAAW/1B,EAAQyxB,SAASuE,WAAWhB,EAAM73F,EAAG63F,EAAM53F,GAC5DhxB,EAAE6pH,OAAOF,EAA4B,cAAfl8E,EAAMt4C,QACvBoxH,WAAWuD,mBAAmB,CAC/B/4F,EAAG0c,EAAM85C,KACTv2D,EAAGyc,EAAM+5C,KACT7+B,MAAOghE,EACPhF,UAA0B,cAAfl3E,EAAMt4C,SAI7BwxH,UAAW,SAACvnC,EAAQ3xC,EAAOu8D,EAAUyc,GAChB,QAAbzc,EAAkBpW,EACb+0B,wBAEAF,aAAatD,GAAM0B,OAGhCU,QAAS,SAACnoC,EAAQ3xC,EAAO+yC,KAChBmoC,wBAGbxrB,OAAQ,CACJtT,UAAW,SAACp8C,GAGR,KAFKg7E,aAA8B,SAAjBh7E,EAAMw4C,OAAoBk/B,GAAM4E,SAAW5E,GAAM6E,QAEhD,gBAAfv8E,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAiB2N,EAClDkyB,gBAAkB1/G,KAAKC,MAAMD,KAAK4c,UAAS4wE,EAAMmyB,0BACnD,GAAqB,SAAjBt4E,EAAMw4C,SAAsBx4C,EAAMi9C,aAAWkJ,EAASkyB,gBAAiB,CAG9E,IAAMuD,EAAU57E,EAAMy2C,MAAQz2C,EAAM85C,KAC9B+hC,EAAU77E,EAAM02C,MAAQ12C,EAAM+5C,KAE9ByiC,EAAY,CACdl5F,EAAC6iE,EAAO6xB,YAAc,EACtBz0F,EAAC4iE,EAAO8xB,aAAe,GAGrBwE,EAAgB/xB,GAAGqF,KAAK5N,MAAMq6B,EAAW,CAACl5F,EAAG0c,EAAMy7C,UAAYmgC,EAASr4F,EAAGyc,EAAM07C,UAAYmgC,IAE/Fa,EADahyB,GAAGqF,KAAK5N,MAAMq6B,EAAW,CAACl5F,EAAG0c,EAAMy2C,MAAQmlC,EAASr4F,EAAGyc,EAAM02C,MAAQmlC,IAC3DY,IAGtBnE,mBAAqB3/G,KAAKC,MAAMD,KAAK4c,UAAS4wE,EAAMkyB,oBACpDC,mBAAmBn2B,OAASu6B,EAE/Bv2B,EAAO9R,YAAYqoB,UAAU,aACtB4b,mBAAmBn2B,MAAQvjF,KAAK4gD,MAAK2mC,EAAMmyB,mBAAmBn2B,MAAQvjF,KAAK2uD,GAAK,GAAK3uD,KAAK2uD,GAAK,EACpGmvD,EAASv2B,EAAQmyB,mBAAmBn2B,MAAKgE,EAAQkyB,gBAAgBl2B,SAGhEm2B,mBAAmBn2B,MAAKgE,EAAQw2B,iBAAgBx2B,EAAMmyB,mBAAmBn2B,OAG9E,IAAIwC,EAAS+F,GAAGoF,OAAOpL,cACvBC,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOvK,wBAAwBi3B,EAAUl5F,EAAGk5F,EAAUj5F,IAErGohE,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOtK,qBAAqBk3B,IAC3E/3B,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOvK,yBAAyBi3B,EAAUl5F,GAAIk5F,EAAUj5F,IAGvG,IAAIupD,EAAS,GAAMwrC,mBAAmBh1F,IAAQg1F,mBAAmB/0F,EAAG,EAAG,GACvEupD,EAAS4d,GAAGoF,OAAOtL,uBAAuBG,EAAQ7X,KAC7CwrC,mBAAmBh1F,EAAIwpD,EAAO,KAC9BwrC,mBAAmB/0F,EAAIupD,EAAO,KAE9ByrC,oBAAsB5/G,KAAKC,MAAMD,KAAK4c,UAAS4wE,EAAMmyB,uBAErDM,kBAAmB,IACnBmD,mBAAoB,IACpBhB,aAEAlD,aAAa,CACdmE,QAAS,CAAC,SACVpuD,MAAKu4B,EAAOmyB,mBAAmB1qD,MAC/Bu0B,MAAKgE,EAAOmyB,mBAAmBn2B,UAK3C+2B,UAAW,SAACvnC,EAAQ3xC,EAAOu8D,EAAUyc,GAC7B,CAAC,IAAK,UAAW,UAAW,SAAU,UAAW,eAAgB,eAAgB,QAAQ1uG,SAASiyF,GAAQpW,EACrG60B,aAAatD,GAAM6E,UAEnBrB,uBAGbpB,QAAS,SAACnoC,EAAQ3xC,EAAO+yC,GACrB,IAAMwpB,EAAQpW,EAAQ9R,YAAY4mC,cAC9B,CAAC,IAAK,UAAW,UAAW,SAAU,UAAW,eAAgB,eAAgB,QAAQ3wG,SAASiyF,GAAQpW,EACrG60B,aAAatD,GAAM6E,UAEnBrB,yBAKrBrzH,KAAKoxH,sBAAwB,KAG7BpxH,KAAK+0H,oBAAqB,EAC1B/0H,KAAKg1H,YAAc,IAAInyB,GAAGqN,WAAW+kB,YAAY,CAC7Ch7B,QAAS,SAAC9hD,GAEN,GAAmB,SAAfA,EAAMt4C,KAAiB,CAErBy+F,EAAQkyB,oBACDA,gBAAkB1/G,KAAKC,MAAMD,KAAK4c,UAAS4wE,EAAMmyB,uBACjDsE,mBAAkBz2B,EAAQmyB,mBAAmBn2B,OAASvjF,KAAK2uD,GAAK,IAAO,KAG3E+qD,mBAAqB3/G,KAAKC,MAAMD,KAAK4c,UAAS4wE,EAAMkyB,kBAEzDr4E,EAAM4tB,MAAQhvD,KAAK2K,IAAIkuG,GAAW74G,KAAK6K,IAnmCzC,GAmmCsD08E,EAAOmyB,mBAAmB1qD,MAAQ5tB,EAAM4tB,QAAKu4B,EAAUmyB,mBAAmB1qD,QAEzH0qD,mBAAmB1qD,OAAS5tB,EAAM4tB,QAClC0qD,mBAAmBn2B,OAASniD,EAAM6hD,WAClCy2B,mBAAmBn2B,MAAKgE,EAAQw2B,iBAAgBx2B,EAC5C42B,aAAY52B,EACRmyB,mBAAmBn2B,MACxB,GAAEgE,EACGy2B,mBAAqB,GAAK,IAGrCz2B,EAAOmyB,mBAAmBn2B,OAASvjF,KAAK2uD,GAAK,IAAO,IAAC44B,EAC9Cy2B,oBAAqB,GAG9B58E,EAAM6hD,SAAQsE,EAAQmyB,mBAAmBn2B,MAAKgE,EAAQkyB,gBAAgBl2B,MAIlE,IAAIwC,EAAS+F,GAAGoF,OAAOpL,cACvBC,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOvK,wBAAwBvlD,EAAM85C,KAAM95C,EAAM+5C,OAChG4K,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOrK,kBAAkBzlD,EAAM4tB,QAC9E+2B,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOtK,qBAAqBxlD,EAAM6hD,WACjF8C,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOvK,yBAAyBvlD,EAAM85C,MAAO95C,EAAM+5C,OAClG4K,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOvK,wBAAwBvlD,EAAM85C,KAAO95C,EAAMkhD,SAAUlhD,EAAM+5C,KAAO/5C,EAAMmhD,WAG9H,IAAIrU,EAAS,GAAMwrC,mBAAmBh1F,IAAQg1F,mBAAmB/0F,EAAG,EAAG,GACvEupD,EAAS4d,GAAGoF,OAAOtL,uBAAuBG,EAAQ7X,KAE7CwrC,mBAAmBh1F,EAAIwpD,EAAO,KAC9BwrC,mBAAmB/0F,EAAIupD,EAAO,KAIlCyrC,oBAAsB7tB,GAAGqD,QAAO5H,EAAMmyB,sBAGtCT,aAAa,CACdmE,QAAS,CAAC,QAAS,SACnBpuD,MAAKu4B,EAAOmyB,mBAAmB1qD,MAC/Bu0B,MAAKgE,EAAOmyB,mBAAmBn2B,UAG9B44B,aACAnC,kBAAmB,IACnBmD,mBAAoB,MAGH,QAAf/7E,EAAMt4C,OAAcy+F,EACtBkyB,gBAAkB,SAOnC,IAAMp6B,EAAc,WAChB,IAAI++B,EAAerkH,KAAKC,MAAMD,KAAK4c,UAAS4wE,EAAMmyB,qBAClDvO,EAAMkT,YAEDlB,mBAAoB,IACpBhB,WAGDiC,EAAapvD,QAAKu4B,EAAUmyB,mBAAmB1qD,OAC/CovD,EAAa76B,QAAKgE,EAAUmyB,mBAAmBn2B,OAAKgE,EAE/C0xB,aAAa,CACdmE,QAAS,CAAC,QAAS,SACnB75B,MAAKgE,EAAOmyB,mBAAmBn2B,MAC/Bv0B,MAAKu4B,EAAOmyB,mBAAmB1qD,SAK3C/lE,KAAKq1H,iBAAmB,IAAIxyB,GAAGqN,WAAWolB,aAAa,CAAEl/B,YAAAA,IACzDp2F,KAAKu1H,mBAAqB,IAAI1yB,GAAGqN,WAAWolB,aAAa,CAAEl/B,YAAAA,IAC3Dp2F,KAAKu1H,mBAAmB79B,oBAAoB,CAAC,WAG7C13F,KAAKw1H,aAAe,IAAI3yB,GAAGqN,WAAWulB,cAAc,CAChDv9B,QAAS,EACTS,MAAO,WACHjuF,EAAEgrH,YAGV11H,KAAK21H,eAAiB,IAAI9yB,GAAGqN,WAAWulB,cAAc,CAClDv9B,QAAS,EACTS,MAAO,WACHjuF,EAAEkrH,YAKV51H,KAAK61H,kBAAoB,IAAIhzB,GAAGqN,WAAWA,WAAW,CAClDza,SAAU,CACNz1F,KAAKw1H,aACLx1H,KAAK21H,eACL31H,KAAKq1H,iBACLr1H,KAAKu1H,mBACLv1H,KAAKg1H,YACL,IAAInyB,GAAGqN,WAAW4lB,kBAClB,IAAIjzB,GAAGqN,WAAW6lB,qBAG1B/1H,KAAK61H,kBAAkBjgC,aAAY,SAACz9C,GAgBhC,KAdKy4E,UAAUn1F,EAAI0c,EAAM85C,OACpB2+B,UAAUl1F,EAAIyc,EAAM+5C,KACN,cAAf/5C,EAAMt4C,MAA8C,UAAtBs4C,EAAMm4C,eAC/BtN,QAAU,OACVkxC,mBAAoB,IACpBhB,aAEH50B,EAAQtb,UAAOsb,EACRtb,QAAU,CAAEvnD,EAAG,EAAGC,EAAG,MAEzBsnD,QAAQvnD,EAAI0c,EAAM85C,OAClBjP,QAAQtnD,EAAIyc,EAAM+5C,MAGzBoM,EAAO8yB,sBAAqB9yB,EACrB8yB,sBAAsB78B,UAAUp8C,OAElC,CAEH,IAAIu8D,EAAQpW,EAAQ9R,YAAY4mC,cAE9B90B,EAAOqzB,aAAe9B,GAAMyB,KAEtB,CAAC,GAAI,QAAS,QAAQ7uG,SAASiyF,IAA4B,gBAAfv8D,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,UAC7EygC,sBAAqB9yB,EAAQszB,kBAAkBqB,OAC/C7B,sBAAsB78B,UAAUp8C,IAC9B,CAAC,IAAI11B,SAASiyF,IAA4B,gBAAfv8D,EAAMt4C,MAA2C,UAAjBs4C,EAAMw4C,UACnEygC,sBAAqB9yB,EAAQszB,kBAAkBwC,SAC/ChD,sBAAsB78B,UAAUp8C,IAC9B,CAAC,IAAI11B,SAASiyF,IAA4B,gBAAfv8D,EAAMt4C,MAA2C,WAAjBs4C,EAAMw4C,UACnEygC,sBAAqB9yB,EAAQszB,kBAAkBgC,OAC/CxC,sBAAsB78B,UAAUp8C,OAEhCg7E,aAAatD,GAAMyB,QACnB4B,YAGJ50B,EAAOqzB,aAAe9B,GAAMiC,KAEd,gBAAf35E,EAAMt4C,MAA0B,CAAC,OAAQ,UAAU4iB,SAAS01B,EAAMw4C,WAC7DygC,sBAAqB9yB,EAAQszB,kBAAkBgC,OAC/CxC,sBAAsB78B,UAAUp8C,IAC9B,CAAC,IAAI11B,SAASiyF,IAA4B,gBAAfv8D,EAAMt4C,MAA2C,UAAjBs4C,EAAMw4C,UACnEygC,sBAAqB9yB,EAAQszB,kBAAkBwC,SAC/ChD,sBAAsB78B,UAAUp8C,IACxCmmD,EACQ60B,aAAatD,GAAMiC,MAGvBxzB,EAAOqzB,aAAe9B,GAAM0B,KAEd,gBAAfp5E,EAAMt4C,MAA0B,CAAC,OAAQ,SAAS4iB,SAAS01B,EAAMw4C,WAC5DygC,sBAAqB9yB,EAAQszB,kBAAkBwC,SAC/ChD,sBAAsB78B,UAAUp8C,IAC9B,CAAC,IAAI11B,SAASiyF,IAA4B,gBAAfv8D,EAAMt4C,MAA2C,WAAjBs4C,EAAMw4C,UACnEygC,sBAAqB9yB,EAAQszB,kBAAkBgC,OAC/CxC,sBAAsB78B,UAAUp8C,IACxCmmD,EACQ60B,aAAatD,GAAM0B,MAGvBjzB,EAAOqzB,aAAe9B,GAAM2B,KAEd,gBAAfr5E,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,UACjCygC,sBAAqB9yB,EAAQszB,kBAAkBvhG,OAC/C+gG,sBAAsB78B,UAAUp8C,IAC9B,CAAC,IAAI11B,SAASiyF,IAA4B,gBAAfv8D,EAAMt4C,MAA2C,UAAjBs4C,EAAMw4C,UACnEygC,sBAAqB9yB,EAAQszB,kBAAkBwC,SAC/ChD,sBAAsB78B,UAAUp8C,IAC9B,CAAC,IAAI11B,SAASiyF,IAA4B,gBAAfv8D,EAAMt4C,MAA2C,WAAjBs4C,EAAMw4C,UACnEygC,sBAAqB9yB,EAAQszB,kBAAkBgC,OAC/CxC,sBAAsB78B,UAAUp8C,OAEhCg7E,aAAatD,GAAM2B,QACnB0B,YAGJ50B,EAAOqzB,aAAe9B,GAAM4B,KAEd,gBAAft5E,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,UACjCygC,sBAAqB9yB,EAAQszB,kBAAkBljB,OAC/C0iB,sBAAsB78B,UAAUp8C,IAC9B,CAAC,IAAI11B,SAASiyF,IAA4B,gBAAfv8D,EAAMt4C,MAA2C,UAAjBs4C,EAAMw4C,UACnEygC,sBAAqB9yB,EAAQszB,kBAAkBwC,SAC/ChD,sBAAsB78B,UAAUp8C,IAC9B,CAAC,IAAI11B,SAASiyF,IAA4B,gBAAfv8D,EAAMt4C,MAA2C,WAAjBs4C,EAAMw4C,UACnEygC,sBAAqB9yB,EAAQszB,kBAAkBgC,OAC/CxC,sBAAsB78B,UAAUp8C,OAEhCg7E,aAAatD,GAAM4B,QACnByB,YAGJ50B,EAAOqzB,aAAe9B,GAAM6B,QAE7B,CAAC,GAAI,QAAS,QAAQjvG,SAASiyF,IAA4B,gBAAfv8D,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,UAC7EygC,sBAAqB9yB,EAAQszB,kBAAkB8B,QAC/CtC,sBAAsB78B,UAAUp8C,IAC9B,CAAC,IAAI11B,SAASiyF,IAA4B,gBAAfv8D,EAAMt4C,MAA2C,UAAjBs4C,EAAMw4C,UACnEygC,sBAAqB9yB,EAAQszB,kBAAkBwC,SAC/ChD,sBAAsB78B,UAAUp8C,IAC9B,CAAC,IAAI11B,SAASiyF,IAA4B,gBAAfv8D,EAAMt4C,MAA2C,WAAjBs4C,EAAMw4C,UACnEygC,sBAAqB9yB,EAAQszB,kBAAkBgC,OAC/CxC,sBAAsB78B,UAAUp8C,OAEhCg7E,aAAatD,GAAM6B,SACnBwB,iBAWrBrwB,GAAGhqD,iBAAiB74C,KAAKmzG,OAAQ,SAAS,SAACh7D,GACvCA,EAAMozC,oBAIVvyC,YAAW,qBACF+iE,gBAAkB,IAAIlZ,GAAGiN,gBAAgB,CAC1C5yG,OAAMohG,EAAO6U,OACbne,aAAa,EACbT,UAAW,SAAC1xF,GACR,GAAe,gBAAXA,EAAEhD,MAAuC,WAAbgD,EAAE8tF,OAC9B,IACI9tF,EAAEguF,sBACJ,MAAO/J,IAIVkvC,EAEEH,kBAAkBngC,QAAQ7yF,IAEnC4xF,QAAS,SAACG,GAEJohC,EAAOz6B,cAIJ23B,WACM8C,EAAQ/B,oBACdr/B,EAAWlG,QAAMsnC,EAASxpC,YAAYqoB,UAAU,SAAW,EAAI,GAChEjgB,EAAW3C,KACX2C,EAAW1C,OAEJ8jC,EACFhG,aAAa,CACdmE,QAAS,CAAC,SACV75B,MAAK07B,EAAOvF,mBAAmBn2B,MAC/Bv0B,MAAKiwD,EAAOvF,mBAAmB1qD,UAKlCmuD,mBAAoB,IAI7Bx/B,aAAc,SAACW,GACNA,GACC2gC,EAAQz6B,cACDvY,QAAU,OACVkxC,mBAAoB,IAIrC5gC,YAAa,MAElB,GAEHtzF,KAAKi2H,YAAc,EAEnBj2H,KAAKk2H,yBAA0B,EAM/Bl2H,KAAKk0H,mBAAoB,EACzBl0H,KAAKm2H,eAAiB9hC,YAAY57C,MAElCxhC,OAAOm/G,uBAAsB,WAAM,OAAM93B,EAAD+3B,gBAExCr2H,KAAKs2H,8BA/2CAxG,EAAiB,EA+ClBryH,IAAA,6BAAR,WAEI,IAAMwB,EAASe,KAAK2wH,qBAWpB,OAVA1xH,EAAOw8B,EAAIz7B,KAAK0wH,oBAAoBj1F,EACpCx8B,EAAOy8B,EAAI17B,KAAK0wH,oBAAoBh1F,EACpCz8B,EAAO8mE,MAAQ/lE,KAAK0wH,oBAAoB3qD,MACxC9mE,EAAOq7F,MAAQt6F,KAAK0wH,oBAAoBp2B,MAEpCr7F,EAAOq7F,OAASvjF,KAAK2uD,GAAK,IAAO,GAAKzmE,EAAO8mE,MAAQ,GAAM,IAC3D9mE,EAAOw8B,EAAI1kB,KAAK4gD,MAAM14D,EAAOw8B,GAC7Bx8B,EAAOy8B,EAAI3kB,KAAK4gD,MAAM14D,EAAOy8B,IAG1Bz8B,KAGHxB,IAAA,6BAAR,sBACIuC,KAAK+vH,SAASwG,mBAAkB,aACvBrC,mBAAoB,IACpBhB,iBAILz1H,IAAA,qBAAR,SAAsB+4H,EAAgBC,GAClC,GAAID,IAAYx2H,KAAKmyH,aAAgBsE,EAArC,CAGA,IAAMC,EAAU12H,KAAKmyH,YAyBrB,GAxBAnyH,KAAKmyH,YAAcqE,EACnBx2H,KAAKk0H,mBAAoB,EACrBl0H,KAAKmyH,cAAgBtC,GAAMyB,KAC3BtxH,KAAKmzG,OAAO/rF,MAAMuwF,OAAS,YACpB33G,KAAKmyH,cAAgBtC,GAAMiC,KAClC9xH,KAAKmzG,OAAO/rF,MAAMuwF,OAAS,OACpB33G,KAAKmyH,cAAgBtC,GAAMgE,aAClC7zH,KAAKmzG,OAAO/rF,MAAMuwF,OAAS,WACpB33G,KAAKmyH,cAAgBtC,GAAM0B,KAClCvxH,KAAKmzG,OAAO/rF,MAAMuwF,OAAS,QAAUnG,EAAA+d,IAAY,qBAC1CvvH,KAAKmyH,cAAgBtC,GAAMiE,KAClC9zH,KAAKmzG,OAAO/rF,MAAMuwF,OAAS,QAAUnG,EAAAge,IAAY,kBAC1CxvH,KAAKmyH,cAAgBtC,GAAM6E,OAClC10H,KAAKmzG,OAAO/rF,MAAMuwF,OAAS,OACpB33G,KAAKmyH,cAAgBtC,GAAM4E,SAClCz0H,KAAKmzG,OAAO/rF,MAAMuwF,OAAS,WACpB33G,KAAKmyH,cAAgBtC,GAAM2B,KAClCxxH,KAAKmzG,OAAO/rF,MAAMuwF,OAAS,QAAUnG,EAAAie,IAAU,qBACxCzvH,KAAKmyH,cAAgBtC,GAAM4B,KAClCzxH,KAAKmzG,OAAO/rF,MAAMuwF,OAAS,QAAUnG,EAAAke,IAAU,qBACxC1vH,KAAKmyH,cAAgBtC,GAAM6B,QAClC1xH,KAAKmzG,OAAO/rF,MAAMuwF,OAAS,aAG3B,CAACkY,GAAMyB,KAAMzB,GAAM0B,KAAM1B,GAAM2B,KAAM3B,GAAM4B,KAAM5B,GAAM6B,OAAOjvG,SAASziB,KAAK2xH,YAAa,CACzF,IAAMgF,EAAY,CAAC9G,GAAMiC,KAAMjC,GAAMgE,cAAcpxG,SAASi0G,GACtDE,EAAgB,CAAC/G,GAAMiC,KAAMjC,GAAMgE,cAAcpxG,SAASziB,KAAKmyH,cAChEwE,GAAaC,GACd52H,KAAKq1H,iBAAiB59B,yBAAyB,CAAC,QAAS,MAAO,UAEhEk/B,IAAcC,GACd52H,KAAKq1H,iBAAiB59B,yBAAyB,CAAC,UAIpDz3F,KAAKmyH,cAAgBtC,GAAM0B,MAC3BvxH,KAAKixH,WAAWuD,mBAAmB,CAACnF,WAAW,QAW/C5xH,IAAA,2BAAR,SAA4Bo5H,EAAiBC,EAAiBC,GAC1D,IAEIC,EAFSjgH,KAAK82B,KAAK7tC,KAAKywH,mBAAmB1qD,OAE1BhvD,KAAKsmB,IAAIw5F,GAC9BG,GAAWH,EAAU,EAAI,GAAI,EAC7BG,EAAUjgH,KAAK4gD,MAAMq/D,GACrBA,GAAWjgH,KAAKsmB,IAAIw5F,GACpB,IAAMI,EAAWlgH,KAAK2K,IAAIkuG,GAAW74G,KAAK6K,IA7JhC,GA6J+C7K,KAAKwmB,IAAI,EAAGy5F,KAGrE,GAAIC,IAAaj3H,KAAKywH,mBAAmB1qD,MACrC,OAAO,EAIX,IAAMmxD,EAAkBD,EAAWj3H,KAAKywH,mBAAmB1qD,MAC3D/lE,KAAKywH,mBAAmB1qD,MAAQkxD,EAEhC,IAAIn6B,EAAS+F,GAAGoF,OAAOpL,cACvBC,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOvK,wBAAwBo5B,EAASC,IACvFj6B,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOrK,kBAAkBs5B,IACxEp6B,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOvK,yBAAyBo5B,GAAUC,IAEzF,IAAI9xC,EAAS,CAACjlF,KAAKywH,mBAAmBh1F,EAAGz7B,KAAKywH,mBAAmB/0F,EAAG,EAAG,GAOvE,OANAupD,EAAS4d,GAAGoF,OAAOtL,uBAAuBG,EAAQ7X,GAClDjlF,KAAKywH,mBAAmBh1F,EAAIwpD,EAAO,GACnCjlF,KAAKywH,mBAAmB/0F,EAAIupD,EAAO,GAEnCjlF,KAAK+wH,kBAAmB,GAEjB,KAUHtzH,IAAA,wBAAR,SAAyB05H,EAAwBC,EAAwBC,GACrE,GAAIF,EAAW78B,QAAU88B,EAAW98B,MAKhC,OAJA68B,EAAWpxD,MAAQ88B,GAAG2E,IAAI2vB,EAAWpxD,MAAOqxD,EAAWrxD,MAAOsxD,GAC9DF,EAAW17F,EAAIonE,GAAG2E,IAAI2vB,EAAW17F,EAAG27F,EAAW37F,EAAG47F,GAClDF,EAAWz7F,EAAImnE,GAAG2E,IAAI2vB,EAAWz7F,EAAG07F,EAAW17F,EAAG27F,QAClDF,EAAW78B,MAAQuI,GAAG2E,IAAI2vB,EAAW78B,MAAO88B,EAAW98B,MAAO+8B,IAIlE,IAAM3vC,EAAI1nF,KAAK+vH,SAAShF,WAClBpjC,EAAI3nF,KAAK+vH,SAAS/E,YAGlBsM,EAAat3H,KAAKu3H,uBAAuB,CAC3C97F,EAAGisD,EAAI,EACPhsD,EAAGisD,EAAI,GACRwvC,GACGK,EAAax3H,KAAKu3H,uBAAuB,CAC3C97F,EAAGisD,EAAI,EACPhsD,EAAGisD,EAAI,GACRyvC,GAGHD,EAAW17F,EAAIonE,GAAG2E,IAAI8vB,EAAW77F,EAAI+7F,EAAW/7F,EAAG47F,GACnDF,EAAWz7F,EAAImnE,GAAG2E,IAAI8vB,EAAW57F,EAAI87F,EAAW97F,EAAG27F,GAGnDF,EAAWpxD,MAAQ88B,GAAG2E,IAAI2vB,EAAWpxD,MAAOqxD,EAAWrxD,MAAOsxD,GAC9DF,EAAW78B,MAAQuI,GAAG2E,IAAI2vB,EAAW78B,MAAO88B,EAAW98B,MAAO+8B,GAG9D,IAAMI,EAAWz3H,KAAKu3H,uBAAuB,CACzC97F,GAAIisD,EAAI,EACRhsD,GAAIisD,EAAI,GACTwvC,GACHA,EAAW17F,EAAIg8F,EAASh8F,EACxB07F,EAAWz7F,EAAI+7F,EAAS/7F,KAGpBj+B,IAAA,eAAR,WACQuC,KAAKuwH,iBACLvwH,KAAKuwH,gBAAiB,EACtBvwH,KAAKiwH,mBAAmBroC,MAAQ5nF,KAAKmwH,YACrCnwH,KAAKiwH,mBAAmBpoC,OAAS7nF,KAAKowH,cAE1CpwH,KAAK03H,cAAc13H,KAAKkwH,oBAOpBzyH,IAAA,sBAAR,WAII,IAAMk6H,EAAoB,CACtB,CAAC,EAAG,GACJ,CAAC33H,KAAKmwH,YAAa,GACnB,CAACnwH,KAAKmwH,YAAanwH,KAAKowH,cACxB,CAAC,EAAGpwH,KAAKowH,eAGPqC,EAAMzyH,KAAK2yH,uBAGb71B,EAAS+F,GAAGoF,OAAOpL,cACvBC,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOrK,kBAAkB,EAAE60B,EAAI1sD,QAC9E+2B,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOtK,sBAAsB80B,EAAIn4B,QAChFwC,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOvK,yBAAyB+0B,EAAIh3F,GAAIg3F,EAAI/2F,IAG3F,IAAK,IAAI7+B,EAAI,EAAGA,EAAI86H,EAAkB76H,OAAQD,IAAK,CAC/C,IAAIg2H,EAAS,CAAC8E,EAAkB96H,GAAG,GAAI86H,EAAkB96H,GAAG,GAAI,EAAG,GAGnE,KACM,IAHNg2H,EAAShwB,GAAGoF,OAAOtL,uBAAuBG,EAAQ+1B,IAGhC,IAAMA,EAAO,IAAM7yH,KAAK+vH,SAAShF,YAC3C,GAAK8H,EAAO,IAAMA,EAAO,IAAM7yH,KAAK+vH,SAAS/E,aAGjD,OAAO,EAGf,OAAO,KAGHvtH,IAAA,sBAAR,SAAuB4+F,GACnB,IAAM3U,EAAI1nF,KAAK+vH,SAAShF,WAClBpjC,EAAI3nF,KAAK+vH,SAAS/E,YAElByH,EAAMzyH,KAAK2yH,uBAwBb,GAtBAF,EAAI1sD,OAAS,GAAoB,IAAd0sD,EAAI1sD,OAA6B,IAAd0sD,EAAIn4B,MAC1C+B,EAAIsP,uBAAwB,GAE5BtP,EAAIsP,uBAAwB,EAC5BtP,EAAIuP,sBAAyB,OAOjCvP,EAAIqP,OAEI1rG,KAAK8wH,WACLz0B,EAAIC,UAAY,mBAChBD,EAAIE,SAAS,EAAG,EAAGv8F,KAAKmwH,YAAanwH,KAAKowH,eAE1C/zB,EAAI+uB,UAAU,EAAG,EAAGprH,KAAKmwH,YAAanwH,KAAKowH,cAK3CpwH,KAAK8wH,UAAW,CAChBz0B,EAAIqP,OAEJrP,EAAIwP,UAAU4mB,EAAIh3F,EAAGg3F,EAAI/2F,GACzB2gE,EAAIt2B,MAAM0sD,EAAI1sD,MAAO0sD,EAAI1sD,OACzBs2B,EAAIwL,OAAO4qB,EAAIn4B,OAEf+B,EAAIsP,uBAAwB,EAI5BtP,EAAI8pB,YAAc,GAClB9pB,EAAI0O,UACA/qG,KAAKkxH,aAHU,EAIDuB,EAAI1sD,OAJH,EAKD0sD,EAAI1sD,MAClB2hB,EAAIkwC,EAAiBnF,EAAI1sD,MACzB4hB,EAAIiwC,EAAiBnF,EAAI1sD,OAE7Bs2B,EAAI8pB,YAAc,EAGlB9pB,EAAImR,yBAA2B,kBAC/BnR,EAAI0O,UAAU/qG,KAAKkxH,YAAa,EAAG,EAAGxpC,EAAGC,GAEzC0U,EAAIyP,UAORzP,EAAIwP,UAAU4mB,EAAIh3F,EAAGg3F,EAAI/2F,GACzB2gE,EAAIt2B,MAAM0sD,EAAI1sD,MAAO0sD,EAAI1sD,OACzBs2B,EAAIwL,OAAO4qB,EAAIn4B,OAGf,IADA,IAAMu9B,EAAW73H,KAAK+vH,SAAS+H,gBACtBj7H,EAAI,EAAGA,EAAIg7H,EAAS/6H,OAAQD,IAC7Bg7H,EAASh7H,GAAG28G,QAAU,IACtBnd,EAAI8pB,YAAc0R,EAASh7H,GAAG28G,QAC9Bnd,EAAImR,yBAA2BqqB,EAASh7H,GAAG8sH,WAEvCkO,EAASh7H,GAAG+rF,OAAO4kC,cACfxtH,KAAKqwH,gBAAgBzoC,QAAUiwC,EAASh7H,GAAG+rF,OAAOhB,OAAS5nF,KAAKqwH,gBAAgBxoC,SAAWgwC,EAASh7H,GAAG+rF,OAAOf,QAC9G7nF,KAAKqwH,gBAAgBzoC,MAAQiwC,EAASh7H,GAAG+rF,OAAOhB,MAChD5nF,KAAKqwH,gBAAgBxoC,OAASgwC,EAASh7H,GAAG+rF,OAAOf,QAEjD7nF,KAAKswH,aAAalF,UAAU,EAAG,EAAGprH,KAAKqwH,gBAAgBzoC,MAAO5nF,KAAKqwH,gBAAgBxoC,QAEvF7nF,KAAKswH,aAAavlB,UAAU8sB,EAASh7H,GAAG+rF,OAAQ,EAAG,GACnDivC,EAASh7H,GAAG+rF,OAAO4kC,aAAayF,KAAKjzH,KAAKswH,cAC1Cj0B,EAAI0O,UAAU/qG,KAAKqwH,gBAAiB,EAAG,EAAG3oC,EAAGC,IAE7C0U,EAAI0O,UAAU8sB,EAASh7H,GAAG+rF,OAAQ,EAAG,EAAGlB,EAAGC,IAIvD0U,EAAI8pB,YAAc,EAKtB9pB,EAAIyP,UAGA+jB,GAAM6E,SAAW10H,KAAKmyH,aAAetC,GAAM4E,WAAaz0H,KAAKmyH,YAC7DnyH,KAAKixH,WAAW8G,cAAc,CAC1B1I,WAAW,EACXjkB,SAAUqnB,EAAIn4B,MAAQvjF,KAAK2uD,GAAK,MAGpC1lE,KAAKixH,WAAW8G,cAAc,CAC1B1I,WAAW,OAKf5xH,IAAA,+BAAR,SAAgCiN,GAC5B,IAAM+nH,EAAMzyH,KAAK2yH,uBACb71B,EAAS+F,GAAGoF,OAAOpL,cACvBC,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOrK,kBAAkB,EAAE60B,EAAI1sD,QAC9E+2B,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOtK,sBAAsB80B,EAAIn4B,QAChFwC,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOvK,yBAAyB+0B,EAAIh3F,GAAIg3F,EAAI/2F,IAE3F,IAAIm3F,EAAS,CAACnoH,EAAE+wB,EAAG/wB,EAAEgxB,EAAG,EAAG,GAG3B,MAAO,CACHD,GAHJo3F,EAAShwB,GAAGoF,OAAOtL,uBAAuBG,EAAQ+1B,IAGpC,GACVn3F,EAAGm3F,EAAO,OAIVp1H,IAAA,+BAAR,SAAgCiN,EAAcuhG,GAC1C,IAAInP,EAAS+F,GAAGoF,OAAOpL,cACvBC,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOvK,wBAAwBuO,EAAaxwE,EAAGwwE,EAAavwE,IAC3GohE,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOtK,qBAAqBsO,EAAa3R,QACxFwC,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOrK,kBAAkBqO,EAAalmC,QAErF,IAAI8sD,EAAS,CAACnoH,EAAE+wB,EAAG/wB,EAAEgxB,EAAG,EAAG,GAG3B,MAAO,CACHD,GAHJo3F,EAAShwB,GAAGoF,OAAOtL,uBAAuBG,EAAQ+1B,IAGpC,GACVn3F,EAAGm3F,EAAO,OAIVp1H,IAAA,qBAAR,SAAsBu8F,EAAkBg+B,EAA0BC,GAC9D,IAAI7sB,EAAsB,IAAXpR,EAAiBjjF,KAAK2uD,GAC/BwyD,EAASnhH,KAAKsmB,IAAI+tE,EAAW4sB,GAOnC,OANajhH,KAAK6K,IAAIs2G,EAAQF,EAAmBE,IAErCD,IACR7sB,EAAWr0F,KAAK4gD,MAAMyzC,EAAW4sB,GAAoBA,GAGlD5sB,EAAW,IAAMr0F,KAAK2uD,MAQzBjoE,IAAA,yBAAR,SAA0Bu8F,GAOtB,OANAA,GAAuB,EAAIjjF,KAAK2uD,IACjB3uD,KAAK2uD,GAChBs0B,GAAY,EAAIjjF,KAAK2uD,GACds0B,GAAYjjF,KAAK2uD,KACxBs0B,GAAY,EAAIjjF,KAAK2uD,IAElBs0B,KAGHv8F,IAAA,4BAAR,WACIuC,KAAKoxH,sBAAwB,KAC7BpxH,KAAKmzH,aAAanzH,KAAK2xH,YACvB3xH,KAAKkzH,UAAS,MAGVz1H,IAAA,iBAAR,SAAkB06H,GACdn4H,KAAKk2H,yBAA0B,EAC3BiC,IACAn4H,KAAKk0H,mBAAoB,MAIzBz2H,IAAA,mBAAR,sBACIwZ,OAAOm/G,uBAAsB,WAAM,OAAM93B,EAAD+3B,gBACxC,IAAM+B,EAAWlnB,GAAU9zB,WACrBi7C,EAAWr4H,KAAKk0H,kBAAoBkE,EAGpC1hC,EAAUrC,YAAY57C,MACtB6/E,EAAkD,IAAjC5hC,EAAU12F,KAAKm2H,gBAAuB,IAC7Dn2H,KAAKm2H,eAAiBz/B,GAElB12F,KAAKk2H,yBAA2BmC,KAChCr4H,KAAKk2H,yBAA0B,EAC/Bl2H,KAAKu4H,YAAYD,OAIjB76H,IAAA,oBAAR,SAAqB66H,GAEjB,IAAMF,EAAWlnB,GAAU9zB,WACrBi7C,EAAWr4H,KAAKk0H,kBAAoBkE,GACtCp4H,KAAK0wH,oBAAoB3qD,QAAU/lE,KAAKywH,mBAAmB1qD,OAC3D/lE,KAAK0wH,oBAAoBj1F,IAAMz7B,KAAKywH,mBAAmBh1F,GACvDz7B,KAAK0wH,oBAAoBh1F,IAAM17B,KAAKywH,mBAAmB/0F,EAG3D,IACK17B,KAAKgxH,qBAEFhxH,KAAK0wH,oBAAoB3qD,QAAU/lE,KAAKywH,mBAAmB1qD,OAC3DhvD,KAAKsmB,IAAIr9B,KAAK0wH,oBAAoB3qD,MAAQ/lE,KAAKywH,mBAAmB1qD,OAAS,KAAQ/lE,KAAKywH,mBAAmB1qD,OAG/G/lE,KAAK0wH,oBAAoB3qD,MAAQ/lE,KAAKywH,mBAAmB1qD,MACzD/lE,KAAK0wH,oBAAoBj1F,EAAIz7B,KAAKywH,mBAAmBh1F,EACrDz7B,KAAK0wH,oBAAoBh1F,EAAI17B,KAAKywH,mBAAmB/0F,EACrD17B,KAAK0wH,oBAAoBp2B,MAAQt6F,KAAKywH,mBAAmBn2B,MACrDt6F,KAAK+wH,mBACL/wH,KAAK+wH,kBAAmB,EACxB/wH,KAAK8wH,UAAY9wH,KAAKw4H,iBAG1Bx4H,KAAKixH,WAAWkC,aAAa,CAAC/D,OAAQpvH,KAAKi2H,YAAcj2H,KAAK0wH,oBAAoB3qD,aAC/E,IACF/lE,KAAK0wH,oBAAoBj1F,IAAMz7B,KAAKywH,mBAAmBh1F,GAAK1kB,KAAKsmB,IAAIr9B,KAAK0wH,oBAAoBj1F,EAAIz7B,KAAKywH,mBAAmBh1F,GAAK,MAC/Hz7B,KAAK0wH,oBAAoBh1F,IAAM17B,KAAKywH,mBAAmB/0F,GAAK3kB,KAAKsmB,IAAIr9B,KAAK0wH,oBAAoBh1F,EAAI17B,KAAKywH,mBAAmB/0F,GAAK,MAE5H17B,KAAK0wH,oBAAoB3qD,QAAU/lE,KAAKywH,mBAAmB1qD,OAC3DhvD,KAAKsmB,IAAIr9B,KAAK0wH,oBAAoB3qD,MAAQ/lE,KAAKywH,mBAAmB1qD,OAAS,KAAQ/lE,KAAKywH,mBAAmB1qD,OAG/G/lE,KAAK0wH,oBAAoB3qD,MAAQ/lE,KAAKywH,mBAAmB1qD,MACzD/lE,KAAK0wH,oBAAoBj1F,EAAIz7B,KAAKywH,mBAAmBh1F,EACrDz7B,KAAK0wH,oBAAoBh1F,EAAI17B,KAAKywH,mBAAmB/0F,EACrD17B,KAAK0wH,oBAAoBp2B,MAAQt6F,KAAKywH,mBAAmBn2B,MACzDt6F,KAAMgxH,oBAAqB,EACvBhxH,KAAK+wH,mBACL/wH,KAAK+wH,kBAAmB,EACxB/wH,KAAK8wH,UAAY9wH,KAAKw4H,iBAG1Bx4H,KAAKixH,WAAWkC,aAAa,CAAC/D,OAAQpvH,KAAKi2H,YAAcj2H,KAAK0wH,oBAAoB3qD,YAC/E,CACH/lE,KAAKkzH,WACL,IAAMmE,EAActgH,KAAK6K,IAAI,EAvfjB,GAufsC02G,GAClDt4H,KAAKy4H,gBAAgBz4H,KAAK0wH,oBAAqB1wH,KAAKywH,mBAAoB4G,GACxEr3H,KAAK8wH,WAAY,EACjB9wH,KAAKixH,WAAWkC,aAAa,CAAC/D,OAAQpvH,KAAKi2H,YAAcj2H,KAAK0wH,oBAAoB3qD,QActF,GAXI/lE,KAAKgjF,SAAWhjF,KAAKmyH,aAAetC,GAAMyB,OAAStxH,KAAK6wH,cACxD7wH,KAAKixH,WAAWkC,aAAa,CACzB13F,EAAGz7B,KAAKgjF,QAAQvnD,EAChBC,EAAG17B,KAAKgjF,QAAQtnD,EAChB2zF,WAAW,IAGfrvH,KAAKixH,WAAWkC,aAAa,CAAC9D,WAAW,IAIzCgJ,EAAU,CAEVr4H,KAAKk0H,kBAAoBkE,EACzB,IAAMtwG,EAAQusE,YAAY57C,MAC1Bz4C,KAAK04H,SACL14H,KAAKoyH,WAAavvB,GAAG2E,IAAIxnG,KAAKoyH,WAAY/9B,YAAY57C,MAAQ3wB,EAAO,SAq3B7ErqB,IAAA,mBAAA,WACI,OAAOuC,KAAKmzG,UAGhB11G,IAAA,kBAAA,SAAWk7H,GACP34H,KAAK+vH,SAAW4I,EAChB34H,KAAKqyH,cAAgB,KACrBryH,KAAKs2H,YAELt2H,KAAKkyH,uBAELlyH,KAAKk0H,mBAAoB,EACzBl0H,KAAKkzH,cAQTz1H,IAAA,gBAAA,SAASmqF,EAAeC,GACpB,IAAM+wC,EAAW54H,KAAKmwH,YAChB0I,EAAY74H,KAAKowH,aAEnBxoC,IAAUgxC,GAAY/wC,IAAWgxC,IAIrC74H,KAAKuwH,gBAAiB,EACtBvwH,KAAKmwH,YAAcvoC,EACnB5nF,KAAKowH,aAAevoC,EAEpB7nF,KAAKixH,WAAW6H,QAAQlxC,EAAOC,GAE/B7nF,KAAKywH,mBAAmBh1F,IAAMmsD,EAAQgxC,GAAY,EAClD54H,KAAKywH,mBAAmB/0F,IAAMmsD,EAASgxC,GAAa,EAEpD74H,KAAK0wH,oBAAoBj1F,EAAIz7B,KAAKywH,mBAAmBh1F,EACrDz7B,KAAK0wH,oBAAoBh1F,EAAI17B,KAAKywH,mBAAmB/0F,EAErD17B,KAAK8wH,UAAY9wH,KAAKw4H,gBAEtBx4H,KAAKk0H,mBAAoB,EACzBl0H,KAAKkzH,eAGTz1H,IAAA,gBAAA,SAASs7H,GAEW,SAAZA,IACA/4H,KAAK2xH,WAAa9B,GAAMyB,KACxBtxH,KAAKq1H,iBAAiB59B,yBAAyB,CAAC,WAEpC,SAAZshC,IACA/4H,KAAK2xH,WAAa9B,GAAM2B,KACxBxxH,KAAKq1H,iBAAiB59B,yBAAyB,CAAC,WAEpC,SAAZshC,IACA/4H,KAAK2xH,WAAa9B,GAAM4B,KACxBzxH,KAAKq1H,iBAAiB59B,yBAAyB,CAAC,WAEpC,UAAZshC,IACA/4H,KAAK2xH,WAAa9B,GAAM6B,MACxB1xH,KAAKq1H,iBAAiB59B,yBAAyB,CAAC,WAEpC,SAAZshC,IACA/4H,KAAK2xH,WAAa9B,GAAMiC,KACxB9xH,KAAKq1H,iBAAiB59B,yBAAyB,CAAC,QAAS,MAAO,WAEpD,SAAZshC,IACA/4H,KAAK2xH,WAAa9B,GAAM0B,KACxBvxH,KAAKq1H,iBAAiB59B,yBAAyB,CAAC,cAIxDh6F,IAAA,mBAAA,SAAY49B,OAIZ59B,IAAA,sBAAA,SAAeu7H,GAKX,GAJAh5H,KAAKi2H,YAAc+C,EAAW,EAE9Bh5H,KAAKixH,WAAWkC,aAAa,CAAC/D,OAAQpvH,KAAKi2H,YAAcj2H,KAAK0wH,oBAAoB3qD,QAE7D,OAAjB/lE,KAAKgjF,QAAkB,YACvBoM,aAAapvF,KAAKi5H,wBAElBj5H,KAAKixH,WAAWkC,aAAa,CACzB13F,EAAGz7B,KAAKmwH,YAAc,EACtBz0F,EAAG17B,KAAKowH,aAAe,EACvBf,WAAW,IAIfrvH,KAAKi5H,uBAAyBjgF,YAAW,WAChB,OAAnBslD,EAAOtb,WAGJiuC,WAAWkC,aAAa,CAAC9D,WAAW,MAC1C,SAIX5xH,IAAA,mBAAA,SAAYo5H,GACH72H,KAAKi0H,mBAAmB4C,EAAS72H,KAAKmwH,YAAc,EAAGnwH,KAAKowH,aAAe,KAIhFpwH,KAAKk0H,mBAAoB,EACzBl0H,KAAKkzH,WAELlzH,KAAKgwH,aAAa,CACdmE,QAAS,CAAC,SACV75B,MAAOt6F,KAAKywH,mBAAmBn2B,MAC/Bv0B,MAAO/lE,KAAKywH,mBAAmB1qD,YAIvCtoE,IAAA,kBAAA,SAAWy7H,GACPl5H,KAAKywH,mBAAmB1qD,MAAQ,EAChC/lE,KAAKywH,mBAAmBn2B,MAAQ,EAEhCt6F,KAAKywH,mBAAmBh1F,GAAKz7B,KAAKmwH,YAAcnwH,KAAK+vH,SAAShF,YAAc,EAC5E/qH,KAAKywH,mBAAmB/0F,GAAK17B,KAAKowH,aAAepwH,KAAK+vH,SAAS/E,aAAe,EAEzEkO,GAGDl5H,KAAKgxH,oBAAqB,EAC1BhxH,KAAK+wH,kBAAmB,GAHxB/wH,KAAK0wH,oBAAsB5/G,KAAKC,MAAMD,KAAK4c,UAAU1tB,KAAKywH,qBAM9DzwH,KAAK8wH,UAAY9wH,KAAKw4H,gBACtBx4H,KAAKkzH,WAEDgG,GACAl5H,KAAKgwH,aAAa,CACdmE,QAAS,CAAC,QAAS,SACnBpuD,MAAO/lE,KAAKywH,mBAAmB1qD,MAC/Bu0B,MAAOt6F,KAAKywH,mBAAmBn2B,WAK3C78F,IAAA,gBAAA,WAII,IAAM07H,EAAkB,CACpB,CAAC,EAAG,GACJ,CAACn5H,KAAK+vH,SAAShF,WAAY,GAC3B,CAAC/qH,KAAK+vH,SAAShF,WAAY/qH,KAAK+vH,SAAS/E,aACzC,CAAC,EAAGhrH,KAAK+vH,SAAS/E,aAClB,CAAChrH,KAAK+vH,SAAShF,WAAa,EAAG/qH,KAAK+vH,SAAS/E,YAAc,IAI3DluB,EAAS+F,GAAGoF,OAAOpL,cACvBC,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOtK,qBAAqB39F,KAAKywH,mBAAmBn2B,QAGnG,IAAK,IAAIz9F,EAAI,EAAGA,EAAIs8H,EAAgBr8H,OAAQD,IAAK,CAC7C,IAAIg2H,EAAS,CAACsG,EAAgBt8H,GAAG,GAAIs8H,EAAgBt8H,GAAG,GAAI,EAAG,GAC/Dg2H,EAAShwB,GAAGoF,OAAOtL,uBAAuBG,EAAQ+1B,GAClDsG,EAAgBt8H,GAAG,GAAKg2H,EAAO,GAC/BsG,EAAgBt8H,GAAG,GAAKg2H,EAAO,GASnC,IANA,IAAMuG,EAAY,CACdzyD,GAAI,KACJE,GAAI,KACJD,GAAI,KACJE,GAAI,MAECwlB,EAAI,EAAGA,EAAI6sC,EAAgBr8H,OAAQwvF,KACnB,OAAjB8sC,EAAUzyD,IAAewyD,EAAgB7sC,GAAG,GAAK8sC,EAAUzyD,MAC3DyyD,EAAUzyD,GAAKwyD,EAAgB7sC,GAAG,KAEjB,OAAjB8sC,EAAUvyD,IAAesyD,EAAgB7sC,GAAG,GAAK8sC,EAAUvyD,MAC3DuyD,EAAUvyD,GAAKsyD,EAAgB7sC,GAAG,KAEjB,OAAjB8sC,EAAUxyD,IAAeuyD,EAAgB7sC,GAAG,GAAK8sC,EAAUxyD,MAC3DwyD,EAAUxyD,GAAKuyD,EAAgB7sC,GAAG,KAEjB,OAAjB8sC,EAAUtyD,IAAeqyD,EAAgB7sC,GAAG,GAAK8sC,EAAUtyD,MAC3DsyD,EAAUtyD,GAAKqyD,EAAgB7sC,GAAG,IAG1C,IAAM+sC,EAAcD,EAAUxyD,GAAKwyD,EAAUzyD,GACvC2yD,EAAeF,EAAUtyD,GAAKsyD,EAAUvyD,GAaxCi4C,EATMjc,GAAG4B,QACX40B,EACAC,EACAt5H,KAAKmwH,YAJO,GAKZnwH,KAAKowH,aALO,GAMZ,GAIexoC,MAAQyxC,EAG3Br5H,KAAKywH,mBAAmBh1F,EAAKz7B,KAAKmwH,YAAc,GAAMgJ,EAAgB,GAAG,GAAKA,EAAgB,GAAG,IAAMra,EACvG9+G,KAAKywH,mBAAmB/0F,EAAK17B,KAAKowH,aAAe,GAAM+I,EAAgB,GAAG,GAAKA,EAAgB,GAAG,IAAMra,EAExG9+G,KAAKywH,mBAAmB1qD,MAAQ+4C,EAChC9+G,KAAKgxH,oBAAqB,EAC1BhxH,KAAK+wH,kBAAmB,EACxB/wH,KAAKkzH,WAELlzH,KAAKgwH,aAAa,CACdmE,QAAS,CAAC,QAAS,SACnBpuD,MAAO/lE,KAAKywH,mBAAmB1qD,MAC/Bu0B,MAAOt6F,KAAKywH,mBAAmBn2B,WAIvC78F,IAAA,iBAAA,SAAU2tG,EAAkBmuB,GAExB,IAAM5E,EAAY,CACdl5F,EAAGz7B,KAAKmwH,YAAc,EACtBz0F,EAAG17B,KAAKowH,aAAe,GAGrBoJ,EAAcx5H,KAAKywH,mBAAmBn2B,MACtCN,EAAWoR,EAAW,IAAMr0F,KAAK2uD,GAEnC6zD,EACAv5H,KAAKywH,mBAAmBn2B,OAASN,EAEjCh6F,KAAKywH,mBAAmBn2B,MAAQN,EAGpCh6F,KAAKywH,mBAAmBn2B,MAAQt6F,KAAK80H,iBACjC90H,KAAKk1H,aACDl1H,KAAKywH,mBAAmBn2B,MACxB,GACA,IAKR,IAAIwC,EAAS+F,GAAGoF,OAAOpL,cACvBC,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOvK,wBAAwBi3B,EAAUl5F,EAAGk5F,EAAUj5F,IACrGohE,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOtK,qBAAqB39F,KAAKywH,mBAAmBn2B,MAAQk/B,IAC3G18B,EAAS+F,GAAGoF,OAAOlL,iBAAiBD,EAAQ+F,GAAGoF,OAAOvK,yBAAyBi3B,EAAUl5F,GAAIk5F,EAAUj5F,IAEvG,IAAIupD,EAAS,CAACjlF,KAAKywH,mBAAmBh1F,EAAGz7B,KAAKywH,mBAAmB/0F,EAAG,EAAG,GACvEupD,EAAS4d,GAAGoF,OAAOtL,uBAAuBG,EAAQ7X,GAClDjlF,KAAKywH,mBAAmBh1F,EAAIwpD,EAAO,GACnCjlF,KAAKywH,mBAAmB/0F,EAAIupD,EAAO,GAEnCjlF,KAAK0wH,oBAAsB5/G,KAAKC,MAAMD,KAAK4c,UAAU1tB,KAAKywH,qBAC1DzwH,KAAK+wH,kBAAmB,EACxB/wH,KAAKkzH,UAAS,MAQlBz1H,IAAA,sBAAA,SAAeg8H,EAAYC,GAGvB15H,KAAKywH,mBAAmBh1F,GAFV,GAEeg+F,EAC7Bz5H,KAAKywH,mBAAmB/0F,GAHV,GAGeg+F,EAE7B15H,KAAK+wH,kBAAmB,EACxB/wH,KAAKgxH,oBAAqB,EAC1BhxH,KAAKkzH,UAAS,MAGlBz1H,IAAA,qBAAA,WACI,OAAOuC,KAAKu7F,aAGhB99F,IAAA,iBAAA,WACI,OAAOuC,KAAKywH,mBAAmB1qD,SAGnCtoE,IAAA,oBAAA,WACI,OAAuC,IAAhCuC,KAAKywH,mBAAmBn2B,MAAcvjF,KAAK2uD,MAGtDjoE,IAAA,oBAAA,WACI,OA/qDU,MAkrDdA,IAAA,oBAAA,WACI,OAAOmyH,MAGXnyH,IAAA,qBAAA,WACIuC,KAAKk0H,mBAAoB,EACzBl0H,KAAKkzH,cAGTz1H,IAAA,yBAAA,SAAkBg+B,EAAkBC,EAAYw0D,GAClC,OAANz0D,GAKCz7B,KAAKqyH,gBACNryH,KAAKqyH,cAAgB,CAAC52F,EAAG,EAAGC,EAAG,EAAGw0D,SAAU,IAEhDlwF,KAAKqyH,cAAc52F,EAAIA,EACvBz7B,KAAKqyH,cAAc32F,EAAIA,EACvB17B,KAAKqyH,cAAcniC,SAAWA,GAT1BlwF,KAAKqyH,cAAgB,SAjqDpBvC,EAAN,YC/BS6J,GACZjvH,OAoBSguH,EAAT,WACIr8B,EAAIqP,OACJrP,EAAI+uB,UAAU,EAAG,EAAGxiC,EAAOhB,MAAOgB,EAAOf,QACzC,IAAK,IAAIhrF,EAAI,EAAGA,EAAI6N,EAAEg/G,OAAO5sH,OAAQD,IACjCw/F,EAAI8pB,YAAcz7G,EAAEg/G,OAAO7sH,GAAG28G,QAC9Bnd,EAAImR,yBAA2B9iG,EAAEg/G,OAAO7sH,GAAG8sH,WACvC/gC,EAAOhB,MAAQl9E,EAAEg/G,OAAO7sH,GAAGy7G,MAAM1wB,QACjCyU,EAAIsP,uBAAwB,GAEhCtP,EAAI0O,UAAUrgG,EAAEg/G,OAAO7sH,GAAGy7G,MAAO,EAAG,EAAG1vB,EAAOhB,MAAOgB,EAAOf,QAEhEwU,EAAIyP,WAzBF/lC,EAAQr7D,EAAEk9E,MAAQl9E,EAAEg/G,OAAO,GAAGpR,MAAM1wB,MACpCA,EAAQ7hB,EAAQ,EAAIr7D,EAAEg/G,OAAO,GAAGpR,MAAM1wB,MAAQl9E,EAAEk9E,MAChDC,EAAS9hB,EAAQ,EAAIr7D,EAAEg/G,OAAO,GAAGpR,MAAMzwB,OAASn9E,EAAEm9E,OAEpDe,EAASia,GAAGja,OAAOhB,EAAOC,GAC9Be,EAAOxhE,MAAMixF,gBAAkB,OAASxV,GAAGuJ,qBAAqB,GAAK,IACrE,IAAI/P,EAAMzT,EAAOC,WAAW,MAE5Bga,GAAGkB,IAAInb,EAAQ,CACXhB,MAAO,OACPC,OAAQ,OACRg8B,eAAgB99C,EAAQ,EAAI,YAAc,OAiB9C/sB,WAAW0/E,EAAQ,GAGnB14H,KAAKy4G,WAAa,WACd,OAAO7vB,GAGX5oF,KAAK04H,OAAS,WACVA,mDC1CL,SACMkB,GAAY3uB,GACjB,GAAIl0F,KAAKsmB,IAAI4tE,EAAUG,UAAY,IAAO,EAA1C,CAIAH,EAAUrjB,MAAQ7wE,KAAK4gD,MAAMszC,EAAUrjB,OACvCqjB,EAAUpjB,OAAS9wE,KAAK4gD,MAAMszC,EAAUpjB,QAGtC,IAAIwjB,EAAYt0F,KAAKsmB,IAAI4tE,EAAUG,SAAW,IAAM,KAAQ,EAC9DH,EAAUxvE,GAAM4vE,EAAYJ,EAAUpjB,OAASojB,EAAUrjB,OAAS,GAAM,EAAK7wE,KAAK4gD,MAAMszC,EAAUxvE,GAAK1kB,KAAK4gD,MAAMszC,EAAUxvE,EAAI,IAAO,GACvIwvE,EAAUvvE,GAAM2vE,EAAYJ,EAAUrjB,MAAQqjB,EAAUpjB,QAAU,GAAM,EAAM9wE,KAAK4gD,MAAMszC,EAAUvvE,GAAK3kB,KAAK4gD,MAAMszC,EAAUvvE,EAAI,IAAO,aAGnIm+F,GAAc5uB,GACnB,MAAO,CACHxvE,EAAGwvE,EAAUxvE,EACbC,EAAGuvE,EAAUvvE,EACbksD,MAAOqjB,EAAUrjB,MACjBC,OAAQojB,EAAUpjB,OAClBujB,SAAUH,EAAUG,UAczB,SACM0uB,GAAkBr+F,EAAWC,EAAWuvE,GAC7C,IAAIwa,EAAIC,EACRD,EAAKhqF,EAAIwvE,EAAUxvE,EACnBiqF,EAAKhqF,EAAIuvE,EAAUvvE,EAEnB,IAAMssE,EAAMnF,GAAGiF,aAAa,CAACrsE,EAAG,EAAGC,EAAG,GAClC,CAACD,EAAGgqF,EAAI/pF,EAAGgqF,IACVza,EAAUG,UAIf,MAAO,CACH3vE,EAJJgqF,EAAKzd,EAAIvsE,EAKLC,EAJJgqF,EAAK1d,EAAItsE,GAaV,SACMq+F,GAAat+F,EAAWC,EAAWuvE,GACxC,IAAMjD,EAAMnF,GAAGiF,aAAa,CAACrsE,EAAG,EAAGC,EAAG,GAClC,CAACD,EAAGA,EAAGC,EAAGA,GACVuvE,EAAUG,UACd,MAAO,CACH3vE,EAAGusE,EAAIvsE,EAAIwvE,EAAUxvE,EACrBC,EAAGssE,EAAItsE,EAAIuvE,EAAUvvE,GCxF7Bs+F,GAAiB7qH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,aDyHzG26H,GAAN,iCAAMA,EA4RLr+C,8BA5RKq+C,GAANj6H,KAOck6H,OAAS,CACtBz+F,EAAG,EACHC,EAAG,EACHksD,MAAO,EACPC,OAAQ,EACRsyC,QAAS,CAAC,CAAC1+F,EAAG,EAAGC,EAAG,KAZrB17B,KAcco6H,YAAc,EAd5Bp6H,KAqBcq6H,cAAgB,CAAC,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,KArBtEr6H,KAsBcs6H,SAAW,GAtBzBt6H,KAuBcu6H,SAAW,GAvBzBv6H,KA4Bcm6H,QAQX,GApCHn6H,KAwCcw6H,MAIX,GA8PFx6H,KAAKirG,UAAY,CACbxvE,EAAGmgD,EAAOngD,EACVC,EAAGkgD,EAAOlgD,EACVksD,MAAOhM,EAAOgM,MACdC,OAAQjM,EAAOiM,OACfujB,SAAUxvB,EAAOwvB,UAGrBprG,KAAKy6H,gBAAkB7+C,EAAO6+C,cAE9Bz6H,KAAK06H,MAAQ9+C,EAAO8+C,MACpB16H,KAAK26H,MAAQ/+C,EAAO++C,MACpB36H,KAAKklE,SAAW0W,EAAO1W,SACvBllE,KAAK+lE,MAAQ6V,EAAO7V,MACpB/lE,KAAK46H,iBAAkB,EACvB56H,KAAK66H,MAAQ76H,KAAKirG,UAAUrjB,MAAQ5nF,KAAKirG,UAAUpjB,OAEnD7nF,KAAKmzG,OAAStQ,GAAGvgF,GAAG,CAChB8sF,UAAW,oBACXrL,IAAK,CACD4X,WAAY,UAGpB37G,KAAK86H,QAAUj4B,GAAGvgF,GAAG,CACjBg4B,OAAQt6C,KAAKmzG,OACbpP,IAAK,CACDz7C,SAAU,cAIlBtoD,KAAK+6H,SAAWl4B,GAAGvgF,GAAG,CAClByhF,IAAK,CACDz7C,SAAU,WACVqvD,OAAQ,OACRvD,UAAW,4EAInB,IAAM4mB,EAAmB,CACrBv/F,EAAG,EACHC,EAAG,GAMP17B,KAAKwsF,YAAc,IAAIqW,GAAGgN,YAAY,IAEtC,IAkQIorB,EAlQAC,EAAe,CACfz/F,EAAG,EACHC,EAAG,GAEP17B,KAAKm7H,sBAAwB,IAAIt4B,GAAGiN,gBAAgB,CAChD5yG,OAAQ8C,KAAK+6H,SACb/lC,aAAa,EACbT,UAAW,SAACp8C,GAKR,GAJAA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,OACNq7H,EAAe,CAACz/F,EAACi3F,EAAOznB,UAAUxvE,EAAGC,EAACg3F,EAAOznB,UAAUvvE,IAExC,gBAAfyc,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,CAKzD,IAAIoN,IAJCkN,UAAUxvE,EAAIy/F,EAAaz/F,GAAK0c,EAAMy2C,MAAQz2C,EAAMy7C,WAAS8+B,EAAS3sD,QACtEklC,UAAUvvE,EAAIw/F,EAAax/F,GAAKyc,EAAM02C,MAAQ12C,EAAM07C,WAAS6+B,EAAS3sD,MAI3E,IAAIq1D,EAAY,GAChB,GAAE1I,EAAOkI,gBAAiB,CACtB,IAAI/9H,EAoBAw+H,EAnBJ,IAAKx+H,EAAI,EAAGA,EAAC61H,EAAQgI,MAAM59H,OAAQD,KAC/BkhG,EAAOhnF,KAAKsmB,IAAGq1F,EAAMznB,UAAUxvE,EAACi3F,EAAQgI,MAAM79H,KACtC61H,EAAQ0H,YAAW1H,EAAQ3sD,SAC1Bq1D,EAAK3/F,GAAKsiE,EAAOq9B,EAAKE,SACvBF,EAAK3/F,EAACi3F,EAAQgI,MAAM79H,GACpBu+H,EAAKE,MAAQv9B,GAIzB,IAAKlhG,EAAI,EAAGA,EAAC61H,EAAQiI,MAAM79H,OAAQD,KAC/BkhG,EAAOhnF,KAAKsmB,IAAGq1F,EAAMznB,UAAUvvE,EAACg3F,EAAQiI,MAAM99H,KACtC61H,EAAQ0H,YAAW1H,EAAQ3sD,SAC1Bq1D,EAAK1/F,GAAKqiE,EAAOq9B,EAAKG,SACvBH,EAAK1/F,EAACg3F,EAAQiI,MAAM99H,GACpBu+H,EAAKG,MAAQx9B,GAMzB,IAAKlhG,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACpBw+H,EAAKtB,GAAYrH,EAAMyH,QAAQt9H,GAAG4+B,EAACi3F,EAAOyH,QAAQt9H,GAAG6+B,EAACg3F,EAAOznB,WAC7D,IAAIrlG,OAAA,EACJ,IAAKA,EAAI,EAAGA,EAAC8sH,EAAQgI,MAAM59H,OAAQ8I,KAC/Bm4F,EAAOhnF,KAAKsmB,IAAIg+F,EAAG5/F,EAACi3F,EAAQgI,MAAM90H,KAC1B8sH,EAAQ0H,YAAW1H,EAAQ3sD,SAC1Bq1D,EAAK3/F,GAAKsiE,EAAOq9B,EAAKE,SACvBF,EAAK3/F,EAACi3F,EAAQgI,MAAM90H,IAAMy1H,EAAG5/F,EAACi3F,EAAQznB,UAAUxvE,GAChD2/F,EAAKE,MAAQv9B,GAIzB,IAAKn4F,EAAI,EAAGA,EAAC8sH,EAAQiI,MAAM79H,OAAQ8I,KAC/Bm4F,EAAOhnF,KAAKsmB,IAAIg+F,EAAG3/F,EAACg3F,EAAQiI,MAAM/0H,KAC1B8sH,EAAQ0H,YAAW1H,EAAQ3sD,SAC1Bq1D,EAAK1/F,GAAKqiE,EAAOq9B,EAAKG,SACvBH,EAAK1/F,EAACg3F,EAAQiI,MAAM/0H,IAAMy1H,EAAG3/F,EAACg3F,EAAQznB,UAAUvvE,GAChD0/F,EAAKG,MAAQx9B,IAMjC,GAAuC,UAArC20B,EAAOlmC,YAAY4mC,cAA2B,CAC5C,IAAIoI,EAAY34B,GAAG+F,mBACf,CAACntE,EAAG,EAAGC,EAAGw/F,EAAax/F,GACvB,CAACD,EAAG,GAAIC,EAAGw/F,EAAax/F,GACxB,CAACD,EAACi3F,EAAOznB,UAAUxvE,EAAGC,EAACg3F,EAAOznB,UAAUvvE,IACxC+/F,EAAO54B,GAAG9E,KAAKy9B,EAAU//F,EAAG+/F,EAAU9/F,EAACg3F,EAAOznB,UAAUxvE,EAACi3F,EAAOznB,UAAUvvE,IAC9E0/F,EAAO,IACF3/F,EAAI+/F,EAAU//F,EACnB2/F,EAAK1/F,EAAI8/F,EAAU9/F,EACnB0/F,EAAKE,MAAQG,EACbL,EAAKG,MAAQE,EAEbD,EAAY34B,GAAG+F,mBACX,CAACntE,EAAGy/F,EAAaz/F,EAAGC,EAAG,GACvB,CAACD,EAAGy/F,EAAaz/F,EAAGC,EAAG,IACvB,CAACD,EAACi3F,EAAOznB,UAAUxvE,EAAGC,EAACg3F,EAAOznB,UAAUvvE,KAC5C+/F,EAAO54B,GAAG9E,KAAKy9B,EAAU//F,EAAG+/F,EAAU9/F,EAACg3F,EAAOznB,UAAUxvE,EAACi3F,EAAOznB,UAAUvvE,IAC/D0/F,EAAKE,QACZF,EAAK3/F,EAAI+/F,EAAU//F,EACnB2/F,EAAK1/F,EAAI8/F,EAAU9/F,EACnB0/F,EAAKE,MAAQG,EACbL,EAAKG,MAAQE,GAGjBD,EAAY34B,GAAG+F,mBACX,CAACntE,EAAGy/F,EAAaz/F,EAAGC,EAAGw/F,EAAax/F,GACpC,CAACD,EAAGy/F,EAAaz/F,EAAI,EAAGC,EAAGw/F,EAAax/F,EAAI,GAC5C,CAACD,EAACi3F,EAAOznB,UAAUxvE,EAAGC,EAACg3F,EAAOznB,UAAUvvE,KAC5C+/F,EAAO54B,GAAG9E,KAAKy9B,EAAU//F,EAAG+/F,EAAU9/F,EAACg3F,EAAOznB,UAAUxvE,EAACi3F,EAAOznB,UAAUvvE,IAC/D0/F,EAAKE,QACZF,EAAK3/F,EAAI+/F,EAAU//F,EACnB2/F,EAAK1/F,EAAI8/F,EAAU9/F,EACnB0/F,EAAKE,MAAQG,EACbL,EAAKG,MAAQE,GAGjBD,EAAY34B,GAAG+F,mBACX,CAACntE,EAAGy/F,EAAaz/F,EAAGC,EAAGw/F,EAAax/F,GACpC,CAACD,EAAGy/F,EAAaz/F,EAAI,EAAGC,EAAGw/F,EAAax/F,EAAI,GAC5C,CAACD,EAACi3F,EAAOznB,UAAUxvE,EAAGC,EAACg3F,EAAOznB,UAAUvvE,KAC5C+/F,EAAO54B,GAAG9E,KAAKy9B,EAAU//F,EAAG+/F,EAAU9/F,EAACg3F,EAAOznB,UAAUxvE,EAACi3F,EAAOznB,UAAUvvE,IAC/D0/F,EAAKE,QACZF,EAAK3/F,EAAI+/F,EAAU//F,EACnB2/F,EAAK1/F,EAAI8/F,EAAU9/F,EACnB0/F,EAAKE,MAAQG,EACbL,EAAKG,MAAQE,GAGPp9H,MAAV+8H,EAAK3/F,IAAci3F,EACdznB,UAAUxvE,EAAI2/F,EAAK3/F,GAEdp9B,MAAV+8H,EAAK1/F,IAAcg3F,EACdznB,UAAUvvE,EAAI0/F,EAAK1/F,GAIxB3kB,KAAKsmB,IAAGq1F,EAAMznB,UAAUG,UAAY,IAAO,IAC3CwuB,GAAWlH,EAAMznB,aACZywB,2BAGJC,gBAKjB,IAAK,IAAIrwC,EAAI,EAAGA,EAAI,EAAGA,KAAC,SAClBzuF,WACQytF,EAACooC,EAAQyH,QAAQt9H,GAAK,CACxBA,EAAGA,EACHylB,GAAIugF,GAAGvgF,GAAG,CACNyhF,IAAK,CACDnc,MAAK8qC,EAAO4H,SAAW,KACvBzyC,OAAM6qC,EAAO4H,SAAW,KACxBnmB,WAAY,OAOZwC,aAAY+b,EAAO4H,SAAW,KAC9BhyE,SAAU,WACV8rD,UAAW,0BAGnB34E,EAAG,EACHC,EAAG,EACHkgG,WAAY,CACRngG,EAAG,EACHC,EAAG,GAEPigG,UAAW,KACX5f,gBAAiB,MAErBzxB,EAAEqxC,UAAY,mBAIJE,EAAY,CAAC,EAAC,GAAI,GAAK,CAAC,GAAG,GAAK,CAAC,EAAG,GAAI,EAAC,EAAI,IAAIh1H,KAAI,SAAA+0C,GAGvD,OAFAA,EAAK,IAAC0iD,EAAU2M,UAAUrjB,MAAQ,EAAI,GAAI,EAC1ChsC,EAAK,IAAC0iD,EAAU2M,UAAUpjB,OAAS,EAAI,GAAI,EACpCjsC,KAELkgF,EAAa/kH,KAAKsmB,IAAG6kF,EAAMgY,OAAOtyC,OAAS,IAAM7wE,KAAKsmB,IAAG6kF,EAAMgY,OAAOryC,QAAU,GAAK,GAAK,EAEhGgb,GAAGkB,IAAIzZ,EAAEhoE,GAAI,CACT3X,KAAIu3G,EAAQgY,OAAOC,QAAQ7vC,EAAEztF,GAAG4+B,EAACymF,EAAQoY,SAAW,EAAIuB,EAAUh/H,GAAG,GAAKi/H,EAAc,KACxF1yC,IAAG84B,EAAQgY,OAAOC,QAAQ7vC,EAAEztF,GAAG6+B,EAACwmF,EAAQoY,SAAW,EAAIuB,EAAUh/H,GAAG,GAAKi/H,EAAc,WAK3F,IAAIxhC,EAAQuI,GAAG+E,iBACX,CACInsE,EAACymF,EAAOjX,UAAUxvE,EAClBC,EAACwmF,EAAOjX,UAAUvvE,GAEtBq+F,GAAazvC,EAAE7uD,EAAG6uD,EAAE5uD,EAACwmF,EAAOjX,YAC5B,IACG3Q,EAAQ,GACXA,GAAS,IAEb,IAAIx4E,EAAQ/K,KAAK4gD,MAAM2iC,EAAQ,IAAE4nB,EAASmY,cAAcv9H,OACxD+lG,GAAGkB,IAAIzZ,EAAEhoE,GAAI,CACTq1F,OAAMuK,EAAOmY,cAAcv4G,GAAS,aAI5CwoE,EAAEyxB,gBAAkB,IAAIlZ,GAAGiN,gBAAgB,CACvC5yG,OAAMw1H,EAAOyH,QAAQt9H,GAAGylB,GACxB0yE,aAAa,EACbT,UAAW,SAACp8C,GAER,GADAA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAiBuxB,EAClDiY,QAAQt9H,GAAG++H,WAAa7B,GAAY7X,EAAMiY,QAAQt9H,GAAG4+B,EAACymF,EAAOiY,QAAQt9H,GAAG6+B,EAACwmF,EAAOjX,gBAElF,GAAmB,gBAAf9yD,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,GAC3DwpC,QAAQt9H,GAAG++H,WAAWngG,GAAK0c,EAAMg6C,GAAE+vB,EAAQn8C,QAC3Co0D,QAAQt9H,GAAG++H,WAAWlgG,GAAKyc,EAAMi6C,GAAE8vB,EAAQn8C,MAEhD,IAAIs1D,EAAK,CACL5/F,EAACymF,EAAOiY,QAAQt9H,GAAG++H,WAAWngG,EAC9BC,EAACwmF,EAAOiY,QAAQt9H,GAAG++H,WAAWlgG,GAElC2/F,EAAEnZ,EAAQ6Z,gBAAgBl/H,EAAGw+H,EAAG5/F,EAAG4/F,EAAG3/F,GACpCwmF,EAAQuY,gBACNY,EAAEnZ,EAAQ8Z,WAAWX,EAAG5/F,EAAG4/F,EAAG3/F,IAG9B3kB,KAAKsmB,IAAG6kF,EAAMjX,UAAUG,UAAY,IAAO,IAC3CiwB,EAAG5/F,EAAI1kB,KAAK4gD,MAAM0jE,EAAG5/F,GACrB4/F,EAAG3/F,EAAI3kB,KAAK4gD,MAAM0jE,EAAG3/F,IAGzB,IAAMugG,EAAKnC,GAAiBuB,EAAG5/F,EAAG4/F,EAAG3/F,EAACwmF,EAAOjX,WAEvC9Y,EAAK8pC,EAAGxgG,EAACymF,EAAQiY,QAAQt9H,GAAG4+B,EAC5B22D,EAAK6pC,EAAGvgG,EAACwmF,EAAQiY,QAAQt9H,GAAG6+B,IAC7By+F,QAAQt9H,GAAG4+B,EAAIwgG,EAAGxgG,IAClB0+F,QAAQt9H,GAAG6+B,EAAIugG,EAAGvgG,EAEvB,IAAIwgG,EAAU,GACJ,IAANr/H,EACAq/H,EAAU,CAAC,EAAG,EAAG,GACJ,IAANr/H,EACPq/H,EAAU,CAAC,EAAG,EAAG,GACJ,IAANr/H,EACPq/H,EAAU,CAAC,EAAG,EAAG,GACJ,IAANr/H,IACPq/H,EAAU,CAAC,EAAG,EAAG,MAGhB/B,QAAQ+B,EAAQ,IAAIzgG,EAACymF,EAAQiY,QAAQt9H,GAAG4+B,IACxC0+F,QAAQ+B,EAAQ,IAAIxgG,EAACwmF,EAAQiY,QAAQt9H,GAAG6+B,EAC3CwmF,EAAO11B,YAAYqoB,UAAU,aACtBslB,QAAQ+B,EAAQ,IAAIzgG,GAAK02D,IACzBgoC,QAAQ+B,EAAQ,IAAIxgG,GAAK02D,IACzB+nC,QAAQ+B,EAAQ,IAAIzgG,EAACymF,EAAQiY,QAAQ+B,EAAQ,IAAIzgG,IACjD0+F,QAAQ+B,EAAQ,IAAIxgG,EAACwmF,EAAQiY,QAAQ+B,EAAQ,IAAIxgG,KAGrDygG,gCApHD,CA0HjB7wC,GAGPtrF,KAAK07H,wBACL17H,KAAKo8H,eAGL,IAAK,IAAI9vC,EAAI,EAAGA,EAAI,EAAGA,KAAC,SAClBzvF,aACO29H,MAAM39H,GAAK,CACZylB,GAAIugF,GAAGvgF,GAAG,CACNyhF,IAAK,CACDnc,MAAK8qC,EAAO6H,SAAW,KACvB1yC,OAAM6qC,EAAO6H,SAAW,KAOxBjyE,SAAU,cAGlBqzE,UAAW,KACX5f,gBAAiB,MAErB,IAAMzxB,EAACooC,EAAQ8H,MAAM39H,GACrBytF,EAAEqxC,UAAY,WACA,IAAN9+H,EACAgmG,GAAGkB,IAAIzZ,EAAEhoE,GAAI,CACT3X,KAAMoM,KAAK6K,IAAG08E,EAAM47B,OAAOC,QAAQ,GAAG1+F,EAAC6iE,EAAO47B,OAAOC,QAAQ,GAAG1+F,GAAK,KACrE2tD,IAAMryE,KAAK6K,IAAG08E,EAAM47B,OAAOC,QAAQ,GAAGz+F,EAAC4iE,EAAO47B,OAAOC,QAAQ,GAAGz+F,GAAC4iE,EAASi8B,SAAY,KACtF3yC,MAAO7wE,KAAKsmB,IAAGihE,EAAM47B,OAAOtyC,OAAS,KACrCC,OAAMyW,EAAOi8B,SAAW,OAEf,IAAN19H,EACPgmG,GAAGkB,IAAIzZ,EAAEhoE,GAAI,CACT3X,KAAMoM,KAAK2K,IAAG48E,EAAM47B,OAAOC,QAAQ,GAAG1+F,EAAC6iE,EAAO47B,OAAOC,QAAQ,GAAG1+F,GAAK,KACrE2tD,IAAKryE,KAAK6K,IAAG08E,EAAM47B,OAAOC,QAAQ,GAAGz+F,EAAC4iE,EAAO47B,OAAOC,QAAQ,GAAGz+F,GAAK,KACpEksD,MAAK0W,EAAOi8B,SAAW,KACvB1yC,OAAQ9wE,KAAKsmB,IAAGihE,EAAM47B,OAAOryC,QAAU,OAE9B,IAANhrF,EACPgmG,GAAGkB,IAAIzZ,EAAEhoE,GAAI,CACT3X,KAAMoM,KAAK6K,IAAG08E,EAAM47B,OAAOC,QAAQ,GAAG1+F,EAAC6iE,EAAO47B,OAAOC,QAAQ,GAAG1+F,GAAK,KACrE2tD,IAAKryE,KAAK2K,IAAG48E,EAAM47B,OAAOC,QAAQ,GAAGz+F,EAAC4iE,EAAM47B,OAAOC,QAAQ,GAAGz+F,GAAK,KACnEksD,MAAO7wE,KAAKsmB,IAAGihE,EAAM47B,OAAOtyC,OAAS,KACrCC,OAAMyW,EAAOi8B,SAAW,OAEf,IAAN19H,GACPgmG,GAAGkB,IAAIzZ,EAAEhoE,GAAI,CACT3X,KAAOoM,KAAK6K,IAAG08E,EAAM47B,OAAOC,QAAQ,GAAG1+F,EAAC6iE,EAAO47B,OAAOC,QAAQ,GAAG1+F,GAAC6iE,EAASi8B,SAAY,KACvFnxC,IAAKryE,KAAK6K,IAAG08E,EAAM47B,OAAOC,QAAQ,GAAGz+F,EAAC4iE,EAAO47B,OAAOC,QAAQ,GAAGz+F,GAAK,KACpEksD,MAAK0W,EAAOi8B,SAAW,KACvB1yC,OAAQ9wE,KAAKsmB,IAAGihE,EAAM47B,OAAOryC,QAAU,WAG/C,IAAIw0C,EAActlH,KAAK4gD,MAAK2mC,EAAM2M,UAAUG,SAAW,IAChDixB,EAAc,GACjBA,GAAe,EACnBA,GAAmB,EAAJx/H,EAAQ,EAAIw/H,GAAW/9B,EAAS+7B,cAAcv9H,OAC7DwtF,EAAEhoE,GAAG8E,MAAMuwF,OAAMrZ,EAAQ+7B,cAAcgC,GAAe,WAI1D,IAAMjQ,EAAa,CAAC,EAAG,GAAG3pG,SAAS5lB,GACnCytF,EAAEyxB,gBAAkB,IAAIlZ,GAAGiN,gBAAgB,CACvC5yG,OAAMw1H,EAAO8H,MAAM39H,GAAGylB,GACtB0yE,aAAa,EACbT,UAAW,SAACp8C,GAUR,GATAA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,SAElCsqC,EADA7O,EACU9tB,EAAQ67B,QAAQ,GAAGz+F,GAAC4iE,EAAS67B,QAAQ,GAAGz+F,EAExC4iE,EAAQ67B,QAAQ,GAAG1+F,GAAC6iE,EAAS67B,QAAQ,GAAG1+F,EA5UtEu/F,EAAiBv/F,EAAI,EACrBu/F,EAAiBt/F,EAAI,GA+UU,gBAAfyc,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,CACzD,IAAM2rC,EAAMz5B,GAAGiF,aAAa,CAACrsE,EAAG,EAAGC,EAAG,GAClC,CAACD,EAAG0c,EAAMg6C,GAAEmM,EAAQv4B,MAAOrqC,EAAGyc,EAAMi6C,GAAEkM,EAAQv4B,QAAMu4B,EAC9C2M,UAAUG,UAChBmxB,EAAK,CACLpqC,GAAImqC,EAAI7gG,EACR22D,GAAIkqC,EAAI5gG,GAER3kB,KAAKsmB,IAAGihE,EAAM2M,UAAUG,UAAY,IAAO,IAC3CmxB,EAAK15B,GAAGsF,OAAO6yB,EAAkBsB,EAAI7gG,EAAG6gG,EAAI5gG,IAGhD,IAAIwgG,EAAU,GACJ,IAANr/H,EACAq/H,EAAU,CAAC,EAAG,EAAG,EAAG,GACP,IAANr/H,EACPq/H,EAAU,CAAC,EAAG,EAAG,EAAG,GACP,IAANr/H,EACPq/H,EAAU,CAAC,EAAG,EAAG,EAAG,GACP,IAANr/H,IACPq/H,EAAU,CAAC,EAAG,EAAG,EAAG,IAGxB,IAAIM,EAAYpQ,EAAa,IAAM,IAC/BxlH,EAAIwlH,EAAamQ,EAAGnqC,GAAKmqC,EAAGpqC,GAE5B8oC,KACKd,QAAQ+B,EAAQ,IAAIM,IAAc51H,IAClCuzH,QAAQ+B,EAAQ,IAAIM,IAAc51H,MAElCuzH,QAAQ+B,EAAQ,IAAIM,IAAc51H,IAClCuzH,QAAQ+B,EAAQ,IAAIM,IAAc51H,GAEzC03F,EAAO9R,YAAYqoB,UAAU,WACvBomB,KACKd,QAAQ+B,EAAQ,IAAIM,IAAc51H,IAClCuzH,QAAQ+B,EAAQ,IAAIM,IAAc51H,MAElCuzH,QAAQ+B,EAAQ,IAAIM,IAAc51H,IAClCuzH,QAAQ+B,EAAQ,IAAIM,IAAc51H,IAI3CwlH,EAAU9tB,EACLm+B,cAAa,GAAO,KAEpBA,cAAa,GAAM,KAGvBN,gCAzHD,CA+HjB7vC,GAGPtsF,KAAK08H,UAAY,CACbp6G,GAAIugF,GAAGvgF,GAAG,CACNyhF,IAAK,CACD4T,OAAQ,OAASnG,EAAAwoB,IAAY,gBAC7BpyC,MAAO5nF,KAAKs6H,SAAW,KACvBzyC,OAAQ7nF,KAAKs6H,SAAW,KACxBnmB,WAAY,OACZwC,aAAc32G,KAAKs6H,SAAW,KAC9BhyE,SAAU,WACV8rD,UAAW,0BAGnB34E,EAAG,EACHC,EAAG,EACH0/F,MAAM,EACNO,UAAW,WACP94B,GAAGkB,IAAG2uB,EAAMgK,UAAUp6G,GAAI,CACtB3X,KAAI+nH,EAAQgK,UAAUjhG,EAACi3F,EAAQ4H,SAAW,EAAK,KAC/ClxC,IAAGspC,EAAQgK,UAAUhhG,EAACg3F,EAAQ4H,SAAW,EAAK,SAI1Dz3B,GAAGvgF,GAAG,CACFg4B,OAAQt6C,KAAK08H,UAAUp6G,GACvByhF,IAAK,CACDnc,MAAO,MACPC,OAAQ,OACRl9E,KAAO3K,KAAKs6H,SAAW,EAAI,EAAK,KAChClxC,IAAKppF,KAAKs6H,SAAW,KACrBnmB,WAAY,OACZ7rD,SAAU,cAIlBtoD,KAAK28H,qBAAuB,IAAI95B,GAAGiN,gBAAgB,CAC/C5yG,OAAQ8C,KAAK08H,UAAUp6G,GACvB0yE,aAAa,EACbT,UAAW,SAACp8C,GAER,GADAA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,CAEzD,IAAMmB,EAAM4gC,EAAQvf,OAAOnhB,wBACrBpwD,EAAS,CACXnG,EAAGq2D,EAAOnnF,KAAI+nH,EAAQvf,OAAO/rB,WAC7B1rD,EAAGo2D,EAAO1I,IAAGspC,EAAQvf,OAAO9rB,WAE1Bg0C,EAAK,CAAC5/F,GAAI0c,EAAM22C,QAAUltD,EAAOnG,GAACi3F,EAAS3sD,MAAOrqC,GAAIyc,EAAM42C,QAAUntD,EAAOlG,GAACg3F,EAAS3sD,OAEvF3iE,EAAIy/F,GAAG+E,iBAAiB,CAACnsE,EAACi3F,EAAOznB,UAAUxvE,EAAGC,EAACg3F,EAAOznB,UAAUvvE,GAAI2/F,GAAM,KAC3EpwB,UAAUG,SAAWhoG,EAC1B,IAAMw5H,EAAoC,GAA1B7lH,KAAK4gD,MAAMv0D,EAAI,IAAM,IACE,UAArCsvH,EAAOlmC,YAAY4mC,eAEZV,EAAOkI,iBAAmB7jH,KAAKsmB,IAAIu/F,EAAUx5H,GAAK,KAFbsvH,EACrCznB,UAAUG,SAAWwxB,KAIzBjB,YAGU,cAAfxjF,EAAMt4C,MACFkX,KAAKsmB,IAAGq1F,EAAMznB,UAAUG,UAAY,IAAO,IAC3CwuB,GAAWlH,EAAMznB,aACZywB,0BACAC,gBAMrB/B,GAAY55H,KAAKirG,WACjBjrG,KAAK27H,WAAU,GACf94B,GAAGrmB,OAAOx8E,KAAK86H,QAAS,CACpB96H,KAAK+6H,SACL/6H,KAAKw6H,MAAM,GAAGl4G,GACdtiB,KAAKw6H,MAAM,GAAGl4G,GACdtiB,KAAKw6H,MAAM,GAAGl4G,GACdtiB,KAAKw6H,MAAM,GAAGl4G,GACdtiB,KAAKm6H,QAAQ,GAAG73G,GAChBtiB,KAAKm6H,QAAQ,GAAG73G,GAChBtiB,KAAKm6H,QAAQ,GAAG73G,GAChBtiB,KAAKm6H,QAAQ,GAAG73G,GAChBtiB,KAAK08H,UAAUp6G,uBAhzBd23G,EAAa,EAqDdx8H,IAAA,qBAAR,sBACIuC,KAAKk6H,OAAOz+F,EAAIz7B,KAAKirG,UAAUxvE,EAAIz7B,KAAK+lE,MACxC/lE,KAAKk6H,OAAOx+F,EAAI17B,KAAKirG,UAAUvvE,EAAI17B,KAAK+lE,MACxC/lE,KAAKk6H,OAAOtyC,MAAQ5nF,KAAKirG,UAAUrjB,MAAQ5nF,KAAK+lE,MAChD/lE,KAAKk6H,OAAOryC,OAAS7nF,KAAKirG,UAAUpjB,OAAS7nF,KAAK+lE,MAClD/lE,KAAKk6H,OAAOC,QAAUn6H,KAAKm6H,QAAQtzH,KAAI,SAAC+0C,GACpC,MAAO,CAACngB,EAAGmgB,EAAKngB,EAAC6iE,EAAQv4B,MAAOrqC,EAAGkgB,EAAKlgB,EAAC4iE,EAAQv4B,aAYjDtoE,IAAA,mBAAR,SAAoBo/H,EAAYC,GAC5B,IAAK98H,KAAK46H,gBACN,MAAO,CAACn/F,EAAGohG,EAAInhG,EAAGohG,GAkBtB,IAhBA,IAAI/+B,EACEq9B,EAOF,CACA3/F,EAAG,KACHC,EAAG,KACHqiE,KAAM,CACFtiE,EAAG,KACHC,EAAG,OAGF74B,EAAI,EAAGA,EAAI7C,KAAK06H,MAAM59H,OAAQ+F,KACnCk7F,EAAOhnF,KAAKsmB,IAAIw/F,EAAK78H,KAAK06H,MAAM73H,KACrB7C,KAAKo6H,YAAcp6H,KAAK+lE,QAChB,OAAXq1D,EAAK3/F,GAAcsiE,EAAOq9B,EAAKr9B,KAAKtiE,KACpC2/F,EAAK3/F,EAAIz7B,KAAK06H,MAAM73H,GACpBu4H,EAAKr9B,KAAKtiE,EAAIsiE,GAI1B,IAAK,IAAIjX,EAAI,EAAGA,EAAI9mF,KAAK26H,MAAM79H,OAAQgqF,KACnCiX,EAAOhnF,KAAKsmB,IAAIy/F,EAAK98H,KAAK26H,MAAM7zC,KACrB9mF,KAAKo6H,YAAcp6H,KAAK+lE,QAChB,OAAXq1D,EAAK1/F,GAAcqiE,EAAOq9B,EAAKr9B,KAAKriE,KACpC0/F,EAAK1/F,EAAI17B,KAAK26H,MAAM7zC,GACpBs0C,EAAKr9B,KAAKriE,EAAIqiE,GAK1B,OAAe,OAAXq9B,EAAK3/F,GAAyB,OAAX2/F,EAAK1/F,EACjB,CACHD,EAAGohG,EACHnhG,EAAGohG,GAGJ,CACHrhG,EAAc,OAAX2/F,EAAK3/F,EAAaohG,EAAKzB,EAAK3/F,EAC/BC,EAAc,OAAX0/F,EAAK1/F,EAAaohG,EAAK1B,EAAK1/F,MAY/Bj+B,IAAA,wBAAR,SAAyBs/H,EAAqBF,EAAYC,GACtD,IAAK98H,KAAKy6H,cACN,MAAO,CACHh/F,EAAGohG,EACHnhG,EAAGohG,GAGX,IAAME,EAAOh9H,KAAKirG,UAAUrjB,MAAQ5nF,KAAKirG,UAAUpjB,OAAS,GAAI,EAAK,EACrE,OAAOgb,GAAG+F,mBACN,CAACntE,EAAGz7B,KAAKirG,UAAUxvE,EAAGC,EAAG17B,KAAKirG,UAAUvvE,GACxCq+F,GAAa/5H,KAAK66H,MAAOmC,GAAQ,CAAC,EAAG,GAAGv6G,SAASs6G,GAAe,GAAI,GAAK/8H,KAAKirG,WAC9E,CAACxvE,EAAGohG,EAAInhG,EAAGohG,OAQXr/H,IAAA,8BAAR,WACIuC,KAAKm6H,QAAQ,GAAG1+F,GAAMz7B,KAAKirG,UAAUrjB,MAAQ,EAC7C5nF,KAAKm6H,QAAQ,GAAGz+F,GAAM17B,KAAKirG,UAAUpjB,OAAS,EAE9C7nF,KAAKm6H,QAAQ,GAAG1+F,EAAKz7B,KAAKirG,UAAUrjB,MAAQ,EAC5C5nF,KAAKm6H,QAAQ,GAAGz+F,GAAM17B,KAAKirG,UAAUpjB,OAAS,EAE9C7nF,KAAKm6H,QAAQ,GAAG1+F,EAAKz7B,KAAKirG,UAAUrjB,MAAQ,EAC5C5nF,KAAKm6H,QAAQ,GAAGz+F,EAAK17B,KAAKirG,UAAUpjB,OAAS,EAE7C7nF,KAAKm6H,QAAQ,GAAG1+F,GAAMz7B,KAAKirG,UAAUrjB,MAAQ,EAC7C5nF,KAAKm6H,QAAQ,GAAGz+F,EAAK17B,KAAKirG,UAAUpjB,OAAS,KAWzCpqF,IAAA,qBAAR,SAAsBw/H,EAAuBC,GACzC,GAAKl9H,KAAKy6H,cAAV,CAGA,IAAM0C,EAAUpmH,KAAKsmB,IAAIr9B,KAAKirG,UAAUG,UAAY,IAAO,EACrDC,EAAYt0F,KAAKsmB,IAAIr9B,KAAKirG,UAAUG,SAAW,IAAM,KAAQ,EACnE,GAAI8xB,IAAkBD,EAAc,CAChC,IAAMrvB,EAAY72F,KAAKsmB,IAAIr9B,KAAKm6H,QAAQ,GAAGz+F,EAAI17B,KAAKm6H,QAAQ,GAAGz+F,GAC3DiyE,EAAW3tG,KAAK66H,MAAQjtB,EACxBuvB,IACAxvB,EAAyE,IAA7DtC,EAAYrrG,KAAKirG,UAAUvvE,EAAI,EAAI17B,KAAKirG,UAAUxvE,EAAI,GAC9DonE,GAAGyF,UAAUqF,GAAY9K,GAAG4F,YAAYkF,IAE5C3tG,KAAKm6H,QAAQ,GAAG1+F,EAAIz7B,KAAKm6H,QAAQ,GAAG1+F,EAAI,IACxCkyE,IAAY,GAEhB3tG,KAAKm6H,QAAQ,GAAG1+F,GAAKkyE,EAAW,EAChC3tG,KAAKm6H,QAAQ,GAAG1+F,GAAKkyE,EAAW,EAChC3tG,KAAKm6H,QAAQ,GAAG1+F,EAAIkyE,EAAW,EAC/B3tG,KAAKm6H,QAAQ,GAAG1+F,EAAIkyE,EAAW,EAEnC,IAAKuvB,GAAiBD,EAAc,CAChC,IACIG,EADarmH,KAAKsmB,IAAIr9B,KAAKm6H,QAAQ,GAAG1+F,EAAIz7B,KAAKm6H,QAAQ,GAAG1+F,GACnCz7B,KAAK66H,MAC5BsC,IACAC,EAA0E,IAA7D/xB,EAAYrrG,KAAKirG,UAAUxvE,EAAI,EAAIz7B,KAAKirG,UAAUvvE,EAAI,GAC/DmnE,GAAGyF,UAAU80B,GAAav6B,GAAG4F,YAAY20B,IAE7Cp9H,KAAKm6H,QAAQ,GAAGz+F,EAAI17B,KAAKm6H,QAAQ,GAAGz+F,EAAI,IACxC0hG,IAAa,GAEjBp9H,KAAKm6H,QAAQ,GAAGz+F,GAAK0hG,EAAY,EACjCp9H,KAAKm6H,QAAQ,GAAGz+F,GAAK0hG,EAAY,EACjCp9H,KAAKm6H,QAAQ,GAAGz+F,EAAI0hG,EAAY,EAChCp9H,KAAKm6H,QAAQ,GAAGz+F,EAAI0hG,EAAY,OAShC3/H,IAAA,kCAAR,WAGI,IAAMuqG,EAAMnF,GAAGiF,aACX,CAACrsE,EAAG,EAAGC,EAAG,GACV,CACID,GAAIz7B,KAAKm6H,QAAQ,GAAG1+F,EAAIz7B,KAAKm6H,QAAQ,GAAG1+F,GAAK,EAC7CC,GAAI17B,KAAKm6H,QAAQ,GAAGz+F,EAAI17B,KAAKm6H,QAAQ,GAAGz+F,GAAK,GAEjD17B,KAAKirG,UAAUG,UAEnBprG,KAAKirG,UAAUxvE,EAAIusE,EAAIvsE,EAAIz7B,KAAKirG,UAAUxvE,EAC1Cz7B,KAAKirG,UAAUvvE,EAAIssE,EAAItsE,EAAI17B,KAAKirG,UAAUvvE,EAG1C17B,KAAKirG,UAAUrjB,MAAQ5nF,KAAKm6H,QAAQ,GAAG1+F,EAAIz7B,KAAKm6H,QAAQ,GAAG1+F,EAC3Dz7B,KAAKirG,UAAUpjB,OAAS7nF,KAAKm6H,QAAQ,GAAGz+F,EAAI17B,KAAKm6H,QAAQ,GAAGz+F,EAG5D17B,KAAK07H,wBAEL17H,KAAK27H,eAODl+H,IAAA,kBAAR,SAAmB4/H,GACfr9H,KAAKo8H,eAELv5B,GAAGkB,IAAI/jG,KAAK86H,QAAS,CACjBnwH,KAAM3K,KAAKk6H,OAAOz+F,EAAI,KACtB2tD,IAAKppF,KAAKk6H,OAAOx+F,EAAI,KACrB4hG,gBAAiB,MACjBryB,UAAW,UAAYjrG,KAAKirG,UAAUG,SAAW,SAGrDvI,GAAGkB,IAAI/jG,KAAK+6H,SAAU,CAClBnzC,MAAO7wE,KAAKsmB,IAAIr9B,KAAKk6H,OAAOtyC,OAAS,KACrCC,OAAQ9wE,KAAKsmB,IAAIr9B,KAAKk6H,OAAOryC,QAAU,KACvCl9E,KAAMoM,KAAK6K,IAAI5hB,KAAKk6H,OAAOC,QAAQ,GAAG1+F,EAAGz7B,KAAKk6H,OAAOC,QAAQ,GAAG1+F,GAAK,KACrE2tD,IAAKryE,KAAK6K,IAAI5hB,KAAKk6H,OAAOC,QAAQ,GAAGz+F,EAAG17B,KAAKk6H,OAAOC,QAAQ,GAAGz+F,GAAK,OAGxE17B,KAAKm6H,QAAQ,GAAGwB,YAChB37H,KAAKm6H,QAAQ,GAAGwB,YAChB37H,KAAKm6H,QAAQ,GAAGwB,YAChB37H,KAAKm6H,QAAQ,GAAGwB,YAEhB37H,KAAKw6H,MAAM,GAAGmB,YACd37H,KAAKw6H,MAAM,GAAGmB,YACd37H,KAAKw6H,MAAM,GAAGmB,YACd37H,KAAKw6H,MAAM,GAAGmB,YAGd37H,KAAK08H,UAAUjhG,EAAI,EACnBz7B,KAAK08H,UAAUhhG,GAAM3kB,KAAKsmB,IAAIr9B,KAAKirG,UAAUpjB,OAAS7nF,KAAK+lE,OAAS,EAAK,GACzE/lE,KAAK08H,UAAUf,YACV0B,GACGr9H,KAAKklE,UACLllE,KAAKklE,SAAS20D,GAAc75H,KAAKirG,eAqiB7CxtG,IAAA,qBAAA,WACI,OAAOo8H,GAAc75H,KAAKirG,cAG9BxtG,IAAA,uBAAA,SAAgB49B,GACZr7B,KAAKy6H,gBAAkBp/F,EACnBA,GAA8B,IAAzBr7B,KAAKirG,UAAUrjB,OAAyC,IAA1B5nF,KAAKirG,UAAUpjB,SAClD7nF,KAAK66H,MAAQ9jH,KAAKsmB,IAAIr9B,KAAKirG,UAAUrjB,MAAQ5nF,KAAKirG,UAAUpjB,YAIpEpqF,IAAA,oBAAA,SAAa01C,GACTnzC,KAAK46H,kBAAoBznF,KAG7B11C,IAAA,eAAA,SAAQiN,GACJ1K,KAAKirG,UAAUxvE,EAAI/wB,EAAE+wB,EACrBz7B,KAAKirG,UAAUvvE,EAAIhxB,EAAEgxB,EACrB17B,KAAK27H,WAAU,MAGnBl+H,IAAA,aAAA,SAAM00F,EAAYC,GACdpyF,KAAKirG,UAAUxvE,GAAK02D,EACpBnyF,KAAKirG,UAAUvvE,GAAK02D,EACpBpyF,KAAK27H,WAAU,MAGnBl+H,IAAA,gBAAA,SAASiqF,EAAWC,GAChB3nF,KAAKirG,UAAUrjB,MAAQF,EACvB1nF,KAAKirG,UAAUpjB,OAASF,EACpB5wE,KAAKsmB,IAAIr9B,KAAKirG,UAAUG,UAAY,IAAO,GAC3CwuB,GAAY55H,KAAKirG,WAErBjrG,KAAK07H,wBACL17H,KAAK27H,WAAU,MAGnBl+H,IAAA,oBAAA,SAAa2F,GACTpD,KAAKirG,UAAUG,SAAWhoG,EACtB2T,KAAKsmB,IAAIr9B,KAAKirG,UAAUG,UAAY,IAAO,IAC3CwuB,GAAY55H,KAAKirG,WACjBjrG,KAAK07H,yBAET17H,KAAK27H,WAAU,MAGnBl+H,IAAA,mBAAA,WACI,OAAOuC,KAAKmzG,UAGhB11G,IAAA,iBAAA,WACI,OAAOuC,KAAK66H,SAGhBp9H,IAAA,gBAAA,WACIuC,KAAKwsF,YAAY8I,UACjBt1F,KAAKm7H,sBAAsB7lC,UAC3Bt1F,KAAKm6H,QAAQ,GAAGpe,gBAAgBzmB,UAChCt1F,KAAKm6H,QAAQ,GAAGpe,gBAAgBzmB,UAChCt1F,KAAKm6H,QAAQ,GAAGpe,gBAAgBzmB,UAChCt1F,KAAKm6H,QAAQ,GAAGpe,gBAAgBzmB,UAChCt1F,KAAKw6H,MAAM,GAAGze,gBAAgBzmB,UAC9Bt1F,KAAKw6H,MAAM,GAAGze,gBAAgBzmB,UAC9Bt1F,KAAKw6H,MAAM,GAAGze,gBAAgBzmB,UAC9Bt1F,KAAKw6H,MAAM,GAAGze,gBAAgBzmB,UAC9Bt1F,KAAK28H,qBAAqBrnC,cAz3BrB2kC,EAAN,YE7GSsD,GAAoB3hD,OAyEvB4hD,EAAT,WACI,GAAKC,EAAL,CAIA,IAAIxyB,EAAYwyB,EAAcC,eAC1B33D,EAAQ,IACRklC,EAAUxvE,GAAKsqC,EACfklC,EAAUvvE,GAAKqqC,EACfklC,EAAUrjB,OAAS7hB,EACnBklC,EAAUpjB,QAAU9hB,GAGxB,IAAI43D,EAAaC,EAAgBhiD,EAAOiiD,gBAAgBvlB,MACpDjc,EAAOshC,EAAiC90C,WAAW,MACvDwT,EAAIqP,OACJrP,EAAI+uB,UAAU,EAAG,EAAGuS,EAAW/1C,MAAO+1C,EAAW91C,QACjDgb,GAAGyI,+BACCjP,EACAzgB,EAAO8tC,OAAO9tC,EAAOiiD,gBAAgBvlB,MACrCrN,EACA,KACApI,GAAGmI,mBAAmBC,EAAWA,EAAUrjB,MAAQk2C,EAAcl2C,MAAOqjB,EAAUpjB,OAASi2C,EAAcj2C,SAE7GwU,EAAIyP,UACJiyB,EAAgBrF,WAnFhBsF,EAAan7B,GAAG4B,QAChB7oB,EAAOqiD,WACPriD,EAAOsiD,YACPtiD,EAAOq/B,aAAe,GACtBr/B,EAAO6/B,cAAgB,GACvB,GAEA11C,EAAQi4D,EAAWp2C,MAAQhM,EAAOqiD,WAElCvxF,EAAMm2D,GAAGvgF,GAAG,CACZyhF,IAAK,CACDnc,MAAOhM,EAAOq/B,aAAe,KAC7BpzB,OAAQjM,EAAO6/B,cAAgB,KAC/BlC,gBAAiB,UACjBnF,UAAW,sEACXX,SAAU,SACVkI,WAAY,OACZrzD,SAAU,WACVjhC,QAAS,OACTysF,WAAY,SACZD,eAAgB,SAChBiE,YAAa,gBAGrBprE,EAAImvE,cAAgB,WAChB,OAAO,GAGX,IAAIsiB,EAAet7B,GAAGvgF,GAAG,CACrByhF,IAAK,CACDz7C,SAAU,WACV8rD,UAAW,0BACXxsB,MAAOo2C,EAAWp2C,MAAQ,KAC1BC,OAAQm2C,EAAWn2C,OAAS,QAGpCn7C,EAAIr8B,YAAY8tH,GAEhB,IAAIP,EAAkBhiD,EAAO8tC,OAAO7iH,KAAI,SAAA+0C,GACpC,MAAO,CACH08D,MAAO18D,EAAK08D,MACZqR,WAAY/tE,EAAK+tE,WACjBnQ,QAAS59D,EAAK49D,YAGtBokB,EAAgBA,EAAgB9gI,OAAS,GAAGw7G,MAAQzV,GAAGja,OACnD7iB,EAAQ,EAAI6V,EAAOqiD,WAAaD,EAAWp2C,MAC3C7hB,EAAQ,EAAI6V,EAAOsiD,YAAcF,EAAWn2C,QAEhD,IAOI41C,EACAK,EARAC,EAAkB,IAAIpE,GAAgB,CACtC/xC,MAAOo2C,EAAWp2C,MAClBC,OAAQm2C,EAAWn2C,OACnB6hC,OAAQkU,IAEZO,EAAa9tH,YAAY0tH,EAAgBtlB,cAiCrC,IAAI2lB,EAAgB,CAChBx2C,MAAOhM,EAAO8tC,OAAO9tC,EAAOiiD,gBAAgBvlB,MAAM1wB,MAAQ7hB,EAC1D8hB,OAAQjM,EAAO8tC,OAAO9tC,EAAOiiD,gBAAgBvlB,MAAMzwB,OAAS9hB,IAE5Dq4D,EAAcx2C,MAAQo2C,EAAWp2C,OAASw2C,EAAcv2C,OAASm2C,EAAWn2C,UAC5Eu2C,EAAgBv7B,GAAG4B,QACf7oB,EAAO8tC,OAAO9tC,EAAOiiD,gBAAgBvlB,MAAM1wB,MAC3ChM,EAAO8tC,OAAO9tC,EAAOiiD,gBAAgBvlB,MAAMzwB,OAC3Cm2C,EAAWp2C,MACXo2C,EAAWn2C,OACX,IAGRi2C,EAAgB,CACZriG,EAAGmgD,EAAOqiD,WAAa,EACvBviG,EAAGkgD,EAAOsiD,YAAc,EACxBt2C,MAAOhM,EAAO8tC,OAAO9tC,EAAOiiD,gBAAgBvlB,MAAM1wB,MAClDC,OAAQjM,EAAO8tC,OAAO9tC,EAAOiiD,gBAAgBvlB,MAAMzwB,QAEvD41C,EAAgB,IAAIxD,GAAc,CAC9Bx+F,EAAGqiG,EAAcriG,EACjBC,EAAGoiG,EAAcpiG,EACjBksD,MAAOk2C,EAAcl2C,MACrBC,OAAQi2C,EAAcj2C,OACtBujB,SAAU,EACVqvB,eAAe,EACfC,MAAO,CAAC,EAAG9+C,EAAOqiD,YAClBtD,MAAO,CAAC,EAAG/+C,EAAOsiD,aAClBn4D,MAAOA,EACPb,SAAU,SAAC+lC,GACPuyB,OAIZ36B,GAAGkB,IAAI05B,EAAchlB,aAAc,CAC/BnwD,SAAU,WACV39C,KAAM,IACNy+E,IAAK,MAET+0C,EAAa9tH,YAAYotH,EAAchlB,cACvCz/D,WAAWwkF,EAAe,GAK1Bx9H,KAAKq+H,KAAO,SAASlsC,EAAIC,GACrBqrC,EAAcY,KAAKlsC,EAAIC,IAE3BpyF,KAAKgU,MAAQ,WACT,IAAI0zE,EAAI9L,EAAO8tC,OAAO9tC,EAAOiiD,gBAAgBvlB,MAAM1wB,MAC/CD,EAAI/L,EAAO8tC,OAAO9tC,EAAOiiD,gBAAgBvlB,MAAMzwB,OAEnD41C,EAAc3E,QAAQpxC,EAAGC,GACzB81C,EAAca,OAAO,CAAC7iG,EAAGisD,EAAI,EAAGhsD,EAAGisD,EAAI,IACvC81C,EAAcc,YAAY,GAC1Bf,KAEJx9H,KAAKw+H,gBAAkB,WAEnB,IAAIC,EAAM57B,GAAG4B,QACT7oB,EAAO8tC,OAAO9tC,EAAOiiD,gBAAgBvlB,MAAM1wB,MAC3ChM,EAAO8tC,OAAO9tC,EAAOiiD,gBAAgBvlB,MAAMzwB,OAC3CjM,EAAOqiD,WACPriD,EAAOsiD,YACP,GAGJT,EAAc3E,QAAQ2F,EAAI72C,MAAO62C,EAAI52C,QACrC41C,EAAca,OAAO,CAAC7iG,EAAGgjG,EAAI72C,MAAQ,EAAGlsD,EAAG+iG,EAAI52C,OAAS,IACxD41C,EAAcc,YAAY,GAC1Bf,KAEJx9H,KAAK0+H,mBAAqB,WACtBjB,EAAca,OAAO,CAAC7iG,EAAGmgD,EAAOqiD,WAAa,EAAGviG,EAAGkgD,EAAOsiD,YAAc,IACxET,EAAcc,YAAY,GAC1Bf,KAGJx9H,KAAK2+H,kBAAoB,WACrB,QAAKlB,GAGEA,EAAcC,gBAEzB19H,KAAK4+H,eAAiB,WAClB,IAAM3zB,EAAYwyB,EAAcC,eAChC,OAAO76B,GAAGmI,mBAAmBC,EAAWA,EAAUrjB,MAAQk2C,EAAcl2C,MAAOqjB,EAAUpjB,OAASi2C,EAAcj2C,SAEpH7nF,KAAKy4G,WAAa,WACd,OAAO/rE,GAEX1sC,KAAKs1F,QAAU,WACXmoC,EAAcnoC,oBChMNupC,GAASjjD,OA2GZkjD,EAAT,SAAsB1sC,GAClB2sC,EAAM,GAAGrjG,GAAK02D,EACd2sC,EAAM,GAAGrjG,EAAI3kB,KAAK2K,IAAIq9G,EAAM,GAAGrjG,EAAIsjG,EAAMjoH,KAAK6K,IAAIm9G,EAAM,GAAGrjG,EAAI,EAAGqjG,EAAM,GAAGrjG,IAC3EqjG,EAAM,GAAGrjG,EAAIqjG,EAAM,GAAGrjG,GAEjBujG,EAAT,SAAwB9sC,GACpB4sC,EAAM,GAAGtjG,GAAK02D,EACd4sC,EAAM,GAAGtjG,EAAI1kB,KAAK6K,IAAIm9G,EAAM,GAAGtjG,EAAIyjG,EAAMnoH,KAAK2K,IAAIq9G,EAAM,GAAGtjG,EAAI,EAAGsjG,EAAM,GAAGtjG,IAC3EsjG,EAAM,GAAGtjG,EAAIsjG,EAAM,GAAGtjG,GAEjB0jG,EAAT,SAAyB/sC,GACrB2sC,EAAM,GAAGrjG,GAAK02D,EACd2sC,EAAM,GAAGrjG,EAAI3kB,KAAK6K,IAAIm9G,EAAM,GAAGrjG,EAAIsjG,EAAMjoH,KAAK2K,IAAIq9G,EAAM,GAAGrjG,EAAI,EAAGqjG,EAAM,GAAGrjG,IAC3EqjG,EAAM,GAAGrjG,EAAIqjG,EAAM,GAAGrjG,GAEjB0jG,EAAT,SAAuBjtC,GACnB4sC,EAAM,GAAGtjG,GAAK02D,EACd4sC,EAAM,GAAGtjG,EAAI1kB,KAAK2K,IAAIq9G,EAAM,GAAGtjG,EAAIyjG,EAAMnoH,KAAK6K,IAAIm9G,EAAM,GAAGtjG,EAAI,EAAGsjG,EAAM,GAAGtjG,IAC3EsjG,EAAM,GAAGtjG,EAAIsjG,EAAM,GAAGtjG,GAGjB4jG,EAAT,WACIrE,EAAiBv/F,EAAI,EACrBu/F,EAAiBt/F,EAAI,EACrBwpC,EAASw4D,MAwRJA,EAAT,WAWI,OAVAqB,EAAM,GAAGtjG,GAAKsjG,EAAM,GAAGtjG,EACvBsjG,EAAM,GAAGrjG,GAAKqjG,EAAM,GAAGrjG,EACvBqjG,EAAM,GAAGtjG,GAAKsjG,EAAM,GAAGtjG,EACvBsjG,EAAM,GAAGrjG,GAAKqjG,EAAM,GAAGrjG,EACvBqjG,EAAM,GAAGtjG,GAAKsjG,EAAM,GAAGtjG,EACvBsjG,EAAM,GAAGrjG,GAAKqjG,EAAM,GAAGrjG,EACvBD,GAAKsjG,EAAM,GAAGtjG,EACdC,GAAKqjG,EAAM,GAAGrjG,EACdqjG,EAAM,GAAGtjG,EAAI,EACbsjG,EAAM,GAAGrjG,EAAI,EACN,CACHD,EAAGA,EACHC,EAAGA,EACHksD,MAAOm3C,EAAM,GAAGtjG,EAChBosD,OAAQk3C,EAAM,GAAGrjG,IA0BhBupC,EAAT,WAEIu1D,EAAM,GAAGv1D,SACTu1D,EAAM,GAAGv1D,SACTu1D,EAAM,GAAGv1D,SACTu1D,EAAM,GAAGv1D,SACTq6D,EAAY,GAAGr6D,SACfq6D,EAAY,GAAGr6D,SACfq6D,EAAY,GAAGr6D,SACfq6D,EAAY,GAAGr6D,SACf2oD,EAAO,GAAG3oD,SACV2oD,EAAO,GAAG3oD,SACV2oD,EAAO,GAAG3oD,SACV2oD,EAAO,GAAG3oD,SACTs6D,EAAgBt6D,SAChBu6D,EAAyBv6D,SACzBw6D,EAAuBx6D,UAndxBxpC,EAAImgD,EAAOngD,EACXC,EAAIkgD,EAAOlgD,EACXksD,EAAQhM,EAAOgM,MACfC,EAASjM,EAAOiM,OAChB9hB,EAAQ6V,EAAO7V,MACfb,EAAW0W,EAAO1W,SAClBg6D,EAAOtjD,EAAOsjD,KACdF,EAAOpjD,EAAOojD,KACdtyF,EAAMl9B,SAASM,cAAc,OAC7B4vH,EAAc,CAAC,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,KAEtDlzC,EAAc,IAAIqW,GAAGgN,YAAY,IAErChN,GAAGkB,IAAIr3D,EAAK,CACR4b,SAAU,WACV39C,KAAO8wB,EAAIsqC,EAAS,KACpBqjB,IAAM1tD,EAAIqqC,EAAS,OAGvB,IAAIw5D,EAAU/vH,SAASM,cAAc,OACrC+yF,GAAGkB,IAAIw7B,EAAS,CACZj3E,SAAU,WACVmxD,OAAQ,kBACR9B,OAAQ,SAEX4nB,EAAgBt6D,OAAS,WACtB49B,GAAGkB,IAAIw7B,EAAS,CACZ50H,KAAOo0H,EAAM,GAAGtjG,EAAIsqC,EAAQ,EAAK,KACjCqjB,IAAM21C,EAAM,GAAGrjG,EAAIqqC,EAAQ,EAAK,KAChC6hB,OAASm3C,EAAM,GAAGtjG,EAAIsjG,EAAM,GAAGtjG,GAAKsqC,EAAS,KAC7C8hB,QAAUk3C,EAAM,GAAGrjG,EAAIqjG,EAAM,GAAGrjG,GAAKqqC,EAAS,QAGtD,IAAIi1D,EAAmB,CACnBv/F,EAAG,EACHC,EAAG,GAEHikG,EAAyB,IAAI98B,GAAGiN,gBAAgB,CAChD5yG,OAAQqiI,EACRhrC,UAAW,SAASp8C,GAEhB,GADAA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,CAEzD,IAAiB3kF,EAAA62F,GAAGsF,OAAO6yB,EAAkB7iF,EAAMg6C,GAAKpsB,EAAO5tB,EAAMi6C,GAAKrsB,GAAnEosB,EAAUnmF,EAAVmmF,GAAIC,EAAMpmF,EAANomF,GAEX2sC,EAAM,GAAGtjG,GAAK02D,EACd4sC,EAAM,GAAGrjG,GAAK02D,EACd2sC,EAAM,GAAGtjG,GAAK02D,EACd4sC,EAAM,GAAGrjG,GAAK02D,EACd2sC,EAAM,GAAGtjG,GAAK02D,EACd4sC,EAAM,GAAGrjG,GAAK02D,EACd2sC,EAAM,GAAGtjG,GAAK02D,EACd4sC,EAAM,GAAGrjG,GAAK02D,EAEdntB,IAEe,cAAf9sB,EAAMt4C,MACNw/H,OAKRG,EAAmBhwH,SAASM,cAAc,OAC9C+yF,GAAGkB,IAAIy7B,EAAkB,CACrBl3E,SAAU,WACVs3E,UAAW,iBACXC,aAAc,mBAEjBL,EAAyBv6D,OAAS,WAC/B49B,GAAGkB,IAAIy7B,EAAkB,CACrB70H,KAAOo0H,EAAM,GAAGtjG,EAAIsqC,EAAS,KAC7BqjB,KAAO21C,EAAM,GAAGrjG,GAAKqjG,EAAM,GAAGrjG,EAAIqjG,EAAM,GAAGrjG,GAAK,GAAKqqC,EAAS,KAC9D6hB,OAASm3C,EAAM,GAAGtjG,EAAIsjG,EAAM,GAAGtjG,GAAKsqC,EAAS,KAC7C8hB,QAAUk3C,EAAM,GAAGrjG,EAAIqjG,EAAM,GAAGrjG,GAAK,EAAIqqC,EAAS,QAI1D,IAAI05D,EAAiBjwH,SAASM,cAAc,OAC5C+yF,GAAGkB,IAAI07B,EAAgB,CACnBn3E,SAAU,WACVm2D,WAAY,iBACZC,YAAa,mBAEhB+gB,EAAuBx6D,OAAS,WAC7B49B,GAAGkB,IAAI07B,EAAgB,CACnB90H,MAAQo0H,EAAM,GAAGtjG,GAAKsjG,EAAM,GAAGtjG,EAAIsjG,EAAM,GAAGtjG,GAAK,GAAKsqC,EAAS,KAC/DqjB,IAAM21C,EAAM,GAAGrjG,EAAIqqC,EAAS,KAC5B6hB,OAASm3C,EAAM,GAAGtjG,EAAIsjG,EAAM,GAAGtjG,GAAK,EAAIsqC,EAAS,KACjD8hB,QAAUk3C,EAAM,GAAGrjG,EAAIqjG,EAAM,GAAGrjG,GAAKqqC,EAAS,QAiDtD,IA5CA,IACM+5D,EAAc,GAEhBf,EAGE,CACF,CAACtjG,EAAG,EAAGC,EAAG,GACV,CAACD,EAAGmsD,EAAOlsD,EAAG,GACd,CAACD,EAAGmsD,EAAOlsD,EAAGmsD,GACd,CAACpsD,EAAG,EAAGC,EAAGmsD,IAiCV2yC,EAAQ,GACHlvC,EAAI,EAAGA,EAAI,EAAGA,KAAC,SACTzuF,GACP29H,EAAM39H,GAAK2S,SAASM,cAAc,OAClC,IAAIw6E,EAAIkwC,EAAM39H,GACdytF,EAAEljE,MAAMwgE,MAAQ0yC,OAChBhwC,EAAEljE,MAAMygE,OAASyyC,OAEjBhwC,EAAEljE,MAAMkhC,SAAW,WACnBgiC,EAAErlB,OAAS,WACG,IAANpoE,GACAytF,EAAEljE,MAAMzc,KAAQo0H,EAAM,GAAGtjG,EAAIsqC,EAAQ+5D,EAAe,KACpDx1C,EAAEljE,MAAMgiE,IAAO21C,EAAM,GAAGrjG,EAAIqqC,EAAQu0D,GAAewF,EAAe,KAClEx1C,EAAEljE,MAAMwgE,OAAUm3C,EAAM,GAAGtjG,EAAIsjG,EAAM,GAAGtjG,GAAKsqC,EAAQ+5D,GAAmB,KACxEx1C,EAAEljE,MAAMygE,OAAUyyC,QACL,IAANz9H,GACPytF,EAAEljE,MAAMzc,KAAQo0H,EAAM,GAAGtjG,EAAIsqC,EAAQ+5D,EAAe,KACpDx1C,EAAEljE,MAAMgiE,IAAO21C,EAAM,GAAGrjG,EAAIqqC,EAAQ+5D,EAAe,KACnDx1C,EAAEljE,MAAMwgE,MAAS0yC,OACjBhwC,EAAEljE,MAAMygE,QAAWk3C,EAAM,GAAGrjG,EAAIqjG,EAAM,GAAGrjG,GAAKqqC,EAAQ+5D,GAAmB,MAC5D,IAANjjI,GACPytF,EAAEljE,MAAMzc,KAAQo0H,EAAM,GAAGtjG,EAAIsqC,EAAQ+5D,EAAe,KACpDx1C,EAAEljE,MAAMgiE,IAAO21C,EAAM,GAAGrjG,EAAIqqC,EAAQ+5D,EAAe,KACnDx1C,EAAEljE,MAAMwgE,OAAUm3C,EAAM,GAAGtjG,EAAIsjG,EAAM,GAAGtjG,GAAKsqC,EAAQ+5D,GAAmB,KACxEx1C,EAAEljE,MAAMygE,OAAUyyC,QACL,IAANz9H,IACPytF,EAAEljE,MAAMzc,KAAQo0H,EAAM,GAAGtjG,EAAIsqC,EAAQu0D,GAAewF,EAAe,KACnEx1C,EAAEljE,MAAMgiE,IAAO21C,EAAM,GAAGrjG,EAAIqqC,EAAQ+5D,EAAe,KACnDx1C,EAAEljE,MAAMwgE,MAAS0yC,OACjBhwC,EAAEljE,MAAMygE,QAAWk3C,EAAM,GAAGrjG,EAAIqjG,EAAM,GAAGrjG,GAAKqqC,EAAQ+5D,GAAmB,MAE7E,IAAIzD,EAAkB,EAAJx/H,EAAQ,EAC1BytF,EAAEljE,MAAMuwF,OAAS+nB,EAAYrD,GAAe,WA/BhC,CAkCjB/wC,GAIP,IADA,IAAIsiC,EAAS,GACJthC,EAAI,EAAGA,EAAI,EAAGA,KAAC,SACTzvF,GACP+wH,EAAO/wH,GAAK2S,SAASM,cAAc,OACnC,IAAIw6E,EAAIsjC,EAAO/wH,GACfytF,EAAEljE,MAAMkhC,SAAW,WACnBgiC,EAAEljE,MAAM+sF,WAAa,OACrB7pB,EAAEljE,MAAMoyF,QAAU,MAClBlvB,EAAErlB,OAAS,WACG,IAANpoE,GACAytF,EAAEljE,MAAMzc,KAAQo0H,EAAM,GAAGtjG,EAAIsqC,EAAS,KACtCukB,EAAEljE,MAAMgiE,IAAO21C,EAAM,GAAGrjG,EAAIqqC,EAAQ,IAAQ,KAC5CukB,EAAEljE,MAAMwgE,OAAUm3C,EAAM,GAAGtjG,EAAIsjG,EAAM,GAAGtjG,GAAKsqC,EAAS,KACtDukB,EAAEljE,MAAMygE,OAAS,UACJ,IAANhrF,GACPytF,EAAEljE,MAAMzc,KAAQo0H,EAAM,GAAGtjG,EAAIsqC,EAAS,KACtCukB,EAAEljE,MAAMgiE,IAAO21C,EAAM,GAAGrjG,EAAIqqC,EAAQ,IAAQ,KAC5CukB,EAAEljE,MAAMwgE,MAAQ,SAChB0C,EAAEljE,MAAMygE,OAAS,WACJ,IAANhrF,GACPytF,EAAEljE,MAAMzc,KAAQo0H,EAAM,GAAGtjG,EAAIsqC,EAAS,KACtCukB,EAAEljE,MAAMgiE,IAAO21C,EAAM,GAAGrjG,EAAIqqC,EAAS,KACrCukB,EAAEljE,MAAMwgE,OAAUm3C,EAAM,GAAGtjG,EAAIsjG,EAAM,GAAGtjG,GAAKsqC,EAAS,KACtDukB,EAAEljE,MAAMygE,OAAS,UACJ,IAANhrF,IACPytF,EAAEljE,MAAMzc,KAAQo0H,EAAM,GAAGtjG,EAAIsqC,EAAQ,IAAQ,KAC7CukB,EAAEljE,MAAMgiE,IAAO21C,EAAM,GAAGrjG,EAAIqqC,EAAQ,IAAQ,KAC5CukB,EAAEljE,MAAMwgE,MAAQ,SAChB0C,EAAEljE,MAAMygE,OAAS,YA3BT,CA+BjByE,GAGP,IAAIyzC,EAAuB,IAAIl9B,GAAGiN,gBAAgB,CAC9C5yG,OAAQs9H,EAAM,GACdxlC,aAAa,EACbT,UAAW,SAAUp8C,GAEjB,GADAA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,CACzD,IAAiB3kF,EAAA62F,GAAGsF,OAAO6yB,EAAkB7iF,EAAMg6C,GAAKpsB,EAAO5tB,EAAMi6C,GAAKrsB,GAA/DqsB,GAAMpmF,EAAVmmF,GAAUnmF,EAANomF,IACX0sC,EAAa1sC,GACT5F,EAAYqoB,UAAU,UACtBsqB,GAAiB/sC,GAErBntB,IAEe,cAAf9sB,EAAMt4C,MACNw/H,OAIRW,EAAuB,IAAIn9B,GAAGiN,gBAAgB,CAC9C5yG,OAAQs9H,EAAM,GACdxlC,aAAa,EACbT,UAAW,SAAUp8C,GAEjB,GADAA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,CACzD,IAAiB3kF,EAAA62F,GAAGsF,OAAO6yB,EAAkB7iF,EAAMg6C,GAAKpsB,EAAO5tB,EAAMi6C,GAAKrsB,GAAnEosB,EAAUnmF,EAAVmmF,GAAUnmF,EAANomF,GACX6sC,EAAe9sC,GACX3F,EAAYqoB,UAAU,UACtBuqB,GAAejtC,GAEnBltB,IAEe,cAAf9sB,EAAMt4C,MACNw/H,OAIRY,EAAuB,IAAIp9B,GAAGiN,gBAAgB,CAC9C5yG,OAAQs9H,EAAM,GACdxlC,aAAa,EACbT,UAAW,SAAUp8C,GAEjB,GADAA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,CACzD,IAAiB3kF,EAAA62F,GAAGsF,OAAO6yB,EAAkB7iF,EAAMg6C,GAAKpsB,EAAO5tB,EAAMi6C,GAAKrsB,GAA/DqsB,GAAMpmF,EAAVmmF,GAAUnmF,EAANomF,IACX+sC,EAAgB/sC,GACZ5F,EAAYqoB,UAAU,UACtBiqB,GAAc1sC,GAElBntB,IAEe,cAAf9sB,EAAMt4C,MACNw/H,OAIRa,EAAuB,IAAIr9B,GAAGiN,gBAAgB,CAC9C5yG,OAAQs9H,EAAM,GACdxlC,aAAa,EACbT,UAAW,SAAUp8C,GAEjB,GADAA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,CACzD,IAAiB3kF,EAAA62F,GAAGsF,OAAO6yB,EAAkB7iF,EAAMg6C,GAAKpsB,EAAO5tB,EAAMi6C,GAAKrsB,GAAnEosB,EAAUnmF,EAAVmmF,GAAUnmF,EAANomF,GACXgtC,EAAcjtC,GACV3F,EAAYqoB,UAAU,UACtBoqB,GAAgB9sC,GAEpBltB,IAEe,cAAf9sB,EAAMt4C,MACNw/H,OAMRC,EAAc,eAEd,IAAK,IAAI9mC,EAAI,EAAGA,EAAI,EAAGA,KAAC,SACT37F,GACPyiI,EAAYziI,GAAK2S,SAASM,cAAc,OACxC,IAAIw6E,EAAIg1C,EAAYziI,GACpBgmG,GAAGkB,IAAIzZ,EAAG,CAEN1C,MAAQ0yC,OACRzyC,OAASyyC,OACThyE,SAAU,aAEdgiC,EAAEljE,MAAMuwF,OAAS,CAAC,cAAe,eAAe96G,EAAI,GACpDytF,EAAErlB,OAAS,WACG,IAANpoE,EACAgmG,GAAGkB,IAAIzZ,EAAG,CACN3/E,KAAOo0H,EAAM,GAAGtjG,EAAIsqC,EAAQu0D,GAAewF,EAAe,KAC1D12C,IAAM21C,EAAM,GAAGrjG,EAAIqqC,EAAQu0D,GAAewF,EAAe,OAEhD,IAANjjI,EACPgmG,GAAGkB,IAAIzZ,EAAG,CACN3/E,KAAOo0H,EAAM,GAAGtjG,EAAIsqC,EAAQ+5D,EAAe,KAC3C12C,IAAM21C,EAAM,GAAGrjG,EAAIqqC,EAAQu0D,GAAewF,EAAe,OAEhD,IAANjjI,EACPgmG,GAAGkB,IAAIzZ,EAAG,CACN3/E,KAAOo0H,EAAM,GAAGtjG,EAAIsqC,EAAQ+5D,EAAe,KAC3C12C,IAAM21C,EAAM,GAAGrjG,EAAIqqC,EAAQ+5D,EAAe,OAEjC,IAANjjI,GACPgmG,GAAGkB,IAAIzZ,EAAG,CACN3/E,KAAOo0H,EAAM,GAAGtjG,EAAIsqC,EAAQu0D,GAAewF,EAAe,KAC1D12C,IAAM21C,EAAM,GAAGrjG,EAAIqqC,EAAQ+5D,EAAe,QA9BtC,CAkCjBtnC,MAIX,IAAI2nC,EAAyB,IAAIt9B,GAAGiN,gBAAgB,CAChD5yG,OAAQoiI,EAAY,GACpBtqC,aAAa,EACbT,UAAW,SAAUp8C,GAEjB,GADAA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,CACzD,IAAiB3kF,EAAA62F,GAAGsF,OAAO6yB,EAAkB7iF,EAAMg6C,GAAKpsB,EAAO5tB,EAAMi6C,GAAKrsB,GAAnEosB,EAAUnmF,EAAVmmF,GAAIC,EAAMpmF,EAANomF,GACXgtC,EAAcjtC,GACd2sC,EAAa1sC,GACT5F,EAAYqoB,UAAU,WACtBoqB,GAAgB9sC,GAChBgtC,GAAiB/sC,IAErBntB,IAEe,cAAf9sB,EAAMt4C,MACNw/H,OAKRe,EAAyB,IAAIv9B,GAAGiN,gBAAgB,CAChD5yG,OAAQoiI,EAAY,GACpBtqC,aAAa,EACbT,UAAW,SAAUp8C,GAEjB,GADAA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,CACzD,IAAiB3kF,EAAA62F,GAAGsF,OAAO6yB,EAAkB7iF,EAAMg6C,GAAKpsB,EAAO5tB,EAAMi6C,GAAKrsB,GAAnEosB,EAAUnmF,EAAVmmF,GAAIC,EAAMpmF,EAANomF,GACX6sC,EAAe9sC,GACf2sC,EAAa1sC,GACT5F,EAAYqoB,UAAU,WACtBuqB,GAAejtC,GACfgtC,GAAiB/sC,IAErBntB,IAEe,cAAf9sB,EAAMt4C,MACNw/H,OAKRgB,EAAyB,IAAIx9B,GAAGiN,gBAAgB,CAChD5yG,OAAQoiI,EAAY,GACpBtqC,aAAa,EACbT,UAAW,SAAUp8C,GAEjB,GADAA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,CACzD,IAAiB3kF,EAAA62F,GAAGsF,OAAO6yB,EAAkB7iF,EAAMg6C,GAAKpsB,EAAO5tB,EAAMi6C,GAAKrsB,GAAnEosB,EAAUnmF,EAAVmmF,GAAIC,EAAMpmF,EAANomF,GACX6sC,EAAe9sC,GACfgtC,EAAgB/sC,GACZ5F,EAAYqoB,UAAU,WACtBuqB,GAAejtC,GACf2sC,GAAc1sC,IAElBntB,IAEe,cAAf9sB,EAAMt4C,MACNw/H,OAKRiB,EAAyB,IAAIz9B,GAAGiN,gBAAgB,CAChD5yG,OAAQoiI,EAAY,GACpBtqC,aAAa,EACbT,UAAW,SAAUp8C,GAEjB,GADAA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,CACzD,IAAiB3kF,EAAA62F,GAAGsF,OAAO6yB,EAAkB7iF,EAAMg6C,GAAKpsB,EAAO5tB,EAAMi6C,GAAKrsB,GAAnEosB,EAAUnmF,EAAVmmF,GAAIC,EAAMpmF,EAANomF,GACXgtC,EAAcjtC,GACdgtC,EAAgB/sC,GACZ5F,EAAYqoB,UAAU,WACtBoqB,GAAgB9sC,GAChB2sC,GAAc1sC,IAElBntB,IAEe,cAAf9sB,EAAMt4C,MACNw/H,OA4BZ3yF,EAAI8vC,OACAoxC,EAAO,GACPA,EAAO,GACPA,EAAO,GACPA,EAAO,GACP4R,EACAC,EACAF,EAEA/E,EAAM,GACNA,EAAM,GACNA,EAAM,GACNA,EAAM,GAEN8E,EAAY,GACZA,EAAY,GACZA,EAAY,GACZA,EAAY,IAuBhBr6D,IAKAjlE,KAAK09H,aAAeA,EAEpB19H,KAAKugI,aAAe,SAAU71H,GAC1B+wB,EAAI/wB,EAAE+wB,EACNC,EAAIhxB,EAAEgxB,EACNksD,EAAQl9E,EAAEk9E,MACVC,EAASn9E,EAAEm9E,OAEXgb,GAAGkB,IAAIr3D,EAAK,CACR/hC,KAAO8wB,EAAIsqC,EAAS,KACpBqjB,IAAM1tD,EAAIqqC,EAAS,OAGvBg5D,EAAM,GAAGtjG,EAAI,EACbsjG,EAAM,GAAGrjG,EAAI,EACbqjG,EAAM,GAAGtjG,EAAImsD,EACbm3C,EAAM,GAAGrjG,EAAI,EACbqjG,EAAM,GAAGtjG,EAAImsD,EACbm3C,EAAM,GAAGrjG,EAAImsD,EACbk3C,EAAM,GAAGtjG,EAAI,EACbsjG,EAAM,GAAGrjG,EAAImsD,EAEb5iB,IACAo6D,KAGJr/H,KAAKwgI,SAAW,SAAUrtF,GACtB4yB,EAAQ5yB,EACR0vD,GAAGkB,IAAIr3D,EAAK,CACR/hC,KAAO8wB,EAAIsqC,EAAS,KACpBqjB,IAAM1tD,EAAIqqC,EAAS,OAEvBd,KAGJjlE,KAAKygI,WAAa,SAAUplG,GACpBA,GACAmkG,EAAiBp4G,MAAMC,QAAU,QACjCo4G,EAAer4G,MAAMC,QAAU,UAE/Bm4G,EAAiBp4G,MAAMC,QAAU,OACjCo4G,EAAer4G,MAAMC,QAAU,SAIvCrnB,KAAKy4G,WAAa,WACd,OAAO/rE,GAGX1sC,KAAKs1F,QAAU,WACX9I,EAAY8I,UACZqqC,EAAuBrqC,UACvB6qC,EAAuB7qC,UACvB8qC,EAAuB9qC,UACvB+qC,EAAuB/qC,UACvBgrC,EAAuBhrC,UACvByqC,EAAqBzqC,UACrB0qC,EAAqB1qC,UACrB2qC,EAAqB3qC,UACrB4qC,EAAqB5qC,kBCriB7BorC,GAAiBvxH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHqhI,GAAiBxxH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHshI,GAAiBzxH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHuhI,GAAiB1xH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHwhI,GAAiB3xH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHyhI,GAAiB5xH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH0hI,GAAiB7xH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH2hI,GAAiB9xH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH4hI,GAAiB/xH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH6hI,GAAiBhyH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,yBC0BtG8hI,GAAa32H,OA6LhB42H,EAAT,SAA8B32H,GAC1B,IAAIzL,EAAS,GAETioC,EAAU27D,GAAGvgF,GAAG,CAChBg4B,OAAQgnF,EACRlyB,UAAW,uBACXzI,MAAOj8F,EAAEi8F,MACT5C,IAAK,CACD8T,QAAS,SACThwB,OAAS,KAAOmwB,EAAUl7G,OAAS,GAAM,IACzC+8G,UAAW,cAEfxK,QAAS,SAASxsG,GACdA,EAAE0oF,iBACF1oF,EAAE2oF,kBACF9gF,EAAE2kG,QAAQ3kG,EAAEoX,MAAOpX,EAAE3N,OAG5BkC,EAAeioC,QAAUA,EACjB27D,GAAGvgF,GAAG,CACXg4B,OAAQpT,EACR68D,IAAK,CACDsU,gBAAiB,QAAW3tG,EAAE4tG,MAAQ,KACtCsB,iBAAkB,YAClB2nB,mBAAoB,SACpB5nB,eAAgB,UAChB9xB,OAAQ,OACRyyB,cAAe,OACfd,QAAS,UAajB,OARCv6G,EAAeuiI,KAAO,SAASnmG,GAC5B6L,EAAQ9f,MAAMC,QAAUgU,EAAI,QAAU,QAGzCp8B,EAAewiI,WAAa,SAASpmG,GAClC6L,EAAQ9f,MAAMywF,QAAUx8E,EAAIqmG,EAAc,UAGvCziI,GAGF0iI,EAAT,SAA4B7/G,EAAO/kB,GAC/B6kI,IAEAxpB,GAAW,EACXypB,EAAqB//G,EAErBggH,IAEAr3H,EAAE6kG,SAAS0I,EAAU6pB,KAahBE,EAAT,WACI5wB,GAAcoC,SAAS,IACvByuB,GAAS,EAET,IAAK,IAAInlI,EAAI,EAAGA,EAAIm7G,EAAUl7G,OAAQD,IAClColI,EAAeplI,GAAG2kI,KAAKK,IAAuBhlI,GAGlDqlI,EAAY96G,MAAMC,QAAU,OAC5BqlB,EAAItlB,MAAM4sF,OAAS,IACnBxkG,SAASutE,KAAK1sE,YAAY29G,GAC1BthF,EAAIr8B,YAAYixH,IAGXM,EAAT,WACIzwB,GAAc6B,SAAS,IACvBgvB,GAAS,EACTE,EAAY96G,MAAMq6F,eAAe,WACjC/0E,EAAItlB,MAAMq6F,eAAe,WACzBjyG,SAASutE,KAAKhkC,YAAYi1E,GAE1BthF,EAAIqM,YAAYuoF,IAGXQ,EAAT,WACIK,EAAax7B,MAAQy7B,EAASP,GAC9BQ,EAAej7G,MAAMixF,gBAAkB,QAAWiqB,EAAMT,GAAsB,MAtR9E7pB,EAAY,CAAC,OAAQ,OAAQ,OAAQ,SACrCsqB,EAAQ,CACR9wB,EAAAwvB,IACAxvB,EAAAyvB,IACAzvB,EAAA0vB,IACA1vB,EAAA2vB,KAEAiB,EAAW,CACV,GAAqB/1H,OAAnBwmG,GAAK,cAAc,QACrB,GAA4BxmG,OAA1BwmG,GAAK,qBAAqB,QAC5B,GAAoBxmG,OAAlBwmG,GAAK,aAAa,QACpB,GAAqBxmG,OAAnBwmG,GAAK,cAAc,SAEtBgvB,EAAqB,EACrBzpB,GAAW,EACX4pB,GAAS,EAGbhpF,YAAW,WACP,IAAK,IAAIn8C,EAAI,EAAGA,EAAIylI,EAAMxlI,OAAQD,IAAK,EAC1B,IAAIglH,OACVjyG,IAAM0yH,EAAMzlI,MAEpB,KAEH,IAQI0lI,EAEAC,EAAQC,EAVRf,EAAc,QACdh1F,EAAMm2D,GAAGvgF,GAAG,CACZyhF,IAAK,CACDz7C,SAAU,WACVo6E,SAAU,OAKdjjB,GAAa,EAGb5c,GAAGG,kBACe,IAAIH,GAAGiN,gBAAgB,CACrC5yG,OAAQwvC,EACR4mD,YAAa,EACbiB,UAAW,SAASp8C,GAChB,GAAmB,gBAAfA,EAAMt4C,KAAwB,CAC9B,GAAImiI,EACA,OAGJO,EAAcvpF,YAAW,WACrB+oF,MACD,KACHtiB,GAAa,EACb+iB,EAASrqF,EAAMy2C,MACf6zC,EAAStqF,EAAM02C,WAEZ,GAAmB,gBAAf12C,EAAMt4C,KACT4/G,IAAeuiB,GAAUn/B,GAAG9E,KAAKykC,EAAQC,EAAQtqF,EAAMy2C,MAAOz2C,EAAM02C,OAAS,IAC7EO,aAAamzC,GACbR,UAGD,GAAmB,cAAf5pF,EAAMt4C,KAAsB,CAEnC,GADAuvF,aAAamzC,GACTP,GAAUviB,EAEV,IADA,IAAIviH,EAASsS,SAASmzH,iBAAiBxqF,EAAMy2C,MAAOz2C,EAAM02C,OACjDhyF,EAAI,EAAGA,EAAIolI,EAAenlI,OAAQD,IACvC,GAAIK,IAAW+kI,EAAeplI,GAAGqqC,QAAS,CACtC06F,IACAxpB,GAAW,EACXypB,EAAqBhlI,EACrBilI,IACAr3H,EAAE6kG,SAAS0I,EAAU6pB,IACrB,MAIZpiB,GAAa,MAuK7B,IAjKA,IAAI0iB,EAAet/B,GAAGvgF,GAAG,CACrBg4B,OAAQ5N,EACR0iE,UAAW,kEACXzI,MAAOy7B,EAASP,GAChBxyB,QAAS,SAASxsG,GACd,GAAIu1G,IAAa4pB,EAIb,OAHAn/H,EAAE0oF,iBACF1oF,EAAE2oF,uBACFu2C,IAIJ3pB,GAAW,EACX3tG,EAAE6kG,SAAS0I,EAAU6pB,IACjBG,GACAJ,KAGR79B,IAAK,CACD8T,QAAS,SACTyC,cAAe,OACfzyB,OAAQ,OACRgyB,UAAW,gBAIfwoB,EAAiBx/B,GAAGvgF,GAAG,CACvBg4B,OAAQ6nF,EACRp+B,IAAK,CACD6V,iBAAkB,YAClB2nB,mBAAoB,SACpB5nB,eAAgB,UAChB/xB,MAAO,mBACPC,OAAQ,OACRyyB,cAAe,OACfd,QAAS,UAIb0oB,EAAcr/B,GAAGvgF,GAAG,CACpBg4B,OAAQ6nF,EACRp+B,IAAK,CACDz7C,SAAU,WACV19C,MAAO,MACP4oG,OAAQ,MACR5rB,MAAO,OACPC,OAAQ,OAGR8vB,OAAQ,UAERU,gBAAiB,QAAW7G,EAAAoxB,IAAe,KAC3ChpB,iBAAkB,YAClB2nB,mBAAoB,SACpB5nB,eAAgB,OAEpBhT,MAAO,aACP0I,QAAS,SAASxsG,GACdA,EAAE0oF,iBACF1oF,EAAE2oF,kBACFu2C,OAKJ/T,EAAUnrB,GAAGvgF,GAAG,CAChByhF,IAAK,CACDz7C,SAAU,WAEV39C,KAAM,IACNy+E,IAAK,IACLx+E,MAAO,IACP4oG,OAAQ,OAcZ8tB,GAXyB,IAAIz+B,GAAGiN,gBAAgB,CAChD5yG,OAAQ8wH,EACRtzB,SAAU,EACVnG,UAAW,SAAS1xF,GACD,gBAAXA,EAAEhD,OACFgD,EAAEguF,sBACF+wC,QAKU/+B,GAAGvgF,GAAG,CACxB8sF,UAAW,wBACXrL,IAAK,CACDz7C,SAAU,WACVs/B,MAAO,OACPC,OAAS,KAAOmwB,EAAUl7G,OAAS,GAAM,IACzCssF,IAAK,OACLz+E,KAAM,IACNqpG,OAAQ,IACR6F,UAAW,aACXlC,OAAQ,UACRoI,WAAY,oDACZ8iB,uBAAwB,MACxBC,wBAAyB,MACzBrvB,SAAU,aAIdwuB,EAAiB,GAyDZ31C,EAAI,EAAGA,EAAI0rB,EAAUl7G,OAAQwvF,IAClC21C,EAAe5+H,KAAKg+H,EAAqB,CACrCv/G,MAAOwqE,EACPvvF,GAAIi7G,EAAU1rB,GACdgsB,MAAOgqB,EAAMh2C,GACbqa,MAAOy7B,EAAS91C,GAChB+iB,QAASsyB,KAgCjBG,IAKA9hI,KAAKyhI,WAAa,SAASpmG,GACvB8mG,EAAa/6G,MAAMywF,QAAUx8E,EAAIqmG,EAAc,SAC/C,IAAK,IAAI7kI,EAAI,EAAGA,EAAIm7G,EAAUl7G,OAAQD,IAClColI,EAAeplI,GAAG4kI,WAAWpmG,GAE7BA,GACA6mG,EAAY96G,MAAMwgE,MAAQ,OAC1Bs6C,EAAY96G,MAAMygE,OAAS,SAE3Bq6C,EAAY96G,MAAMwgE,MAAQ,OAC1Bs6C,EAAY96G,MAAMygE,OAAS,SAInC7nF,KAAKigH,UAAY,SAAS8iB,GACtB,GAAI/qB,EAAUv1F,SAASsgH,GAAY,CAC/B3qB,GAAW,EACX,IAAK,IAAIv7G,EAAI,EAAGA,EAAIm7G,EAAUl7G,OAAQD,IAClC,GAAIm7G,EAAUn7G,KAAOkmI,EAAW,CAC5BlB,EAAqBhlI,EACrB,MAGRgmG,GAAGqB,aAAai+B,EAAc,kCAC9BL,SAEA1pB,GAAW,EACXvV,GAAG0B,gBAAgB49B,EAAc,mCAIzCniI,KAAKgjI,UAAY,WACb,OAAOhrB,EAAU6pB,IAGrB7hI,KAAKy4G,WAAa,WACd,OAAO/rE,GC7Vfk2F,GAAiBzzH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH2jI,GAAiB9zH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH4jI,GAAiB/zH,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH6jI,GAAiBh0H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH8jI,GAAiBj0H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH+jI,GAAiBl0H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHgkI,GAAiBn0H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHikI,GAAiBp0H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,yCCAtHkkI,GAAiBr0H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHmkI,GAAiBt0H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHokI,GAAiBv0H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHqkI,GAAiBx0H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHskI,GAAiBz0H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,aCMlHukI,GACAC,kBAEKC,KACL,IAAIF,GAAJ,CAIAA,GAAY,CACR,cAAe,SAEfjW,OAAU,SACVC,SAAY,WACZ,aAAc,aAEdC,QAAW,UACXC,OAAU,SACV,cAAe,cAEfC,QAAW,UACX,aAAc,aACd,aAAc,aAEdt+C,WAAc,aACdu+C,UAAa,YAEbC,IAAO,MACPC,WAAc,aACd96D,MAAS,QACT+6D,WAAc,cAGlB0V,GAAY,GAEZ,IADA,IAAInnI,EAAOC,OAAOD,KAAKknI,IACdhnI,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC7BinI,GAAUD,GAAUlnI,EAAKE,KAAOF,EAAKE,aAI7BmnI,GAAa3xF,GAEzB,OADA0xF,KACOD,GAAUzxF,YAGL4xF,GAAa5xF,GAEzB,OADA0xF,KACOF,GAAUxxF,YAQL6xF,GAAQC,OAQXC,EAAT,SAAoBC,GACX9mC,EAAO+mC,aACR/mC,EAAO+mC,WAAa,IAEpB/mC,EAAO+mC,WAAW7hH,SAAS4hH,IAG/B9mC,EAAO+mC,WAAWjhI,KAAKghI,IAGlBE,EAAT,SAAuB7W,GACnB,IAAI/D,EAAuBqa,GAAatW,GAKxC,OAJK/D,IACDya,EAAW,cACXza,EAAa,eAEVA,GA8CF6a,EAAT,SAAqBC,EAAYC,GAC7B,IAAMC,EAAeF,EAAW57C,WAAW,MACvCwkC,EAASsX,EAAaz2B,aAAa,EAAG,EAAGu2B,EAAW78C,MAAO68C,EAAW58C,QAC1E,GAAqB,IAAjB68C,EACA,IAAK,IAAI7nI,EAAI,EAAGA,EAAIwwH,EAAOrpG,KAAKlnB,OAAQD,GAAK,EACzCwwH,EAAOrpG,KAAKnnB,EAAI,GAAKwwH,EAAOrpG,KAAKnnB,QAGrC,IAAK,IAAIyvF,EAAI,EAAGA,EAAI+gC,EAAOrpG,KAAKlnB,OAAQwvF,GAAK,EACzC+gC,EAAOrpG,KAAKsoE,EAAI,GAAK,IAAM+gC,EAAOrpG,KAAKsoE,GAG/Cq4C,EAAax2B,aAAakf,EAAQ,EAAG,IAjFrC9vB,EAAiB,CACjB19F,KAAM,MACN+oF,OAAQu7C,EAAOv7C,OACfhB,MAAOu8C,EAAOv8C,MACdC,OAAQs8C,EAAOt8C,QA0BnB,GAJ8B,IAA1Bs8C,EAAOS,gBACPR,EAAW,qBAGVD,EAAO14H,SAER,OADA8xF,EAAOj8F,OAAQ,EACRi8F,EAIX,IACIsnC,EAAa,EAyBjB,GADAA,YAvBSC,EAAiBC,GACtB,IAAI9lI,EAAS,EACb,GAAI8lI,EAASrX,UAAW,CACpB,IAAI/D,EAAaqa,GAAae,EAASrX,WACvC,GAAI/D,GAA6B,gBAAfA,EACd,OAAO,EAGf,IAAK,IAAI9sH,EAAI,EAAGA,EAAIkoI,EAASt5H,SAAS3O,OAAQD,IAAK,CAC/C,IAAI++C,EAAOmpF,EAASt5H,SAAS5O,GACzB++C,EAAKopF,UAAYppF,EAAKqpF,aAItBrpF,EAAKnwC,UACL24H,EAAW,SACXnlI,GAAU6lI,EAAiBlpF,IAE3B38C,KAGR,OAAOA,EAEG6lI,CAAiBX,GAC3BU,EA1BYhb,GA4BZ,OADAtsB,EAAOj8F,OAAQ,EACRi8F,EAsMX,OAnMAA,EAAOmsB,OAAS,GA4LhBnsB,EAAOmsB,gBA3KEwb,EAAaC,GAOlB,IAQIC,EACAC,EATAz6B,EAKE,GACF06B,EAAeH,EAAYI,OAAS,EAAIJ,EAAY3rB,QACpDgsB,EAAkBjB,EAAcY,EAAYzX,WAGxB,gBAApB8X,IAEAH,GADAD,EAAc39C,GAAa8V,EAAO3V,MAAO2V,EAAO1V,SACzBgB,WAAW,OAKlCs8C,EAAYM,OACZrB,EAAW,QACXI,EAAYW,EAAYM,KAAK78C,OAAQu8C,EAAYM,KAAKf,eAI1D,IAAK,IAAI7nI,EAAI,EAAGA,EAAIsoI,EAAY15H,SAAS3O,OAAQD,IAAK,CAClD,IAAI++C,EAAOupF,EAAY15H,SAAS5O,GAChC,IAAI++C,EAAKopF,SAGT,GAAIppF,EAAKqpF,WACLb,EAAW,kBADf,CAKA,IAAIsB,GAAe9pF,EAAKnwC,UAAYmwC,EAAKgtC,SAAWu8C,EAAY15H,SAAS5O,EAAI,IAAMsoI,EAAY15H,SAAS5O,EAAI,GAAGmoI,SAK/G,GAJIU,GACAtB,EAAW,YAGXxoF,EAAKnwC,SAGL,IAFA,IAAIk6H,EAAWT,EAAatpF,GAEnB/4C,EAAI,EAAGA,EAAI8iI,EAAS7oI,OAAQ+F,IAAK,CACtC,IAAI+iI,EAAYD,EAAS9iI,GACrBgjI,EAAWD,EAAUttB,MAAMzvB,WAAW,MAG1C,GAAI68C,EAAa,CACb,IAAII,EAAiBr+C,GAAa8V,EAAO3V,MAAO2V,EAAO1V,QACnDk+C,EAAcD,EAAej9C,WAAW,MAC5Ck9C,EAAYh7B,UAAU66B,EAAUttB,MAAO,EAAG,GAE1C,IAAK,IAAI9pD,EAAI3xD,EAAI,EAAG2xD,EAAI22E,EAAY15H,SAAS3O,QAAUqoI,EAAY15H,SAAS+iD,GAAGw2E,SAAUx2E,IAAK,CAC1F,IAAIw3E,EAAeb,EAAY15H,SAAS+iD,GACX,IAAzBw3E,EAAaxsB,SAAiBwsB,EAAaT,SAG/CQ,EAAYv4B,yBAA2B+2B,EAAcyB,EAAatY,WAClEqY,EAAY5f,YAAc6f,EAAaxsB,QACvCusB,EAAYh7B,UAAUi7B,EAAap9C,OAAQo9C,EAAar7H,KAAMq7H,EAAa58C,MAG/Ey8C,EAASr4B,yBAA2B,cACpCq4B,EAAS96B,UAAU+6B,EAAgB,EAAG,GAMtCX,EAAYM,OACZI,EAASr4B,yBAA6D,IAAlC23B,EAAYM,KAAKf,aAAqB,iBAAmB,kBAC7FmB,EAAS96B,UAAUo6B,EAAYM,KAAK78C,OAAQu8C,EAAYM,KAAK96H,KAAMw6H,EAAYM,KAAKr8C,MAGpFg8C,GACAC,EAAS73B,yBAA2Bo4B,EAAUjc,WAC9C0b,EAASlf,YAAcyf,EAAUpsB,QACjC6rB,EAASt6B,UAAU66B,EAAUttB,MAAO,EAAG,KAGvCstB,EAAUpsB,QAAUosB,EAAUpsB,QAAU8rB,EACxC16B,EAAUvnG,KAAKuiI,QA1C3B,CAiDA,IAAIh9C,EAASnB,GAAa8V,EAAO3V,MAAO2V,EAAO1V,QAC3CwU,EAAMzT,EAAOC,WAAW,MAoB5B,GAnBIjtC,EAAKgtC,QACLyT,EAAI0O,UAAUnvD,EAAKgtC,OAAQhtC,EAAKjxC,KAAMixC,EAAKwtC,KAI3CxtC,EAAKqqF,SACL7B,EAAW,gBAIXxoF,EAAK6pF,OACLrB,EAAW,QACXI,EAAY5oF,EAAK6pF,KAAK78C,OAAQhtC,EAAK6pF,KAAKf,cAExCroC,EAAImR,yBAAsD,IAA3B5xD,EAAK6pF,KAAKf,aAAqB,iBAAmB,kBACjFroC,EAAI0O,UAAUnvD,EAAK6pF,KAAK78C,OAAQhtC,EAAK6pF,KAAK96H,KAAMixC,EAAK6pF,KAAKr8C,MAI1Ds8C,EAAa,CACb,IAAIQ,EAAiBz+C,GAAa7rC,EAAKhxC,MAAQgxC,EAAKjxC,KAAMixC,EAAK43D,OAAS53D,EAAKwtC,KACzE+8C,EAAcD,EAAer9C,WAAW,MAC5Cs9C,EAAYp7B,UAAUnvD,EAAKgtC,OAAQ,EAAG,GAEtC,IAAK,IAAI9B,EAAIjqF,EAAI,EAAGiqF,EAAIq+C,EAAY15H,SAAS3O,QAAUqoI,EAAY15H,SAASq7E,GAAGk+C,SAAUl+C,IAAK,CAC1F,IAAIs/C,EAAejB,EAAY15H,SAASq7E,GACX,IAAzBs/C,EAAa5sB,SAAiB4sB,EAAab,SAG/CY,EAAY34B,yBAA2B+2B,EAAc6B,EAAa1Y,WAClEyY,EAAYhgB,YAAcigB,EAAa5sB,QACvC2sB,EAAYp7B,UAAUq7B,EAAax9C,OAAQw9C,EAAaz7H,KAAOixC,EAAKjxC,KAAMy7H,EAAah9C,IAAMxtC,EAAKwtC,MAGtGiT,EAAImR,yBAA2B,cAC/BnR,EAAI0O,UAAUm7B,EAAgBtqF,EAAKjxC,KAAMixC,EAAKwtC,KAI9C+7C,EAAYM,OACZppC,EAAImR,yBAA6D,IAAlC23B,EAAYM,KAAKf,aAAqB,iBAAmB,kBACxFroC,EAAI0O,UAAUo6B,EAAYM,KAAK78C,OAAQu8C,EAAYM,KAAK96H,KAAMw6H,EAAYM,KAAKr8C,MAG/Eg8C,EACIE,EAAe,IACfD,EAAS73B,yBAA2B+2B,EAAc3oF,EAAK8xE,WACvD2X,EAASlf,YAAcvqE,EAAK2pF,OAAS,EAAI3pF,EAAK49D,QAC9C6rB,EAASt6B,UAAUniB,EAAQ,EAAG,IAIlCgiB,EAAUvnG,KAAK,CACXxB,KAAM+5C,EAAK/5C,KACX23G,SAAU59D,EAAK2pF,OAAS,EAAI3pF,EAAK49D,SAAW8rB,EAC5C3b,WAAY4a,EAAc3oF,EAAK8xE,WAC/BpV,MAAO1vB,MAgBnB,OAXIw8C,IACAx6B,EAAY,CACR,CACI/oG,KAAMsjI,EAAYtjI,KAClB23G,QAAS8rB,EACT3b,WAAY6b,EACZltB,MAAO8sB,KAKZx6B,EAGKs6B,CAAa,CACzBrjI,KAAM,OACN23G,QAAS,EACTkU,UAAW,SACXjiH,SAAU04H,EAAO14H,WAGd8xF,WAGK8oC,GAAiBC,GAE7B,IAAMrnI,EAAqB,CACvB2oF,MAAO0+C,EAAM1+C,MACbC,OAAQy+C,EAAMz+C,OACd6hC,OAAQ,IAoBZ,OAlBI4c,EAAM5c,OACNzqH,EAAOyqH,OAASzqH,EAAOyqH,OAAOr9G,OAAOi6H,EAAM5c,OAAO7iH,KAAI,SAAA+0C,GAClD,MAAO,CACH/5C,KAAM+5C,EAAK/5C,KACX23G,QAAS59D,EAAK49D,QACdmQ,WAAY/tE,EAAK+tE,WACjBrR,MAAO18D,EAAK08D,WAKpBr5G,EAAOyqH,OAAOrmH,KAAK,CACfxB,KAAMgxG,GAAK,cACX2G,QAAS,EACTmQ,WAAY,cACZrR,MAAOguB,EAAM19C,SAGd3pF,iXC1VX,IAAMsnI,KAAyBtvH,OAAOuvH,UAClCC,GAAY,SACVC,GAAiB,wBAEPC,GAAU9kI,GACtB4kI,GAAY,GAAK5kI,EAUlB,SACM+kI,GAAyBC,EAAgBC,EAAiBC,OAYtDC,EAAT,SAAiBC,GACTC,IAGJA,GAAc,EACdH,EAAcE,KAfdC,GAAc,EAkBlB,GAAKX,GAAL,CAMA,IAAIY,EAEJ,IACIA,EAAalwH,OAAOuvH,UAAUj/G,KAAKk/G,GAAW,GAChD,MAAO5jI,GAEL,YADAmkI,EAAQnkI,EAAEqN,SAIdi3H,EAAWC,gBAAkB,SAAUvkI,GACnC,IACaskI,EAAWloI,OACLooI,kBAAkBX,GAAgB,CAACY,QAAS,OACrDC,YAAY,KAAM,KAAM,CAACC,QAAQ,IACzC,MAAO1gD,GACLkgD,EAAQlgD,EAAE52E,WAGlBi3H,EAAWl3H,QAAU,SAAUpN,GAC3BmkI,EAAQ,0BAA4BG,EAAW7lI,QAEnD6lI,EAAWM,UAAY,SAAU5kI,GAC7B,IAAI6kI,EACAC,EACAC,EAEJ,IAEI,KADAF,EAAcP,EAAWloI,QACR4oI,iBAAiBC,SAASpB,IAKvC,OAFAzvH,OAAOuvH,UAAUuB,eAAetB,SAChCO,EAAQ,qDAIZY,GADAD,EAAiBD,EAAYM,YAAYtB,GAAgB,cAC/BuB,YAAYvB,KAC7B5kH,MAAM,MACjB,MAAOomH,GAEL,YADAlB,EAAQkB,EAAEh4H,SAIdw3H,EAAYz3H,QAAU,SAAUpN,GAC5BmkI,EAAQ,mBAAqBU,EAAYpmI,QAG7C,IACIulI,EAAee,GACjB,MAAOO,GAEL,YADAnB,EAAQmB,EAAEj4H,SAIdy3H,EAAeS,WAAa,WA3ExBlB,IAGJA,GAAc,EACdJ,KAyEIY,EAAY9gH,SAEhB+gH,EAAe13H,QAAU,WACrB+2H,EAAQ,sBAAwBW,EAAermI,cAhEnD03C,YAAW,WACPguF,EAAQ,6BACT,YAkFKqB,GAAgBvB,EAAiBC,GAEzC,IAAI5qD,EADJoqD,GAEAK,IAAyB,SAAUgB,GAC/BzrD,EAAQyrD,EAAS3lI,IAAI,MACtB,WACC6kI,EAAgB3qD,EAAMl9E,WACvB,SAAUgoI,GACTF,EAAc,mCAAqCE,MAGvDH,EAAgB,eAsBRwB,GAAkBC,EAAmCzB,EAAiBC,GAClFH,IAAyB,SAAUgB,GAC/BA,EAASY,IAAID,MACd,WACCzB,OACD,SAAUG,GACTF,EAAcE,eAWNwB,GAAM3B,EAAiBC,GACnCH,IAAyB,SAAUgB,GAC/BA,EAAS/+F,OAAO,MACjB,WACCi+F,OACD,SAAUxlI,GACTylI,EAAczlI,aCtLtBonI,GAAiBv5H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHqpI,GAAiBx5H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHspI,GAAiBz5H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHupI,GAAiB15H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHwpI,GAAiB35H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHypI,GAAiB55H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH0pI,GAAiB75H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH2pI,GAAiB95H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH4pI,GAAiB/5H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH6pI,GAAiBh6H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH8pI,GAAiBj6H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH+pI,GAAiBl6H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtHgqI,GAAiBn6H,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SCkC/G,IAAMiqI,GAAkB,CAC3BC,UAAU,GAEDC,GAET,CACAC,qBAAsB,CAClBl3B,KAAM,CAAC3wG,KAAM,+BAAgC8uF,OAAQ,0BACrD9uF,KAAM,GACN8nI,YAAa,GACbC,OAAO,EACPC,eAAe,EACfC,KAAMt4B,EAAAk3B,IACN3yB,WAAW,EACXg0B,UAAW,KACXroI,MAAO,KACPsoI,SAAS,GAEbC,WAAY,CACRz3B,KAAM,CAAC3wG,KAAM,oBAAqB8uF,OAAQ,sBAC1C9uF,KAAM,GACN8nI,YAAa,GACbG,KAAMt4B,EAAAm3B,IACNiB,OAAO,EACPM,iBAAiB,EACjBL,eAAe,EACf9zB,WAAW,EACXg0B,UAAW,KACXroI,MAAO,KACPsoI,SAAS,GAEbG,SAAU,CACN33B,KAAM,CAAC3wG,KAAM,sBAAuB8uF,OAAQ,iBAC5C9uF,KAAM,GACN8nI,YAAa,GACbG,KAAMt4B,EAAAo3B,IACNgB,OAAO,EACPC,eAAe,EACf9zB,WAAW,EACXg0B,UAAW,KACXroI,MAAO,KACPsoI,SAAS,GAEbhN,KAAM,CACFxqB,KAAM,CAAC3wG,KAAM,oBAAqB8uF,OAAQ,eAC1C9uF,KAAM,GACN8nI,YAAa,GACbG,KAAMt4B,EAAAq3B,IACNe,OAAO,EACPM,iBAAiB,EACjBL,eAAe,EACf9zB,WAAW,EACXg0B,UAAW,KACXroI,MAAO,KACPsoI,SAAS,GAEbI,gBAAiB,CACb53B,KAAM,CAAC3wG,KAAM,uBAAwB8uF,OAAQ,kBAC7C9uF,KAAM,GACN8nI,YAAa,GACbG,KAAMt4B,EAAAs3B,IACNc,OAAO,EACPC,eAAe,EACf9zB,WAAW,EACXg0B,UAAW,KACXroI,MAAO,KACPsoI,SAAS,GAEbK,OAAQ,CACJ73B,KAAM,CAAC3wG,KAAM,gBAAiB8uF,OAAQ,iBACtC9uF,KAAM,GACNioI,KAAMt4B,EAAAu3B,IACNa,OAAO,EACPC,eAAe,EACf9zB,WAAW,EACXu0B,WAAW,EACXP,UAAW,KACXroI,MAAO,KACPsoI,SAAS,GAEbO,cAAe,CACX/3B,KAAM,CAAC3wG,KAAM,2BAA4B8uF,OAAQ,sBACjD9uF,KAAM,GACN8nI,YAAa,GACbG,KAAMt4B,EAAAw3B,IACNY,OAAO,EACPC,eAAe,EACf9zB,WAAW,EACXg0B,UAAW,KACXroI,MAAO,KACPsoI,SAAS,GAEbQ,OAAQ,CACJh4B,KAAM,CAAC3wG,KAAM,sBAAuB8uF,OAAQ,iBAC5C9uF,KAAM,GACN8nI,YAAa,GACbG,KAAMt4B,EAAAy3B,IACNW,OAAO,EACPM,iBAAiB,EACjBL,eAAe,EACf9zB,WAAW,EACXg0B,UAAW,KACXroI,MAAO,KACPsoI,SAAS,GAEbniC,OAAQ,CACJ2K,KAAM,CAAC3wG,KAAM,sBAAuB8uF,OAAQ,iBAC5C9uF,KAAM,GACN8nI,YAAa,GACbG,KAAMt4B,EAAA8xB,IACNsG,OAAO,EACPM,iBAAiB,EACjBL,eAAe,EACf9zB,WAAW,EACXg0B,UAAW,KACXroI,MAAO,KACPsoI,SAAS,GAEbS,YAAa,CACTj4B,KAAM,CAAC3wG,KAAM,0BAA2B8uF,OAAQ,qBAChD9uF,KAAM,GACN8nI,YAAa,GACbG,KAAMt4B,EAAA03B,IACNU,OAAO,EACPC,eAAe,EACf9zB,WAAW,EACXg0B,UAAW,KACXroI,MAAO,KACPsoI,SAAS,GAEbU,QAAS,CACLl4B,KAAM,CAAC3wG,KAAM,wBAAyB8uF,OAAQ,mBAC9C9uF,KAAM,GACN8nI,YAAa,GACbG,KAAMt4B,EAAA23B,IACNS,OAAO,EACPC,eAAe,EACf9zB,WAAW,EACXg0B,UAAW,KACXroI,MAAO,KACPsoI,SAAS,GAEb/+B,UAAW,CACPuH,KAAM,CAAC3wG,KAAM,yBAA0B8uF,OAAQ,oBAC/C9uF,KAAM,GACN8nI,YAAa,GACbG,KAAMt4B,EAAA43B,IACNQ,OAAO,EACPM,iBAAiB,EACjBL,eAAe,EACf9zB,WAAW,EACX40B,SAAS,EACTZ,UAAW,KACXroI,MAAO,KACPsoI,SAAS,GAEbY,OAAQ,CACJp4B,KAAM,CAAC3wG,KAAM,6BAA8B8uF,OAAQ,wBACnD9uF,KAAM,GACN8nI,YAAa,GACbG,KAAMt4B,EAAA63B,IACNO,OAAO,EACPC,eAAe,EACf9zB,WAAW,EACXg0B,UAAW,KACXroI,MAAO,KACPsoI,SAAS,GAEba,cAAe,CACXr4B,KAAM,CAAC3wG,KAAM,4BAA6B8uF,OAAQ,uBAClD9uF,KAAM,GACN8nI,YAAa,GACbG,KAAMt4B,EAAA83B,IACNM,OAAO,EACPC,eAAe,EACf9zB,WAAW,EACXg0B,UAAW,KACXroI,MAAO,KACPsoI,SAAS,aAIRc,KACQluI,OAAOD,KAAK8sI,IACpBjsI,SAAQ,SAAAo+C,GACT6tF,GAAU7tF,GAAM/5C,KAAOgxG,GAAK42B,GAAU7tF,GAAM42D,KAAK3wG,MACjD4nI,GAAU7tF,GAAM+tF,YAAc92B,GAAK42B,GAAU7tF,GAAM42D,KAAK7hB,WAGhEm6C,KAEAl4B,GAAgB9nC,WAAU,WACtBggE,QClNJ,IAAMC,GAAW,YAGRC,GAAKvvG,EAAGC,EAAG4X,GAChBtzC,KAAKy7B,EAAIA,EAAGz7B,KAAK07B,EAAIA,EAAG17B,KAAKszC,EAAIA,EAGrC03F,GAAKzqI,UAAU0qI,KAAO,SAASxvG,EAAGC,GAC9B,OAAO17B,KAAKy7B,EAAEA,EAAIz7B,KAAK07B,EAAEA,GAO7B,IAAIwvG,GAAQ,CAAC,IAAIF,GAAK,EAAE,EAAE,GAAG,IAAIA,IAAK,EAAG,EAAE,GAAG,IAAIA,GAAK,GAAE,EAAG,GAAG,IAAIA,IAAK,GAAG,EAAG,GAC1E,IAAIA,GAAK,EAAE,EAAE,GAAG,IAAIA,IAAK,EAAG,EAAE,GAAG,IAAIA,GAAK,EAAE,GAAE,GAAI,IAAIA,IAAK,EAAG,GAAE,GAChE,IAAIA,GAAK,EAAE,EAAE,GAAG,IAAIA,GAAK,GAAE,EAAG,GAAG,IAAIA,GAAK,EAAE,GAAE,GAAI,IAAIA,GAAK,GAAE,GAAG,IAEhEG,GAAI,CAAC,IAAI,IAAI,IAAI,GAAG,GAAG,GACvB,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,EAAE,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,EAAE,GAAG,GAAG,IAAI,GAAG,GAAG,GACzE,IAAK,EAAE,IAAI,IAAI,IAAI,IAAI,GAAG,EAAE,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,GACzE,GAAG,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAK,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,GAAG,IACxE,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IACxE,IAAI,IAAI,GAAI,GAAG,GAAG,GAAG,IAAK,EAAE,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,IAAK,GAAG,GAAG,IAAI,IAAI,IACxE,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAK,EAAE,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IACxE,EAAE,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,GACzE,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAK,EAAE,GAAG,IAAI,IAAK,GAAG,IAAI,IAAI,IAAI,IAAI,IAAK,GAAG,IAAI,EAC1E,IAAI,GAAG,GAAG,IAAK,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAK,IAAI,IAAI,IAAI,IAAI,GAAG,IACxE,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAK,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,IACxE,GAAG,IAAI,IAAK,GAAG,IAAI,IAAI,IAAI,IAAI,IAAK,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAK,EAAE,IAAI,IACxE,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,KAEpEC,GAAO,IAAI7sI,MAAM,KACjB8sI,GAAQ,IAAI9sI,MAAM,KAItBwsI,GAAS7iE,KAAO,SAASA,GACjBA,EAAO,GAAKA,EAAO,IAEnBA,GAAQ,QAGZA,EAAOnxD,KAAKuK,MAAM4mD,IACP,MACPA,GAAQA,GAAQ,GAGpB,IAAK,IAAIrrE,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC1B,IAAIu+B,OAAA,EAEAA,EADI,EAAJv+B,EACIsuI,GAAEtuI,GAAa,IAAPqrE,EAERijE,GAAEtuI,GAAOqrE,GAAM,EAAK,IAG5BkjE,GAAKvuI,GAAKuuI,GAAKvuI,EAAI,KAAOu+B,EAC1BiwG,GAAMxuI,GAAKwuI,GAAMxuI,EAAI,KAAOquI,GAAM9vG,EAAI,MAI9C2vG,GAAS7iE,KAAK,GASd,IAAIojE,GAAK,IAAKv0H,KAAK4yB,KAAK,GAAG,GACvB4hG,IAAM,EAAEx0H,KAAK4yB,KAAK,IAAI,EAM1BohG,GAASS,SAAW,SAASC,EAAKC,GAC9B,IAUIp/C,EAAIq/C,EARJx4F,GAAKs4F,EAAIC,GAAKJ,GACdzuI,EAAIka,KAAKuK,MAAMmqH,EAAIt4F,GACnBvtC,EAAImR,KAAKuK,MAAMoqH,EAAIv4F,GACnB1H,GAAK5uC,EAAE+I,GAAG2lI,GACV5kE,EAAK8kE,EAAI5uI,EAAE4uC,EACXo7B,EAAK6kE,EAAI9lI,EAAE6lC,EAIXk7B,EAAGE,GACHylB,EAAG,EAAGq/C,EAAG,IAETr/C,EAAG,EAAGq/C,EAAG,GAKb,IAAI/kE,EAAKD,EAAK2lB,EAAKi/C,GACfzkE,EAAKD,EAAK8kE,EAAKJ,GACf/3F,EAAKmzB,EAAK,EAAI,EAAI4kE,GAClBxsC,EAAKl4B,EAAK,EAAI,EAAI0kE,GAIlBK,EAAMP,IAFVxuI,GAAK,KAEauuI,GADlBxlI,GAAK,MAEDimI,EAAMR,GAAMxuI,EAAEyvF,EAAG8+C,GAAKxlI,EAAE+lI,IACxBG,EAAMT,GAAMxuI,EAAE,EAAEuuI,GAAKxlI,EAAE,IAEvBusG,EAAK,GAAMxrC,EAAGA,EAAGE,EAAGA,EAOpByf,EAAK,GAAM1f,EAAGA,EAAGE,EAAGA,EAOpBsrC,EAAK,GAAM5+D,EAAGA,EAAGurD,EAAGA,EASxB,OAAO,KAtBHoT,EAAG,EACE,GAELA,GAAMA,GACIA,EAAKy5B,EAAIX,KAAKtkE,EAAIE,KAG5Byf,EAAG,EACE,GAELA,GAAMA,GACIA,EAAKulD,EAAIZ,KAAKrkE,EAAIE,KAG5BsrC,EAAG,EACE,GAELA,GAAMA,GACIA,EAAK05B,EAAIb,KAAKz3F,EAAIurD,MAqK7B,IAAMgtC,GAAQhB,YChTLiB,GAAgBtkD,GAO5B,IALA,IAAMukD,EAAWvkD,EAAI,IACfC,EAAID,EACJkB,EAASia,GAAGja,OAAOlB,EAAGC,GACtB0U,EAAMzT,EAAOC,WAAW,MACxBwkC,EAAShxB,EAAI6vC,gBAAgBxkD,EAAGC,GAC7BlsD,EAAI,EAAGA,EAAIisD,EAAGjsD,IACnB,IAAK,IAAIC,EAAI,EAAGA,EAAIisD,EAAGjsD,IAAK,CACxB,IAAI7+B,EAAkB,GAAb6+B,EAAIgsD,EAAIjsD,GAGX0wG,EAAQF,EAAkE,IAAvDF,GAAMP,SAAS/vG,EAAI,GAAKwwG,EAAUvwG,EAAI,GAAKuwG,GAChEG,EAAe,KAAOL,GAAMP,SAAS/vG,EAAI,GAAK0wG,EAAOzwG,EAAI,GAAKywG,GAAS,GAAK,EAAI,IACpFC,IAAiBL,GAAMP,SAAS/vG,EAAI,GAAKwwG,EAAUvwG,EAAI,GAAKuwG,GAAY,GAAK,EAAI,IAGjF,IAAMI,EAAaxpC,GAAG9E,KAAKrW,EAAI,EAAGC,EAAI,EAAGlsD,EAAGC,GAK5C0wG,GAJcvpC,GAAGv9B,MACb,IAAM+mE,EAAc3kD,EAAI,MAASA,EAAI,IAAMqkD,GAAMP,SAAS/vG,EAAI,GAAK0wG,EAAOzwG,EAAI,GAAKywG,IACnF,EACA,GAKJC,GADsD,EAArCvpC,GAAGv9B,MAAM,EAAI+mE,EAAa3kD,EAAG,EAAG,GAGjD2lC,EAAOrpG,KAAKnnB,GAAK,EACjBwwH,EAAOrpG,KAAKnnB,EAAI,GAAK,EACrBwwH,EAAOrpG,KAAKnnB,EAAI,GAAK,EACrBwwH,EAAOrpG,KAAKnnB,EAAI,GAAKgmG,GAAGv9B,MAAM8mE,EAAc,EAAG,KAKvD,OADA/vC,EAAI8R,aAAakf,EAAQ,EAAG,GACrBzkC,WAIF0jD,GAAW5hI,EAActH,EAAci4B,GAC5C,IAAIkxG,EAAK1pC,GAAGqF,KAAKv0C,IAAIt4B,EAAGj4B,GACpBopI,EAAK3pC,GAAGqF,KAAKv0C,IAAIjpD,EAAGtH,GACpBukF,EAAIkb,GAAGv9B,MAAOu9B,GAAGqF,KAAKjK,IAAIuuC,EAAGD,GAAM1pC,GAAGqF,KAAKjK,IAAIsuC,EAAGA,GAAK,EAAK,GAChE,OAAO1pC,GAAGqF,KAAK54E,IAAIuzE,GAAGqF,KAAKv0C,IAAI64E,EAAI3pC,GAAGqF,KAAKlK,IAAIuuC,EAAI5kD,cAIvC8kD,GAAgB/kD,GAE5B,IAAMglD,EAAQ,IAYd,IAPA,IAAMjiI,EAAK,CAACgxB,EAAGixG,EAAQhlD,EAAGhsD,EAAGgsD,EAAKA,EAAIglD,GAChCn/C,EAAK,CAAC9xD,EAAGisD,EAAKA,EAAIglD,EAAQhxG,EAAGgxG,EAAQhlD,GAErCC,EAAID,EACJkB,EAASia,GAAGja,OAAOlB,EAAGC,GACxB0U,EAAMzT,EAAOC,WAAW,MACtBwkC,EAAShxB,EAAI6vC,gBAAgBxkD,EAAGC,GAC7BlsD,EAAI,EAAGA,EAAIisD,EAAGjsD,IACnB,IAAK,IAAIC,EAAI,EAAGA,EAAIisD,EAAGjsD,IAAK,CACxB,IAAM7+B,EAAkB,GAAb6+B,EAAIgsD,EAAIjsD,GAEf+iF,EAAM8tB,GAAU,CAAC7wG,EAAGA,EAAGC,EAAGA,GAAIjxB,EAAI8iF,GAEtCixB,EAAM3b,GAAGv9B,MACL,KAAQk5C,EAhBpBmuB,mBAgB2BjlD,IAf3BklD,mBAe+CllD,GAAsB,IACzD,EACA,KAGJ2lC,EAAOrpG,KAAKnnB,GAAK,EACjBwwH,EAAOrpG,KAAKnnB,EAAI,GAAK,EACrBwwH,EAAOrpG,KAAKnnB,EAAI,GAAK,EACrBwwH,EAAOrpG,KAAKnnB,EAAI,GAAK2hH,EAK7B,OADAniB,EAAI8R,aAAakf,EAAQ,EAAG,GACrBzkC,ECrFJ,IAAMikD,GAAa,GAC1BA,GAAW,GAAKb,GAAgB,KAChCa,GAAW,GAAKJ,GAAgB,gDCC1BK,GAAW,aAiBRC,GAAMp/C,EAAK/rE,EAAKF,GACrB,OAAOisE,GAAO/rE,EACRA,EACA+rE,GAAOjsE,EACHA,EACAisE,MAGDq/C,GAAN,iCAAMA,oBAAAA,GAANhtI,KAEKitI,WAAqB,EAF1BjtI,KAMKuoC,KAAe,GANpBvoC,KAOKw5G,QAAkB,GAPvBx5G,KAQKktI,SAAmB,IARxBltI,KAUKmtI,uBAAiC,EAVtCntI,KAWKotI,qBAA+B,EAXpCptI,KAYKqtI,wBAAkC,EAZvCrtI,KAcKstI,SAAkB,CAACnpI,EAAG,EAAGmmF,EAAG,EAAGjvD,EAAG,EAAGj4B,EAAG,GAd7CpD,KAeKutI,SAAmB,IAfxBvtI,KAqBKu7F,WAAqB,EArB1Bv7F,KAsBKwtI,UAA4B,CAAC/xG,EAAG,EAAGC,EAAG,EAAGw0D,SAAU,GAtBxDlwF,KAuBKytI,WAA6B,CAAChyG,EAAG,EAAGC,EAAG,EAAGw0D,SAAU,qBAvBnD88C,EAAU,EAgCXvvI,IAAA,2BAAR,SAA4Bq0F,GACxB9xF,KAAK0tI,aAAe7qC,GAAG6F,aAAa1oG,KAAK0tI,aAAc57C,MAGnDr0F,IAAA,sBAAR,WACI,OAAOsZ,KAAKqK,KAAKphB,KAAK1C,QAAQsrF,OAAOhB,MAAQklD,OAOzCrvI,IAAA,yBAAR,sBACUkwI,EAAQ3tI,KAAK2tI,MAAM9mI,KAAI,SAAA+0C,GAAQ,OAAA,QAChB57C,KAAK4tI,gBAAgB5tI,KAAK0tI,cAClClwI,SAAQ,SAACqwI,EAAW/rH,GACzB+rH,IACAF,EAAM7rH,GAAKw8E,EAASqvC,MAAM7rH,OAGlC9hB,KAAK8tI,UAAUH,GACf3tI,KAAK0tI,aAAe,QAGhBjwI,IAAA,wBAAR,SAAwBq0F,GASpB,IARA,IAAMi8C,EAAe/tI,KAAK2tI,MAAM9mI,KAAI,SAAA+0C,GAAQ,OAAA,KACtCoyF,EAAShuI,KAAKiuI,gBAOXpxI,GANTi1F,EAAS,CACLlrB,GAAI7vD,KAAKuK,MAAMwwE,EAAOlrB,GAAKkmE,IAC3BhmE,GAAI/vD,KAAKuK,MAAMwwE,EAAOhrB,GAAKgmE,IAC3Bt5F,GAAIz8B,KAAKuK,MAAMwwE,EAAOt+C,GAAKs5F,IAC3B/tC,GAAIhoF,KAAKuK,MAAMwwE,EAAOiN,GAAK+tC,MAEXlmE,GAAI/pE,GAAKi1F,EAAOt+C,GAAI32C,IACpC,IAAK,IAAIgG,EAAIivF,EAAOhrB,GAAIjkE,GAAKivF,EAAOiN,GAAIl8F,IACpCkrI,EAAalrI,EAAImrI,EAASnxI,IAAK,EAGvC,OAAOkxI,KAQHtwI,IAAA,oBAAR,SAAoBq0F,cACVk8C,EAAShuI,KAAKiuI,gBACdhvI,EAA6C,GA4BnD,OA3BqBe,KAAK4tI,gBAAgB97C,GAE7Bt0F,SAAQ,SAAC0wI,EAAMrxI,GACxB,GAAKqxI,EAAL,CAIA,IAAMC,EAAetxI,EAAImxI,EAAUlB,GAC7BsB,EAAcr3H,KAAKuK,MAAMzkB,EAAImxI,GAAUlB,GACvCuB,EAAS/vC,EAAQqvC,MAAM9wI,GAAG+qF,MAC1B0mD,EAAUhwC,EAAQqvC,MAAM9wI,GAAGgrF,OAE3B0mD,EAAe,CACjB3nE,GAAI7vD,KAAK2K,IAAI,EAAGowE,EAAOlrB,GAAKunE,GAC5BrnE,GAAI/vD,KAAK2K,IAAI,EAAGowE,EAAOhrB,GAAKsnE,GAC5B56F,GAAIz8B,KAAK6K,IAAIysH,EAAY,EAAGv8C,EAAOt+C,GAAK26F,GACxCpvC,GAAIhoF,KAAK6K,IAAI0sH,EAAa,EAAGx8C,EAAOiN,GAAKqvC,IAEzCG,EAAa3nE,GAAK2nE,EAAa/6F,IAAM+6F,EAAaznE,GAAKynE,EAAaxvC,IAGxE9/F,EAAOoE,KAAK,CACRye,MAAOjlB,EACPi1F,OAAQy8C,QAITtvI,KAMHxB,IAAA,uBAAR,SAAuBq0F,cACnB,GAAKA,EAAL,CAIA,IAAMi8C,EAAe/tI,KAAK4tI,gBAAgB97C,GACpCk8C,EAAShuI,KAAKiuI,gBAEpBF,EAAavwI,SAAQ,SAACo+C,EAAM/+C,GACxB,GAAK++C,IAAI0iD,EAASqvC,MAAM9wI,GAAxB,CAIA,IAAM4+B,EAAI5+B,EAAImxI,EACRtyG,EAAI3kB,KAAKuK,MAAMzkB,EAAImxI,GACnBtmD,GAAK3wE,KAAK6K,IAAI6Z,EAAIqxG,GAAWA,GAAQxuC,EAAOhhG,QAAQsrF,OAAOhB,OAAS,GAAKklD,GAAW,EACpFnlD,GAAK5wE,KAAK6K,IAAI8Z,EAAIoxG,GAAWA,GAAQxuC,EAAOhhG,QAAQsrF,OAAOf,QAAU,GAAKilD,GAAW,EAIrF0B,EADY3rC,GAAGja,OAAOlB,EAAGC,GACNkB,WAAW,MACpC2lD,EAAOzjC,UAASzM,EAAMhhG,QAAQsrF,QAASntD,EAAIqxG,IAAWpxG,EAAIoxG,MAErDa,MAAM9wI,GAAK2xI,EAAOtgC,aAAa,EAAG,EAAGxmB,EAAGC,WAI7ClqF,IAAA,mBAAR,SAAoBg+B,EAAGC,EAAG6M,cAEtBA,EAAOxxB,KAAK2K,IAAI,GAAY,IAAP6mB,GACrB,IAAMq+B,EAAK7vD,KAAK2K,IAAI,EAAG3K,KAAKuK,MAAMma,EAAI8M,IAChCu+B,EAAK/vD,KAAK2K,IAAI,EAAG3K,KAAKuK,MAAMoa,EAAI6M,IAChCiL,EAAKz8B,KAAK6K,IAAI5hB,KAAK1C,QAAQsrF,OAAOhB,MAAQ,EAAG7wE,KAAKqK,KAAKqa,EAAI8M,IAC3Dw2D,EAAKhoF,KAAK6K,IAAI5hB,KAAK1C,QAAQsrF,OAAOf,OAAS,EAAG9wE,KAAKqK,KAAKsa,EAAI6M,IAClE,GAAIq+B,EAAKpzB,GAAMszB,EAAKi4B,EAChB,MAAO,CACH56F,EAAG,EACHmmF,EAAG,EACHjvD,EAAG,EACHj4B,EAAG,GAIX,IAAoCqrI,EAAhCC,EAAK,EAAGC,EAAK,EAAGC,EAAK,EAAGC,EAAK,EAyBjC,OAvBqB7uI,KAAK8uI,YAAY,CAAEloE,GAAAA,EAAIE,GAAAA,EAAItzB,GAAAA,EAAIurD,GAAAA,IACvCvhG,SAAQ,SAAAM,GAKjB,IAJA,IAAM8pF,EAAK0W,EAAQqvC,MAAM7vI,EAAMgkB,OAAO8lE,MAChC5jE,EAAIs6E,EAAQqvC,MAAM7vI,EAAMgkB,OAAOkC,KAC/B8tE,EAASh0F,EAAMg0F,OAEZj1F,EAAIi1F,EAAOhrB,GAAIjqE,GAAKi1F,EAAOiN,GAAIliG,GAAK,EACzC,IAAK,IAAIgG,EAAIivF,EAAOlrB,GAAIshE,EAAKrrI,EAAI+qF,EAAQ,EAAgB,EAAZkK,EAAOlrB,GAAQ/jE,GAAKivF,EAAOt+C,GAAI3wC,GAAK,EAAGqlI,GAAM,GACtFuG,EAAQzqH,EAAKkkH,EAAK,GAClBwG,GAAM1qH,EAAKkkH,GAAMuG,EACjBE,GAAM3qH,EAAKkkH,EAAK,GAAKuG,EACrBG,GAAM5qH,EAAKkkH,EAAK,GAAKuG,EACrBI,GAAMJ,KAKP,IAAPI,IACAH,GAAMG,EACNF,GAAME,EACND,GAAMC,EACNA,EAAK93H,KAAK6K,IAAI,EAAGitH,IAEd,CACH1qI,EAAGuqI,EACHpkD,EAAGqkD,EACHtzG,EAAGuzG,EACHxrI,EAAGyrI,MAIHpxI,IAAA,gBAAR,SAAiBg+B,EAAWC,EAAW6M,GACnCA,EAAOxxB,KAAK2K,IAAI,GAAK6mB,GACrB,IAAIq+B,EAAK7vD,KAAK2K,IAAI,EAAG3K,KAAKuK,MAAMma,EAAI8M,IAChCu+B,EAAK/vD,KAAK2K,IAAI,EAAG3K,KAAKuK,MAAMoa,EAAI6M,IAChCiL,EAAKz8B,KAAK6K,IAAI5hB,KAAK1C,QAAQsrF,OAAOhB,MAAQ,EAAG7wE,KAAKqK,KAAKqa,EAAI8M,IAC3Dw2D,EAAKhoF,KAAK6K,IAAI5hB,KAAK1C,QAAQsrF,OAAOf,OAAS,EAAG9wE,KAAKqK,KAAKsa,EAAI6M,IAChE,OAAIq+B,EAAKpzB,GAAMszB,EAAKi4B,EACT,KAEJ,CAAEn4B,GAAAA,EAAIE,GAAAA,EAAItzB,GAAAA,EAAIurD,GAAAA,MAGjBthG,IAAA,gBAAR,SAAiBm+E,GAKb,eAHImzD,EAAQ,EACNC,EAAUpzD,EAAOrzC,KAAO,GAAK,KAAO,IACpC0mG,EAAU,GACP3jD,EAAI,EAAGA,EAAI0jD,EAAS1jD,IACzB2jD,EAAQ3jD,IAAMv0E,KAAKsF,SAAW,IAAO,MAAQ,GAIjD,IACM6yH,EADY,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GACXn4H,KAAKuK,MAAoB,EAAds6D,EAAOrzC,OACtC4mG,EAAyBD,EAAUA,EAAUA,EAAU,EACvDE,EAAgB,GACtB,GAAIF,EAEA,IADA,IAAI5iD,EAAI,EACCrkE,EAAI,EAAGA,EAAIinH,EAASjnH,IACzB,IAAK,IAAImmC,EAAI,EAAGA,EAAI8gF,EAAS9gF,IAAKk+B,GAAK,EACnC8iD,EAAc9iD,IAAMrkE,EAAI,GAAKinH,EAC7BE,EAAc9iD,EAAI,IAAMl+B,EAAI,GAAK8gF,EAK7C,IAAMG,EAA0C,GAA9Bt4H,KAAKwmB,IAAIq+C,EAAO49B,QAAS,GAErC81B,EAAe,EAAID,EACnBE,EAAsBF,EAAYC,EAClCE,EAAc5zD,EAAOrzC,KAAOqzC,EAAOrzC,KACnCknG,EAAcD,EAAcF,EAAe1zD,EAAO49B,QAClDk2B,GAAgB,EAAIH,GAAuB3zD,EAAO49B,QAGlDm2B,EAAe3vI,KAAK8uI,YAAY,CAClCloE,GAAIgV,EAAOhV,GACXE,GAAI8U,EAAO9U,GACXtzB,GAAIooC,EAAOpoC,GACXurD,GAAInjB,EAAOmjB,KAGTivC,EAAShuI,KAAKiuI,gBACpB0B,EAAanyI,SAAQ,SAAAM,GAcjB,IAbA,IAAMqwI,EAAerwI,EAAMgkB,MAAQksH,EAAUlB,GACvCsB,EAAcr3H,KAAKuK,MAAMxjB,EAAMgkB,MAAQksH,GAAUlB,GACjDuB,EAAS/vC,EAAQqvC,MAAM7vI,EAAMgkB,OAAO8lE,MACpC5jE,EAAIs6E,EAAQqvC,MAAM7vI,EAAMgkB,OAAOkC,KAU5BnnB,EAAIiB,EAAMg0F,OAAOhrB,GAAI8oE,EAAK/yI,EAAIuxI,EAAcxyD,EAAOlgD,EAAG7+B,GAAKiB,EAAMg0F,OAAOiN,GAAIliG,IAAK+yI,IACtF,IACI,IAAI/sI,EAAI/E,EAAMg0F,OAAOlrB,GACjBshE,EAAKrrI,EAAIwxI,EAAY,EAAsB,EAAlBvwI,EAAMg0F,OAAOlrB,GACtC7jB,EAAKlgD,EAAIsrI,EAAcvyD,EAAOngD,EAClC54B,GAAK/E,EAAMg0F,OAAOt+C,GAClB3wC,IACIqlI,GAAM,EACNnlF,IACN,CAIE,IAAI8sF,EAAS,EACb,GAAIV,EAAgB,CAChB,IAAK,IAAI3gF,EAAI,EAAGA,EAAI4gF,EAActyI,OAAQ0xD,GAAK,EAAG,CAC9C,IAAMuvC,EAAO8E,GAAG6E,WAAW3kD,EAAKqsF,EAAc5gF,GAAIohF,EAAKR,EAAc5gF,EAAI,IACrEuvC,GAAQyxC,IAGZK,GAAU9C,GAAM2C,EAAe3xC,EAAO0xC,EAAa,EAAG7zD,EAAO49B,UAEjE,IAAKq2B,EACD,SAEJA,GAAUV,MACP,CAEH,IAAM1T,EAAO1kH,KAAKwmB,IAAIwlB,EAAI,GAAKhsC,KAAKwmB,IAAIqyG,EAAI,GAC5C,GAAInU,GAAQ+T,EACR,SAEJK,EAAS9C,GAAM2C,EAAejU,EAAOgU,EAAa,EAAG7zD,EAAO49B,SAGhE,IAAMs2B,EAAY,EAAID,EAChBE,EAAQ/rH,EAAKkkH,EAAK,GAAK,IAE7B,GAAE5pC,EAAO6uC,sBAAuB,CAC5B,IAAM6C,EAAUp0D,EAAOz3E,EAAI0rI,EAAY7rH,EAAKkkH,GAAO4H,EAC7CG,EAAUr0D,EAAO0O,EAAIulD,EAAY7rH,EAAKkkH,EAAK,GAAM4H,EACjDI,EAAUt0D,EAAOvgD,EAAIw0G,EAAY7rH,EAAKkkH,EAAK,GAAM4H,EACnDC,IACA/rH,EAAKkkH,GAAMnxH,KAAKuK,MAAM0uH,EAASf,EAAQF,IACvC/qH,EAAKkkH,EAAK,GAAKnxH,KAAKuK,MAAM2uH,EAAShB,EAAQF,IAC3C/qH,EAAKkkH,EAAK,GAAKnxH,KAAKuK,MAAM4uH,EAASjB,EAAQF,SAE5C,CACH,IAAMoB,EAAUv0D,EAAOz3E,EAAI0rI,EAAY7rH,EAAKkkH,GAAM6H,EAAUD,EACtDM,EAAUx0D,EAAO0O,EAAIulD,EAAY7rH,EAAKkkH,EAAK,GAAK6H,EAAUD,EAC1DO,EAAUz0D,EAAOvgD,EAAIw0G,EAAY7rH,EAAKkkH,EAAK,GAAK6H,EAAUD,EAE5DQ,EAAW,EAAIR,GAAa,EAAIC,GACpC/rH,EAAKkkH,EAAK,GAAKnxH,KAAKuK,MAAMvK,KAAK6K,IAAI,IAAgB,IAAX0uH,GAAkB,IACtDA,IACAtsH,EAAKkkH,GAAMnxH,KAAKuK,MAAM6uH,EAAUG,EAAYrB,EAAQF,IACpD/qH,EAAKkkH,EAAK,GAAKnxH,KAAKuK,MAAM8uH,EAAUE,EAAYrB,EAAQF,IACxD/qH,EAAKkkH,EAAK,GAAKnxH,KAAKuK,MAAM+uH,EAAUC,EAAYrB,EAAQF,KAGhEA,GAASA,EAAQ,GAAKC,SAQ9BvxI,IAAA,oBAAR,SAAqB8qC,GACjB,OAAOs6D,GAAG2E,IACE,EAAPj/D,EAAY,EACL,EAAPA,EAAY,EACbs6D,GAAGv9B,OAAO/8B,EAAO,KAAQ,IAAW,EAAG,OAIvC9qC,IAAA,qBAAR,SAAsBg+B,EAAWC,EAAWhxB,EAAW0qF,OAI/Cm7C,EACAC,SAHJxwI,KAAKywI,WAAa,GAIlB,IAWIC,EAXAC,EAAa3wI,KAAKotI,oBAAuBr2H,KAAK2K,IAAI,EAAGhX,EAAI1K,KAAKuoC,MAAQxxB,KAAK2K,IAAI,EAAG1hB,KAAKuoC,MAEvFqoG,EAAQ5wI,KAAK6wI,YAAYF,GAEzBG,EAAOr1G,EACPs1G,EAAOr1G,EAQX,GAPU,OAAND,IACAq1G,EAAO9wI,KAAKwtI,UAAU/xG,EACtBs1G,EAAO/wI,KAAKwtI,UAAU9xG,GAKJ,IAAlB17B,KAAKktI,SACLltI,KAAKgxI,KAAOhxI,KAAKqzD,MAAMlvD,EACvBnE,KAAKixI,KAAOjxI,KAAKqzD,MAAMi3B,EACvBtqF,KAAKkxI,KAAOlxI,KAAKqzD,MAAMh4B,MACpB,CACH,IAAI81G,EACJ,GAAI/7C,EACA+7C,EAAU,CAAChtI,EAAGnE,KAAKoxI,YAAYjtI,EAAGmmF,EAAGtqF,KAAKoxI,YAAY9mD,EAAGjvD,EAAGr7B,KAAKoxI,YAAY/1G,EAAGj4B,EAAG,OAChF,CACH,IAAMiuI,EAAY,CAACP,EAAMC,EAAQ/wI,KAAKotI,oBAAuBr2H,KAAK2K,IAAI,GAAKhX,EAAI1K,KAAKuoC,MAAQxxB,KAAK2K,IAAI,GAAK1hB,KAAKuoC,OACzGupD,EAAS9xF,KAAKsxI,QAAQD,EAAU,GAAIA,EAAU,GAAIA,EAAU,IAClErxI,KAAKuxI,eAAez/C,GACpBq/C,EAAUnxI,KAAKwxI,WAAWH,EAAU,GAAIA,EAAU,GAAIA,EAAU,IAEpEX,EAAc,CAACvsI,EAAG,EAAGmmF,EAAG,EAAGjvD,EAAG,EAAGj4B,EAAG,GAEhC+tI,EAAQ/tI,EAAI,GAAyB,IAApBpD,KAAKstI,SAASlqI,GAC/BpD,KAAKstI,SAASnpI,EAAIgtI,EAAQhtI,EAC1BnE,KAAKstI,SAAShjD,EAAI6mD,EAAQ7mD,EAC1BtqF,KAAKstI,SAASjyG,EAAI81G,EAAQ91G,EAC1Br7B,KAAKstI,SAASlqI,EAAI+tI,EAAQ/tI,EAC1BstI,EAAYvsI,EAAInE,KAAKstI,SAASnpI,EAC9BusI,EAAYpmD,EAAItqF,KAAKstI,SAAShjD,EAC9BomD,EAAYr1G,EAAIr7B,KAAKstI,SAASjyG,EAC9Bq1G,EAAYttI,EAAIpD,KAAKstI,SAASlqI,IAGZ,IAAd+tI,EAAQ/tI,IACR+tI,EAAQhtI,EAAInE,KAAKqzD,MAAMlvD,EACvBgtI,EAAQ7mD,EAAItqF,KAAKqzD,MAAMi3B,EACvB6mD,EAAQ91G,EAAIr7B,KAAKqzD,MAAMh4B,EACvB81G,EAAQ/tI,EAAI,EAAIpD,KAAKktI,UAGzBltI,KAAKstI,SAASnpI,EAAI0+F,GAAG2E,IAAIxnG,KAAKstI,SAASnpI,EAAG0+F,GAAG2E,IAAIxnG,KAAKstI,SAASnpI,EAAGgtI,EAAQhtI,EAAGnE,KAAKutI,UAAW4D,EAAQ/tI,GACrGpD,KAAKstI,SAAShjD,EAAIuY,GAAG2E,IAAIxnG,KAAKstI,SAAShjD,EAAGuY,GAAG2E,IAAIxnG,KAAKstI,SAAShjD,EAAG6mD,EAAQ7mD,EAAGtqF,KAAKutI,UAAW4D,EAAQ/tI,GACrGpD,KAAKstI,SAASjyG,EAAIwnE,GAAG2E,IAAIxnG,KAAKstI,SAASjyG,EAAGwnE,GAAG2E,IAAIxnG,KAAKstI,SAASjyG,EAAG81G,EAAQ91G,EAAGr7B,KAAKutI,UAAW4D,EAAQ/tI,GACrGpD,KAAKstI,SAASlqI,EAAI2T,KAAK6K,IAAI,EAAG5hB,KAAKstI,SAASlqI,EAAI+tI,EAAQ/tI,GACxDstI,EAAYvsI,EAAInE,KAAKstI,SAASnpI,EAC9BusI,EAAYpmD,EAAItqF,KAAKstI,SAAShjD,EAC9BomD,EAAYr1G,EAAIr7B,KAAKstI,SAASjyG,EAC9Bq1G,EAAYttI,EAAIpD,KAAKstI,SAASlqI,GAMtC,IAAMquI,EAAiB,SAACr2H,GACpB,KAAEkjF,EAAO4uC,UAAY,GAAC5uC,EAASgvC,SAASlqI,GAAK,GAA7C,CAGA,IAAI07G,EAAS1jG,EAAIqwB,EACjB8kG,EAAajyC,EAAQmvC,WAAWv9C,UAAY,EAAI4uB,GAAUp0G,EAAIo0G,EAC9D0xB,EAAYlyC,EAAS+uC,uBAAsB/uC,EAAUkb,QAAU+2B,EAAgBA,EAAajyC,EAASkb,QACrGm3B,EAASryC,EAAS8uC,oBAAuBr2H,KAAK2K,IAAI,GAAK6uH,EAAajyC,EAAQ/1D,MAAQxxB,KAAK2K,IAAI,GAAG48E,EAAO/1D,MAClF,GAAnB+1D,EAAO4uC,aACA8D,KAAOnuC,GAAG2E,IAAGlJ,EAAM8yC,YAAYjtI,EAAGusI,EAAYvsI,EAAG26G,KACjDmyB,KAAOpuC,GAAG2E,IAAGlJ,EAAM8yC,YAAY9mD,EAAGomD,EAAYpmD,EAAGw0B,KACjDoyB,KAAOruC,GAAG2E,IAAGlJ,EAAM8yC,YAAY/1G,EAAGq1G,EAAYr1G,EAAGyjF,IAEpC,IAApBxgB,EAAO4uC,UAAyC,IAA3B5uC,EAAS8yC,YAAYhuI,MACnC4tI,KAAON,EAAYvsI,IACnB8sI,KAAOP,EAAYpmD,IACnB4mD,KAAOR,EAAYr1G,GAE5B,IAAMy2D,EAAMwM,EAAQgzC,QAAQl2H,EAAIqgB,EAAGrgB,EAAIsgB,EAAGi1G,GACtC7+C,MACK4/C,mBAAmB5/C,KACnB2+C,WAAWptI,KAAK,CACjBo4B,EAAGrgB,EAAIqgB,EACPC,EAAGtgB,EAAIsgB,EACP6M,KAAMooG,EACNn3B,QAASg3B,EACT5pE,GAAIkrB,EAAOlrB,GACXE,GAAIgrB,EAAOhrB,GACXtzB,GAAIs+C,EAAOt+C,GACXurD,GAAIjN,EAAOiN,GACX56F,EAAG0+F,GAAG2E,IAAGlJ,EAAMjrC,MAAMlvD,EAACm6F,EAAO0yC,KAAI1yC,EAAO4uC,UACxC5iD,EAAGuY,GAAG2E,IAAGlJ,EAAMjrC,MAAMi3B,EAACgU,EAAO2yC,KAAI3yC,EAAO4uC,UACxC7xG,EAAGwnE,GAAG2E,IAAGlJ,EAAMjrC,MAAMh4B,EAACijE,EAAO4yC,KAAI5yC,EAAO4uC,eAK1C,OAANzxG,EACAz7B,KAAK2xI,WAAWvnC,SAASwmC,EAAOa,GAEhCzxI,KAAK2xI,WAAW7oG,IAAIrN,EAAGC,EAAGk1G,EAAOa,GAGrCzxI,KAAKuxI,eAAevxI,KAAK0tI,cACzB1tI,KAAKywI,WAAWjzI,SAAQ,SAAAo+C,KACfg2F,QAAQh2F,MAEjB57C,KAAKywI,WAAa,GAElBzwI,KAAKoxI,YAAcV,KAWvBjzI,IAAA,mBAAA,SAAYkqF,GACR3nF,KAAKkqH,QAAUviC,KAGnBlqF,IAAA,gBAAA,WACI,OAAOuC,KAAKuoC,QAGhB9qC,IAAA,gBAAA,SAAS01C,GACLnzC,KAAKuoC,KAAO4K,KAGhB11C,IAAA,mBAAA,WACI,OAAOuC,KAAKw5G,WAGhB/7G,IAAA,mBAAA,SAAY0M,GACRnK,KAAKw5G,QAAUrvG,KAGnB1M,IAAA,oBAAA,WACI,OAAOuC,KAAKktI,YAGhBzvI,IAAA,oBAAA,SAAa49B,GACTr7B,KAAKktI,SAAW7xG,KAGpB59B,IAAA,iBAAA,SAAU0gC,GACNn+B,KAAKqzD,MAAQwvC,GAAGqD,QAAQ/nE,MAG5B1gC,IAAA,mBAAA,SAAY0gC,GACRn+B,KAAK1C,QAAU6gC,KAGnB1gC,IAAA,wBAAA,SAAiB49B,GACbr7B,KAAKotI,sBAAwB/xG,KAGjC59B,IAAA,2BAAA,SAAoB49B,GAChBr7B,KAAKqtI,yBAA2BhyG,KAGpC59B,IAAA,qBAAA,WACI,OAAOuC,KAAKmtI,yBAGhB1vI,IAAA,qBAAA,SAAc49B,GACVr7B,KAAKmtI,wBAA0B9xG,KAGnC59B,IAAA,qBAAA,WACI,OAAOuC,KAAKu7F,aAGhB99F,IAAA,qBAAA,SAAc49B,GACVr7B,KAAKitI,YAAc5xG,KAGvB59B,IAAA,kBAAA,SAAWg+B,EAAWC,EAAWhxB,cAC7B1K,KAAK6xI,aAAe,CAChBhnB,KAAM,CAAC,QAAS,cAChBinB,QAAS,IAIb,IAAMC,EAAah7H,KAAKqK,KAAKphB,KAAK1C,QAAQsrF,OAAOhB,MAAQklD,IAAY/1H,KAAKqK,KAAKphB,KAAK1C,QAAQsrF,OAAOf,OAASilD,IAC5G9sI,KAAK2tI,MAAQ,IAAIpgF,OAAOwkF,GAAYp5H,MAAM,IAAI9R,KAAI,SAAA+0C,GAAQ,OAAA,QAE1D57C,KAAKu7F,WAAY,EAEjB7wF,EAAIqM,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,EAAGlX,IAC5B,IAAI8lI,EAAgBxwI,KAAKqtI,uBAA2BrtI,KAAKw5G,QAAU9uG,EAAIA,EAAK1K,KAAKw5G,QAC7Em3B,EAAa3wI,KAAKotI,oBAAuBr2H,KAAK2K,IAAI,GAAKhX,EAAI1K,KAAKuoC,MAAQxxB,KAAK2K,IAAI,GAAK1hB,KAAKuoC,MAC/F,GAAsB,IAAlBvoC,KAAKktI,SACLltI,KAAKgxI,KAAOhxI,KAAKqzD,MAAMlvD,EACvBnE,KAAKixI,KAAOjxI,KAAKqzD,MAAMi3B,EACvBtqF,KAAKkxI,KAAOlxI,KAAKqzD,MAAMh4B,MACpB,CACHr7B,KAAKuxI,eAAevxI,KAAKsxI,QAAQ71G,EAAGC,EAAGi1G,IAEvC,IAAIQ,EAAUnxI,KAAKwxI,WACf/1G,EACAC,EACE17B,KAAKotI,oBAAuBr2H,KAAK2K,IAAI,GAAKhX,EAAI1K,KAAKuoC,MAAQxxB,KAAK2K,IAAI,GAAK1hB,KAAKuoC,OAElE,IAAd4oG,EAAQ/tI,EACRpD,KAAKstI,SAAW,CACZnpI,EAAGnE,KAAKqzD,MAAMlvD,EACdmmF,EAAGtqF,KAAKqzD,MAAMi3B,EACdjvD,EAAGr7B,KAAKqzD,MAAMh4B,EACdj4B,EAAG,EAAIpD,KAAKktI,UAGhBltI,KAAKstI,SAAW,CACZnpI,EAAGgtI,EAAQhtI,EACXmmF,EAAG6mD,EAAQ7mD,EACXjvD,EAAG81G,EAAQ91G,EACXj4B,EAAG+tI,EAAQ/tI,GAInBpD,KAAKgxI,KAAOhxI,KAAKstI,SAASnpI,EAC1BnE,KAAKixI,KAAOjxI,KAAKstI,SAAShjD,EAC1BtqF,KAAKkxI,KAAOlxI,KAAKstI,SAASjyG,EAQ9B,GALAr7B,KAAKoxI,YAAc,CAACjtI,EAAGnE,KAAKgxI,KAAM1mD,EAAGtqF,KAAKixI,KAAM51G,EAAGr7B,KAAKkxI,KAAM9tI,EAAGpD,KAAKstI,SAASlqI,GAE/EpD,KAAK0tI,aAAe,KACpB1tI,KAAKywI,WAAa,GAEdzwI,KAAKktI,SAAW,GAAKltI,KAAKstI,SAASlqI,EAAI,EAAG,CAC1C,IAAM0uF,EAAS9xF,KAAKsxI,QAAQ71G,EAAGC,EAAGi1G,GAC9B7+C,IACA9xF,KAAK0xI,mBAAmB5/C,GACxB9xF,KAAKywI,WAAWptI,KAAK,CACjBo4B,EAAGA,EACHC,EAAGA,EACH6M,KAAMooG,EACNn3B,QAASg3B,EACT5pE,GAAIkrB,EAAOlrB,GACXE,GAAIgrB,EAAOhrB,GACXtzB,GAAIs+C,EAAOt+C,GACXurD,GAAIjN,EAAOiN,GACX56F,EAAG0+F,GAAG2E,IAAIxnG,KAAKqzD,MAAMlvD,EAAGnE,KAAKgxI,KAAMhxI,KAAKktI,UACxC5iD,EAAGuY,GAAG2E,IAAIxnG,KAAKqzD,MAAMi3B,EAAGtqF,KAAKixI,KAAMjxI,KAAKktI,UACxC7xG,EAAGwnE,GAAG2E,IAAIxnG,KAAKqzD,MAAMh4B,EAAGr7B,KAAKkxI,KAAMlxI,KAAKktI,aAKpDltI,KAAKuxI,eAAevxI,KAAK0tI,cACzB1tI,KAAKywI,WAAWjzI,SAAQ,SAAAo+C,KACfg2F,QAAQh2F,MAEjB57C,KAAKywI,WAAa,GAElBzwI,KAAK2xI,WAAa,IAAI9uC,GAAGmG,WACzBhpG,KAAK2xI,WAAW7oG,IAAIrN,EAAGC,EAAG,GAAG,eAG7B17B,KAAKwtI,UAAU/xG,EAAIA,EACnBz7B,KAAKwtI,UAAU9xG,EAAIA,EACnB17B,KAAKwtI,UAAUt9C,SAAWxlF,EAC1B1K,KAAKytI,WAAa5qC,GAAGqD,QAAQlmG,KAAKwtI,WAE9BxtI,KAAK0tI,eAAiB1tI,KAAKitI,WAC3BjtI,KAAKgyI,sBAIbv0I,IAAA,eAAA,SAAQg+B,EAAWC,EAAWhxB,EAAW0qF,GAChCp1F,KAAKu7F,YAGVv7F,KAAKiyI,aAAax2G,EAAGC,EAAG17B,KAAKwtI,UAAUt9C,SAAUkF,GAEjDp1F,KAAKytI,WAAa5qC,GAAGqD,QAAQlmG,KAAKwtI,WAClCxtI,KAAKwtI,UAAU/xG,EAAIA,EACnBz7B,KAAKwtI,UAAU9xG,EAAIA,EACnB17B,KAAKwtI,UAAUt9C,SAAWxlF,EAEtB1K,KAAK0tI,eAAiB1tI,KAAKitI,WAC3BjtI,KAAKgyI,uBAIbv0I,IAAA,gBAAA,WACQuC,KAAK2xI,YACL3xI,KAAKiyI,aAAa,KAAM,KAAMjyI,KAAKwtI,UAAUt9C,UAAU,GAG3DlwF,KAAKu7F,WAAY,EACjBv7F,KAAK2xI,WAAa,KAEd3xI,KAAK0tI,cACL1tI,KAAKgyI,mBAGLhyI,KAAK6xI,cAAgB7xI,KAAKkqH,SAAWlqH,KAAK2tI,MAAMnnI,MAAK,SAAAo1C,GAAQ,QAAEA,OAC/D57C,KAAK6xI,aAAaC,QAAQzuI,KAAK,CAC3ButG,OAAQ,YACRh1B,OAAQ,CAAC57E,KAAK2tI,SAElB3tI,KAAKkqH,QAAQ7mH,KAAKrD,KAAK6xI,cACvB7xI,KAAK6xI,aAAe,MAExB7xI,KAAK2tI,MAAQ,QAOjBlwI,IAAA,kBAAA,SAAWkwI,cACDK,EAAShuI,KAAKiuI,gBACpBN,EAAMnwI,SAAQ,SAAC2vH,EAAWrrG,GACtB,GAAKqrG,EAAL,CAGA,IAAMghB,EAAersH,EAAQksH,EAAUlB,GACjCsB,EAAcr3H,KAAKuK,MAAMQ,EAAQksH,GAAUlB,KAC5CxvI,QAAQ6wG,aAAagf,EAAWghB,EAAaC,UAI1D3wI,IAAA,wBAAA,SAAiBmpE,EAAYE,EAAYtzB,EAAYurD,cAIjD,GAHA/+F,KAAKwtI,UAAU/xG,EAAI+X,EACnBxzC,KAAKwtI,UAAU9xG,EAAIqjE,GAEf/+F,KAAKu7F,gBAAoBl9F,IAAPuoE,EAAtB,CAIA,IAAMmrE,EAAah7H,KAAKqK,KAAKphB,KAAK1C,QAAQsrF,OAAOhB,MAAQklD,IAAY/1H,KAAKqK,KAAKphB,KAAK1C,QAAQsrF,OAAOf,OAASilD,IAC5G9sI,KAAK2tI,MAAQ,IAAIpgF,OAAOwkF,GAAYp5H,MAAM,IAAI9R,KAAI,SAAA+0C,GAAQ,OAAA,QAC1D57C,KAAK0tI,aAAe,KACpB1tI,KAAKywI,WAAa,GAElBzwI,KAAKuxI,eAAevxI,KAAKsxI,QAAQ1qE,EAAIE,EAAI/vD,KAAK2K,IAAI,GAAK1hB,KAAKuoC,QAC5D,IAAI4oG,EAAUnxI,KAAKwxI,WAAW5qE,EAAIE,EAAI/vD,KAAK2K,IAAI,GAAK1hB,KAAKuoC,OAEvC,IAAd4oG,EAAQ/tI,EACRpD,KAAKstI,SAAW,CACZnpI,EAAGnE,KAAKqzD,MAAMlvD,EACdmmF,EAAGtqF,KAAKqzD,MAAMi3B,EACdjvD,EAAGr7B,KAAKqzD,MAAMh4B,EACdj4B,EAAG,EAAIpD,KAAKktI,UAGhBltI,KAAKstI,SAAW,CACZnpI,EAAGgtI,EAAQhtI,EACXmmF,EAAG6mD,EAAQ7mD,EACXjvD,EAAG81G,EAAQ91G,EACXj4B,EAAG+tI,EAAQ/tI,GAInBpD,KAAKgxI,KAAOhxI,KAAKqzD,MAAMlvD,GAAK,EAAInE,KAAKstI,SAASlqI,IAAMpD,KAAKktI,SAAWltI,KAAKstI,SAASnpI,EAAInE,KAAKqzD,MAAMlvD,GAAK,EAAInE,KAAKktI,WAAaltI,KAAKstI,SAASlqI,EAC1IpD,KAAKixI,KAAOjxI,KAAKqzD,MAAMi3B,GAAK,EAAItqF,KAAKstI,SAASlqI,IAAMpD,KAAKktI,SAAWltI,KAAKstI,SAAShjD,EAAItqF,KAAKqzD,MAAMi3B,GAAK,EAAItqF,KAAKktI,WAAaltI,KAAKstI,SAASlqI,EAC1IpD,KAAKkxI,KAAOlxI,KAAKqzD,MAAMh4B,GAAK,EAAIr7B,KAAKstI,SAASlqI,IAAMpD,KAAKktI,SAAWltI,KAAKstI,SAASjyG,EAAIr7B,KAAKqzD,MAAMh4B,GAAK,EAAIr7B,KAAKktI,WAAaltI,KAAKstI,SAASlqI,EAY1I,IATA,IACMotI,EAAgBxwI,KAAKqtI,uBADjB,EAC4CrtI,KAAKw5G,QADjD,EACoEx5G,KAAKw5G,QAC7Em3B,EAAa3wI,KAAKotI,oBAAuBr2H,KAAK2K,IAAI,GAF9C,EAEuD1hB,KAAKuoC,MAAQxxB,KAAK2K,IAAI,GAAK1hB,KAAKuoC,MAG3F2pG,EAAYn7H,KAAK4yB,KAAK5yB,KAAKwmB,IAAIiW,EAAKozB,EAAI,GAAO7vD,KAAKwmB,IAAIwhE,EAAKj4B,EAAI,IACjEqrE,GAAM3+F,EAAKozB,GAAMsrE,EACjBE,GAAMrzC,EAAKj4B,GAAMorE,EACjBtB,EAAQ5wI,KAAK6wI,YAAYF,GACtB0B,EAAW,EAAGA,GAAYH,EAAWG,GAAYzB,EAAO,CAC7D,IAAM9+C,EAAS9xF,KAAKsxI,QAAQ1qE,EAAKurE,EAAKE,EAAUvrE,EAAKsrE,EAAKC,EAAU1B,GAChE7+C,IACA9xF,KAAKuxI,eAAez/C,GACpB9xF,KAAKywI,WAAWptI,KAAK,CACjBo4B,EAAGmrC,EAAKurE,EAAKE,EACb32G,EAAGorC,EAAKsrE,EAAKC,EACb9pG,KAAMooG,EACNn3B,QAASg3B,EACT5pE,GAAIkrB,EAAOlrB,GACXE,GAAIgrB,EAAOhrB,GACXtzB,GAAIs+C,EAAOt+C,GACXurD,GAAIjN,EAAOiN,GACX56F,EAAG0+F,GAAG2E,IAAIxnG,KAAKqzD,MAAMlvD,EAAGnE,KAAKgxI,KAAMhxI,KAAKktI,UACxC5iD,EAAGuY,GAAG2E,IAAIxnG,KAAKqzD,MAAMi3B,EAAGtqF,KAAKixI,KAAMjxI,KAAKktI,UACxC7xG,EAAGwnE,GAAG2E,IAAIxnG,KAAKqzD,MAAMh4B,EAAGr7B,KAAKkxI,KAAMlxI,KAAKktI,aAIpDltI,KAAKywI,WAAWjzI,SAAQ,SAAAo+C,KACfg2F,QAAQh2F,MAEjB57C,KAAKywI,WAAa,GAEdzwI,KAAKkqH,SAAWlqH,KAAK2tI,MAAMnnI,MAAK,SAAAo1C,GAAQ,QAAEA,OAC1C57C,KAAK8tI,UAAU9tI,KAAK2tI,OACpB3tI,KAAK6xI,aAAe,CAChBhnB,KAAM,CAAC,QAAS,cAChBinB,QAAS,CAAC,CACNlhC,OAAQ,YACRh1B,OAAQ,CAAC57E,KAAK2tI,UAGtB3tI,KAAKkqH,QAAQ7mH,KAAKrD,KAAK6xI,cACvB7xI,KAAK6xI,aAAe,MAExB7xI,KAAK2tI,MAAQ,UA7uBRX,EAAN,GC1BDsF,GAAezvC,GAAGja,OAAO,GAAI,IAC7B2pD,GAAYD,GAAazpD,WAAW,iDCcpC2pD,GAAY,IAyHf,SACMC,GAAOtlB,EAAsBziH,GAwBlC,IApBA,IAAMgoI,GAFNhoI,EAAIm4F,GAAGqD,QAAQx7F,IAECioI,MAAMpqG,KAChBqqG,EAAKloI,EAAEioI,MAAM5qC,OAAOtsE,EACpBo3G,EAAKnoI,EAAEioI,MAAM5qC,OAAOrsE,EAUtBo3G,EAASpoI,EAAEqoI,GAAGr3G,EAAIyxF,EAAUvlC,MAAQl9E,EAAEqoI,GAAGt3G,EAEvCmG,EAA6B,GADtBl3B,EAAEsoI,GAAGt3G,EAAIyxF,EAAUvlC,MAAQl9E,EAAEsoI,GAAGv3G,EACpBq3G,GAGrB/D,EAAQ,EACNC,EAAU0D,EAAQ,GAAK,KAAO,IAC9BzD,EAAU,GACPpyI,EAAI,EAAGA,EAAImyI,EAASnyI,IACzBoyI,EAAQpyI,IAAMka,KAAKsF,SAAW,IAAO,MAAQ,GAGjD,IAAM42H,EAAal8H,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,EAAGlX,EAAEioI,MAAMpqG,KAAO,IAEpD2qG,EAAQ,SAACC,EAAIC,EAAIC,EAAIC,GAEvB,IA7CO3lD,EAAK/rE,EAAKF,EA6CXq8E,EAAO8E,GAAG9E,KAAK60C,EAAIC,EAAIQ,EAAIC,GAC3B30C,EAAM,EAAIj0F,EAAEioI,MAAMn5B,SAAW,GA9ClB93F,EA8C2E,GA9CrFisE,GA8CuCoQ,GAAQ20C,EAAQO,IAAeA,KA9CjErxH,EA8C6E,GA5CvFA,EACA+rE,GAAOjsE,EACHA,EACAisE,IA2CN,GAAY,IAARgR,EAAJ,CAIA,GAAKwuB,EAAUnpG,KAAKmvH,EAAK,GAElB,GAAKhmB,EAAUnpG,KAAKovH,EAAK,GAIzB,CAIH,IAAIG,EAEAA,EADApmB,EAAUnpG,KAAKmvH,EAAK,GAAKhmB,EAAUnpG,KAAKovH,EAAK,GACtC,EAAIjmB,EAAUnpG,KAAKmvH,EAAK,GAAKhmB,EAAUnpG,KAAKovH,EAAK,IAAM,EAAIz0C,GAE3DwuB,EAAUnpG,KAAKovH,EAAK,GAAKjmB,EAAUnpG,KAAKmvH,EAAK,GAAKx0C,EAM7DwuB,EAAUnpG,KAAKovH,GAAMr8H,KAAKuK,MAAMuhF,GAAG2E,IAAI2lB,EAAUnpG,KAAKmvH,GAAKhmB,EAAUnpG,KAAKovH,EAAK,GAAIG,GAAQtE,EAAQF,IACnG5hB,EAAUnpG,KAAKovH,EAAK,GAAKr8H,KAAKuK,MAAMuhF,GAAG2E,IAAI2lB,EAAUnpG,KAAKmvH,EAAK,GAAIhmB,EAAUnpG,KAAKovH,EAAK,GAAIG,GAAQtE,EAAQF,IAC3G5hB,EAAUnpG,KAAKovH,EAAK,GAAKr8H,KAAKuK,MAAMuhF,GAAG2E,IAAI2lB,EAAUnpG,KAAKmvH,EAAK,GAAIhmB,EAAUnpG,KAAKovH,EAAK,GAAIG,GAAQtE,EAAQF,IAE3GA,GAASA,EAAQ,GAAKC,OArBtB7hB,EAAUnpG,KAAKovH,GAAMjmB,EAAUnpG,KAAKmvH,EAAK,GACzChmB,EAAUnpG,KAAKovH,EAAK,GAAKjmB,EAAUnpG,KAAKmvH,EAAK,GAC7ChmB,EAAUnpG,KAAKovH,EAAK,GAAKjmB,EAAUnpG,KAAKmvH,EAAK,QAsB5CzoI,EAAEioI,MAAMa,YACTrmB,EAAUnpG,KAAKovH,EAAK,GAAKr8H,KAAKuK,MAAMuhF,GAAG2E,IAAI2lB,EAAUnpG,KAAKmvH,EAAK,GAAIhmB,EAAUnpG,KAAKovH,EAAK,GAAIz0C,GAAO,OAKpG80C,EAAe,EAAT/oI,EAAEsoI,GAAGv3G,EACXi4G,EAAMD,EAAuB,GAAhB/oI,EAAE69B,KAAKm/C,EAAI,GAG9B,GAAIh9E,EAAEqoI,GAAGr3G,EAAIhxB,EAAEsoI,GAAGt3G,EACd,IAAK,IAAIA,EAAIhxB,EAAE69B,KAAKo/C,EAAI,EAAGgsD,EAAKjpI,EAAEsoI,GAAGt3G,EAAIhxB,EAAE69B,KAAKo/C,EAAI,EAAGjsD,GAAK,EAAGA,IAAKi4G,IAEhE,IADA,IAAMC,GAAUl4G,EAAIhxB,EAAEsoI,GAAGt3G,GAAKyxF,EAAUvlC,MAAQ,EACvCnsD,EAAIi4G,EAAME,EAAQpgG,EAAKkgG,EAAME,EAAShyG,EAAQiyG,EAAKnpI,EAAEsoI,GAAGv3G,EAAI/wB,EAAE69B,KAAKm/C,EAAI,EAAGjsD,GAAKg4G,EAAMG,EAAQn4G,GAAK,EAAG+X,GAAM,EAAGqgG,IACnHX,EAAM1/F,EAAI/X,EAAGo4G,EAAIF,QAGtB,GAAIjpI,EAAEqoI,GAAGr3G,EAAIhxB,EAAEsoI,GAAGt3G,EACrB,IAAK,IAAIorC,EAAI,EAAGgtE,EAAKppI,EAAEsoI,GAAGt3G,EAAGorC,EAAIp8D,EAAE69B,KAAKo/C,EAAG7gB,IAAKgtE,IAE5C,IADA,IAAMC,GAAUjtE,EAAIp8D,EAAEsoI,GAAGt3G,GAAKyxF,EAAUvlC,MAAQ,EACvChhB,EAAI8sE,EAAMK,EAAQC,EAAKN,EAAMK,EAASnyG,EAAQqyG,EAAKvpI,EAAEsoI,GAAGv3G,EAAI/wB,EAAE69B,KAAKm/C,EAAI,EAAG9gB,GAAK6sE,EAAMM,EAAQntE,GAAK,EAAGotE,GAAM,EAAGC,IACnHf,EAAMc,EAAIptE,EAAGqtE,EAAIH,QAIzB,GAAIppI,EAAEqoI,GAAGt3G,EAAI/wB,EAAEsoI,GAAGv3G,EACd,IAAK,IAAIsjE,EAAIr0F,EAAE69B,KAAKo/C,EAAI,EAAGusD,EAAKxpI,EAAEsoI,GAAGt3G,EAAIhxB,EAAE69B,KAAKo/C,EAAI,EAAGoX,GAAK,EAAGA,IAAKm1C,IAEhE,IADA,IAAMC,GAAUp1C,EAAIr0F,EAAEsoI,GAAGt3G,GAAKyxF,EAAUvlC,MAAQ,EACvCwsD,EAAIV,EAAMS,EAAQE,EAAKX,EAAMS,EAASvyG,EAAQ0yG,EAAK5pI,EAAEsoI,GAAGv3G,EAAI/wB,EAAE69B,KAAKm/C,EAAI,EAAG0sD,GAAKX,EAAMU,EAAQC,GAAK,EAAGC,GAAM,EAAGC,IACnHpB,EAAMmB,EAAID,EAAGE,EAAIJ,QAIzB,IAAK,IAAIK,EAAI,EAAGC,EAAK9pI,EAAEsoI,GAAGt3G,EAAG64G,EAAI7pI,EAAE69B,KAAKo/C,EAAG4sD,IAAKC,IAE5C,IADA,IAAMC,GAAUF,EAAI7pI,EAAEsoI,GAAGt3G,GAAKyxF,EAAUvlC,MAAQ,EACvC8sD,EAAIjB,EAAMgB,EAAQE,EAAKlB,EAAMgB,EAAS7yG,EAAQgzG,EAAKlqI,EAAEsoI,GAAGv3G,EAAGi5G,EAAIhB,EAAMe,EAAQC,GAAK,EAAGC,GAAM,EAAGC,IACnG1B,EAAMyB,EAAID,EAAGE,EAAIJ,OAUxBK,GAAN,iCAAMA,oBAAAA,GAAN70I,KAGKkqH,QAA8B,IAAI4qB,GAAGC,eAH1C/0I,KAMKg1I,aAAqB,CAAC7wI,EAAG,EAAGmmF,EAAG,EAAGjvD,EAAG,GAN1Cr7B,KAOKi1I,YAAsB,GAP3Bj1I,KAQKk1I,eAAyB,mBAR9Bl1I,KASKm1I,eAAyB,GAT9Bn1I,KAWKo1I,wBAAkC,EAXvCp1I,KAYKq1I,2BAAqC,EAZ1Cr1I,KAaKmtI,uBAAiC,EAbtCntI,KAgBKwtI,UAA4B,CAAC/xG,EAAG,EAAGC,EAAG,EAAGw0D,SAAU,GAhBxDlwF,KAiBKytI,WAA6B,CAAChyG,EAAG,EAAGC,EAAG,EAAGw0D,SAAU,GAjBzDlwF,KAoBKu7F,WAAqB,EApB1Bv7F,KAsBK2xI,WAAkB,KAtBvB3xI,KA6BKywI,WAA8B,qBA7B7BoE,EAAW,EAiCpBp3I,IAAA,2BAAA,SAAmBq0F,GACf9xF,KAAK0tI,aAAe7qC,GAAG6F,aAAa1oG,KAAK0tI,aAAc57C,MAG3Dr0F,IAAA,mCAAA,SAA4BmpE,EAAIE,EAAItzB,EAAIurD,GACpC/+F,KAAKs1I,qBAAuBzyC,GAAG6F,aAC3B1oG,KAAKs1I,qBACL,CAAE1uE,GAAAA,EAAIE,GAAAA,EAAItzB,GAAAA,EAAIurD,GAAAA,OAOtBthG,IAAA,uBAAA,sBAEUswI,EAAe/tI,KAAKu1I,YAAY1uI,KAAI,SAAA+0C,GAAQ,OAAA,KAE5Ck2C,EAAoB,GACpBk8C,EAASj3H,KAAKqK,KAAKphB,KAAKw1I,cAAc5tD,MAAQ4qD,IAE/CxyI,KAAK0tI,eAGV57C,EAAOzuF,KAAK,CACRujE,GAAI7vD,KAAKuK,MAAMthB,KAAK0tI,aAAa9mE,GAAK4rE,IACtC1rE,GAAI/vD,KAAKuK,MAAMthB,KAAK0tI,aAAa5mE,GAAK0rE,IACtCh/F,GAAIz8B,KAAKuK,MAAMthB,KAAK0tI,aAAal6F,GAAKg/F,IACtCzzC,GAAIhoF,KAAKuK,MAAMthB,KAAK0tI,aAAa3uC,GAAKyzC,MAE1C1gD,EAAOt0F,SAAQ,SAAAo+C,GACX,IAAK,IAAI/+C,EAAI++C,EAAKgrB,GAAI/pE,GAAK++C,EAAKpI,GAAI32C,IAChC,IAAK,IAAIgG,EAAI+4C,EAAKkrB,GAAIjkE,GAAK+4C,EAAKmjD,GAAIl8F,IAChCkrI,EAAalrI,EAAImrI,EAASnxI,IAAK,KAK3CkxI,EAAavwI,SAAQ,SAACo+C,EAAM/+C,GACxB,GAAK++C,IAAI0iD,EAASi3C,YAAY14I,GAA9B,GAIK04I,YAAY14I,IAAK,EACtB,IAAM4+B,EAAI5+B,EAAImxI,EACRtyG,EAAI3kB,KAAKuK,MAAMzkB,EAAImxI,GACnBtmD,GAAK3wE,KAAK6K,IAAI6Z,EAAI+2G,GAAYA,GAASl0C,EAAOk3C,cAAc5tD,OAAS,GAAK4qD,GAAY,EACtF7qD,GAAK5wE,KAAK6K,IAAI8Z,EAAI82G,GAAYA,GAASl0C,EAAOk3C,cAAc3tD,QAAU,GAAK2qD,GAAY,EAIvFhE,EADY3rC,GAAGja,OAAOlB,EAAGC,GACNkB,WAAW,MACpC2lD,EAAOzjC,UAASzM,EAAMhhG,QAAQsrF,QAASntD,EAAI+2G,IAAY92G,EAAI82G,IAI3D,IAFA,IAAMxuH,EAAOwqH,EAAOtgC,aAAa,EAAG,EAAGxmB,EAAGC,GAEjC2E,EAAI,EAAGA,EAAI3E,EAAG2E,IACnB,IAAK,IAAIzpF,EAAI,EAAGqlI,EAAK57C,EAAI5E,EAAI,EAAGygD,EAAwE,IAAjEzsG,EAAI82G,GAAYlmD,GAACgS,EAASk3C,cAAc5tD,MAAQnsD,EAAI+2G,IAAgB3vI,EAAI6kF,EAAG7kF,IAAKqlI,GAAM,EAAGC,GAAM,IAC7HqN,cAAcxxH,KAAKmkH,GAAMnkH,EAAKA,KAAKkkH,KACnCsN,cAAcxxH,KAAKmkH,EAAK,GAAKnkH,EAAKA,KAAKkkH,EAAK,KAC5CsN,cAAcxxH,KAAKmkH,EAAK,GAAKnkH,EAAKA,KAAKkkH,EAAK,KAC5CsN,cAAcxxH,KAAKmkH,EAAK,GAAKnkH,EAAKA,KAAKkkH,EAAK,WAcjEzqI,IAAA,gBAAA,SAASg+B,EAAWC,EAAW6M,EAAcixE,GACzC,GAAKx5G,KAAKqpG,QAAV,CAQA9gE,EAAOxxB,KAAK4gD,MAAMpvB,GAGlB,IAAMm/C,EAAI3wE,KAAK4gD,MAAa,EAAPpvB,GACfo/C,EAAI5wE,KAAK4gD,MAAa,EAAPpvB,GAEfupD,EA5UX,SAEC2jD,EACAC,EACA3C,EACAC,EACAzqG,GAOA,GAAIwqG,EAAGt3G,IAAMu3G,EAAGv3G,GAAKs3G,EAAGr3G,IAAMs3G,EAAGt3G,EAC7B,OAAO,KAGXq3G,EAAKlwC,GAAGqD,QAAQ6sC,GAChBC,EAAKnwC,GAAGqD,QAAQ8sC,GAChBzqG,EAAOs6D,GAAGqD,QAAQ39D,GAMd,IAAI6gD,EAAM,EACNx+E,EAAQ,EACR4oG,EAAS,EACT7oG,EAAO,EAkCX,OAhCIooI,EAAGt3G,EAAI,IACP9wB,GAAQooI,EAAGt3G,GAEXs3G,EAAGr3G,EAAI,IACP0tD,GAAO2pD,EAAGr3G,GAEVs3G,EAAGv3G,EAAI,IACP9wB,EAAOoM,KAAK2K,IAAI/W,GAAOqoI,EAAGv3G,IAE1Bu3G,EAAGt3G,EAAI,IACP0tD,EAAMryE,KAAK2K,IAAI0nE,GAAM4pD,EAAGt3G,IAExBq3G,EAAGt3G,EAAI8M,EAAKm/C,EAAI+tD,IAChB7qI,EAAQmoI,EAAGt3G,EAAI8M,EAAKm/C,EAAI+tD,GAExB1C,EAAGr3G,EAAI6M,EAAKo/C,EAAI+tD,IAChBliC,EAASu/B,EAAGr3G,EAAI6M,EAAKo/C,EAAI+tD,GAEzB1C,EAAGv3G,EAAI8M,EAAKm/C,EAAI+tD,IAChB7qI,EAAQmM,KAAK2K,IAAI9W,EAAOooI,EAAGv3G,EAAI8M,EAAKm/C,EAAI+tD,IAExCzC,EAAGt3G,EAAI6M,EAAKo/C,EAAI+tD,IAChBliC,EAASz8F,KAAK2K,IAAI8xF,EAAQw/B,EAAGt3G,EAAI6M,EAAKo/C,EAAI+tD,IAG9C3C,EAAGt3G,GAAK9wB,EACRqoI,EAAGv3G,GAAK9wB,EACRooI,EAAGr3G,GAAK0tD,EACR4pD,EAAGt3G,GAAK0tD,EAER7gD,EAAKm/C,EAAIn/C,EAAKm/C,EAAI/8E,EAAOC,EACzB29B,EAAKo/C,EAAIp/C,EAAKo/C,EAAIyB,EAAMoqB,EACpBjrE,EAAKm/C,GAAK,GAAKn/C,EAAKo/C,GAAK,EAClB,KAIR,CACHorD,GAAI,CACAt3G,EAAGs3G,EAAGt3G,EACNC,EAAGq3G,EAAGr3G,GAEVs3G,GAAI,CACAv3G,EAAGu3G,EAAGv3G,EACNC,EAAGs3G,EAAGt3G,GAEV6M,KAAM,CACFm/C,EAAGn/C,EAAKm/C,EACRC,EAAGp/C,EAAKo/C,IA8PGguD,CACX31I,KAAKw1I,cAAc5tD,MACnB5nF,KAAKw1I,cAAc3tD,OACnB,CACIpsD,EAAG1kB,KAAK4gD,MAAM33D,KAAKqpG,QAAQ5tE,EAAI8M,GAC/B7M,EAAG3kB,KAAK4gD,MAAM33D,KAAKqpG,QAAQ3tE,EAAI6M,IAEnC,CACI9M,EAAG1kB,KAAK4gD,MAAMl8B,EAAI8M,GAClB7M,EAAG3kB,KAAK4gD,MAAMj8B,EAAI6M,IAEtB,CACIm/C,EAAAA,EACAC,EAAAA,IAIR,GAAImK,EAAQ,CACR,IAAMlW,EAAwB,CAC1Bm3D,GAAIjhD,EAAOihD,GACXC,GAAIlhD,EAAOkhD,GACXzqG,KAAMupD,EAAOvpD,KACboqG,MAAO,CACH5qC,OAAQ,CAAEtsE,EAAAA,EAAGC,EAAAA,GACb6M,KAAAA,EACAixE,QAAAA,EACAg6B,UAAWxzI,KAAKmtI,wBAGxBntI,KAAK0xI,mBAAmB,CACpB9qE,GAAIgV,EAAOo3D,GAAGv3G,EACdqrC,GAAI8U,EAAOo3D,GAAGt3G,EACd8X,GAAIooC,EAAOo3D,GAAGv3G,EAAwB,EAApBmgD,EAAO+2D,MAAMpqG,KAC/Bw2D,GAAInjB,EAAOo3D,GAAGt3G,EAAwB,EAApBkgD,EAAO+2D,MAAMpqG,OAEnCvoC,KAAKywI,WAAWptI,KAAKu4E,GAGzB57E,KAAKqpG,QAAU,CACX5tE,EAAGA,EACHC,EAAGA,QArDH17B,KAAKqpG,QAAU,CACX5tE,EAAGA,EACHC,EAAGA,MAuDfj+B,IAAA,qBAAA,SAAcg+B,EAAWC,EAAW6M,EAAc2nD,cAC9ClwF,KAAKywI,WAAa,GAEM,OAApBzwI,KAAK2xI,aACL3xI,KAAK2xI,WAAa,IAAI9uC,GAAGmG,WACzBhpG,KAAK2xI,WAAW7oG,IAAI9oC,KAAKwtI,UAAU/xG,EAAGz7B,KAAKwtI,UAAU9xG,EAAG,GAAG,gBAG/D,IAAMk6G,EAAU,GAEVC,EAAc,SAACz6H,GACjB,IAAMm1H,EAAgB1tC,GAAG2E,IAAGlJ,EAAMmvC,WAAWv9C,SAAUA,EAAU90E,EAAIqwB,GAC/D+kG,EAAYlyC,EAAQ62C,gBAAc72C,EAAS+2C,0BAA6B9E,EAAgBA,EAAiB,GACzGI,EAAY55H,KAAK2K,IAAI,GAAG48E,EAAO22C,aAAW32C,EAAS82C,uBAAyB7E,EAAgB,IAClGqF,EAAQvyI,KAAK,CAAC+X,EAAIqgB,EAAGrgB,EAAIsgB,EAAGi1G,EAAWH,EAAcp1H,EAAIk/E,SAGvDw7C,EAAevtG,EAAOvoC,KAAKk1I,eAAiB,EACxC,OAANz5G,EACAz7B,KAAK2xI,WAAWvnC,SAAS0rC,EAAcD,GAEvC71I,KAAK2xI,WAAW7oG,IAAIrN,EAAGC,EAAGo6G,EAAcD,GAK5C,IAAK,IAAIh5I,EAAI,EAAGA,EAAI+4I,EAAQ94I,OAAQD,IAAK,CACrC,IAAM++C,EAAOg6F,EAAQ/4I,GACrBmD,KAAKsxI,QAAQ11F,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IACpCA,EAGb57C,KAAKuxI,iBAEL,IAAK,IAAIjmD,EAAI,EAAGA,EAAItrF,KAAKywI,WAAW3zI,OAAQwuF,IACxCmnD,GAAOzyI,KAAKw1I,cAAex1I,KAAKywI,WAAWnlD,OAUnD7tF,IAAA,kBAAA,SAAWg+B,EAAWC,EAAWhxB,GAC7B1K,KAAK6xI,aAAe,CAChBhnB,KAAM,CAAC,QAAS,eAChBinB,QAAS,IAGbpnI,EAAIm4F,GAAGv9B,MAAM56D,EAAG,EAAG,GACnB,IAAM8lI,EAAexwI,KAAKq1I,0BAA6Br1I,KAAKm1I,eAAiBzqI,EAAIA,EAAK1K,KAAKm1I,eACrFxE,EAAY3wI,KAAKo1I,uBAAyBr+H,KAAK2K,IAAI,GAAKhX,EAAI1K,KAAKi1I,aAAel+H,KAAK2K,IAAI,GAAK1hB,KAAKi1I,aAEzGj1I,KAAKqpG,QAAU,KACfrpG,KAAKu7F,WAAY,EAEjBv7F,KAAKw1I,cAAgB,IAAIO,UAAU/1I,KAAK1C,QAAQsrF,OAAOhB,MAAO5nF,KAAK1C,QAAQsrF,OAAOf,QAClF,IAAMkqD,EAAah7H,KAAKqK,KAAKphB,KAAK1C,QAAQsrF,OAAOhB,MAAQ4qD,IAAaz7H,KAAKqK,KAAKphB,KAAK1C,QAAQsrF,OAAOf,OAAS2qD,IAC7GxyI,KAAKu1I,YAAc,IAAIhoF,OAAOwkF,GAAYp5H,MAAM,IAAI9R,KAAI,SAAA+0C,GAAQ,OAAA,KAEhE57C,KAAKsxI,QAAQ71G,EAAGC,EAAGi1G,EAAWH,GAE9BxwI,KAAKg2I,gBAAkBrF,EAAY3wI,KAAKk1I,eACxCl1I,KAAKwtI,UAAU/xG,EAAIA,EACnBz7B,KAAKwtI,UAAU9xG,EAAIA,EACnB17B,KAAKwtI,UAAUt9C,SAAWxlF,EAC1B1K,KAAKytI,WAAWv9C,SAAWxlF,EAE3B1K,KAAKs1I,qBAAuB,QAGhC73I,IAAA,eAAA,SAAQg+B,EAAWC,EAAWhxB,GAC1B,GAAK1K,KAAKu7F,UAAV,CAIAv7F,KAAK0tI,aAAe,KACpB,IAAMx9C,EAAW2S,GAAGv9B,MAAM56D,EAAG,EAAG,GAC1BimI,EAAY3wI,KAAKo1I,uBACnBr+H,KAAK2K,IAAI,GAAK1hB,KAAKwtI,UAAUt9C,SAAWlwF,KAAKi1I,aAAel+H,KAAK2K,IAAI,GAAK1hB,KAAKi1I,aAEnFj1I,KAAKiyI,aAAax2G,EAAGC,EAAGi1G,EAAW3wI,KAAKwtI,UAAUt9C,UAG9ClwF,KAAK0tI,eACL1tI,KAAK1C,QAAQ6wG,aACTnuG,KAAKw1I,cACL,EACA,EACAx1I,KAAK0tI,aAAa9mE,GAClB5mE,KAAK0tI,aAAa5mE,GAClB9mE,KAAK0tI,aAAal6F,GAAKxzC,KAAK0tI,aAAa9mE,GAAK,EAC9C5mE,KAAK0tI,aAAa3uC,GAAK/+F,KAAK0tI,aAAa5mE,GAAK,GAElD9mE,KAAKi2I,2BACDj2I,KAAK0tI,aAAa9mE,GAClB5mE,KAAK0tI,aAAa5mE,GAClB9mE,KAAK0tI,aAAal6F,GAClBxzC,KAAK0tI,aAAa3uC,KAI1B/+F,KAAKwtI,UAAU/xG,EAAIA,EACnBz7B,KAAKwtI,UAAU9xG,EAAIA,EACnB17B,KAAKytI,WAAWv9C,SAAWlwF,KAAKwtI,UAAUt9C,SAC1ClwF,KAAKwtI,UAAUt9C,SAAWA,MAG9BzyF,IAAA,gBAAA,WACIuC,KAAK0tI,aAAe,KACpB,IAAMiD,EAAY3wI,KAAKo1I,uBACnBr+H,KAAK2K,IAAI,GAAK1hB,KAAKwtI,UAAUt9C,SAAWlwF,KAAKi1I,aAAel+H,KAAK2K,IAAI,GAAK1hB,KAAKi1I,aA0BnF,GAzBAj1I,KAAK1C,QAAQouG,OACb1rG,KAAKiyI,aAAa,KAAM,KAAMtB,EAAW3wI,KAAKwtI,UAAUt9C,UACxDlwF,KAAK1C,QAAQwuG,UAEb9rG,KAAKu7F,WAAY,EACjBv7F,KAAK2xI,WAAa,KAEd3xI,KAAK0tI,eACL1tI,KAAK1C,QAAQ6wG,aACTnuG,KAAKw1I,cACL,EACA,EACAx1I,KAAK0tI,aAAa9mE,GAClB5mE,KAAK0tI,aAAa5mE,GAClB9mE,KAAK0tI,aAAal6F,GAAKxzC,KAAK0tI,aAAa9mE,GAAK,EAC9C5mE,KAAK0tI,aAAa3uC,GAAK/+F,KAAK0tI,aAAa5mE,GAAK,GAElD9mE,KAAKi2I,2BACDj2I,KAAK0tI,aAAa9mE,GAClB5mE,KAAK0tI,aAAa5mE,GAClB9mE,KAAK0tI,aAAal6F,GAClBxzC,KAAK0tI,aAAa3uC,KAItB/+F,KAAK6xI,cAAgB7xI,KAAKs1I,qBAAsB,CAChD,IAAIY,EAA2Cl2I,KAAKw1I,cACpD,KACqC,IAAjCx1I,KAAKs1I,qBAAqB1uE,IACO,IAAjC5mE,KAAKs1I,qBAAqBxuE,IAC1B9mE,KAAKs1I,qBAAqB9hG,IAAMxzC,KAAK1C,QAAQsrF,OAAOhB,MAAQ,GAC5D5nF,KAAKs1I,qBAAqBv2C,IAAM/+F,KAAK1C,QAAQsrF,OAAOf,OAAS,GAC9D,CAGC,IAAMsuD,EAAYtzC,GAAGja,OACjB5oF,KAAKs1I,qBAAqB9hG,GAAKxzC,KAAKs1I,qBAAqB1uE,GAAK,EAC9D5mE,KAAKs1I,qBAAqBv2C,GAAK/+F,KAAKs1I,qBAAqBxuE,GAAK,GAEnDqvE,EAAUttD,WAAW,MAC7BkiB,UAAU/qG,KAAK1C,QAAQsrF,QAAS5oF,KAAKs1I,qBAAqB1uE,IAAK5mE,KAAKs1I,qBAAqBxuE,IAEhGovE,EAAYC,EAEhBn2I,KAAK6xI,aAAaC,QAAQzuI,KAAK,CAC3ButG,OAAQ,YACRh1B,OAAQ,CACJs6D,EACAl2I,KAAKs1I,qBAAqB1uE,GAC1B5mE,KAAKs1I,qBAAqBxuE,MAGlC9mE,KAAKkqH,QAAQ7mH,KAAKrD,KAAK6xI,cACvB7xI,KAAK6xI,kBAAexzI,EAExB2B,KAAKw1I,cAAgB,QAGzB/3I,IAAA,kBAAA,SAAWmmG,EAAmCnoE,EAAWC,GACjDkoE,aAAcmyC,UACd/1I,KAAK1C,QAAQ6wG,aAAavK,EAAInoE,EAAGC,IAEjC17B,KAAK1C,QAAQ8tH,UAAU3vF,EAAGC,EAAGkoE,EAAGhc,MAAOgc,EAAG/b,QAC1C7nF,KAAK1C,QAAQytG,UAAUnH,EAAInoE,EAAGC,OAItCj+B,IAAA,wBAAA,SAAiBmpE,EAAYE,EAAYtzB,EAAYurD,OAgCrDthG,IAAA,qBAAA,WACI,OAAOuC,KAAKu7F,aAGhB99F,IAAA,iBAAA,SAAU0gC,GACFn+B,KAAKg1I,aAAa7wI,IAAMg6B,EAAEh6B,GAAKnE,KAAKg1I,aAAa1qD,IAAMnsD,EAAEmsD,GAAKtqF,KAAKg1I,aAAa35G,IAAM8C,EAAE9C,IAG5Fr7B,KAAKg1I,aAAe,CAAC7wI,EAAGg6B,EAAEh6B,EAAGmmF,EAAGnsD,EAAEmsD,EAAGjvD,EAAG8C,EAAE9C,GAC1Cr7B,KAAKo2I,gBAAkBvzC,GAAG0L,eAAe9M,SAASzhG,KAAKg1I,kBAG3Dv3I,IAAA,mBAAA,SAAY0gC,GACRn+B,KAAK1C,QAAU6gC,KAGnB1gC,IAAA,mBAAA,SAAYkqF,GACR3nF,KAAKkqH,QAAUviC,KAGnBlqF,IAAA,gBAAA,SAAS01C,GACLnzC,KAAKi1I,YAAc9hG,KAGvB11C,IAAA,mBAAA,SAAY0M,GACRnK,KAAKm1I,eAAiBhrI,KAG1B1M,IAAA,mBAAA,SAAY01C,GACRnzC,KAAKk1I,eAAiB/hG,KAG1B11C,IAAA,qBAAA,SAAc49B,GACVr7B,KAAKo1I,yBAA2B/5G,KAGpC59B,IAAA,wBAAA,SAAiB49B,GACbr7B,KAAKq1I,4BAA8Bh6G,KAGvC59B,IAAA,qBAAA,SAAc49B,GACVr7B,KAAKmtI,wBAA0B9xG,KAGnC59B,IAAA,mBAAA,WACI,OAAOuC,KAAKk1I,kBAGhBz3I,IAAA,gBAAA,WACI,OAAOuC,KAAKi1I,eAGhBx3I,IAAA,mBAAA,WACI,OAAOuC,KAAKm1I,kBAGhB13I,IAAA,qBAAA,WACI,OAAOuC,KAAKmtI,0BArbP0H,EAAN,+DCtPMwB,GAAN,iCAAMA,oBAAAA,GAANr2I,KAIKi1I,YAAsB,IAJ3Bj1I,KAKKm1I,eAAyB,EAL9Bn1I,KAMKmtI,uBAAiC,EANtCntI,KAOKs2I,iBAA2B,EAPhCt2I,KAQKu2I,YAA0B,OAR/Bv2I,KASKw2I,eAAyB,EAT9Bx2I,KAUKy2I,kBAA4B,EAVjCz2I,KAWK02I,kBAA4B,EAXjC12I,KAYK22I,iBAA2B,EAZhC32I,KAcKu7F,WAAqB,oBAdpB86C,EAAU,EAwBnB54I,IAAA,mCAAA,SAA4Bg+B,EAAGC,GAC3B,IAAIo2D,EAAS,CAAElrB,GAAInrC,EAAGqrC,GAAIprC,EAAG8X,GAAI/X,EAAGsjE,GAAIrjE,GACpC17B,KAAKy2I,mBACL3kD,EAAS+Q,GAAG6F,aACR5W,EACA,CACIlrB,IAAKnrC,EAAIz7B,KAAK6qG,WAAWjjB,MACzB9gB,GAAIprC,EACJ8X,IAAK/X,EAAIz7B,KAAK6qG,WAAWjjB,MACzBmX,GAAIrjE,KAIZ17B,KAAK02I,mBACL5kD,EAAS+Q,GAAG6F,aACR5W,EACA,CACIlrB,GAAInrC,EACJqrC,IAAKprC,EAAI17B,KAAK6qG,WAAWhjB,OACzBr0C,GAAI/X,EACJsjE,IAAKrjE,EAAI17B,KAAK6qG,WAAWhjB,UAIrC,IAAMzpD,EAA8B,WAArBp+B,KAAKu2I,YAA2Bv2I,KAAKi1I,YAAc,EAAI,EACtEnjD,EAAOlrB,GAAK7vD,KAAKuK,MAAMwwE,EAAOlrB,GAAKxoC,GACnC0zD,EAAOhrB,GAAK/vD,KAAKuK,MAAMwwE,EAAOhrB,GAAK1oC,GACnC0zD,EAAOt+C,GAAKz8B,KAAKqK,KAAK0wE,EAAOt+C,GAAKpV,GAClC0zD,EAAOiN,GAAKhoF,KAAKqK,KAAK0wE,EAAOiN,GAAK3gE,GAElCp+B,KAAKs1I,qBAAuBzyC,GAAG6F,aAAa1oG,KAAKs1I,qBAAsBxjD,MAGnEr0F,IAAA,kBAAR,WACIuC,KAAK1C,QAAQouG,OACb1rG,KAAK1C,QAAQ8tH,UAAU,EAAG,EAAGprH,KAAK1C,QAAQsrF,OAAOhB,MAAO5nF,KAAK1C,QAAQsrF,OAAOf,QAC5E7nF,KAAK1C,QAAQytG,UAAU/qG,KAAK6qG,WAAY,EAAG,GAE3C,IAAIx3C,EAAKujF,GAAAx3I,QAAA,GAAOY,KAAKg1I,cAgBrB,GAfIh1I,KAAKs2I,iBACLjjF,EAAMlvD,EAAI,IACVkvD,EAAMi3B,EAAI,IACVj3B,EAAMh4B,EAAI,IACNr7B,KAAKmtI,sBACLntI,KAAK1C,QAAQkwG,yBAA2B,cAExCxtG,KAAK1C,QAAQkwG,yBAA2B,mBAGxCxtG,KAAKmtI,wBACLntI,KAAK1C,QAAQkwG,yBAA2B,eAI5CxtG,KAAKujF,KAAM,YAGLA,EAAO,IAAIszD,OACjB72I,KAAKujF,KAAK/lF,SAAQ,SAACo+C,EAAM95B,GACP,IAAVA,EACAyhE,EAAKukC,OAAOlsE,EAAKngB,EAAGmgB,EAAKlgB,GAEzB6nD,EAAKwkC,OAAOnsE,EAAKngB,EAAGmgB,EAAKlgB,MAIjC,IAAItU,EAAiCy7E,GAAG0L,eAAe5M,UAAU,CAC7Dx9F,EAAGkvD,EAAMlvD,EACTmmF,EAAGj3B,EAAMi3B,EACTjvD,EAAGg4B,EAAMh4B,EACTj4B,EAAGpD,KAAKm1I,iBAEZ,GAAIn1I,KAAK22I,gBAAiB,CACtB,IAAMG,EAAa92I,KAAKujF,KAAK,GAAG9nD,EAAIz7B,KAAKujF,KAAKvjF,KAAKujF,KAAKzmF,OAAS,GAAG2+B,EAC9Ds7G,EAAW/2I,KAAK1C,QAAQsgH,qBAC1B,EAAGk5B,EAAa92I,KAAKg3I,KAAOh3I,KAAKi3I,KACjC,EAAGH,EAAa92I,KAAKi3I,KAAOj3I,KAAKg3I,MAErCD,EAASh5B,aACL,EACAlb,GAAG0L,eAAe5M,UAAU,CACxBx9F,EAAGkvD,EAAMlvD,EACTmmF,EAAGj3B,EAAMi3B,EACTjvD,EAAGg4B,EAAMh4B,EACTj4B,EAAGpD,KAAKm1I,kBAGhB4B,EAASh5B,aACL,EACAlb,GAAG0L,eAAe5M,UAAU,CACxBx9F,EAAGkvD,EAAMlvD,EACTmmF,EAAGj3B,EAAMi3B,EACTjvD,EAAGg4B,EAAMh4B,EACTj4B,EAAG,KAGXgkB,EAAQ2vH,EAIa,SAArB/2I,KAAKu2I,YACLv2I,KAAK1C,QAAQg/F,UAAYl1E,GAGzBpnB,KAAK1C,QAAQ4oH,UAA+B,EAAnBlmH,KAAKi1I,YAC9Bj1I,KAAK1C,QAAQ45I,SAAW,QACxBl3I,KAAK1C,QAAQipH,YAAcn/F,GAI/B,IAAM6rG,EAAO,WACgB,SAAvB30B,EAAOi4C,YAAsBj4C,EACtBhhG,QAAQ+yB,KAAKkzD,KAEbjmF,QAAQ0qH,OAAOzkC,IAI5B0vC,IACIjzH,KAAKy2I,mBACLz2I,KAAK1C,QAAQouG,OACb1rG,KAAK1C,QAAQuuG,UAAU7rG,KAAK1C,QAAQsrF,OAAOhB,MAAQ,EAAG,GACtD5nF,KAAK1C,QAAQyoE,OAAM,EAAI,GACvB/lE,KAAK1C,QAAQuuG,WAAW7rG,KAAK1C,QAAQsrF,OAAOhB,MAAQ,EAAG,GACvDqrC,IACAjzH,KAAK1C,QAAQwuG,WAEb9rG,KAAK02I,mBACL12I,KAAK1C,QAAQouG,OACb1rG,KAAK1C,QAAQuuG,UAAU,EAAG7rG,KAAK1C,QAAQsrF,OAAOf,OAAS,GACvD7nF,KAAK1C,QAAQyoE,MAAM,GAAG,GACtB/lE,KAAK1C,QAAQuuG,UAAU,GAAI7rG,KAAK1C,QAAQsrF,OAAOf,OAAS,GACxDorC,IACAjzH,KAAK1C,QAAQwuG,UACT9rG,KAAKy2I,mBACLz2I,KAAK1C,QAAQouG,OACb1rG,KAAK1C,QAAQuuG,UAAU7rG,KAAK1C,QAAQsrF,OAAOhB,MAAQ,EAAG5nF,KAAK1C,QAAQsrF,OAAOf,OAAS,GACnF7nF,KAAK1C,QAAQyoE,OAAM,GAAI,GACvB/lE,KAAK1C,QAAQuuG,WAAW7rG,KAAK1C,QAAQsrF,OAAOhB,MAAQ,GAAI5nF,KAAK1C,QAAQsrF,OAAOf,OAAS,GACrForC,IACAjzH,KAAK1C,QAAQwuG,YAKzB9rG,KAAK1C,QAAQwuG,aAOjBruG,IAAA,mBAAA,SAAYkqF,GACR3nF,KAAKkqH,QAAUviC,KAGnBlqF,IAAA,gBAAA,WACI,MAA4B,WAArBuC,KAAKu2I,YAA2Bv2I,KAAKi1I,YAAc,KAG9Dx3I,IAAA,gBAAA,SAAS01C,GACLnzC,KAAKi1I,YAAc9hG,KAGvB11C,IAAA,mBAAA,WACI,OAAOuC,KAAKm1I,kBAGhB13I,IAAA,mBAAA,SAAY0M,GACRnK,KAAKm1I,eAAiBhrI,KAG1B1M,IAAA,iBAAA,SAAU0gC,GACNn+B,KAAKg1I,aAAenyC,GAAGqD,QAAQ/nE,MAGnC1gC,IAAA,mBAAA,SAAY0gC,GACRn+B,KAAK1C,QAAU6gC,KAGnB1gC,IAAA,gBAAA,SAASme,GACL5b,KAAKu2I,YAAc36H,KAGvBne,IAAA,gBAAA,WACI,OAAOuC,KAAKu2I,eAGhB94I,IAAA,mBAAA,SAAY05I,GACRn3I,KAAKw2I,eAAiB3zC,GAAGv9B,MAAM6xE,EAAS,EAAG,MAG/C15I,IAAA,mBAAA,WACI,OAAOuC,KAAKw2I,kBAGhB/4I,IAAA,qBAAA,SAAc49B,GACVr7B,KAAKy2I,mBAAqBp7G,KAG9B59B,IAAA,qBAAA,WACI,OAAOuC,KAAKy2I,oBAGhBh5I,IAAA,qBAAA,SAAc49B,GACVr7B,KAAK02I,mBAAqBr7G,KAG9B59B,IAAA,qBAAA,WACI,OAAOuC,KAAK02I,oBAGhBj5I,IAAA,oBAAA,SAAa49B,GACTr7B,KAAK22I,kBAAoBt7G,KAG7B59B,IAAA,oBAAA,WACI,OAAOuC,KAAK22I,mBAGhBl5I,IAAA,qBAAA,WACI,OAAOuC,KAAKmtI,yBAGhB1vI,IAAA,qBAAA,SAAc49B,GACVr7B,KAAKmtI,wBAA0B9xG,KAGnC59B,IAAA,oBAAA,WACI,OAAOuC,KAAKs2I,mBAGhB74I,IAAA,oBAAA,SAAa49B,GACTr7B,KAAKs2I,kBAAoBj7G,KAG7B59B,IAAA,qBAAA,WACI,OAAOuC,KAAKu7F,aAGhB99F,IAAA,kBAAA,SAAWg+B,EAAWC,GAClB17B,KAAKu7F,WAAY,EACjBv7F,KAAKujF,KAAO,CAAC,CAAC9nD,EAAAA,EAAGC,EAAAA,IACjB17B,KAAKg3I,KAAOt7G,EACZ17B,KAAKi3I,KAAOv7G,EACZ17B,KAAK6qG,WAAahI,GAAGja,OAAO5oF,KAAK1C,QAAQsrF,OAAOhB,MAAO5nF,KAAK1C,QAAQsrF,OAAOf,QAC3E7nF,KAAK6qG,WAAWhiB,WAAW,MAAMkiB,UAAU/qG,KAAK1C,QAAQsrF,OAAQ,EAAG,GACnE5oF,KAAKs1I,qBAAuB,KAC5Bt1I,KAAKi2I,2BAA2Bx6G,EAAGC,MAGvCj+B,IAAA,eAAA,SAAQg+B,EAAWC,GACf,GAAK17B,KAAKu7F,UAAV,CAIA,IAAInzC,EAAM,CAAE3sB,EAAAA,EAAGC,EAAAA,GACX17B,KAAKw2I,eAAiB,IACtBpuF,EAAI3sB,IAAM1kB,KAAKsF,SAAW,IAAOrc,KAAKw2I,eAAiB,GACvDpuF,EAAI1sB,IAAM3kB,KAAKsF,SAAW,IAAOrc,KAAKw2I,eAAiB,IAG3Dx2I,KAAKg3I,KAAOjgI,KAAK6K,IAAI5hB,KAAKg3I,KAAM5uF,EAAI1sB,GACpC17B,KAAKi3I,KAAOlgI,KAAK2K,IAAI1hB,KAAKi3I,KAAM7uF,EAAI1sB,GACpC17B,KAAKujF,KAAKlgF,KAAK+kD,GACfpoD,KAAKi2I,2BAA2Bx6G,EAAGC,GACnC17B,KAAKo3I,gBAGT35I,IAAA,gBAAA,WAGI,GAFAuC,KAAKu7F,WAAY,EACjBv7F,KAAKs1I,qBAAuBzyC,GAAG8F,aAAa3oG,KAAKs1I,qBAAsBt1I,KAAK6qG,WAAWjjB,MAAO5nF,KAAK6qG,WAAWhjB,QAC1G7nF,KAAKujF,KAAKzmF,OAAS,GAAKkD,KAAKs1I,qBAAsB,CACnD,IAAM+B,EAAgBx0C,GAAGja,OACrB5oF,KAAKs1I,qBAAqB9hG,GAAKxzC,KAAKs1I,qBAAqB1uE,GAAK,EAC9D5mE,KAAKs1I,qBAAqBv2C,GAAK/+F,KAAKs1I,qBAAqBxuE,GAAK,GAE/CuwE,EAAcxuD,WAAW,MACjCkiB,UAAU/qG,KAAK1C,QAAQsrF,QAAS5oF,KAAKs1I,qBAAqB1uE,IAAK5mE,KAAKs1I,qBAAqBxuE,IAEpG9mE,KAAKkqH,QAAQ7mH,KAAK,CACdwnH,KAAM,CAAC,QAAS,cAChBinB,QAAS,CACL,CACIlhC,OAAQ,YACRh1B,OAAQ,CACJy7D,EACAr3I,KAAKs1I,qBAAqB1uE,GAC1B5mE,KAAKs1I,qBAAqBxuE,QAM9C9mE,KAAKujF,KAAO,KACZvjF,KAAK6qG,WAAa,QAGtBptG,IAAA,kBAAA,SAAWmmG,EAAuBnoE,EAAWC,GACzC17B,KAAK1C,QAAQouG,OACb1rG,KAAK1C,QAAQ8tH,UAAU3vF,EAAGC,EAAGkoE,EAAGhc,MAAOgc,EAAG/b,QAC1C7nF,KAAK1C,QAAQytG,UAAUnH,EAAInoE,EAAGC,GAC9B17B,KAAK1C,QAAQwuG,aAGjBruG,IAAA,wBAAA,SAAiBmpE,EAAIE,EAAItzB,EAAIurD,QAzUpBs3C,EAAN,GCCMiB,GAAU,CACnBC,wBCDIj6I,EAEAk6I,EAEAxC,EACAoB,EA4BKqB,EAAT,WACI,GAAIC,IAAmBC,GAAgBD,IAAmBE,EAY1D,IARA,IAMIv7C,EANAw7C,EAAiB,CACjB,CAACC,EAAgB,KACjB,CAACC,EAAe,IAChB,CAACC,EAAe,KAKXn7I,EAAI,EAAGA,EAAIg7I,EAAe/6I,OAAQD,KACvCw/F,EAAOw7C,EAAeh7I,GAAG,GAAWgsF,WAAW,OAE3C6iB,OACJrP,EAAI+uB,UAAU,EAAG,EAAGysB,EAAeh7I,GAAG,GAAIg7I,EAAeh7I,GAAG,IAE5Dw/F,EAAIC,UAAY,QAAU04C,EAAa7wI,EAAI,KAAO6wI,EAAa1qD,EAAI,KAAO0qD,EAAa35G,EAAI,KAAO48G,EAAgBP,GAAkB,IACpIr7C,EAAIE,SAAS,EAAG,EAAGs7C,EAAeh7I,GAAG,GAAIg7I,EAAeh7I,GAAG,IAE3Dw/F,EAAImR,yBAA2B,iBAC/BnR,EAAIuP,sBAAwB,OAC5BvP,EAAI0O,UAAU8hC,GAAW6K,GAAiB,EAAG,EAAGG,EAAeh7I,GAAG,GAAIg7I,EAAeh7I,GAAG,IAExFw/F,EAAIyP,WAcH8lC,EAAT,SAAiBn2G,EAAGC,EAAG6M,EAAMixE,EAASlf,EAAQ49C,GAC1C,KAAI3vG,GAAQ,GAgBZ,GAZI4kG,IACA7vI,EAAQkwG,yBAA2B,eAGlC0qC,GAAUA,EAAO,KAAO1+B,IACzBl8G,EAAQ6oH,YAAc3M,GAGrB0+B,GAAWR,IAAmBC,GAAgBD,IAAmBE,IAClEt6I,EAAQg/F,UAAY85C,GAGpBsB,IAAmBC,EACnBr6I,EAAQuqH,YACRvqH,EAAQ66I,IAAI18G,EAAGC,EAAG6M,EAAM,EAAG6vG,GAC3B96I,EAAQ+6I,YACR/6I,EAAQ+yB,YAEL,GAAIqnH,IAAmBE,OACZv5I,IAAVi8F,IACAh9F,EAAQouG,OACRpuG,EAAQuuG,UAAUpwE,EAAGC,GACrBp+B,EAAQuqG,OAAOvN,EAAQ,IAAMvjF,KAAK2uD,IAClCpoE,EAAQi/F,UAAUh0D,GAAOA,EAAa,EAAPA,EAAiB,EAAPA,GACzCjrC,EAAQwuG,eAGT,CACHxuG,EAAQouG,OACRpuG,EAAQuuG,UAAUpwE,EAAGC,GACrB,IAAI48G,EAAeR,EACfvvG,GAAQ,IAAMA,EAAO,GACrB+vG,EAAeP,EACRxvG,GAAQ,KACf+vG,EAAeN,GAEnB16I,EAAQyoE,MAAMx9B,EAAMA,GAChBmvG,IAAmBa,GACnBj7I,EAAQuqG,OAAkB,OAATpsE,EAAIC,GAAc08G,GAEvC96I,EAAQytG,UAAUutC,GAAc,GAAI,EAAI,EAAG,GAE3Ch7I,EAAQwuG,YAIPmmC,EAAT,SAAsBx2G,EAAGC,EAAG6M,EAAM2nD,GACX,OAAfyhD,IACAA,EAAa,IAAI9uC,GAAGmG,YACTlgE,IAAI0kG,EAAU/xG,EAAG+xG,EAAU9xG,EAAG,GAAG,eAGhD,IAAIk6G,EAAU,YAELC,EAAYz6H,GACjB,IAAIm1H,EAAgB1tC,GAAG2E,IAAIimC,EAAWv9C,SAAUA,EAAU90E,EAAIqwB,GAC1D+kG,EAAe2E,GAAkBE,EAA6B9E,EAAgBA,EAAiB,GAC/FI,EAAY55H,KAAK2K,IAAI,GAAKuzH,GAAeG,EAAyB7E,EAAgB,IACtFqF,EAAQvyI,KAAK,CAAC+X,EAAIqgB,EAAGrgB,EAAIsgB,EAAGi1G,EAAWH,EAAcp1H,EAAIk/E,QAG7D,IASI49C,EATApC,EAAevtG,EAAO2sG,EAChB,OAANz5G,EACAk2G,EAAWvnC,SAAS0rC,EAAcD,GAElClE,EAAW7oG,IAAIrN,EAAGC,EAAGo6G,EAAcD,GAIvCv4I,EAAQouG,OAER,IAAK,IAAI7uG,EAAI,EAAGA,EAAI+4I,EAAQ94I,OAAQD,IAAK,CACrC,IAAI++C,EAAOg6F,EAAQ/4I,GACnB+0I,EAAQh2F,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIs8F,GACrDA,EAASt8F,EAEbt+C,EAAQwuG,WAzJRoe,EAA8B,IAAI4qB,GAAGC,eAGvBE,EAAc,EAAGC,EAAiB,MAAQC,EAAiB,EAEzEC,GAAyB,EAAMC,GAA4B,EAC3DlI,GAAwB,EACxBwK,EAAe,EAAGY,EAAc,EAAkBX,EAAe,EACjEF,EAAiBC,EAGjBnK,EAAY,CAAC/xG,EAAG,EAAGC,EAAG,EAAGw0D,SAAU,GACnCu9C,EAAa,CAAChyG,EAAG,EAAGC,EAAG,EAAGw0D,SAAU,GAEpCqL,GAAY,EACZ08C,EAAkB,CAAC,EAAG,GAAK,EAAG,GAG9BH,EAAiBtoI,SAASM,cAAc,UAC5CgoI,EAAelwD,MAAQ,IACvBkwD,EAAejwD,OAAS,IACxB,IAAIkwD,EAAgBvoI,SAASM,cAAc,UAC3CioI,EAAcnwD,MAAQ,GACtBmwD,EAAclwD,OAAS,GACvB,IAAImwD,EAAgBxoI,SAASM,cAAc,UAC3CkoI,EAAcpwD,MAAQ,GACtBowD,EAAcnwD,OAAS,GAEvB,IAAI8pD,EAAa,KAEbyG,EAAkB,EAAVrhI,KAAK2uD,GAiIjB1lE,KAAKw4I,UAAY,SAAU/8G,EAAGC,EAAGhxB,IAC7B8sI,EAAe,CACX3sB,KAAM,CAAC,QAAS,YAChBinB,QAAS,KAEAA,QAAQzuI,KAAK,CACtButG,OAAQ,kBACRh1B,OAAQ,CAACy5D,KAEbmC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,eACRh1B,OAAQ,CAACw5D,KAEboC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,UACRh1B,OAAQ,CAACq5D,KAEbuC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,aACRh1B,OAAQ,CAACs5D,KAEbsC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,aACRh1B,OAAQ,CAACu5D,KAEbqC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,WACRh1B,OAAQ,CAACo5D,KAEbwC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,WACRh1B,OAAQ,CAAC87D,KAEbF,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,eACRh1B,OAAQ,CAACuxD,KAGbziI,EAAIm4F,GAAGv9B,MAAM56D,EAAG,EAAG,GACnB,IAAI8lI,EAAe6E,EAA6BF,EAAiBzqI,EAAIA,EAAKyqI,EACtExE,EAAYyE,EAAyBr+H,KAAK2K,IAAI,GAAKhX,EAAIuqI,GAAel+H,KAAK2K,IAAI,GAAKuzH,GAExF15C,GAAY,EACZj+F,EAAQouG,OACRkmC,EAAQn2G,EAAGC,EAAGi1G,EAAWH,GACzBlzI,EAAQwuG,UAEU6kC,EAAYuE,EAC9B1H,EAAU/xG,EAAIA,EACd+xG,EAAU9xG,EAAIA,EACd8xG,EAAUt9C,SAAWxlF,EACrB+iI,EAAWv9C,SAAWxlF,EAEtB8sI,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,YACRh1B,OAAQ,CAACngD,EAAGC,EAAGhxB,MAIvB1K,KAAKy4I,OAAS,SAAUh9G,EAAGC,EAAGhxB,GAC1B,GAAK6wF,EAAL,CAGAi8C,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,SACRh1B,OAAQ,CAACngD,EAAGC,EAAGhxB,KAGnB,IAAIwlF,EAAW2S,GAAGv9B,MAAM56D,EAAG,EAAG,GAC1BimI,EAAYyE,EAAyBr+H,KAAK2K,IAAI,GAAK8rH,EAAUt9C,SAAW+kD,GAAel+H,KAAK2K,IAAI,GAAKuzH,GAEzG33I,EAAQouG,OACRumC,EAAax2G,EAAGC,EAAGi1G,EAAWnD,EAAUt9C,UAMxC5yF,EAAQwuG,UAER0hC,EAAU/xG,EAAIA,EACd+xG,EAAU9xG,EAAIA,EACd+xG,EAAWv9C,SAAWs9C,EAAUt9C,SAChCs9C,EAAUt9C,SAAWA,IAGzBlwF,KAAK04I,QAAU,SAAUj9G,EAAGC,GAExB,IAAIi1G,EAAYyE,EAAyBr+H,KAAK2K,IAAI,GAAK8rH,EAAUt9C,SAAW+kD,GAAel+H,KAAK2K,IAAI,GAAKuzH,GACzG33I,EAAQouG,OACRumC,EAAa,KAAM,KAAMtB,EAAWnD,EAAUt9C,UAC9C5yF,EAAQwuG,UAERvQ,GAAY,EAEZo2C,EAAa,KAET6F,IACAA,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,UACRh1B,OAAQ,CAACngD,EAAGC,KAEhBwuF,EAAQ7mH,KAAKm0I,GACbA,OAAen5I,IAIvB2B,KAAK24I,gBAAkB,SAAU/xE,EAAIE,EAAItzB,EAAIurD,GAKzC,GAJAyuC,EAAU/xG,EAAI+X,EACdg6F,EAAU9xG,EAAIqjE,EACdyuC,EAAUt9C,SAAW,GAEjBqL,QAAoBl9F,IAAPuoE,EAAjB,CAIA,IAIIyrE,EAJA/3C,EAAQuI,GAAG+E,iBAAiB,CAACnsE,EAAEmrC,EAAIlrC,EAAEorC,GAAK,CAACrrC,EAAE+X,EAAI9X,EAAEqjE,IACnDmzC,EAAYn7H,KAAK4yB,KAAK5yB,KAAKwmB,IAAIiW,EAAKozB,EAAI,GAAO7vD,KAAKwmB,IAAIwhE,EAAKj4B,EAAI,IACjEqrE,GAAM3+F,EAAKozB,GAAMsrE,EACjBE,GAAMrzC,EAAKj4B,GAAMorE,EAEjBtB,EAAQqE,EAAcC,EAE1B,IAAK7C,EADa4C,EAAcC,EACC7C,GAAYH,EAAWG,GAAYzB,EAChEgB,EAAQhrE,EAAKurE,EAAKE,EAAUvrE,EAAKsrE,EAAKC,EAAU4C,EAAaE,EAAgB76C,GAIjF,IAAIu3C,EAAe,CACfhnB,KAAM,CAAC,QAAS,YAChBinB,QAAS,IAEbD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,kBACRh1B,OAAQ,CAACy5D,KAEbxD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,eACRh1B,OAAQ,CAACw5D,KAEbvD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,UACRh1B,OAAQ,CAACq5D,KAEbpD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,aACRh1B,OAAQ,CAACs5D,KAEbrD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,aACRh1B,OAAQ,CAACu5D,KAEbtD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,WACRh1B,OAAQ,CAACo5D,KAEbnD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,WACRh1B,OAAQ,CAAC87D,KAEb7F,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,eACRh1B,OAAQ,CAACuxD,KAGb0E,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,kBACRh1B,OAAQ,CAAChV,EAAIE,EAAItzB,EAAIurD,KAEzBmrB,EAAQ7mH,KAAKwuI,KAIjB7xI,KAAKu7F,UAAY,WACb,OAAOA,GAGXv7F,KAAK44I,SAAW,SAAUx1I,GAClBs0I,IAAmBt0I,IAGvBs0I,EAAiBt0I,EACjBq0I,MAEJz3I,KAAKk/G,SAAW,SAAU/gF,GAClB62G,IAAiB72G,IAGrB62G,EAAe,CAAC7wI,EAAGg6B,EAAEh6B,EAAGmmF,EAAGnsD,EAAEmsD,EAAGjvD,EAAG8C,EAAE9C,GACrC+6G,EAAkB,OAASpB,EAAa7wI,EAAI,IAAM6wI,EAAa1qD,EAAI,IAAM0qD,EAAa35G,EAAI,IAC1Fo8G,MAEJz3I,KAAK64I,WAAa,SAAU16G,GACxB7gC,EAAU6gC,GAEdn+B,KAAK84I,WAAa,SAAUxoC,GACxB4Z,EAAU5Z,GAEdtwG,KAAK84H,QAAU,SAAU3lF,GACrB8hG,EAAc9hG,GAElBnzC,KAAK+4I,WAAa,SAAU5uI,GACxBgrI,EAAiBhrI,GAErBnK,KAAKg5I,WAAa,SAAU7lG,GACxB+hG,EAAiB/hG,GAErBnzC,KAAKi5I,aAAe,SAAU59G,GAC1B+5G,EAAyB/5G,GAE7Br7B,KAAKk5I,gBAAkB,SAAU79G,GAC7Bg6G,EAA4Bh6G,GAEhCr7B,KAAKm5I,aAAe,SAAU99G,GAC1B8xG,EAAwB9xG,GAG5Br7B,KAAKo5I,WAAa,WACd,OAAOlE,GAEXl1I,KAAKq5I,QAAU,WACX,OAAOpE,GAEXj1I,KAAKs5I,WAAa,WACd,OAAOnE,GAEXn1I,KAAKu5I,aAAe,SAAUl+G,GAC1B,OAAO8xG,IDjYXqM,WAAAxM,GACAyM,4BHHIn8I,EACA03I,EAMA0E,EAAOC,EAIPnC,EARAvC,EAAc,EAAGE,EAAiB,GAClCyE,EAAkB,GAClBC,EAAe,EAGft+C,GAAY,EACZiyC,EAAY,CAAC/xG,EAAG,EAAGC,EAAG,EAAGw0D,SAAU,GACnCg6B,EAA8B,IAAI4qB,GAAGC,eAErC+E,EAAc,EAClB95I,KAAK84I,WAAa,SAAUxoC,GACxB4Z,EAAU5Z,GAEdtwG,KAAK+5I,QAAU,SAAU5mG,GACrB2mG,EAAc7pG,SAASkD,IAE3BnzC,KAAKg6I,QAAU,WACX,OAAO/pG,SAAS,GAAK6pG,IAQzB,IAAIv7C,EAAS,GACT1uE,EAAQ,EACRoqH,EAAU,CACV,SAAUC,EAAIlnG,GACV,OAAOknG,GAEX,SAAUA,EAAIlnG,GACV,IAAI/zC,EAAS,IAAI4jG,GAAGwL,IAAI6rC,EAAG/1I,EAAG+1I,EAAG5vD,EAAG4vD,EAAG7+G,GAIvC,OAHAp8B,EAAOkF,GAAK6uC,EAAG7uC,EAAI,IACnBlF,EAAOqrF,GAAKt3C,EAAGs3C,EAAI,IACnBrrF,EAAOo8B,GAAK2X,EAAG3X,EAAI,IACZp8B,GAEX,SAAUi7I,EAAIlnG,GACV,IAAI/zC,EAAS,IAAI4jG,GAAGwL,IAAI6rC,EAAG/1I,EAAG+1I,EAAG5vD,EAAG4vD,EAAG7+G,GAIvC,OAHAp8B,EAAOkF,GAAK6uC,EAAG7uC,EAAI,IACnBlF,EAAOqrF,GAAKt3C,EAAGs3C,EAAI,IACnBrrF,EAAOo8B,GAAK2X,EAAG3X,EAAI,IACZp8B,IAIfe,KAAKq5I,QAAU,WACX,OAAOpE,EAAc,GAEzBj1I,KAAKk/G,SAAW,SAAU/gF,GACtB62G,EAAe72G,GAEnBn+B,KAAKs5I,WAAa,WACd,OAAOnE,GAEXn1I,KAAK+4I,WAAa,SAAU5uI,GACxBgrI,EAAiBhrI,GAErBnK,KAAKm6I,YAAc,WACf,OAAOP,GAEX55I,KAAKo6I,YAAc,SAAU/+G,GACzBu+G,EAAkBv+G,GAEtBr7B,KAAK84H,QAAU,SAAU3lF,GACrB8hG,EAAkB,EAAJ9hG,GAElBnzC,KAAKq6I,SAAW,WACZ,OAAOR,GAEX75I,KAAKwgI,SAAW,SAAUrtF,GACtB0mG,EAAe1mG,GAEnBnzC,KAAK64I,WAAa,SAAU16G,GACxB7gC,EAAU6gC,GAEdn+B,KAAKw4I,UAAY,SAAU/8G,EAAGC,EAAGw0D,EAAUrV,GACvC,GAAIA,GAAS2yD,EAAU/xG,EAAG,CACb+xG,EAAU/xG,EAAQ+xG,EAAU9xG,EACrC6/D,GAAY,EAEZv7F,KAAK04I,eAELn9C,GAAY,EACZm+C,EAAQj+G,EACRk+G,EAAQj+G,EACR8xG,EAAU/xG,EAAIA,EACd+xG,EAAU9xG,EAAIA,GACd87G,EAAe,CACX3sB,KAAM,CAAC,QAAS,gBAChBinB,QAAS,KAEAA,QAAQzuI,KAAK,CACtButG,OAAQ,WACRh1B,OAAQ,CAACi+D,KAEbrC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,UACRh1B,OAAQ,CAACq5D,EAAc,KAE3BuC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,aACRh1B,OAAQ,CAACu5D,KAEbqC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,WACRh1B,OAAQ,CAACo5D,KAEbwC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,cACRh1B,OAAQ,CAACg+D,KAEbpC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,YACRh1B,OAAQ,CAACngD,EAAGC,EAAGw0D,MAK3BlwF,KAAKy4I,OAAS,SAAU6B,EAAKC,EAAKrqD,EAAUsqD,GACxC,GAAKj/C,IAAc++C,IAAQ9M,EAAU/xG,GAAK8+G,IAAQ/M,EAAU9xG,GAA5D,CAIA,IAAI74B,EAAGw4B,EAAGj4B,EAAGknF,EACT7uD,EAAIwU,SAASqqG,GACb5+G,EAAIuU,SAASsqG,GACjBh8C,EAAOl7F,KAAK,CAACo4B,EAAGC,IAEhB,IAAIs1G,EAAOgE,EAAa7wI,EACpB8sI,EAAO+D,EAAa1qD,EACpB4mD,EAAO8D,EAAa35G,EAExB,GAAsB,OAAlBm/G,EACAxJ,EAAOwJ,EAAcr2I,EACrB8sI,EAAOuJ,EAAclwD,EACrB4mD,EAAOsJ,EAAcn/G,OAErB,GAAwB,IAApBu+G,GACIn+G,EAAI,GAAK,GAAKC,EAAI,GAAK,GAAKD,EAAI,EAAIn+B,EAAQsrF,OAAOhB,MAAQ,GAAKlsD,EAAI,EAAIp+B,EAAQsrF,OAAOf,OAAS,EAAG,CACnGmpD,EAAO,EACPC,EAAO,EACPC,EAAO,EACP,IAAIuJ,EAAO1jI,KAAK6K,IAAItkB,EAAQsrF,OAAOhB,MAAQ,EAAG7wE,KAAK2K,IAAI,EAAG+Z,EAAI,IAC1Di/G,EAAO3jI,KAAK6K,IAAItkB,EAAQsrF,OAAOf,OAAS,EAAG9wE,KAAK2K,IAAI,EAAGga,EAAI,IAC3Di/G,EAAO5jI,KAAK6K,IAAItkB,EAAQsrF,OAAOhB,MAAQ,EAAG7wE,KAAK2K,IAAI,EAAG+Z,EAAI,IAC1Dm/G,EAAO7jI,KAAK6K,IAAItkB,EAAQsrF,OAAOf,OAAS,EAAG9wE,KAAK2K,IAAI,EAAGga,EAAI,IAI/D,GAFAk/G,GAAQF,GADRC,GAAQF,GAGG,GAAKG,EAAO,EAAG,CAGtB,IAFA,IAAI3sC,EAAQ3wG,EAAQ4wG,aAAausC,EAAMC,EAAMC,EAAMC,GAC/CC,EAAW,EACNh+I,EAAI,EAAGA,EAAIoxG,EAAMjqF,KAAKlnB,OAAQD,GAAK,EACxCm0I,GAAQ/iC,EAAMjqF,KAAKnnB,EAAI,GACvBo0I,GAAQhjC,EAAMjqF,KAAKnnB,EAAI,GACvBq0I,GAAQjjC,EAAMjqF,KAAKnnB,EAAI,GACvBg+I,IAEJ7J,GAAQ6J,EACR5J,GAAQ4J,EACR3J,GAAQ2J,EAGZ,IAAIC,EAAQb,EAAQ,GAAG,IAAIp3C,GAAGwL,IAAI2iC,EAAMC,EAAMC,GAAO8D,GACrDhE,EAAO/gG,SAAS,GAAK4yD,GAAG2E,IAAIwtC,EAAa7wI,EAAG22I,EAAM32I,EAAGy1I,IACrD3I,EAAOhhG,SAAS,GAAK4yD,GAAG2E,IAAIwtC,EAAa1qD,EAAGwwD,EAAMxwD,EAAGsvD,IACrD1I,EAAOjhG,SAAS,GAAK4yD,GAAG2E,IAAIwtC,EAAa35G,EAAGy/G,EAAMz/G,EAAGu+G,IAajE,IARAt8I,EAAQouG,OACRpuG,EAAQipH,YAAc,QAAUyqB,EAAO,KAAOC,EAAO,KAAOC,EAAO,KAAOiE,EAAiB,IAC3F73I,EAAQ4oH,UAAY+uB,EAEpB33I,EAAQuqH,YACRvqH,EAAQwqH,OAAO4xB,EAAOC,GACtBr8I,EAAQyqH,OAAOtsF,EAAGC,GAEb74B,EAAI,EAAGA,EAAI07F,EAAOzhG,OAAQ+F,KAG3BynF,GAFAjvD,EAAIkjE,EAAO17F,GAAG,GAAK07F,EAAO1uE,GAAO,IAEzBwL,GADRj4B,EAAIm7F,EAAO17F,GAAG,GAAK07F,EAAO1uE,GAAO,IACjBzsB,GACR,IAAOy2I,EAAeA,IApKlCC,IACoE,GAA7D/iI,KAAKm3E,IAAI,aAAen3E,KAAKi3E,IAAkB,UAAd8rD,IAAkC,GAmKfxvD,EAAI,IAAOuvD,EAAeA,KAC7Ev8I,EAAQwqH,OAAOvpB,EAAO1uE,GAAO,GAAU,GAAJwL,EAAUkjE,EAAO1uE,GAAO,GAAU,GAAJzsB,GACjE9F,EAAQyqH,OAAOxpB,EAAO17F,GAAG,GAAU,GAAJw4B,EAAUkjE,EAAO17F,GAAG,GAAU,GAAJO,IAIjE9F,EAAQ0qH,SACR1qH,EAAQwuG,UAGRj8E,IACA6pH,EAAQj+G,EACRk+G,EAAQj+G,EACR8xG,EAAU/xG,EAAIA,EACd+xG,EAAU9xG,EAAIA,EACd87G,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,SACRh1B,OAAQ,CAAC0+D,EAAKC,EAAKrqD,EAAU,CAAC/rF,EAAG6sI,EAAM1mD,EAAG2mD,EAAM51G,EAAG61G,QAG3DlxI,KAAK04I,QAAU,WACXn9C,GAAY,EACZ1rE,EAAQ,EACR0uE,EAAS,GACLi5C,IACAA,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,UACRh1B,OAAQ,KAEZsuC,EAAQ7mH,KAAKm0I,GACbA,OAAen5I,IAIvB2B,KAAK24I,gBAAkB,SAAU/xE,EAAIE,EAAItzB,EAAIurD,GAIzC,GAHAyuC,EAAU/xG,EAAI+X,EACdg6F,EAAU9xG,EAAIqjE,GAEVxD,QAAoBl9F,IAAPuoE,EAAjB,CAKAtpE,EAAQouG,OACRpuG,EAAQ4oH,UAAY+uB,EAEpB,IAAIjE,EAAOgE,EAAa7wI,EAAG8sI,EAAO+D,EAAa1qD,EAAG4mD,EAAO8D,EAAa35G,EACtE,GAAIurC,EAAK,GAAK,GAAKE,EAAK,GAAK,GAAKF,EAAK,EAAItpE,EAAQsrF,OAAOhB,MAAQ,GAAK9gB,EAAK,EAAIxpE,EAAQsrF,OAAOf,OAAS,EAAG,CACvGmpD,EAAO,EACPC,EAAO,EACPC,EAAO,EACP,IAAIuJ,EAAO1jI,KAAK6K,IAAItkB,EAAQsrF,OAAOhB,MAAQ,EAAG7wE,KAAK2K,IAAI,EAAGklD,EAAK,IAC3D8zE,EAAO3jI,KAAK6K,IAAItkB,EAAQsrF,OAAOf,OAAS,EAAG9wE,KAAK2K,IAAI,EAAGolD,EAAK,IAC5D6zE,EAAO5jI,KAAK6K,IAAItkB,EAAQsrF,OAAOhB,MAAQ,EAAG7wE,KAAK2K,IAAI,EAAGklD,EAAK,IAC3Dg0E,EAAO7jI,KAAK6K,IAAItkB,EAAQsrF,OAAOf,OAAS,EAAG9wE,KAAK2K,IAAI,EAAGolD,EAAK,IAGhE,GADA8zE,GAAQF,GADRC,GAAQF,GAEG,GAAKG,EAAO,EAAG,CACtB,IAAIlzD,EAAI3wE,KAAK6K,IAAI0wH,GAAa1qD,MAAO+yD,GACjChzD,EAAI5wE,KAAK6K,IAAI0wH,GAAazqD,OAAQ+yD,GACtCrI,GAAU7mC,OACV6mC,GAAU/kC,yBAA2B,OACrC+kC,GAAUxnC,UAAUztG,EAAQsrF,OAAQ6xD,EAAMC,EAAMC,EAAMC,EAAM,EAAG,EAAGlzD,EAAGC,GACrE4qD,GAAUzmC,UAIV,IAFA,IAAImC,EAAQskC,GAAUrkC,aAAausC,EAAMC,EAAMC,EAAMC,GACjDC,EAAW,EACNh+I,EAAI,EAAGA,EAAIoxG,EAAMjqF,KAAKlnB,OAAQD,GAAK,EACxCm0I,GAAQ/iC,EAAMjqF,KAAKnnB,EAAI,GACvBo0I,GAAQhjC,EAAMjqF,KAAKnnB,EAAI,GACvBq0I,GAAQjjC,EAAMjqF,KAAKnnB,EAAI,GACvBg+I,IAEJ7J,GAAQ6J,EACR5J,GAAQ4J,EACR3J,GAAQ2J,GAGhB,IAAIC,EAAQb,EAAQ,GAAG,IAAIp3C,GAAGwL,IAAI2iC,EAAMC,EAAMC,GAAO8D,GACrDhE,EAAO/gG,SAAS,IAAM2pG,EAAkBkB,EAAM32I,EAAI6wI,EAAa7wI,GAAK,EAAIy1I,KACxE3I,EAAOhhG,SAAS,IAAM2pG,EAAkBkB,EAAMxwD,EAAI0qD,EAAa1qD,GAAK,EAAIsvD,KACxE1I,EAAOjhG,SAAS,IAAM2pG,EAAkBkB,EAAMz/G,EAAI25G,EAAa35G,GAAK,EAAIu+G,KACxEt8I,EAAQipH,YAAc,QAAUyqB,EAAO,KAAOC,EAAO,KAAOC,EAAO,KAAOiE,EAAiB,IAC3F73I,EAAQuqH,YACRvqH,EAAQwqH,OAAOlhD,EAAIE,GACnBxpE,EAAQyqH,OAAOv0E,EAAIurD,GACnBzhG,EAAQ0qH,SACR1qH,EAAQipH,YAAc,QAAUyqB,EAAO,KAAOC,EAAO,KAAOC,EAAO,KAAOiE,EAAiB,IAC3F73I,EAAQwuG,UAGR,IAAI+lC,EAAe,CACfhnB,KAAM,CAAC,QAAS,gBAChBinB,QAAS,IAEbD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,WACRh1B,OAAQ,CAACi+D,KAEbhI,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,UACRh1B,OAAQ,CAACq5D,EAAc,KAE3BpD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,aACRh1B,OAAQ,CAACu5D,KAEbtD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,WACRh1B,OAAQ,CAACo5D,KAEbnD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,cACRh1B,OAAQ,CAACg+D,KAGb/H,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,kBACRh1B,OAAQ,CAAChV,EAAIE,EAAItzB,EAAIurD,KAEzBmrB,EAAQ7mH,KAAKwuI,KAGjB7xI,KAAKu7F,UAAY,WACb,OAAOA,IGpTXw/C,0BENIz9I,EAEAk6I,EAEAxC,EACAoB,EAiBA4E,EAqBKC,EAAT,WACIC,EAAU9vB,UAAU,EAAG,EAAG,EAAG,GAC7B8vB,EAAU5+C,UAAYg6C,EAAkB,OAASF,EACjD,IAAK,IAAIv5I,EAAI,EAAGA,EAAIka,KAAK2K,IAAI,EAAG3K,KAAK4gD,MAAMw9E,EAAiBgG,EAAUr+I,SAAUD,IAC5Eq+I,EAAU3+C,SAAS4+C,EAAUt+I,GAAG,GAAIs+I,EAAUt+I,GAAG,GAAI,EAAG,GAE5Dm+I,EAAgB19I,EAAQ89I,cAAcC,EAAc,WAgC/CC,EAAT,SAAkB30E,EAAIE,EAAID,EAAIE,EAAIy0E,GAC9Bj+I,EAAQouG,OAEJ4qC,GACAh5I,EAAQg/F,UAAYk/C,EAAmBR,EAAgB,OAEnD19I,EAAQkwG,yBADR2/B,EACmC,cAEA,oBAGvC7vI,EAAQg/F,UAAYk/C,EAAmBR,EAAgB5E,EACnDjJ,IACA7vI,EAAQkwG,yBAA2B,gBAG3ClwG,EAAQ6oH,YAAcq1B,EAAmB,EAAIrG,EAE7CxuE,EAAK5vD,KAAKuK,MAAMqlD,GAChBE,EAAK9vD,KAAKuK,MAAMulD,GAChBD,EAAK7vD,KAAKuK,MAAMslD,GAChBE,EAAK/vD,KAAKuK,MAAMwlD,OAEhB,IAAIqrB,EAAKp7E,KAAKsmB,IAAIupC,EAAKD,GACnB80E,EAAK90E,EAAKC,EAAK,GAAI,EACnBwrB,GAAMr7E,KAAKsmB,IAAIypC,EAAKD,GACpB60E,EAAK70E,EAAKC,EAAK,GAAI,EACnBlnE,EAAMuyF,EAAKC,EAEPmpD,EACAA,GAAY,EAEZj+I,EAAQi/F,SAAS51B,EAAIE,EAAI,EAAG,GAE5BF,IAAOC,GAAMC,IAAOC,GANf,CAST,IAAIohE,EAAK,EAAItoI,EACTsoI,GAAM91C,IACNxyF,GAAOwyF,EACPzrB,GAAM80E,GAENvT,GAAM/1C,IACNvyF,GAAOuyF,EACPtrB,GAAM60E,GAIdp+I,EAAQwuG,WAGH6vC,EAAT,SAA6BlxI,EAAI8iF,EAAIwc,EAAIC,GAErC,IAAI4xC,EAzER,SAAiCnxI,EAAI8iF,EAAIwc,EAAIC,EAAItoF,GAC7C,IAAI9a,EAAIi8F,GAAGqF,KAAKpK,IAAI,CAChBriE,EAAGuuE,EAAGvuE,EAAIhxB,EAAGgxB,EACbC,EAAGsuE,EAAGtuE,EAAIjxB,EAAGixB,IAEbmgH,EAAKh5C,GAAGqF,KAAKpK,IAAI,CACjBriE,EAAG8xD,EAAG9xD,EAAIhxB,EAAGgxB,EACbC,EAAG6xD,EAAG7xD,EAAIjxB,EAAGixB,IAEbogH,EAAKj5C,GAAGqF,KAAKpK,IAAI,CACjBriE,EAAGuuE,EAAGvuE,EAAIsuE,EAAGtuE,EACbC,EAAGsuE,EAAGtuE,EAAIquE,EAAGruE,IAKjB,OAHS3kB,KAAKsmB,IAAIwlE,GAAGqF,KAAK5N,MAAM1zF,EAAGi1I,GAAM9kI,KAAK2uD,IAAM3uD,KAAK2uD,GAChD3uD,KAAKsmB,IAAIwlE,GAAGqF,KAAK5N,MAAM1zF,EAAGk1I,GAAM/kI,KAAK2uD,IAAM3uD,KAAK2uD,GAElD3uD,KAAK2K,IAAImhF,GAAGqF,KAAKnK,KAAKn3F,EAAGi1I,GAAKh5C,GAAGqF,KAAKnK,KAAKn3F,EAAGk1I,IAAOp6H,EAyDtCq6H,CAAwBtxI,EAAI8iF,EAAIwc,EAAIC,EAAI,IAE9Dv/F,EAAGgxB,EAAI1kB,KAAKuK,MAAM7W,EAAGgxB,GACrBhxB,EAAGixB,EAAI3kB,KAAKuK,MAAM7W,EAAGixB,GACrBsuE,EAAGvuE,EAAI1kB,KAAKuK,MAAM0oF,EAAGvuE,GACrBuuE,EAAGtuE,EAAI3kB,KAAKuK,MAAM0oF,EAAGtuE,GAErB,IAAIqiE,EAAO8E,GAAG9E,KAAKtzF,EAAGgxB,EAAGhxB,EAAGixB,EAAGsuE,EAAGvuE,EAAGuuE,EAAGtuE,GACxC,IAAKkgH,GAAmB79C,EAAO,EAC3Bu9C,EAAS7wI,EAAGgxB,EAAGhxB,EAAGixB,EAAGsuE,EAAGvuE,EAAGuuE,EAAGtuE,GAAG,OADrC,CAOA,IAFA,IAAIzT,EAAIlR,KAAK2K,IAAI,EAAG3K,KAAK4gD,MAAMomC,EAAO,IAClCqL,EAAW,GACNvsG,EAAI,EAAGA,GAAKorB,EAAGprB,IAAK,CACzB,IAAI4uC,EAAI5uC,EAAIorB,EACR7kB,EAAI2T,KAAKwmB,IAAI,EAAIkO,EAAG,GACpBpQ,EAAI,EAAIoQ,EAAI10B,KAAKwmB,IAAI,EAAIkO,EAAG,GAC5BtN,EAAI,EAAIpnB,KAAKwmB,IAAIkO,EAAG,IAAM,EAAIA,GAC9B7kC,EAAImQ,KAAKwmB,IAAIkO,EAAG,GACpB29D,EAAS/lG,KAAK,CACVo4B,EAAGr4B,EAAIqH,EAAGgxB,EAAIJ,EAAIkyD,EAAG9xD,EAAI0C,EAAI4rE,EAAGtuE,EAAI70B,EAAIojG,EAAGvuE,EAC3CC,EAAGt4B,EAAIqH,EAAGixB,EAAIL,EAAIkyD,EAAG7xD,EAAIyC,EAAI4rE,EAAGruE,EAAI90B,EAAIojG,EAAGtuE,IAInD,IAAK,IAAI4wD,EAAI,EAAGA,EAAIrkE,EAAGqkE,IACnBgvD,EACIvkI,KAAK4gD,MAAMyxC,EAAS9c,GAAG7wD,GACvB1kB,KAAK4gD,MAAMyxC,EAAS9c,GAAG5wD,GACvB3kB,KAAK4gD,MAAMyxC,EAAS9c,EAAI,GAAG7wD,GAC3B1kB,KAAK4gD,MAAMyxC,EAAS9c,EAAI,GAAG5wD,IAC3B,KAKHk2G,EAAT,SAAiBn2G,EAAGC,EAAG6M,EAAMixE,EAASlf,GAClCh9F,EAAQouG,OACJ4qC,GACAh5I,EAAQg/F,UAAYk/C,EAAmBR,EAAgB,OAEnD19I,EAAQkwG,yBADR2/B,EACmC,cAEA,oBAGvC7vI,EAAQg/F,UAAYk/C,EAAmBR,EAAgB5E,EACnDjJ,IACA7vI,EAAQkwG,yBAA2B,gBAG3ClwG,EAAQ6oH,YAAcq1B,EAAmB,EAAIhiC,EAC7Cl8G,EAAQi/F,SACJxlF,KAAK4gD,MAAMl8B,GAAK8M,GAChBxxB,KAAK4gD,MAAMj8B,GAAK6M,GAChBxxB,KAAK4gD,MAAa,EAAPpvB,GACXxxB,KAAK4gD,MAAa,EAAPpvB,IAEfjrC,EAAQwuG,WAIHmmC,EAAT,SAAsBx2G,EAAGC,EAAG6M,EAAM2nD,YASrB2lD,EAAYz6H,GACjB,IAAIm1H,EAAgB1tC,GAAG2E,IAAIimC,EAAWv9C,SAAUA,EAAU90E,EAAIqwB,GAC1D+kG,EAAe2E,GAAkBE,EAA6B9E,EAAgBA,EAAiB,GAC/FI,EAAY55H,KAAK2K,IAAI,GAAKuzH,GAAeG,EAAyB7E,EAAgB,IACtFqB,EAAQx2H,EAAIqgB,EAAGrgB,EAAIsgB,EAAGi1G,EAAWH,EAAcp1H,EAAIk/E,gBAG9C0hD,EAAgBC,GACrBN,EAAoBM,EAAWxxI,GAAIwxI,EAAW1uD,GAAI0uD,EAAWlyC,GAAIkyC,EAAWjyC,IAGhF,GAnBmB,OAAf2nC,IACAA,EAAa,IAAI9uC,GAAGmG,YACTlgE,IAAI0kG,EAAU/xG,EAAG+xG,EAAU9xG,EAAG,GAAG,eAIhDp+B,EAAQouG,OAa4B,IAAhC30F,KAAK4gD,MAAoB,EAAds9E,GACD,OAANx5G,EACAk2G,EAAWvnC,SAAS,EAAG,KAAM4xC,GAE7BrK,EAAW7oG,IAAIrN,EAAGC,EAAG,EAAG,KAAMsgH,OAG/B,CACH,IAAIlG,EAAevtG,EAAO2sG,EAEhB,OAANz5G,EACAk2G,EAAWvnC,SAAS0rC,EAAcD,GAElClE,EAAW7oG,IAAIrN,EAAGC,EAAGo6G,EAAcD,GAI3Cv4I,EAAQwuG,WA1ORoe,EAA8B,IAAI4qB,GAAGC,eAGvBE,EAAc,GAAKC,EAAiB,GAAKC,EAAiB,EAExEC,GAAyB,EAAMC,GAA4B,EAC3DlI,GAAwB,EACxBmJ,GAAkB,EAClBkF,GAAmB,EAGnBhO,EAAY,CAAC/xG,EAAG,EAAGC,EAAG,EAAGw0D,SAAU,GACnCu9C,EAAa,CAAChyG,EAAG,EAAGC,EAAG,EAAGw0D,SAAU,GAEpCqL,GAAY,EACZo2C,EAAa,KAIb0J,GAHQtkI,KAAK2uD,GAGEm9B,GAAGja,OAAO,EAAG,IAC5BsyD,EAAYG,EAAaxyD,WAAW,MAEpCsyD,EAAY,CACZ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,GAEJ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,IAyMRn7I,KAAKw4I,UAAY,SAAU/8G,EAAGC,EAAGhxB,IAC7B8sI,EAAe,CACX3sB,KAAM,CAAC,QAAS,cAChBinB,QAAS,KAEAA,QAAQzuI,KAAK,CACtButG,OAAQ,eACRh1B,OAAQ,CAACw5D,KAEboC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,UACRh1B,OAAQ,CAACq5D,KAEbuC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,aACRh1B,OAAQ,CAACs5D,KAEbsC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,aACRh1B,OAAQ,CAACu5D,KAEbqC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,WACRh1B,OAAQ,CAACo5D,KAEbwC,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,eACRh1B,OAAQ,CAACuxD,KAEbqK,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,cACRh1B,OAAQ,CAAC06D,KAEbkB,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,eACRh1B,OAAQ,CAAC4/D,KAGTA,GACAP,IAGJvwI,EAAIqM,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,EAAGlX,IAC5B,IAAI8lI,EAAe6E,EAA6BF,EAAiBzqI,EAAIA,EAAKyqI,EACtExE,EAAYyE,EAAyBr+H,KAAK2K,IAAI,GAAKhX,EAAIuqI,GAAel+H,KAAK2K,IAAI,GAAKuzH,GAExF15C,GAAY,EACZq2C,EAAQn2G,EAAGC,EAAGi1G,EAAWH,GACPG,EAAYuE,EAC9B1H,EAAU/xG,EAAIA,EACd+xG,EAAU9xG,EAAIA,EACd8xG,EAAUt9C,SAAWxlF,EACrB+iI,EAAa5qC,GAAGqD,QAAQsnC,GAExBgK,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,YACRh1B,OAAQ,CAACngD,EAAGC,EAAGhxB,MAIvB1K,KAAKy4I,OAAS,SAAUh9G,EAAGC,EAAGhxB,GAC1B,GAAK6wF,EAAL,CAGAi8C,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,SACRh1B,OAAQ,CAACngD,EAAGC,EAAGhxB,KAMnB,IAAIwlF,EAAW2S,GAAGv9B,MAAM56D,EAAG,EAAG,GAC1BimI,EAAYyE,EAAyBr+H,KAAK2K,IAAI,GAAK8rH,EAAUt9C,SAAW+kD,GAAel+H,KAAK2K,IAAI,GAAKuzH,GAEzGhD,EAAax2G,EAAGC,EAAGi1G,EAAWnD,EAAUt9C,UAExCu9C,EAAa5qC,GAAGqD,QAAQsnC,GACxBA,EAAU/xG,EAAIA,EACd+xG,EAAU9xG,EAAIA,EACd8xG,EAAUt9C,SAAWA,IAGzBlwF,KAAK04I,QAAU,SAAUj9G,EAAGC,GAExB,IAAIi1G,EAAYyE,EAAyBr+H,KAAK2K,IAAI,GAAK8rH,EAAUt9C,SAAW+kD,GAAel+H,KAAK2K,IAAI,GAAKuzH,GACzGhD,EAAa,KAAM,KAAMtB,EAAWnD,EAAUt9C,UAM9CqL,GAAY,EAEZo2C,EAAa,KAET6F,IACAA,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,UACRh1B,OAAQ,CAACngD,EAAGC,KAEhBwuF,EAAQ7mH,KAAKm0I,GACbA,OAAen5I,IAIvB2B,KAAK24I,gBAAkB,SAAU/xE,EAAIE,EAAItzB,EAAIurD,GAKzC,GAJAyuC,EAAU/xG,EAAI+X,EACdg6F,EAAU9xG,EAAIqjE,EACdyuC,EAAUt9C,SAAW,GAEjBqL,QAAoBl9F,IAAPuoE,EAAjB,CAQA,GAJI40E,GACAP,IAGgC,IAAhClkI,KAAK4gD,MAAoB,EAAds9E,GACXqG,EAAS10E,EAAIE,EAAItzB,EAAIurD,GAAI,OACtB,CACS8D,GAAG+E,iBAAiB,CAACnsE,EAAGmrC,EAAIlrC,EAAGorC,GAAK,CAACrrC,EAAG+X,EAAI9X,EAAGqjE,IAA3D,IAIIszC,EAHAH,EAAYn7H,KAAK4yB,KAAK5yB,KAAKwmB,IAAIiW,EAAKozB,EAAI,GAAO7vD,KAAKwmB,IAAIwhE,EAAKj4B,EAAI,IACjEqrE,GAAM3+F,EAAKozB,GAAMsrE,EACjBE,GAAMrzC,EAAKj4B,GAAMorE,EAEjBtB,EAAQqE,EAAcC,EAE1B,IAAK7C,EADa4C,EAAcC,EACC7C,GAAYH,EAAWG,GAAYzB,EAChEgB,EAAQhrE,EAAKurE,EAAKE,EAAUvrE,EAAKsrE,EAAKC,EAAU4C,EAAaE,GAIrE,IAAItD,EAAe,CACfhnB,KAAM,CAAC,QAAS,cAChBinB,QAAS,IAEbD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,eACRh1B,OAAQ,CAACw5D,KAEbvD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,UACRh1B,OAAQ,CAACq5D,KAEbpD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,aACRh1B,OAAQ,CAACs5D,KAEbrD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,aACRh1B,OAAQ,CAACu5D,KAEbtD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,WACRh1B,OAAQ,CAACo5D,KAEbnD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,eACRh1B,OAAQ,CAACuxD,KAEb0E,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,cACRh1B,OAAQ,CAAC06D,KAEbzE,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,eACRh1B,OAAQ,CAAC4/D,KAGb3J,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,kBACRh1B,OAAQ,CAAChV,EAAIE,EAAItzB,EAAIurD,KAEzBmrB,EAAQ7mH,KAAKwuI,KAIjB7xI,KAAKu7F,UAAY,WACb,OAAOA,GAGXv7F,KAAKk/G,SAAW,SAAU/gF,GAClB62G,IAAiB72G,IAIrBi4G,EAAkB,QADlBpB,EAAe72G,GACyBh6B,EAAI,IAAM6wI,EAAa1qD,EAAI,IAAM0qD,EAAa35G,EAAI,MAE9Fr7B,KAAK64I,WAAa,SAAU16G,GACxB7gC,EAAU6gC,GAEdn+B,KAAK84I,WAAa,SAAUxoC,GACxB4Z,EAAU5Z,GAEdtwG,KAAK84H,QAAU,SAAU3lF,GACrB8hG,EAAc9hG,GAElBnzC,KAAK+4I,WAAa,SAAU5uI,GACxBgrI,EAAiBhrI,GAErBnK,KAAKg5I,WAAa,SAAU7lG,GACxB+hG,EAAiB/hG,GAErBnzC,KAAKi5I,aAAe,SAAU59G,GAC1B+5G,EAAyB/5G,GAE7Br7B,KAAKk5I,gBAAkB,SAAU79G,GAC7Bg6G,EAA4Bh6G,GAEhCr7B,KAAKm5I,aAAe,SAAU99G,GAC1B8xG,EAAwB9xG,GAE5Br7B,KAAKk8I,YAAc,SAAU7gH,GACzBi7G,IAAoBj7G,GAExBr7B,KAAKm8I,aAAe,SAAU9gH,GAC1BmgH,IAAqBngH,GAGzBr7B,KAAKo5I,WAAa,WACd,OAAOlE,GAEXl1I,KAAKq5I,QAAU,WACX,OAAOpE,GAEXj1I,KAAKs5I,WAAa,WACd,OAAOnE,GAEXn1I,KAAKu5I,aAAe,WAChB,OAAOpM,GAEXntI,KAAKo8I,YAAc,WACf,OAAO9F,GAEXt2I,KAAKq8I,aAAe,WAChB,OAAOb,IFvdXc,WAAAjG,GACAkG,YAAA1H,GACA2H,2BGVIl/I,EAEAk6I,EAQA7F,EAIKC,EAAT,SAAiBn2G,EAAGC,EAAG6M,EAAMixE,GAEzBl8G,EAAQouG,OAGApuG,EAAQkwG,yBAFZivC,EACIC,EACmC,kBAEA,cAGJ,kBAEvC,IAAIC,EAAUr/I,EAAQs/I,qBAAqBr0G,EAAMA,EAAM,EAAGA,EAAMA,EAAMA,GAClE8mG,EAAYt4H,KAAKwmB,IAAIi8E,EAAS,GAClC61B,EAAYt4H,KAAK2K,IAAI,EAAG3K,KAAK6K,KAAK2mB,EAAO,GAAKA,EAAM8mG,IACpD,IAAIwN,EAAO9lI,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,EAAG43F,IAC/Bg3B,EAAe,EAAIqM,EAAOA,EAAOA,EACrCF,EAAQ5+B,aAAasxB,EAAW,uBAAyBmB,EAAe,KACxEmM,EAAQ5+B,aAAa,EAAG,0BACxBzgH,EAAQg/F,UAAYqgD,EACpBr/I,EAAQuuG,UAAUpwE,EAAI8M,EAAM7M,EAAI6M,GAChCjrC,EAAQi/F,SAAS,EAAG,EAAU,EAAPh0D,EAAiB,EAAPA,GACjCjrC,EAAQwuG,WAGHmmC,EAAT,SAAsBx2G,EAAGC,EAAGhxB,GAExB,IAAI6lI,EACAC,EAFJ9lI,EAAIqM,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,EAAGlX,IAG5B,IAAIimI,EAAasI,EAAgBliI,KAAK2K,IAAI,GAAKhX,EAAI+xF,GAAQ1lF,KAAK2K,IAAI,GAAK+6E,GAErEm0C,EAAQ75H,KAAK2K,IAAI,EAAG3K,KAAK2K,IAAI,GAAK,EAAIo7H,GAAWnM,EAAYpnC,YAExDkoC,EAAer2H,GACpB,IAAI0jG,EAAS1jG,EAAIqwB,EACjB8kG,EAAgB9C,EAAWv9C,UAAY,EAAI4uB,GAAUp0G,EAAIo0G,EACzD0xB,EAAgB0I,EAAoB4D,EAAUvM,EAAgBA,EAAiBuM,EAC/EnM,EAAasI,EAAgBliI,KAAK2K,IAAI,GAAK6uH,EAAgB9zC,GAAQ1lF,KAAK2K,IAAI,GAAK+6E,GAEjFm1C,EAAQx2H,EAAIqgB,EAAGrgB,EAAIsgB,EAAGi1G,EAAWH,GAG3B,OAAN/0G,EACAk2G,EAAWvnC,SAASwmC,EAAOa,GAE3BE,EAAW7oG,IAAIrN,EAAGC,EAAGk1G,EAAOa,IA1DhCvnB,EAA8B,IAAI4qB,GAAGC,eAGrCt4C,EAAO,GAAI8M,EAAU,GAAKuzC,EAAU,EACpC7D,GAAe,EAAMC,GAAkB,EAC9B1L,EAAY,CAAC/xG,EAAG,EAAGC,EAAG,EAAGw0D,SAAU,GAC5Cu9C,EAAa,CAAChyG,EAAG,EAAGC,EAAG,EAAGw0D,SAAU,GACpC6sD,GAAU,EAGVN,GAAc,EACdC,GAAkB,EAoDtB18I,KAAKw4I,UAAY,SAAU/8G,EAAGC,EAAGhxB,IAC7B8sI,EAAe,CACX3sB,KAAM,CAAC,QAAS,eAChBinB,QAAS,KAEAA,QAAQzuI,KAAK,CACtButG,OAAQ,kBACRh1B,OAAQ,CAACs9D,KAEb1B,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,eACRh1B,OAAQ,CAACq9D,KAEbzB,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,UACRh1B,OAAQ,CAAC6gB,KAEb+6C,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,aACRh1B,OAAQ,CAACkhE,KAEbtF,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,mBACRh1B,OAAQ,CAAC8gE,KAGbD,EAAc,IAAMn/I,EAAQsrF,OAAO9mE,MAEnCpX,EAAIqM,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,EAAGlX,IAC5B,IAAI8lI,EAAgB0I,EAAoB4D,EAAUpyI,EAAIA,EAAKoyI,EACvDnM,EAAasI,EAAgBliI,KAAK2K,IAAI,GAAKhX,EAAI+xF,GAAQ1lF,KAAK2K,IAAI,GAAK+6E,GAEzEsgD,GAAU,EACNpM,EAAY,GACZiB,EAAQn2G,EAAGC,EAAGi1G,EAAWH,GAEnBG,EAAYpnC,EACtBikC,EAAU/xG,EAAIA,EACd+xG,EAAU9xG,EAAIA,EACd8xG,EAAUt9C,SAAWxlF,EACrB+iI,EAAa5qC,GAAGqD,QAAQsnC,IAExBmE,EAAa,IAAI9uC,GAAGmG,YACTlgE,IAAIrN,EAAGC,EAAG,GAAG,eAGxB87G,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,YACRh1B,OAAQ,CAACngD,EAAGC,EAAGhxB,MAGvB1K,KAAKy4I,OAAS,SAAUh9G,EAAGC,EAAGhxB,GACrBqyI,IAGLvF,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,SACRh1B,OAAQ,CAACngD,EAAGC,EAAGhxB,KAGnBunI,EAAax2G,EAAGC,EAAG8xG,EAAUt9C,UAE7Bu9C,EAAa5qC,GAAGqD,QAAQsnC,GACxBA,EAAU/xG,EAAIA,EACd+xG,EAAU9xG,EAAIA,EACd8xG,EAAUt9C,SAAWxlF,IAEzB1K,KAAK04I,QAAU,WAEP/G,GACAM,EAAa,KAAM,KAAMzE,EAAUt9C,UAGvC6sD,GAAU,EACVpL,OAAatzI,EAETm5I,IACAA,EAAa1F,QAAQzuI,KAAK,CACtButG,OAAQ,UACRh1B,OAAQ,KAEZsuC,EAAQ7mH,KAAKm0I,GACbA,OAAen5I,IAIvB2B,KAAK24I,gBAAkB,SAAU/xE,EAAIE,EAAItzB,EAAIurD,GAOzC,GALA09C,EAAc,IAAMn/I,EAAQsrF,OAAO9mE,MAEnC0rH,EAAU/xG,EAAI+X,EACdg6F,EAAU9xG,EAAIqjE,GAEVg+C,QAAkB1+I,IAAPuoE,EAAf,CAIA,IAGIyrE,EAHAH,EAAYn7H,KAAK4yB,KAAK5yB,KAAKwmB,IAAIiW,EAAKozB,EAAI,GAAO7vD,KAAKwmB,IAAIwhE,EAAKj4B,EAAI,IACjEqrE,GAAM3+F,EAAKozB,GAAMsrE,EACjBE,GAAMrzC,EAAKj4B,GAAMorE,EAEjBtB,EAAQ75H,KAAK2K,IAAI,EAAG3K,KAAK2K,IAAI,GAAK,EAAIo7H,GAAWrgD,EAAO8M,GAE5D,IAAK8oC,EADK,EACeA,GAAYH,EAAWG,GAAYzB,EACxDgB,EAAQhrE,EAAKurE,EAAKE,EAAUvrE,EAAKsrE,EAAKC,EAAU51C,EAAMqgD,GAI1D,IAAIjL,EAAe,CACfhnB,KAAM,CAAC,QAAS,eAChBinB,QAAS,IAEbD,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,kBACRh1B,OAAQ,CAACs9D,KAEbrH,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,eACRh1B,OAAQ,CAACq9D,KAEbpH,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,UACRh1B,OAAQ,CAAC6gB,KAEbo1C,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,aACRh1B,OAAQ,CAACkhE,KAEbjL,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,mBACRh1B,OAAQ,CAAC8gE,KAGb7K,EAAaC,QAAQzuI,KAAK,CACtButG,OAAQ,kBACRh1B,OAAQ,CAAChV,EAAIE,EAAItzB,EAAIurD,KAEzBmrB,EAAQ7mH,KAAKwuI,KAIjB7xI,KAAKu7F,UAAY,WACb,OAAOwhD,GAQX/8I,KAAK64I,WAAa,SAAU16G,GACxB7gC,EAAU6gC,GAEdn+B,KAAK84I,WAAa,SAAUxoC,GACxB4Z,EAAU5Z,GAEdtwG,KAAK84H,QAAU,SAAU3lF,GACrBspD,EAAOtpD,GAEXnzC,KAAK+4I,WAAa,SAAU5uI,GACxB2yI,EAAU3yI,GAEdnK,KAAKi5I,aAAe,SAAU59G,GAC1B49G,EAAe59G,GAEnBr7B,KAAKk5I,gBAAkB,SAAU79G,GAC7B69G,EAAkB79G,GAEtBr7B,KAAKg9I,iBAAmB,SAAU3hH,GAC9BqhH,EAAuB,GAALrhH,GAGtBr7B,KAAKq5I,QAAU,WACX,OAAO58C,GAEXz8F,KAAKs5I,WAAa,WACd,OAAOwD,KCpPFG,GAAa,GCD1BC,GAAiB/tI,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SCa/G,IACC69I,GAgBAC,MAjBKC,IACLF,GAA2B,CAC3B7kC,MAAO9G,EAAA0rC,IACPI,QAASzqC,GAAK,aACd0qC,WAAY,CACR37H,IAAK,GACLF,IAAK,IACL85F,MAAO3Y,GAAG0H,qBAAqB,GAAK,IAAK,KAE7CizC,cAAe,CACX57H,IAAK,EACLF,IAAK,EACL85F,MAAO,CAAC,CAAC,EAAG,KAAU,CAAC,GAAK,IAAM,CAAC,EAAG,KAE1CiiC,GAAI,MAGJL,GAAa,CACbvqC,GAAK,oBACLA,GAAK,mBACLA,GAAK,yBACLA,GAAK,qBAETD,GAAgB9nC,WAAU,WACtBqyE,GAAeG,QAAUzqC,GAAK,aAC9BuqC,GAAa,CACTvqC,GAAK,oBACLA,GAAK,mBACLA,GAAK,yBACLA,GAAK,wBAIbsqC,GAAeM,GAAK,SAAUhzI,OAKtB8yI,EACAC,EAkCKE,EAAT,WACI,IAAK,IAAI7gJ,EAAI,EAAGA,EAAI8gJ,EAAO7gJ,OAAQD,IAE3B8gJ,EAAO9gJ,GAAGuyG,UADVvyG,IAAM+gJ,EACgB,uBAEA,eA6BzB9kB,EAAT,SAAiBvwF,GACboqG,EAAM7Z,QAAQvwF,GACdoqG,EAAMqG,WAAWjiI,KAAK2K,IAAI,EAAGm8H,EAAcx+C,YAAY92D,IAAS,KA3EhEmE,EAAMl9B,SAASM,cAAc,OAC7B6iI,EAAQ,IAAI2E,GAAQC,SACxB5E,EAAMmG,WAAW5nC,IACjBzmG,EAAEqzI,aAAanL,EAAM0G,WAMrB,IAFA,IAAIsE,EAAS,GACTC,EAAe,EACVtxD,EAAI,EAAGA,EAAI,EAAGA,KAAC,SACTzvF,GACP,IAAI4xI,EAAQ5rC,GAAGvgF,GAAG,CACdqkF,MAAOy2C,GAAWvgJ,GAClBwyG,QAAS,WAsCrB,IAAoBtyG,EAChB6gJ,EADgB7gJ,EArCOF,EAuCvB81I,EAAMiG,SAAS77I,GACf2gJ,OArCQ90D,EAASia,GAAGja,OAAO,GAAI,IACvByT,EAAMzT,EAAOC,WAAW,MAClB,IAANhsF,GAAiB,IAANA,EACD,IAANA,GACAw/F,EAAIwrB,YACJxrB,EAAI87C,IAAI,GAAI,GAAI,GAAI,EAAG,EAAIphI,KAAK2uD,IAChC22B,EAAIg8C,YACJh8C,EAAIhsE,QAEJgsE,EAAIE,SAAS,EAAG,EAAG,GAAI,IAEd,IAAN1/F,EACPw/F,EAAI0O,UAAUihC,GAAgB,IAAK,EAAG,GACzB,IAANnvI,GACPw/F,EAAI0O,UAAU0hC,GAAgB,IAAK,EAAG,GAE1CgC,EAAMrnH,MAAMixF,gBAAkB,OAASzvB,EAAO8T,UAAU,aAAe,IAEvEihD,EAAOt6I,KAAKorI,GA1BI,CA2BlBniD,GAaNoxD,IAQA,IAAIK,EAAkB,IAAI/mC,GAAS,CAC/B7tE,KAAMwpG,EAAM4G,eACZvgE,MAAO65B,GAAK,oBACZ3tC,SAAU,SAAU7pC,GAChBs3G,EAAMwG,aAAa99G,IAEvB87E,aAAa,EACbxQ,MAAOkM,GAAK,0BACZ9O,IAAK,CACD2V,SAAU,QACVkH,UAAW,WAIfi9B,EAAgB,IAAIh7C,GAAGyH,mBAAmB,CAAC,CAAC,EAAG,IAAK,CAAC,EAAG,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,KAAM,CAAC,IAAK,MAOnG,WACIizC,EAAa,IAAIvjC,GAAS,CACtBhhC,MAAO65B,GAAK,cACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,GAAeI,WAAW37H,IAC/BF,IAAKy7H,GAAeI,WAAW77H,IAC/Bw2F,UAAWy6B,EAAM0G,UACjBj+B,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChB09G,EAAQ19G,GACR3Q,EAAEqzI,aAAa1iI,IAEnBogG,MAAO2hC,GAAeI,WAAW/hC,MACjCX,WAAY,SAAUz/E,GAElB,OADAA,GAAK,GACG,GACGrkB,KAAK4gD,MAAU,GAAJv8B,GAAU,GAErBrkB,KAAK4gD,MAAMv8B,MAI9BoiH,EAAgB,IAAIxjC,GAAS,CACzBhhC,MAAO65B,GAAK,WACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,GAAeK,cAAc57H,IAClCF,IAAKy7H,GAAeK,cAAc97H,IAClCw2F,UAAWilC,GAAeK,cAAc97H,IACxC05F,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChBu3H,EAAMoG,WAAW39H,GACjB3Q,EAAEuzI,gBAAgB5iI,IAEtBogG,MAAO2hC,GAAeK,cAAchiC,MACpCX,WAAY,SAASz/E,GACjB,OAAOrkB,KAAK4gD,MAAU,IAAJv8B,MAI1B,IAAI6iH,EAAqB/kC,IAAkB,GAAO,SAAU79E,GACxDs3G,EAAMsG,aAAa59G,MAEnB6iH,EAAwBhlC,IAAkB,GAAO,SAAU79E,GAC3Ds3G,EAAMuG,gBAAgB79G,MAG1BqR,EAAI8vC,OACAqmB,GAAGvgF,GAAG,CACFiE,QAAS,CACLg3H,EAAW9kC,aACXwlC,GAEJl6C,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,gBAChBC,WAAY,SACZS,aAAc,UAGtB1R,GAAGvgF,GAAG,CACFiE,QAAS,CACLi3H,EAAc/kC,aACdylC,GAEJn6C,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,gBAChBC,WAAY,aAMxB,IADA,IAAIqqC,EAAe3uI,SAASM,cAAc,OACjCjT,EAAI,EAAGA,EAAI8gJ,EAAO7gJ,OAAQD,IAC/BshJ,EAAa9tI,YAAYstI,EAAO9gJ,IAEpCshJ,EAAa/2H,MAAM6tF,UAAY,OAC/BvoE,EAAIr8B,YAAY8tI,GAChBA,EAAa9tI,YAAY0tI,EAAgBtlC,cAI7CtvE,GAEAnpC,KAAKo+I,aAAe,SAAU5vF,GACrBmkF,EAAMp3C,aACPgiD,EAAWthC,cAAcztD,IAGjCxuD,KAAKq+I,aAAe,SAAU7vF,GACrBmkF,EAAMp3C,aACPgiD,EAAWrhC,cAAc1tD,IAIjCxuD,KAAKq5I,QAAU,WACX,OAAO1G,EAAM0G,WAEjBr5I,KAAK84H,QAAU,SAASvwF,GACpBuwF,EAAQvwF,GACRg1G,EAAW/kC,SAASjwE,IAExBvoC,KAAKs5I,WAAa,WACd,OAAO3G,EAAM2G,cAEjBt5I,KAAK+4I,WAAa,SAASv/B,GACvBm5B,EAAMoG,WAAWv/B,GACjBgkC,EAAchlC,SAASgB,IAG3Bx5G,KAAKk/G,SAAW,SAAU/gF,GACtBw0G,EAAMzzB,SAAS/gF,IAEnBn+B,KAAK64I,WAAa,SAAU16G,GACxBw0G,EAAMkG,WAAW16G,IAErBn+B,KAAKw4I,UAAY,SAAU/8G,EAAGC,EAAGhxB,GAC7BioI,EAAM6F,UAAU/8G,EAAGC,EAAGhxB,IAE1B1K,KAAKy4I,OAAS,SAAUh9G,EAAGC,EAAGhxB,GAC1BioI,EAAM8F,OAAOh9G,EAAGC,EAAGhxB,IAEvB1K,KAAK04I,QAAU,SAAUj9G,EAAGC,GACxBi3G,EAAM+F,QAAQj9G,EAAGC,IAErB17B,KAAKs+I,SAAW,WACZ,OAAO3L,GAEX3yI,KAAKu7F,UAAY,WACb,OAAOo3C,EAAMp3C,aAEjBv7F,KAAKy4G,WAAa,WACd,OAAO/rE,IAGRywG,ICtQXoB,GAAiBpvI,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SCY/G,OAAMk/I,GAAgB,WACzB,IAAIrB,EAA2B,CAC3B7kC,MAAO9G,EAAA+sC,IACPjB,QAASzqC,GAAK,eACd0qC,WAAY,CACR37H,IAAK,GACLF,IAAK,IACL85F,MAAO3Y,GAAG0H,qBAAqB,GAAK,IAAK,KAE7CizC,cAAe,CACX57H,IAAK,IACLF,IAAK,GAET+7H,GAAI,MA8KR,OA3KA7qC,GAAgB9nC,WAAU,WACtBqyE,EAAeG,QAAUzqC,GAAK,kBAGlCsqC,EAAeM,GAAK,SAAUhzI,OAMtB8yI,EACAC,EAEK1kB,EAAT,SAAiBvwF,GACboqG,EAAM7Z,QAAQvwF,IATdmE,EAAMl9B,SAASM,cAAc,OAC7B6iI,EAAQ,IAAI2E,GAAQkC,WACxB7G,EAAMmG,WAAW5nC,IACjBzmG,EAAEqzI,aAAanL,EAAM0G,WASrB,WACIkE,EAAa,IAAIvjC,GAAS,CACtBhhC,MAAO65B,GAAK,cACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,EAAeI,WAAW37H,IAC/BF,IAAKy7H,EAAeI,WAAW77H,IAC/Bw2F,UAAW,GACXkD,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChB09G,EAAQ19G,GACR3Q,EAAEqzI,aAAa1iI,IAEnBogG,MAAO2hC,EAAeI,WAAW/hC,MACjCX,WAAY,SAAUz/E,GAElB,OADAA,GAAK,EACErkB,KAAK4gD,MAAMv8B,MAG1BoiH,EAAgB,IAAIxjC,GAAS,CACzBhhC,MAAO65B,GAAK,WACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,EAAeK,cAAc57H,IAClCF,IAAKy7H,EAAeK,cAAc97H,IAClCw2F,UAAWy6B,EAAM2G,aACjBl+B,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChBu3H,EAAMoG,WAAW39H,GACjB3Q,EAAEuzI,gBAAgB5iI,IAEtBy/F,WAAY,SAASz/E,GACjB,OAAOrkB,KAAK4gD,MAAU,IAAJv8B,MAG1B,IAAIqjH,EAAiB,IAAIzkC,GAAS,CAC9BhhC,MAAO65B,GAAK,kBACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,IACLw2F,UAAiC,IAAtBy6B,EAAMwH,cACjB/+B,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChBu3H,EAAMyH,YAAYh/H,EAAM,QAGhCqjI,EAAehmC,aAAarxF,MAAM6tF,UAAY,OAE9C,IAAIgpC,EAAqB/kC,IAAkB,GAAM,SAAU79E,GACvDs3G,EAAM+L,gBAAgBrjH,MAEtB6iH,EAAwBhlC,IAAkB,GAAO,SAAU79E,GAC3Ds3G,EAAMgM,mBAAmBtjH,MAGzB0iH,EAAkB,IAAI/mC,GAAS,CAC/B7tE,KAAMwpG,EAAM4G,eACZvgE,MAAO65B,GAAK,oBACZ3tC,SAAU,SAAU7pC,GAChBs3G,EAAMwG,aAAa99G,IAEvB87E,aAAa,EACbxQ,MAAOkM,GAAK,0BACZ9O,IAAK,CACDkR,UAAW,OACX5tF,QAAS,kBAKjBqlB,EAAI8vC,OACAqmB,GAAGvgF,GAAG,CACFiE,QAAS,CACLg3H,EAAW9kC,aACXwlC,GAEJl6C,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,gBAChBC,WAAY,SACZS,aAAc,UAGtB1R,GAAGvgF,GAAG,CACFiE,QAAS,CACLi3H,EAAc/kC,aACdylC,GAEJn6C,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,gBAChBC,WAAY,YAGpB2qC,EAAehmC,aACfslC,EAAgBtlC,cAIxBtvE,GAEAnpC,KAAKo+I,aAAe,SAAU5vF,GACrBmkF,EAAMn3C,gBACP+hD,EAAWthC,cAAcztD,IAGjCxuD,KAAKq+I,aAAe,SAAU7vF,GACrBmkF,EAAMn3C,gBACP+hD,EAAWrhC,cAAc1tD,IAIjCxuD,KAAKq5I,QAAU,WACX,OAAO1G,EAAM0G,WAEjBr5I,KAAK84H,QAAU,SAASvwF,GACpBuwF,EAAQvwF,GACRg1G,EAAW/kC,SAASjwE,IAExBvoC,KAAKs5I,WAAa,WACd,OAAO3G,EAAM2G,cAEjBt5I,KAAK+4I,WAAa,SAASv/B,GACvBm5B,EAAMoG,WAAWv/B,GACjBgkC,EAAchlC,SAASgB,IAG3Bx5G,KAAKk/G,SAAW,SAAU/gF,GACtBw0G,EAAMzzB,SAAS/gF,IAEnBn+B,KAAK64I,WAAa,SAAU16G,GACxBw0G,EAAMkG,WAAW16G,IAErBn+B,KAAKw4I,UAAY,SAAU/8G,EAAGC,EAAGhxB,GAC7BioI,EAAM6F,UAAU/8G,EAAGC,EAAGhxB,IAE1B1K,KAAKy4I,OAAS,SAAUh9G,EAAGC,EAAGhxB,EAAG0qF,GAC7Bu9C,EAAM8F,OAAOh9G,EAAGC,EAAGhxB,EAAG0qF,IAE1Bp1F,KAAK04I,QAAU,WACX/F,EAAM+F,WAEV14I,KAAKs+I,SAAW,WACZ,OAAO3L,GAEX3yI,KAAKu7F,UAAY,WACb,OAAOo3C,EAAMn3C,gBAEjBx7F,KAAKy4G,WAAa,WACd,OAAO/rE,IAIRywG,EA3LkB,GCZ7ByB,GAAiBzvI,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SCS/G,OAAMu/I,GAAkB,WAC3B,IAAI1B,EAA2B,CAC3B7kC,MAAO9G,EAAAotC,IACPtB,QAASzqC,GAAK,iBACd0qC,WAAY,CACR37H,IAAK,GACLF,IAAK,IAET87H,cAAe,CACX57H,IAAK,IACLF,IAAK,GAET+7H,GAAI,MAoJR,OAjJA7qC,GAAgB9nC,WAAU,WACtBqyE,EAAeG,QAAUzqC,GAAK,oBAGlCsqC,EAAeM,GAAK,SAAU/yI,OAKtB6yI,EACAC,EALA9wG,EAAMl9B,SAASM,cAAc,OAC7B6iI,EAAQ,IAAI2E,GAAQmC,aACxB9G,EAAMmG,WAAW5nC,IACjBxmG,EAAEozI,aAAanL,EAAM0G,WAQrB,WACIkE,EAAa,IAAIvjC,GAAS,CACtBhhC,MAAO65B,GAAK,cACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,EAAeI,WAAW37H,IAC/BF,IAAKy7H,EAAeI,WAAW77H,IAC/Bw2F,UAAWy6B,EAAM0G,UACjBj+B,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChBu3H,EAAM7Z,QAAQ19G,GACd1Q,EAAEozI,aAAanL,EAAM0G,YAEzBx+B,WAAY,SAAUz/E,GAElB,OADAA,GAAK,GACG,GACGrkB,KAAK4gD,MAAU,GAAJv8B,GAAU,GAErBrkB,KAAK4gD,MAAMv8B,MAI9BoiH,EAAgB,IAAIxjC,GAAS,CACzBhhC,MAAO65B,GAAK,WACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,EAAeK,cAAc57H,IAClCF,IAAKy7H,EAAeK,cAAc97H,IAClCw2F,UAAWy6B,EAAM2G,aACjBl+B,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChBu3H,EAAMoG,WAAW39H,GACjB1Q,EAAEszI,gBAAgB5iI,IAEtBy/F,WAAY,SAASz/E,GACjB,OAAOrkB,KAAK4gD,MAAU,IAAJv8B,MAG1B,IAAI0jH,EAAc,IAAI9kC,GAAS,CAC3BhhC,MAAO65B,GAAK,kBACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,IACLw2F,UAAiC,IAAtBy6B,EAAMwH,cACjB/+B,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChBu3H,EAAMyH,YAAYh/H,EAAM,QAG5B2jI,EAAc,IAAI/kC,GAAS,CAC3BhhC,MAAO65B,GAAK,uBACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,GACLw2F,UAAWy6B,EAAM0H,WACjBj/B,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChBu3H,EAAMnS,SAASplH,MAGvBoiI,EAAc/kC,aAAarxF,MAAM6tF,UAAY,OAC7C6pC,EAAYrmC,aAAarxF,MAAM6tF,UAAY,OAC3C8pC,EAAYtmC,aAAarxF,MAAM6tF,UAAY,OAC3CvoE,EAAIr8B,YAAYktI,EAAW9kC,cAC3B/rE,EAAIr8B,YAAYmtI,EAAc/kC,cAC9B/rE,EAAIr8B,YAAYyuI,EAAYrmC,cAC5B/rE,EAAIr8B,YAAY0uI,EAAYtmC,cAGhCtvE,GAEAnpC,KAAKo+I,aAAe,SAAU5vF,GACrBmkF,EAAMp3C,aACPgiD,EAAWthC,cAAcztD,IAGjCxuD,KAAKq+I,aAAe,SAAU7vF,GACrBmkF,EAAMp3C,aACPgiD,EAAWrhC,cAAc1tD,IAGjCxuD,KAAKq5I,QAAU,WACX,OAAO1G,EAAM0G,WAEjBr5I,KAAK84H,QAAU,SAASvwF,IA1FxB,SAAiBA,GACboqG,EAAM7Z,QAAQvwF,GA0FduwF,CAAQvwF,GACRg1G,EAAW/kC,SAASjwE,IAExBvoC,KAAKs5I,WAAa,WACd,OAAO3G,EAAM2G,cAEjBt5I,KAAK+4I,WAAa,SAASv/B,GACvBm5B,EAAMoG,WAAWv/B,GACjBgkC,EAAchlC,SAASgB,IAE3Bx5G,KAAKk/G,SAAW,SAAU/gF,GACtBw0G,EAAMzzB,SAAS/gF,IAEnBn+B,KAAK64I,WAAa,SAAU16G,GACxBw0G,EAAMkG,WAAW16G,IAErBn+B,KAAKw4I,UAAY,SAAU/8G,EAAGC,EAAGw0D,GAC7ByiD,EAAM6F,UAAU/8G,EAAGC,EAAGw0D,IAE1BlwF,KAAKy4I,OAAS,SAAUh9G,EAAGC,EAAGw0D,GAC1ByiD,EAAM8F,OAAOh9G,EAAGC,EAAGw0D,EAAU,OAEjClwF,KAAK04I,QAAU,WACX/F,EAAM+F,WAEV14I,KAAKg6I,QAAU,WACX,OAAO/pG,SAAS0iG,EAAMqH,YAE1Bh6I,KAAK+5I,QAAU,SAAU5mG,GACrBw/F,EAAMoH,QAAQ9pG,SAASkD,KAE3BnzC,KAAKs+I,SAAW,WACZ,OAAO3L,GAEX3yI,KAAKu7F,UAAY,WACb,OAAOo3C,EAAMp3C,aAEjBv7F,KAAKy4G,WAAa,WACd,OAAO/rE,IAIRywG,EAhKoB,GCT/B6B,GAAiB7vI,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SCY/G,OAAM2/I,GAAgB,WACzB,IAAI9B,EAA2B,CAC3B7kC,MAAO9G,EAAAwtC,IACP1B,QAASzqC,GAAK,eACd0qC,WAAY,CACR37H,IAAK,GACLF,IAAK,IACL85F,MAAO3Y,GAAG0H,qBAAqB,GAAK,IAAK,KAE7CizC,cAAe,CACX57H,IAAK,EACLF,IAAK,EACL85F,MAAO,CAAC,CAAC,EAAG,KAAU,CAAC,GAAK,IAAM,CAAC,EAAG,KAE1CiiC,GAAI,MAkLR,OA/KA7qC,GAAgB9nC,WAAU,WACtBqyE,EAAeG,QAAUzqC,GAAK,kBAGlCsqC,EAAeM,GAAK,SAAUhzI,OAKtB8yI,EACAC,EAoCK1kB,EAAT,SAAiBvwF,GACboqG,EAAM7Z,QAAQvwF,GACdoqG,EAAMqG,WAAW6E,EAAcx+C,YAAY92D,GAAQA,IA3CnDmE,EAAMl9B,SAASM,cAAc,OAC7B6iI,EAAQ,IAAI2E,GAAQyD,WACxBpI,EAAMmG,WAAW5nC,IACjBzmG,EAAEqzI,aAAanL,EAAM0G,WAIrB,IAAI0E,EAAkB,IAAI/mC,GAAS,CAC/B7tE,KAAMwpG,EAAM4G,eACZvgE,MAAO65B,GAAK,oBACZ3tC,SAAU,SAAU7pC,GAChBs3G,EAAMwG,aAAa99G,IAEvB87E,aAAa,EACbxQ,MAAOkM,GAAK,0BACZ9O,IAAK,CACDyQ,YAAa,UAIjB0qC,EAAe,IAAIloC,GAAS,CAC5B7tE,KAAMwpG,EAAMyJ,cACZpjE,MAAO65B,GAAK,UACZ3tC,SAAU,SAAU7pC,GAChBs3G,EAAMuJ,YAAY7gH,IAEtB0oE,IAAK,CACDyQ,YAAa,UAIjB2qC,EAAe,IAAInoC,GAAS,CAC5B7tE,KAAMwpG,EAAM0J,eACZrjE,MAAO65B,GAAK,sBACZ3tC,SAAU,SAAU7pC,GAChBs3G,EAAMwJ,aAAa9gH,MAIvBwiH,EAAgB,IAAIh7C,GAAGyH,mBAAmB,CAAC,CAAC,GAAK,KAAO,CAAC,IAAK,MAOlE,WACIizC,EAAa,IAAIvjC,GAAS,CACtBhhC,MAAO65B,GAAK,cACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,EAAeI,WAAW37H,IAC/BF,IAAKy7H,EAAeI,WAAW77H,IAC/Bw2F,UAAWy6B,EAAM0G,UACjBj+B,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChBA,EAAMrE,KAAK4gD,MAAY,EAANv8C,GAAW,EAC5B09G,EAAQ19G,GACR3Q,EAAEqzI,aAAa1iI,IAEnBogG,MAAO2hC,EAAeI,WAAW/hC,MACjCX,WAAY,SAAUz/E,GAElB,OADAA,GAAK,EACErkB,KAAK4gD,MAAMv8B,MAG1BoiH,EAAgB,IAAIxjC,GAAS,CACzBhhC,MAAO65B,GAAK,WACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,EAAeK,cAAc57H,IAClCF,IAAKy7H,EAAeK,cAAc97H,IAClCw2F,UAAWilC,EAAeK,cAAc97H,IACxC05F,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChBu3H,EAAMoG,WAAW39H,GACjB3Q,EAAEuzI,gBAAgB5iI,IAEtBogG,MAAO2hC,EAAeK,cAAchiC,MACpCX,WAAY,SAASz/E,GACjB,OAAOrkB,KAAK4gD,MAAU,IAAJv8B,MAI1B,IAAI6iH,EAAqB/kC,IAAkB,GAAO,SAAU79E,GACxDs3G,EAAMsG,aAAa59G,MAGvBqR,EAAI8vC,OACAqmB,GAAGvgF,GAAG,CACFiE,QAAS,CACLg3H,EAAW9kC,aACXwlC,GAEJl6C,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,gBAChBC,WAAY,SACZS,aAAc,UAGtBipC,EAAc/kC,cAGlB,IAAI2mC,EAAYv8C,GAAGvgF,GAAG,CAClBg4B,OAAQ5N,EACRq3D,IAAK,CACD18E,QAAS,OACT4tF,UAAW,UAInBmqC,EAAU/uI,YAAY0tI,EAAgBtlC,cACtC2mC,EAAU/uI,YAAY6uI,EAAazmC,cACnC2mC,EAAU/uI,YAAY8uI,EAAa1mC,cAGvCtvE,GAEAnpC,KAAKo+I,aAAe,SAAU5vF,GACrBmkF,EAAMp3C,aACPgiD,EAAWthC,cAAcztD,IAGjCxuD,KAAKq+I,aAAe,SAAU7vF,GACrBmkF,EAAMp3C,aACPgiD,EAAWrhC,cAAc1tD,IAIjCxuD,KAAKq5I,QAAU,WACX,OAAO1G,EAAM0G,WAEjBr5I,KAAK84H,QAAU,SAASvwF,GACpBuwF,EAAQvwF,GACRg1G,EAAW/kC,SAASjwE,IAExBvoC,KAAKs5I,WAAa,WACd,OAAO3G,EAAM2G,cAEjBt5I,KAAK+4I,WAAa,SAASv/B,GACvBm5B,EAAMoG,WAAWv/B,GACjBgkC,EAAchlC,SAASgB,IAG3Bx5G,KAAKk/G,SAAW,SAAU/gF,GACtBw0G,EAAMzzB,SAAS/gF,IAEnBn+B,KAAK64I,WAAa,SAAU16G,GACxBw0G,EAAMkG,WAAW16G,IAErBn+B,KAAKw4I,UAAY,SAAU/8G,EAAGC,EAAGhxB,GAC7BioI,EAAM6F,UAAU/8G,EAAGC,EAAGhxB,IAE1B1K,KAAKy4I,OAAS,SAAUh9G,EAAGC,EAAGhxB,GAC1BioI,EAAM8F,OAAOh9G,EAAGC,EAAGhxB,IAEvB1K,KAAK04I,QAAU,SAAUj9G,EAAGC,GACxBi3G,EAAM+F,QAAQj9G,EAAGC,IAErB17B,KAAKs+I,SAAW,WACZ,OAAO3L,GAEX3yI,KAAKu7F,UAAY,WACb,OAAOo3C,EAAMp3C,aAEjBv7F,KAAKy4G,WAAa,WACd,OAAO/rE,IAGRywG,EAhMkB,GCZ7BkC,GAAiBlwI,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SCY/G,OAAMggJ,GAAiB,WAC1B,IAAInC,EAA2B,CAC3B7kC,MAAO9G,EAAA6tC,IACP/B,QAASzqC,GAAK,UAAY,OAC1B0qC,WAAY,CACR37H,IAAK,GACLF,IAAK,IACL85F,MAAO3Y,GAAG0H,qBAAqB,GAAK,IAAK,KAE7CizC,cAAe,CACX57H,IAAK,IACLF,IAAK,GAET+7H,GAAI,MAuKR,OApKA7qC,GAAgB9nC,WAAU,WACtBqyE,EAAeG,QAAUzqC,GAAK,UAAY,UAG9CsqC,EAAeM,GAAK,SAAUhzI,OAMtB8yI,EACAC,EAGK1kB,EAAT,SAAiBvwF,GACboqG,EAAM7Z,QAAQvwF,IAVdmE,EAAMl9B,SAASM,cAAc,OAC7B6iI,EAAQ,IAAI2E,GAAQkF,YACxB7J,EAAMmG,WAAW5nC,IACjBzmG,EAAEqzI,aAAanL,EAAM0G,WAIrB,IAAIkG,GAAkB,GAMtB,WACIhC,EAAa,IAAIvjC,GAAS,CACtBhhC,MAAO65B,GAAK,cACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,EAAeI,WAAW37H,IAC/BF,IAAKy7H,EAAeI,WAAW77H,IAC/Bw2F,UAAW,GACXkD,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChB09G,EAAQ19G,GACR3Q,EAAEqzI,aAAa1iI,IAEnBogG,MAAO2hC,EAAeI,WAAW/hC,MACjCX,WAAY,SAAUz/E,GAElB,OADAA,GAAK,GACG,GACGrkB,KAAK4gD,MAAU,GAAJv8B,GAAU,GAErBrkB,KAAK4gD,MAAMv8B,MAI9BoiH,EAAgB,IAAIxjC,GAAS,CACzBhhC,MAAO65B,GAAK,WACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,EAAeK,cAAc57H,IAClCF,IAAKy7H,EAAeK,cAAc97H,IAClCw2F,UAAW,EACXkD,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChBu3H,EAAMoG,WAAW39H,GACjB3Q,EAAEuzI,gBAAgB5iI,IAEtBy/F,WAAY,SAASz/E,GACjB,OAAOrkB,KAAK4gD,MAAU,IAAJv8B,MAI1B,IAAI6iH,EAAqB/kC,IAAkB,GAAO,SAAU79E,GACxDs3G,EAAMsG,aAAa59G,MAEnB6iH,EAAwBhlC,IAAkB,GAAO,SAAU79E,GAC3Ds3G,EAAMuG,gBAAgB79G,MAG1BqR,EAAI8vC,OACAqmB,GAAGvgF,GAAG,CACFiE,QAAS,CACLg3H,EAAW9kC,aACXwlC,GAEJl6C,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,gBAChBC,WAAY,SACZS,aAAc,UAGtB1R,GAAGvgF,GAAG,CACFiE,QAAS,CACLi3H,EAAc/kC,aACdylC,GAEJn6C,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,gBAChBC,WAAY,aAKxB,IAAI0rC,EAAqB,IAAIxoC,GAAS,CAClC7tE,MAAM,EACN6vC,MAAO65B,GAAK,+BACZ3tC,SAAU,SAAU7pC,GAChBkkH,EAAkBlkH,EAClBs3G,EAAMqK,iBAAiB3hH,IAE3B0oE,IAAK,CACDkR,UAAW,UAGnBvoE,EAAIr8B,YAAYmvI,EAAmB/mC,cAGvCtvE,GAMAnpC,KAAKo+I,aAAe,SAAU5vF,GACrBmkF,EAAMp3C,aACPgiD,EAAWthC,cAAcztD,IAGjCxuD,KAAKq+I,aAAe,SAAU7vF,GACrBmkF,EAAMp3C,aACPgiD,EAAWrhC,cAAc1tD,IAGjCxuD,KAAKq5I,QAAU,WACX,OAAO1G,EAAM0G,WAEjBr5I,KAAK84H,QAAU,SAASvwF,GACpBuwF,EAAQvwF,GACRg1G,EAAW/kC,SAASjwE,IAExBvoC,KAAKs5I,WAAa,WACd,OAAO3G,EAAM2G,cAEjBt5I,KAAK+4I,WAAa,SAASv/B,GACvBm5B,EAAMoG,WAAWv/B,GACjBgkC,EAAchlC,SAASgB,IAE3Bx5G,KAAKk/G,SAAW,SAAU/gF,KAG1Bn+B,KAAK64I,WAAa,SAAU16G,GACxBw0G,EAAMkG,WAAW16G,IAErBn+B,KAAKw4I,UAAY,SAAU/8G,EAAGC,EAAGhxB,GAC7BioI,EAAM6F,UAAU/8G,EAAGC,EAAGhxB,IAE1B1K,KAAKy4I,OAAS,SAAUh9G,EAAGC,EAAGhxB,GAC1BioI,EAAM8F,OAAOh9G,EAAGC,EAAGhxB,IAEvB1K,KAAK04I,QAAU,WACX/F,EAAM+F,WAEV14I,KAAKs+I,SAAW,WACZ,OAAO3L,GAEX3yI,KAAKy/I,mBAAqB,WACtB,OAAOF,GAEXv/I,KAAKu7F,UAAY,WACb,OAAOo3C,EAAMp3C,aAEjBv7F,KAAKy4G,WAAa,WACd,OAAO/rE,IAIRywG,EApLmB,GCZ9BuC,GAAiBvwI,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SCY/G,OAAMqgJ,GAAiB,WAC1B,IAAIxC,EAA2B,CAC3B7kC,MAAO9G,EAAAkuC,IACPpC,QAASzqC,GAAK,gBACd0qC,WAAY,CACR37H,IAAK,GACLF,IAAK,IACL85F,MAAO3Y,GAAG0H,qBAAqB,GAAK,IAAK,KAE7CizC,cAAe,CACX57H,IAAK,EACLF,IAAK,EACL85F,MAAO,CAAC,CAAC,EAAG,KAAU,CAAC,GAAK,IAAM,CAAC,EAAG,KAE1CiiC,GAAI,MAyKR,OAtKA7qC,GAAgB9nC,WAAU,WACtBqyE,EAAeG,QAAUzqC,GAAK,mBAGlCsqC,EAAeM,GAAK,SAAUhzI,OAKtB8yI,EACAC,EAcK1kB,EAAT,SAAiBvwF,GACboqG,EAAM7Z,QAAQvwF,GACdoqG,EAAMqG,WAAWjiI,KAAK2K,IAAI,EAAGm8H,EAAcx+C,YAAY92D,IAAS,KArBhEmE,EAAMl9B,SAASM,cAAc,OAC7B6iI,EAAQ,IAAI2E,GAAQiF,YACxB5J,EAAMmG,WAAW5nC,IACjBzmG,EAAEqzI,aAAanL,EAAM0G,WAIrB,IAAI0E,EAAkB,IAAI/mC,GAAS,CAC/B7tE,KAAMwpG,EAAM4G,eACZvgE,MAAO65B,GAAK,oBACZ3tC,SAAU,SAAU7pC,GAChBs3G,EAAMwG,aAAa99G,IAEvB87E,aAAa,EACbxQ,MAAOkM,GAAK,4BAGZgrC,EAAgB,IAAIh7C,GAAGyH,mBAAmB,CAAC,CAAC,EAAG,IAAK,CAAC,EAAG,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,GAAI,CAAC,GAAI,KAAM,CAAC,IAAK,MAOnG,WACIizC,EAAa,IAAIvjC,GAAS,CACtBhhC,MAAO65B,GAAK,cACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,EAAeI,WAAW37H,IAC/BF,IAAKy7H,EAAeI,WAAW77H,IAC/Bw2F,UAAWy6B,EAAM0G,UACjBj+B,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChB09G,EAAQ19G,GACR3Q,EAAEqzI,aAAa1iI,IAEnBogG,MAAO2hC,EAAeI,WAAW/hC,MACjCX,WAAY,SAAUz/E,GAElB,OADAA,GAAK,GACG,GACGrkB,KAAK4gD,MAAU,GAAJv8B,GAAU,GAErBrkB,KAAK4gD,MAAMv8B,MAI9BoiH,EAAgB,IAAIxjC,GAAS,CACzBhhC,MAAO65B,GAAK,WACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,EAAeK,cAAc57H,IAClCF,IAAKy7H,EAAeK,cAAc97H,IAClCw2F,UAAWy6B,EAAM2G,aACjBl+B,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChBu3H,EAAMoG,WAAW39H,GACjB3Q,EAAEuzI,gBAAgB5iI,IAEtBogG,MAAO2hC,EAAeK,cAAchiC,MACpCX,WAAY,SAASz/E,GACjB,OAAOrkB,KAAK4gD,MAAU,IAAJv8B,MAI1B,IAAI6iH,EAAqB/kC,IAAkB,GAAO,SAAU79E,GACxDs3G,EAAMsG,aAAa59G,MAEnB6iH,EAAwBhlC,IAAkB,GAAO,SAAU79E,GAC3Ds3G,EAAMuG,gBAAgB79G,MAG1BqR,EAAI8vC,OACAqmB,GAAGvgF,GAAG,CACFiE,QAAS,CACLg3H,EAAW9kC,aACXwlC,GAEJl6C,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,gBAChBC,WAAY,SACZS,aAAc,UAGtB1R,GAAGvgF,GAAG,CACFiE,QAAS,CACLi3H,EAAc/kC,aACdylC,GAEJn6C,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,gBAChBC,WAAY,aAKRjR,GAAGvgF,GAAG,CAClBg4B,OAAQ5N,EACRq3D,IAAK,CACDkR,UAAW,UAGTz4B,OAAOuhE,EAAgBtlC,cAIrCtvE,GAEAnpC,KAAKo+I,aAAe,SAAU5vF,GACrBmkF,EAAMn3C,gBACP+hD,EAAWthC,cAAcztD,IAGjCxuD,KAAKq+I,aAAe,SAAU7vF,GACrBmkF,EAAMn3C,gBACP+hD,EAAWrhC,cAAc1tD,IAIjCxuD,KAAKq5I,QAAU,WACX,OAAO1G,EAAM0G,WAEjBr5I,KAAK84H,QAAU,SAASvwF,GACpBuwF,EAAQvwF,GACRg1G,EAAW/kC,SAASjwE,IAExBvoC,KAAKs5I,WAAa,WACd,OAAO3G,EAAM2G,cAEjBt5I,KAAK+4I,WAAa,SAASv/B,GACvBm5B,EAAMoG,WAAWv/B,GACjBgkC,EAAchlC,SAASgB,IAG3Bx5G,KAAKk/G,SAAW,SAAU/gF,GACtBw0G,EAAMzzB,SAAS/gF,IAEnBn+B,KAAK64I,WAAa,SAAU16G,GACxBw0G,EAAMkG,WAAW16G,IAErBn+B,KAAKw4I,UAAY,SAAU/8G,EAAGC,EAAGhxB,GAC7BioI,EAAM6F,UAAU/8G,EAAGC,EAAGhxB,IAE1B1K,KAAKy4I,OAAS,SAAUh9G,EAAGC,EAAGhxB,GAC1BioI,EAAM8F,OAAOh9G,EAAGC,EAAGhxB,IAEvB1K,KAAK04I,QAAU,SAAUj9G,EAAGC,GACxBi3G,EAAM+F,WAEV14I,KAAKs+I,SAAW,WACZ,OAAO3L,GAEX3yI,KAAKu7F,UAAY,WACb,OAAOo3C,EAAMn3C,gBAEjBx7F,KAAKy4G,WAAa,WACd,OAAO/rE,IAGRywG,EAvLmB,GCZ9ByC,GAAiBzwI,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,oDCEzGugJ,GAAN,iCAAMA,EAcLn1I,8BAdKm1I,GAqBL7/I,KAAK7B,QAAUuM,EAAEy+B,KACjBnpC,KAAKsiB,GAAKugF,GAAGvgF,GAAG,CACZiE,QAAS7b,EAAEsuE,MACX2tB,MAAOj8F,EAAEi8F,MACTyI,UAA+B,iBAAZ1kG,EAAEsuE,MAAsB,gBAAkB,yCAC7Dq2B,QAAS,aACAlxG,OAAKmgG,EAASngG,QACd8mE,SACLv6D,EAAE4kG,SAAQhR,EAAMngG,QAEpB4lG,IAAK,CACD4T,OAAQ,aAGO,iBAAZjtG,EAAEsuE,OACT6pB,GAAGkB,IAAIr5F,EAAEsuE,MAAO,CACZ3xD,QAAS,QACTizF,cAAe,SAGvBt6G,KAAKilE,2BAzCA46E,EAAS,EAIlBpiJ,IAAA,eAAA,WACQuC,KAAK7B,MACL0kG,GAAGqB,aAAalkG,KAAKsiB,GAAI,yBAEzBugF,GAAG0B,gBAAgBvkG,KAAKsiB,GAAI,4BAoCpC7kB,IAAA,iBAAA,WACI,OAAOuC,KAAK7B,SAGhBV,IAAA,iBAAA,SAAU49B,GACNr7B,KAAK7B,QAAUk9B,EACfr7B,KAAKilE,YAGTxnE,IAAA,mBAAA,WACI,OAAOuC,KAAKsiB,MAGhB7kB,IAAA,gBAAA,WACIolG,GAAG2M,UAAUxvG,KAAKsiB,QA1Dbu9H,EAAN,GCWMC,GAAgB,WACzB,IAAM3C,EAA2B,CAC7B7kC,MAAO9G,EAAAouC,IACPtC,QAASzqC,GAAK,eACd0qC,WAAY,CACR37H,IAAK,IACLF,IAAK,GACL85F,MAAO3Y,GAAG0H,qBAAqB,IAAM,GAAI,IACzC8R,YAAY,GAEhBmhC,cAAe,CACX57H,IAAK,IACLF,IAAK,GAET+7H,GAAI,MAuUR,OApUA7qC,GAAgB9nC,WAAU,WACtBqyE,EAAeG,QAAUzqC,GAAK,kBAGlCsqC,EAAeM,GAAK,SAAU/yI,OAMtB6yI,EACAC,EAEK1kB,EAAT,SAAiBvwF,GACboqG,EAAM7Z,QAAQvwF,IATZmE,EAAMl9B,SAASM,cAAc,OAC7B6iI,EAAQ,IAAI2E,GAAQgF,WAC1B3J,EAAMmG,WAAW5nC,IACjBxmG,EAAEozI,aAAanL,EAAM0G,WASrB,WACIkE,EAAa,IAAIvjC,GAAS,CACtBhhC,MAAO65B,GAAK,cACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,EAAeI,WAAW37H,IAC/BF,IAAKy7H,EAAeI,WAAW77H,IAC/Bw2F,UAAWy6B,EAAM0G,UACjBj+B,WAAY6hC,GACZ5iC,UAA+B,WAApBs4B,EAAMoN,UACjBzwC,SAAU,SAAUl0F,GAChB09G,EAAQ19G,GACR1Q,EAAEozI,aAAanL,EAAM0G,YAEzB79B,MAAO2hC,EAAeI,WAAW/hC,MACjCX,WAAY,SAAUz/E,GAElB,OADAA,GAAK,GACM,EAAKrkB,KAAK4gD,MAAU,GAAJv8B,GAAU,GAAMrkB,KAAK4gD,MAAMv8B,MAG9DoiH,EAAgB,IAAIxjC,GAAS,CACzBhhC,MAAO65B,GAAK,WACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAKu7H,EAAeK,cAAc57H,IAClCF,IAAKy7H,EAAeK,cAAc97H,IAClCw2F,UAAWy6B,EAAM2G,aACjBl+B,WAAY6hC,GACZ3tC,SAAU,SAAUl0F,GAChBu3H,EAAMoG,WAAW39H,GACjB1Q,EAAEszI,gBAAgB5iI,IAEtBy/F,WAAY,SAASz/E,GACjB,OAAOrkB,KAAK4gD,MAAU,IAAJv8B,MAI1BynE,GAAGkB,IAAIy5C,EAAc/kC,aAAc,CAC/BxD,UAAW,SAGf,IAAIiqC,EAAe,IAAIloC,GAAS,CAC5B7tE,KAAMwpG,EAAMyJ,cACZpjE,MAAO65B,GAAK,UACZ3tC,SAAU,SAAU7pC,GAChBs3G,EAAMuJ,YAAY7gH,IAEtB0oE,IAAK,CACDkR,UAAW,OACXC,WAAY,UAId6oC,EAAkB,IAAI/mC,GAAS,CACjC7tE,KAAMwpG,EAAM4G,eACZvgE,MAAO65B,GAAK,oBACZ3tC,SAAU,SAAU7pC,GAChBs3G,EAAMwG,aAAa99G,IAEvB87E,aAAa,EACbxQ,MAAOkM,GAAK,0BACZ9O,IAAK,CACDkR,UAAW,UAIbmqC,EAAYv8C,GAAGvgF,GAAG,CACpByhF,IAAK,CACD18E,QAAS,OACT4tF,UAAW,UAMb+qC,EAAiBC,GAGjBC,EAAc,IAAIr/B,GAAQ,CAC5B7I,UAAW,CACP,CACIj7G,GAAI,OACJi8E,MAAO6pB,GAAGoE,UAAU,CAChBG,YAAa,MACbxf,MAAOq4D,KACPp4D,OAAQo4D,KACR54C,YAAa,CACT,CACID,YAAa,OACb/2E,KAAM,OACNjJ,MAAQ,qEAAuF/a,OAAnB2zI,EAAe,MAAmB3zI,OAAf2zI,EAAe,6BAC9Gp5I,EAAG,+BAIf+/F,MAAOkM,GAAK,qBAEhB,CACI91G,GAAI,SACJi8E,MAAO6pB,GAAGoE,UAAU,CAChBG,YAAa,MACbxf,MAAOq4D,KACPp4D,OAAQo4D,KACR54C,YAAa,CACT,CACID,YAAa,OACb/2E,KAAM,OACN23F,OAAQ,OACR5gG,MAAQ,2FAA6G/a,OAAnB2zI,EAAe,MAAmB3zI,OAAf2zI,EAAe,6BACpIp5I,EAAG,+BAIf+/F,MAAOkM,GAAK,wBAGpBiG,OAAQ65B,EAAMoN,UACdzwC,SAAU,SAACvyG,GACP41I,EAAMwN,QAAQpjJ,GACdogJ,EAAeI,WAAWlhC,WAAiC,SAApBs2B,EAAMoN,UAC7CxC,EAAWnhC,cAAc+gC,EAAeI,WAAWlhC,YACnDkhC,EAAW/kC,SAASm6B,EAAM0G,WAC1B3uI,EAAEozI,aAAanL,EAAM0G,WACrB3uI,EAAE01I,oBAIJC,EAAgB,IAAIR,GAAU,CAChC7mE,MAAO6pB,GAAGoE,UAAU,CAChBG,YAAa,MACbxf,MAAOq4D,KACPp4D,OAAQo4D,KACR54C,YAAa,CACT,CACID,YAAa,OACb/2E,KAAM,OACN23F,OAAQ,OACR5gG,MAAO,oBACPxgB,EAAI,KAA0ByF,OAAtBi0I,KAAmB,KAAcj0I,OAhEzC,EAgEsC,KAAyBA,OAAtBi0I,KAAmB,KAA4Bj0I,OAAzB2zI,QAI3Er5C,MAAOkM,GAAK,wBACZ1pE,KAAMwpG,EAAM4N,eACZjxC,SAAU,SAACj0E,GACPs3G,EAAM6N,aAAanlH,MAIrBolH,EAAgB,IAAIZ,GAAU,CAChC7mE,MAAO6pB,GAAGoE,UAAU,CAChBG,YAAa,MACbxf,MAAOq4D,KACPp4D,OAAQo4D,KACR54C,YAAa,CACT,CACID,YAAa,OACb/2E,KAAM,OACN23F,OAAQ,OACR5gG,MAAO,oBACPxgB,EAAI,KAAeyF,OAtFnB,EAsFgB,KAAyBA,OAAtBi0I,KAAmB,KAA+Bj0I,OAA5B2zI,GAAyB,KAAsB3zI,OAAnBi0I,UAIjF35C,MAAOkM,GAAK,wBACZ1pE,KAAMwpG,EAAM+N,eACZpxC,SAAU,SAACj0E,GACPs3G,EAAMgO,aAAatlH,MAIrBulH,EAAiB,IAAIf,GAAU,CACjC7mE,MAAO6pB,GAAGoE,UAAU,CAChBG,YAAa,MACbxf,MAAOq4D,KACPp4D,OAAQo4D,KACR54C,YAAa,CACT,CACID,YAAa,OACbC,YAAa,CACT,CACID,YAAa,iBACbrqG,GAAI,WACJ6pE,GAAI,IACJE,GAAI,IACJtzB,GAAI,IACJurD,GAAI,IACJsI,YAAa,CACT,CACID,YAAa,OACbxlE,OAAQ,KACR,aAAc,iBAElB,CACIwlE,YAAa,OACbxlE,OAAQ,OACR,aAAc,qBAMlC,CACIwlE,YAAa,OACb/2E,KAAM,mBACNoL,EAAG,IACHC,EAAG,IACHksD,MAAO,KACPC,OAAQ,SAIpB8e,MAAOkM,GAAK,wBACZ1pE,KAAMwpG,EAAMkO,cACZvxC,SAAU,SAACj0E,GACPs3G,EAAMmO,YAAYzlH,MAI1BwnE,GAAGkB,IAAIs8C,EAAc5nC,aAAc,CAC/BvD,WAAY,SAGZ,IAAM4K,EAAS,CACX5K,WAAY,OAEhBrS,GAAGkB,IAAI08C,EAAchoC,aAAcqH,GACnCjd,GAAGkB,IAAI68C,EAAenoC,aAAcqH,GAGxCs/B,EAAU5iE,OACN0jE,EAAYznC,aACZ4nC,EAAc5nC,aACdgoC,EAAchoC,aACdmoC,EAAenoC,cAGnB/rE,EAAI8vC,OACA+gE,EAAW9kC,aACX+kC,EAAc/kC,aACd2mC,EACAv8C,GAAGvgF,GAAG,CACFiE,QAAS,CACLw3H,EAAgBtlC,aAChBymC,EAAazmC,cAEjB1U,IAAK,CACD18E,QAAS,WAMzB8hB,GAEAnpC,KAAKo+I,aAAe,SAAU5vF,GACrBmkF,EAAMn3C,gBAAsC,WAApBm3C,EAAMoN,WAC/BxC,EAAWthC,cAAcztD,IAGjCxuD,KAAKq+I,aAAe,SAAU7vF,GACrBmkF,EAAMn3C,gBAAsC,WAApBm3C,EAAMoN,WAC/BxC,EAAWrhC,cAAc1tD,IAIjCxuD,KAAKq5I,QAAU,WACX,OAAO1G,EAAM0G,WAEjBr5I,KAAK84H,QAAU,SAASvwF,GACpBuwF,EAAQvwF,GACRg1G,EAAW/kC,SAASjwE,IAExBvoC,KAAKs5I,WAAa,WACd,OAAO3G,EAAM2G,cAEjBt5I,KAAK+4I,WAAa,SAASv/B,GACvBm5B,EAAMoG,WAAWv/B,GACjBgkC,EAAchlC,SAASgB,IAG3Bx5G,KAAKk/G,SAAW,SAAU/gF,GACtBw0G,EAAMzzB,SAAS/gF,IAEnBn+B,KAAK64I,WAAa,SAAU16G,GACxBw0G,EAAMkG,WAAW16G,IAErBn+B,KAAKw4I,UAAY,SAAU/8G,EAAGC,EAAGhxB,GAC7BioI,EAAM6F,UAAU/8G,EAAGC,IAEvB17B,KAAKy4I,OAAS,SAAUh9G,EAAGC,EAAGhxB,EAAG0qF,GAC7Bu9C,EAAM8F,OAAOh9G,EAAGC,IAEpB17B,KAAK04I,QAAU,WACX/F,EAAM+F,WAEV14I,KAAKs+I,SAAW,WACZ,OAAO3L,GAEX3yI,KAAKu7F,UAAY,WACb,OAAOo3C,EAAMn3C,gBAEjBx7F,KAAKy4G,WAAa,WACd,OAAO/rE,IAIRywG,EArVkB,GCEhB4D,GAET,CACAC,SAAU3D,GACV4D,WAAYzC,GACZ0C,aAAcrC,GACdsC,WAAYlC,GACZmC,WAAYtB,GACZuB,YAAa1B,GACb2B,YAAahC,aCpBDiC,GAAgB5yI,EAAK6yI,GACjC,GAAKA,KAAYvqI,OAAOs/F,YAAc,KAAOt/F,OAAOq/F,WAAa,KAAjE,CAKA,IAYImrC,EAZAv6H,EAAS27E,GAAGvgF,GAAG,CACfykF,QAAS,SACTlV,OAAQ,CACJjiF,IAAKjB,GAETo1F,IAAK,CACDnc,MAAO,OACPC,OAAQ,UAGZ+uB,EAAU/T,GAAGvgF,GAAG,IAGfk/H,IACDC,EAAS5+C,GAAGvgF,GAAG,CACXykF,QAAS,IACTzsD,OAAQs8D,EACRrwF,QAASssF,GAAK,iBACdhhB,OAAQ,CACJnb,KAAM,OACNx5E,OAAQ,UAEZmyG,QAAS,WACLqyC,EAAM96H,WAGdM,EAAO/W,OAAS,WACZ0yF,GAAGmB,cAAcy9C,EAAQ,CACrB/qE,KAAM,GAAKxvD,EAAOI,cAAcywB,aAM5C,IAAI2pG,EAAQ,IAAI7rC,GAAM,CAClBlP,MAAOiQ,EACPrwF,QAASW,EACT0gE,MAAO,IACP+5D,aAAa,EACb3rC,QAAS,WACDyrC,GACA5+C,GAAG2M,UAAUiyC,WA7CrBxqI,OAAOsQ,KAAK5Y,8CCJPizI,GAAN,iCAAMA,EAKGl3I,8BALHk3I,GAAN5hJ,KAGH6hJ,OAA6B,GAWzB7hJ,KAAKsiB,GAAKugF,GAAGvgF,GAAG,CACZ8sF,UAAW,aAGf1kG,EAAE6wB,MAAM/9B,SAAQ,SAAAo+C,GACZ,IAAIo9B,EAAQ6pB,GAAGvgF,GAAG,CACdykF,QAAS,UAETx+F,EAAQs6F,GAAGvgF,GAAG,CACdykF,QAAS,QACTzsD,OAAQ0+B,EACR6Y,OAAQ,CACJhwF,KAAM6I,EAAE7I,KACR1D,MAAOy9C,EAAKz9C,MACZ0B,KAAM,WAGV6K,EAAEo3I,aACFv5I,EAAM+5F,aAAa,oBAAqB,QAExC53F,EAAEy+B,OAASyS,EAAKz9C,QAChBoK,EAAM2uG,SAAU,GAEpBl+B,EAAMwD,OAAO5gC,EAAKo9B,SACb12D,GAAGk6D,OAAOxD,KACV6oE,OAAOx+I,KAAKkF,wBAvChBq5I,EAAS,EA4ClBnkJ,IAAA,iBAAA,WACI,IAAK,IAAIZ,EAAI,EAAGA,EAAImD,KAAK6hJ,OAAO/kJ,OAAQD,IACpC,GAAImD,KAAK6hJ,OAAOhlJ,GAAGq6G,QACf,OAAOl3G,KAAK6hJ,OAAOhlJ,GAAGsB,MAG9B,OAAO,QAGXV,IAAA,mBAAA,WACI,OAAOuC,KAAKsiB,OAtDPs/H,EAAN,2DCSMG,GAAN,iCAAMA,EAoHGC,EACA10B,EACA20B,EACAC,8BAvHHH,mBAoHGC,aAAAA,OACA10B,WAAAA,OACA20B,aAAAA,OACAC,SAAAA,EAERliJ,KAAKsE,QAAUu+F,GAAGvgF,GAAG,CACjByhF,IAAK,CACD18E,QAAS,OACT86H,oBAAqB,UACrBC,iBAAkB,cAClBC,IAAK,MACLC,kBAAmB,mDAK3B,IAAM37C,EAAQ9D,GAAGvgF,GAAG,CAChBg4B,OAAQt6C,KAAKsE,QACbiiB,QAASssF,GAAK,gBACd9O,IAAK,CACDw+C,SAAU,QACVl7H,QAAS,OACTy4F,OAAQ,YAKDjd,GAAGvgF,GAAG,CACjBg4B,OAAQqsD,EACRpgF,QAAS,IACTogF,MAAOkM,GAAK,sBACZ9O,IAAK,CACD4T,OAAQ,UACRzC,WAAY,MACZttB,MAAO,OACPC,OAAQ,OACR8uB,aAAc,OACdiK,UAAW,SACX1M,WAAY,OACZ2U,WAAY,OACZzU,UAAW,wBAEf/E,QAAS,WACLkyC,GAAgB,gCAAgC,MAIpDvhJ,KAAKgiJ,aAAaQ,WAClB3/C,GAAGvgF,GAAG,CACFg4B,OAAQt6C,KAAKsE,QACbiiB,QAAS,MAAIssF,GAAG,4BAChB9O,IAAK,CACDkR,UAAW,WAMvBj1G,KAAK+8G,UAAYla,GAAGvgF,GAAG,CACnBg4B,OAAQt6C,KAAKsE,QACbqiG,MAAOkM,GAAK,4BACZ9O,IAAK,CACDw+C,SAAU,UACVl7H,QAAS,OACTysF,WAAY,SACZD,eAAgB,SAChBoB,UAAW,OACX3sD,SAAU,WACV8rD,UAAW,uBACXD,WAAY,UACZ9gD,MAAO,UACPykD,YAAa,gBAGrB93G,KAAKyiJ,MAAQ5/C,GAAGvgF,GAAG,CACfyhF,IAAK,CACDz7C,SAAU,WACV19C,MAAO,IACP4oG,OAAQ,IACR5rB,MAAO,OACPg5B,UAAW,SACXzM,WAAY,kBACZ9gD,MAAO,OACPqvF,SAAU,UAGlB1iJ,KAAK2iJ,QAAU9/C,GAAGvgF,GAAG,CACjBg4B,OAAQt6C,KAAKsE,QACbyiG,QAAS,SACTqI,UAAW,aACX7oF,QAASssF,GAAK,sBACd9O,IAAK,CACDw+C,SAAU,SAGd1wD,OAAQ,CACJwlB,UAAU,GAEdhI,QAAS,WAAM,OAAM/Q,EAAD19D,WAExB5gC,KAAK2iJ,QAAQtrC,UAAW,EACxBr3G,KAAK4iJ,QAAU//C,GAAGvgF,GAAG,CACjBg4B,OAAQt6C,KAAKsE,QACbyiG,QAAS,SACTqI,UAAW,aACX7oF,QAAS,aAAeirF,EAAAkT,IAAiB,mBAAqB7R,GAAK,sBACnE9O,IAAK,CACDw+C,SAAU,SAGd1wD,OAAQ,CACJwlB,UAAU,GAEdhI,QAAS,WAAM,OAAM/Q,EAADr2D,WAGxBjoC,KAAKgiJ,aAAal3E,UAAU,CACxB+3E,SAAU,SAACC,EAAWC,KACbC,YAAYF,EAAWC,MAIpC7mD,aAAY,WAAM,OAAMoC,EAAD2kD,cAAa,0BAEnC,SAAQrxC,QAEKsxC,+FAAwBlB,aAAamB,eAArCD,EAAUhxC,EAAAj/F,MACFivG,EACL8gC,YAAYE,EAAWJ,UAAWI,EAAWH,aAE7CC,8DAGThqG,YAAW,WACP,MAAM,IAAI/7C,MAAM,oDAAmDi1G,EAAAC,MACpE,iFA3PN4vC,EAAgB,EASjBtkJ,IAAA,kBAAR,WACI,GAAKuC,KAAK8iJ,UAAV,CAGA,IACIM,EADAC,GAAM,IAAI1gJ,MAAOsjG,UAAYjmG,KAAK8iJ,UAEtCO,EAAMtsI,KAAKuK,MAAM+hI,EAAM,IAAO,IAC9BD,EAASvwC,GAAK,wBAAwBjkG,QAAQ,MAAO,GAAKy0I,GACtDA,EAAM,KACNA,EAAMtsI,KAAKuK,MAAM+hI,EAAM,IACvBD,EAASvwC,GAAK,0BAA0BjkG,QAAQ,MAAO,GAAKy0I,GACxDA,EAAM,KACNA,EAAMtsI,KAAKuK,MAAM+hI,EAAM,IACvBD,EAASvwC,GAAK,yBAAyBjkG,QAAQ,MAAO,GAAKy0I,GACvDA,EAAM,KACND,EAASvwC,GAAK,6BAI1B7yG,KAAKyiJ,MAAMtzC,YAAci0C,MAGrB3lJ,IAAA,qBAAR,WACQuC,KAAK8iJ,WACL9iJ,KAAK2iJ,QAAQxzC,YAAc0D,GAAK,0BAChC7yG,KAAK2iJ,QAAQW,UAAW,EACxBtjJ,KAAK4iJ,QAAQU,UAAW,IAExBtjJ,KAAK2iJ,QAAQxzC,YAAc0D,GAAK,sBAChC7yG,KAAK2iJ,QAAQW,UAAW,EACxBtjJ,KAAK4iJ,QAAQU,UAAW,MAIxB7lJ,IAAA,oBAAR,SAAoBqlJ,EAAoBC,GACpC/iJ,KAAK8iJ,UAAYA,EACb9iJ,KAAK8iJ,WACLjgD,GAAGkB,IAAIg/C,EAAW,CACd17H,QAAS,QACTk8H,SAAU,mBACVC,UAAW,mBACX1jC,OAAQ,SACR3L,WAAY,QAAUtR,GAAGsJ,oBAAoB,GAAGzP,UAAU,aAAe,KACzE0X,UAAW,iBACXkG,cAAe,SAEnBt6G,KAAK+8G,UAAUpO,UAAY,GAC3B3uG,KAAKijJ,YACLjjJ,KAAK+8G,UAAUvgC,OAAOumE,EAAW/iJ,KAAKyiJ,QAEtCziJ,KAAK+8G,UAAUpO,UAAYkE,GAAK,sBAEpC7yG,KAAKyjJ,kBAGKhmJ,IAAA,cAAd,uCAAA,SAAQm0G,6EACJ5xG,KAAK2iJ,QAAQxzC,YAAc0D,GAAK,wBAChC7yG,KAAK2iJ,QAAQW,UAAW,EACxBtjJ,KAAK4iJ,QAAQU,UAAW,WAClB,IAAIjkJ,SAAQ,SAACC,GACf05C,YAAW,WAAM,OAAA15C,EAAQ,QAAO,uCAG1BU,KAAKgiJ,aAAaphH,MAAM5gC,KAAKstH,qBACnCttH,KAAKiiJ,aAAajuI,0DAElBhU,KAAKyjJ,eACL3O,GAAG4M,MAAM,CACLxkJ,OAAQ8C,KAAKkiJ,SACbriJ,KAAM,QACNqQ,QAAS,CACJ,GAAgC7D,OAA9BwmG,GAAK,yBAAyB,QAChC,OAAoCxmG,OAA9BwmG,GAAK,yBAAyB,SACpC,OAAoCxmG,OAA9BwmG,GAAK,yBAAyB,SACpC,OAAoCxmG,OAA9BwmG,GAAK,yBAAyB,SACpC,SACH5xF,KAAK,IACPyvE,QAAS,CAAC,QAEd13C,YAAW,WACP,MAAM,IAAI/7C,MAAM,gDAA+Ci1G,EAAAC,MAChE,4DAEV5uG,KAAAvD,YAEavC,IAAA,cAAd,uCAAA,SAAQm0G,6EACJ5xG,KAAK2iJ,QAAQW,UAAW,EACxBtjJ,KAAK4iJ,QAAQU,UAAW,oBAEdtjJ,KAAKgiJ,aAAa/5G,+DAExBjoC,KAAKyjJ,eACL3O,GAAG4M,MAAM,CACLxkJ,OAAQ8C,KAAKkiJ,SACbriJ,KAAM,QACNqQ,QAAS2iG,GAAK,6BACdniB,QAAS,CAAC,QAEd13C,YAAW,WACP,MAAM,IAAI/7C,MAAM,gDAA+Ci1G,EAAAC,MAChE,2DAEV5uG,KAAAvD,YAkJDvC,IAAA,mBAAA,WACI,OAAOuC,KAAKsE,WAGhB7G,IAAA,aAAA,eAIAA,IAAA,aAAA,gBAzQSskJ,EAAN,oHCVS2B,GAAaC,GAKzB,IAJA,IAAIj/D,EAAQi/D,EAAU50I,MAAK,2CACvB60I,EAASC,KAAKn/D,EAAM,IACpBo/D,EAAM,IAAIpnH,YAAYknH,EAAO9mJ,QAC7B2jC,EAAO,IAAIw0B,WAAW6uF,GACjBjnJ,EAAI,EAAGA,EAAI4jC,EAAK3jC,OAAQD,IAC7B4jC,EAAK5jC,GAAK+mJ,EAAOp0G,WAAW3yC,GAEhC,OAAO,IAAI6oG,KAAK,CAACjlE,GAAO,CAAC5gC,KAAQ6kF,EAAM,cCDlCq/D,GAAUz9C,GACf,OAAO,IAAIjnG,SAA0B,SAACC,EAASQ,GAC3C,IAAM8jG,EAAK,IAAIie,MACf,IACIje,EAAGh0F,IAAMizF,GAAG2C,eAAec,GAC7B,MAAOzjG,GAEL,YADA/C,EAAO,mBAAqB+C,EAAEqN,SAGlC0zF,EAAGzzF,OAAS,WACR7Q,EAAQskG,IAEZA,EAAGogD,QAAU,WACTlkJ,EAAO,+BAEX8jG,EAAG3zF,QAAU,WACTnQ,EAAO,sCAUNmkJ,GAAN,iCAAMA,oBAAAA,qBAAAA,EAAgB,KAAA,EAEVxmJ,IAAA,wBAAf,SAA+BgsH,GAG3B,OAAOD,GAAYC,EAFN5mB,GAAG4B,QAAQglB,EAAQ7hC,MAAO6hC,EAAQ5hC,OA/BrC,IAAA,KAgCUD,MAAQ6hC,EAAQ7hC,UAIjCnqF,IAAA,6BAAP,SAA4BgsH,GACxB,MAAO,CACH1sH,GAAI,EACJ+lJ,WAAW,IAAIngJ,MAAOsjG,UACtB88C,UAAWW,GAAaO,EAAiBC,gBAAgBz6B,GAAS/sB,UAAU,cAC5E9U,MAAO6hC,EAAQ7hC,MACfC,OAAQ4hC,EAAQ5hC,OAChB6hC,OAAQD,EAAQC,OAAO7iH,KAAI,SAAA+0C,GACvB,IAAI0qD,EACJ,KAAI1qD,EAAK08D,iBAAiB6rC,mBAItB,MAAM,IAAIlnJ,MAAM,mBAEpB,OALIqpG,EAAOo9C,GAAc9nG,EAAK08D,MAA4B5b,UAAU,cAK7D,CACH76F,KAAM+5C,EAAK/5C,KACX23G,QAAS59D,EAAK49D,QACdmQ,WAAY/tE,EAAK+tE,WACjBrjB,KAAAA,UAMH7oG,IAAA,2BAAb,SAAgC8qI,+BAAhC,SAAQ32B,QAKE6X,EAcFs5B,gFAbOxa,EAAe3gD,WACd2gD,EAAe1gD,gBACRxoF,QAAQu+C,IAAI2qF,EAAe7e,OAAO7iH,KAAI,SAAA0mH,GAAS,OAAAw2B,GAAUx2B,EAAMjnB,gCACzEz/F,KAAI,SAACyxG,EAAOz7G,GACT,MAAO,CACHgF,KAAM0mI,EAAe7e,OAAO7sH,GAAGgF,KAC/B23G,QAAS+uB,EAAe7e,OAAO7sH,GAAG28G,QAClCmQ,WAAY4e,EAAe7e,OAAO7sH,GAAG8sH,WACrCrR,MAAAA,MATVmR,EAAsB,CACxB7hC,MAAKsqB,EAAAC,GACLtqB,OAAMqqB,EAAA5rB,GACNojC,OAAMxX,EAAAE,KAYNm2B,EAAewa,UAAS,kCACNgB,GAAUxb,EAAewa,mBAA3CA,EAAS7wC,EAAAj/F,6BAET8vI,EAAYkB,EAAiBC,gBAAgBz6B,oCAG1C,CACHA,QAASA,EACTq5B,UAAWva,EAAeua,UAC1BC,UAAWA,sDA9DVkB,EAAN,YCxBEG,GAAUppI,GACf,OAAO,IAAI3b,SAAQ,SAACC,EAASQ,GACzBkb,EAAK1b,EAASQ,UAOTukJ,GAAN,iCAAMA,+BAAAA,GAANrkJ,KAEKyiG,UAAqC,GAF1CziG,KAGKskJ,iBAA2B,EA+B/BrtI,OAAO4hC,iBAAiB,WAAW,SAACh2C,GAChC,GAAc,uBAAVA,EAAEpF,KAA0D,IAA9B6gG,EAASmE,UAAU3lG,OAGrD,iCACM,SAAQ80G,QACAsxC,sFAAwBC,eAAxBD,EAAUhxC,EAAAj/F,MACFivG,EACLljE,KAAKkkG,EAAWJ,UAAWI,EAAWH,aAEtC/jG,oDAGf,MAAO8nC,GACa,aAAdA,EAAE52E,UAAsBouF,EACnBgmD,iBAAkB,yBAjD9BD,EAAY,EAKf5mJ,IAAA,sBAAN,SAAqBgsH,+BAArB,SAAQ7X,sFACE,IAAIvyG,SAAQ,SAACC,EAASQ,GACxBwoI,GAAkB7e,EAASnqH,EAASQ,sDAItCrC,IAAA,qBAAN,uCAAA,SAAQm0G,sFACSwyC,GAAU/b,4FAGrB5qI,IAAA,sBAAN,uCAAA,SAAQm0G,sFACEwyC,GAAU3b,oDAKZhrI,IAAA,aAAR,SAAaqlJ,EAAoBC,GAC7B/iJ,KAAKyiG,UAAUjlG,SAAQ,SAAAo+C,GACnBA,EAAKinG,SAASC,EAAWC,SAIzBtlJ,IAAA,wBAAR,WACIklG,GAAapb,QAAQ,qBAAsB,IAAK,IAAI5kF,MAAOsjG,cA4BzDxoG,IAAA,aAAN,uCAAA,SAAQm0G,QAKA22B,EAUAtpI,6FARuBe,KAAKukJ,sBAA5Bhc,EAAcr2B,EAAAj/F,4BAGd,+BADAjT,KAAKskJ,iBAAkB,EACjB,IAAIrnJ,MAAM,uBAEfsrI,EAAc,0CACR,yCAIQ0b,GAAiBO,mBAAmBjc,WAAnDtpI,EAAMizG,EAAAj/F,6BAEN,iCAAM,IAAIhW,MAAM,iDAEbgC,mEACVsE,KAAAvD,YAEKvC,IAAA,cAAN,SAAYgsH,0CAAZ,SAAQ7X,QAEM22B,EAQAkc,EACFvB,oFATE3a,EAAiB0b,GAAiBS,qBAAqBj7B,YACvDzpH,KAAK2kJ,cAAcpc,iCAGzB,+BADAvoI,KAAKskJ,iBAAkB,EACjB,IAAIrnJ,MAAM,qCAIa+C,KAAKukJ,8BAA5BE,EAAcvyC,EAAAj/F,KAChBiwI,EAAa,yBAEMe,GAAiBO,mBAAmBC,WAAvDvB,EAAUhxC,EAAAj/F,yEAEJjT,KAAK4kJ,wBAGX,MAFA5kJ,KAAK6kJ,kBACL7rG,YAAW,WAAM,OAAMslD,EAADt/C,SAAQ,GACxB,IAAI/hD,MAAM,wBAEpB+C,KAAK6kJ,kBACL7rG,YAAW,WAAM,OAAMslD,EAADt/C,KAAKkkG,EAAWJ,UAAWI,EAAWH,aAAY,mEAE/Ex/I,KAAAvD,YAEKvC,IAAA,cAAN,kDAAA,SAAQm0G,sFACE5xG,KAAK4kJ,uBACX5kJ,KAAK6kJ,kBACL7rG,YAAW,WAAM,OAAMslD,EAADt/C,SAAQ,kDACjCz7C,KAAAvD,YAEDvC,IAAA,kBAAA,SAAUgsF,GACFzpF,KAAKyiG,UAAUhgF,SAASgnE,IAG5BzpF,KAAKyiG,UAAUp/F,KAAKomF,MAGxBhsF,IAAA,oBAAA,SAAYgsF,GACR,IAAK,IAAI5sF,EAAI,EAAGA,EAAImD,KAAKyiG,UAAU3lG,OAAQD,IACvC,GAAI4sF,IAAazpF,KAAKyiG,UAAU5lG,GAE5B,YADAmD,KAAKyiG,UAAUr9F,OAAOvI,EAAG,MAMrCY,IAAA,iBAAA,WACI,OAAOuC,KAAKskJ,oBAhIPD,EAAN,8CCUMS,GAAN,iCAAMA,EAOL5C,EACAF,EACA10B,EACQy3B,EACRC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACArD,8BAlBK6C,QAUGC,WAAAA,EAUR,IAAM7iC,EAAQliH,KACdA,KAAK0sC,IAAMl9B,SAASM,cAAc,OAgMlCkpC,YA9LsB,eA2ITusG,EAAT,WACI,IAAIjjI,EAAK9S,SAASM,cAAc,OAC5B01I,EAAUh2I,SAASM,cAAc,OACjC21I,EAAOj2I,SAASM,cAAc,OAclC,OAbAwS,EAAGjS,YAAYm1I,GACfljI,EAAGjS,YAAYo1I,GACf5iD,GAAGkB,IAAIyhD,EAAS,CACZv9G,MAAO,SAEX46D,GAAGkB,IAAI0hD,EAAM,CACTp+H,QAAQ,OACR6tF,WAAY,OACZV,YAAa,OACbS,UAAW,OACX4qB,aAAc,4BACd53F,MAAO,SAEJ3lB,GA3JPojI,EAAWl2I,SAASM,cAAc,OAClC61I,EAAYn2I,SAASM,cAAc,UACnC81I,EAAap2I,SAASM,cAAc,UAIxC61I,EAAUv+H,MAAMsyF,SAAW,OAC3B7W,GAAGkB,IAAI6hD,EAAY,CAEflsC,SAAU,OACVzxE,MAAO,SAIX09G,EAAUtuC,UAAW,EACrBuuC,EAAWvuC,UAAW,EAGtBsuC,EAAUh3C,UAAa,aAAoDtiG,OAAxCmlG,EAAAmvB,IAAY,8BAA6Ct0H,OAAjBwmG,GAAK,aAChF+yC,EAAWj3C,UAAa,aAAkDtiG,OAAtCmlG,EAAAqvB,IAAU,8BAA8Cx0H,OAAlBwmG,GAAK,cAC/E8yC,EAAUv2C,UAAY,aACtBw2C,EAAWx2C,UAAY,eAGlBy2C,aAAer2I,SAASM,cAAc,WACtC+1I,aAAaxuC,UAAW,IACxBwuC,aAAahmJ,KAAO,SACpBgmJ,aAAaC,UAAW,IACxBD,aAAaE,OAAS,UACrBF,aAAqBt9G,KAAO,OAC7Bs9G,aAAa12C,YAAc,SAChC,IAoDI62C,EACAC,EArDAC,EAAa5nD,EAAaunD,cAE9B,YACIK,EAAgB12I,SAASM,cAAc,QACzBs/F,UAAY,aAC1B82C,EAAc9+H,MAAMkhC,SAAW,WAC/B49F,EAAc9+H,MAAMuwF,OAAS,UAC7BuuC,EAAc9+H,MAAMsyF,SAAW,OAE/B,IAAIysC,EAAY32I,SAASM,cAAc,OACvCq2I,EAAU/+H,MAAMwgE,MAAQ,QACxBu+D,EAAU/+H,MAAMygE,OAAS,OACzBs+D,EAAU/+H,MAAMqsF,SAAW,SAC3B0yC,EAAU/+H,MAAMuwF,OAAS,UACzBwuC,EAAU/+H,MAAMkhC,SAAW,WAE3B49F,EAAc71I,YAAY81I,GAC1BA,EAAU91I,YAAY6xG,EAAM2jC,cAE5B,IAAIO,EAAmB52I,SAASM,cAAc,UAC9Cs2I,EAAiBz3C,UAAY,4CAA8C6C,EAAAovB,IAAY,iBAAmB/tB,GAAK,eAC/GuzC,EAAiB/uC,UAAW,EAE5BxU,GAAGkB,IAAIqiD,EAAkB,CAErBx+D,MAAO,QACPvgE,QAAS,MACTihC,SAAU,WACV39C,KAAM,IACNy+E,IAAK,IACLuuB,OAAQ,YAEZ9U,GAAGkB,IAAIme,EAAM2jC,aAAc,CACvBx+H,QAAS,SAEb6+H,EAAc71I,YAAY+1I,GAE1BA,EAAiB/yC,QAAU,WACvB6O,EAAM2jC,aAAajxC,SAI3ByxC,KAEKR,aAAavuC,SAAW,SAAUz0G,GACnCoiJ,EAAa/iC,EAAM2jC,aAAaj/C,MAAO,WACvCsb,EAAM2jC,aAAa1nJ,MAAQ,IAS3B6nJ,EAAoBnjD,GAAGvgF,GAAG,CACtByhF,IAAK,CACD18E,QAAQ,OACRuwF,SAAU,OACV1C,WAAY,OACZD,UAAW,OACXyE,SAAU,OACV9xB,MAAO,mBACPC,OAAQ,UAGhBo+D,EAAmB,IAAInR,GAAGwR,OAAO,CAC7BtuC,UAAW,CACP,CAAC,MAAOnF,GAAK,kBACb,CAAC,MAAOA,GAAK,kBACb,CAAC,SAAUA,GAAK,sBAEpBqF,UAAW6sC,EACXz1C,SAAU,SAASl0F,GAEf4pI,EADAD,EAAa3pI,GAEb8pI,OAGRriD,GAAGkB,IAAIkiD,EAAiBxtC,aAAc,CAClC7wB,MAAO,QACPC,OAAQ,SAEZm+D,EAAkB31I,YAAY41I,EAAiBxtC,cAMnDktC,EAAUtyC,QAAU8xC,EACpBS,EAAWvyC,QAAU,WACjB6xC,KAKJ,IAAIqB,EAAW/2I,SAASM,cAAc,OACtCy2I,EAASp3C,YAAc,MAAK0D,GAAG,oBAC/BhQ,GAAGkB,IAAIwiD,EAAU,CACb3lC,UAAW,SACX3L,UAAW,OACXd,WAAY,qBACZ0D,QAAS,UACTxkD,MAAO,mBACPukD,SAAU,SAuBdsK,EAAMskC,mBAAqB,IAAIzE,GAAiBC,EAAc10B,EAAY20B,EAAcC,GACxFr/C,GAAGkB,IAAIme,EAAMskC,mBAAmB/tC,aAAc,CAE1CpxF,QAAQ,OACRy4F,OAAQ,SAKZjd,GAAGrmB,OAAOkpE,EAAU,CAChBa,EACAZ,EACAO,EACArjD,GAAGvgF,GAAG,CAACyhF,IAAK,CAAC97D,MAAO,UAEpB29G,EACAI,EACAnjD,GAAGvgF,GAAG,CAACyhF,IAAK,CAAC97D,MAAO,UAGpB46D,GAAGvgF,GAAG,CAACyhF,IAAK,CAAC97D,MAAO,UAEpBs9G,IACArjC,EAAMskC,mBAAmB/tC,aACzB8sC,QAIC74G,IAAIr8B,YAAYq1I,KAGC,qBArNrBZ,EAAO,EAwNhBrnJ,IAAA,gBAAA,eAGAA,IAAA,mBAAA,WACI,OAAOuC,KAAK0sC,OAGhBjvC,IAAA,qBAAA,SAAa4xH,GACLA,GACArvH,KAAKymJ,aAIbhpJ,IAAA,sBAAA,WACIuC,KAAK6lJ,aAAajxC,YAtObkwC,EAAN,8CCnBM4B,GAAN,iCAAMA,EAMGxE,EACAyE,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA3F,EACA4F,mBAjBHV,QAMGxE,SAAAA,OACAyE,cAAAA,OACAC,aAAAA,OACAC,gBAAAA,OACAC,kBAAAA,OACAC,OAAAA,OACAC,gBAAAA,OACAC,mBAAAA,OACAC,YAAAA,OACAC,mBAAAA,OACA3F,QAAAA,OACA4F,cAAAA,EAjBTpnJ,KAGKqnJ,QAAS,EAgBbrnJ,KAAK0sC,IAAMl9B,SAASM,cAAc,yBAnB7B42I,EAAS,EAsBVjpJ,IAAA,aAAR,eAca6pJ,EAAT,SAAsBC,EAAWC,GAC7B,IAAI72D,EAASnhF,SAASM,cAAc,UAChC65H,EAAc6d,EAAUD,GAAW5d,YAAc6d,EAAUD,GAAW5d,YAAc6d,EAAUD,GAAW1lJ,KACzG+hG,EAAK,oCAAsC4jD,EAAUD,GAAWzd,KAAO,kBA4G3E,OA3GAn5C,EAAOge,UAAY/K,EAAK+lC,EACxBh5C,EAAOye,UAAY,aACnBvM,GAAGkB,IAAIpT,EAAQ,CACXujB,WAAY,OACZ0D,SAAU,SAEdjnB,EAAO0mB,UAAW,EAClB1mB,EAAO0iB,QAAU,WAsBb,GAAM,UAAWm0C,EAAUD,GAyB3B,GAAIC,EAAUD,GAAWjd,UACrB35C,EAAOxF,OACPs8D,EAAY,MACZnpD,EAAM8oD,cAAcM,IAAI,IAAMF,EAAUD,GAAW1lJ,KAAO,KAAOgxG,GAAK,mBAAmB,OACtF,CACH,IAgBI8C,EAhBAgyC,EAAoBrpD,EAAMqoD,cAAciB,kBACxCC,EAAeL,EAAUD,GAAWxd,UAAU,CAC9CzsI,QAASghG,EAAM6oD,qBACfv+D,OAAQ0V,EAAM4oD,cACd3D,SAAUjlD,EAAM2oD,qBAChBzD,UAAWllD,EAAM2oD,qBACjBa,gBAAiB,CAAC3jJ,EAAGm6F,EAAM0oD,kBAAkB7iJ,EAAGmmF,EAAGgU,EAAM0oD,kBAAkB18D,EAAGjvD,EAAGijE,EAAM0oD,kBAAkB3rH,GACzG0sH,kBAAmB,CAAC5jJ,EAAGwjJ,EAAkBxjJ,EAAGmmF,EAAGq9D,EAAkBr9D,EAAGjvD,EAAGssH,EAAkBtsH,KAG7F,IAAKwsH,EACD,OAMJA,EAAa9gB,cAAgB,SAASlkI,GAClCm2C,YAAW,WAEP,MADA8qD,MAAM,mCACAjhG,IACP,GACH8yG,KAIJ,IAAIvuF,EAAoB,GACpB,UAAWygI,IACXzgI,EAAMwgE,MAAQigE,EAAajgE,MAAQ,MAGvCktD,GAAG4M,MAAM,CACLxkJ,OAAQohG,EAAM4jD,SACdhyI,QAAS,MAAQs3I,EAAUD,GAAW1lJ,KAAO,OAC7C6qC,IAAKm7G,EAAavjJ,QAClB8iB,MAAOA,EACPspE,QAAS,CAAC,KAAM,UAChBglB,aAAc,KACdxwC,SAAU,SAASjmE,aAxFHA,EAAQ+oJ,GAC5B,GAAc,UAAV/oJ,EAAJ,CAMA,IAAIsJ,EACJ,IACIA,EAAQy/I,EAAaC,WACvB,MAAOplJ,GACL,MAAyD,IAArDA,EAAEqN,QAAQ7K,QAAQ,+BACZ,oDAAsDmiJ,EAAUD,GAAW1lJ,KAE3EgB,EAGd4kJ,EAAYl/I,QAfJy/I,EAAa1yD,SACb0yD,EAAa1yD,UAsFb4yD,CAAejpJ,EAAQ4oJ,IAE3BlyC,UAAW,SAAU36F,GACjB26F,EAAY36F,UAvEpB8oF,MAAM,yCAID2jD,EAAYl/I,IAOI,IANFi/I,EAAUD,GAAW7lJ,MAAM,CAC1CpE,QAASghG,EAAM6oD,qBACfv+D,OAAQ0V,EAAM4oD,cACdh9B,QAAShZ,GACT3oG,MAAOA,KAGPu7F,MAAM,mCAEiC,IAAvC0jD,EAAUD,GAAW1d,eACrBvrC,EAAMuoD,gBAAgBvoD,EAAM4oD,cAAciB,SAAS7pD,EAAMsoD,aAAawB,iBAEnC,IAAnCZ,EAAUD,GAAWxxC,YACrBzX,EAAMwoD,kBAAkBxwB,YACxBh4B,EAAMyoD,OAAO9hF,OAAOq5B,EAAMwoD,kBAAkBzM,WAAY/7C,EAAMwoD,kBAAkBuB,gBAEpF/pD,EAAMsoD,aAAa3hF,WAuD3ByrB,EAAQA,EAAQ5zF,QAAU6zF,EACnBA,GAGF23D,EAAT,SAA8Bf,EAAWC,GACrC,IAAKA,EAAUD,GAAW3d,OAAU4d,EAAUD,GAAW5c,YAGrD6c,EAAUD,GAAW5c,SAAiC,gCAAtB1iD,UAAUsgE,SAA9C,CAGA,IAAI5e,EAAc6d,EAAUD,GAAW5d,YAAc6d,EAAUD,GAAW5d,YAAc6d,EAAUD,GAAW1lJ,KACzG8uF,EAASnhF,SAASM,cAAc,UAChC8zF,EAAK,sCAAwC4jD,EAAUD,GAAWzd,KAAO,OACzEjoI,EAAO2lJ,EAAUD,GAAW1lJ,KAOhC,OANIA,EAAK/E,OAAS,KACd+E,EAAO,iCAAmC8nI,EAAc,WAE5Dh5C,EAAOge,UAAY/K,EAAK/hG,EACxB8uF,EAAOye,UAAY,aACnBze,EAAO2yD,UAAW,EACX3yD,IAGF63D,EAAT,SAAkBC,EAAUjB,EAAWkB,GACnC,IAAK,IAAInB,KAAaC,GACdA,EAAUrlJ,eAAeolJ,IAAekB,EAAShmI,SAAS8kI,KAG1DjpD,EAAMkjD,UAAYgG,EAAUD,GAAWvd,UAGtCwd,EAAUD,GAAW3d,OAAS3mC,GAC3BukD,EAAUD,GAAWrd,kBACpBsd,EAAUD,GAAW3d,QAAU3mC,KAC/BukD,EAAUD,GAAW5c,SAAgC,+BAArB1iD,UAAUsgE,SAE/CG,EAASr4I,YAAYi3I,EAAaC,EAAWC,KAG7CkB,EAASr4I,YAAYi4I,EAAqBf,EAAWC,IACrDA,EAAUD,QAAalpJ,MApK7BigG,EAAQt+F,KACVijG,EAAWJ,GAAGI,WACd0lD,EAAU7T,GAAG8T,UACbl4D,EAAU,GAMd,GAJAmS,GAAGyE,MAAMtoD,KAAK,CACVn/C,KAAM,kBAGLi1I,GAAG+T,gBAAgBrf,SACpB,MAAM,IAAIvsI,MAAM,sBA+JpB,IAAI6rJ,EAAS,CACT,aACA,OACA,gBACA,SACA,SACA,aAEAC,EAAS,GACb,IAAK,IAAIC,KAAaL,EACdA,EAAQxmJ,eAAe6mJ,IAAcF,EAAOrmI,SAASumI,IAGzDD,EAAO1lJ,KAAK2lJ,GAGhBR,EAASM,EAAQH,EAASrqD,EAAM5xD,KAChC,IAAIu8G,EAAOz5I,SAASM,cAAc,OAMlC,GALAm5I,EAAK75C,UAAY,SACjB9Q,EAAM5xD,IAAIr8B,YAAY44I,GACtBT,EAASO,EAAQJ,EAASrqD,EAAM5xD,MAG3Bu2D,EAAU,CACX,IAAIimD,EAAYrmD,GAAG4L,cAAcnQ,EAAM5xD,IAAK,0DAC5Cw8G,EAAU9hI,MAAM04F,OAAS,OACzBjd,GAAGkB,IAAImlD,EAAW,CACdtxC,SAAU,OACVvkD,MAAO,OACP8gD,WAAY,OACZ0D,QAAS,OACTlB,aAAc,OACdiK,UAAW,WAInB5gH,KAAKqnJ,QAAS,KAGlB5pJ,IAAA,mBAAA,WACI,OAAOuC,KAAK0sC,OAGhBjvC,IAAA,aAAA,WACSuC,KAAKqnJ,QACNrnJ,KAAKmpC,OAETnpC,KAAK0sC,IAAItlB,MAAMC,QAAU,WAG7B5pB,IAAA,aAAA,WACIuC,KAAK0sC,IAAItlB,MAAMC,QAAU,WAnPpBq/H,EAAN,2CCAQyC,GAAOvgE,EAAQ+d,EAAO7pF,EAAajd,EAAsBupJ,UAAzDC,GAAM3nJ,MAAA1B,KAAAyB,oBAAN4nJ,YAAAA,GAAM13C,EAAAvyG,QAAAoyG,EAAA/6F,GAAArB,MAArB,SAAQw8F,EAAchpB,EAAQ+d,EAAO7pF,EAAajd,EAAsBupJ,OAChEE,EAEA5hE,EACA1O,EACAuwE,EASAC,EAqBAC,EAEMC,EAoBN1lI,2EAxDAslI,EAAM5F,GAAa96D,EAAO8T,UAAU,SAAW78F,IAE/C6nF,EAAIzwE,OAAOsQ,OACXyxD,EAAQ0O,EAAEl4E,SAASM,cAAc,QACjCy5I,EAAM7hE,EAAEl4E,SAASM,cAAc,QAC/BF,IAAM4hG,EAAAm4C,IACV3wE,EAAM3oE,YAAYk5I,GAClB1mD,GAAGkB,IAAIwlD,EAAK,CACRj9I,OAAQ,cAEZo7E,EAAEl4E,SAASutE,KAAK31D,MAAMmyF,gBAAkB,UACxC7xB,EAAEl4E,SAASutE,KAAK31D,MAAMixF,gBAAkB,2CACxC3wB,EAAEl4E,SAASutE,KAAK31D,MAAMwyF,iBAAmB,aACrC4vC,EAAY9hE,EAAEl4E,SAASM,cAAc,QAC/BsX,MAAM6tF,UAAY,OAC5Bj8B,EAAM3oE,YAAYm5I,GAClBA,EAAUr6C,YAAc0D,GAAK,oBAE7BnrB,EAAEl4E,SAASutE,KAAK1sE,YAAY2oE,GAC5B6pB,GAAGkB,IAAI/qB,EAAO,CACVk8B,WAAY,OACZV,YAAa,OACbS,UAAW,QACX0T,WAAY,oBACZ/Q,SAAU,OACVgJ,UAAW,SACXb,WAAY,2BACZvG,QAAS,IACTnmD,MAAO,SAEXra,YAAW,WACPggC,EAAM5xD,MAAMoyF,QAAU,MACvB,eAIOkwC,EAAW,IAAIE,UACZptE,OAAO,QAASmqB,GACzB+iD,EAASltE,OAAO,cAAe1/D,GAC/B4sI,EAASltE,OAAO,QAAS8sE,aACRtsE,MAAM,gCAAkC,CACrDh8E,OAAQ,OACR87E,QAAS,CACL+sE,cAAe,aAAeT,GAElCrsE,KAAM2sE,YALVD,EAAQv3C,EAAAj/F,6BAUR,iCADAy0E,EAAE9gE,QACI,IAAI3pB,MAAKi1G,EAAAC,eAEds3C,EAASxrG,GAAE,iBAEZ,MADAypC,EAAE9gE,QACI,IAAI3pB,+BAEIwsJ,EAASK,sBAAvB9lI,EAAIkuF,EAAAj/F,KAA2B+Q,KAEnC0jE,EAAE3vC,SAAS2+B,KAAQ1yD,EAAawvC,KAAK5kD,QAAO,cAAgB,sBAErDoV,+DA7DUtiB,MAAA1B,KAAAyB,WCVrBkoJ,GAAiBx6I,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,wBCElHyqJ,yBACkBC,YAAAA,GAASr4C,EAAAvyG,QAAAoyG,EAAA/6F,GAAArB,MAAxB,SAAQw8F,yEACNm4C,GAAS,gCACQ56I,EAAA,gBAAlB46I,GAAS73C,EAAAj/F,KACT4vF,GAAGyE,MAAMtoD,KAAK,CACVn/C,KAAM,iDAGPkqJ,gDAPoBroJ,MAAA1B,KAAAyB,sDCKlBwoJ,GAAN,iCAAMA,EAOG//B,EACAggC,EACAC,OACAxjD,EAAallG,UAAA3E,OAAA,QAAA,IAAA2E,UAAA,GAAAA,UAAA,GAAG,yBAVnBwoJ,QAOG//B,QAAAA,OACAggC,aAAAA,OACAC,YAAAA,OACAxjD,MAAAA,EAVT3mG,KACKoqJ,gBAA0B,KAD/BpqJ,KAEKqqJ,gBAA0B,oBAFzBJ,EAAY,EAarBxsJ,IAAA,aAAA,sBA0Ba6sJ,EAAT,SAAwBznJ,GACpBA,EAAE0oF,iBACF1oF,EAAE0nJ,YAAc,IA3BS,OAAzBvqJ,KAAKoqJ,kBAGTpqJ,KAAKoqJ,gBAAkBpqJ,KAAKkqH,QAAQsgC,kBAEhCxqJ,KAAKkqJ,cACLhuD,aAAY,WACR,GAAiC,YAA7B1sF,SAASi7I,gBAAb,CAIA,IAEI95C,EAAYrS,EAAQ4rB,QAAQsgC,kBAE5BE,EAAc3zI,KAAKsmB,IAAIszE,EAAYrS,EAAQ8rD,iBAE7C9rD,EAAOqsD,oBANiB,KAM4Bt2D,YAAY57C,OAAUiyG,GAAe,OAClF12I,OAAM,GACX8gI,GAAG8V,sBAAqBtsD,EAAM+rD,uBAEnC,KASPrqJ,KAAKkqH,QAAQ2gC,aAAY,WACrB,IAAIl6C,EAAYrS,EAAQ4rB,QAAQsgC,kBAC9BlsD,EAAO8rD,kBAAoBz5C,EACzB9N,GAAG+M,iBAAiB34F,OAAQ,iBAAkBqzI,GAE9CznD,GAAG+M,iBAAiB34F,OAAQ,iBAAkB,SAIlDjX,KAAKmqJ,aACL36I,SAASqpC,iBAAiB,oBAAoB,WAC1C,GAAiC,YAA7BrpC,SAASi7I,gBACTj7I,SAASm3F,MAAKrI,EAAQqI,MACtB7K,cAAawC,EAAMwsD,qBAChB,CACH,IAAIn6C,EAAYrS,EAAQ4rB,QAAQsgC,kBAChC,GAAElsD,EAAO8rD,kBAAoBz5C,EAAc,SACvCnhG,SAASm3F,MAAQkM,GAAK,WAAa,MAAKvU,EAAQqI,MAChD,IAAIn0F,EAAQ,IACPs4I,gBAAkB5uD,aAAY,WAC/B1pF,GAASA,EAAQ,GAAK,EAElBhD,SAASm3F,MADC,IAAVn0F,EACiBqgG,GAAK,WAAa,MAAKqP,EAAAvb,MAEvBkM,GAAK,WAAa,MAAKqP,EAAQvb,QAErD,eAOvBlpG,IAAA,cAAA,SAAOstJ,GAC0B,OAAzB/qJ,KAAKoqJ,kBAGJW,IACD/qJ,KAAKqqJ,gBAAkB,GAE3BrqJ,KAAK2qJ,oBAAsBt2D,YAAY57C,MACvCz4C,KAAKoqJ,gBAAkBpqJ,KAAKkqH,QAAQsgC,kBACpC3nD,GAAG+M,iBAAiB34F,OAAQ,iBAAkB,WAtFzCgzI,EAAN,8CCUP7mJ,GAAAi4B,SAAAj4B,GAAA4nJ,GAAA3vH,GAAA,WAAA,iBAeS6+G,EAAT,SAAmB92I,EAAKi4B,EAAM8C,GAC5B,IAAIv3B,EAAM,IAAIqkJ,eACdrkJ,EAAI2gB,KAAK,MAAOnkB,GAChBwD,EAAIskJ,aAAe,OACnBtkJ,EAAIuJ,OAAS,WACXg7I,EAAOvkJ,EAAI6iJ,SAAUpuH,EAAM8C,IAE7Bv3B,EAAIqJ,QAAU,WACZsrC,QAAQj6C,MAAM,4BAEhBsF,EAAIwkJ,QAGGC,EAAT,SAAsBjoJ,GACpB,IAAIi4B,EAAM,IAAI4vH,eAEd5vH,EAAI9T,KAAK,OAAQnkB,GAAjB,GACA,IACEi4B,EAAI+vH,OACJ,MAAOE,IACT,OAAqB,KAAdjwH,EAAI+vC,QAA+B,KAAd/vC,EAAI+vC,QAIzBvoE,EAAT,SAAgBO,GACd,IACEA,EAAK85C,cAAc,IAAIsrC,WAAW,UAClC,MAAOrqD,GACP,IAAI9C,EAAM7rB,SAASytC,YAAY,eAC/B5hB,EAAIkwH,eAAe,SAAnB,GAAA,EAAwCt0I,OAAQ,EAAG,EAAG,EAAG,GACnC,IADtB,GAAA,GAAA,GAAA,EACsD,EAAG,MACzD7T,EAAK85C,cAAc7hB,KApDnBmwH,EAA4B,iBAAXv0I,QAAuBA,OAAOA,SAAWA,OAC1DA,OAAyB,iBAATvY,MAAqBA,KAAKA,OAASA,KACnDA,KAAyB,iBAAXwY,GAAuBA,EAAOuN,SAAWvN,EACvDA,OADO,EAyDPu0I,EAAiBD,EAAQvjE,WAAR,YAAiC1wE,KAAK0wE,UAAUC,YAA3B,cAAuD3wE,KAAK0wE,UAAUC,aAA7B,SAAqD3wE,KAAK0wE,UAAUC,WAEnJijE,EAASK,EAAQE,SAEA,iBAAXz0I,QAAuBA,SAAWu0I,EACtC,aAGD,aAAcG,kBAAkBprJ,YAAckrJ,EAC/C,SAAiBpwH,EAAMivD,EAAM3C,GAAM,IAC/B9qF,EAAM2uJ,EAAQj1E,KAAOi1E,EAAQI,UAC7BhmJ,EAAI4J,SAASM,cAAc,KAC/Bw6E,EAAOA,GAAQjvD,EAAKx5B,MAAQ,WAE5B+D,EAAEimJ,SAAWvhE,EACb1kF,EAAEkmJ,IAAM,WAKY,iBAATzwH,GAETz1B,EAAE8wE,KAAOr7C,EACLz1B,EAAEq/E,SAAWltC,SAASktC,OAKxBpiF,EAAM+C,GAJNylJ,EAAYzlJ,EAAE8wE,MACVwjE,EAAS7+G,EAAMivD,EAAM3C,GACrB9kF,EAAM+C,EAAGA,EAAE1I,OAAS,YAM1B0I,EAAE8wE,KAAO75E,EAAI8pF,gBAAgBtrD,GAC7B2d,YAAW,WAAcn8C,EAAIgqF,gBAAgBjhF,EAAE8wE,QAAS,KACxD19B,YAAW,WAAcn2C,EAAM+C,KAAM,KAKvC,qBAAsBqiF,UACtB,SAAiBz5B,EAAM87B,EAAM3C,GAG7B,GAFA2C,EAAOA,GAAQ97B,EAAK3sD,MAAQ,WAER,iBAAT2sD,EAUTy5B,UAAU8jE,kBA1GF3oJ,EA0GuBorD,OAzGf,KADFnzB,EA0GuBssD,GAzGRtsD,EAAO,CAAE2wH,SAAO,GACxB,iBAAT3wH,IACdkgB,QAAQ0wG,KAAK,sDACb5wH,EAAO,CAAE2wH,SAAU3wH,IAKjBA,EAAK2wH,SAAL,6EAA6Fz0I,KAAKnU,EAAKvD,MAClG,IAAI6lG,KAAK,CAAA,SAA8BtiG,GAAO,CAAEvD,KAAMuD,EAAKvD,OAE7DuD,GA8FyCknF,QAT5C,GAAI+gE,EAAY78F,GACd0rF,EAAS1rF,EAAM87B,EAAM3C,OAChB,CACL,IAAI9qF,EAAI2S,SAASM,cAAc,KAC/BjT,EAAE65E,KAAOloB,EACT3xD,EAAEK,OAAS,SACX87C,YAAW,WAAcn2C,EAAMhG,MAvGvC,IAAcuG,EAAMi4B,GA+GhB,SAAiBA,EAAMz0B,EAAM/D,EAAMynF,GASnC,IANAA,EAAQA,GAAS/iE,KAAK,GAAI,aAExB+iE,EAAM96E,SAASm3F,MACfrc,EAAM96E,SAASutE,KAAKusC,UAAY,kBAGd,iBAATjuF,EAAmB,OAAO6+G,EAAS7+G,EAAMz0B,EAAM/D,GAThB,IAWtC8kF,EAAsB,6BAAdtsD,EAAKx7B,KACbhD,EAAQ,eAAkB0a,KAAKi0I,EAAQU,cAAgBV,EAAQW,OAC/DvmJ,EAAW,eAAkB2R,KAAK0wE,UAAUC,WAEhD,IAAKtiF,GAAgB+hF,GAAS9qF,GAAa4uJ,IAAyC,oBAAfW,WAA4B,CAE/F,IAAIlmJ,EAAS,IAAIkmJ,WACjBlmJ,EAAOmmJ,UAAY,WACjB,IAAIjpJ,EAAM8C,EAAOjH,OACjBmE,EAAMwC,EAAcxC,EAAMA,EAAIwL,QAAJ,eAA4B,yBAClD07E,EAAOA,EAAMvyC,SAAS2+B,KAAOtzE,EAC5B20C,SAAW30C,EAChBknF,EAAQ,MAEVpkF,EAAOomJ,cAAcjxH,OAChB,CAAA,IACDi1E,EAAMk7C,EAAQj1E,KAAOi1E,EAAQI,UAC7Bx9F,EAAMkiD,EAAI3pB,gBAAgBtrD,GAC1BivD,EAAOA,EAAMvyC,SAAWqW,EACvBrW,SAAS2+B,KAAOtoB,EACrBk8B,EAAQ,KACRtxC,YAAW,WAAcs3D,EAAIzpB,gBAAgBz4B,KAAQ,QAK3Do9F,EAAQE,OAASP,EAAOO,OAASP,EAG/BH,GAAiBG,GAvJnB,mBAAAl6I,QAAAA,OAAAs7I,IAAAt7I,OAAA,GAAAoqB,SAAA,IAAA2vH,GAAA3vH,MAAAA,KAAAj4B,GAAAopJ,UAAA,QCbaC,GAAN,iCAAMA,EAGGxK,EACAC,EACAwK,EACAxF,EACAyF,mBAPHF,QAGGxK,aAAAA,OACAC,SAAAA,OACAwK,cAAAA,OACAxF,YAAAA,OACAyF,aAAAA,oBAPHF,EAAc,EAUvBhvJ,IAAA,aAAA,eAMamvJ,EAAT,SAAmBhkE,EAAQikE,EAAUC,GACjC,IAAIpoE,EAAQkE,EAAO8T,UAAUowD,GAAU/9I,MAAK,2CAC5CwsC,QAAQ7d,IAAIgnD,EAAM,IACnBqoE,SAASroE,EAAM,IACfmnE,YATGvtD,EAAQt+F,KAYd,GAVAs+F,EAAM2jD,aAAajuI,QAUW,QAA1BsqF,EAAMouD,gBAA2B,CACjC,IACIM,EAAW,YAEXC,GADWpqD,GAAGkC,UAAY/kG,KAAK2sJ,aAClBruD,EAAM4oD,cAAcj6B,kBAAkB,IAWvD,IACI2/B,EAAUK,EAAYJ,EAAUG,GAClC,MAAO1rJ,GACL,IAAIsiG,EAAK,IAAIie,MACbje,EAAGhc,MAAQ0W,EAAM4oD,cAAcn8B,WAC/BnnB,EAAG/b,OAASyW,EAAM4oD,cAAcl8B,YAChCpnB,EAAGh0F,IAAMq9I,EAAWvwD,UAAUswD,GAC9BlY,GAAGoY,aAAa5uD,EAAM4jD,SAAUt+C,SAEjC,GAA8B,WAA1BtF,EAAMouD,gBAKb,IAJA,IAEIS,EAAWtqD,GAAGkC,UAAY/kG,KAAK2sJ,aAC/B90B,EAAWv5B,EAAM4oD,cAAcpvB,gBAC1Bj7H,EAAI,EAAGA,EAAIg7H,EAAS/6H,OAAQD,IAAK,CACtC,IAAI++C,EAAOi8E,EAASh7H,GAChBuwJ,EAAW,CACXD,EACA,KACC,IAAMtwJ,EAAI,IAAImwD,SAAS,EAAG,KAC3B,IACApR,EAAK/5C,KACL,IAZQ,OAeZ+qJ,EAAUhxG,EAAKgtC,OAAQwkE,EAASnsI,KAAK,IAd1B,kBAgBZ,GAA8B,QAA1Bq9E,EAAMouD,gBAA2B,CAUxC,eARIW,EAAW/uD,EAAM4oD,cAAcpvB,gBAE/Bw1B,EAAY,CACZ1lE,MAAO0W,EAAM4oD,cAAcn8B,WAC3BljC,OAAQyW,EAAM4oD,cAAcl8B,YAC5Bv/G,SAAU,GACVm9E,OAAQ0V,EAAM4oD,cAAcj6B,kBAAkB,IAEzC3gC,EAAI,EAAGA,EAAI+gE,EAASvwJ,OAAQwvF,IAAK,CACtC,IAAImjB,EAAO49C,EAAS/gE,GACpBghE,EAAU7hJ,SAASpI,KAAK,CACpBxB,KAAM4tG,EAAK5tG,KACX23G,QAAS/J,EAAK+J,QACd5wB,OAAQ6mB,EAAK7mB,OACb8kC,UAAWonB,GAAGyY,IAAIC,aAAa/9C,EAAKka,YACpCh/G,KAAM,EACNy+E,IAAK,IAIb0rD,GAAG2Y,YAAYjuJ,MAAK,SAACkuJ,GACjB,IAAItvH,EAASsvH,EAAUC,eAAeL,GAClChnD,EAAO,IAAIZ,KAAK,CAACtnE,GAAS,CAAEv+B,KAAM,6BACtCmrJ,GAAAU,OAAOplD,EAAMzD,GAAGkC,UAAOmd,EAAUyqC,aAAe,WACjD/7I,OAAM,WACLkzF,MAAM,6CA5FT2oD,EAAN,8CCCMmB,GAAN,iCAAMA,EAsBGC,EACAC,EACAlH,EACAG,EACAD,EACAiH,EACA7G,EACAC,EACA6G,EACAC,mBA/BHL,QAsBGC,WAAAA,OACAC,aAAAA,OACAlH,aAAAA,OACAG,OAAAA,OACAD,kBAAAA,OACAiH,aAAAA,OACA7G,YAAAA,OACAC,mBAAAA,OACA6G,mBAAAA,OACAC,gBAAAA,EA/BTjuJ,KAEKkuJ,UAAW,oBAFVN,EAAe,EAQhBnwJ,IAAA,mBAAR,sBACI,OAAIuC,KAAKkuJ,WAGTluJ,KAAKkuJ,UAAW,EAChBl1G,YAAW,aACFk1G,UAAW,IACjB,IACI,MAkBXzwJ,IAAA,aAAA,sBACI,IAAKuC,KAAKmuJ,aACN,OAAO,EAGX,IAAKj9C,GAAUF,UACX,OAAO,EAEX,IAAM8gC,EAA2B5gC,GAAUk9C,OAC3Cl9C,GAAUwZ,OAAM,GAChB,IAAM2jC,EAAwBruJ,KAAK+tJ,eAC7BO,EAActuJ,KAAKknJ,cAAcn8B,WAAjCujC,EAAgDtuJ,KAAKknJ,cAAcl8B,YACzEhrH,KAAKknJ,cAAc98B,KAAKikC,EAAUzlE,QAClC,IAAIyjC,EAAagiC,EAAUlsD,MAC3BniG,KAAKguJ,mBAAmBhuJ,KAAKknJ,cAAcqH,gBAAgBliC,IAC3D,IAAMmiC,EAAe,GACrB,IAAK,IAAIC,KAAK3Z,GAAG0Z,QACT1Z,GAAG0Z,QAAQrsJ,eAAessJ,KAC1BD,EAAQC,GAAK,IAAI3Z,GAAG0Z,QAAQC,GAC5BD,EAAQC,GAAG5V,WAAW74I,KAAKmnJ,uBAGnCqH,EAAQ/U,aAAaM,QAAQsU,EAAUG,QAAQ/U,aAAaO,WAC5D,IAAK,IAAIn9I,EAAI,EAAGA,EAAIi1I,EAAQh1I,OAAQD,KAAC,SAC/BA,GACE,GAA2B,UAAvBi1I,EAAQj1I,GAAGguH,KAAK,GAAgB,CAChC,IAAMxvF,EAAImzH,EAAQ1c,EAAQj1I,GAAGguH,KAAK,IAClC,GAAIinB,EAAQj1I,GAAGi1I,QACX,IAAK,IAAIjvI,EAAI,EAAGA,EAAIivI,EAAQj1I,GAAGi1I,QAAQh1I,OAAQ+F,IAAK,CAChD,IAAM6H,EAAIonI,EAAQj1I,GAAGi1I,QAAQjvI,GAAG+4E,OAChCvgD,EAAEy2G,EAAQj1I,GAAGi1I,QAAQjvI,GAAG+tG,QAAQlvG,MAAM25B,EAAG3wB,OAE1C,CACH,IAAMD,EAAIqnI,EAAQj1I,GAAG++E,OACrBvgD,EAAEy2G,EAAQj1I,GAAG+zG,QAAQlvG,MAAM25B,EAAG5wB,SAE/B,GAA2B,WAAvBqnI,EAAQj1I,GAAGguH,KAAK,GAAiB,CACxC,IAAMt9B,EAAIukD,EAAQj1I,GAAG++E,OACf7+E,EAAEuhG,EAAQ4oD,cAAcpV,EAAQj1I,GAAG+zG,QAAQlvG,MAAK48F,EAAM4oD,cAAe35D,GAC3E,GAAkB,iBAAPxwF,EAGP,IAAK,IAAI2xJ,KAFTriC,EAAatvH,IACRixJ,mBAAkB1vD,EAAM4oD,cAAcqH,gBAAgBliC,IAC7CmiC,EACNA,EAAQrsJ,eAAeusJ,IACvBF,EAAQE,GAAG7V,WAAUv6C,EAAM6oD,2BAIpC,GAA2B,WAAvBrV,EAAQj1I,GAAGguH,KAAK,GAAiB,CACxC,IAAM9gB,EAAI,CAAC,CACPzsG,QAAOghG,EAAO6oD,qBACdv+D,OAAM0V,EAAO4oD,cACb3+I,MAAOupI,EAAQj1I,GAAG++E,OAAO,GAAGrzE,MAC5B2hH,QAAS,IAAI4qB,GAAGC,iBAEpBD,GAAG8T,UAAU9W,EAAQj1I,GAAGguH,KAAK,IAAIinB,EAAQj1I,GAAG+zG,QAAQlvG,MAAM,KAAMqoG,QAE7D,GAA2B,SAAvB+nC,EAAQj1I,GAAGguH,KAAK,IAAuC,eAAtBinB,EAAQj1I,GAAG+zG,OAGnD,IAAK,IAAI+9C,KAFTtiC,EAAaylB,EAAQj1I,GAAG++E,OAAO,KAC1BoyE,mBAAkB1vD,EAAM4oD,cAAcqH,gBAAgBzc,EAAQj1I,GAAG++E,OAAO,KAC/D4yE,EACNA,EAAQrsJ,eAAewsJ,IACvBH,EAAQG,GAAG9V,WAAUv6C,EAAM6oD,2BAGhC,GAA2B,SAAvBrV,EAAQj1I,GAAGguH,KAAK,IAAuC,gBAAtBinB,EAAQj1I,GAAG+zG,OAA0B,CAC7E,IAAMg+C,EAAEtwD,EAAQ4oD,cAAc38B,WAC9B,GAAkB,iBAAPqkC,EAMP,IAAK,IAAIC,KALTxiC,EAAauiC,EACT9c,EAAQj1I,GAAG++E,OAAO,IAAC0iB,EACd4oD,cAAc4H,YAAYziC,EAAYylB,EAAQj1I,GAAG++E,OAAO,MAE5DoyE,mBAAkB1vD,EAAM4oD,cAAcqH,gBAAgBliC,IAC7CmiC,EACNA,EAAQrsJ,eAAe0sJ,IACvBL,EAAQK,GAAGhW,WAAUv6C,EAAM6oD,wBAIlCA,qBAAqBp8C,UAAU+mC,EAAQj1I,GAAG++E,OAAO,GAAI,EAAG,IAxDpC,CA0D9B/+E,GAaP,OAXIyxJ,IAActuJ,KAAKknJ,cAAcn8B,YAAcujC,IAActuJ,KAAKknJ,cAAcl8B,cAChFhrH,KAAK8mJ,kBAAkBxwB,YACvBt2H,KAAK+mJ,OAAO9hF,OAAOjlE,KAAK8mJ,kBAAkBzM,WAAYr6I,KAAK8mJ,kBAAkBuB,gBAEjFroJ,KAAK4mJ,aAAa3hF,OAAOonD,GACzBrsH,KAAK8tJ,aAAaiB,SAAS/uJ,KAAKknJ,cAAciB,SAAS97B,IACvDrsH,KAAK6tJ,WAAW3M,aAAanH,QAAQyU,EAAQ/U,aAAaO,WAC1Dh6I,KAAKiuJ,kBAAkBpV,WAAW74I,KAAKmnJ,sBACvCnnJ,KAAK8mJ,kBAAkBkI,iBAAiB,MAExC99C,GAAUwZ,OAAM,IACT,KAGXjtH,IAAA,aAAA,sBACI,IAAKuC,KAAKmuJ,aACN,OAAO,EAGX,IAAKj9C,GAAUD,UACX,OAAO,EAEX,IAAM6gC,EAAU5gC,GAAU+9C,OAC1B/9C,GAAUwZ,OAAM,GAChB,IACI2B,EADEiiC,EAActuJ,KAAKknJ,cAAcn8B,WAAjCujC,EAAgDtuJ,KAAKknJ,cAAcl8B,YAEnEwjC,EAAe,GACrB,IAAK,IAAIU,KAAKpa,GAAG0Z,QACT1Z,GAAG0Z,QAAQrsJ,eAAe+sJ,KAC1BV,EAAQU,GAAK,IAAIpa,GAAG0Z,QAAQU,GAC5BV,EAAQU,GAAGrW,WAAW74I,KAAKmnJ,uBAGnCqH,EAAQ/U,aAAaM,QAAQ/5I,KAAK6tJ,WAAW3M,aAAalH,WAC1D,IAAK,IAAIn9I,EAAI,EAAGA,EAAIi1I,EAAQh1I,OAAQD,KAAC,SAC/BA,GACE,GAA2B,UAAvBi1I,EAAQj1I,GAAGguH,KAAK,GAAgB,CAChC,IAAMxvF,EAAImzH,EAAQ1c,EAAQj1I,GAAGguH,KAAK,IAClC,GAAIinB,EAAQj1I,GAAGi1I,QACX,IAAK,IAAIjvI,EAAI,EAAGA,EAAIivI,EAAQj1I,GAAGi1I,QAAQh1I,OAAQ+F,IAAK,CAChD,IAAM6H,EAAIonI,EAAQj1I,GAAGi1I,QAAQjvI,GAAG+4E,OAChCvgD,EAAEy2G,EAAQj1I,GAAGi1I,QAAQjvI,GAAG+tG,QAAQlvG,MAAM25B,EAAG3wB,OAE1C,CACH,IAAMs/F,EAAI8nC,EAAQj1I,GAAG++E,OACrBvgD,EAAEy2G,EAAQj1I,GAAG+zG,QAAQlvG,MAAM25B,EAAG2uE,SAE/B,GAA2B,WAAvB8nC,EAAQj1I,GAAGguH,KAAK,GAAiB,CACxC,IAAMskC,EAAIrd,EAAQj1I,GAAG++E,OACf7+E,EAAEuhG,EAAQ4oD,cAAcpV,EAAQj1I,GAAG+zG,QAAQlvG,MAAK48F,EAAM4oD,cAAeiI,GAC3E,GAAkB,iBAAPpyJ,EAGP,IAAK,IAAIqyJ,KAFT/iC,EAAatvH,IACRixJ,mBAAkB1vD,EAAM4oD,cAAcqH,gBAAgBliC,IAC7CmiC,EACNA,EAAQrsJ,eAAeitJ,IACvBZ,EAAQY,GAAGvW,WAAUv6C,EAAM6oD,2BAIpC,GAA2B,WAAvBrV,EAAQj1I,GAAGguH,KAAK,GAAiB,CACxC,IAAMwkC,EAAI,CAAC,CACP/xJ,QAAOghG,EAAO6oD,qBACdv+D,OAAM0V,EAAO4oD,cACb3+I,MAAOupI,EAAQj1I,GAAG++E,OAAO,GAAGrzE,MAC5B2hH,QAAS,IAAI4qB,GAAGC,iBAEpBD,GAAG8T,UAAU9W,EAAQj1I,GAAGguH,KAAK,IAAIinB,EAAQj1I,GAAG+zG,QAAQlvG,MAAM,KAAM2tJ,QAE7D,GAA2B,SAAvBvd,EAAQj1I,GAAGguH,KAAK,IAAuC,eAAtBinB,EAAQj1I,GAAG+zG,OAGnD,IAAK,IAAI0+C,KAFTjjC,EAAaylB,EAAQj1I,GAAG++E,OAAO,KAC1BoyE,mBAAkB1vD,EAAM4oD,cAAcqH,gBAAgBzc,EAAQj1I,GAAG++E,OAAO,KAC/D4yE,EACNA,EAAQrsJ,eAAemtJ,IACvBd,EAAQc,GAAGzW,WAAUv6C,EAAM6oD,2BAGhC,GAA2B,SAAvBrV,EAAQj1I,GAAGguH,KAAK,IAAuC,gBAAtBinB,EAAQj1I,GAAG+zG,OAA0B,CAC7E,IAAM2+C,EAAEjxD,EAAQ4oD,cAAc38B,WAC9B,GAAkB,iBAAPglC,EAMP,IAAK,IAAIC,KALTnjC,EAAakjC,EACTzd,EAAQj1I,GAAG++E,OAAO,IAAC0iB,EACd4oD,cAAc4H,YAAYziC,EAAYylB,EAAQj1I,GAAG++E,OAAO,MAE5DoyE,mBAAkB1vD,EAAM4oD,cAAcqH,gBAAgBliC,IAC7CmiC,EACNA,EAAQrsJ,eAAeqtJ,IACvBhB,EAAQgB,GAAG3W,WAAUv6C,EAAM6oD,wBAIlCA,qBAAqBp8C,UAAU+mC,EAAQj1I,GAAG++E,OAAO,GAAI,EAAG,IAxDpC,CA0D9B/+E,GAGHyxJ,IAActuJ,KAAKknJ,cAAcn8B,YAAcujC,IAActuJ,KAAKknJ,cAAcl8B,cAChFhrH,KAAK8mJ,kBAAkBxwB,YACvBt2H,KAAK+mJ,OAAO9hF,OAAOjlE,KAAK8mJ,kBAAkBzM,WAAYr6I,KAAK8mJ,kBAAkBuB,gBAEjF,IAAMoH,EAAoBzvJ,KAAKknJ,cAAcwI,cAAc1vJ,KAAKmnJ,qBAAqBv+D,QAQrF,OAPA5oF,KAAK4mJ,aAAa3hF,OAAOwqF,GACzBzvJ,KAAK8tJ,aAAaiB,SAAS/uJ,KAAKknJ,cAAciB,SAASsH,IACvDzvJ,KAAK6tJ,WAAW3M,aAAanH,QAAQyU,EAAQ/U,aAAaO,WAC1Dh6I,KAAKiuJ,kBAAkBpV,WAAW74I,KAAKmnJ,sBACvCnnJ,KAAK8mJ,kBAAkBkI,iBAAiB,MACxC99C,GAAUwZ,OAAM,IAET,KAGXjtH,IAAA,gBAAA,SAASkyJ,GAGL,GAAIA,GAAYA,EAAS5+C,aAAc,YAC7Bs9C,EAAwBruJ,KAAK+tJ,eAE7BS,EAAUH,EAAUG,QACpB1c,EAAU,CAAC6d,EAAS5+C,cACtB6+C,EAAuBvB,EAAUzlE,OAAO2lE,gBAAgBF,EAAUlsD,OAChEvZ,EAASylE,EAAUzlE,OACrByjC,EAAagiC,EAAUlsD,gBACzBtlG,GACE,GAA2B,UAAvBi1I,EAwDL,GAxDgBjnB,KAAK,GAAgB,CAChC,IAAIxvF,EAAImzH,EAAQ1c,EAuDrB,GAvDgCjnB,KAAK,IAChC,GAAIinB,EAsDT,GAtDoBA,QACX,IAAK,IAAIjvI,EAAI,EAAGA,EAAIivI,EAqD7B,GArDwCA,QAAQh1I,OAAQ+F,IAAK,CAChD,IAAM6H,EAAIonI,EAoDvB,GApDkCA,QAAQjvI,GAAG+4E,OAChCvgD,EAAEy2G,EAmDf,GAnD0BA,QAAQjvI,GAAG+tG,QAAQlvG,MAAM25B,EAAG3wB,OAE1C,CACH,IAAMmlJ,EAAI/d,EAgDnB,GAhD8Bl2D,OACrBvgD,EAAEy2G,EA+CX,GA/CsBlhC,QAAQlvG,MAAM25B,EAAGw0H,SAE/B,GAA2B,WAAvB/d,EA6CZ,GA7CuBjnB,KAAK,GAAiB,CACxC,IAAMilC,EAAIhe,EA4Cf,GA5C0Bl2D,OACf7+E,EAAK6rF,EAAOkpD,EA2CvB,GA3CkClhC,QAAQlvG,MAAMknF,EAAQknE,GACnD,GAAkB,iBAAP/yJ,EAGP,IAAK,IAAIgzJ,KAFT1jC,EAAatvH,EACb6yJ,EAAuBhnE,EAAO2lE,gBAAgBliC,GAChCmiC,EACNA,EAAQrsJ,eAAe4tJ,IACvBvB,EAAQuB,GAAGlX,WAAW+W,QAI/B,GAA2B,WAAvB9d,EAiCZ,GAjCuBjnB,KAAK,GAAiB,CACxC,IAAMmlC,EAAI,CAAC,CACP1yJ,QAASsyJ,EACThnE,OAAQA,EACRrgF,MAAOupI,EA6BhB,GA7B2Bl2D,OAAO,GAAGrzE,MAC5B2hH,QAAS,IAAI4qB,GAAGC,iBAEpBD,GAAG8T,UAAU9W,EA0BlB,GA1B6BjnB,KAAK,IAAIinB,EA0BtC,GA1BiDlhC,QAAQlvG,MAAM,KAAMsuJ,QAE7D,GAA2B,SAAvBle,EAwBZ,GAxBuBjnB,KAAK,IAAuC,eAAtBinB,EAwB7C,GAxBwDlhC,OAGnD,IAAK,IAAIq/C,KAFT5jC,EAAaylB,EAuBlB,GAvB6Bl2D,OAAO,GAC/Bg0E,EAAuBhnE,EAAO2lE,gBAAgBzc,EAsBnD,GAtB8Dl2D,OAAO,IAClD4yE,EACNA,EAAQrsJ,eAAe8tJ,IACvBzB,EAAQyB,GAAGpX,WAAW+W,QAG3B,GAA2B,SAAvB9d,EAgBZ,GAhBuBjnB,KAAK,IAAuC,gBAAtBinB,EAgB7C,GAhBwDlhC,OAA0B,CAC7E,IAAMs/C,EAAKtnE,EAAO2hC,WAClB,GAAkB,iBAAP2lC,EAMP,IAAK,IAAIC,KALT9jC,EAAa6jC,EACTpe,EAYb,GAZwBl2D,OAAO,IAAC0iB,EACd4oD,cAAc4H,YAAYziC,EAAYylB,EAWxD,GAXmEl2D,OAAO,IAEjEg0E,EAAuBhnE,EAAO2lE,gBAAgBliC,GAChCmiC,EACNA,EAAQrsJ,eAAeguJ,IACvB3B,EAAQ2B,GAAGtX,WAAW+W,GAIlCA,EAAqB7kD,UAAU+mC,EAEpC,GAF+Cl2D,OAAO,GAAI,EAAG,OAGhEyyE,EAAUlsD,MAAQkqB,OAxSjBuhC,EAAN,8CCMMwC,GAAN,iCAAMA,EAiBGC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAER,mBAzBKP,QAiBGC,WAAAA,OACAC,UAAAA,OACAC,aAAAA,OACAC,WAAAA,OACAC,UAAAA,OACAC,aAAAA,OACAC,kBAAAA,EAvBT3wJ,KAGH4wJ,cAA2C,GAsBnCR,EAAoBzuJ,SACpB,MAAM,IAAI1E,MAAM,4CAEpBmzJ,EAAoBzuJ,SAAW3B,uBA5B1BowJ,EAAmB,EAKpB3yJ,IAAA,aAAR,SAAcqI,EAAwB+qJ,GAClC,IAAK,IAAIh0J,EAAI,EAAGA,EAAImD,KAAK4wJ,cAAc9zJ,OAAQD,IACvCmD,KAAK4wJ,cAAc/zJ,KAAOg0J,GAG9B7wJ,KAAK4wJ,cAAc/zJ,GAAGiJ,MAqB9BrI,IAAA,kBAAA,SAAW41D,EAAaw9F,GACpB7wJ,KAAKg/C,KACD,CACIn/C,KAAM,QACN1B,MAAOk1D,GAEXw9F,MAIRpzJ,IAAA,iBAAA,SAAU8qC,EAAcsoH,GACpB7wJ,KAAKg/C,KACD,CACIn/C,KAAM,OACN1B,MAAOoqC,GAEXsoH,MAIRpzJ,IAAA,oBAAA,SAAa+7G,EAAiBq3C,GAC1B7wJ,KAAKg/C,KACD,CACIn/C,KAAM,UACN1B,MAAOq7G,GAEXq3C,MAIRpzJ,IAAA,yBAAA,SAAkBqzJ,EAA6BD,GAC3C7wJ,KAAKg/C,KACD,CACIn/C,KAAM,eACN1B,MAAO2yJ,GAEXD,MASRpzJ,IAAA,iBAAA,SAAU41D,EAAaw9F,GACnB7wJ,KAAKqwJ,WAAWh9F,GAChBrzD,KAAK+wJ,UAAU19F,EAAOw9F,MAQ1BpzJ,IAAA,gBAAA,SAAS8qC,EAAcsoH,GACnB7wJ,KAAKswJ,UAAU/nH,MASnB9qC,IAAA,mBAAA,SAAY+7G,EAAiBq3C,GACzB7wJ,KAAKuwJ,aAAa/2C,MAOtB/7G,IAAA,iBAAA,WACI,OAAOuC,KAAKwwJ,gBAGhB/yJ,IAAA,gBAAA,WACI,OAAOuC,KAAKywJ,eAGhBhzJ,IAAA,mBAAA,WACI,OAAOuC,KAAK0wJ,kBAGhBjzJ,IAAA,wBAAA,WACI,OAAOuC,KAAK2wJ,uBAOhBlzJ,IAAA,kBAAA,SAAWud,GACHhb,KAAK4wJ,cAAcnuI,SAASzH,IAGhChb,KAAK4wJ,cAAcvtJ,KAAK2X,MAG5Bvd,IAAA,oBAAA,SAAaud,GACT,IAAK,IAAIne,EAAI,EAAGA,EAAImD,KAAK4wJ,cAAc9zJ,OAAQD,IACvCme,IAAShb,KAAK4wJ,cAAc/zJ,KAC5BmD,KAAK4wJ,cAAcxrJ,OAAOvI,EAAG,GAC7BA,SAvIHuzJ,EAAN,iDCZPY,GAAiB7hJ,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBCAtH2xJ,GAAiB9hJ,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,aCazG4xJ,GAAN,iCAAMA,EAMLC,EACAC,mBAPKF,OAcCv+C,EAAWC,GAAgBy+C,cAEjCrxJ,KAAKsiB,GAAKugF,GAAGvgF,GAAG,CACZiE,QAAU,KACUla,OAA9BwmG,GAAK,qBAAqB,MAAsBxmG,OAAlBsmG,EAAS9wG,KAAK,MAAkBwK,OAAdsmG,EAAS13E,KAAK,mBAEpD8oE,IAAK,CACD+b,OAAQ,UAIhB,IAAMwxC,EAAuBzuD,GAAGvgF,GAAG,CAC/BiE,QAASssF,GAAK,+BAAiC,QAC/C9O,IAAK,CACDkR,UAAW,UAGbr0F,EAA8B,CAChC,CAAC,OAAQiyF,GAAK,UAChBxmG,OACEolG,GAAU5qG,KAAI,SAAA+0C,GACV,MAAO,CAACA,EAAK3gB,KAAM2gB,EAAK/5C,KAAQ,KAAcwK,OAAVuvC,EAAK3gB,KAAK,UAGhDs2H,EAAiB,IAAIzc,GAAGwR,OAAO,CACjCpuC,UAAWvV,GAAarb,QAAQuqB,IAAmBlP,GAAarb,QAAQuqB,IAAmB,OAC3FmG,UAAWp3F,EACX0uF,SAAU,SAACl0F,GACK,SAARA,EACAunF,GAAanb,WAAWqqB,IAExBlP,GAAapb,QAAQsqB,GAAiBz2F,GAE1Co2I,EAAapqI,MAAMC,QAAU,WAG/BmqI,EAAe3uD,GAAGvgF,GAAG,CACvBiE,QAASssF,GAAK,4BACd9O,IAAK,CACD18E,QAAS,OACT4tF,UAAW,UAInBq8C,EAAqB90E,OACjB+0E,EAAe94C,aACf+4C,GAGJxxJ,KAAKsiB,GAAGk6D,OAAO80E,GAGfzuD,GAAGvgF,GAAG,CACFykF,QAAS,SACTzsD,OAAQt6C,KAAKsiB,GACbiE,QAAS,oCAAsCirF,EAAAy/C,IAAY,2CAA6Cp+C,GAAK,wBAC7GxD,QAAS,WAAM,OAAA8hD,KACfptD,IAAK,CACDkR,UAAW,QAEfpjB,OAAQ,CACJwlB,SAAU,QAMlBr3G,KAAKsiB,GAAGk6D,OAAOqmB,GAAGvgF,GAAG,CAAC8sF,UAAW,SAAUrL,IAAK,CAAC+b,OAAQ,aAgCrDsxC,KACApxJ,KAAKsiB,GAAGk6D,OAAO40E,GACVA,EAAYziD,WACQ9L,GAAGvgF,GAAG,CACvBg4B,OAAQ82G,EACRrtD,IAAK,CACF6c,UAAW,YAGLpkC,OACTqmB,GAAGvgF,GAAG,CACFiE,QAAU,kEAA+Ela,OAAdmlG,EAAAw/C,IAAc,yFAxC9FnuD,GAAGvgF,GAAG,CACTykF,QAAS,IACTxgF,QAASssF,GAAK,YACdxD,QAAS,WACLlgG,EAAA,SAAqB3P,MAAK,SAAAP,GACtB,IAAI42G,GAAM,CACNlP,MAAO9D,GAAGvgF,GAAG,CACTiE,QAASssF,GAAK,cAElBtsF,QAASs8E,GAAGvgF,GAAG,CACXiE,QAASs8E,GAAGvgF,GAAG,CACXiE,QAAStnB,EAAOwyJ,SAAS7iJ,QAAO,MAAQ,QACxCm1F,IAAK,CACD8T,QAAS,UAGjB9T,IAAK,CACDlc,OAAQ,OACR6pE,UAAW,YAGnB9pE,MAAO,IACP+5D,aAAa,YAyBjC1qI,OAAO4hC,iBAAiB,WAAW,SAACh2C,GAC5BA,EAAEpF,MAAQo0G,IAGd0/C,EAAe/4C,SACX7V,GAAarb,QAAQuqB,IAAmBlP,GAAarb,QAAQuqB,IAAmB,6BAxInFq/C,EAAW,EA8IpBzzJ,IAAA,mBAAA,WACI,OAAOuC,KAAKsiB,OA/IP4uI,EAAN,8CCgEMpc,GAAK,CAGd0Z,QAAAlX,GACAqa,UAAA5Q,GACA6Q,oBAAAxB,GAGAyB,SAAA/nC,GACAgoC,YAAAtoC,GAGAuoC,oBAAA1jC,GACA2jC,kBAAAliC,GACAmiC,gBAAAt4B,GAGAkvB,gBAAAtf,GACAqf,UAAAnf,GAGAyoB,gBAAAtE,GAGAuE,WAAA5pC,GACA6pC,cAAA/sC,GACAgtC,mBvG3FsB3nJ,GAEtB,IAAI4nJ,EAAOC,EAAOC,EAElBxyJ,KAAK4sF,OAAS,SAASnxD,EAAGC,EAAGs+D,GACzBs4D,EAAQ72H,EACR82H,EAAQ72H,EACR82H,EAAex4D,GAGnBh6F,KAAKyyJ,OAAS,SAASh3H,EAAGC,GACtBhxB,EAAEipH,SAAQ,EAAO2+B,EAAOC,EAAO92H,EAAGC,EAAG82H,IAGzCxyJ,KAAK6sF,KAAO,SAASpxD,EAAGC,GACpBhxB,EAAEipH,SAAQ,EAAM2+B,EAAOC,EAAO92H,EAAGC,EAAG82H,KuG6ExCpb,UAAApxB,GAGAunC,IAAAmF,GACAC,UAAAhsB,GACAisB,UAAAC,GACAC,aAAAzO,GACAoJ,4BT5GkBzD,GAAStoJ,MAAA1B,KAAAyB,YS6G3BsxJ,eAAAtG,GAGAuG,wBAAAl5C,GACAm5C,SAAAj8C,GACAzuG,MAAAgvG,GACA+uC,OAAA9uC,GACA07C,YAAA/6C,GACAg7C,eAAAx6C,GACAy6C,UAAAxR,GACAyR,kBAAAn6C,GACAo6C,SAAAt5C,GACAu5C,eAAAh3C,GACAi3C,crHvGyB,SAAU9oJ,OAiD1B+oJ,EAAT,SAA0BC,GAElBC,EADU,IAAVD,EAAIvgH,EACc,IAAI0vD,GAAGuL,IAAIulD,EAAgBhsE,EAAG+rE,EAAIvgH,EAAGugH,EAAIt4H,GAEzC,IAAIynE,GAAGuL,IAAIslD,EAAI/rE,EAAG+rE,EAAIvgH,EAAGugH,EAAIt4H,IAuC9Cw4H,EAAT,WACI,IAAMnnC,EAAM5pB,GAAG0L,eAAerN,MAAM,IAAI2B,GAAGuL,IAAIulD,EAAgBhsE,EAAG,IAAK,MACvEkb,GAAGmB,cAAc6vD,EAAS,CACtB,aAAc,IAAMhxD,GAAG0L,eAAelN,YAAYorB,MAIjDzO,EAAT,WAEI,IAAMrzG,EAAOgpJ,EAAgBxgH,EAAI,IAAMy0C,EAAQ,EACzCwB,GAAO,EAAIuqE,EAAgBv4H,EAAI,KAAO04H,EAAW,EACvDjxD,GAAGkB,IAAIma,EAAW,CACdvzG,KAAMA,EAAO,KACby+E,IAAKA,EAAM,QAIV2qE,EAAT,WACIC,EAAW5sI,MAAMmyF,gBAAkB,OAAS06C,EAAgB9vJ,EAAI,IAAM8vJ,EAAgB3pE,EAAI,IAAM2pE,EAAgB54H,EAAI,IAEhHwnE,GAAG2L,wBAAwBylD,IAC3BpxD,GAAGkB,IAAImwD,EAAc,CACjB5nJ,OAAQ,cAEZu2F,GAAGkB,IAAIowD,EAAW,CACd7nJ,OAAQ,gBAGZu2F,GAAGkB,IAAImwD,EAAc,CACjB5nJ,OAAQ,KAEZu2F,GAAGkB,IAAIowD,EAAW,CACd7nJ,OAAQ,OAwSX8nJ,EAAT,WACIC,EAAkBjtI,MAAMmyF,gBAAkB1W,GAAG0L,eAAe9M,SAASkmD,IAEhE2M,EAAT,WAEI,IAAIzmD,EAAW0mD,EACfA,EAAoBZ,EACpBF,EAAiB5lD,GAEjBA,EAAM85C,EACNA,EAAoBsM,EACpBA,EAAkBpmD,EAElB2mD,EAASptI,MAAMzc,KAAOslC,SAAS,IAAM0jH,EAAgBhsE,EAAI,IAAMC,EAAQ,IAAM,KAC7EgsE,IACA51C,IACA+1C,IACAK,IAEArD,EAAU,IAAIluD,GAAGwL,IAAI4lD,EAAgB9vJ,EAAG8vJ,EAAgB3pE,EAAG2pE,EAAgB54H,KArbzEijE,EAAQt+F,KACVy0J,EAAe,SAASx1J,KACtBytC,EAAMl9B,SAASM,cAAc,OACnC48B,EAAItlB,MAAMkhC,SAAW,WACrB5b,EAAI0iE,UAAY,cAChB,IAAMslD,EAAY7xD,GAAGvgF,GAAG,CACpByhF,IAAK,CACD18E,QAAS,OACTysF,WAAY,YAGdlsB,EAAQl9E,EAAEk9E,MACZksE,EAAWppJ,EAAEopJ,SACXjsE,EAASn9E,EAAEm9E,OACXkpE,EAAYrmJ,EAAE6pH,OAEhB0/B,EAAkB,CAClB9vJ,EAAG8rC,SAASvlC,EAAEiqJ,WAAWxwJ,EAAG,IAC5BmmF,EAAGr6C,SAASvlC,EAAEiqJ,WAAWrqE,EAAG,IAC5BjvD,EAAG4U,SAASvlC,EAAEiqJ,WAAWt5H,EAAG,KAE5Bs4H,EAAkB9wD,GAAG0L,eAAepN,MAAMz2F,EAAEiqJ,YAC5ChN,EAAoB,CAACxjJ,EAAG,IAAKmmF,EAAG,IAAKjvD,EAAG,KACxCk5H,EAAoB1xD,GAAG0L,eAAetO,UAAU0nD,GAE9CiN,EAAY/xD,GAAGvgF,GAAG,IAClBuyI,GAAQ,IAAIC,WAAYC,gBAAgB,wkBAAykB,iBAAiBziD,gBACloBuhD,EAAWgB,EAAcG,eAAe,YAC9CnyD,GAAGmB,cAAc6vD,EAAS,CACtB,aAAc,SAElBhxD,GAAGkB,IAAI8wD,EAAO,CACVjtE,MAAOA,EAAQ,KACfC,OAAQisE,EAAW,OAEvBc,EAAUvkJ,YAAYwkJ,GAEtB,IAAMI,EAAOzlJ,SAASM,cAAc,OACpC+yF,GAAGkB,IAAIkxD,EAAM,CACT3sG,SAAU,WACVu/B,OAAQA,EAAS,OAErB,IAAMmsE,EAAaxkJ,SAASM,cAAc,OACpC0kJ,EAAWhlJ,SAASM,cAAc,OAqFxC8jJ,IACAlnH,EAAItlB,MAAMwgE,MAAQA,EAAQ,KAC1Bl7C,EAAImvE,cAAgB,WAChB,OAAO,GAGX,IAAMq5C,EAAc1lJ,SAASM,cAAc,OAC3C+yF,GAAGkB,IAAImxD,EAAa,CAChBttE,MAAOA,EAAQ,KACfC,OAAQisE,EAAW,KACnBrgD,SAAU,SACVpsF,QAAS,QACTihC,SAAU,WACVqvD,OAAQ,YACRvD,UAAW,iCAGf,IAAM8J,EAAY1uG,SAASM,cAAc,OACzC+yF,GAAGkB,IAAIma,EAAW,CACdt2B,MAAO,OACPC,OAAQ,OACR8uB,aAAc,MACdruD,SAAU,WACVgyD,cAAe,OACflG,UAAW,iDAGf8gD,EAAY7kJ,YAAYukJ,GACxBM,EAAY7kJ,YAAY6tG,GACxBF,IACAtxE,EAAIr8B,YAAY6kJ,GAChBxoH,EAAIr8B,YAAY4kJ,GAChBP,EAAUrkJ,YAAY2jJ,GACtBnxD,GAAGkB,IAAIiwD,EAAY,CACf3sI,QAAS,OACTwsF,eAAgB,gBAChBjsB,MAAiB,IAATC,EAAgB,KACxBA,OAAQA,EAAS,KAEjBusB,UAAW,+BACX0D,YAAa,eAGjBjV,GAAGkB,IAAIkxD,EAAM,CACTxhD,SAAU,SACVnrD,SAAU,WACVs/B,MAAOA,EAAQ,KACfC,OAAQA,EAAS,KACjB8vB,OAAQ,YACRvD,UAAW,+BACXa,UAAW,MACXV,aAAc,QAIlB1R,GAAGkB,IAAIywD,EAAU,CACb5sE,MAAO,MACPC,OAAQA,EAAS,KACjBssB,WAAY,OACZsK,WAAY,iBACZn2D,SAAU,WACV8gC,IAAK,IACLz+E,KAAMslC,SAAS,IAAM0jH,EAAgBhsE,EAAI,IAAMC,EAAQ,IAAM,OAIjE,IAAM+2B,EAAa,CACfh3B,EAAG,EACHx0C,EAAG,EACH/X,EAAG,GAMD84H,EAAerxD,GAAGvgF,GAAG,CACvBqkF,MAAOkM,GAAK,cAAgB,SAC5BzD,UAAW,8BACXrL,IAAK,CACDnc,MAAO,OACPC,OAAQ,OACRwwB,gBAAiB,OAAS7G,EAAA+L,IAAgB,IAC1C3D,iBAAmB,YACnBD,eAAgB,MAChB4nB,mBAAoB,YAGxB4zB,GAAY,EAGhBjB,EAAa7gD,QAAU,YACD,IAAd8hD,GACAtyD,GAAG0B,gBAAgB2vD,EAAc,qCACjCrxD,GAAGqB,aAAagwD,EAAc,sCAC9BiB,GAAY,EACZV,GAAa,KAEbA,GAAa,GACbn2D,EAAM82D,gBAGsB,IAAIvyD,GAAGiN,gBAAgB,CACvD5yG,OAAQg3J,EACRx/D,aAAc,SAASW,GACf8/D,IAGA9/D,EACAwN,GAAGqB,aAAagwD,EAAc,qCAE9BrxD,GAAG0B,gBAAgB2vD,EAAc,yCAI7CF,EAAW3jJ,YAAY6jJ,GAGvB,IAAMC,EAAYtxD,GAAGvgF,GAAG,CACpBiE,QAAS,IACT6oF,UAAW,8BACXzI,MAAOkM,GAAK,sBACZ9O,IAAK,CACDlc,OAAQ,OACRD,MAAOC,EAAS,KAChBqsB,WAAYrsB,EAAS,KACrB+vB,SAAoB,IAAT/vB,EAAiB,MAEhCwnB,QAAS,WACLkN,GAAe,CACXlpD,MAAO,IAAIwvC,GAAGwL,IAAI4lD,EAAgB9vJ,EAAG8vJ,EAAgB3pE,EAAG2pE,EAAgB54H,GACxE26E,QAAS,SAAStU,GACTA,IAGLpD,EAAM4gB,SAASxd,GACfqvD,EAAU,IAAIluD,GAAGwL,IAAI4lD,EAAgB9vJ,EAAG8vJ,EAAgB3pE,EAAG2pE,EAAgB54H,WAK1D,IAAIwnE,GAAGiN,gBAAgB,CACpD5yG,OAAQi3J,EACRz/D,aAAc,SAASW,GACfA,EACAwN,GAAGqB,aAAaiwD,EAAW,qCAE3BtxD,GAAG0B,gBAAgB4vD,EAAW,wCAI1CH,EAAW3jJ,YAAY8jJ,GAEvBJ,IAGA/6G,YAAW,YApOX,SAAqB0vG,GACjB,IAAM9kD,EAAK,IAAIie,MACfhf,GAAGkB,IAAIH,EAAI,CACPt7C,SAAU,WACV39C,KAAM,IACNy+E,IAAK,IACL/hE,QAAS,OACTizF,cAAe,SAKnB,IAHA,IAAM+6C,EAAKxyD,GAAGja,OAAOhB,EAAOC,GACtBwU,EAAMg5D,EAAGxsE,WAAW,MACpB01B,EAAQliB,EAAIuhB,qBAAqB,EAAG,EAAGh2B,EAAO,GAC3C/qF,EAAI,EAAGA,EAAI,EAAGA,GAAK,IAAM,CAC9B,IAAM2hH,EAAM3b,GAAG0L,eAAerN,MAAM,IAAI2B,GAAGuL,IAAQ,IAAJvxG,EAAS,IAAK,MACzDykG,EAAMrxD,SAAS,GAAKuuE,EAAIr6G,GAAIvB,SAAS,IACrC2+F,EAAMtxD,SAAS,GAAKuuE,EAAIl0B,GAAI1nF,SAAS,IACrC4+F,EAAMvxD,SAAS,GAAKuuE,EAAInjF,GAAIz4B,SAAS,IACvB,IAAd0+F,EAAGxkG,SACHwkG,EAAK,IAAMA,GACG,IAAdC,EAAGzkG,SACHykG,EAAK,IAAMA,GACG,IAAdC,EAAG1kG,SACH0kG,EAAK,IAAMA,GACf+c,EAAMR,aAAalhH,EAAG,IAAMykG,EAAKC,EAAKC,GAE1CnF,EAAIC,UAAYiiB,EAChBliB,EAAIE,SAAS,EAAG,EAAG3U,EAAOC,GAE1B6gE,EAASr4I,YAAYuzF,GACrBA,EAAGlY,IAAM,MACTkY,EAAGh0F,IAAMylJ,EAAG34D,UAAU,aACtBkH,EAAGx8E,MAAMC,QAAU,QAsMnBiuI,CAAYL,GACZA,EAAK5kJ,YAAYmkJ,GACG,IAAI3xD,GAAGiN,gBAAgB,CACvC5yG,OAAQ03J,EACRthE,YAAa,EACb0B,aAAa,EACbT,UAAW,SAASp8C,GAwBhB,GAvBmB,gBAAfA,EAAMt4C,OACNgjG,GAAGkB,IAAImxD,EAAa,CAChB9gD,UAAW,mCACXJ,OAAQ,MAGS,SAAjB77D,EAAMw4C,QAENguB,EAAWxrE,EAAIgF,EAAM85C,KAAOrK,EAAQ,IACpC+2B,EAAWvjF,EAAI,IAAM+c,EAAM+5C,KAAO4hE,EAAW,IAE7CH,EAAkB,IAAI9wD,GAAGuL,IAAIulD,EAAgBhsE,EAAGg3B,EAAWxrE,EAAGwrE,EAAWvjF,GACzE64H,EAAkBpxD,GAAG0L,eAAerN,MAAMyyD,GAE1C31C,IACA+1C,IACAhD,EAAUluD,GAAG0L,eAAerN,MAAMyyD,MAElCh1C,EAAWxrE,EAAIwgH,EAAgBxgH,EAC/BwrE,EAAWvjF,EAAIu4H,EAAgBv4H,IAIpB,gBAAf+c,EAAMt4C,MAA0B,CAAC,OAAQ,SAAS4iB,SAAS01B,EAAMw4C,QAAS,CAE1E,IAAImuB,EAAS,EACQ,UAAjB3mE,EAAMw4C,SACNmuB,EAAS,IAGbH,EAAWxrE,GAAKgF,EAAMg6C,GAAKvK,EAAQ,IAAMk3B,EACzCH,EAAWvjF,GAAK+c,EAAMi6C,GAAK0hE,EAAW,IAAMh1C,EAE5C60C,EAAkB,IAAI9wD,GAAGuL,IAAIulD,EAAgBhsE,EAAGg3B,EAAWxrE,EAAGwrE,EAAWvjF,GACzE64H,EAAkBpxD,GAAG0L,eAAerN,MAAMyyD,GAC1C31C,IACA+1C,IACAhD,EAAUluD,GAAG0L,eAAerN,MAAMyyD,IAInB,cAAfx7G,EAAMt4C,MACNgjG,GAAGkB,IAAImxD,EAAa,CAChB9gD,UAAW,+BACXJ,OAAQ,SAML,IAAInR,GAAGiN,gBAAgB,CACtC5yG,OAAQ+3J,EACR3hE,YAAa,EACb0B,aAAa,EACbT,UAAW,SAASp8C,GAsBhB,GApBmB,gBAAfA,EAAMt4C,OACNgjG,GAAGkB,IAAIkxD,EAAM,CACT7gD,UAAW,wCAGM,SAAjBj8D,EAAMw4C,QAENguB,EAAWh3B,EAAIxvC,EAAM85C,KAAOrK,EAAQ,OAEpC+rE,EAAkB,IAAI9wD,GAAGuL,IAAIuQ,EAAWh3B,EAAGgsE,EAAgBxgH,EAAGwgH,EAAgBv4H,GAC9E64H,EAAkBpxD,GAAG0L,eAAerN,MAAMyyD,GAC1Ca,EAASptI,MAAMzc,KAAQoM,KAAK4gD,MAAMg8F,EAAgBhsE,EAAI,OAASC,GAAS,EAAK,KAC7EgsE,IACAG,IACAhD,EAAUluD,GAAG0L,eAAerN,MAAMyyD,KAElCh1C,EAAWh3B,EAAIgsE,EAAgBhsE,GAIpB,gBAAfxvC,EAAMt4C,MAA0B,CAAC,OAAQ,SAAS4iB,SAAS01B,EAAMw4C,QAAS,CAE1E,IAAMjC,EAAS33E,KAAKsmB,IAAI8a,EAAM02C,MAAQ12C,EAAM07C,WACtCirB,EAAShF,GAAwBprB,EAAyB,UAAjBv2C,EAAMw4C,QAErDguB,EAAWh3B,GAAKxvC,EAAMg6C,GAAKvK,EAAQ,OAASk3B,EAEvB,UAAjB3mE,EAAMw4C,SACNguB,EAAWh3B,EAAIg3B,EAAWh3B,EAAI,OAC1Bg3B,EAAWh3B,EAAI,IACfg3B,EAAWh3B,GAAK,SAGxBg3B,EAAWh3B,EAAI5wE,KAAK6K,IAAI,OAAQ+8F,EAAWh3B,GAC3CgsE,EAAkB,IAAI9wD,GAAGuL,IAAIuQ,EAAWh3B,EAAGgsE,EAAgBxgH,EAAGwgH,EAAgBv4H,GAC9E64H,EAAkBpxD,GAAG0L,eAAerN,MAAMyyD,GAC1Ca,EAASptI,MAAMzc,KAAQoM,KAAK4gD,MAAMg8F,EAAgBhsE,EAAI,OAASC,GAAS,EAAK,KAC7EgsE,IACAG,IACAhD,EAAUluD,GAAG0L,eAAerN,MAAMyyD,IAInB,cAAfx7G,EAAMt4C,MACNgjG,GAAGkB,IAAIkxD,EAAM,CACT7gD,UAAW,sCAK5B,GAKH,IAAMigD,EAAoBxxD,GAAGvgF,GAAG,CAC5Bg4B,OAAQo6G,EACR/tD,MAAOkM,GAAK,mBAAqB,OACjC9O,IAAK,CACD4T,OAAQ,UACRzC,WAAY,MACZttB,MAAO,OACPC,OAAQ,OACRusB,UAAW,qCACX0D,YAAa,cAEjBzI,QAAS,SAASxsG,GACdA,EAAE0oF,iBACF+oE,OAwBRF,IAMAp0J,KAAKk/G,SAAW,SAAU/gF,GACtB81H,EAAkB,CAAC9vJ,EAAG8rC,SAAS9R,EAAEh6B,EAAG,IAAKmmF,EAAGr6C,SAAS9R,EAAEmsD,EAAG,IAAKjvD,EAAG4U,SAAS9R,EAAE9C,EAAG,KAChFo4H,EAAiB5wD,GAAG0L,eAAepN,MAAMhjE,IACzCq2H,EAASptI,MAAMzc,KAAOslC,SAAS,IAAM0jH,EAAgBhsE,EAAI,IAAMC,EAAQ,IAAM,KAC7EgsE,IACA51C,IACA+1C,KAGJ/zJ,KAAKm/G,SAAW,WACZ,OAAO,IAAItc,GAAGwL,IAAI4lD,EAAgB9vJ,EAAG8vJ,EAAgB3pE,EAAG2pE,EAAgB54H,IAG5Er7B,KAAK4nJ,gBAAkB,WACnB,OAAO,IAAI/kD,GAAGwL,IAAIs5C,EAAkBxjJ,EAAGwjJ,EAAkBr9D,EAAGq9D,EAAkBtsH,IAGlFr7B,KAAKu1J,gBAAkB,SAAUv6I,GAC7By5I,EAAez5I,GAGnBhb,KAAKo1J,YAAc,WACVD,IAGLA,GAAY,EACZtyD,GAAG0B,gBAAgB2vD,EAAc,wCAGrCl0J,KAAK8lC,OAAS,SAAUjjC,GAChBA,GACA6pC,EAAItlB,MAAMkzF,cAAgB,GAC1B5tE,EAAItlB,MAAMoyF,QAAU,IACpBk7C,EAAUttI,MAAMkzF,cAAgB,GAChCo6C,EAAUttI,MAAMoyF,QAAU,MAE1B9sE,EAAItlB,MAAMkzF,cAAgB,OAC1B5tE,EAAItlB,MAAMoyF,QAAU,MACpBk7C,EAAUttI,MAAMkzF,cAAgB,OAChCo6C,EAAUttI,MAAMoyF,QAAU,QAIlCx5G,KAAKw1J,UAAY,SAAU7tE,IACvBA,EAAI13C,SAAS,IAAK03C,EAAa,EAATE,EAAa,GAAI,OAC7BisE,IAGVA,EAAWnsE,EACXkb,GAAGkB,IAAI8wD,EAAO,CACVjtE,MAAOA,EAAQ,KACfC,OAAQisE,EAAW,OAEvBoB,EAAY9tI,MAAMygE,OAASisE,EAAW,KACtC91C,MAGJh+G,KAAKs0J,WAAa,WACdA,KAGJt0J,KAAKy4G,WAAa,WACd,OAAO/rE,GAGX1sC,KAAKy1J,iBAAmB,WACpB,OAAOf,IqHzZXgB,mBAAAl4C,GACAm4C,YAAAv2C,GACAw2C,aAAA11C,GACA21C,QAAAh1C,GACAi1C,UAAAjW,GAGAkW,cAAAx0C,GACAy0C,SAAA3zC,GACA4zC,cAAAh8B,GACAi8B,oBAAA34B,GACA44B,QAAAt3B,GACAu3B,sBCrHyB1rJ,OAUrB2rJ,EAeAC,EAiJKrjC,EAAT,SAAcqX,GAEV,GAAKjb,EAAL,CAIAknC,EAAYpnD,YAAcknD,EAASx0J,KACnC20J,EAAU7nD,UAAYkE,GAAK,WAAa,OAAS97F,KAAK4gD,MAAyB,IAAnB0+F,EAAS78C,SAAiB,IAEtF,IAAI6R,EAAcgrC,EAAS/4J,QAAQsrF,OAEnC,GAAIyiC,EAAYzjC,QAAU6uE,EAAc7uE,OAASyjC,EAAYxjC,SAAW4uE,EAAc5uE,OAAQ,CAC1F,IAAI6uE,EAAmB7zD,GAAG4B,QAAQ4mB,EAAYzjC,MAAOyjC,EAAYxjC,OAAQ8uE,EAAYA,EAAY,GACjG/tE,EAAOhB,MAAQ7wE,KAAK4gD,MAAM++F,EAAiB9uE,OAC3CgB,EAAOf,OAAS9wE,KAAK4gD,MAAM++F,EAAiB7uE,QAE5CyiD,GAAY,EAGhBssB,EAAgBhvE,MAAQgB,EAAOhB,MAC/BgvE,EAAgB/uE,OAASe,EAAOf,OAEhCgvE,EAAmBnrD,OACnBmrD,EAAmBlrD,uBAAwB,EAC3CkrD,EAAmBv6D,UAAYw6D,EAC/BD,EAAmBt6D,SAAS,EAAG,EAAGq6D,EAAgBhvE,MAAOgvE,EAAgB/uE,QACzEgvE,EAAmB9rD,UAAUsgB,EAAa,EAAG,EAAGurC,EAAgBhvE,MAAOgvE,EAAgB/uE,QACvFgvE,EAAmB/qD,UAEfw+B,GACAysB,EAAiB,EACjBjpD,EAAUpC,OACVoC,EAAU/C,UAAU6rD,EAAiB,EAAG,GACxC9oD,EAAUhC,YAGVirD,EAAiBC,EACjBC,KAIJC,IAEAC,EAAiBjmD,GAAU9zB,WAC3Bq5E,EAAc7uE,MAAQyjC,EAAYzjC,MAClC6uE,EAAc5uE,OAASwjC,EAAYxjC,SAG9B5iB,EAAT,WACIguD,GAAK,IAuBAikC,EAAT,WAEI,GAAKE,GAAyBf,EAA9B,CAIA,IAAIhrC,EAAcgrC,EAAS/4J,QAAQsrF,OAE/B8tE,EAAmB7zD,GAAG4B,QAAQ4mB,EAAYzjC,MAAOyjC,EAAYxjC,OAAQwvE,EAAiBA,EAAiB,GAC3GC,EAAY1vE,MAAQ7wE,KAAK4gD,MAAM++F,EAAiB9uE,OAChD0vE,EAAYzvE,OAAS9wE,KAAK4gD,MAAM++F,EAAiB7uE,QACjD0vE,EAAe7rD,OACX4rD,EAAY1vE,MAAQyjC,EAAYzjC,MAChC2vE,EAAe5rD,uBAAwB,GAEvC4rD,EAAe5rD,uBAAwB,EACvC4rD,EAAe3rD,sBAAwB,QAE3C2rD,EAAej7D,UAAYk7D,EAC3BD,EAAeh7D,SAAS,EAAG,EAAG+6D,EAAY1vE,MAAO0vE,EAAYzvE,QAC7D0vE,EAAexsD,UAAUsgB,EAAa,EAAG,EAAGisC,EAAY1vE,MAAO0vE,EAAYzvE,QAC3E0vE,EAAezrD,UAEf,IAAMha,EAASplD,EAAIslD,wBACnB6Q,GAAGkB,IAAI0zD,EAAoB,CACvBruE,IAAKryE,KAAK2K,IAAI,GAAKowE,EAAO1I,IAAMvB,EAAS,EAAIyvE,EAAYzvE,OAAS,GAAM,SAKvE6vE,EAAT,WACI,IACIhtJ,EAAEw3I,SAASnpG,YAAY0+G,GACzB,MAAM50J,MA1QR6pC,EAAMm2D,GAAGvgF,GAAG,IAEZ+sG,GAAY,EACVxnC,EAAS,GACT8uE,EAAa9uE,EAAS,GACtBwvE,EAAkB,IACpBF,GAAiB,EACjBV,EAAgB,CAChB7uE,MAAO,EACPC,OAAQ,GAER+uE,EAAkB/zD,GAAGja,SACrBiuE,EAAqBD,EAAgB/tE,WAAW,MAC9CmuE,EAAkB,GACpBD,EAAiB,EACjBK,GAAuB,EAErBO,EAAiC,IAKnCC,EAAmB/0D,GAAGvgF,GAAG,CACzByhF,IAAK,CACD18E,QAAS,OACTysF,WAAY,SACZjsB,OAAQA,EAAS,KACjBx0B,MAAO,UAGXwkG,EAAkBh1D,GAAGvgF,GAAG,CACxByhF,IAAK,CAED+zD,SAAUjwE,EAAS,KACnBA,OAAQA,EAAS,KACjBxgE,QAAS,OACTwsF,eAAgB,SAChBC,WAAY,YAGhBlrB,EAASia,GAAGja,OAAO+tE,EAAYA,GAC/B7oD,EAAYllB,EAAOC,WAAW,MAClCD,EAAO+d,MAAQkM,GAAK,uBACpBhQ,GAAGkB,IAAInb,EAAQ,CACXwrB,UAAW,oBACX0D,YAAa,eAEjB,IAAIigD,EAAcl1D,GAAGvgF,GAAG,CACpByhF,IAAK,CAED2+B,SAAU,IACV7rB,YAAa,OACbe,SAAU,OACVnE,SAAU,SACVnrD,SAAU,cAGdiuG,EAAc1zD,GAAGvgF,GAAG,CACpBiE,QAAS,GACTw9E,IAAK,CACD2V,SAAU,OACVwP,WAAY,YAGhB8uC,EAAan1D,GAAGvgF,GAAG,CACnByhF,IAAK,CACDsU,gBAAiB,gFACjB/vD,SAAU,WACV19C,MAAO,IACPw+E,IAAK,IACLxB,MAAO,OACPC,OAAQ,UAGZowE,EAAcp1D,GAAGvgF,GAAG,CACpByhF,IAAK,CAEDz7C,SAAU,WACV39C,KAAM,OACNy+E,IAAK,IACLxB,MAAO,OACPC,OAAQ,UAGZn9E,EAAE2kG,UACFxM,GAAGhqD,iBAAiBo/G,EAAY,SAAS,WACrCvtJ,EAAE2kG,aAENxM,GAAGhqD,iBAAiB+vC,EAAO,SAAS,WAChCl+E,EAAE2kG,cAGV,IAAImnD,EAAY3zD,GAAGvgF,GAAG,CAClBiE,QAASssF,GAAK,WAAa,WAC3B9O,IAAK,CACD+zD,SAAU,OACVlgD,SAAU,OACVgJ,UAAW,SACXzM,WAAY,UACZ9gD,MAAO,UAITokG,EAAqB50D,GAAGvgF,GAAG,CAC7B+sF,QAASxM,GAAGgE,YACZ9C,IAAK,CACDuW,cAAe,OACfnG,WAAY,OACZ7rD,SAAU,WACV19C,MAAO,QACPw+E,IAAK,OACLqwB,OAAQ,iBACRrF,UAAW,8BACX2L,WAAY,WAAW43C,EAA+B,iBACtDh8C,WAAY,OACZt0F,QAAS,QACT6wI,mBAAoB,OACpBpgD,YAAa,gBAGjBw/C,EAAcz0D,GAAGja,OAAOyuE,EAAiBA,GAC7CI,EAAmBj7E,OAAO86E,GAC1B,IAAIC,EAAiBD,EAAYzuE,WAAW,MAC5Cga,GAAGkB,IAAIuzD,EAAa,CAChBjwI,QAAS,UAGbqlB,EAAIr8B,YAAYunJ,GAChBA,EAAiBvnJ,YAAYwnJ,GAC7BA,EAAgBxnJ,YAAYu4E,GAC5BgvE,EAAiBvnJ,YAAY0nJ,GAC7BA,EAAY1nJ,YAAYkmJ,GACxBwB,EAAY1nJ,YAAY2nJ,GACxBD,EAAY1nJ,YAAY4nJ,GACxBL,EAAiBvnJ,YAAYmmJ,GAG7B,IAAIM,EAAgCD,EAAmBzb,cAAcv4C,GAAGsJ,oBAAoB,GAAI,UAC5FqrD,EAA4B1pD,EAAUstC,cAAcv4C,GAAGsJ,oBAAoB,GAAI,mBAM1E8qD,IACkB,IAAnBF,IAIJA,IAEAjpD,EAAUpC,OACVoC,EAAUqY,YAAcpvG,KAAKwmB,KAAKy5H,EAAkBD,GAAkBC,EAAiB,GACvFlpD,EAAU/C,UAAU6rD,EAAiB,EAAG,GACxC9oD,EAAUhC,UAENirD,EAAiB,GACjB3gC,sBAAsB6gC,IAwD9B/6D,aAAY,WAEHm6D,IAIcnlD,GAAU9zB,aACR+5E,IAKrBd,EAAS78C,QAAU68C,EAAS/4J,QAAQsrF,OAAO4wB,QAE3CyZ,GAAK,OAEN,KAmEmB,IAAIpwB,GAAGiN,gBAAgB,CACzC5yG,OAAQ0rF,EACR8L,aAAc,SAASr5D,IA3B3B,SAAyBA,GACjB+7H,IAAyB/7H,IAI7B+zD,aAAaknE,GACbc,EAAuB/7H,EAEnBA,EACAi7H,EAA8Bt9G,YAAW,WACrCk+G,IACAO,EAAmBrwI,MAAMoyF,QAAU,IACnC9uG,EAAEw3I,SAAS7xI,YAAYonJ,GACvBz+G,YAAW,WACPy+G,EAAmBrwI,MAAMoyF,QAAU,MACpC,MACJ,MAGHi+C,EAAmBrwI,MAAMoyF,QAAU,IACnC88C,EAA8Bt9G,WAAW0+G,EAAmBC,EAAiC,MAQ7FQ,CAAgB98H,MAQxBr7B,KAAKy4G,WAAa,WACd,OAAO/rE,GAGX1sC,KAAKo4J,aAAe,SAAS/8H,GACzB,GAAIg0F,IAAch0F,EAAlB,CAGAg0F,EAAYh0F,EACZu8H,EAAiBxwI,MAAMC,QAAUgoG,EAAY,OAAS,OACtD3iF,EAAItlB,MAAMmtF,aAAe8a,EAAY,GAAK,OAE1C,IAAIgpC,EAAennD,GAAU9zB,WACzB/hD,GAAK87H,IAAmBkB,GACxBpzF,MAKRjlE,KAAK+uJ,SAAW,SAASuJ,GACrBjC,EAAWiC,EACXrzF,KAGJjlE,KAAKu4J,WAAa,SAASC,GAGP,SAFN,GAAKA,EAGX31D,GAAGkB,IAAI0zD,EAAoB,CACvB9sJ,KAAM,QACNC,MAAO,KAGXi4F,GAAGkB,IAAI0zD,EAAoB,CACvB9sJ,KAAM,GACNC,MAAO,YDzOnBggJ,+BEpIkCP,GAClC,IAAI5pJ,EAAQoiG,GAAGvgF,GAAG,CACdiE,QAASssF,GAAK,uBAAyB,OAASA,GAAK,wBAErDnmE,EAAMm2D,GAAGvgF,GAAG,CACZiE,QAAS9lB,EACT2uG,UAAW,wBACXrL,IAAK,CACDyV,QAAS,IACTpwB,IAAK,WAOToe,EAAMzwF,KAAK6K,IAAI,EAAGyoI,EAAkB,GACpCoO,EAAO,CAAC,EAAE,EAAE,GACZC,EAAO,CAAC,GAAG,EAAE,GACbl6C,EAAM,CACNznG,KAAK4gD,MAAMkrC,GAAG2E,IAAIixD,EAAK,GAAIC,EAAK,GAAIlxD,IACpCzwF,KAAK4gD,MAAMkrC,GAAG2E,IAAIixD,EAAK,GAAIC,EAAK,GAAIlxD,IACpCzwF,KAAK4gD,MAAMkrC,GAAG2E,IAAIixD,EAAK,GAAIC,EAAK,GAAIlxD,KAExC/mG,EAAM2mB,MAAM+sF,WAAa,QAAUqK,EAAI,GAAK,IAAMA,EAAI,GAAK,IAAMA,EAAI,GAAK,SAE1EhvG,SAASutE,KAAK1sE,YAAYq8B,GAC1BsM,YAAW,WACPtM,EAAItlB,MAAMoyF,QAAU,IACpB9sE,EAAItlB,MAAMgiE,IAAM,SACjB,IACHpwC,YAAW,WACPtM,EAAItlB,MAAMoyF,QAAU,MACrBm/C,MACH3/G,YAAW,WACPxpC,SAASutE,KAAKhkC,YAAYrM,KAC3BisH,OFiGHC,qBG5HwBh9E,GACxB,IAAI6iD,EAAM57B,GAAG4B,QAAQ7oB,EAAO08B,MAAM1wB,MAAOhM,EAAO08B,MAAMzwB,OAAQjM,EAAOgM,MAAOhM,EAAOiM,OAAQ,GACvFH,EAAIz3C,SAAS,GAAKwuF,EAAI72C,OACtBD,EAAI13C,SAAS,GAAKwuF,EAAI52C,QAEtBe,EAASia,GAAGja,OAAOlB,EAAGC,GAE1BiB,EAAOC,WAAW,MAAMkiB,UAAUnvB,EAAO08B,MAAO,EAAG,EAAG5wB,EAAGC,GACzDkb,GAAGkB,IAAInb,EAAQ,CACXvhE,QAAS,QACT+sF,UAAW,mBAGfp0G,KAAKy4G,WAAa,WACd,OAAO7vB,IH+GXiwE,wBIpI2BnuJ,OAsDlB4qF,EAAT,WACIwjE,EAAc,EACdC,EAAqB,EACrBC,EAAqB,EACrB,IACItuJ,EAAExN,OAAO67C,YAAYo6D,GACvB,MAAOtwG,MAGJo2J,EAAT,SAAwB9gH,GACpB,IACI,OAAQA,EAAM+gH,aAAaC,MAAM12I,SAAS,cAC5C,MAAM5f,IAGR,OAAO,GAGFu2J,EAAT,WACI,IAAIhlD,EAAY,oBACZ2kD,EAAqB,GACrBM,EAAcjyI,MAAMgtF,UAAYA,EAChCklD,EAAclyI,MAAMgtF,UAAY,IACzB4kD,EAAqB,GAC5BK,EAAcjyI,MAAMgtF,UAAY,GAChCklD,EAAclyI,MAAMgtF,UAAYA,IAEhCilD,EAAcjyI,MAAMgtF,UAAY,GAChCklD,EAAclyI,MAAMgtF,UAAY,KA/EpCjB,EAAStQ,GAAGvgF,GAAG,CACfiE,QAAS,iBACTw9E,IAAK,CACDw1D,WAAY,QACZjxG,SAAU,QACV39C,KAAM,IACNy+E,IAAK,IACLxB,MAAO,OACPC,OAAQ,OACRssB,WAAY,wBACZ9gD,MAAO,OACPmmG,WAAY,eACZ54C,UAAW,SACXhJ,SAAU,UAGdqJ,EAAYpe,GAAGvgF,GAAG,CAClByhF,IAAK,CACDkR,UAAa,OACb5tF,QAAW,OACXwsF,eAAkB,YAGtB4lD,EAAc,CACd7xE,MAAO,QACPiwB,QAAS,OACTiI,OAAQ,OAERnJ,aAAc,OACd8C,OAAQ,kBACRtF,WAAY,UACZ0U,WAAY,QAEZwwC,EAAgBx2D,GAAGvgF,GAAG,CACtBiE,QAAS,WACTw9E,IAAK01D,IAELH,EAAgBz2D,GAAGvgF,GAAG,CACtBiE,QAAS,eACTw9E,IAAK01D,IAGTtmD,EAAO9iG,YAAY4wG,GACnBA,EAAU5wG,YAAYgpJ,GACtBp4C,EAAU5wG,YAAYipJ,GAGtB,IAAIR,EAAc,EACdC,EAAqB,EACrBC,EAAqB,EAkCzBn2D,GAAGhqD,iBAAiBwgH,EAAc,aAAa,WAC3CN,IACAK,OAEJv2D,GAAGhqD,iBAAiBwgH,EAAc,aAAa,WAC3CN,IACAK,OAEJv2D,GAAGhqD,iBAAiBygH,EAAc,aAAa,WAC3CN,IACAI,OAEJv2D,GAAGhqD,iBAAiBygH,EAAc,aAAa,WAC3CN,IACAI,OA0DJv2D,GAAGhqD,iBAAiB5hC,OAAO,YAtD3B,SAAsBkhC,GACb8gH,EAAe9gH,KAGpBA,EAAMqzC,kBACNrzC,EAAMozC,qBAiD2C,GACrDsX,GAAGhqD,iBAAiB5hC,OAAO,aAhD3B,SAAuBkhC,GACdztC,EAAEgvJ,eAAkBT,EAAe9gH,KAGpB,IAAhB2gH,GACApuJ,EAAExN,OAAOmT,YAAY8iG,GAEzB2lD,QAyCmD,GACvDj2D,GAAGhqD,iBAAiB5hC,OAAO,aAvC3B,SAAuBkhC,GACd8gH,EAAe9gH,IAA0B,IAAhB2gH,GAIV,KADpBA,EAAc/hJ,KAAK2K,IAAI,EAAGo3I,EAAc,KAEpCpuJ,EAAExN,OAAO67C,YAAYo6D,MAiC0B,GACvDtQ,GAAGhqD,iBAAiB5hC,OAAO,QA9B3B,SAAkBkhC,GACd,GAAK8gH,EAAe9gH,IAA8C,IAApCA,EAAM+gH,aAAatyD,MAAM9pG,OAAvD,CAIAq7C,EAAMqzC,kBACNrzC,EAAMozC,iBAEN,IAAIouE,EAAY,UACZZ,EAAqB,EACrBY,EAAY,QACLX,EAAqB,IAC5BW,EAAY,SAGhBjvJ,EAAEkvJ,OAAOzhH,EAAM+gH,aAAatyD,MAAO+yD,GAG/Bb,EAAc,GACdpuJ,EAAExN,OAAO67C,YAAYo6D,GAEzB2lD,EAAc,EACdC,EAAqB,EACrBC,EAAqB,EACrBI,SAtBI9jE,OA4BqC,GAG7CuN,GAAGhqD,iBAAiBs6D,EAAQ,eAAe,WACvC7d,OAEc,IAAIuN,GAAGgN,YAAY,CACjCjjB,OAAQ,SAAS9C,GACTgvE,EAAc,GAAgB,QAAXhvE,GACnBwL,QJrCZukE,0BKhIAnvJ,OA8DSovJ,EAAT,SAAqBp4D,GACjBq4D,EAAY76C,SAASxd,GACrBs4D,EAAgB5yI,MAAMmyF,gBAAkB,OAAS7X,EAAOv9F,EAAI,IAAMu9F,EAAOpX,EAAI,IAAMoX,EAAOrmE,EAAI,KA8FzF4+H,EAAT,WACIvtH,EAAItlB,MAAMC,QAAUgoG,EAAY,QAAU,OACtCA,GAAa6qC,IACbxtH,EAAItlB,MAAMzc,KAAQuvJ,EAASz+H,EAAI1kB,KAAK4gD,MAAMwiG,EAAQvyE,MAAQ,GAAM,KAChEl7C,EAAItlB,MAAMgiE,IAAO8wE,EAASx+H,EAAI3kB,KAAK4gD,MAAMwiG,EAAQrG,SAA6B,EAAlBqG,EAAQC,QAAc,GAAM,OA5J1FD,EAAU,CACZvyE,MAAO,IACPksE,SAAU,GACVsG,QAAS,GACTC,aAAc,IAGdhrC,GAAY,EACV3iF,EAAMm2D,GAAGvgF,GAAG,CACdyhF,IAAK,CACDz7C,SAAU,WACV39C,KAAM,QACNy+E,IAAK,QACL+qB,WAAY,qBACZ9sF,QAAS,OACToyF,OAAQ,iBACRrF,UAAW,2BACX0D,YAAa,gBAGfwiD,EAAY,CACdjnG,MAAO,KACP9qB,KAAM,KACNixE,QAAS,MAOPugD,EAAc,IAAIv8C,GAAmB,CACvC51B,MAAOuyE,EAAQvyE,MACfq2B,SAAUk8C,EAAQrG,SAClBx1C,QAAS67C,EAAQC,QACjB/mG,MAAO3oD,EAAE6vJ,oBAAoBp7C,WAC7Bj6C,SAAU,SAAUw8B,GAChBs4D,EAAgB5yI,MAAMmyF,gBAAkB,OAAS7X,EAAOv9F,EAAI,IAAMu9F,EAAOpX,EAAI,IAAMoX,EAAOrmE,EAAI,IAC9F3wB,EAAE6vJ,oBAAoBr7C,SAASxd,EAAQ84D,MAGzCR,EAAkBn3D,GAAGvgF,GAAG,CAC1ByhF,IAAK,CACDnc,MAAOuyE,EAAQvyE,MAAQ,KACvBC,OAAQsyE,EAAQC,QAAU,KAC1B9/C,cAAe,UAIbmgD,EAAe/vJ,EAAE6vJ,oBAAoBp7C,WAC3C66C,EAAgB5yI,MAAMmyF,gBAAkB,OAASkhD,EAAat2J,EAAI,IAAMs2J,EAAanwE,EAAI,IAAMmwE,EAAap/H,EAAI,IAGpHqR,EAAIr8B,YAAY2pJ,GAChBttH,EAAIr8B,YAAY0pJ,EAAYthD,cAc5B,IAAM8kC,EAAa,IAAIvjC,GAAS,CAC5BhhC,MAAO65B,GAAK,cACZjrB,MAAOuyE,EAAQvyE,MACfC,OAAQsyE,EAAQE,aAChBz4I,IAAK,EACLF,IAAK,IACLw2F,UAAW,GACXzY,WAAY,IACZ2b,WAAY,IAAO,GACnB9L,SAAU,SAASl0E,GACf1wB,EAAE6vJ,oBAAoBzhC,QAAQ19F,IAElCy/E,WAAY,SAASz/E,GACjB,OAAQ,EAAJA,EAAQ,GACDrkB,KAAK4gD,MAAM,GAAAv8B,GAAc,GAE7BrkB,KAAK4gD,MAAU,EAAJv8B,MAG1BynE,GAAGkB,IAAIw5C,EAAW9kC,aAAc,CAC5BxD,UAAW,QAEfvoE,EAAIr8B,YAAYktI,EAAW9kC,cAE3B,IAAM+kC,EAAgB,IAAIxjC,GAAS,CAC/BhhC,MAAO65B,GAAK,WACZjrB,MAAOuyE,EAAQvyE,MACfC,OAAQsyE,EAAQE,aAChBz4I,IAAK,EACLF,IAAK,EACLw2F,UAAW,EACXzY,WAAY,IACZ2b,WAAY,IAAO,GACnB9L,SAAU,SAASl0E,GACf1wB,EAAE6vJ,oBAAoBxhB,WAAW39G,IAErCy/E,WAAY,SAASz/E,GACjB,OAAOrkB,KAAK4gD,MAAU,IAAJv8B,MAG1BynE,GAAGkB,IAAIy5C,EAAc/kC,aAAc,CAC/BqH,OAAQ,UAEZpzE,EAAIr8B,YAAYmtI,EAAc/kC,cAM9B,IAAM+hD,EAAmB,SAASriH,GACX,UAAfA,EAAMt4C,OACDwvH,EAGDyqC,EAAY3hH,EAAMh6C,OAFlBm8J,EAAUjnG,MAAQlb,EAAMh6C,OAKb,SAAfg6C,EAAMt4C,OACDwvH,EAGDkuB,EAAW/kC,SAASrgE,EAAMh6C,OAF1Bm8J,EAAU/xH,KAAO4P,EAAMh6C,OAKZ,YAAfg6C,EAAMt4C,OACDwvH,EAGDmuB,EAAchlC,SAASrgE,EAAMh6C,OAF7Bm8J,EAAU9gD,QAAUrhE,EAAMh6C,OAKf,iBAAfg6C,EAAMt4C,OACN09I,EAAWt4E,OAAO9sB,EAAMh6C,MAAMo/I,YAC9BC,EAAcv4E,OAAO9sB,EAAMh6C,MAAMq/I,iBAGzC9yI,EAAE6vJ,oBAAoBzvF,UAAU0vF,GAE5B,IAAM1J,EAAepmJ,EAAE6vJ,oBAAoBG,kBAC3Cnd,EAAWt4E,OAAO6rF,EAAavT,YAC/BC,EAAcv4E,OAAO6rF,EAAatT,eAClCD,EAAW/kC,SAAS9tG,EAAE6vJ,oBAAoBlhB,WAC1CmE,EAAchlC,SAAS9tG,EAAE6vJ,oBAAoBjhB,cAWjD,IAAI4gB,EAAW,KACfr3D,GAAGhqD,iBAAiBrpC,SAAU,eAAe,SAAS2oC,GAClD+hH,EAAW,CACPz+H,EAAG0c,EAAMy2C,MACTlzD,EAAGyc,EAAM02C,UAIG,IAAIgU,GAAGgN,YAAY,CACnCjjB,OAAQ,SAAS9C,EAAQ3xC,EAAOu8D,EAAUyc,GACtC,IAAIA,EAGJ,OAAI9B,GACAA,GAAY,OACZ4qC,UAICvvJ,EAAEgvJ,eAAkBQ,GAIrB,CAAC,WAAY,UAAW,WAAY,WAAWz3I,SAASiyF,KACxDv8D,EAAMozC,iBACN8jC,GAAY,EAEY,OAApBirC,EAAUjnG,QACVymG,EAAYQ,EAAUjnG,OACtBinG,EAAUjnG,MAAQ,MAEC,OAAnBinG,EAAU/xH,OACVg1G,EAAW/kC,SAAS8hD,EAAU/xH,MAC9B+xH,EAAU/xH,KAAO,MAEK,OAAtB+xH,EAAU9gD,UACVgkC,EAAchlC,SAAS8hD,EAAU9gD,SACjC8gD,EAAU9gD,QAAU,MAGxBygD,OAIRptE,KAAM,SAAS/C,EAAQ3xC,EAAO+yC,GACtB,CAAC,WAAY,UAAW,WAAY,WAAWzoE,SAASyoE,IAAgBmkC,IACxEA,GAAY,EACZ0qC,EAAYhyI,MACZkyI,MAGRntE,OAAQ,WACAuiC,IACAA,GAAY,EACZ0qC,EAAYhyI,MACZkyI,QAMZj6J,KAAKy4G,WAAa,WACd,OAAO/rE,ILnGXiuH,yBM/G4BlwJ,OASnB68I,EAAT,SAAsB58I,GAClB,IAAImtG,EAAU,GAAKntG,EAAEkwJ,aAAelwJ,EAAEkwJ,aAAe,GACjD37J,EAAS4jG,GAAGvgF,GAAG,CACf8sF,UAAW,mCACXzI,MAAOj8F,EAAEi8F,MACT0I,QAAS3kG,EAAE2kG,QACXtL,IAAK,CACD8T,QAASntG,EAAEmwJ,QAAUhjD,EAAU,OAAS,MAG5CjU,EAAKf,GAAGvgF,GAAG,CACXyhF,IAAK,CACDsU,gBAAiB,QAAW3tG,EAAE4tG,MAAQ,KACtCsB,iBAAkB,YAClB2nB,mBAAoB,SACpB5nB,eAAgBjvG,EAAEmwJ,QAAU,UAAY,GAExChzE,OAAQ,UAehB,OAZA+b,EAAGx8E,MAAMkzF,cAAgB,OACzBr7G,EAAOoR,YAAYuzF,GAClB3kG,EAAe88G,gBAAkB,IAAIlZ,GAAGiN,gBAAgB,CACrD5yG,OAAQ+B,EACRy1F,aAAc,SAASW,GACfA,EACAwN,GAAGqB,aAAajlG,EAAQ,8BAExB4jG,GAAG0B,gBAAgBtlG,EAAQ,iCAIhCA,GAxCPytC,EAAMl9B,SAASM,cAAc,OACjC+yF,GAAGkB,IAAIr3D,EAAK,CACRm7C,OAAQ,OAERxgE,QAAS,OACTgxF,gBAAiB,uFAsCrB,IAAIyiD,EAAaxT,EAAa,CAC1B3gD,MAAOkM,GAAK,QACZyF,MAAO7tG,EAAEswJ,QAAUtwJ,EAAEswJ,QAAUvpD,EAAAkvB,IAC/Bm6B,SAAS,IAEbC,EAAW1zI,MAAMwgE,MAAQ,OACzBkzE,EAAW1zI,MAAMs3F,YAAc,+BAC/B,IAAIinC,EAAY2B,EAAa,CACzBj4C,QAAS5kG,EAAEuwJ,MACXr0D,MAAOkM,GAAK,YACZyF,MAAO9G,EAAAmvB,IACPi6B,aAAc,EACdC,SAAS,IAEThV,EAAeyB,EAAa,CAC5Bj4C,QAAS5kG,EAAEwwJ,SACXt0D,MAAOkM,GAAK,eACZyF,MAAO9G,EAAAovB,IACPg6B,aAAc,EACdC,SAAS,IAETjV,EAAa0B,EAAa,CAC1Bj4C,QAAS5kG,EAAEywJ,OACXv0D,MAAOkM,GAAK,aACZyF,MAAO9G,EAAAqvB,IACP+5B,aAAc,EACdC,SAAS,IAITh4D,GAAGO,iBACWkkD,EAAa,CACvBj4C,QAAS5kG,EAAE0wJ,QACXx0D,MAAOkM,GAAK,cACZyF,MAAO9G,EAAAsvB,IACP+5B,SAAS,IAGAvT,EAAa,CAC1Bj4C,QAAS5kG,EAAE2wJ,OACXz0D,MAAOkM,GAAK,QACZyF,MAAO9G,EAAAuvB,IACP85B,SAAS,IAGbnuH,EAAIr8B,YAAYyqJ,GAChBpuH,EAAIr8B,YAAYs1I,GAChBj5G,EAAIr8B,YAAYw1I,GAChBn5G,EAAIr8B,YAAYu1I,GAKhB5lJ,KAAKy4G,WAAa,WACd,OAAO/rE,INcX2uH,aAAAj6B,GACAk6B,0BOlH6B7wJ,OAWpBw1G,EAAT,SAAmB8iB,EAAWw4B,GACtBC,IAAqBz4B,IAIzBy4B,EAAmBz4B,EAEnB04B,EAAax7C,UAAUu7C,GACE,SAArBA,EACA34D,GAAGqB,aAAaw3D,EAAY,kCAE5B74D,GAAG0B,gBAAgBm3D,EAAY,kCAG/BH,GACA9wJ,EAAEkxJ,WAAWH,KAIZlU,EAAT,SAAsB58I,GAElB,IAAIg3H,EAAch3H,EAAEkxJ,UAAY,QAAU,QAEtC38J,EAAS4jG,GAAGvgF,GAAG,CACf8sF,UAAW,mCAEXC,QAAS3kG,EAAE2kG,QACXtL,IAAK,CACD8T,QAASntG,EAAEmwJ,QAAU,SAAW,MAGpCj3D,EAAKf,GAAGvgF,GAAG,CACXyhF,IAAK,CACDsU,gBAAiB,QAAW3tG,EAAE4tG,MAAQ,KACtCsB,iBAAkB,YAClB2nB,mBAAoB,SACpB5nB,eAAgBjvG,EAAEmwJ,QAAU,UAAY,GAExChzE,OAAQ,OACRojB,UAAWvgG,EAAEmxJ,SAAW,eAAiB,GACzCvhD,cAAe,OACfd,QAAS9uG,EAAEkxJ,UAAY,OAAS,OAiBxC,OAdA38J,EAAOoR,YAAYuzF,GAClB3kG,EAAe88G,gBAAkB,IAAIlZ,GAAGiN,gBAAgB,CACrD5yG,OAAQ+B,EACRy1F,aAAc,SAASW,GACfA,EACAwN,GAAGqB,aAAajlG,EAAQ,8BAExB4jG,GAAG0B,gBAAgBtlG,EAAQ,iCAItCA,EAAewiI,WAAa,SAASpmG,GAClCp8B,EAAOmoB,MAAMywF,QAAUntG,EAAEmwJ,QAAWx/H,EAAIqmG,EAAc,SAAY,IAE/DziI,GAIF68J,EAAT,SAA8BpxJ,GAE1B,IAAIzL,EAASuQ,SAASM,cAAc,OACpC+yF,GAAGkB,IAAI9kG,EAAQ,CACXyjI,SAAU,IACVp6E,SAAU,aAGd,IAAIyzG,EAAMl5D,GAAGoE,UAAU,CACnBG,YAAa,MACbxf,MAAO,OACPC,OAAQ,OACRm0E,QAAS,cACTC,oBAAqB,SAEzBp5D,GAAGkB,IAAIg4D,EAAK,CACRzzG,SAAU,WACV39C,KAAM,IACNy+E,IAAK,MAGT,IAII8yE,EAAOr5D,GAAGoE,UAAW,CACrBG,YAAa,OACbC,YAAa,CACT,CACID,YAAa,SACbrqG,GAAI,cACJ4pE,GAAI,OACJE,GAAI,OACJ+gB,MAAO,OACPC,OAAQ,OACRwf,YAAa,CACT,CACID,YAAa,iBACb+0D,GAAI,cACJC,aAAc,KACdn9J,OAAQ,QACT,CACCmoG,YAAa,WACbi1D,GAAI,IACJC,GAAI,KACL,CACCl1D,YAAa,cACbm1D,IAAK,cACLC,SAAU,aACVC,GAAI,KACJC,GAAI,IACJz9J,OAAQ,cAGZ,CACImoG,YAAa,UACb,cAAe,OACf,gBAAiB,OAClB,CACCA,YAAa,cACbm1D,IAAK,aACLC,SAAU,MACX,CACCp1D,YAAa,cACbm1D,IAAK,gBACLC,SAAU,OACVv9J,OAAQ,eAGZ,CACImoG,YAAa,iBACb+0D,GAAI,cACJC,aAAc,KACdn9J,OAAQ,SACT,CACCmoG,YAAa,WACbi1D,GAAI,IACJC,GAAI,KACL,CACCl1D,YAAa,cACbm1D,IAAK,cACLC,SAAU,aACVC,GAAI,KACJC,GAAI,IACJz9J,OAAQ,cAGZ,CACImoG,YAAa,UACb,cAAe,OACf,gBAAiB,OAClB,CACCA,YAAa,cACbm1D,IAAK,aACLC,SAAU,MACX,CACCp1D,YAAa,cACbm1D,IAAK,cACLC,SAAU,aAQ1BG,EAAkB95D,GAAGoE,UAAU,CAC/BG,YAAa,OACb,gBAAiB,qBACjBxgG,EAAG,uBACHypB,KAAM,gBACNusI,MAAO,kCAEXD,EAAgBtpD,QAAU,WACtB3oG,EAAEmyJ,SACFh6D,GAAG0B,gBAAgBo4D,EAAiB,wCAGxC,IAAIG,EAAmBj6D,GAAGoE,UAAU,CAChCG,YAAa,OACb,gBAAiB,qBACjBxgG,EAAG,2BACHypB,KAAM,gBACNusI,MAAO,kCAEXE,EAAiBzpD,QAAU,WACvB3oG,EAAEqyJ,UACFl6D,GAAG0B,gBAAgBu4D,EAAkB,wCAIxC79J,EAAe+9J,oBAAsB,IAAIn6D,GAAGiN,gBAAgB,CACzD5yG,OAAQy/J,EACRjoE,aAAc,SAASW,GACfA,EACAwN,GAAGqB,aAAay4D,EAAiB,uCAEjC95D,GAAG0B,gBAAgBo4D,EAAiB,0CAI/C19J,EAAeg+J,qBAAuB,IAAIp6D,GAAGiN,gBAAgB,CAC1D5yG,OAAQ4/J,EACRpoE,aAAc,SAASW,GACfA,EACAwN,GAAGqB,aAAa44D,EAAkB,uCAElCj6D,GAAG0B,gBAAgBu4D,EAAkB,0CAMjDf,EAAI1rJ,YAAY6rJ,GAChBH,EAAI1rJ,YAAYssJ,GAChBZ,EAAI1rJ,YAAYysJ,GAChB79J,EAAOoR,YAAY0rJ,GAGnB,IAAImB,EAASr6D,GAAGvgF,GAAG,CACfyhF,IAAK,CACDsU,gBAAiB,QAAW3tG,EAAEyyJ,UAAY,KAC1CvjD,iBAAkB,YAClBD,eAAgB,UAChB/xB,MAAO,OACPC,OAAQ,OACRv/B,SAAU,WACV39C,KAAM,OACNy+E,IAAK,MAELkxB,cAAe,UAGvBr7G,EAAOoR,YAAY6sJ,GAGnB,IAAIE,EAAUv6D,GAAGvgF,GAAG,CAChByhF,IAAK,CACDsU,gBAAiB,SAAY3tG,EAAE2yJ,WAAa3yJ,EAAE2yJ,WAAa3yJ,EAAEyyJ,WAAa,KAC1EvjD,iBAAkB,YAClBD,eAAgB,UAChB/xB,MAAO,OACPC,OAAQ,OACRv/B,SAAU,WACV19C,MAAO,OACP4oG,OAAQ,MACRvI,UAAWvgG,EAAE2yJ,WAAa,GAAK,eAC/B/iD,cAAe,UA4BvB,OAzBAr7G,EAAOoR,YAAY+sJ,GAMlBn+J,EAAeq+J,iBAAmB,SAASjiI,GACpCA,GACAwnE,GAAG0B,gBAAgBo4D,EAAiB,iCACpC95D,GAAG0B,gBAAgB24D,EAAQ,mCAE3Br6D,GAAGqB,aAAay4D,EAAiB,iCACjC95D,GAAGqB,aAAag5D,EAAQ,mCAG/Bj+J,EAAes+J,kBAAoB,SAASliI,GACrCA,GACAwnE,GAAG0B,gBAAgBu4D,EAAkB,iCACrCj6D,GAAG0B,gBAAgB64D,EAAS,mCAE5Bv6D,GAAGqB,aAAa44D,EAAkB,iCAClCj6D,GAAGqB,aAAak5D,EAAS,mCAI1Bn+J,GA/RPytC,EAAMl9B,SAASM,cAAc,OACjC+yF,GAAGkB,IAAIr3D,EAAK,CACRm7C,OAAQ,OAERxgE,QAAS,OACTgxF,gBAAiB,uFAGrB,IAAImjD,EAAmB,OA8YnBC,EAAe,IAAIr6B,GAAa,CAChC9xB,SAAU,SAASyzB,GACf9iB,EAAU8iB,GAAW,MAG7Br2F,EAAIr8B,YAAYorJ,EAAahjD,cAE7B,IAAIijD,EAAapU,EAAa,CAC1Bj4C,QAAS,WACL4Q,EAAU,QAAQ,IAEtB3H,MAAO9G,EAAAyxB,IACP43B,SAAS,EACTe,WAAW,IAEfF,EAAWt0I,MAAMs3F,YAAc,+BAC/Bg9C,EAAW/0D,MAAQkM,GAAK,aACxBnmE,EAAIr8B,YAAYqrJ,GAEhB,IAAI8B,EAAmB1B,EAAqB,CACxCe,OAAQpyJ,EAAEgzJ,SACVV,QAAStyJ,EAAEizJ,UACXP,UAAW3rD,EAAA0xB,IACXm6B,WAAY7rD,EAAA2xB,MAEhBq6B,EAAiB72D,MAAQkM,GAAK,aAC9BnmE,EAAIr8B,YAAYmtJ,GAEhB,IAAIG,EAAerW,EAAa,CAC5Bj4C,QAAS5kG,EAAEgzJ,SACXnlD,MAAO9G,EAAA0xB,IACP23B,SAAS,IAEb8C,EAAah3D,MAAQkM,GAAK,WAC1BnmE,EAAIr8B,YAAYstJ,GAEhB,IAAIC,EAAgBtW,EAAa,CAC7Bj4C,QAAS5kG,EAAEizJ,UACXplD,MAAO9G,EAAA2xB,IACP03B,SAAS,IAEb+C,EAAcj3D,MAAQkM,GAAK,YAC3BnmE,EAAIr8B,YAAYutJ,GAEhB,IAAIC,EAAkB/B,EAAqB,CACvCe,OAAQpyJ,EAAEirH,OACVqnC,QAAStyJ,EAAEmrH,OACXunC,UAAW3rD,EAAA4xB,IACXi6B,WAAY,OAEhBQ,EAAgBl3D,MAAQkM,GAAK,kBAC5BgrD,EAAwBP,kBAAiB,GACzCO,EAAwBN,mBAAkB,GAC3C7wH,EAAIr8B,YAAYwtJ,GAEhB,IAAIC,EAAaxW,EAAa,CAC1Bj4C,QAAS5kG,EAAEirH,OACXpd,MAAO9G,EAAA4xB,IACPy3B,SAAS,IAEbiD,EAAWn3D,MAAQkM,GAAK,QACxBhQ,GAAGqB,aAAa45D,EAAY,iCAC5BpxH,EAAIr8B,YAAYytJ,GAEhB,IAAIC,EAAazW,EAAa,CAC1Bj4C,QAAS5kG,EAAEmrH,OACXtd,MAAO9G,EAAA4xB,IACPy3B,SAAS,EACTgB,UAAU,IAEdkC,EAAWp3D,MAAQkM,GAAK,QACxBhQ,GAAGqB,aAAa65D,EAAY,iCAC5BrxH,EAAIr8B,YAAY0tJ,GAEhBJ,EAAav2I,MAAMC,QAAU,OAC7Bu2I,EAAcx2I,MAAMC,QAAU,OAC9By2I,EAAW12I,MAAMC,QAAU,OAC3B02I,EAAW32I,MAAMC,QAAU,OAQ3BrnB,KAAKy4G,WAAa,WACd,OAAO/rE,GAEX1sC,KAAKyhI,WAAa,SAASpmG,GACvBwnE,GAAGkB,IAAIr3D,EAAK,CACRm7C,OAAQxsD,EAAI,OAAS,SAGzBogI,EAAah6B,WAAWpmG,GACvBqgI,EAAmBj6B,WAAWpmG,GAC9BsiI,EAAqBl8B,WAAWpmG,GAChCuiI,EAAsBn8B,WAAWpmG,GACjCyiI,EAAmBr8B,WAAWpmG,GAC9B0iI,EAAmBt8B,WAAWpmG,GAE3BA,GACAmiI,EAAiBp2I,MAAMC,QAAU,OACjCw2I,EAAgBz2I,MAAMC,QAAU,OAChCs2I,EAAav2I,MAAMC,QAAU,QAC7Bu2I,EAAcx2I,MAAMC,QAAU,QAC9By2I,EAAW12I,MAAMC,QAAU,QAC3B02I,EAAW32I,MAAMC,QAAU,UAE3Bm2I,EAAiBp2I,MAAMC,QAAU,QACjCw2I,EAAgBz2I,MAAMC,QAAU,QAChCs2I,EAAav2I,MAAMC,QAAU,OAC7Bu2I,EAAcx2I,MAAMC,QAAU,OAC9By2I,EAAW12I,MAAMC,QAAU,OAC3B02I,EAAW32I,MAAMC,QAAU,SAKnCrnB,KAAKg+J,gBAAkB,SAAS3iI,GACxBA,EACAwnE,GAAG0B,gBAAgBo5D,EAAc,iCAEjC96D,GAAGqB,aAAay5D,EAAc,iCAEjCH,EAAyBF,iBAAiBjiI,IAE/Cr7B,KAAKi+J,iBAAmB,SAAS5iI,GACzBA,EACAwnE,GAAG0B,gBAAgBq5D,EAAe,iCAElC/6D,GAAGqB,aAAa05D,EAAe,iCAElCJ,EAAyBD,kBAAkBliI,IAEhDr7B,KAAKk+J,cAAgB,SAAS7iI,GACtBA,EACAwnE,GAAG0B,gBAAgBu5D,EAAY,iCAE/Bj7D,GAAGqB,aAAa45D,EAAY,iCAE/BD,EAAwBP,iBAAiBjiI,IAE9Cr7B,KAAKm+J,cAAgB,SAAS9iI,GACtBA,EACAwnE,GAAG0B,gBAAgBw5D,EAAY,iCAE/Bl7D,GAAGqB,aAAa65D,EAAY,iCAE/BF,EAAwBN,kBAAkBliI,IAE/Cr7B,KAAKigH,UAAY,SAAS8iB,GACtB9iB,EAAU8iB,IAEd/iI,KAAKgjI,UAAY,WACb,OAAOw4B,IP9bX4C,gCQnImC1zJ,GAEnC,IAAIgiC,EAAMm2D,GAAGvgF,GAAG,CACZykF,QAAS,QACTxgF,QAASssF,GAAK,cAAgB,SAC9BlM,MAAOkM,GAAK,oBACZ9O,IAAK,CACD18E,QAAS,OACTysF,WAAY,SACZ8D,SAAU,OACVvkD,MAAO,qBAIXgrG,EAAiB,IAAI7mD,GAAO,CAC5BQ,UAAW,CACP,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,MAEVE,UAAWxtG,EAAEmxF,UACbyT,SAAU,SAASl0F,GACf1Q,EAAE4zJ,SAASruH,SAAS70B,OAG5BsxB,EAAIr8B,YAAYguJ,EAAe5lD,cAET,IAAI5V,GAAGiN,gBAAgB,CACzC5yG,OAAQwvC,EACR+nD,QAAS,SAAS5xF,GACdw7J,EAAeE,cAAc17J,EAAE6rF,WAMvC1uF,KAAKy4G,WAAa,WACd,OAAO/rE,IR4FX8xH,gBSxHmB9zJ,GAqGnB,QA7DS+zJ,EAAT,SAAmBC,EAASt9C,EAAWu9C,GACnC,IAAI1/J,EAAc,CACdlC,GAAI2hK,EAAQ3hK,GACZsyH,YAAW,cAAeqvC,IAAUA,EAAQrvC,UAC5CuvC,OAAQF,EAAQE,OAChB5oD,QAAS0oD,EAAQ1oD,QACjB/wC,OAAQ,SAAS45F,GACbC,EAAO1vD,UAAYyvD,IAAiB5/J,EAAU0/J,EAAY,wCAA0C,+BAAkC,aACtIG,EAAO13I,MAAMC,QAAUpoB,EAAOowH,UAAY,QAAU,SAGxDyvC,EAASj8D,GAAGvgF,GAAG,CACfiE,QAAS,UAAWm4I,EAAUA,EAAQ1lF,MAAQ,GAC9C2tB,MAAO,UAAW+3D,EAAUA,EAAQ/3D,WAAQtoG,EAC5C+wG,UAAWgS,IAAcniH,EAAOlC,GAAM4hK,EAAY,wCAA0C,+BAAkC,aAC9H56D,IAAK,CACDmQ,WAAYrsB,EAAS,KACrBxgE,QAASpoB,EAAOowH,UAAY,QAAU,OACtCrb,OAAQ,KAEZ3E,QAAS,WACD0vD,IAAiB9/J,GAGrBq/F,EAAM/2E,KAAKtoB,EAAOlC,OAG1BkC,EAAOytC,IAAMoyH,EACT,UAAWJ,GACX77D,GAAGkB,IAAI+6D,EAAQ,CACXzmD,gBAAiB,QAAWqmD,EAAQpmD,MAAQ,KAC5CqB,eAAiB9xB,EAAS,EAAK,OAGnC,QAAS62E,GACT77D,GAAGkB,IAAI+6D,EAAQJ,EAAQ36D,KAE3Br3D,EAAIr8B,YAAYyuJ,GAEM,IAAIj8D,GAAGiN,gBAAgB,CACzC5yG,OAAQ4hK,EACRpqE,aAAc,SAASW,GACfA,EACAwN,GAAGqB,aAAa46D,EAAQ,oBAExBj8D,GAAG0B,gBAAgBu6D,EAAQ,uBAavC,OARI19C,IAAcniH,EAAOlC,IACrBkC,EAAO2/J,SACP3/J,EAAOytC,IAAIr8B,YAAY2uJ,GACvB//J,EAAOytC,IAAIr8B,YAAY4uJ,IAEvBhgK,EAAO+2G,UAGJ/2G,GAgBFgmE,EAAT,WACI,IAAK,IAAIpoE,EAAI,EAAGA,EAAIqiK,EAAOpiK,OAAQD,IAC/BqiK,EAAOriK,GAAGooE,OAAO85F,IAnHrBzgE,EAAQt+F,KACR6nF,EAAS,GACTn7C,EAAMm2D,GAAGvgF,GAAG,CACZ8sF,UAAW,SACXrL,IAAK,CACDlc,OAAQA,EAAS,QAIrBq3E,EAAS,GACTH,EAAe,KAGbC,EAAan8D,GAAGvgF,GAAG,CACrByhF,IAAK,CACDnc,MAAOu3E,OACPt3E,OAAQs3E,OACR9mD,gBAAkB,QAAyBhsG,OAAlBmlG,EAAA6xB,IAAkB,MAC3C1pB,eAAgB,QAChBrxD,SAAU,WACV19C,MAAK,QACL4oG,OAAQ,IACR8G,cAAe,UAGjB2kD,EAAYp8D,GAAGvgF,GAAG,CACpByhF,IAAK,CACDnc,MAAOu3E,OACPt3E,OAAQs3E,OACR9mD,gBAAkB,QAAyBhsG,OAAlBmlG,EAAA6xB,IAAkB,MAC3C1pB,eAAgB,QAChBrxD,SAAU,WACV39C,KAAI,QACJ6oG,OAAQ,IACRvI,UAAW,cACXqP,cAAe,UAiEdhvB,EAAI,EAAGA,EAAI5gF,EAAEw0J,OAAOpiK,OAAQwuF,IACjC4zE,EAAO77J,KAAKo7J,EAAU/zJ,EAAEw0J,OAAO5zE,GAAI5gF,EAAE02G,UAAW12G,EAAEi0J,YAGtD,IAAK,IAAIryE,EAAI,EAAGA,EAAI4yE,EAAOpiK,OAAQwvF,IAC3B4yE,EAAO5yE,GAAGvvF,KAAO2N,EAAE02G,YACnB29C,EAAeG,EAAO5yE,IAG9B,GAAqB,OAAjByyE,EACA,KAAM,oBAUV/+J,KAAKy4G,WAAa,WACd,OAAO/rE,GAGX1sC,KAAKunB,KAAO,SAAS63I,GACjB,IAAK,IAAIviK,EAAI,EAAGA,EAAIqiK,EAAOpiK,OAAQD,IAC/B,GAAIqiK,EAAOriK,GAAGE,KAAOqiK,EAAO,CACxB,GAAIL,IAAiBG,EAAOriK,GACxB,OAQJ,OANAkiK,EAAa/oD,WACb+oD,EAAeG,EAAOriK,IACT+hK,SACbG,EAAaryH,IAAIr8B,YAAY2uJ,GAC7BD,EAAaryH,IAAIr8B,YAAY4uJ,QAC7Bh6F,IAIR,KAAM,+BAGVjlE,KAAKq/J,eAAiB,WAClB,MAAO,GAAKN,EAAahiK,IAG7BiD,KAAKo4J,aAAe,SAASgH,EAAO/vC,GAChC,IAAK,IAAIxyH,EAAI,EAAGA,EAAIqiK,EAAOpiK,OAAQD,IAC/B,GAAIqiK,EAAOriK,GAAGE,KAAOqiK,EAGjB,OAFAF,EAAOriK,GAAGwyH,YAAcA,OACxBpqD,IAIR,KAAM,wCTlCVq6F,4BUrI+B50J,OAItBu6D,EAAT,WAEQ6kE,EAAK1iH,MAAM6jF,UADM,SAAjBs0D,EACuBv9B,EAAS,iBAAmB,GAE5BA,EAAS,GAAK,kBAPzCA,GAAS,EACTu9B,EAAe,QAUf7yH,EAAMm2D,GAAGvgF,GAAG,CACZyhF,IAAK,CACDnc,MAAO,OACPC,OAAQ,OACRssB,WAAY,2BACZ9gD,MAAO,OACP/K,SAAU,WACV8gC,IAAK,IACLw3B,UAAW,SACX1M,WAAY,OACZyD,OAAQ,UACRgE,WAAY,OACZ9D,QAAS,MACTgC,UAAW,cAEflT,MAAOkM,GAAK,qBACZxD,QAAS,SAASxsG,GACdA,EAAE0oF,iBACFy2C,GAAUA,EACV/8D,IACAv6D,EAAE4kG,YAENvyG,GAAG,WAGH+sI,EAAOjnC,GAAGvgF,GAAG,CACbg4B,OAAQ5N,EACRq3D,IAAK,CACDsU,gBAAkB,OAAkBhsG,OAAZmlG,EAAA+xB,IAAY,KACpC37C,MAAO,OACPC,OAAQ,OACR8xB,eAAgB,UAChBC,iBAAkB,YAClB2nB,mBAAoB,SACpB5lB,WAAY,UAGpBjvE,EAAImvE,cAAgB,WAChB,OAAO,GAIX77G,KAAKgiI,OAAS,WACV,OAAOA,GAOXhiI,KAAKw/J,aAAe,SAASC,GACzBF,EAAeE,EACfx6F,KAGJjlE,KAAKy4G,WAAa,WACd,OAAO/rE,IVkEXgzH,iBAAA3d,GACA4d,aAAA1V,GACA2V,kBW3IG,iCAAMC,EA0BGn1J,8BA1BHm1J,GA2BL7/J,KAAK8/J,UAAYp1J,EAAEo1J,UACnB9/J,KAAK+/J,MAAQl9D,GAAGvgF,GAAG,CACfg4B,OAAQt6C,KAAK8/J,UACbn5D,MAAOkM,GAAK,UACZzD,UAAW,cACXrL,IAAK,CACD3a,IAAK,IACL6hB,UAAW,oBAGnBjrG,KAAKggK,QAAUn9D,GAAGvgF,GAAG,CACjBg4B,OAAQt6C,KAAK8/J,UACbn5D,MAAOkM,GAAK,UACZzD,UAAW,cACXrL,IAAK,CACDyP,OAAQ,OAGhBxzG,KAAK2hH,cAAcj3G,EAAE82G,SAEF,IAAI3e,GAAGiN,gBAAgB,CACtC5yG,OAAQ8C,KAAK+/J,MACbxrE,UAAW,SAAC1xF,WAOR,GANe,gBAAXA,EAAEhD,OAAsBy+F,EACnB2hE,WAAa/jE,aAAY,aACrB4jE,UAAUI,SAAS,GAAG,MACtBj7F,WACN,KAEQ,cAAXpiE,EAAEhD,KAAsB,SACxBi8F,cAAawC,EAAM2hE,YACnBjnH,YAAW,aACFinH,WAAa,OACbh7F,WACN,MAGXwvB,QAAS,SAAC5xF,KACDi9J,UAAUI,SAAS,EAAG,GAAKr9J,EAAE6rF,UAC7BzpB,YAGQ,IAAI49B,GAAGiN,gBAAgB,CACxC5yG,OAAQ8C,KAAKggK,QACbzrE,UAAW,SAAC1xF,WAOR,GANe,gBAAXA,EAAEhD,OAAsBy+F,EACnB6hE,aAAejkE,aAAY,aACvB4jE,UAAUI,SAAS,EAAG,MACtBj7F,WACN,KAEQ,cAAXpiE,EAAEhD,KAAsB,SACxBi8F,cAAawC,EAAM6hE,cACnBnnH,YAAW,aACFmnH,aAAe,OACfl7F,WACN,MAGXwvB,QAAS,SAAC5xF,KACDi9J,UAAUI,SAAS,EAAG,GAAKr9J,EAAE6rF,UAC7BzpB,YAIbjlE,KAAKilE,SAEY,IAAInrB,kBAAiB,WAAM,OAAMwkD,EAADr5B,YACxCtqB,QACL36C,KAAK8/J,UACL,CACIp+G,YAAY,EACZ0+G,WAAW,EACXC,SAAS,IAGjBppJ,OAAO4hC,iBAAiB,UAAU,WAAM,OAAMylD,EAADr5B,YAG7CksC,GAAcrmC,WAAU,SAAC1vC,KAEhB2kI,MAAM34I,MAAMoyF,QAAUp+E,GAAK,EAAI,IAAM,KACrC4kI,QAAQ54I,MAAMoyF,QAAUp+E,GAAK,EAAI,IAAM,wBA7G3CykI,EAAiB,EAQlBpiK,IAAA,eAAR,WACQuC,KAAK8/J,UAAUQ,aAAetgK,KAAK8/J,UAAUzpD,aAAe,GACvDr2G,KAAKigK,aACNjgK,KAAK+/J,MAAM34I,MAAMC,QAAuC,IAA7BrnB,KAAK8/J,UAAUz4E,UAAkB,OAAS,SAEpErnF,KAAKmgK,eACNngK,KAAKggK,QAAQ54I,MAAMC,QACfrnB,KAAK8/J,UAAUz4E,UAAYrnF,KAAK8/J,UAAUzpD,aAAe,GAAKr2G,KAAK8/J,UAAUQ,aACzE,OAAS,WAIrBtgK,KAAK+/J,MAAM34I,MAAMC,QAAU,OAC3BrnB,KAAKggK,QAAQ54I,MAAMC,QAAU,WA4FrC5pB,IAAA,sBAAA,SAAe+jH,GACX3e,GAAGkB,IAAI/jG,KAAK+/J,MAAO,CACfp1J,KAAkB,SAAZ62G,EAAqB,IAAM,KACjC52G,MAAmB,UAAZ42G,EAAsB,IAAM,OAEvC3e,GAAGkB,IAAI/jG,KAAKggK,QAAS,CACjBr1J,KAAkB,SAAZ62G,EAAqB,IAAM,KACjC52G,MAAmB,UAAZ42G,EAAsB,IAAM,WAxHlCq+C,EAAN,GX8IHU,cAAApvD,GACAuwC,MAAA5uC,GACA0tD,MAAA3qD,GACAq3C,sBY1JyB5yG,EAAQg+D,GACjC,IAA6BmoD,EAAUx2F,EAAQy2F,EAAWC,EAAgBC,EAAYC,EAClFnyD,EAAeoyD,EAKnB72F,GAAS,EACTy2F,GAAY,EACZD,EAAWjxJ,SAASM,cAAc,OAClC+yF,GAAGkB,IAAI08D,EAAU,CACb74E,MAAQ,UAGZ+4E,EAAiBnxJ,SAASM,cAAc,QACxC8wJ,EAAa,IAAI/+C,OACNjyG,IAAM0oG,EAAM1oG,IAEvB+wJ,EAAetwJ,YAAYuwJ,GAC3BD,EAAetwJ,YAAYioG,GAE3BzV,GAAGkB,IAAI48D,EAAgB,CACnB/4E,MAAQ,QACRC,OAAS,QACTotB,UAAY8rD,OACZ7rD,WAAa6rD,OACbz4G,SAAU,WACVmrD,SAAU,SACVW,UAAW,oCACXqF,OAAQ,mCACRsG,WAAY,2BAEhBld,GAAGkB,IAAIuU,EAAO,CACVhwD,SAAU,WACV39C,KAAM,IACNy+E,IAAK,IACLxB,MAAQ,QACRC,OAAS,QACT2xB,QAAS,OAEbqnD,EAAY,CACRj5E,MAAQ,IACRC,OAAS,IAAcywB,EAAM1wB,MAAS0wB,EAAMzwB,SAElCA,OAAU,MACpBg5E,EAAUh5E,OAAU,IACpBg5E,EAAUj5E,MAASi5E,EAAUh5E,OAASywB,EAAMzwB,OAAUywB,EAAM1wB,OAEhEib,GAAGkB,IAAI68D,EAAY,CACft4G,SAAU,WACV8gC,IAAM,OACNz+E,KAAO,QACPi9E,MAAOi5E,EAAUj5E,MAAQ,KACzBC,OAAQg5E,EAAUh5E,OAAS,KAC3BqtB,YAAc2rD,EAAUj5E,MAAQ,EAAK,KACrCqtB,WAAa4rD,EAAUh5E,OAAS,EAAK,gBAGhCo6B,IACDh4C,KAGJy2F,GAAaA,GAET79D,GAAGkB,IAAI48D,EAAgB,CACnBlnD,OAAQ,+BAGZ5W,GAAGkB,IAAI48D,EAAgB,CACnBlnD,OAAQ,qCAGhBzgE,WAAWipE,EAAW,MAG1BA,IAEAvT,EAAOl/F,SAASM,cAAc,QACzB6+F,UAAY,qDACjBD,EAAKsyD,aAAe,WAChB,OAAO,GAEXn+D,GAAGkB,IAAI2K,EAAM,CACTkJ,SAAWmpD,SACX1tG,MAAO,OACPwkD,QAAS,OACT+I,UAAW,WAGf6/C,EAASpwJ,YAAYswJ,GACrBF,EAASpwJ,YAAYq+F,GAGrB4J,EAAM0oD,aAAe,WACjBn+D,GAAGkB,IAAI48D,EAAgB,CACnBvsD,UAAW,qCAEL,EACV0sD,EAAa9nH,YAAW,YACV,EACV6pD,GAAGkB,IAAI48D,EAAgB,CACnBvsD,UAAW,sCAEhB,OAEPkE,EAAM2oD,YAAc,WAChBp+D,GAAGkB,IAAI48D,EAAgB,CACnBvsD,UAAW,qCAEL,EACVhlB,aAAa0xE,IAEjBxoD,EAAM4oD,WAAa,WACfr+D,GAAGkB,IAAI48D,EAAgB,CACnBvsD,UAAW,qCAEL,EACVhlB,aAAa0xE,IAGjBhuD,GAAM,CACF51G,OAAQo9C,EACRpqC,QAAS,oBACTw8B,IAAK+zH,EACL/vE,QAAS,CAAC,SACVxrB,SAAU,SAAUjmE,GAChBgrE,GAAS,MZ6BjBk3F,yBa/I4B7mH,EAAQ2yG,EAAYmU,EAAcpwG,EAAQqwG,OA0B7DC,EAAT,WACI,MAAMC,EAASC,EAASl9C,kBAAkB5nB,UAAU,aACpD1jD,mCAAW,SAAQ44D,QAEL5tF,EACAsiF,6FADatpB,MAAMukF,iBAAnBv9I,EAAIkuF,EAAAj/F,cACS+Q,EAAKsiF,qBAAlBA,EAAI4L,EAAAj/F,cACHg1E,UAAUw5E,UAAkB96I,MAAM,CACrC,IAAI+6I,cAAan1J,GAAAnN,QAAA,GACZknG,EAAKzmG,KAAOymG,aAGrBttD,YAAW,WACPgY,EAAO02F,IAAI70C,GAAK,oBAAoB,KACrC,uDAEHt3D,QAAQj6C,MAAK4wG,EAAAC,GAAKtwG,KAAIqwG,EAAAC,GAAMjiG,+GAEjC,IAaEi7E,EAAT,WACIwqB,KAxDEjpE,EAAMl9B,SAASM,cAAc,OAC7BkxG,EAAU/pG,OAAOq/F,WAAa,KAAOr/F,OAAOs/F,YAAc,IAE5DorD,EAAa9+D,GAAGvgF,GAAG,CACnBiE,QAASssF,GAAK,qBACd9O,IAAK,CACD6c,UAAW,YAGnBl0E,EAAIr8B,YAAYsxJ,GAGhB,IAAIH,EAAW,IAAIn/C,GAAS,CACxBz6B,MAAOo5B,EAAU,IAAM,IACvBn5B,OAAQm5B,EAAU,IAAM,IACxBp4B,OAAQqkE,IAEZpqD,GAAGkB,IAAIy9D,EAASxhD,QAAS,CACrB/K,UAAW,OACXC,WAAY,QACZ0qB,UAAW,iBACXC,aAAc,mBAElBnzF,EAAIr8B,YAAYmxJ,EAASxhD,SAsBzB,IASIrK,EATAnpB,EAAc,IAAIqW,GAAGgN,YAAY,CACjCjjB,OAAQ,SAAS9C,EAAQ83E,EAAUltD,GACd,WAAbA,IACA4sD,IACA3rD,QASZ9S,GAAGhqD,iBAAiB5hC,OAAQ,OAAQk0E,GACpC2nB,GAAM,CACF51G,OAAQo9C,EACRpqC,QAAS,OAASmxJ,EAAY,GAAmCh1J,OAAjCwmG,GAAK,uBAAuB,OAAiCxmG,OAA5BwmG,GAAK,wBAA4B,GAA8BxmG,OAA5BwmG,GAAK,yBAA4B,OACrInmE,IAAKA,EACLtlB,MAAO45F,EAAU,GAAK,CAClBp5B,MAAO,SAEX8I,QAAS2wE,EAAW,CAACxuD,GAAK,qBAAsBA,GAAK,qBAAsB,UAAY,CAACA,GAAK,qBAAsB,UACnHyC,UAAW,CAACzC,GAAK,sBACjB3tC,SAAU,SAAUjmE,GAChB,GAAIA,IAAW4zG,GAAK,qBAChByuD,SACG,GAAIriK,IAAW4zG,GAAK,qBAAsB,CAC7C,IAAIgvD,EAAUL,EAASn9C,UACvB+8C,EAAa,CACTz2J,KAAMoM,KAAK4gD,OAAOkqG,EAAQpmI,GAC1B7wB,MAAOmM,KAAK4gD,MAAMkqG,EAAQpmI,EAAIomI,EAAQj6E,MAAQqlE,EAAWrlE,OACzDwB,IAAKryE,KAAK4gD,OAAOkqG,EAAQnmI,GACzB83E,OAAQz8F,KAAK4gD,MAAMkqG,EAAQnmI,EAAImmI,EAAQh6E,OAASolE,EAAWplE,UAGnEgb,GAAGlZ,oBAAoB1yE,OAAQ,OAAQk0E,GACvCq2E,EAASlsE,UACT9I,EAAY8I,WAEhBogB,aAAc7C,GAAK,qBACnB8C,UAAW,SAAU36F,GACjB26F,EAAY36F,MbyDpB8mJ,iCcvJAlmF,OAuGSyiD,EAAT,SAAc5iG,EAAGC,GACbqmI,EAAoB1jC,KAAK5iG,EAAGC,IA7F5BgR,EAAMl9B,SAASM,cAAc,OAEjC,GADA+yF,GAAG4L,cAAc/hE,EAAKmmE,GAAK,gCACvBj3B,EAAOm0C,SAASlE,sBAAuB,CACvC,IAAIm2C,EAASn/D,GAAGvgF,GAAG,CACfiE,QAASssF,GAAK,iCACd9O,IAAK,CACDoQ,WAAY,OACZ0D,QAAS,OACT5C,UAAW,MACXV,aAAc,MACdkF,OAAQ,oBACR9C,aAAc,SAGtBjqE,EAAIr8B,YAAY2xJ,GAEpB,IAAIhhD,EAAU/pG,OAAOq/F,WAAa,IAE9BvB,EAAclS,GAAGvgF,GAAG,CACpByhF,IAAK,CACD18E,QAAS,UAGb46I,EAAkBp/D,GAAGvgF,GAAG,CACxBykF,QAAS,SACTxgF,QAAS,MACTw9E,IAAK,CACDyQ,YAAa,QAEjBnF,QAAS,WACL0yD,EAAoB/tJ,WAGxBkuJ,EAAar/D,GAAGvgF,GAAG,CACnBykF,QAAS,SACTxgF,QAASssF,GAAK,uBACd9O,IAAK,CACDyQ,YAAa,QAEjBnF,QAAS,WACL0yD,EAAoBvjC,qBAGxB2jC,EAAYt/D,GAAGvgF,GAAG,CAClBykF,QAAS,SACTxgF,QAASssF,GAAK,UACd9O,IAAK,CACDyQ,YAAa,QAEjBnF,QAAS,WACL0yD,EAAoBrjC,wBAG5B3pB,EAAY1kG,YAAY4xJ,GACxBltD,EAAY1kG,YAAY6xJ,GACxBntD,EAAY1kG,YAAY8xJ,GACxBz1H,EAAIr8B,YAAY0kG,GAOZ,IAHJ,IAAI2U,EAA0B,GAEtB04C,EAAmBxmF,EAAOm0C,SAAS9E,YAC9BpuH,EAAI,EAAGA,EAAIulK,EAAiBtlK,OAAQD,IACzC6sH,EAAOrmH,KAAK,CACRi1G,MAAO8pD,EAAiBvlK,GAAGS,QAAQsrF,OACnC4wB,QAAS4oD,EAAiBvlK,GAAG28G,QAC7BmQ,WAAYy4C,EAAiBvlK,GAAG8sH,aAI5CD,EAAOrmH,KAAK,CACRi1G,MAAO18B,EAAOymF,YACd7oD,QAAS,EACTmQ,WAAY,gBAIhB,IAAIo4C,EAAsB,IAAIxkC,GAAoB,CAC9CtiB,aAAc+F,EAAU,IAAM,IAC9BvF,cAAeuF,EAAU,IAAM,IAC/Bid,WAAYriD,EAAOm0C,SAASw+B,gBAAgB,GAAG3lE,OAAOhB,MACtDs2C,YAAatiD,EAAOm0C,SAASw+B,gBAAgB,GAAG3lE,OAAOf,OACvD6hC,OAAQA,EACRmU,eAAgBnU,EAAO5sH,OAAS,IAEpC+lG,GAAGkB,IAAIg+D,EAAoBtpD,aAAc,CACrCxD,UAAW,OACXC,WAAY,UAEhBxoE,EAAIr8B,YAAY0xJ,EAAoBtpD,cAMpC,IAAIjsB,EAAc,IAAIqW,GAAGgN,YAAY,CACjCjjB,OAAQ,SAAS9C,GACE,SAAXA,GACAu0C,GAAK,EAAI,GAEE,UAAXv0C,GACAu0C,EAAK,EAAG,GAEG,OAAXv0C,GACAu0C,EAAK,GAAG,GAEG,SAAXv0C,GACAu0C,EAAK,EAAG,MAKpBvrB,GAAM,CACF51G,OAAQ0+E,EAAO1+E,OACfgT,QAAU,MAAmC7D,OAA9BwmG,GAAK,yBAAyB,QAC7CnmE,IAAKA,EACLtlB,MAAO45F,EAAU,KAAO,CACpBp5B,MAAO,SAEX8I,QAAS,CAAC,KAAM,UAChBglB,aAAc,KACdxwC,SAAU,SAASo9F,GACf91E,EAAY8I,UACZysE,EAAoBzsE,UACpBuN,GAAG2M,UAAUyyD,GACbp/D,GAAG2M,UAAU0yD,GACbr/D,GAAG2M,UAAU2yD,GACK,OAAdG,EACA1mF,EAAO1W,SAAS68F,EAAoBpjC,oBAAqBojC,EAAoBnjC,kBAE7EhjD,EAAO1W,edUnBq9F,wBe3I2B73J,OAalB83J,EAAT,SAAyBC,EAAQC,EAAQ96E,EAAOC,EAAQgwB,GACpD,OAAOhV,GAAG4B,QAAQg+D,EAAQC,EAAQ3rJ,KAAK6K,IAAI+gJ,EAAe/6E,EAAQiwB,GAAU9gG,KAAK6K,IAAI+gJ,EAAe96E,EAASgwB,GAAU,IAqPlH+qD,EAAT,WACIC,EAAW1kK,MAAQ,GAAK4Y,KAAK6K,IAAI+gJ,EAAe1yH,SAAS4yH,EAAW1kK,QACpE2kK,EAAY3kK,MAAQ,GAAK4Y,KAAK6K,IAAI+gJ,EAAe1yH,SAAS6yH,EAAY3kK,QAYtE,IAAIupF,EAAIz3C,SAAS4yH,EAAW1kK,OACxBwpF,EAAI13C,SAAS6yH,EAAY3kK,QACzBupF,EAAI,GAAKA,EAAIi7E,GAAiBh7E,EAAI,GAAKA,EAAIg7E,KACvCj7E,EAAIi7E,EACJj7E,EAAIi7E,EACCh7E,EAAIg7E,IACTh7E,EAAIg7E,GAERE,EAAW1kK,MAAQ,GAAKupF,EACxBo7E,EAAY3kK,MAAQ,GAAKwpF,GAkB7B,IAdA,IAAIo7E,EAAe,CACf,CAAC,EAAG,GAAI,CAAC,EAAG,GACZ,CAAC,EAAG,GAAI,CAAC,EAAG,GACZ,CAAC,EAAG,GAAI,CAAC,EAAG,GACZ,CAAC,EAAG,GAAI,CAAC,EAAG,GACZ,CAAC,GAAI,GAAI,CAAC,EAAG,IACb,CAAC,EAAG,GAAI,CAAC,EAAG,GACZ,CAAC,EAAG,GAAI,CAAC,EAAG,GACZ,CAAC,EAAG,GAAI,CAAC,EAAG,GACZ,CAAC,MAAO,GAAI,CAAC,EAAG,QAEhBC,EAAangE,GAAG7kG,OAAO0pF,EAAGC,GAC1Bs7E,EAAe,KACfC,EAAkB,KACbrmK,EAAI,EAAGA,EAAIkmK,EAAajmK,OAAQD,KAC3B,IAANA,GAAWka,KAAKsmB,IAAI0lI,EAAalmK,GAAG,GAAKkmK,EAAalmK,GAAG,GAAKmmK,EAAW,GAAKA,EAAW,IAAME,KAC/FD,EAAeF,EAAalmK,GAC5BqmK,EAAkBnsJ,KAAKsmB,IAAI0lI,EAAalmK,GAAG,GAAKkmK,EAAalmK,GAAG,GAAKmmK,EAAW,GAAKA,EAAW,KAKpGG,EAAa75C,UADb45C,EAAkB,GAAKA,EAAkB,KAChBrwD,GAAK,aAAe,MAAQowD,EAAa,GAAK,IAAMA,EAAa,GAEjEpwD,GAAK,aAAe,KAAOmwD,EAAW,GAAK,IAAMA,EAAW,GAGjFt7E,EACAC,EACR,IAAIy7E,EAAQ17E,EACR1zC,WArDSkzB,EAAG9rC,OACZ,IAAIioI,EAAIn8F,EAAGpvD,EAAIsjB,IACF,CACT,KAAMioI,GAAKvrJ,GACP,OAAOA,EACX,KAAMA,GAAKurJ,GACP,OAAOA,GA+CXC,CAAI57E,EAAGC,GACfD,GAAK1zC,EACL2zC,GAAK3zC,EAEL2zC,GAAK,KADLD,GAAK,KAEG,MACJC,GAAI,IAAMD,EACVA,EAAI,KAEJC,EAAI,MACJD,GAAI,IAAMC,EACVA,EAAI,KAIR47E,EAAQn8I,MAAMwgE,MAAQF,EAAI,KAC1B67E,EAAQn8I,MAAMygE,OAASF,EAAI,KAC3Bkb,GAAGuJ,qBAAqBn8D,SAAS,GAAYy3C,EAAI07E,EAAV,KAAoB,SAAUz0J,GACjE+0G,EAAet8F,MAAM+sF,WAAa,OAASxlG,EAAM,QA5UrD60J,EAAe94J,EAAE84J,aACjBC,EAAiB/4J,EAAE+4J,eACnBd,EAAgBj4J,EAAEi4J,cAClBe,EAAch5J,EAAEg5J,YAChBC,EAAej5J,EAAEi5J,aACjBC,EAAiBl5J,EAAEk5J,eACnBC,EAAkBn5J,EAAEm5J,gBACpBC,EAAYp5J,EAAEo5J,UACdC,EAAWr5J,EAAEq5J,SAObC,EAAWx0J,SAASM,cAAc,OAClCm0J,EAAez0J,SAASM,cAAc,OACtCo0J,EAAgB10J,SAASM,cAAc,OACvC+yJ,EAAarzJ,SAASM,cAAc,SACpCq0J,EAAY30J,SAASM,cAAc,OACnCgzJ,EAActzJ,SAASM,cAAc,SACrCs0J,EAAa50J,SAASM,cAAc,OACxCm0J,EAAa78I,MAAMkhC,SAAW,WAC9B27G,EAAa78I,MAAMwgE,MAAQ,QAC3Bq8E,EAAa78I,MAAMygE,OAAS,OAC5Bo8E,EAAa78I,MAAM8sF,WAAa,OAChCgwD,EAAc98I,MAAMwgE,MAAQ,QAC5Bs8E,EAAc98I,MAAMygE,OAAS,OAC7Bq8E,EAAc98I,MAAM8sF,WAAa,OAEjCiwD,EAAU76C,UAAYzW,GAAK,UAC3BsxD,EAAU/8I,MAAMisC,MAAQ,OACxB8wG,EAAU/8I,MAAMwwF,SAAW,OAC3BusD,EAAU/8I,MAAM8tF,WAAa,MAC7BivD,EAAU/8I,MAAMsyF,SAAW,QAE3B0qD,EAAW96C,UAAYzW,GAAK,UAC5BuxD,EAAWh9I,MAAMisC,MAAQ,OACzB+wG,EAAWh9I,MAAMwwF,SAAW,OAC5BwsD,EAAWh9I,MAAM8tF,WAAa,MAC9BkvD,EAAWh9I,MAAMsyF,SAAW,QAE5BmpD,EAAWvgE,aAAa,oBAAqB,QAC7CwgE,EAAYxgE,aAAa,oBAAqB,QAE9CugE,EAAWhjK,KAAO,SAClBgjK,EAAWjhJ,IAAM,IACjBihJ,EAAWnhJ,IAAMihJ,EACjBE,EAAWz7I,MAAMsyF,SAAW,QAC5BmpD,EAAWz7I,MAAMwgE,MAAQ,OAEzBk7E,EAAYjjK,KAAO,SACnBijK,EAAYlhJ,IAAM,IAClBkhJ,EAAYphJ,IAAMihJ,EAClBG,EAAY17I,MAAMsyF,SAAW,QAC7BopD,EAAY17I,MAAMwgE,MAAQ,OAC1Bi7E,EAAW1kK,MAAQulK,EACnBZ,EAAY3kK,MAAQwlK,EACpBd,EAAWxvD,QAAU,WAChBrzG,KAAamiG,QACdygE,KAEJE,EAAYzvD,QAAU,WACjBrzG,KAAamiG,QACdygE,KAEJqB,EAAa5zJ,YAAY8zJ,GACzBF,EAAa5zJ,YAAYwyJ,GACzBhgE,GAAG4L,cAAcw1D,EAAcpxD,GAAK,SAAW,MAC/CqxD,EAAc7zJ,YAAY+zJ,GAC1BF,EAAc7zJ,YAAYyyJ,GAC1BjgE,GAAG4L,cAAcy1D,EAAerxD,GAAK,UAAY,MACjD,IAAIswD,EAAe3zJ,SAASM,cAAc,OAC1CqzJ,EAAa/7I,MAAM6tF,UAAY,MAC/BkuD,EAAa/7I,MAAMisC,MAAQ,OAE3B,IAAIgxG,EAAkB70J,SAASM,cAAc,OAEzCw0J,EAAe90J,SAASM,cAAc,UAC1Cu0J,EAAgBj9I,MAAMmtF,aAAe,OACrC,IAAIgwD,EAAmB/0J,SAASM,cAAc,UAC1C00J,EAAkBh1J,SAASM,cAAc,UACzC20J,EAAqBj1J,SAASM,cAAc,UAC5C40J,EAAoBl1J,SAASM,cAAc,UAC3C60J,EAAoBn1J,SAASM,cAAc,UAE/Cy0J,EAAiBp1D,YAAc0D,GAAK,eACpCyxD,EAAan1D,YAAc0D,GAAK,WAChC8xD,EAAkBx1D,YAAc0D,GAAK,gBACrC4xD,EAAmBt1D,YAAc0D,GAAK,iBACtC6xD,EAAkBv1D,YAAc0D,GAAK,gBACrC2xD,EAAgBr1D,YAAc0D,GAAK,cAEnC0xD,EAAiBn9I,MAAMotF,YAAc,MACrC8vD,EAAal9I,MAAMotF,YAAc,MACjCmwD,EAAkBv9I,MAAMotF,YAAc,MACtCiwD,EAAmBr9I,MAAM6tF,UAAY,MACrCwvD,EAAmBr9I,MAAMotF,YAAc,MACvCkwD,EAAkBt9I,MAAM6tF,UAAY,MACpCyvD,EAAkBt9I,MAAMotF,YAAc,MAEtC6vD,EAAgBh0J,YAAYk0J,GAC5BF,EAAgBh0J,YAAYi0J,GAC5BD,EAAgBh0J,YAAYs0J,GAC5BN,EAAgBh0J,YAAYm0J,GAC5BH,EAAgBh0J,YAAYo0J,GAC5BJ,EAAgBh0J,YAAYq0J,GAI5BH,EAAiBlxD,QAAU,WACvBwvD,EAAW1kK,MAAQulK,EACnBZ,EAAY3kK,MAAQwlK,EACpBf,KAEJ0B,EAAajxD,QAAU,WACnBwvD,EAAW1kK,MAAQylK,EACnBd,EAAY3kK,MAAQ0lK,EACpBjB,KAEJ+B,EAAkBtxD,QAAU,WACxBwvD,EAAW1kK,MAAQylK,EAAiB,IACpCd,EAAY3kK,MAAQ0lK,EAAkB,IACtCjB,KAEJ4B,EAAgBnxD,QAAU,WACtB,IAAI8mD,EAAUqI,EAAgB,EAAG,EAAGoB,EAAgBC,EAlBlC,IAmBlBhB,EAAW1kK,MAAQ,GAAK4Y,KAAK4gD,MAAMwiG,EAAQvyE,OAC3Ck7E,EAAY3kK,MAAQ,GAAK4Y,KAAK4gD,MAAMwiG,EAAQtyE,QAC5C+6E,KAEJ6B,EAAmBpxD,QAAU,WACzB,IAAI8mD,EAAUqI,EAAgB,EAAG,EAAGoB,EAAgBC,EAxBlC,IAyBlBhB,EAAW1kK,MAAQ,GAAK4Y,KAAK4gD,MAAMwiG,EAAQvyE,OAC3Ck7E,EAAY3kK,MAAQ,GAAK4Y,KAAK4gD,MAAMwiG,EAAQtyE,QAC5C+6E,KAEJ8B,EAAkBrxD,QAAU,WACxB,IAAI8mD,EAAUqI,EAAgB,EAAG,EAAGoB,EAAgBC,EA9BlC,IA+BlBhB,EAAW1kK,MAAQ,GAAK4Y,KAAK4gD,MAAMwiG,EAAQvyE,OAC3Ck7E,EAAY3kK,MAAQ,GAAK4Y,KAAK4gD,MAAMwiG,EAAQtyE,QAC5C+6E,KAGJ,IAAI5pD,EAAS,IAAIxB,GAAO,CACpBO,aAAa,EACbC,UAAW,CACP,CAAC,SAAUnF,GAAK,eAChB,CAAC,OAAQA,GAAK,aAAe,SAC7B,CAAC,MAAO,OACR,CAAC,MAAO,OACR,CAAC,MAAO,OACR,CAAC,QAASA,GAAK,iBAAmB,SAChC,CAAD,OAAQ,QACT,CAAC,MAAO,OACR,CAAC,MAAO,OACR,CAAC,MAAO,OACR,CAAC,uBAAwB,SAE7BvD,SAAU,SAASl0F,GACf,GAAY,WAARA,EACAynJ,EAAW1kK,MAAQ,GAAK8Y,OAAO82G,OAAOnmC,MACtCk7E,EAAY3kK,MAAQ,GAAK8Y,OAAO82G,OAAOlmC,YACpC,GAAY,UAARzsE,EAAiB,CACxB,IAAI++I,EAAUqI,EAAgBzrJ,KAAK4yB,KAAK,GAAI,EAAGi6H,EAAgBC,EAxDrD,IAyDVhB,EAAW1kK,MAAQ,GAAK4Y,KAAK4gD,MAAMwiG,EAAQvyE,OAC3Ck7E,EAAY3kK,MAAQ,GAAK4Y,KAAK4gD,MAAMwiG,EAAQtyE,YACzC,CACH,IAAIlvE,EAAQyC,EAAIzC,MAAM,KAClBisJ,EAAUpC,EAAgBnxH,WAAW14B,EAAM,IAAK04B,WAAW14B,EAAM,IAAKirJ,EAAgBC,EA7DhF,IA8DVhB,EAAW1kK,MAAQ,GAAK4Y,KAAK4gD,MAAMitG,EAAQh9E,OAC3Ck7E,EAAY3kK,MAAQ,GAAK4Y,KAAK4gD,MAAMitG,EAAQ/8E,QAEhD+6E,IACA5pD,EAAOR,SAAS,SAGxBx/D,YAAW,WAEPggE,EAAOR,SAAS,QACjB,GACH3V,GAAGkB,IAAIiV,EAAOP,aAAc,CACxB7wB,MAAO,SAEXy8E,EAAgBh0J,YAAY2oG,EAAOP,cAInC,IAAIosD,EAAiB,CAAC1gK,EAAG,IAAKmmF,EAAG,IAAKjvD,EAAG,IAAKj4B,EAAG,GAE7C0hK,EAAkB,CAClB,CAAC3gK,EAAG,IAAKmmF,EAAG,IAAKjvD,EAAG,IAAKj4B,EAAG,GAC5B,CAACe,EAAG,EAAGmmF,EAAG,EAAGjvD,EAAG,EAAGj4B,EAAG,GACtB,CAACe,EAAG,EAAGmmF,EAAG,EAAGjvD,EAAG,EAAGj4B,EAAG,IAE1B0hK,EAAgBzhK,KAAK,CACjBc,EAAGq/J,EAAar/J,EAChBmmF,EAAGk5E,EAAal5E,EAChBjvD,EAAGmoI,EAAanoI,EAChBj4B,EAAG,IAEP0hK,EAAgBzhK,KAAK,CACjBc,EAAGs/J,EAAet/J,EAClBmmF,EAAGm5E,EAAen5E,EAClBjvD,EAAGooI,EAAepoI,EAClBj4B,EAAG,IAGP,IAAI2hK,EAAe,IAAI7kD,GAAa,CAChCI,SAAUwkD,EACVx1D,SAAU,SAAS1N,GACfijE,EAAiBjjE,EACjB2hE,EAAQn8I,MAAMmyF,gBAAkB,QAAU3X,EAAQz9F,EAAI,IAAMy9F,EAAQtX,EAAI,IAAMsX,EAAQvmE,EAAI,KAAOumE,EAAQx+F,EAAI,OAIjHsgH,EAAiBl0G,SAASM,cAAc,OAC5C+yF,GAAGkB,IAAI2f,EAAgB,CACnB7J,UAAW,aACXjyB,MAAO,QACPC,OAAQ,QACRxgE,QAAS,QACTkyF,gBAAiB,UACjB1B,QAAS,OACT5C,UAAW,OACXb,UAAW,sEACXc,WAAY,QACZ4C,YAAa,eAEjB,IAAIyrD,EAAU/zJ,SAASM,cAAc,OACrC+yF,GAAGkB,IAAIw/D,EAAS,CACZ37E,MAAO,QACPC,OAAQ,QACR0xB,gBAAiB,OACjBrE,WAAY,OACZV,YAAa,OACbnhD,MAAO,OACPukD,SAAU,OACViR,WAAY,OACZjI,UAAW,SACXkB,cAAe,SACfz6F,QAAS,QACTosF,SAAU,SACVW,UAAW,gCAEf,IAAI4wD,EAAcx1J,SAASM,cAAc,OACzCk1J,EAAY59I,MAAMC,QAAU,aAC5B29I,EAAY59I,MAAM06F,cAAgB,SAClCkjD,EAAY30J,YAAYkzJ,GACxB7/C,EAAerzG,YAAY20J,GAC3B,IAAI92B,EAAOrrC,GAAG4L,cAAc80D,EAAS,IAErCr1B,EAAK9mH,MAAMC,QAAU,aACrB6mH,EAAK9mH,MAAM06F,cAAgB,SACf7xE,SAAS4yH,EAAW1kK,OACpB8xC,SAAS6yH,EAAY3kK,OAiFjC0kK,EAAWvrD,SAAW,YACO,KAArBurD,EAAW1kK,OAAgB8xC,SAAS4yH,EAAW1kK,OAAS,KACxD0kK,EAAW1kK,MAAQ,KAEvBykK,KAEJC,EAAWoC,QAAU,WACjBrC,KAEJE,EAAYxrD,SAAW,YACO,KAAtBwrD,EAAY3kK,OAAgBkzC,WAAWyxH,EAAY3kK,OAAS,KAC5D2kK,EAAY3kK,MAAQ,KAExBykK,KAEJE,EAAYmC,QAAU,WAClBrC,KAEJA,IAEAoB,EAAS3zJ,YAAYg0J,GACrB,IAAIa,EAAYriE,GAAGvgF,GAAG,CAClBg4B,OAAQ0pH,EACRjgE,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,gBAChBC,WAAY,cAGhBqxD,EAAgBtiE,GAAGvgF,GAAG,CACtBg4B,OAAQ4qH,IAEZC,EAAc90J,YAAY4zJ,GAC1BkB,EAAc90J,YAAY6zJ,GAC1BiB,EAAc90J,YAAY8yJ,GAC1B+B,EAAU70J,YAAY00J,EAAatsD,cAEnCurD,EAAS3zJ,YAAYqzG,GAErB5Q,GAAM,CACF51G,OAAQsS,SAASutE,KACjB7sE,QAAU,MAAuB7D,OAAlBwmG,GAAK,aAAa,QACjCnmE,IAAKs3H,EACLtzE,QAAS,CAAC,KAAM,UAChBxrB,SAAU,SAAUjmE,GAChB4jK,EAAWxvD,QAAU,KACrByvD,EAAYzvD,QAAU,KACtBkxD,EAAiBlxD,QAAU,KAC3BixD,EAAajxD,QAAU,KACvBsxD,EAAkBtxD,QAAU,KAC5BmxD,EAAgBnxD,QAAU,KAC1BoxD,EAAmBpxD,QAAU,KAC7BqxD,EAAkBrxD,QAAU,KAC5BwvD,EAAWvrD,SAAW,KACtBurD,EAAWoC,QAAU,KACrBnC,EAAYxrD,SAAW,KACvBwrD,EAAYmC,QAAU,KACtBjsD,EAAO1jB,UACPyvE,EAAazvE,UAEE,WAAXr2F,GAAuBgxC,SAAS4yH,EAAW1kK,QAAU,GAAK8xC,SAAS6yH,EAAY3kK,QAAU,GAAKiW,MAAM67B,SAAS4yH,EAAW1kK,SAAWiW,MAAM67B,SAAS6yH,EAAY3kK,QAC9J4lK,IAGJD,EAAU7zH,SAAS4yH,EAAW1kK,OAAQ8xC,SAAS6yH,EAAY3kK,OAAQ0mK,IAEvEnvD,aAAc,QfxQlB0vD,wBgBpHA16J,OAgFS8yH,EAAT,WAKI6nC,EAAQj6C,UAAU,EAAG,EAAGk6C,EAAW19E,MAAO09E,EAAWz9E,QACrD,IAAI09E,EAAS3uB,GAAAx3I,QAAA,GACNsL,EAAE2oD,MAAK,CACVjwD,EAAGo6I,EAAc9kC,aAEjB5mB,EAASy2B,GAAW+8C,EAAY,CAChC7pI,EAAG/wB,EAAE+wB,EACLC,EAAGhxB,EAAEgxB,EACL8sF,QAASg9C,EAAUrnK,MACnBuqH,MAAO+8C,EAAe/sD,WACtBsQ,SAAU08C,EAAahtD,WACvBoQ,OAAQ68C,EAAWjtD,WACnBnwE,KAAM8I,WAAWu0H,EAAUznK,OAC3ByqH,KAAMi9C,EAAWntD,WACjBrlD,MAAOwvC,GAAG0L,eAAe5M,UAAU4jE,GACnCvrE,SAAUtvF,EAAEsvF,WAMhBlI,EAAOlK,MAAQ7wE,KAAK2K,IAAIowE,EAAOlK,MAAO,GACtCkK,EAAOjK,OAAS9wE,KAAK2K,IAAIowE,EAAOjK,OAAQ,GACxC,IAAIi+E,EAAYjjE,GAAGgF,OAAO/V,EAAOr2D,EAAGq2D,EAAOp2D,GAAIhxB,EAAEsvF,SAAWjjF,KAAK2uD,GAAK,KAClEqgG,EAAYljE,GAAGgF,OAAO/V,EAAOlK,MAAOkK,EAAOjK,QAASn9E,EAAEsvF,SAAWjjF,KAAK2uD,GAAK,KAC3EoxD,EAAUpsH,EAAE+wB,EAAIqqI,EAAUrqI,EAAIsqI,EAAUtqI,EAAI,EAC5Cs7F,EAAUrsH,EAAEgxB,EAAIoqI,EAAUpqI,EAAIqqI,EAAUrqI,EAAI,EAG5CsqI,EAAYnjE,GAAG4B,QAAQ3S,EAAOlK,MAAOkK,EAAOjK,OAAQD,EAD1C,IAC2DC,EAD3D,KAEd9hB,EAAQhvD,KAAK6K,IAAI,EAAGokJ,EAAUp+E,MAAQkK,EAAOlK,OAC7C7hB,EAAQhvD,KAAK6K,IAAI,EAAGmkD,EAAQhvD,KAAKwmB,IAAI,EAAG0oI,IAIxCp5C,EAAUnhB,OAEN3lC,GAAS,EACT8mD,EAAUlhB,uBAAwB,GAElCkhB,EAAUlhB,uBAAwB,EAClCkhB,EAAUjhB,sBAAyB7lC,GAAS,EAAI,MAAQ,UAG5D8mD,EAAUzB,UAAU,EAAG,EAAG86C,EAAct+E,MAAOs+E,EAAcr+E,QAC7DglC,EAAUhhB,UAAUjkB,EAAQ,EAAGC,EAAS,GACxCglC,EAAU9mD,MAAMA,EAAOA,GACvB8mD,EAAUhlB,OAAOn9F,EAAEsvF,UACnB6yB,EAAU9hB,UAAU8sB,EAASntH,EAAE2hH,YAAYzjC,QAASkuC,GAAUC,GAC9DlK,EAAU9hB,UAAUu6D,GAAaxuC,GAAUC,GAC3ClK,EAAU/gB,UAIVq6D,EAAUz6D,OAEVy6D,EAAU7pE,UAAY,mBACtB6pE,EAAU5pE,SAAS,EAAG,EAAG3U,EAAOC,GAG5Bs+E,EAAUz6D,OAEVy6D,EAAUt6D,UAAUjkB,EAAQ,EAAGC,EAAS,GACxCs+E,EAAUpgG,MAAMA,EAAOA,GACvBogG,EAAUt+D,OAAOn9F,EAAEsvF,UAEnBmsE,EAAUx6D,uBAAwB,EAGlC,IAAIisB,EAAa,EAAI7xD,EACrBogG,EAAUhgD,YAAc,GACxBggD,EAAUp7D,UAAUmmB,GAAc4F,EAAUc,GAAab,EAAUa,EAAY0tC,EAAW19E,MAAqB,EAAbgwC,EAAgB0tC,EAAWz9E,OAAsB,EAAb+vC,GACtIuuC,EAAUhgD,YAAc,EAGxBggD,EAAU34D,yBAA2B,kBACrC24D,EAAUp7D,UAAUmmB,GAAc4F,GAAUC,EAASuuC,EAAW19E,MAAO09E,EAAWz9E,QAElFs+E,EAAUr6D,UAKN/lC,GAAS,EACTogG,EAAUx6D,uBAAwB,GAElCw6D,EAAUx6D,uBAAwB,EAClCw6D,EAAUv6D,sBAAyB7lC,GAAS,EAAI,MAAQ,UAI5DogG,EAAUz6D,OACVy6D,EAAUt6D,UAAUjkB,EAAQ,EAAGC,EAAS,GACxCs+E,EAAUpgG,MAAMA,EAAOA,GACvBogG,EAAUt+D,OAAOn9F,EAAEsvF,UACnB,IAAK,IAAIn9F,EAAI,EAAGA,EAAI6N,EAAE2hH,WAAYxvH,IAC1Bg7H,EAASh7H,GAAG28G,QAAU,IACtB2sD,EAAUhgD,YAAc0R,EAASh7H,GAAG28G,QACpC2sD,EAAU34D,yBAA2BqqB,EAASh7H,GAAG8sH,WACjDw8C,EAAUp7D,UAAU8sB,EAASh7H,GAAG+rF,QAASkuC,GAAUC,IAG3DovC,EAAUr6D,UAGVq6D,EAAUhgD,YAAc0R,EAASntH,EAAE2hH,YAAY7S,QAC/C2sD,EAAU34D,yBAA2BqqB,EAASntH,EAAE2hH,YAAY1C,WAC5Dw8C,EAAUp7D,UAAUq7D,EAAc,EAAG,GAGrCD,EAAUz6D,OACVy6D,EAAUt6D,UAAUjkB,EAAQ,EAAGC,EAAS,GACxCs+E,EAAUpgG,MAAMA,EAAOA,GACvBogG,EAAUt+D,OAAOn9F,EAAEsvF,UACnB,IAAK,IAAI1N,EAAI5hF,EAAE2hH,WAAa,EAAG//B,EAAIurC,EAAS/6H,OAAQwvF,IAC5CurC,EAASvrC,GAAGktB,QAAU,IACtB2sD,EAAUhgD,YAAc0R,EAASvrC,GAAGktB,QACpC2sD,EAAU34D,yBAA2BqqB,EAASvrC,GAAGq9B,WACjDw8C,EAAUp7D,UAAU8sB,EAASvrC,GAAG1D,QAASkuC,GAAUC,IAG3DovC,EAAUr6D,UAIdq6D,EAAUr6D,UAKVu6D,EAAW36D,OACX26D,EAAW/pE,UAAYgqE,EACvBD,EAAW9pE,SAAS,EAAG,EAAG2pE,EAAct+E,MAAOs+E,EAAcr+E,QAC7Dw+E,EAAWt7D,UAAUw7D,EAAc,EAAG,GACtCF,EAAWv6D,UAGXu6D,EAAW36D,OACX26D,EAAW74D,yBAA2B,aACtC64D,EAAW9/C,YAAc,OACzB8/C,EAAWngD,UAAY,EAGvBmgD,EAAWh+C,WACPtxG,KAAK4gD,MAAMiwB,EAAQ,EAAKkK,EAAOlK,MAAQ,EAAK7hB,GAC5ChvD,KAAK4gD,MAAMkwB,EAAS,EAAKiK,EAAOjK,OAAS,EAAK9hB,GAC9ChvD,KAAK4gD,MAAMm6B,EAAOlK,MAAQ7hB,GAC1BhvD,KAAK4gD,MAAMm6B,EAAOjK,OAAS9hB,IAE/BsgG,EAAWv6D,WAINuyB,EAAT,SAAc5iG,EAAGC,GACb,IAAImrF,EAAUhkB,GAAGgF,OAAOpsE,EAAGC,GAAIhxB,EAAEsvF,SAAWjjF,KAAK2uD,GAAK,KACtDh7D,EAAE+wB,GAAKorF,EAAQprF,EAAIsqC,EACnBr7D,EAAEgxB,GAAKmrF,EAAQnrF,EAAIqqC,EACnBy3D,KA+FKgpC,EAAT,SAAuB5/J,GACnBq/J,EAAUlvJ,KAAK6K,IAAI,EAAG7K,KAAK2K,KAAI,EAAIukJ,EAAUr/J,IAC7C42H,IACAipC,EAAUnjB,UAAYojB,EAAQ,GAC9BC,EAAWrjB,UAAYojB,GAAQ,IAE1BA,EAAT,SAAiB9/J,GACb,OAAOq/J,IAAYlvJ,KAAK6K,IAAI,EAAG7K,KAAK2K,KAAI,EAAIukJ,EAAUr/J,KA0NjDggK,EAAT,WACI3vJ,OAAOw+F,SAAS,EAAG,IAjiBnB/oE,EAAMm2D,GAAGvgF,GAAG,IAEZukJ,EAAe5vJ,OAAOq/F,WAAa,IACnCwwD,EAAgB7vJ,OAAOs/F,YAAc,IASrC3uB,EAAQi/E,EAAe,IAAM,IAC7Bh/E,EAASg/E,EAAgBC,EAAgB,IAAM,IAAQA,EAAgB,IAAM,IAC7E/gG,EAAQ,EAER8xD,EAAWntH,EAAEqlH,SAAS+H,gBACtBwtC,EAAaziE,GAAGja,OAAOl+E,EAAEqlH,SAAShF,WAAYrgH,EAAEqlH,SAAS/E,aACzDq6C,EAAUC,EAAWz8E,WAAW,MAChCu9E,EAAevjE,GAAGja,OAAOhB,EAAOC,GAChCglC,EAAYu5C,EAAav9E,WAAW,MACpC09E,EAAe1jE,GAAGja,OAAOhB,EAAOC,GAChCs+E,EAAYI,EAAa19E,WAAW,MACpCq9E,EAAgBrjE,GAAGja,OAAOhB,EAAOC,GACjCw+E,EAAaH,EAAcr9E,WAAW,MAC1Cga,GAAGkB,IAAImiE,EAAe,CAClB7+I,QAAS,UAEb,IAAIq8F,EAAiB7gB,GAAGvgF,GAAG,CACvBg4B,OAAQ5N,EACRq3D,IAAK,CACDz7C,SAAU,WACVs/B,MAAOA,EAAQ,KACfstB,WAAY,QACZyC,OAAQ,OACRG,YAAa,aACbivD,YAAa,QAEjB13D,QAAS,WACLm2D,EAAUrjE,WAGlBU,GAAGvgF,GAAG,CACFg4B,OAAQopE,EACR3f,IAAK,CACDz7C,SAAU,WACV39C,KAAM,IACNy+E,IAAK,IACLx+E,MAAO,IACP4oG,OAAQ,IACRY,UAAW,sEACXkG,cAAe,UAGvBoJ,EAAerzG,YAAY61J,GAC3B,IAAII,EAAiBD,EAAWjrB,cAAcv4C,GAAGsJ,oBAAoB,GAAI,UACrE+kB,EAAcruB,GAAGja,OAAO,EAAG,GAEjBsoC,EAAYroC,WAAW,MAC7B0T,SAAS,EAAG,EAAG,EAAG,GAwK1B,IAAIyqE,EAAyB,IAAInkE,GAAGiN,gBAAgB,CAChD5yG,OAAQgpK,EACRxrE,SAAU,EACVnG,UAAW,SAAS1xF,GACD,gBAAXA,EAAEhD,MAA0BgD,EAAE8tF,SAC9B9tF,EAAEguF,sBACFwtC,GAAMx7H,EAAEsvF,IAAKtvF,EAAEuvF,MAGvBqC,QAAS,SAAS5xF,GACd2jK,GAAe3jK,EAAE6rF,WAInB0kB,EAAe,SAACj7D,GAClBA,EAAMozC,kBAEVsX,GAAGhqD,iBAAiBqtH,EAAe,QAAS9yD,GAI5C,IAAIjW,EAAO0F,GAAGvgF,GAAG,CACbg4B,OAAQ5N,EACRq3D,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,gBAChBC,WAAY,SACZmB,UAAW,UAGfgyD,EAAgBpkE,GAAGvgF,GAAG,CACtBg4B,OAAQ5N,EACRq3D,IAAK8iE,EAAe,GAAK,CACrBx/I,QAAS,OACTysF,WAAY,SACZD,eAAgB,mBAGpBzW,EAAOyF,GAAGvgF,GAAG,CACbg4B,OAAQ2sH,EACRljE,IAAK,CACD18E,QAAS,OACTysF,WAAY,SACZmB,UAAW,SAGf5X,EAAOwF,GAAGvgF,GAAG,CACbg4B,OAAQ2sH,EACRljE,IAAK,CACD18E,QAAS,OACTysF,WAAY,SACZD,eAAgB,gBAChBoB,UAAW,MACXrtB,MAAOi/E,EAAe,GAAK,WAQ/B/B,EAAkB,CAClB,CAAC3gK,EAAG,EAAGmmF,EAAG,EAAGjvD,EAAG,EAAGj4B,EAAG,GACtB,CAACe,EAAG,IAAKmmF,EAAG,IAAKjvD,EAAG,IAAKj4B,EAAG,IAEhC0hK,EAAgBnmF,QAAQ,CACpBx6E,EAAGuG,EAAE+4J,eAAet/J,EACpBmmF,EAAG5/E,EAAE+4J,eAAen5E,EACpBjvD,EAAG3wB,EAAE+4J,eAAepoI,EACpBj4B,EAAG,IAEP0hK,EAAgBnmF,QAAQ,CACpBx6E,EAAGuG,EAAE2oD,MAAMlvD,EACXmmF,EAAG5/E,EAAE2oD,MAAMi3B,EACXjvD,EAAG3wB,EAAE2oD,MAAMh4B,EACXj4B,EAAG,IAGP,IAAI2hK,EAAe,IAAI7kD,GAAa,CAChCI,SAAUwkD,EACVrkD,aAAc,EACdnR,SAAU,SAAS1N,GACfl3F,EAAE2oD,MAAQuuC,EACV47B,OAGRunC,EAAatsD,aAAa9R,MAAQkM,GAAK,cACvCkyD,EAAatsD,aAAarxF,MAAM8tF,WAAa,OAC7C/X,EAAK9sF,YAAY00J,EAAatsD,cAG9B,IAyEIyuD,EACArB,EACAsB,EA3EAlB,EAAU,EAWVmB,EAAcvkE,GAAGvgF,GAAG,CACpBg4B,OAAQ6iD,EACR4G,IAAK,KAKL0iE,EAAY5jE,GAAGvgF,GAAG,CAClBg4B,OAAQ8sH,EACR7gJ,QAAU,yBAAsCla,OAAdmlG,EAAA0xB,IAAc,MAChDv8B,MAAOkM,GAAK,WACZ9L,QAAS,SACTsI,QAAS,WACLm3D,EAAc,IAElBziE,IAAK,CACD8kB,WAAY,UAGhB89C,EAAa9jE,GAAGvgF,GAAG,CACnBg4B,OAAQ8sH,EACR7gJ,QAAU,yBAAuCla,OAAfmlG,EAAA2xB,IAAe,MACjDx8B,MAAOkM,GAAK,YACZ9L,QAAS,SACTsI,QAAS,WACLm3D,GAAc,IAElBziE,IAAK,CACD8kB,WAAY,OACZ3T,WAAY,SAOhB0wD,EAAY/iE,GAAGvgF,GAAG,CAClBg4B,OAAQ8iD,EACR2J,QAAS,QACTJ,MAAOkM,GAAK,aACZhhB,OAAQ,CACJhyF,KAAM,SACN+hB,IAAK,EACLF,IAAK,IACLvjB,MAAOuM,EAAE69B,MAEbw7D,IAAK,CACDnc,MAAO,QAEX0nB,SAAU,WACNs2D,EAAUznK,MAAQ,GAAK4Y,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,IAAOquB,SAAS21H,EAAUznK,SACtEq/H,OAGJ6pC,EAAsB,IAAIxkE,GAAGiN,gBAAgB,CAC7C5yG,OAAQ0oK,EACRnxE,QAAS,SAAS5xF,GACd+iK,EAAUznK,MAAQ,GAAK4Y,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,IAAMquB,SAAS21H,EAAUznK,OAAS0E,EAAE6rF,SAChF8uC,OAQJ0pC,EAAcrkE,GAAGvgF,GAAG,CAChByhF,IAAK,CACD6T,SAAU,OACV1C,WAAY,UAGpB2wD,EAAa,IAAIruD,GAAO,CACpBO,aAAa,EACbC,UAAW,CACP,CAAC,aAAc,cACf,CAAC,QAAS,SACV,CAAC,YAAa,aACd,CAAC,UAAW,WACZ,CAAC,UAAW,YAEhBE,UAAWxtG,EAAEk+G,KACbtZ,SAAU,SAASl0F,GACfoiH,OAIR0pC,EAAY72J,YAAYw1J,EAAWptD,cACnCrb,EAAK/sF,YAAY62J,GAEjBC,EAAsB,IAAItkE,GAAGiN,gBAAgB,CACzC5yG,OAAQ2oK,EAAWptD,aACnBhkB,QAAS,SAAS5xF,GACdgjK,EAAWtH,cAAc17J,EAAE6rF,WASvC,IAAI+2E,EAAiB,IAAI9sD,GAAe,CACpCX,UAAW,CACP,CACIj7G,GAAI,OACJ4pG,MAAOkM,GAAK,aACZyF,MAAO9G,EAAAgyB,KAEX,CACIzmI,GAAI,SACJ4pG,MAAOkM,GAAK,eACZyF,MAAO9G,EAAAiyB,KAEX,CACI1mI,GAAI,QACJ4pG,MAAOkM,GAAK,cACZyF,MAAO9G,EAAAkyB,MAGf5qB,OAAQpuG,EAAEg+G,MACVpZ,SAAU,SAASvyG,GACfygI,OAGRngC,EAAKhtF,YAAYo1J,EAAehtD,cAEhC,IAAIitD,EAAe,IAAIvtD,GAAY,CAC/BG,MAAO9G,EAAAmyB,IACPh9B,MAAOkM,GAAK,eACZqF,UAAWxtG,EAAEs+G,SACb1Z,SAAU,SAASj0E,GACfmiG,OAGRngC,EAAKhtF,YAAYq1J,EAAajtD,cAE9B,IAAIktD,EAAa,IAAIxtD,GAAY,CAC7BG,MAAO9G,EAAAoyB,IACPj9B,MAAOkM,GAAK,aACZqF,UAAWxtG,EAAEo+G,OACbxZ,SAAU,SAASj0E,GACfmiG,OAGRngC,EAAKhtF,YAAYs1J,EAAWltD,cAI5B,IAAI+kC,EAAgB,IAAIxjC,GAAS,CAC7BhhC,MAAO65B,GAAK,WACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,EACLw2F,UAAWxtG,EAAE8uG,QACb/Z,WAAY,IACZ2b,WAAY,IAAO,GACnB9L,SAAU,SAASl0E,GACfoiG,KAEJ3iB,WAAY,SAASz/E,GACjB,OAAOrkB,KAAK4gD,MAAU,IAAJv8B,MAG1BiiE,EAAKhtF,YAAYmtI,EAAc/kC,cAI/B,IAAI+sD,EAAY3iE,GAAGvgF,GAAG,CAClBg4B,OAAQ5N,EACRq6D,QAAS,WACTlV,OAAQ,CACJy1E,YAAaz0D,GAAK,oBAClB,oBAAqB,QAEzB9O,IAAK,CACDmlB,WAAY,SACZzV,SAAU,OACV7rB,MAAO,OACPC,OAAQ,OACR2iD,OAAQ,WACRv1B,UAAW,QAEf3F,SAAU,WACNkuB,OAGRgoC,EAAU3sH,iBAAiB,QAAS2kF,GACpCxkF,YAAW,WACPwsH,EAAUrjE,QACVqjE,EAAUxsD,YAGd,IAAIxsB,EAAc,IAAIqW,GAAGgN,YAAY,CACjCjjB,OAAQ,SAAS9C,EAAQjnF,EAAG6xG,GACpB7R,GAAG6M,gBAAe,KAGP,SAAX5lB,GACAu0C,GAAK,EAAI,GAEE,UAAXv0C,GACAu0C,EAAK,EAAG,GAEG,OAAXv0C,GACAu0C,EAAK,GAAG,GAEG,SAAXv0C,GACAu0C,EAAK,EAAG,OASpBpnH,OAAO4hC,iBAAiB,SAAU+tH,GAGlC9zD,GAAM,CACF51G,OAAQsS,SAASutE,KACjB7sE,QAAU,MAAwB7D,OAAnBwmG,GAAK,cAAc,QAClCnmE,IAAKA,EACLgkD,QAAS,CAAC,KAAM,UAChBtpE,MAAOy/I,EAAe,GAAK,CACvBj/E,MAAO,SAEX1iB,SAAU,SAAS9pD,GACfnE,OAAO0yE,oBAAoB,SAAUi9E,GACrCI,EAAuB1xE,UACvB+xE,EAAoB/xE,UACpB6xE,EAAoB7xE,UACpBuN,GAAGlZ,oBAAoBu8E,EAAe,QAAS9yD,GAC/C5mB,EAAY8I,UACA,OAARl6E,GACA1Q,EAAEo5J,UAAU,CACRroI,EAAG/wB,EAAE+wB,EACLC,EAAGhxB,EAAEgxB,EACL8sF,QAASg9C,EAAUrnK,MACnBuqH,MAAO+8C,EAAe/sD,WACtBsQ,SAAU08C,EAAahtD,WACvBoQ,OAAQ68C,EAAWjtD,WACnBrlD,MAAO3oD,EAAE2oD,MACT9qB,KAAMq9H,EAAUznK,MAChByqH,KAAMi9C,EAAWntD,WACjBc,QAASgkC,EAAc9kC,cAInC5D,WAAW,EACXY,aAAc,KACd3B,kBAAkB,EAClB4B,UAAW,SAAU36F,GACLA,KAIpBwiH,KhBzeA+pC,+BiBnIkC78J,OAK9B88J,EA+BKC,EAAT,SAA0B//E,EAAWC,GACjC,IAAM82C,EAAM57B,GAAG4B,QAAQ/c,EAAGC,EAAGj9E,EAAEg9J,QAASh9J,EAAEg9J,SAEtCjpC,EAAI72C,MAAQF,GACZ8/E,EAAa74D,UAAa,4BAAkCtiG,OAAPq7E,EAAE,OAAmBr7E,OAAds7E,EAAE,cAAUt7E,OAA6B0K,KAA3B4gD,MAAK8mE,EAAM72C,OAAS,OAAKv7E,OAAyB0K,KAAvB4gD,MAAK8mE,EAAM52C,SAChH2/E,EAAa7gE,MAAQkM,GAAK,sBAE1B20D,EAAa74D,UAAa,GAAStiG,OAAPq7E,EAAE,OAAOr7E,OAAFs7E,GACnC6/E,EAAa7gE,MAAQ,KA3CvBj6D,EAAMm2D,GAAGvgF,GAAG,IAEZ0+F,EAAU/pG,OAAOq/F,WAAa,KAAOr/F,OAAOs/F,YAAc,IAC1DnvF,EAAQ45F,EAAU,GAAK,CAAEp5B,MAAO,SAEhC45E,EAAW,IAAIn/C,GAAS,CAC1Bz6B,MAAOo5B,EAAU,IAAM,IACvBn5B,OAAQm5B,EAAU,IAAM,IACxBp4B,OAAQl+E,EAAE4tG,MAAM1vB,OAChB66B,WAAW,EACXnU,SAAU,SAAS1nB,EAAOC,GACjB2/E,GAGLC,EAAiB7/E,EAAOC,MAGhCgb,GAAGkB,IAAIy9D,EAASxhD,QAAS,CACrB9K,WAAY,QACZ0qB,UAAW,iBACXC,aAAc,mBAElB2hC,EAASxhD,QAAQrZ,MAAQkM,GAAK,qBAC9BnmE,EAAIr8B,YAAYmxJ,EAASxhD,SAGzBwnD,EAAe3kE,GAAGvgF,GAAG,CACjBg4B,OAAQ5N,EACRq3D,IAAK,CACDkR,UAAW,OACX2L,UAAW,SACXvtD,MAAO,OACP6gD,WAAY,UAcpBuzD,EAAiB/8J,EAAE4tG,MAAM1wB,MAAOl9E,EAAE4tG,MAAMzwB,QAGxC,IAmBI8/E,EAnBAC,GAAY,EAoBhB,GAAqB,QAAjBl9J,EAAE4tG,MAAMz4G,KAAgB,CACxB,IAAMgoK,EAAY,CACd1zD,WAAY,sBACZ0D,QAAS,OACT5C,UAAW,MACXV,aAAc,MACdkF,OAAQ,oBACR9C,aAAc,OAElB,GAAIjsG,EAAE4tG,MAAMoR,QAUR,GATAi+C,EAAkB,IAAI3wD,GAAS,CAC3B7tE,KAAMy+H,EACN5uF,MAAO65B,GAAK,kBACZ3tC,SAAU,SAAS7pC,GACfusI,EAAYvsI,KAGpBqR,EAAIr8B,YAAYs3J,EAAgBlvD,cAE5B/tG,EAAE4tG,MAAMgsB,WAAY,CACpB,IAAM09B,EAASn/D,GAAGvgF,GAAG,CACjBiE,QAASssF,GAAK,8BACd9O,IAAK8jE,IAET7F,EAAO3xJ,YAAYwyF,GAAGvgF,GAAG,CACrBykF,QAAS,IACTxgF,QAAS,UACT8oF,QAAS,YA9CzB,SAAsBy4D,GAYlB,IAXA,IAAIC,EAAa,GACbC,EAAa,CACbviC,KAAQ,yCACRT,SAAY,uDACZh+E,MAAS,+CACTi+E,WAAc,mCACd,eAAgB,+BAChB,eAAgB,+BAChB,aAAc,gCACd,mBAAoB,6DAEfpoI,EAAI,EAAGA,EAAIirK,EAAchrK,OAAQD,IACtCkrK,EAAW1kK,KAAK,KAAO2kK,EAAWF,EAAcjrK,KAEpDinG,MAAMikE,EAAW9mJ,KAAK,OAgCNgnJ,CAAav9J,EAAE4tG,MAAMgsB,gBAG7B53F,EAAIr8B,YAAY2xJ,QAEjB,CACH,IAAMkG,EAASrlE,GAAGvgF,GAAG,CACjBiE,QAASssF,GAAK,0BACd9O,IAAK8jE,IAETn7H,EAAIr8B,YAAY63J,IAwCxBp1D,GAAM,CACF51G,OAAQwN,EAAExN,OACVgT,QAAU,MAA0B7D,OAArBwmG,GAAK,gBAAgB,QACpCnmE,IAAKA,EACLtlB,MAAAA,EACAspE,QAAS,CAACmiB,GAAK,uBAAwBA,GAAK,uBAAwB,UACpE3tC,SA1CJ,SAAkBjmE,GACd,IAAMyjH,EAAe8+C,EAASl9C,kBACxB6jD,EAAW3G,EAASn9C,UAC1Bm9C,EAASlsE,UACLqyE,GACAA,EAAgBryE,UAGhBr2F,IAAW4zG,GAAK,uBAChBnoG,EAAEw6D,SAAS,CACPrlE,KAAM,WACNy4G,MAAOoK,IAGJzjH,IAAW4zG,GAAK,uBACF,QAAjBnoG,EAAE4tG,MAAMz4G,MACJ+nK,IACAl9J,EAAE4tG,MAAMoR,OAAS,MAErBh/G,EAAEw6D,SAAS,CACPrlE,KAAM,eACNy4G,MAAO5tG,EAAE4tG,MACT8vD,QAASD,KAEW,UAAjBz9J,EAAE4tG,MAAMz4G,MACf6K,EAAEw6D,SAAS,CACPrlE,KAAM,WACNy4G,MAAOoK,IAIfh4G,EAAEw6D,SAAS,CACPrlE,KAAM,YAWdi1G,UAAW,cjBvBfuzD,gBAAA9mB,GACA+mB,qBXzFwBv4C,EAAoBmyB,EAAUD,EAA4BmH,GAClF,IAAKA,EACD,MAAM,IAAInsJ,MAAM,qBAGpB,IAAIsrK,EAAa/4J,SAASM,cAAc,SACxCy4J,EAAW1oK,KAAO,OAClB0oK,EAAWpqK,MAAQ00G,GAAK,yBACxB,IAAI21D,EAAmB3lE,GAAGvgF,GAAG,CACzBykF,QAAS,WACTlV,OAAQ,CACJ42E,KAAM,GAEV1kE,IAAK,CACDnc,MAAO,OACP27D,SAAU,UAIdmlB,EAAal5J,SAASM,cAAc,OACxC44J,EAAWv5D,YAAc0D,GAAK,eAAiB,IAC/C,IAAI81D,EAAmB9lE,GAAGvgF,GAAG,CACzBiE,QAASssF,GAAK,kBAAoB,IAClC9O,IAAK,CACDkR,UAAW,UAIf2zD,EAAMp5J,SAASM,cAAc,OACjC84J,EAAIj6D,UAAa,kFAA2GtiG,OAA1BwmG,GAAK,cAAc,SAA4BxmG,OAArBwmG,GAAK,iBAEjI,IAAMg2D,EAAY,IAAI/zB,GAAGse,UAAU,CAC/BvxJ,KAAM,WACNsnC,KAAM,OACN5N,MAAO,CACH,CAAEy9C,MAAO,MAAO76E,MAAO,QACvB,CAAE66E,MAAO,MAAO76E,MAAO,QAE3B2jJ,aAAa,IAEjBj/C,GAAGkB,IAAI8kE,EAAUpwD,aAAc,CAC3BlE,aAAc,SAIlB,MAAIu0D,EAASt5J,SAASM,cAAc,OAChCi5J,EAAWv5J,SAASM,cAAc,OACtCi5J,EAAS35D,UAAY,YACrB25D,EAAS55D,YAAc0D,GAAK,sBAC5Bi2D,EAAOtsF,OACHusF,EACAF,EAAUpwD,aACViwD,EACAH,EACAI,EACAH,EACAI,GAEJ9zB,GAAG4M,MAAM,CACLxkJ,OAAQglJ,EACRhyI,QAAU,MAA0B7D,OAArBwmG,GAAK,gBAAgB,QACpChzG,KAAM,SACN6sC,IAAKo8H,EACLp4E,QAAS,CAACmiB,GAAK,iBAAkB,UACjC6C,aAAc7C,GAAK,iBACnByC,UAAW,CAACzC,GAAK,kBACjBiC,UAAWjC,GAAK,iBAChB3tC,iCAAU,SAAQ0sC,EAAQx2F,OAGRnc,uEAFVmc,IAAQy3F,GAAK,kBAA4B,QAARz3F,GAAyB,OAARA,EAAY,0CAErC+tI,GACjBp5B,EAAS9C,kBAAkB,GAC3Bs7C,EAAWpqK,MACXqqK,EAAiBrqK,MACjB0qK,EAAUnwD,WACV0wC,UALEnqJ,EAAMizG,EAAAj/F,KAQZ6hI,GAAG4M,MAAM,CACLxkJ,OAAQglJ,EACRriJ,KAAM,KACNqQ,QAAU,OAAwC7D,OAAlCwmG,GAAK,kBAAkB,aAAmHxmG,OAAxGwmG,GAAK,iBAAiB,sFAAgIxmG,OAA9CpN,EAAO+pK,WAAW,8BAA8C38J,OAAlBpN,EAAO+pK,WAAW,gBAC1Nt4E,QAAS,CAAC,QAEduxD,EAAajuI,wDAGb8gI,GAAG4M,MAAM,CACLxkJ,OAAQglJ,EACRriJ,KAAM,QACNqQ,QAAS2iG,GAAK,iBACdniB,QAAS,CAAC,gHWC9Bu4E,gBkBlJmBv+J,OA2DVu6D,EAAT,WACIikG,EAAQv6D,UAAY53F,KAAK4gD,MAAc,IAARoO,GAAe,IAC9CojG,EAAQx6D,UAAa53F,KAAK4gD,MAAMyzC,GAAY,IAG3CwW,EAAOx6F,MAAM6jF,UAAY,UAAYG,EAAW,OAE7CwW,EAAQx6F,MAAMgtF,UADdhJ,EAAW,IAAO,EACQ,qEAEA,IAnE9B1+D,EAAMm2D,GAAGvgF,GAAG,CACZyhF,IAAK,CACD+b,OAAQ,UAGZuP,GAAY,EACZtpD,EAAQr7D,EAAEq7D,MACVqlC,EAAW1gG,EAAE0gG,SAEbjO,EAAO0F,GAAGvgF,GAAG,CACbyhF,IAAK,CACDwQ,aAAc,OACdltF,QAAS,UAGb+1E,EAAOyF,GAAGvgF,GAAG,CACbyhF,IAAK,CACD18E,QAAS,OACTktF,aAAc,UAGlBlX,EAAOwF,GAAGvgF,GAAG,CACbyhF,IAAK,CACD18E,QAAS,UAGjBqlB,EAAI8vC,OAAO2gB,EAAMC,EAAMC,GAGvB,IAAI6rE,EAAUrmE,GAAGvgF,GAAG,CAChByhF,IAAK,CACDnc,MAAO,OACP+zB,WAAY,UAGpBxe,EAAK9sF,YAAY64J,GAEjB,IAAItnD,EAAU,IAAIC,MAClBD,EAAQhyG,IAAM4hG,EAAA8P,IACdze,GAAGkB,IAAI6d,EAAS,CACZE,cAAe,SACfl6B,MAAO,OACPC,OAAQ,OACR2sB,YAAa,MACbmC,aAAc,OACdxC,WAAY,kBACZwH,WAAY,SAEhBxe,EAAK9sF,YAAYuxG,GAEjB,IAAIunD,EAAUtmE,GAAGvgF,GAAG,CAChByhF,IAAK,CACD4X,WAAY,UAGpBxe,EAAK9sF,YAAY84J,GAejBlkG,IAGA,IAAImkG,EAAcvmE,GAAGvgF,GAAG,CACpBykF,QAAS,SACTxgF,QAASssF,GAAK,cACdxD,QAAS3kG,EAAE2+J,UAEfxmE,GAAGqM,gBAAgBk6D,GAEnB,IAAIE,EAAYzmE,GAAGvgF,GAAG,CAClBykF,QAAS,SACTxgF,QAASssF,GAAK,YACd9O,IAAK,CACDmR,WAAY,QAEhB7F,QAAS3kG,EAAE6+J,QAEf1mE,GAAGqM,gBAAgBo6D,GACnBlsE,EAAK5gB,OAAO4sF,EAAaE,GAEzB,IAAIE,EAAmB3mE,GAAGvgF,GAAG,CACzBykF,QAAS,SACTxgF,QAAS,yBAA2BirF,EAAA8xB,IAAY,mDAChDj0B,QAAS,WACL3kG,EAAE++J,eAAc,IAAK,MAG7B5mE,GAAGqM,gBAAgBs6D,GAEnB,IAAIE,EAAmB7mE,GAAGvgF,GAAG,CACzBykF,QAAS,SACTxgF,QAAS,KACTw9E,IAAK,CACDmR,WAAY,QAEhB7F,QAAS,WACL3kG,EAAE++J,cAAc,MAGxB5mE,GAAGqM,gBAAgBw6D,GAEnB,IAAIC,EAAoB9mE,GAAGvgF,GAAG,CAC1BykF,QAAS,SACTxgF,QAAS,yBAA2BirF,EAAA8xB,IAAY,mBAChDv/B,IAAK,CACDmR,WAAY,QAEhB7F,QAAS,WACL3kG,EAAE++J,cAAc,IAAI,MAG5B5mE,GAAGqM,gBAAgBy6D,GACnBtsE,EAAK7gB,OAAOgtF,EAAkBE,EAAkBC,GAKhD3pK,KAAKy4G,WAAa,WACd,OAAO/rE,GAEX1sC,KAAKo4J,aAAe,SAASwR,GACzBv6C,IAAcu6C,EACdl9H,EAAItlB,MAAMC,QAAUgoG,EAAY,QAAU,OACtCA,GACApqD,KAGRjlE,KAAKilE,OAAS,SAAS4kG,EAAQljD,GAC3B5gD,EAAQ8jG,EACRz+D,EAAWub,EACP0I,GACApqD,MlBIR6kG,gBmBxJmBp/J,GACnB,IAAIgiC,EAAMm2D,GAAGvgF,GAAG,CACZyhF,IAAK,CACD+b,OAAQ,UAGZuP,GAAY,EAEZ06C,EAAWlnE,GAAGvgF,GAAG,CACjBg4B,OAAQ5N,EACRq3D,IAAK,CACDwQ,aAAc,UAIlBipC,EAAgB,IAAIxjC,GAAS,CAC7BhhC,MAAO65B,GAAK,WACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,EACLw2F,UAAW,EACX5I,SAAU,SAAUl0F,KAEpBy/F,WAAY,SAASz/E,GACjB,OAAOrkB,KAAK4gD,MAAU,IAAJv8B,MAG1BsR,EAAIr8B,YAAYmtI,EAAc/kC,cAE9B,IAAIuxD,EAAkB,IAAIhwD,GAAS,CAC/BhhC,MAAO65B,GAAK,oBACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,IACLw2F,UAAW,GACX5I,SAAU,SAAUl0F,KAEpBy/F,WAAY,SAASz/E,GACjB,OAAOrkB,KAAK4gD,MAAMv8B,EAAI,IAAM,QAGpCynE,GAAGkB,IAAIimE,EAAgBvxD,aAAc,CACjCxD,UAAW,SAEfvoE,EAAIr8B,YAAY25J,EAAgBvxD,cAEhC,IAQIyuD,EACA+C,EA0BAC,EACAC,EApCAC,EAAYvnE,GAAGvgF,GAAG,CAClBg4B,OAAQ5N,EACRq3D,IAAK,CACD18E,QAAS,OACT4tF,UAAW,UAMnBiyD,EAAcrkE,GAAGvgF,GAAG,CAChBiE,QAASssF,GAAK,iBAAmB,SACjClM,MAAOkM,GAAK,uBACZ9O,IAAK,CACD6T,SAAU,UAGlBqyD,EAAa,IAAIzyD,GAAO,CACpBQ,UAAW,CACP,CAAC,MAAOnF,GAAK,sBACb,CAAC,UAAWA,GAAK,yBACjB,CAAC,QAASA,GAAK,yBAEnBqF,UAAW,MACX5I,SAAU,SAASl0F,OAEG,IAAIynF,GAAGiN,gBAAgB,CAC7C5yG,OAAQ+sK,EAAWxxD,aACnBhkB,QAAS,SAAS5xF,GACdonK,EAAW1L,cAAc17J,EAAE6rF,WAGnCw4E,EAAY72J,YAAY45J,EAAWxxD,cACnC2xD,EAAU/5J,YAAY62J,GAItBgD,EAAcrnE,GAAGvgF,GAAG,CAChBiE,QAASssF,GAAK,eAAiB,SAC/BlM,MAAOkM,GAAK,qBACZ9O,IAAK,CACD6T,SAAU,OACV1C,WAAY,UAGpBi1D,EAAa,IAAI3yD,GAAO,CACpBQ,UAAW,CACP,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,MAEVE,UAAW,IACX5I,SAAU,SAASl0F,OAEG,IAAIynF,GAAGiN,gBAAgB,CAC7C5yG,OAAQitK,EAAW1xD,aACnBhkB,QAAS,SAAS5xF,GACdsnK,EAAW5L,cAAc17J,EAAE6rF,WAGnCw7E,EAAY75J,YAAY85J,EAAW1xD,cACnC2xD,EAAU/5J,YAAY65J,GAGtB,IAAI1kD,GAAe,EACf6kD,EAAmB,IAAIrzD,GAAS,CAChC7tE,MAAM,EACN6vC,MAAO65B,GAAK,qBACZlM,MAAOkM,GAAK,2BACZ3tC,SAAU,SAAU7pC,GAChBmqF,EAAenqF,GAEnB0oE,IAAK,CACDkR,UAAW,OACXq1D,aAAc,MACdjjJ,QAAS,kBAGjBqlB,EAAIr8B,YAAYg6J,EAAiB5xD,cAOjCz4G,KAAKy4G,WAAa,WACd,OAAO/rE,GAGX1sC,KAAKo4J,aAAe,SAASwR,GACzBv6C,IAAcu6C,EACdl9H,EAAItlB,MAAMC,QAAUgoG,EAAY,QAAU,OACtCA,IACA06C,EAAS15J,YAAY3F,EAAEqvJ,YAAYthD,cACnCsxD,EAAS15J,YAAY3F,EAAEqvJ,YAAYtE,sBAI3Cz1J,KAAKuqK,aAAe,WAChB,OAAOP,EAAgBtxD,YAG3B14G,KAAKs5I,WAAa,WACd,OAAOkE,EAAc9kC,YAMzB14G,KAAKwqK,UAAY,WACb,OAAOP,EAAWvxD,YAGtB14G,KAAKyqK,QAAU,WACX,OAAOx6H,SAASk6H,EAAWzxD,WAAY,KAG3C14G,KAAK0qK,cAAgB,WACjB,OAAOllD,InBlBXmlD,gBoB5JmBjgK,GACnB,IAAIgiC,EAAMm2D,GAAGvgF,GAAG,CACZyhF,IAAK,CACD+b,OAAQ,UAGZuP,GAAY,EAEZ06C,EAAWlnE,GAAGvgF,GAAG,CACjBg4B,OAAQ5N,EACRq3D,IAAK,CACDwQ,aAAc,UAIX1R,GAAGvgF,GAAG,CACbg4B,OAAQ5N,EACRnmB,QAASssF,GAAK,sBAMlB7yG,KAAKy4G,WAAa,WACd,OAAO/rE,GAGX1sC,KAAKo4J,aAAe,SAASwR,GACzBv6C,IAAcu6C,EACdl9H,EAAItlB,MAAMC,QAAUgoG,EAAY,QAAU,OACtCA,IACA06C,EAAS15J,YAAY3F,EAAEqvJ,YAAYthD,cACnCsxD,EAAS15J,YAAY3F,EAAEqvJ,YAAYtE,uBpB6H3CmV,iBqB1JoBlgK,OAiBhBgpH,EACA93G,EAkFKivJ,EAAT,WACI,IAAIC,EAAcjoE,GAAGv9B,MAAMvuD,KAAK4gD,MAAMozG,EAAgBryD,WAAa,IAAK,EAAG,IAAM,KAE7EsyD,EAAS,KAEbnoE,GAAGkB,IAAIknE,EAAmB,CAAE56I,KAAM,OAAQ23F,OAAQ,QAAS8iD,YAAaA,IACxEjoE,GAAGkB,IAAImnE,EAAmB,CAAE76I,KAAM,QAAS23F,OAAQ,SAEnDnlB,GAAGkB,IAAIonE,EAAyB,CAAE96I,KAAM,OAAQ23F,OAAQ,QAAS8iD,YAAaA,IAC9EjoE,GAAGkB,IAAIqnE,EAAyB,CAAE/6I,KAAM,QAAS23F,OAAQ,SAEzDnlB,GAAGkB,IACCsnE,EACA,CAAEh7I,KAAM,OAAQ23F,OAAQ,QAAS8iD,YAAaA,IAG7CQ,EAAoB5yD,YACrBuyD,EAAkB3oE,aAAa,IAAK,GAAKipE,GACzCN,EAAkB3oE,aAAa,SAAU,IAAMkpE,EAA+B,EAAjBD,IAC7DL,EAAkB5oE,aAAa,IAAK,GAAKipE,GACzCL,EAAkB5oE,aAAa,SAAU,IAAMkpE,EAA+B,EAAjBD,IAE7DJ,EAAwB7oE,aAAa,KAAM,IAAMkpE,EAAc,EAAID,IACnEH,EAAwB9oE,aAAa,KAAM,IAAMkpE,EAAc,EAAID,MAEnEN,EAAkB3oE,aAAa,IAAK,GAAMipE,EAAiBP,GAC3DC,EAAkB3oE,aAAa,SAAU,IAAMkpE,EAAcD,EAAiBP,EAAS,IACvFE,EAAkB5oE,aAAa,IAAK,GAAMipE,EAAiBP,GAC3DE,EAAkB5oE,aAAa,SAAU,IAAMkpE,EAAcD,EAAiBP,EAAS,IAEvFG,EAAwB7oE,aAAa,KAAM,IAAMkpE,EAAc,EAAID,EAAiBP,IACpFI,EAAwB9oE,aAAa,KAAM,IAAMkpE,EAAc,EAAID,EAAiBP,KAGnFS,EAAmB/yD,YACpB2yD,EAAY/oE,aAAa,KAAM,IAAMkpE,EAAcD,IACnDF,EAAY/oE,aAAa,KAAM,GAAKipE,KAEpCF,EAAY/oE,aAAa,KAAM,IAAMkpE,EAAcD,EAAiBP,IACpEK,EAAY/oE,aAAa,KAAM,GAAMipE,EAAiBP,KA1I1Dt+H,EAAMm2D,GAAGvgF,GAAG,CACZyhF,IAAK,CACD+b,OAAQ,UAGZuP,GAAY,EAEZ06C,EAAWlnE,GAAGvgF,GAAG,CACjBg4B,OAAQ5N,EACRq3D,IAAK,CACDwQ,aAAc,UAIlBi3D,EAAc,GACdD,EAAiB,EAKjBN,EAAoBpoE,GAAGoE,UAAU,CACjCG,YAAa,OACb3rE,EAAG,GAAK8vI,EACR3jF,MAAO,IAAM4jF,EAA+B,EAAjBD,KAE3BG,EAAgB7oE,GAAGoE,UAAU,CAC7BG,YAAa,MACbxf,MAAO,GAAK4jF,EACZ3jF,OAAQ,GAAK2jF,IAEjBE,EAAcr7J,YAAY46J,GAC1BpoE,GAAGkB,IAAI2nE,EAAe,CAClBrkJ,QAAS,UAGb,IAAI6jJ,EAAoBroE,GAAGoE,UAAU,CACjCG,YAAa,OACb3rE,EAAG,GAAK8vI,EACR3jF,MAAO,IAAM4jF,EAA+B,EAAjBD,KAE3BI,EAAgB9oE,GAAGoE,UAAU,CAC7BG,YAAa,MACbxf,MAAO,GAAK4jF,EACZ3jF,OAAQ,GAAK2jF,IAEjBG,EAAct7J,YAAY66J,GAC1BroE,GAAGkB,IAAI4nE,EAAe,CAClBtkJ,QAAS,UAIb,IAAI8jJ,EAA0BtoE,GAAGoE,UAAU,CACvCG,YAAa,UACb2nB,GAAI,GAAMy8C,EAAc,EACxBx8C,GAAI,GAAMw8C,EAAc,EACxB3/G,GAAI,IAAM2/G,EAAc,EAAID,KAE5BK,EAAmB/oE,GAAGoE,UAAU,CAChCG,YAAa,MACbxf,MAAO,GAAK4jF,EACZ3jF,OAAQ,GAAK2jF,IAEjBI,EAAiBv7J,YAAY86J,GAC7BtoE,GAAGkB,IAAI6nE,EAAkB,CACrBvkJ,QAAS,UAGb,IAAI+jJ,EAA0BvoE,GAAGoE,UAAU,CACvCG,YAAa,UACb2nB,GAAI,GAAMy8C,EAAc,EACxBx8C,GAAI,GAAMw8C,EAAc,EACxB3/G,GAAI,IAAM2/G,EAAc,EAAID,KAE5BM,EAAmBhpE,GAAGoE,UAAU,CAChCG,YAAa,MACbxf,MAAO,GAAK4jF,EACZ3jF,OAAQ,GAAK2jF,IAEjBK,EAAiBx7J,YAAY+6J,GAC7BvoE,GAAGkB,IAAI8nE,EAAkB,CACrBxkJ,QAAS,UAIb,IAAIgkJ,EAAcxoE,GAAGoE,UAAU,CAC3BG,YAAa,OACbxgC,GAAI,GAAK2kG,EACT/3H,GAAI,IAAMg4H,EAAcD,KAExBO,EAAUjpE,GAAGoE,UAAU,CACvBG,YAAa,MACbxf,MAAO,GAAK4jF,EACZ3jF,OAAQ,GAAK2jF,IAEjBM,EAAQz7J,YAAYg7J,GACpBxoE,GAAGkB,IAAI+nE,EAAS,CACZzkJ,QAAS,UA8Cb,IAAI81E,EAAO0F,GAAGvgF,GAAG,CACbg4B,OAAQ5N,EACRq3D,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,gBAChBC,WAAY,WAIhBi4D,EAAe,IAAIlrD,GAAQ,CAC3B7I,UAAW,CACP,CACIj7G,GAAI,cACJi8E,MAAO0yF,EACP/kE,MAAOkM,GAAK,cAAgB,IAAMA,GAAK,iBAE3C,CACI91G,GAAI,iBACJi8E,MAAO4yF,EACPjlE,MAAOkM,GAAK,iBAAmB,IAAMA,GAAK,iBAE9C,CACI91G,GAAI,OACJi8E,MAAO8yF,EACPnlE,MAAOkM,GAAK,eAEhB,CACI91G,GAAI,YACJi8E,MAAO2yF,EACPhlE,MAAOkM,GAAK,cAAgB,IAAMA,GAAK,eAE3C,CACI91G,GAAI,eACJi8E,MAAO6yF,EACPllE,MAAOkM,GAAK,iBAAmB,IAAMA,GAAK,gBAGlDiG,OAAQ,OACRxJ,SAAU,SAASvyG,GACf,IAAI4b,EAAQ5b,EAAG4b,MAAM,KACrB+6G,EAAQ/6G,EAAM,GACdiD,EAAOjD,EAAM,GAEbkqF,GAAGkB,IAAIunE,EAAY7yD,aAAc,CAC7BpxF,QAAmB,SAAVqsG,EAAmB,OAAS,OAEzC7wB,GAAGkB,IAAI0nE,EAAWhzD,aAAc,CAC5BpxF,QAAmB,SAAVqsG,EAAmB,KAAO,SAEvC7wB,GAAGkB,IAAIgnE,EAAgBtyD,aAAc,CACjCpxF,QAAoB,SAAVqsG,GAA6B,SAAT93G,EAAmB,OAAS,QAGlEylG,cAAc,IAElB0qD,EAAatzD,aAAarxF,MAAMwgE,MAAQ,QACxCuV,EAAK9sF,YAAY07J,EAAatzD,cAE9B,IAAIymC,EAAe,IAAIloC,GAAS,CAC5B7tE,MAAM,EACN6vC,MAAO65B,GAAK,UACZ3tC,SAAU,SAAS7pC,GACfwvI,OAGR1tE,EAAK9sF,YAAY6uI,EAAazmC,cAE9B,IAAIsyD,EAAkB,IAAI/wD,GAAS,CAC/BhhC,MAAO65B,GAAK,oBACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,IACLw2F,UAAW,EACXsD,MAAO,YACPlM,SAAU,SAAUl0F,GAChByvJ,KAEJhwD,WAAY,SAAUz/E,GAClB,OAAOrkB,KAAK4gD,MAAMv8B,MAG1BynE,GAAGkB,IAAIgnE,EAAgBtyD,aAAc,CACjCxD,UAAW,SAEfvoE,EAAIr8B,YAAY06J,EAAgBtyD,cAEhC,IAAI+kC,EAAgB,IAAIxjC,GAAS,CAC7BhhC,MAAO65B,GAAK,WACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,EACLw2F,UAAW,EACX5I,SAAU,SAAUl0F,KAEpBy/F,WAAY,SAAUz/E,GAClB,OAAOrkB,KAAK4gD,MAAU,IAAJv8B,MAG1BynE,GAAGkB,IAAIy5C,EAAc/kC,aAAc,CAC/BxD,UAAW,SAEfvoE,EAAIr8B,YAAYmtI,EAAc/kC,cAE9B,IAAIrb,EAAOyF,GAAGvgF,GAAG,CACbg4B,OAAQ5N,EACRq3D,IAAK,CACD18E,QAAS,OACTysF,WAAY,SACZmB,UAAW,UAIf+2D,EAAiB,IAAIh1D,GAAS,CAC9B7tE,MAAM,EACN6vC,MAAO65B,GAAK,kBACZ3tC,SAAU,SAAS7pC,KACnB0oE,IAAK,CACDnc,MAAO,MACP4sB,YAAa,UAGrBpX,EAAK/sF,YAAY27J,EAAevzD,cAEhC,IAAI6yD,EAAc,IAAIt0D,GAAS,CAC3B7tE,MAAM,EACN6vC,MAAO65B,GAAK,eACZ3tC,SAAU,SAAS7pC,GACfwvI,KAEJ9mE,IAAK,CACD2+B,SAAU,OAGlBtlC,EAAK/sF,YAAYi7J,EAAY7yD,cAE7B,IAAIgzD,EAAa,IAAIz0D,GAAS,CAC1B7tE,MAAM,EACN6vC,MAAO65B,GAAK,cACZlM,MAAOkM,GAAK,oBACZ3tC,SAAU,SAAS7pC,GACfwvI,KAEJ9mE,IAAK,CACD2+B,SAAU,OAGlBtlC,EAAK/sF,YAAYo7J,EAAWhzD,cAI5BoyD,IAIA7qK,KAAKy4G,WAAa,WACd,OAAO/rE,GAGX1sC,KAAKo4J,aAAe,SAASwR,GACzBv6C,IAAcu6C,EACdl9H,EAAItlB,MAAMC,QAAUgoG,EAAY,QAAU,OACtCA,IACA06C,EAAS15J,YAAY3F,EAAEqvJ,YAAYthD,cACnCsxD,EAAS15J,YAAY3F,EAAEqvJ,YAAYtE,sBAK3Cz1J,KAAKisK,SAAW,WACZ,OAAOv4C,GAGX1zH,KAAK+/I,QAAU,WACX,OAAOnkI,GAGX5b,KAAKo8I,YAAc,WACf,OAAQ8C,EAAqBxmC,YAGjC14G,KAAKs5I,WAAa,WACd,OAAOkE,EAAc9kC,YAGzB14G,KAAKksK,aAAe,WAChB,OAAOnB,EAAgBryD,YAG3B14G,KAAKmsK,cAAgB,WACjB,OAAQH,EAAuBtzD,YAGnC14G,KAAKosK,WAAa,WACd,OAAQd,EAAoB5yD,YAGhC14G,KAAKqsK,UAAY,WACb,OAAQZ,EAAmB/yD,arB3L/B4zD,QAAAxnB,GACAynB,UAAA7lB,GACA8lB,YAAAtb,GACAub,wBsBxJ2BC,EAAoBC,EAAQC,OAMnDC,EAkDK/d,EAAT,SAAqBvhC,GACjB,IAAI7gF,EAAMl9B,SAASM,cAAc,OAE7BkpE,EAAQ6pB,GAAGvgF,GAAG,CACdiE,QAASssF,GAAK,sBAAwB,IACtC9O,IAAK,CACDyQ,YAAa,SAIfs4D,EAAMjqE,GAAGvgF,GAAG,CACdyhF,IAAK,CACD18E,QAAS,UAGb9e,EAAQiH,SAASM,cAAc,SACnCvH,EAAMpK,MAAQ4xH,EAASo4B,SAAS56B,GAAO1rH,KACvC0G,EAAM+5F,aAAa,oBAAqB,QACxC,IAAMyqE,EAAWlqE,GAAGvgF,GAAG,CACnBykF,QAAS,SACTxgF,QAAS,aAAeirF,EAAAkT,IAAiB,kBACzC/d,MAAOkM,GAAK,uBACZ9O,IAAK,CACDmR,WAAY,QAEhB7F,QAAS,WACL9mG,EAAMpK,MAAQ,GACdoK,EAAM45F,WAGR6qE,EAAc,CAChBn6D,GAAK,wBACLA,GAAK,wBACLA,GAAK,uBACLA,GAAK,cACLA,GAAK,6BAEHo6D,EAAiB,GACjB7vE,EAAOyF,GAAGvgF,GAAG,CACfyhF,IAAK,CACD18E,QAAS,OACT2tF,SAAU,OACVC,UAAW,MACXC,WAAY,UAGpB83D,EAAYxvK,SAAQ,SAAAo+C,GAChB,IAAM45D,EAAM3S,GAAGvgF,GAAG,CACdg4B,OAAQ8iD,EACR2J,QAAS,SACTxgF,QAASq1B,EACTyzD,QAAS,WACL9mG,EAAMpK,MAAQq3G,EAAIrG,aAEtBpL,IAAK,CACD+b,OAAQ,iBAGhBmtD,EAAe5pK,KAAKmyG,MAGxB9oE,EAAIr8B,YAAY2oE,GAChBA,EAAMwD,OAAOswF,EAAK1vE,GAClB0vE,EAAItwF,OAAOj0E,EAAOwkK,GAElB/zH,YAAW,WACPzwC,EAAM45F,QACN55F,EAAMywG,WACP,IAEHlG,GAAM,CACF51G,OAAQ0vK,EACR18J,QAAU,MAAiC7D,OAA5BwmG,GAAK,uBAAuB,QAC3CnmE,IAAKA,EACLgkD,QAAS,CAACmiB,GAAK,iBAAkB,UACjCyC,UAAW,CAACzC,GAAK,kBACjB3tC,SAAU,SAAU9pD,GAMhB,GALAynF,GAAG2M,UAAUu9D,GACbE,EAAezvK,SAAQ,SAAAo+C,GACnBinD,GAAG2M,UAAU5zD,MAEjBqxH,EAAe7nK,OAAO,EAAG6nK,EAAenwK,QACpCse,IAAQy3F,GAAK,iBAAkB,CAC/B,GAAItqG,EAAMpK,QAAU4xH,EAASo4B,SAAS56B,GAAO1rH,KACzC,OAEJkuH,EAAS++B,YAAYvhC,EAAOhlH,EAAMpK,OAClC+uK,IACAh8D,GAAUwZ,OAAM,GAChByiD,EAAW5/C,GACXrc,GAAUwZ,OAAM,KAGxBhV,aAAc7C,GAAK,oBAgUlBq6D,EAAT,oBAEaE,EAAiBtrJ,GACtB,IAAI6oG,EAAYoF,EAASo4B,SAASrmI,GAAOjgB,KACrC23G,EAAU4oD,EAAiBtgJ,GAAO03F,QAClC6zD,EAAcjL,EAAiBtgJ,GAAOxkB,QAAQsrF,OAE9C2kC,EAAQ/9G,SAASM,cAAc,OACnCy9G,EAAMne,UAAY,WAClBk+D,EAAWxrJ,GAASyrG,EACnBA,EAAcggD,KAAwC,IAA/BnL,EAAiBtlK,OAAS,GAAkB,GAARglB,EAC5D+gF,GAAGkB,IAAIwpB,EAAO,CACV3lC,MAAO,QACPC,OAAQ,OACR0xB,gBAAiB,sBACjBE,OAAQ,iBACRnxD,SAAU,WACV39C,KAAM,OACNy+E,IAAMmkC,EAAcggD,KAAO,KAC3BxtD,WAAY,kBACZpJ,aAAc,MACdkD,UAAW,eAEf,IAAI2zD,EAAah+J,SAASM,cAAc,OACxC+yF,GAAGkB,IAAIypE,EAAY,CACfllH,SAAU,aAGd,IAAImlH,EAAaj+J,SAASM,cAAc,OACxC+yF,GAAGkB,IAAI0pE,EAAY,CACf7lF,MAAO,QACPC,OAAQ,SAEZ,IAAI6lF,EAAal+J,SAASM,cAAc,OACxCy9G,EAAMl9G,YAAYm9J,GAClBA,EAAWn9J,YAAYo9J,GACvBD,EAAWn9J,YAAYq9J,GAEtBngD,EAAcogD,KAAO7rJ,EAIlB,IA6DA8rJ,EA7DIC,EAAkBhrE,GAAG4B,QAAQ4oE,EAAYzlF,MAAOylF,EAAYxlF,OAAQ,GAAI,GAAI,GAC5EimF,EAASvgD,EAAcugD,MAAQjrE,GAAGja,OAAOilF,EAAgBjmF,MAAOimF,EAAgBhmF,QAEhFkmF,EAAMD,EAAMjlF,WAAW,MAC3BklF,EAAIriE,OACAoiE,EAAMlmF,MAAQylF,EAAYzlF,QAC1BmmF,EAAIpiE,uBAAwB,GAEhCoiE,EAAIhjE,UAAUsiE,EAAa,EAAG,EAAGS,EAAMlmF,MAAOkmF,EAAMjmF,QACpDkmF,EAAIjiE,UACJjJ,GAAGkB,IAAKwpB,EAAcugD,MAAO,CACzBxlH,SAAU,WACV39C,MAAQ,GAAM4iH,EAAcugD,MAAMlmF,OAAS,EAAK,KAChDwB,KAAO,GAAMmkC,EAAcugD,MAAMjmF,QAAU,EAAK,KAChDiwB,YAAa,eAEjBjV,GAAGuJ,qBAAqB,GAAG,SAASz9F,GAChCm/J,EAAM1mJ,MAAMixF,gBAAkB,OAAS1pG,EAAM,OAMhD4+G,EAAcv0C,MAAQxpE,SAASM,cAAc,OAC7Cy9G,EAAcygD,MAAQrjD,EACtB4C,EAAcv0C,MAAMwD,OAAQ+wC,EAAcygD,OAE3CnrE,GAAGkB,IAAKwpB,EAAcv0C,MAAO,CACzB1wB,SAAU,WACV39C,KAAM,OACNy+E,IAAK,MACLwuB,SAAU,OACVhwB,MAAO,QACPC,OAAQ,OACR4rB,SAAU,SACVpgD,MAAO,OACP61D,WAAY,WAGfqE,EAAcv0C,MAAMi1F,WAAa,WAC9Bnf,EAAavhC,EAAcogD,OAK9BpgD,EAAc2gD,aAAe1+J,SAASM,cAAc,OACpDy9G,EAAc/T,QAAUA,EACxB+T,EAAc2gD,aAAa1xF,OAAOvsC,SAAS,GAA+B,IAAxBs9E,EAAc/T,SAAkB,KAEnF3W,GAAGkB,IAAKwpB,EAAc2gD,aAAc,CAChC5lH,SAAU,WACV39C,KAAM,QACNy+E,IAAK,MACLwuB,SAAU,OACVgJ,UAAW,QACXh5B,MAAO,OACPv0B,MAAO,OACP0sD,WAAY,2BAKpB,IAAIy9B,EAAgB,IAAIp+B,GAAY,CAChCj2E,KAAOokF,EAAc/T,QACrB5xB,MAAO,IACP83B,UAAW,GACXx6C,SAAU,SAASipG,EAAavuD,EAASwuD,GACrC,OAAIxuD,GACAguD,EAAa79C,EAASo4B,SAAU56B,EAAcogD,MAAMn0D,aACpDtI,GAAUwZ,OAAM,IAGhB0jD,GACAl9D,GAAUwZ,OAAM,QACZkjD,IAAeO,GACfp+C,EAASvF,aAAc+C,EAAcogD,KAAMQ,MAIlD5gD,EAAc2gD,aAAav/D,UAAY53F,KAAK4gD,MAAoB,IAAdw2G,GAAqB,SACxEp+C,EAASvF,aAAc+C,EAAcogD,KAAMQ,OAGnDtrE,GAAGkB,IAAIy5C,EAAcx9B,QAAS,CAC1B13D,SAAU,WACV39C,KAAM,OACNy+E,IAAK,SAERmkC,EAAciwB,cAAgBA,EAG/B36C,GAAG+M,iBAAkB2d,EAAcugD,MAAO,iBAAiB,SAAUjrK,GACjE,GAAkB,IAAdA,EAAE6tF,SAAmB7tF,EAAEytF,aAAiC,UAAlBztF,EAAEytF,YAA5C,CAIA,IAAIu9E,EAAkBhrE,GAAG4B,QAAQ4oE,EAAYzlF,MAAOylF,EAAYxlF,OAAQ,IAAK,IAAK,GAE9EwmF,EAAiBzmF,QAAUimF,EAAgBjmF,OAASymF,EAAiBxmF,SAAWgmF,EAAgBhmF,SAChGwmF,EAAiBzmF,MAAQimF,EAAgBjmF,MACzCymF,EAAiBxmF,OAASgmF,EAAgBhmF,QAE9C,IAAIwU,EAAMgyE,EAAiBxlF,WAAW,MACtCwT,EAAIqP,OACA2iE,EAAiBzmF,MAAQylF,EAAYzlF,QACrCyU,EAAIsP,uBAAwB,GAEhCtP,EAAIuP,sBAAwB,OAC5BvP,EAAI+uB,UAAU,EAAG,EAAGijD,EAAiBzmF,MAAOymF,EAAiBxmF,QAC7DwU,EAAI0O,UAAUsiE,EAAa,EAAG,EAAGgB,EAAiBzmF,MAAOymF,EAAiBxmF,QAC1EwU,EAAIyP,UACJjJ,GAAGkB,IAAIuqE,EAAe,CAClBllF,IAAMvmF,EAAEksF,QAAUs/E,EAAiBxmF,OAAS,EAAK,KACjD2xB,QAAS,OAEgB,IAAzB+0D,IACA/+J,SAASutE,KAAK1sE,YAAYi+J,GAC1BC,GAAuB,GAE3Bn/E,aAAao/E,GACbA,EAAsBx1H,YAAW,WAC7B6pD,GAAGkB,IAAIuqE,EAAe,CAClB90D,QAAS,QAEd,IACHpqB,aAAaq/E,OAEjB5rE,GAAG+M,iBAAkB2d,EAAcugD,MAAO,gBAAgB,WACtD1+E,aAAao/E,GACb3rE,GAAGkB,IAAIuqE,EAAe,CAClB90D,QAAS,MAEbpqB,aAAaq/E,GACbA,EAAoBz1H,YAAW,WACtBu1H,IAGL/+J,SAASutE,KAAKhkC,YAAYu1H,GAC1BC,GAAuB,KACxB,QAGPd,EAAWp9J,YAAak9G,EAAcugD,OACtCL,EAAWp9J,YAAak9G,EAAcv0C,OACtCy0F,EAAWp9J,YAAak9G,EAAc2gD,cACtCT,EAAWp9J,YAAYmtI,EAAcx9B,SACrC,IAAI0uD,GAAY,EACZC,GAAiB,EA2DpBphD,EAAcxR,gBAAkB,IAAIlZ,GAAGiN,gBAAgB,CACpD5yG,OAAQuwK,EACRn6E,YAAa,EACbiB,mBA3DsBp8C,GACtB,GAAmB,gBAAfA,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OACtCkS,GAAGkB,IAAIwpB,EAAO,CACVxN,WAAY,gCAGhBwN,EAAMnmG,MAAM4sF,OAAS,IACrB46D,EAAWrhD,EAAcogD,KACzBgB,GAAiB,EACXphD,EAAcshD,aAChBF,GAAiB,EAChBG,EAAYC,cAAexhD,EAAcogD,OAE9Ce,GAAY,OAET,GAAmB,gBAAfv2H,EAAMt4C,MAA2C,SAAjBs4C,EAAMw4C,OAAmB,CAE5D+9E,IACAA,GAAY,EACZ7rE,GAAGkB,IAAIwpB,EAAO,CACVnZ,UAAW,iCAGlBmZ,EAAcggD,MAAQp1H,EAAMi6C,GAC7B,IAAIhC,EAAYr5E,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAqC,IAAhCwgJ,EAAiBtlK,OAAS,GAAYywH,EAAcggD,OAC1FhgD,EAAMnmG,MAAMgiE,IAAMgH,EAAY,KAC9B4+E,EAA8BzhD,EAAcogD,KAAMsB,EAAW1hD,EAAcggD,OAG/E,GAAmB,cAAfp1H,EAAMt4C,KAAsB,CAC5BgjG,GAAGkB,IAAIwpB,EAAO,CACVxN,WAAY,oBAEhB/mE,YAAW,WACP6pD,GAAGkB,IAAIwpB,EAAO,CACVnZ,UAAW,OAEhB,IACFmZ,EAAcggD,KAAOx2J,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAqC,IAAhCwgJ,EAAiBtlK,OAAS,GAAYywH,EAAcggD,OAEhGhgD,EAAMnmG,MAAM4sF,OAAS,GACrB,IAAIk7D,EAAUD,EAAW1hD,EAAcggD,MACnC4B,EAAW5hD,EAAcogD,KAC7BtvC,EAAM9Q,EAAcogD,KAAMuB,GACtBC,GAAWD,IACXh+D,GAAUwZ,OAAM,GAChByiD,EAAWiC,GACXl+D,GAAUwZ,OAAM,IAEhBykD,IAAYD,GAAWP,GACvBxB,EAAWiC,GAEfT,GAAiB,MAUzBU,EAAYh/J,YAAYk9G,OA7P5Bs/C,EAAkB37D,GAAU9zB,WA+P5BkwF,EAAa,GACN+B,EAAYC,YAAY,CAC3B,IAAIC,EAAQF,EAAYC,WACvBC,EAAcxzD,gBAAgBzmB,UAC9Bi6E,EAAc/xB,cAAcloD,UAC7B+5E,EAAYt2H,YAAYw2H,GAE5B,IAAK,IAAI1yK,EAAI,EAAGA,EAAIulK,EAAiBtlK,OAAQD,IACzCuwK,EAAiBvwK,GAEpBiyK,EAAYC,cAAcK,GAC3BI,KAQKP,EAAT,SAAmBvkK,GACf,IAAIzL,EAASgxC,SAAS,IAAOvlC,GAAM+kK,EAAcC,GAAgB,KAGjE,OAFAzwK,EAAS8X,KAAK6K,IAAIwgJ,EAAiBtlK,OAAS,EAAGia,KAAK2K,IAAI,EAAGziB,IAC3DA,EAASmjK,EAAiBtlK,OAASmC,EAAS,GAOvC+vK,EAAT,SAAsCjyK,EAAI4yK,GAEtC,IADAA,EAAU54J,KAAK6K,IAAIwgJ,EAAiBtlK,OAAS,EAAGia,KAAK2K,IAAI,EAAGiuJ,OAC5Cf,EAAhB,CAGA,IAAK,IAAI/xK,EAAI,EAAGA,EAAIulK,EAAiBtlK,OAAQD,IACzC,GAAIywK,EAAWzwK,GAAG8wK,OAAS5wK,EAA3B,CAGA,IAAI6yK,EAAOtC,EAAWzwK,GAAG8wK,KACrBL,EAAWzwK,GAAG8wK,KAAO5wK,GACrB6yK,IAEAA,GAAQD,GACRC,IAEJtC,EAAWzwK,GAAG0wK,MAAQkC,EAAcC,IAAiBtN,EAAiBtlK,OAAS8yK,EAAO,GACtFtC,EAAWzwK,GAAGuqB,MAAMgiE,IAAMkkF,EAAWzwK,GAAG0wK,KAAO,KAEnDqB,EAAUe,IAGLtxC,EAAT,SAAcwxC,EAAcC,GACxB,GAAI17J,MAAMy7J,IAAiBz7J,MAAM07J,GAC7B,KAAM,8BAEV,IAAK,IAAIjzK,EAAI,EAAGA,EAAIulK,EAAiBtlK,OAAQD,KAAC,SAC/BA,GACP,IAAI+yK,EAAOtC,EAAWzwK,GAAG8wK,KACrBL,EAAWzwK,GAAG8wK,OAASkC,EACvBD,EAAOE,GAEHxC,EAAWzwK,GAAG8wK,KAAOkC,GACrBD,IACAA,GAAQE,GACRF,KAERtC,EAAWzwK,GAAG8wK,KAAOiC,EACrBtC,EAAWzwK,GAAG0wK,MAAQkC,EAAcC,IAAiBtN,EAAiBtlK,OAAS8yK,EAAO,GACtFtC,EAAWzwK,GAAGuqB,MAAMgiE,IAAMkkF,EAAWzwK,GAAG0wK,KAAO,KAbT,CAcxC1wK,GAEFgzK,IAAiBC,IAGrB//C,EAASggD,UAAUX,EAAmBU,EAAeD,GACrDzN,EAAmBryC,EAAS9E,YAC5BmkD,EAAoBU,EACpBE,EAAS1sB,SAAiC,IAAtB8rB,IAgCfI,EAAT,WACIH,EAAYjoJ,MAAMygE,OAA8B,GAApBylF,EAAWxwK,OAAe,MAl0BtDizH,EAAqB28C,EACrBY,EAAa,GACbmC,EAAc,GACdC,EAAe,EAGfvC,EAAaR,EAIb2B,EAAgBzrE,GAAGvgF,GAAG,CACtB+sF,QAASxM,GAAGgE,YACZ9C,IAAK,CACDz7C,SAAU,WACV19C,MAAO,QACPw+E,IAAK,QACL+qB,WAAY,OACZC,UAAW,8BACXkG,cAAe,OACfzC,QAAS,IACT4B,OAAQ,iBACRsG,WAAY,wBACZpE,WAAY,OACZ7D,YAAa,gBAGrBjV,GAAGuJ,qBAAqB,GAAG,SAASz9F,GAChC2/J,EAAclnJ,MAAMixF,gBAAkB,OAAS1pG,EAAM,OAEzD,IAKI8/J,EAAmBD,EALnBH,EAAmB7+J,SAASM,cAAc,UAC9Cu+J,EAAiBjnJ,MAAMC,QAAU,QACjCgnJ,EAAiBzmF,MAAQ,IACzBymF,EAAiBxmF,OAAS,IAC1BymF,EAAcj+J,YAAYg+J,GAE1B,IAAIE,GAAuB,EAGvBnM,EAAmBryC,EAAS9E,YAC5BmkD,EAAoBhN,EAAiBtlK,OAAS,EAC9CgyK,EAAMt/J,SAASM,cAAc,OACjCg/J,EAAI1nJ,MAAMotF,YAAc,OACxBs6D,EAAI1nJ,MAAMmtF,aAAe,OACzBu6D,EAAI1nJ,MAAM8tF,WAAa,OACvB45D,EAAI1nJ,MAAM6tF,UAAY,OACtB65D,EAAI1nJ,MAAMuwF,OAAS,UAEnB,IAAIs4D,EAAUzgK,SAASM,cAAc,OACrC+yF,GAAGkB,IAAIksE,EAAS,CACZroF,MAAOA,QACPt/B,SAAU,aAuGd,IAAI+mH,EAAcxsE,GAAGvgF,GAAG,IAEvBwsJ,EAAYoB,eAAiB,aAC7BpB,EAAYqB,cAAgB,aAC7B,IAOQC,EA6PJlJ,EACA+C,EArQAoG,EAAY7gK,SAASM,cAAc,UACnCwgK,EAAe9gK,SAASM,cAAc,UACtCkgK,EAAWxgK,SAASM,cAAc,UAClCygK,EAAY/gK,SAASM,cAAc,UACnC0gK,EAAYhhK,SAASM,cAAc,UA8PvCg/J,EAAIz+J,aA3PI+/J,EAAM5gK,SAASM,cAAc,OAwPjCkpC,uBAtPI6pD,GAAGqM,gBAAgBmhE,GACnBxtE,GAAGqM,gBAAgBohE,GACnBztE,GAAGqM,gBAAgB8gE,GACnBntE,GAAGqM,gBAAgBqhE,GACnB1tE,GAAGqM,gBAAgBshE,GAEnBH,EAAUjpJ,MAAMsyF,SAAW,OAC3B42D,EAAalpJ,MAAMsyF,SAAW,OAC9Bs2D,EAAS5oJ,MAAMsyF,SAAW,OAC1B62D,EAAUnpJ,MAAMsyF,SAAW,OAC3B82D,EAAUppJ,MAAMsyF,SAAW,OAE3B22D,EAAU1pE,MAAQkM,GAAK,cACvBy9D,EAAa3pE,MAAQkM,GAAK,oBAC1B09D,EAAU5pE,MAAQkM,GAAK,iBACvBm9D,EAASrpE,MAAQkM,GAAK,gBACtB29D,EAAU7pE,MAAQkM,GAAK,uBAEvBw9D,EAAUjpJ,MAAMyvF,YAAc,MAC9Bw5D,EAAUjpJ,MAAMkjJ,aAAe,MAE/BiG,EAAUnpJ,MAAMyvF,YAAc,MAC9B05D,EAAUnpJ,MAAMkjJ,aAAe,MAE/BgG,EAAalpJ,MAAMyvF,YAAc,MACjCy5D,EAAalpJ,MAAMkjJ,aAAe,MAElC0F,EAAS5oJ,MAAMyvF,YAAc,MAC7Bm5D,EAAS5oJ,MAAMkjJ,aAAe,MAE9BkG,EAAUppJ,MAAMygE,OAAS,OACzB2oF,EAAUppJ,MAAM8sF,WAAa,OAE7Bm8D,EAAU1hE,UAAY,aAAe6C,EAAA+S,IAAc,kBACnD+rD,EAAa3hE,UAAY,aAAe6C,EAAAgT,IAAoB,kBAC5DwrD,EAASrhE,UAAY,aAAe6C,EAAAiT,IAAgB,kBACpD8rD,EAAU5hE,UAAY,aAAe6C,EAAAkT,IAAiB,kBACtD8rD,EAAU7hE,UAAY,aAAe6C,EAAAmT,IAAiB,kBACtD0rD,EAAUjpJ,MAAMotF,YAAc,MAC9B+7D,EAAUnpJ,MAAMotF,YAAc,MAC9B87D,EAAalpJ,MAAMotF,YAAc,MACjCw7D,EAAS5oJ,MAAMotF,YAAc,MAC7B47D,EAAI//J,YAAYggK,GAChBD,EAAI//J,YAAYkgK,GAChBH,EAAI//J,YAAYigK,GAChBF,EAAI//J,YAAY2/J,GAChBI,EAAI//J,YAAYmgK,GAChBJ,EAAI//J,YAAYwyF,GAAGvgF,GAAG,CAClByhF,IAAK,CACD97D,MAAO,WAIf,IAAIwoI,EAAYjhK,SAASM,cAAc,OACvC2gK,EAAUrpJ,MAAM6gB,MAAQ,OACxBwoI,EAAUrpJ,MAAMygE,OAAS,OACzBuoF,EAAI//J,YAAYogK,GAGhBJ,EAAUh9D,QAAU,YAC6B,IAAzC0c,EAASxF,SAAS6kD,MAGtBhN,EAAmBryC,EAAS9E,aAEPnuH,SAAW+sH,KAC5BwmD,EAAU/sB,UAAW,EACrBgtB,EAAahtB,UAAW,GAE5BitB,EAAUjtB,UAAW,EACrB8rB,GAAwC,EACxClC,IACAh8D,GAAUwZ,OAAM,GAChByiD,EAAWiC,GACXl+D,GAAUwZ,OAAM,KAEpB4lD,EAAaj9D,QAAU,YACgC,IAA/C0c,EAAS2gD,eAAetB,MAG5BhN,EAAmBryC,EAAS9E,aACPnuH,SAAW+sH,KAC5BwmD,EAAU/sB,UAAW,EACrBgtB,EAAahtB,UAAW,GAE5BitB,EAAUjtB,UAAW,EACrB8rB,IACAlC,IACAh8D,GAAUwZ,OAAM,GAChByiD,EAAWiC,GACXl+D,GAAUwZ,OAAM,KAEpB6lD,EAAUl9D,QAAU,WACZi6D,EAAWxwK,QAAU,IAIzBizH,EAAS7E,YAAYkkD,GACjBA,EAAoB,GACpBA,IAEJhN,EAAmBryC,EAAS9E,YAC5BiiD,IACAh8D,GAAUwZ,OAAM,GAChByiD,EAAWiC,GACXl+D,GAAUwZ,OAAM,GACgB,IAA5B03C,EAAiBtlK,SACjByzK,EAAUjtB,UAAW,GAErB8e,EAAiBtlK,OAAS+sH,KAC1BwmD,EAAU/sB,UAAW,EACrBgtB,EAAahtB,UAAW,KAGhC0sB,EAAS38D,QAAU,WACX+7D,GAAqB,YAIJ1kK,GACjB,IAAIgiC,EAAMl9B,SAASM,cAAc,OACjC48B,EAAIiiE,UAAYkE,GAAK,4BAErB,IAAIjyF,EAAU,IAAIigG,GAAQ,CACtB7I,UAAW,CACP,CAACj7G,GAAI2N,EAAEi/G,WAAY3wC,MAAOy0C,GAAkB/iH,EAAEi/G,aAC9C,CAAC5sH,GAAI,YAAai8E,MAAO,aACzB,CAACj8E,GAAI,aAAci8E,MAAO,cAC1B,CAACj8E,GAAI,cAAei8E,MAAO,eAC3B,CAACj8E,GAAI,iBAAkBi8E,MAAO,kBAC9B,CAACj8E,GAAI,kBAAmBi8E,MAAO,mBAC/B,CAACj8E,GAAI,mBAAoBi8E,MAAO,oBAChC,CAACj8E,GAAI,MAAOi8E,MAAO,QAEvB8/B,OAAQpuG,EAAEi/G,WACVra,SAAU,SAASvyG,GACfkoE,KAEJ+7C,SAAS,IAEbpgG,EAAQ63F,aAAarxF,MAAM6tF,UAAY,MACvCvoE,EAAIr8B,YAAYuQ,EAAQ63F,cAExB,IAAI8qD,EAAU/zJ,SAASM,cAAc,UACrCyzJ,EAAQ58D,MAAQkM,GAAK,WACrB,IAAI89D,EAASnhK,SAASM,cAAc,OACpC6gK,EAAOhiE,UAAY,QACnBgiE,EAAOvpJ,MAAM6gB,MAAQ,OACrByE,EAAIr8B,YAAYsgK,GAChBjkI,EAAIr8B,YAAYkzJ,GAChB,IAAIsK,EAAkBhrE,GAAG4B,QAAQ/5F,EAAEkmK,UAAUhpF,MAAOl9E,EAAEkmK,UAAU/oF,OAAQ,IAAK,IAAK,GAClF07E,EAAQ37E,MAAQimF,EAAgBjmF,MAChC27E,EAAQ17E,OAASgmF,EAAgBhmF,OACjCgb,GAAGkB,IAAIw/D,EAAS,CACZl8I,QAAS,QACT6tF,WAAY,OACZV,YAAa,OACbsD,YAAa,eAEjByrD,EAAQn8I,MAAMgtF,UAAY,0BAC1BvR,GAAGuJ,qBAAqB,GAAG,SAASz9F,GAChC40J,EAAQn8I,MAAMixF,gBAAkB,OAAS1pG,EAAM,OAGnD,IAAIkiK,EAAchuE,GAAGgI,WAAW04D,YAIvBt+F,IACL,IAAIo3B,EAAMknE,EAAQ16E,WAAW,MAC7BwT,EAAIqP,OACJrP,EAAI+uB,UAAU,EAAG,EAAGm4C,EAAQ37E,MAAO27E,EAAQ17E,QACvC07E,EAAQ37E,MAAQl9E,EAAEkmK,UAAUhpF,QAC5ByU,EAAIsP,uBAAwB,GAEhCtP,EAAI0O,UAAUrgG,EAAEomK,aAAc,EAAG,EAAGvN,EAAQ37E,MAAO27E,EAAQ17E,QAEhC,aAAvBjnE,EAAQ83F,YACRrc,EAAImR,yBAA2B,iBAC/BnR,EAAI8pB,YAAcz7G,EAAEwhH,WACpB7vB,EAAI0O,UAAU8lE,EAAa,EAAG,EAAGtN,EAAQ37E,MAAO27E,EAAQ17E,UAExDwU,EAAImR,yBAA2B5sF,EAAQ83F,WACvCrc,EAAI8pB,YAAcz7G,EAAEwhH,WACpB7vB,EAAI0O,UAAUrgG,EAAEkmK,UAAW,EAAG,EAAGrN,EAAQ37E,MAAO27E,EAAQ17E,SAE5DwU,EAAIyP,UArBR+kE,EAAYhoF,WAAW,MAAMkiB,UAAUrgG,EAAEkmK,UAAW,EAAG,EAAGC,EAAYjpF,MAAOipF,EAAYhpF,QACzFgb,GAAGmL,4BAA4B6iE,GAuB/B5rG,IAGA,IAAIunB,EAAc,IAAIqW,GAAGgN,YAAY,CACjCjjB,OAAQ,SAAS9C,GACE,UAAXA,GACAlpE,EAAQ7gB,OAEG,SAAX+pF,GACAlpE,EAAQ6nB,cAKpBqqE,GAAM,CACF51G,OAAQ0vK,EACR18J,QAAU,MAAsC7D,OAAjCwmG,GAAK,4BAA4B,QAChDnmE,IAAKA,EACLgkD,QAAS,CAAC,KAAM,UAChBglB,aAAc,KACdxwC,SAAU,SAAU9pD,GAChBoxE,EAAY8I,UACZ10E,EAAQ00E,UACI,OAARl6E,GACA1Q,EAAEw6D,SAAStkD,EAAQ83F,eAKnCq4D,CAAY,CACRH,UAAWxO,EAAiBgN,GAAmB9xK,QAAQsrF,OACvDkoF,aAAc1O,EAAiBgN,EAAoB,GAAG9xK,QAAQsrF,OAC9DsjC,WAAY6D,EAASo4B,SAASinB,GAAmB51D,QACjDmQ,WAAYy4C,EAAiBgN,GAAmBzlD,WAChDzkD,SAAU,SAAUtpD,GAChBm0G,EAASihD,YAAY5B,EAAmBA,EAAoB,EAAGxzJ,GAC/DwmJ,EAAmBryC,EAAS9E,YAC5BmkD,IACgC,IAA5BhN,EAAiBtlK,SACjByzK,EAAUjtB,UAAW,GAErB8e,EAAiBtlK,OAAS+sH,KAC1BwmD,EAAU/sB,UAAW,EACrBgtB,EAAahtB,UAAW,GAE5B4pB,IACAh8D,GAAUwZ,OAAM,GAChByiD,EAAWiC,GACXl+D,GAAUwZ,OAAM,OAK5B8lD,EAAUn9D,QAAU,WAChBy7C,EAAYsgB,MAGF,GACXgB,IAOPlJ,EAAcrkE,GAAGvgF,GAAG,CAChBiE,QAASssF,GAAK,mBAAqB,SACnC9O,IAAK,CACD6T,SAAU,UAIlBqyD,EAAa,IAAIzyD,GAAO,CACpBQ,UAAW,CACP,cACA,KACA,SACA,WACA,aACA,KACA,UACA,SACA,cACA,KACA,UACA,aACA,aACA,KACA,aACA,YACA,KACA,MACA,aACA,QACA,cACFnxG,KAAI,SAAC+0C,GACH,OAAOA,EAAO,CAACA,EAAM6xE,GAAkB7xE,IAAS,QAEpD0zD,SAAU,SAASl0F,GACf20G,EAASkhD,WAAW7B,EAAmBh0J,GACtC0zJ,EAAY7pG,OAAOmqG,IAExBrrE,IAAK,CACDwQ,aAAc,UAItB2yD,EAAY72J,YAAY45J,EAAWxxD,cACnCq2D,EAAIz+J,YAAY62J,GAoRpB+I,EAAQ5/J,YAAYg/J,GACpBP,EAAIz+J,YAAY4/J,GAUhB,IAAIrB,EAAU,EAwJd,OA/F2B1yE,aAAY,WACnC,GAA0B,UAAtB4yE,EAAI1nJ,MAAMC,QAAd,CAIA,IAAI6pJ,EAAehgE,GAAU9zB,WAC7B,GAAI8zF,IAAiBrE,EAArB,CAGAA,EAAkBqE,EAElB,IAAK,IAAIr0K,EAAI,EAAGA,EAAIywK,EAAWxwK,OAAQD,IACnC,GAAIuyK,IAAsB9B,EAAWzwK,GAAG8wK,MAAQvL,EAAiBkL,EAAWzwK,GAAG8wK,MAAO,CAClF,IAAItxE,EAAMixE,EAAWzwK,GAAGixK,MAAMjlF,WAAW,MACzCwT,EAAIqP,OACJrP,EAAI+uB,UAAU,EAAG,EAAG/uB,EAAIzT,OAAOhB,MAAOyU,EAAIzT,OAAOf,QAC7Cu6E,EAAiBkL,EAAWzwK,GAAG8wK,MAAMrwK,QAAQsrF,OAAOhB,MAAQ0lF,EAAWzwK,GAAGixK,MAAMlmF,QAChFyU,EAAIsP,uBAAwB,GAEhCtP,EAAI0O,UAAUq3D,EAAiBkL,EAAWzwK,GAAG8wK,MAAMrwK,QAAQsrF,OAAQ,EAAG,EAAG0kF,EAAWzwK,GAAGixK,MAAMlmF,MAAO0lF,EAAWzwK,GAAGixK,MAAMjmF,QACxHwU,EAAIyP,eAIb,GAQFgjE,EAAY7pG,OAAS,SAAUksG,GAC5B/O,EAAmBryC,EAAS9E,aACxBkmD,GAAiD,IAAzBA,KACxB/B,EAAoB+B,GAExBZ,EAAUjtB,SAAuC,IAA5B8e,EAAiBtlK,OAClCslK,EAAiBtlK,SAAW+sH,IAC5BwmD,EAAU/sB,UAAW,EACrBgtB,EAAahtB,UAAW,IAExB+sB,EAAU/sB,UAAW,EACrBgtB,EAAahtB,UAAW,GAE5BtqG,YAAW,WACPk0H,MACD,IAEN4B,EAAY1mB,YAAc,WACvB,OAAOgnB,GAEVN,EAAYC,cAAgB,SAAUqC,GACnC,GAAIA,EAAY,GAAKA,EAAY9D,EAAWxwK,OAAS,EACjD,KAAM,qBAAuBs0K,EAAY,uBAAyB9D,EAAWxwK,OAEjFsyK,EAAoBgC,EACpBnH,EAAWzxD,SAAS4pD,EAAiBgN,GAAmBzlD,YACxD,IAAK,IAAI9sH,EAAI,EAAGA,EAAIywK,EAAWxwK,OAAQD,IAC/BuyK,IAAsB9B,EAAWzwK,GAAG8wK,MACpCL,EAAWzwK,GAAGuqB,MAAMmyF,gBAAkB,sBACtC+zD,EAAWzwK,GAAGm8E,MAAM5xD,MAAMisC,MAAQ,OAClCi6G,EAAWzwK,GAAGuqB,MAAMgtF,UAAY,GAChCk5D,EAAWzwK,GAAGuqB,MAAMqyF,OAAS,0CAC7B6zD,EAAWzwK,GAAG2gJ,cAAcv9B,WAAU,GACtCqtD,EAAWzwK,GAAGgyK,YAAa,IAE3BvB,EAAWzwK,GAAGuqB,MAAMmyF,gBAAkB,sBACtC+zD,EAAWzwK,GAAGm8E,MAAM5xD,MAAMisC,MAAQ,OAClCi6G,EAAWzwK,GAAGuqB,MAAMgtF,UAAY,GAChCk5D,EAAWzwK,GAAGuqB,MAAMqyF,OAAS,+BAC7B6zD,EAAWzwK,GAAG2gJ,cAAcv9B,WAAU,GACtCqtD,EAAWzwK,GAAGgyK,YAAa,GAGnCmB,EAAS1sB,SAAiC,IAAtB8rB,GAEvBN,EAAYvW,WAAa,SAASC,GAGf,SAFN,GAAKA,EAGX31D,GAAGkB,IAAIuqE,EAAe,CAClB3jK,KAAM,QACNC,MAAO,KAGXi4F,GAAGkB,IAAIuqE,EAAe,CAClB3jK,KAAM,GACNC,MAAO,WAKnBsiK,IAEO4B,GtB5uBPuC,UAAAngE,GACA6jC,eAAA1kC,uEuB/JSihE,GAAN,iCAAMA,EAGG7mK,mBAHH6mK,OAaIhqB,EAAT,SAAsB58I,GAClB,IAAImtG,EAAU,GAAKntG,EAAEkwJ,aAAelwJ,EAAEkwJ,aAAe,GACjD37J,EAAS4jG,GAAGvgF,GAAG,CACf8sF,UAAW,mCACXzI,MAAOj8F,EAAEi8F,MACT0I,QAAS3kG,EAAE2kG,QACXtL,IAAK,CACD8T,QAASntG,EAAE6b,QAAU,GAAM7b,EAAEmwJ,QAAUhjD,EAAU,OAAS,MAGlE,GAAIntG,EAAE6b,QACFtnB,EAAOoR,YAAY3F,EAAE6b,aAClB,CACH,IAAIq9E,EAAKf,GAAGvgF,GAAG,CACXyhF,IAAK,CACDsU,gBAAiB,QAAW3tG,EAAE4tG,MAAQ,KACtCsB,iBAAkB,YAClB2nB,mBAAoB,SACpB5nB,eAAgBjvG,EAAEmwJ,QAAU,UAAY,GAExChzE,OAAQ,UAGhB+b,EAAGx8E,MAAMkzF,cAAgB,OACzBr7G,EAAOoR,YAAYuzF,GAYvB,OAVC3kG,EAAe88G,gBAAkB,IAAIlZ,GAAGiN,gBAAgB,CACrD5yG,OAAQ+B,EACRy1F,aAAc,SAASW,GACfA,EACAwN,GAAGqB,aAAajlG,EAAQ,8BAExB4jG,GAAG0B,gBAAgBtlG,EAAQ,iCAIhCA,GA7CPytC,EAAMl9B,SAASM,cAAc,OACjC9P,KAAKsiB,GAAKoqB,EACVm2D,GAAGkB,IAAIr3D,EAAK,CACRm7C,OAAQ,OAERxgE,QAAS,OACTgxF,gBAAiB,uFA0CrB,IAAIk5D,EAAejqB,EAAa,CAC5Bj4C,QAAS5kG,EAAE+mK,SACX7qE,MAAOkM,GAAK,gBACZtsF,QAASs8E,GAAGvgF,GAAG,CACXiE,QAASssF,GAAK,UACdzD,UAAW,+BACXrL,IAAK,CACD18E,QAAS,OACTysF,WAAY,SACZD,eAAgB,SAChBjsB,MAAO,OACPC,OAAQ,UAGhBgzE,SAAS,IAEb0W,EAAanqJ,MAAMwgE,MAAQ,OAE3B,IAAI6pF,EAAanqB,EAAa,CAC1Bj4C,QAAS5kG,EAAE2wJ,OACXz0D,MAAOkM,GAAK,QACZyF,MAAO9G,EAAAuvB,IACP85B,SAAS,IAGT6W,EAAkBpqB,EAAa,CAC/Bj4C,QAAS5kG,EAAE0mJ,YACXxqD,MAAOkM,GAAK,wBACZyF,MAAO9G,EAAAy/C,IACP4J,SAAS,IAGbnuH,EAAIr8B,YAAYkhK,GAChB7kI,EAAIr8B,YAAYqhK,GAChBhlI,EAAIr8B,YAAYohK,qBAtFXH,EAAe,EAyFxB7zK,IAAA,mBAAA,WACI,OAAOuC,KAAKsiB,OA1FPgvJ,EAAN,GClBMK,GAAa,GCQbC,GAAM,eA2IfC,EAEKvsG,EAAT,SAAewsG,EAAI3zK,EAAO4zK,GACtB,OAAOh7J,KAAK2K,IAAIowJ,EAAI/6J,KAAK6K,IAAIzjB,EAAO4zK,KAG/BC,EAAT,SAAqBC,GACjB,MAAO,CACH9iH,EAAG8iH,EACHC,eAAgB,SAAS5tK,GAErButK,EAAK7xK,KAAKmvD,EAAE85B,GACZjpF,KAAKmvD,EAAE+iH,eAAe5tK,IAE1BgxF,QAAS,WAELu8E,EAAK7xK,KAAKmvD,EAAE85B,GACZjpF,KAAKmvD,EAAEmmC,aAKV68E,EAAT,SAAiB7tK,GACb,OAAO0tK,EAAYI,EAAQC,YAAY/tK,KAGlCguK,EAAT,SAAoB1qF,EAAOC,GACvB,IAAIhoF,EAAOgyK,EAAGU,cAMd,GAAIV,EAAGW,aAAa,sBAAwBX,EAAGW,aAAa,4BAA6B,CACrF,IAAIC,EAAc,IAAIL,EAAQ,IAAK,IAAKP,EAAGa,KAAMb,EAAGc,OACpD,IAEIF,EAAYG,QAAO,WAAa/yK,EAAOgyK,EAAGc,SAC5C,MAAO9vK,IAET4vK,EAAYn9E,UAGZt1F,KAAKmvD,EAAE8iH,SAASjyK,KAAKmvD,EAAE8iH,QAAQ38E,UAC/Bt1F,KAAKmvD,EAAE0jH,cAAc7yK,KAAKmvD,EAAE0jH,aAAav9E,UAC7Ct1F,KAAK4nF,MAAQA,EACb5nF,KAAK6nF,OAASA,EACd7nF,KAAKmvD,EAAE8iH,QAAU,IAAIG,EAAQxqF,EAAOC,EAAQgqF,EAAGa,KAAM7yK,GACrDG,KAAKmvD,EAAE0jH,aAAe,IAAIT,EAAQxqF,EAAOC,EAAQgqF,EAAGa,KAAM7yK,GAC1DG,KAAKmvD,EAAE2jH,aAAe9yK,KAAKmvD,EAAE2jH,cAAgB,IAAIV,EAAQ,EAAG,EAAGP,EAAGa,KAAM7yK,GACxEG,KAAKmvD,EAAE4jH,cAAgB/yK,KAAKmvD,EAAE4jH,eAAiB,IAAIC,EAAO,KAAM,uLAM7D,iBACHhzK,KAAKmvD,EAAE8jH,eAAgB,GAQlBhgD,EAAT,SAAcg/C,EAASrqF,EAAOC,GAU1B,OATK7nF,KAAKmvD,EAAE8jH,eAAiBhB,EAAQ9iH,EAAEy4B,OAAS5nF,KAAK4nF,OAASqqF,EAAQ9iH,EAAE04B,QAAU7nF,KAAK6nF,QACnFyqF,EAAWl0K,KAAK4B,KAAM4nF,GAAgBqqF,EAAQ9iH,EAAEy4B,MAAOC,GAAkBoqF,EAAQ9iH,EAAE04B,QAGvFoqF,EAAQ9iH,EAAE+jH,MACVlzK,KAAKmvD,EAAE8iH,QAAQW,QAAO,WAClBI,EAAOG,mBAAmBC,cAGvBpzK,MAGFilE,EAAT,WAGI,OAFAjlE,KAAKmvD,EAAE8iH,QAAQiB,MACflzK,KAAKmvD,EAAE4jH,cAAcK,WACdpzK,MAGFqzK,EAAT,SAAsBC,EAAQC,EAAUC,EAAWC,IAC9CD,GAAaxzK,KAAKmvD,EAAE8iH,SAASiB,MAC9BlzK,KAAKmvD,EAAE0jH,aAAaD,QAAO,WACvBU,EAAOC,SAASA,GAAUH,cAE9BpzK,KAAKmvD,EAAE0jH,aAAaa,SAASD,GAAczzK,KAAKmvD,EAAE8iH,UAG7CrjK,EAAT,SAAiB+kK,GAGb,OAFAA,EAAKnwE,WAAWC,aAAazjG,KAAM2zK,GACnCA,EAAKnwE,WAAWzqD,YAAY46H,GACrB3zK,MAGF4zK,EAAT,WACI,IAAI3B,EAAU,IAAIG,EAAQpyK,KAAKmvD,EAAE8iH,QAAQrqF,MAAO5nF,KAAKmvD,EAAE8iH,QAAQpqF,OAAQgqF,EAAGa,KAAMb,EAAGU,eAKnF,OAJAvyK,KAAKmvD,EAAE8iH,QAAQiB,MACfjB,EAAQW,QAAO,WACXI,EAAOG,mBAAmBC,cAEvBpB,EAAYC,IAOd4B,EAAT,WACI,IAAInsF,EAAI1nF,KAAKmvD,EAAE8iH,QAAQrqF,MACnBD,EAAI3nF,KAAKmvD,EAAE8iH,QAAQpqF,OACnBj5D,EAAQ,IAAIqmC,WAAWyyB,EAAIC,EAAI,GAInC,OAHA3nF,KAAKmvD,EAAE8iH,QAAQW,QAAO,WAClBf,EAAGiC,WAAW,EAAG,EAAGpsF,EAAGC,EAAGkqF,EAAGa,KAAMb,EAAGU,cAAe3jJ,MAElDA,GAGF1d,EAAT,SAAc8J,GACV,OAAO,WAKH,OAHA62J,EAAK7xK,KAAKmvD,EAAE85B,GAGLjuE,EAAKtZ,MAAM1B,KAAMyB,aA+DvBsyK,EAAT,SAAyBptG,EAAIE,EAAID,EAAIE,EAAItzB,EAAIurD,EAAIq1C,EAAIG,GACjD,IAAIy/B,EAAMptG,EAAKpzB,EACXygI,EAAMntG,EAAKi4B,EACXm1E,EAAM9/B,EAAK5gG,EACX2gI,EAAM5/B,EAAKx1C,EACXq1E,EAAMztG,EAAKC,EAAKpzB,EAAK4gG,EACrBigC,EAAMxtG,EAAKC,EAAKi4B,EAAKw1C,EACrB+/B,EAAMN,EAAIG,EAAMD,EAAID,EACpB7wK,GAAKgxK,EAAID,EAAMD,EAAIG,GAAOC,EAC1Bj5I,GAAK24I,EAAIK,EAAMD,EAAIH,GAAOK,EAC9B,MAAO,CACH1tG,EAAKD,EAAKvjE,EAAEwjE,EAAIE,EAAKD,EAAKzjE,EAAE0jE,EAAI1jE,EAChCgxI,EAAKztE,EAAKtrC,EAAE+4G,EAAIG,EAAK1tE,EAAKxrC,EAAEk5G,EAAIl5G,EAChCsrC,EAAIE,EAAI,IAIP0tG,EAAT,SAAoBnmH,GAChB,IAAIhrD,EAAIgrD,EAAE,GAAI/yB,EAAI+yB,EAAE,GAAIjwB,EAAIiwB,EAAE,GAC1BxnD,EAAIwnD,EAAE,GAAIvrD,EAAIurD,EAAE,GAAII,EAAIJ,EAAE,GAC1Bk8B,EAAIl8B,EAAE,GAAIu5B,EAAIv5B,EAAE,GAAIvxD,EAAIuxD,EAAE,GAC1BkmH,EAAMlxK,EAAEP,EAAEhG,EAAIuG,EAAEorD,EAAEm5B,EAAItsD,EAAEz0B,EAAE/J,EAAIw+B,EAAEmzB,EAAE87B,EAAInsD,EAAEv3B,EAAE+gF,EAAIxpD,EAAEt7B,EAAEynF,EACtD,MAAO,EACFznF,EAAEhG,EAAI2xD,EAAEm5B,GAAK2sF,GAAMn2I,EAAEwpD,EAAItsD,EAAEx+B,GAAKy3K,GAAMj5I,EAAEmzB,EAAIrwB,EAAEt7B,GAAKyxK,GACnD9lH,EAAE87B,EAAI1jF,EAAE/J,GAAKy3K,GAAMlxK,EAAEvG,EAAIshC,EAAEmsD,GAAKgqF,GAAMn2I,EAAEv3B,EAAIxD,EAAEorD,GAAK8lH,GACnD1tK,EAAE+gF,EAAI9kF,EAAEynF,GAAKgqF,GAAMj5I,EAAEivD,EAAIlnF,EAAEukF,GAAK2sF,GAAMlxK,EAAEP,EAAIw4B,EAAEz0B,GAAK0tK,IAuKnDhqE,EAAT,SAA4B/L,GACxB,IAAIt2E,EAAIs2E,EAAOzhG,OACfkD,KAAK6+F,GAAK,GACV7+F,KAAK8+F,GAAK,GACV9+F,KAAKknE,EAAI,GACTlnE,KAAK++F,GAAK,GAEVR,EAAO5jE,MAAK,SAASv3B,EAAGi4B,GACpB,OAAOj4B,EAAE,GAAKi4B,EAAE,MAEpB,IAAK,IAAIx+B,EAAI,EAAGA,EAAIorB,EAAGprB,IACnBmD,KAAK6+F,GAAGx7F,KAAKk7F,EAAO1hG,GAAG,IACvBmD,KAAK8+F,GAAGz7F,KAAKk7F,EAAO1hG,GAAG,IAG3BmD,KAAKknE,EAAE,GAAK,EACZlnE,KAAK++F,GAAG,GAAK,EAEb,IAASliG,EAAI,EAAGA,EAAIorB,EAAI,IAAKprB,EAAG,CAG5B,IAAImiG,EAAKh/F,KAAK6+F,GAAGhiG,EAAI,GAAKmD,KAAK6+F,GAAGhiG,EAAI,GAClCoiG,GAAOj/F,KAAK6+F,GAAGhiG,GAAKmD,KAAK6+F,GAAGhiG,EAAI,IAAMmiG,EACtCt0F,EAAIu0F,EAAMj/F,KAAK++F,GAAGliG,EAAI,GAAK,EAE/BmD,KAAK++F,GAAGliG,IAAMoiG,EAAM,GAAOv0F,EAE3B,IAAIw0F,GACCl/F,KAAK8+F,GAAGjiG,EAAI,GAAKmD,KAAK8+F,GAAGjiG,KAAOmD,KAAK6+F,GAAGhiG,EAAI,GAAKmD,KAAK6+F,GAAGhiG,KACzDmD,KAAK8+F,GAAGjiG,GAAKmD,KAAK8+F,GAAGjiG,EAAI,KAAOmD,KAAK6+F,GAAGhiG,GAAKmD,KAAK6+F,GAAGhiG,EAAI,IAE9DmD,KAAKknE,EAAErqE,IAAM,EAAMqiG,EAAQF,EAAKC,EAAMj/F,KAAKknE,EAAErqE,EAAI,IAAM6N,EAG3D1K,KAAK++F,GAAG92E,EAAI,GAAK,EAGjB,IAASprB,EAAIorB,EAAI,EAAGprB,GAAK,IAAKA,EAC1BmD,KAAK++F,GAAGliG,GAAKmD,KAAK++F,GAAGliG,GAAKmD,KAAK++F,GAAGliG,EAAI,GAAKmD,KAAKknE,EAAErqE,IA6KjD23K,EAAT,SAAoBjB,EAAUkB,GAC1B,OAAO,IAAIzB,EAAO,KAAMO,EAAW,qJAM3BkB,EAAO,yTAOX,SAkBCC,EAAT,SAA4BC,EAAYC,GAuBpC,OAtBA/C,EAAG6C,mBAAqB7C,EAAG6C,oBAAsB,IAAI1B,EAAO,KAAM,gfAe/D,sBAEHK,EAAaj1K,KAAK4B,KAAM6xK,EAAG6C,mBAAoB,CAC3CC,WAAYrvG,GAAM,EAAIqvG,EAAY,GAClCC,SAAUtvG,GAAM,EAAIsvG,EAAU,KAG3B50K,MAIF60K,EAAT,SAA2Bt2E,GAGvB,IAFA,IAAIu2E,EAAe,IAAIxqE,EAAmB/L,GACtC3vE,EAAQ,GACH/xB,EAAI,EAAGA,EAAI,IAAKA,IACrB+xB,EAAMvrB,KAAKiiE,EAAM,EAAGvuD,KAAKuK,MAA0C,IAApCwzJ,EAAaz1E,YAAYxiG,EAAI,MAAa,MAE7E,OAAO+xB,GAsBFmmJ,EAAT,SAAgBC,EAAKC,EAAOC,GAExBF,EAAMH,EAAkBG,GACA,GAApBvzK,UAAU3E,OACVm4K,EAAQC,EAAOF,GAEfC,EAAQJ,EAAkBI,GAC1BC,EAAOL,EAAkBK,IAG7B,IADA,IAAItmJ,EAAQ,GACH/xB,EAAI,EAAGA,EAAI,IAAKA,IACrB+xB,EAAMxpB,OAAOwpB,EAAM9xB,OAAQ,EAAGk4K,EAAIn4K,GAAIo4K,EAAMp4K,GAAIq4K,EAAKr4K,GAAI,KAuB7D,OArBAmD,KAAKmvD,EAAE2jH,aAAaqC,cAAc,IAAK,EAAGvmJ,GAC1C5uB,KAAKmvD,EAAE2jH,aAAaI,IAAI,GAExBrB,EAAGkD,OAASlD,EAAGkD,QAAU,IAAI/B,EAAO,KAAM,4XAWvC,UAEHnB,EAAGkD,OAAOK,SAAS,CACfvuK,IAAK,IAETwsK,EAAaj1K,KAAK4B,KAAM6xK,EAAGkD,OAAQ,IAE5B/0K,MAYFq1K,EAAT,SAAiBp3I,GAEb4zI,EAAGwD,QAAUxD,EAAGwD,SAAW,IAAIrC,EAAO,KAAM,gyBAqBzC,WAGH,IAAK,IAAIn2K,EAAI,EAAGA,EAAI,EAAGA,IACnBw2K,EAAaj1K,KAAK4B,KAAM6xK,EAAGwD,QAAS,CAChCp3I,SAAUlnB,KAAK2K,IAAI,EAAGuc,GACtBq3I,QAAS,CAACt1K,KAAK4nF,MAAO5nF,KAAK6nF,UAInC,OAAO7nF,MAgBFu1K,EAAT,SAAuBrnD,EAAKC,GAqCxB,OApCA0jD,EAAG0D,cAAgB1D,EAAG0D,eAAiB,IAAIvC,EAAO,KAAM,klCA6BrD,iBAEHK,EAAaj1K,KAAK4B,KAAM6xK,EAAG0D,cAAe,CACtCrnD,IAAK5oD,GAAM,EAAI4oD,EAAK,GACpBC,WAAY7oD,GAAM,EAAI6oD,EAAY,KAG/BnuH,MASFw1K,EAAT,SAAeC,GAwBX,OAvBA5D,EAAG2D,MAAQ3D,EAAG2D,OAAS,IAAIxC,EAAO,KAAM,ifAiBrC,SAEHK,EAAaj1K,KAAK4B,KAAM6xK,EAAG2D,MAAO,CAC9BC,OAAQnwG,EAAM,EAAGmwG,EAAQ,KAGtBz1K,MASF01K,EAAT,SAAeD,GAuBX,OAtBA5D,EAAG6D,MAAQ7D,EAAG6D,OAAS,IAAI1C,EAAO,KAAM,spBAgBrC,SAEHK,EAAaj1K,KAAK4B,KAAM6xK,EAAG6D,MAAO,CAC9BD,OAAQnwG,EAAM,EAAGmwG,EAAQ,KAGtBz1K,MAWF21K,EAAT,SAAqBvmD,EAAQwmD,GAgCzB,OA/BA/D,EAAG8D,YAAc9D,EAAG8D,aAAe,IAAI3C,EAAO,KAAM,uZAWjD,eAGHhzK,KAAKmvD,EAAE2jH,aAAa+C,aAAa71K,KAAKmvD,EAAE8iH,SACxCjyK,KAAKmvD,EAAE8iH,QAAQiB,MACflzK,KAAKmvD,EAAE2jH,aAAaF,QAAO,WACvBI,EAAOG,mBAAmBC,cAI9BpzK,KAAKmvD,EAAE2jH,aAAaI,IAAI,GACxBlzK,KAAK81K,aAAa1mD,GAClByiD,EAAG8D,YAAYP,SAAS,CACpBW,gBAAiB,IAErB1C,EAAaj1K,KAAK4B,KAAM6xK,EAAG8D,YAAa,CACpCC,SAAUA,IAEd51K,KAAKmvD,EAAE2jH,aAAakD,MAAM,GAEnBh2K,MASFi2K,EAAT,SAAkBR,GAmBd,OAlBA5D,EAAGoE,SAAWpE,EAAGoE,UAAY,IAAIjD,EAAO,KAAM,mcAY3C,YAEHK,EAAaj1K,KAAK4B,KAAM6xK,EAAGoE,SAAU,CACjCR,OAAQnwG,GAAM,EAAImwG,EAAQ,KAGvBz1K,MAUFk2K,EAAT,SAAkB3tI,EAAMktI,GAqBpB,OApBA5D,EAAGqE,SAAWrE,EAAGqE,UAAY,IAAIlD,EAAO,KAAM,uZAa3C,YAEHK,EAAaj1K,KAAK4B,KAAM6xK,EAAGqE,SAAU,CACjC3tI,KAAM+8B,EAAM,EAAG/8B,EAAM,GACrBktI,OAAQnwG,EAAM,EAAGmwG,EAAQ,KAGtBz1K,MAoBFm2K,EAAT,SAAkB/mD,EAAQulD,EAAYr6E,GAMlCu3E,EAAGuE,gBAAkBvE,EAAGuE,iBAAmB,IAAIpD,EAAO,KAAM,0QASzD,mBAEH,IAAI7rI,EAAS,mMAOLkvI,EAAmB,sgBAgB3BxE,EAAGyE,UAAYzE,EAAGyE,WAAa,IAAItD,EAAO,KAAM7rI,EAAS,+EAItD,aACH0qI,EAAG0E,UAAY1E,EAAG0E,WAAa,IAAIvD,EAAO,KAAM7rI,EAAS,wGAItD,aACH0qI,EAAG2E,UAAY3E,EAAG2E,WAAa,IAAIxD,EAAO,KAAM7rI,EAAS,8KAKtD,aAAaiuI,SAAS,CAAEjD,SAAU,IAIrC,IADA,IAAI1oE,EAAM,GACD5sG,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAIuG,EAAIk3F,EAAQz9F,EAAIka,KAAK2uD,GAAK,EAAI,EAClC+jC,EAAIpmG,KAAK,CAAC+rH,EAASr4G,KAAKm3E,IAAI9qF,GAAKpD,KAAK4nF,MAAOwnC,EAASr4G,KAAKi3E,IAAI5qF,GAAKpD,KAAK6nF,SAE7E,IAAI4uF,EAAQ1/J,KAAKwmB,IAAI,GAAI+nC,GAAM,EAAIqvG,EAAY,IA2B/C,OAxBAtB,EAAaj1K,KAAK4B,KAAM6xK,EAAGuE,gBAAiB,CACxCK,MAAOA,IAIXz2K,KAAKmvD,EAAE2jH,aAAa+C,aAAa71K,KAAKmvD,EAAE8iH,SACxCoB,EAAaj1K,KAAK4B,KAAM6xK,EAAGyE,UAAW,CAClCI,OAAQjtE,EAAI,IACbzpG,KAAKmvD,EAAE8iH,QAASjyK,KAAKmvD,EAAE2jH,cAC1BO,EAAaj1K,KAAK4B,KAAM6xK,EAAG0E,UAAW,CAClCG,OAAQjtE,EAAI,GACZktE,OAAQltE,EAAI,IACbzpG,KAAKmvD,EAAE2jH,aAAc9yK,KAAKmvD,EAAE2jH,cAG/BO,EAAaj1K,KAAK4B,KAAM6xK,EAAGyE,UAAW,CAClCI,OAAQjtE,EAAI,KAEhBzpG,KAAKmvD,EAAE2jH,aAAaI,IAAI,GACxBG,EAAaj1K,KAAK4B,KAAM6xK,EAAG2E,UAAW,CAClCC,MAAO,EAAIA,EACXC,OAAQjtE,EAAI,KAGTzpG,MAqBF42K,EAAT,SAAmBp0C,EAAQC,EAAQo0C,EAAMC,EAAMC,EAAYC,GACvDnF,EAAG+E,UAAY/E,EAAG+E,WAAa,IAAI5D,EAAO,KAAM,6PASxCqD,EAAmB,qoCA2BxB,aAEH,IAAIha,EAAKwa,EAAOr0C,EACZ85B,EAAKwa,EAAOr0C,EACZ77H,EAAImQ,KAAK4yB,KAAK0yH,EAAKA,EAAKC,EAAKA,GAkBjC,OAjBA+W,EAAaj1K,KAAK4B,KAAM6xK,EAAG+E,UAAW,CAClCG,WAAYA,EACZC,eAAgBA,EAChBlvJ,MAAO,CAAC06G,EAAQC,GAChB16G,IAAK,CAAC8uJ,EAAMC,GACZ/+F,MAAO,CAACskF,EAAKz1J,EAAG01J,EAAK11J,GACrB0uK,QAAS,CAACt1K,KAAK4nF,MAAO5nF,KAAK6nF,UAE/BwrF,EAAaj1K,KAAK4B,KAAM6xK,EAAG+E,UAAW,CAClCG,WAAYA,EACZC,eAAgBA,EAChBlvJ,MAAO,CAAC06G,EAAQC,GAChB16G,IAAK,CAAC8uJ,EAAMC,GACZ/+F,MAAO,EAAEukF,EAAK11J,EAAGy1J,EAAKz1J,GACtB0uK,QAAS,CAACt1K,KAAK4nF,MAAO5nF,KAAK6nF,UAGxB7nF,MAWF81K,EAAT,SAAsB1mD,GAuClB,OAtCAyiD,EAAGiE,aAAejE,EAAGiE,cAAgB,IAAI9C,EAAO,KAAM,sGAI9CqD,EAAmB,06BAyBxB,gBAEHhD,EAAaj1K,KAAK4B,KAAM6xK,EAAGiE,aAAc,CACrC/9F,MAAO,CAACq3C,EAASpvH,KAAK4nF,MAAO,KAEjCyrF,EAAaj1K,KAAK4B,KAAM6xK,EAAGiE,aAAc,CACrC/9F,MAAO,CAAC,EAAGq3C,EAASpvH,KAAK6nF,UAGtB7nF,MAYFi3K,EAAT,SAAkBngD,EAASC,EAAS6+C,GAyChC,OAxCA/D,EAAGoF,SAAWpF,EAAGoF,UAAY,IAAIjE,EAAO,KAAM,mKAMtCqD,EAAmB,mgCA0BxB,YAEHhD,EAAaj1K,KAAK4B,KAAM6xK,EAAGoF,SAAU,CACjClvE,OAAQ,CAAC+uB,EAASC,GAClB6+C,SAAUA,EACVN,QAAS,CAACt1K,KAAK4nF,MAAO5nF,KAAK6nF,UAGxB7nF,MAcFk3K,EAAT,SAAuBpgD,EAASC,EAASz8B,EAAO/xD,GAqC5C,OApCAspI,EAAGqF,cAAgBrF,EAAGqF,eAAiB,IAAIlE,EAAO,KAAM,w+BA2BrD,iBAEHK,EAAaj1K,KAAK4B,KAAM6xK,EAAGqF,cAAe,CACtCnvE,OAAQ,CAAC+uB,EAASC,GAClBz8B,MAAOA,EACPv0B,MAAOhvD,KAAK2uD,GAAKn9B,EACjB+sI,QAAS,CAACt1K,KAAK4nF,MAAO5nF,KAAK6nF,UAGxB7nF,MAaFm3K,EAAT,SAAmBrgD,EAASC,EAASz8B,EAAO/xD,GAiCxC,OAhCAspI,EAAGsF,UAAYtF,EAAGsF,WAAa,IAAInE,EAAO,KAAM,yuBAuB7C,aAEHK,EAAaj1K,KAAK4B,KAAM6xK,EAAGsF,UAAW,CAClCpvE,OAAQ,CAAC+uB,EAASC,GAClBz8B,MAAOA,EACPv0B,MAAOhvD,KAAK2uD,GAAKn9B,EACjB+sI,QAAS,CAACt1K,KAAK4nF,MAAO5nF,KAAK6nF,UAGxB7nF,MAUFo3K,EAAT,SAAkBhoD,GAiEd,OAhEAyiD,EAAGwF,UAAYxF,EAAGwF,WAAa,IAAIrE,EAAO,KAAM,sGAIxCqD,EAAmB,k6BAuBxB,aACHxE,EAAGyF,UAAYzF,EAAGyF,WAAa,IAAItE,EAAO,KAAM,sGAIxCqD,EAAmB,g7BAuBxB,aAEHhD,EAAaj1K,KAAK4B,KAAM6xK,EAAGwF,UAAW,CAClCt/F,MAAO,CAACq3C,EAASpvH,KAAK4nF,MAAO,KAEjCyrF,EAAaj1K,KAAK4B,KAAM6xK,EAAGyF,UAAW,CAClCv/F,MAAO,CAAC,EAAGq3C,EAASpvH,KAAK6nF,UAGtB7nF,MAYFu3K,EAAT,SAA2BzgD,EAASC,EAAShxD,GAiDzC,OAhDA8rG,EAAG0F,kBAAoB1F,EAAG0F,mBAAqB,IAAIvE,EAAO,KAAM,g5CAwC7D,qBAEHK,EAAaj1K,KAAK4B,KAAM6xK,EAAG0F,kBAAmB,CAC1CxvE,OAAQ,CAAC+uB,EAASC,GAClBhxD,MAAOA,EACPuvG,QAAS,CAACt1K,KAAK4nF,MAAO5nF,KAAK6nF,UAGxB7nF,MAcFw3K,EAAT,SAAa5B,GAmCT,OAlCA/D,EAAG2F,IAAM3F,EAAG2F,KAAO,IAAIxE,EAAO,KAAM,mlCA2BjC,OAEHK,EAAaj1K,KAAK4B,KAAM6xK,EAAG2F,IAAK,CAC5B5B,SAAUA,EAAWA,EAAWA,EAAWA,EAAWA,EACtDN,QAAS,CAACt1K,KAAK4nF,MAAO5nF,KAAK6nF,UAGxB7nF,MAYFy3K,EAAT,SAAoB3gD,EAASC,EAAS3H,EAAQwmD,GA0B1C,OAzBA/D,EAAG4F,WAAa5F,EAAG4F,YAAcjD,EAAW,+FAIzC,kcAcHnB,EAAaj1K,KAAK4B,KAAM6xK,EAAG4F,WAAY,CACnCroD,OAAQA,EACRwmD,SAAUtwG,GAAM,EAAIswG,EAAU,GAC9B7tE,OAAQ,CAAC+uB,EAASC,GAClBu+C,QAAS,CAACt1K,KAAK4nF,MAAO5nF,KAAK6nF,UAGxB7nF,MAmBF03K,EAAT,SAAoB56E,EAAQ66E,EAASC,GAejC,GAdA/F,EAAG6F,WAAa7F,EAAG6F,YAAclD,EAAW,wEAGzC,2NAWkB,IAHrB13E,EAASv+F,MAAMgC,UAAU8L,OAAO3K,MAAM,GAAIo7F,IAG/BhgG,OACPggG,EAAS,CACLA,EAAO,GAAIA,EAAO,GAAI,EACtBA,EAAO,GAAIA,EAAO,GAAI,EACtB,EAAG,EAAG,QAEP,GAAqB,GAAjBA,EAAOhgG,OACd,KAAM,uCASV,OANAu2K,EAAaj1K,KAAK4B,KAAM6xK,EAAG6F,WAAY,CACnC56E,OAAQ66E,EAAUpD,EAAWz3E,GAAUA,EACvCw4E,QAAS,CAACt1K,KAAK4nF,MAAO5nF,KAAK6nF,QAC3B+vF,gBAAmC,EAAlBA,IAGd53K,MAcF63K,EAAT,SAAqB3/B,EAAQ4/B,GACzB,IAAI10K,EAAI2wK,EAAgBryK,MAAM,KAAMo2K,GAChCz8I,EAAI04I,EAAgBryK,MAAM,KAAMw2I,GAChC/5G,EAh6CR,SAAkB/6B,EAAGi4B,GACjB,MAAO,CACHj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAC/Bj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAC/Bj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAC/Bj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAC/Bj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAC/Bj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAC/Bj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAC/Bj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAC/Bj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,GAAKj4B,EAAE,GAAGi4B,EAAE,IAs5C3BwyF,CAAS0mD,EAAWnxK,GAAIi4B,GAChC,OAAOr7B,KAAK03K,WAAWv5I,IAalB45I,EAAT,SAAejhD,EAASC,EAAS3H,EAAQ90B,GA4BrC,OA3BAu3E,EAAGkG,MAAQlG,EAAGkG,OAASvD,EAAW,4FAI/B,ibAgBHnB,EAAaj1K,KAAK4B,KAAM6xK,EAAGkG,MAAO,CAC9B3oD,OAAQA,EACRrnB,OAAQ,CAAC+uB,EAASC,GAClBz8B,MAAOA,EACPg7E,QAAS,CAACt1K,KAAK4nF,MAAO5nF,KAAK6nF,UAGxB7nF,MAOFqqI,EAAT,WAgBI,OAfAwnC,EAAGxnC,OAASwnC,EAAGxnC,QAAU,IAAI2oC,EAAO,KAAM,kPAS3C,UAECK,EAAaj1K,KAAK4B,KAAM6xK,EAAGxnC,OAAQ,CAC/BirC,QAAS,CAACt1K,KAAK4nF,MAAO5nF,KAAK6nF,UAGxB7nF,MASF0qI,EAAT,SAAiBzP,EAAY+8C,GAwBzB,OAvBAnG,EAAGnnC,QAAUmnC,EAAGnnC,SAAW,IAAIsoC,EAAO,KAAM,0cAe7C,WAECK,EAAaj1K,KAAK4B,KAAM6xK,EAAGnnC,QAAS,CAChCzP,WAAYA,EAAa,EAAI,EAC7BrsH,QAASopK,EAAc,CAACA,EAAY7zK,EAAI,IAAK6zK,EAAY1tF,EAAI,IAAK0tF,EAAY38I,EAAI,IAAK28I,EAAY50K,GAAK,CAAC,EAAE,EAAE,EAAE,GAC/GkyK,QAAS,CAACt1K,KAAK4nF,MAAO5nF,KAAK6nF,UAGxB7nF,MAv2DPkP,EAAe,mBA+Hb+oK,EACAC,EA7CKC,EAAT,aAiCA,IACW3oK,SAASM,cAAc,UAAU+4E,WAAW,sBACrD,MAAOhmF,IAIJgvK,IAAmF,IAA5EA,EAAWuG,yBAAyB/yK,QAAQ,8BAlHxD,SAAuC4jF,GAErC,IAAKA,EAAGupF,aAAa,qBACnB,OAAO,EAIT,IAAI6F,EAAcpvF,EAAGqvF,oBACjBC,EAActvF,EAAGuvF,gBACrBvvF,EAAGwvF,YAAYxvF,EAAGyvF,WAAYH,GAC9BtvF,EAAG0vF,cAAc1vF,EAAGyvF,WAAYzvF,EAAG2vF,mBAAoB3vF,EAAG4vF,SAC1D5vF,EAAG0vF,cAAc1vF,EAAGyvF,WAAYzvF,EAAG6vF,mBAAoB7vF,EAAG4vF,SAC1D5vF,EAAG0vF,cAAc1vF,EAAGyvF,WAAYzvF,EAAG8vF,eAAgB9vF,EAAG+vF,eACtD/vF,EAAG0vF,cAAc1vF,EAAGyvF,WAAYzvF,EAAGgwF,eAAgBhwF,EAAG+vF,eACtD/vF,EAAGiwF,WAAWjwF,EAAGyvF,WAAY,EAAGzvF,EAAGypF,KAAM,EAAG,EAAG,EAAGzpF,EAAGypF,KAAMzpF,EAAGspF,cAAe,MAC7EtpF,EAAGkwF,gBAAgBlwF,EAAGmwF,YAAaf,GACnCpvF,EAAGowF,qBAAqBpwF,EAAGmwF,YAAanwF,EAAGqwF,kBAAmBrwF,EAAGyvF,WAAYH,EAAa,GAG1F,IAMIgB,EAAetwF,EAAGuvF,gBACtBvvF,EAAGwvF,YAAYxvF,EAAGyvF,WAAYa,GAC9BtwF,EAAG0vF,cAAc1vF,EAAGyvF,WAAYzvF,EAAG2vF,mBAAoB3vF,EAAGuwF,QAC1DvwF,EAAG0vF,cAAc1vF,EAAGyvF,WAAYzvF,EAAG6vF,mBAAoB7vF,EAAGuwF,QAC1DvwF,EAAG0vF,cAAc1vF,EAAGyvF,WAAYzvF,EAAG8vF,eAAgB9vF,EAAG+vF,eACtD/vF,EAAG0vF,cAAc1vF,EAAGyvF,WAAYzvF,EAAGgwF,eAAgBhwF,EAAG+vF,eACtD/vF,EAAGiwF,WAAWjwF,EAAGyvF,WAAY,EAAGzvF,EAAGypF,KAAM,EAAG,EAAG,EAAGzpF,EAAGypF,KAAMzpF,EAAG0pF,MAAO,IAAIr9G,aAZ9D,CACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,KAWX,IAAImkH,EAAUxwF,EAAGywF,gBACbC,EAAe1wF,EAAG2wF,aAAa3wF,EAAG4wF,eAClCC,EAAiB7wF,EAAG2wF,aAAa3wF,EAAG8wF,iBACxC9wF,EAAG+wF,aAAaL,EAAc,2GAM9B1wF,EAAG+wF,aAAaF,EAAgB,uHAMhC7wF,EAAGgxF,cAAcN,GACjB1wF,EAAGgxF,cAAcH,GACjB7wF,EAAGixF,aAAaT,EAASE,GACzB1wF,EAAGixF,aAAaT,EAASK,GACzB7wF,EAAGkxF,YAAYV,GAGf,IAAIr7I,EAAS6qD,EAAGmxF,eAChBnxF,EAAGoxF,WAAWpxF,EAAGqxF,aAAcl8I,GAC/B6qD,EAAGsxF,WAAWtxF,EAAGqxF,aAAc,IAAIhlH,aAAa,CAAC,EAAG,IAAK2zB,EAAGuxF,aAC5DvxF,EAAGwxF,wBAAwB,GAC3BxxF,EAAGyxF,oBAAoB,EAAG,EAAGzxF,EAAG0pF,OAAO,EAAO,EAAG,GAGjD,IAAIz/B,EAAQ,IAAIj+E,WAAW,GAQ3B,OAPAg0B,EAAG0xF,WAAWlB,GACdxwF,EAAG2xF,SAAS,EAAG,EAAG,EAAG,GACrB3xF,EAAGwvF,YAAYxvF,EAAGyvF,WAAYa,GAC9BtwF,EAAG4xF,WAAW5xF,EAAG6xF,OAAQ,EAAG,GAC5B7xF,EAAG6qF,WAAW,EAAG,EAAG,EAAG,EAAG7qF,EAAGypF,KAAMzpF,EAAGspF,cAAer/B,GAGjC,MAAbA,EAAM,IAA2B,MAAbA,EAAM,GAkD/B6nC,CAA8BlJ,KAChCoG,EAAkB+C,sBAAsBz6K,UAAUiyK,aAClD0F,EAA4B8C,sBAAsBz6K,UAAU63K,uBAC5D4C,sBAAsBz6K,UAAUiyK,aAhClC,SAAsB3wK,GACpB,MAAgB,6BAATA,QAb+B,KADNonF,EAeHjpF,MAdtBi7K,4BACLr+K,OAAO+G,eAAeslF,EAAI,6BAA8B,CACtDvrF,YAAY,EACZC,cAAc,EACdE,UAAU,EACVM,MAAO,IAAIg6K,IAGRlvF,EAAGgyF,4BAONhD,EAAgB75K,KAAK4B,KAAM6B,GAhBjC,IAAkConF,GA8ChC+xF,sBAAsBz6K,UAAU63K,uBA1BlC,WACE,IAAI8C,EAAahD,EAA0B95K,KAAK4B,MAIhD,OAHuD,IAAnDk7K,EAAW71K,QAAQ,6BACrB61K,EAAW73K,KAAK,4BAEX63K,QA6JXhsK,EAAQ05E,OAAS,WACb,IAAIA,EAAcp5E,SAASM,cAAc,UACzC,IACI+hK,EAAKjpF,EAAOC,WAAW,qBAAsB,CAAEC,oBAAoB,IACrE,MAAOjmF,GACLgvK,EAAK,KAET,IAAKA,EACD,KAAM,sCA4CV,OA1CAjpF,EAAOz5B,EAAI,CACP85B,GAAI4oF,EACJoB,eAAe,EACfhB,QAAS,KACTY,aAAc,KACdE,cAAe,MAInBnqF,EAAOqpF,QAAU/gK,EAAKihK,GACtBvpF,EAAOqqC,KAAO/hH,EAAK+hH,GACnBrqC,EAAO3jB,OAAS/zD,EAAK+zD,GACrB2jB,EAAOh6E,QAAUsC,EAAKtC,GACtBg6E,EAAOgrF,SAAW1iK,EAAK0iK,GACvBhrF,EAAOirF,cAAgB3iK,EAAK2iK,GAG5BjrF,EAAO8rF,mBAAqBxjK,EAAKwjK,GACjC9rF,EAAO2uF,kBAAoBrmK,EAAKqmK,GAChC3uF,EAAO2sF,cAAgBrkK,EAAKqkK,GAC5B3sF,EAAOsuF,cAAgBhmK,EAAKgmK,GAC5BtuF,EAAOktF,aAAe5kK,EAAK4kK,GAC3BltF,EAAO+sF,YAAczkK,EAAKykK,GAC1B/sF,EAAOivF,YAAc3mK,EAAK2mK,GAC1BjvF,EAAO8uF,WAAaxmK,EAAKwmK,GACzB9uF,EAAO6uF,WAAavmK,EAAKumK,GACzB7uF,EAAOguF,UAAY1lK,EAAK0lK,GACxBhuF,EAAOuuF,UAAYjmK,EAAKimK,GACxBvuF,EAAOwuF,SAAWlmK,EAAKkmK,GACvBxuF,EAAOutF,SAAWjlK,EAAKilK,GACvBvtF,EAAOquF,SAAW/lK,EAAK+lK,GACvBruF,EAAO4sF,MAAQtkK,EAAKskK,GACpB5sF,EAAOysF,QAAUnkK,EAAKmkK,GACtBzsF,EAAOmsF,OAAS7jK,EAAK6jK,GACrBnsF,EAAOmvF,MAAQ7mK,EAAK6mK,GACpBnvF,EAAO4uF,IAAMtmK,EAAKsmK,GAClB5uF,EAAOstF,SAAWhlK,EAAKglK,GACvBttF,EAAOqtF,SAAW/kK,EAAK+kK,GACvBrtF,EAAO8sF,MAAQxkK,EAAKwkK,GACpB9sF,EAAOyhD,OAASn5H,EAAKm5H,GACrBzhD,EAAO8hD,QAAUx5H,EAAKw5H,GAEf9hD,GAEX15E,EAAQ2lK,kBAAoBA,EAiD5B,IAKasG,EAIAC,EA4BAC,EAKAC,EAvBLC,EASAC,EAQAC,EApCJzI,GAKSmI,EAAT,SAAkBr1K,GACd,MAA8C,mBAAvClJ,OAAO2D,UAAUqC,SAASxE,KAAK0H,IAGjCs1K,EAAT,SAAuBv7K,EAAMwJ,EAAQqyK,GACjC,IAAIpI,EAASzB,EAAG+H,aAAa/5K,GAG7B,GAFAgyK,EAAGmI,aAAa1G,EAAQjqK,GACxBwoK,EAAGoI,cAAc3G,IACZzB,EAAG8J,mBAAmBrI,EAAQzB,EAAG+J,gBAClC,KAAM,kBAAoBF,EAAU,MAAQ7J,EAAGgK,iBAAiBvI,GAEpE,OAAOA,GAqBF+H,EAAT,SAA8BS,GAC1B,IAAIC,EAASlK,EAAGmK,yBAAyBnK,EAAGkI,gBAAiB+B,GAC7D,OAAkB,OAAXC,GAAwC,IAArBA,EAAOE,WAG5BX,EAAT,SAAgBY,EAAeC,EAAiBT,GAa5C,GAZA17K,KAAKo8K,gBAAkB,KACvBp8K,KAAKq8K,kBAAoB,KACzBr8K,KAAKy5K,QAAU5H,EAAG6H,gBAClBwC,EAAeA,GAAgBX,EAC/BY,EAAiBA,GAAkBX,EACZ,OAAnBC,IACAA,EAAiBJ,EAAqBxJ,EAAGyK,YAAc,QAAWjB,EAAqBxJ,EAAG0K,cAAgB,UAAY,QAE1HJ,EAAiB,aAAeV,EAAiB,UAAYU,EAC7DtK,EAAGqI,aAAal6K,KAAKy5K,QAAS2B,EAAcvJ,EAAGgI,cAAeqC,EAAcR,EAAU,aACtF7J,EAAGqI,aAAal6K,KAAKy5K,QAAS2B,EAAcvJ,EAAGkI,gBAAiBoC,EAAgBT,EAAU,eAC1F7J,EAAGsI,YAAYn6K,KAAKy5K,UACf5H,EAAG2K,oBAAoBx8K,KAAKy5K,QAAS5H,EAAG4K,aACzC,KAAM,eAAiB5K,EAAG6K,kBAAkB18K,KAAKy5K,UArCrD8B,EAAsB,gMAStBC,EAAwB,qIAQxBC,EAAiB,KAwBrBH,EAAO/6K,UAAU+0F,QAAU,WACvBu8E,EAAG8K,cAAc38K,KAAKy5K,SACtBz5K,KAAKy5K,QAAU,MAGnB6B,EAAO/6K,UAAUgzK,SAAW,SAASA,GAEjC,IAAK,IAAI1xK,KADTgwK,EAAG8I,WAAW36K,KAAKy5K,SACFlG,EACb,GAAKA,EAASpxK,eAAeN,GAA7B,CACA,IAAIk2C,EAAW85H,EAAG+K,mBAAmB58K,KAAKy5K,QAAS53K,GACnD,GAAiB,OAAbk2C,EAAJ,CACA,IAAI55C,EAAQo1K,EAAS1xK,GACrB,GAvESiE,EAuEG3H,EAtE8B,kBAAvCvB,OAAO2D,UAAUqC,SAASxE,KAAK0H,GAuE9B,OAAQ3H,EAAMrB,QACV,KAAK,EAAG+0K,EAAGgL,WAAW9kI,EAAU,IAAIud,aAAan3D,IAAS,MAC1D,KAAK,EAAG0zK,EAAGiL,WAAW/kI,EAAU,IAAIud,aAAan3D,IAAS,MAC1D,KAAK,EAAG0zK,EAAGkL,WAAWhlI,EAAU,IAAIud,aAAan3D,IAAS,MAC1D,KAAK,EAAG0zK,EAAGmL,WAAWjlI,EAAU,IAAIud,aAAan3D,IAAS,MAC1D,KAAK,EAAG0zK,EAAGoL,iBAAiBllI,GAAU,EAAO,IAAIud,aAAan3D,IAAS,MACvE,KAAK,GAAI0zK,EAAGqL,iBAAiBnlI,GAAU,EAAO,IAAIud,aAAan3D,IAAS,cAC/D,KAAM,qCAAuC0D,EAAO,eAAiB1D,EAAMrB,WAErF,CAAA,IAAIq+K,EAASh9K,GAGhB,KAAM,6BAA+B0D,EAAO,uBAAyB1D,GAAS,aAAayE,WAF3FivK,EAAGsL,UAAUplI,EAAU55C,KAlFnC,IAAiB2H,EAwFb,OAAO9F,MAKXs7K,EAAO/6K,UAAU60K,SAAW,SAASA,GAEjC,IAAK,IAAIvzK,KADTgwK,EAAG8I,WAAW36K,KAAKy5K,SACFrE,EACRA,EAASjzK,eAAeN,IAC7BgwK,EAAGuL,UAAUvL,EAAG+K,mBAAmB58K,KAAKy5K,QAAS53K,GAAOuzK,EAASvzK,IAGrE,OAAO7B,MAGXs7K,EAAO/6K,UAAU6yK,SAAW,SAASzoK,EAAMy+E,EAAKx+E,EAAO4oG,GACnD,IAAIn1G,EACAu8K,EAAW/I,EAAGwL,aAAaxL,EAAGyL,UAClCl0F,EAAMA,IAAQ/qF,GAAa+qF,EAAMwxF,EAAS,IAAMA,EAAS,GAAK,EAC9DjwK,EAAOA,IAAStM,GAAasM,EAAOiwK,EAAS,IAAMA,EAAS,GAAK,EACjEhwK,EAAQA,IAAUvM,GAAauM,EAAQgwK,EAAS,IAAMA,EAAS,GAAK,EACpEpnE,EAASA,IAAWn1G,GAAam1G,EAASonE,EAAS,IAAMA,EAAS,GAAK,EAChD,MAAnB/I,EAAG0L,eACH1L,EAAG0L,aAAe1L,EAAGuI,gBAEzBvI,EAAGwI,WAAWxI,EAAGyI,aAAczI,EAAG0L,cAClC1L,EAAG0I,WAAW1I,EAAGyI,aAAc,IAAIhlH,aAAa,CAAE3qD,EAAMy+E,EAAKz+E,EAAM6oG,EAAQ5oG,EAAOw+E,EAAKx+E,EAAO4oG,IAAWq+D,EAAG2L,aACnF,MAArB3L,EAAG4L,iBACH5L,EAAG4L,eAAiB5L,EAAGuI,eACvBvI,EAAGwI,WAAWxI,EAAGyI,aAAczI,EAAG4L,gBAClC5L,EAAG0I,WAAW1I,EAAGyI,aAAc,IAAIhlH,aAAa,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAMu8G,EAAG2L,cAExD,MAAxBx9K,KAAKo8K,kBACLp8K,KAAKo8K,gBAAkBvK,EAAG6L,kBAAkB19K,KAAKy5K,QAAS,UAC1D5H,EAAG4I,wBAAwBz6K,KAAKo8K,kBAEN,MAA1Bp8K,KAAKq8K,oBACLr8K,KAAKq8K,kBAAoBxK,EAAG6L,kBAAkB19K,KAAKy5K,QAAS,aAC5D5H,EAAG4I,wBAAwBz6K,KAAKq8K,oBAEpCxK,EAAG8I,WAAW36K,KAAKy5K,SACnB5H,EAAGwI,WAAWxI,EAAGyI,aAAczI,EAAG0L,cAClC1L,EAAG6I,oBAAoB16K,KAAKo8K,gBAAiB,EAAGvK,EAAGc,OAAO,EAAO,EAAG,GACpEd,EAAGwI,WAAWxI,EAAGyI,aAAczI,EAAG4L,gBAClC5L,EAAG6I,oBAAoB16K,KAAKq8K,kBAAmB,EAAGxK,EAAGc,OAAO,EAAO,EAAG,GACtEd,EAAGgJ,WAAWhJ,EAAG8L,eAAgB,EAAG,IAGxCrC,EAAOnI,iBAAmB,WAEtB,OADAtB,EAAG+L,cAAgB/L,EAAG+L,eAAiB,IAAItC,EACpCzJ,EAAG+L,eAGPtC,GAgDXhxE,EAAmB/pG,UAAU8+F,YAAc,SAAS5jE,OAChD,IACI6jE,EAAM,EACNC,EAFIv/F,KAAK8+F,GAAGhiG,OAEF,EAOPyiG,EAAMD,EAAM,GAAG,CAClB,IAAIp5F,EAAKq5F,EAAMD,GAAQ,EAEnBt/F,KAAK6+F,GAAG34F,GAAKu1B,EACb8jE,EAAMr5F,EAENo5F,EAAMp5F,EAId,IAAIyhF,EAAI3nF,KAAK6+F,GAAGU,GAAOv/F,KAAK6+F,GAAGS,GAC3Bl8F,GAAKpD,KAAK6+F,GAAGU,GAAO9jE,GAAKksD,EACzBtsD,GAAKI,EAAIz7B,KAAK6+F,GAAGS,IAAQ3X,EAG7B,OAAOvkF,EAAIpD,KAAK8+F,GAAGQ,GAAOjkE,EAAIr7B,KAAK8+F,GAAGS,KAChCn8F,EAAIA,EAAIA,EAAIA,GAAKpD,KAAK++F,GAAGO,IAAQjkE,EAAIA,EAAIA,EAAIA,GAAKr7B,KAAK++F,GAAGQ,KAAS5X,EAAIA,GAAK,GAItF,IAAIyqF,EAAW,eAOFyL,EAAT,SAAiBj2F,EAAOC,EAAQk0F,EAAQl8K,GACpCG,KAAKipF,GAAK4oF,EACV7xK,KAAKjD,GAAK80K,EAAG2G,gBACbx4K,KAAK4nF,MAAQA,EACb5nF,KAAK6nF,OAASA,EACd7nF,KAAK+7K,OAASA,EACd/7K,KAAKH,KAAOA,EAEZgyK,EAAG4G,YAAY5G,EAAG6G,WAAY14K,KAAKjD,IACnC80K,EAAG8G,cAAc9G,EAAG6G,WAAY7G,EAAG+G,mBAAoB/G,EAAG2H,QAC1D3H,EAAG8G,cAAc9G,EAAG6G,WAAY7G,EAAGiH,mBAAoBjH,EAAG2H,QAC1D3H,EAAG8G,cAAc9G,EAAG6G,WAAY7G,EAAGkH,eAAgBlH,EAAGmH,eACtDnH,EAAG8G,cAAc9G,EAAG6G,WAAY7G,EAAGoH,eAAgBpH,EAAGmH,eAClDpxF,GAASC,GAAQgqF,EAAGqH,WAAWrH,EAAG6G,WAAY,EAAG14K,KAAK+7K,OAAQn0F,EAAOC,EAAQ,EAAG7nF,KAAK+7K,OAAQ/7K,KAAKH,KAAM,OA0EvGi+K,EAAT,SAAmB7L,GACD,MAAVrpF,IAAgBA,EAASp5E,SAASM,cAAc,WACpD84E,EAAOhB,MAAQqqF,EAAQrqF,MACvBgB,EAAOf,OAASoqF,EAAQpqF,OACxB,IAAI1pD,EAAIyqD,EAAOC,WAAW,MAE1B,OADA1qD,EAAEitF,UAAU,EAAG,EAAGxiC,EAAOhB,MAAOgB,EAAOf,QAChC1pD,GAnGX0/I,EAAQxL,YAAc,SAAS/tK,GAC3B,IAAI2tK,EAAU,IAAI4L,EAAQ,EAAG,EAAGhM,EAAGa,KAAMb,EAAGU,eAE5C,OADAN,EAAQC,eAAe5tK,GAChB2tK,GAmBX4L,EAAQt9K,UAAU2xK,eAAiB,SAAS5tK,GACxCtE,KAAK4nF,MAAQtjF,EAAQsjF,OAAStjF,EAAQy5K,WACtC/9K,KAAK6nF,OAASvjF,EAAQujF,QAAUvjF,EAAQ05K,YACxCnM,EAAG4G,YAAY5G,EAAG6G,WAAY14K,KAAKjD,IACnC80K,EAAGqH,WAAWrH,EAAG6G,WAAY,EAAG14K,KAAK+7K,OAAQ/7K,KAAK+7K,OAAQ/7K,KAAKH,KAAMyE,IAGzEu5K,EAAQt9K,UAAU40K,cAAgB,SAASvtF,EAAOC,EAAQ7jE,GACtDhkB,KAAK4nF,MAAQA,EACb5nF,KAAK6nF,OAASA,EACd7nF,KAAK+7K,OAASlK,EAAGa,KACjB1yK,KAAKH,KAAOgyK,EAAGU,cACfV,EAAG4G,YAAY5G,EAAG6G,WAAY14K,KAAKjD,IACnC80K,EAAGqH,WAAWrH,EAAG6G,WAAY,EAAG7G,EAAGa,KAAM9qF,EAAOC,EAAQ,EAAGgqF,EAAGa,KAAM1yK,KAAKH,KAAM,IAAIo1D,WAAWjxC,KAGlG65J,EAAQt9K,UAAU+0F,QAAU,WACxBu8E,EAAGoM,cAAcj+K,KAAKjD,IACtBiD,KAAKjD,GAAK,MAGd8gL,EAAQt9K,UAAU2yK,IAAM,SAASgL,GAC7BrM,EAAGsM,cAActM,EAAGuM,UAAYF,GAAQ,IACxCrM,EAAG4G,YAAY5G,EAAG6G,WAAY14K,KAAKjD,KAGvC8gL,EAAQt9K,UAAUy1K,MAAQ,SAASkI,GAC/BrM,EAAGsM,cAActM,EAAGuM,UAAYF,GAAQ,IACxCrM,EAAG4G,YAAY5G,EAAG6G,WAAY,OAGlCmF,EAAQt9K,UAAUs1K,aAAe,SAASjuF,EAAOC,EAAQk0F,EAAQl8K,GAE7D,GAAwB,GAApB4B,UAAU3E,OAAa,CACvB,IAAIm1K,EAAUxwK,UAAU,GACxBmmF,EAAQqqF,EAAQrqF,MAChBC,EAASoqF,EAAQpqF,OACjBk0F,EAAS9J,EAAQ8J,OACjBl8K,EAAOoyK,EAAQpyK,KAIf+nF,GAAS5nF,KAAK4nF,OAASC,GAAU7nF,KAAK6nF,QAAUk0F,GAAU/7K,KAAK+7K,QAAUl8K,GAAQG,KAAKH,OACtFG,KAAK4nF,MAAQA,EACb5nF,KAAK6nF,OAASA,EACd7nF,KAAK+7K,OAASA,EACd/7K,KAAKH,KAAOA,EACZgyK,EAAG4G,YAAY5G,EAAG6G,WAAY14K,KAAKjD,IACnC80K,EAAGqH,WAAWrH,EAAG6G,WAAY,EAAG14K,KAAK+7K,OAAQn0F,EAAOC,EAAQ,EAAG7nF,KAAK+7K,OAAQ/7K,KAAKH,KAAM,QAI/Fg+K,EAAQt9K,UAAUqyK,OAAS,SAAS1tG,GAKhC,GAHA2sG,EAAGwG,YAAcxG,EAAGwG,aAAexG,EAAGyG,oBACtCzG,EAAGsH,gBAAgBtH,EAAGuH,YAAavH,EAAGwG,aACtCxG,EAAGwH,qBAAqBxH,EAAGuH,YAAavH,EAAGyH,kBAAmBzH,EAAG6G,WAAY14K,KAAKjD,GAAI,GAClF80K,EAAGwM,uBAAuBxM,EAAGuH,eAAiBvH,EAAGyM,qBACjD,MAAM,IAAIrhL,MAAM,0BAEpB40K,EAAG+I,SAAS,EAAG,EAAG56K,KAAK4nF,MAAO5nF,KAAK6nF,QAGnC3iB,IAGA2sG,EAAGsH,gBAAgBtH,EAAGuH,YAAa,OAGvC,IAAIxwF,EAAS,KA2Cb,OAhCAi1F,EAAQt9K,UAAUg+K,gBAAkB,SAASr5G,GAMzC,OALAA,EAAS44G,EAAU99K,OACnBA,KAAK+7K,OAASlK,EAAGa,KACjB1yK,KAAKH,KAAOgyK,EAAGU,cACfV,EAAG4G,YAAY5G,EAAG6G,WAAY14K,KAAKjD,IACnC80K,EAAGqH,WAAWrH,EAAG6G,WAAY,EAAG7G,EAAGa,KAAMb,EAAGa,KAAMb,EAAGU,cAAe3pF,GAC7D5oF,MAGX69K,EAAQt9K,UAAUi+K,QAAU,SAASlmE,GACjCt4G,KAAKkzK,MACLF,EAAOG,mBAAmBC,WAC1B,IAAI7qI,EAAOvoC,KAAK4nF,MAAQ5nF,KAAK6nF,OAAS,EAClC42F,EAAS,IAAIxpH,WAAW1sB,GACxBpK,EAAI2/I,EAAU99K,MACdgkB,EAAOma,EAAE+tG,gBAAgBlsI,KAAK4nF,MAAO5nF,KAAK6nF,QAC9CgqF,EAAGiC,WAAW,EAAG,EAAG9zK,KAAK4nF,MAAO5nF,KAAK6nF,OAAQgqF,EAAGa,KAAMb,EAAGU,cAAekM,GACxE,IAAK,IAAI5hL,EAAI,EAAGA,EAAI0rC,EAAM1rC,IACtBmnB,EAAKA,KAAKnnB,GAAK4hL,EAAO5hL,GAE1BshC,EAAEgwE,aAAanqF,EAAM,EAAG,GACxBs0F,EAAM1oG,IAAMg5E,EAAO8T,aAGvBmhF,EAAQt9K,UAAUmzK,SAAW,SAASptK,GAClC,IAAIugB,EACJA,EAAOvgB,EAAMvJ,GAAIuJ,EAAMvJ,GAAKiD,KAAKjD,GAAIiD,KAAKjD,GAAK8pB,EAC/CA,EAAOvgB,EAAMshF,MAAOthF,EAAMshF,MAAQ5nF,KAAK4nF,MAAO5nF,KAAK4nF,MAAQ/gE,EAC3DA,EAAOvgB,EAAMuhF,OAAQvhF,EAAMuhF,OAAS7nF,KAAK6nF,OAAQ7nF,KAAK6nF,OAAShhE,EAC/DA,EAAOvgB,EAAMy1K,OAAQz1K,EAAMy1K,OAAS/7K,KAAK+7K,OAAQ/7K,KAAK+7K,OAASl1J,GAG5Dg3J,EAvII,GA6JXxH,EAAmB,2MA8nCvB,OAAOnnK,EA52DY,GCPfwvK,GAAW,KACf,IACIA,GAAW9M,GAAGhpF,SAChB,MAAO/lF,aAGO87K,KACZ,IAAKD,IAAYA,GAASvvH,EAAE85B,GAAG21F,gBAC3B,IACIF,GAAW9M,GAAGhpF,SAChB,MAAO/lF,IAGb,OAAO67K,GCPJ,OAAMG,GAAuB,CAChC90C,UAAA,SAAUnuD,OAEFlvC,EAAMl9B,SAASM,cAAc,OAC7B7Q,EAAc,CACdqF,QAASooC,GAITpvC,EAAUs+E,EAAOt+E,QACjBsrF,EAAShN,EAAOgN,OACpB,IAAKtrF,IAAYsrF,EACb,OAAO,EAGX,IAAI8gC,EAAS9gC,EAAOqiC,YAChB6zD,EAAqBl2F,EAAO8mE,cAAcpyJ,EAAQsrF,QAElD61C,EAAM57B,GAAG4B,QAAQnnG,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,OAAQ,IAAK,IAAK,GACxEH,EAAIz3C,SAAS,GAAKwuF,EAAI72C,OAAQD,EAAI13C,SAAS,GAAKwuF,EAAI52C,QAEpDk3F,EAAal8E,GAAGja,OAAOlB,EAAGC,GAEpB0U,EAAM0iF,EAAWl2F,WAAW,MA6HtC,OA5HIwT,EAAIqP,OACAqzE,EAAWn3F,MAAQtqF,EAAQsrF,OAAOhB,QAClCyU,EAAIsP,uBAAwB,GAEhCtP,EAAI0O,UAAUztG,EAAQsrF,OAAQ,EAAG,EAAGlB,EAAGC,GACvC0U,EAAIyP,UAqHR9yD,YAjHA,WAEI,IAAI27H,EAAa,EAAGC,EAAW,EAC/BloI,EAAIiiE,UAAYkE,GAAK,sCAAwC,aAE7D,IAAImsE,EAAWL,KACf,GAAKK,EAAL,CAGA,IAAI/M,EAAU+M,EAAS/M,QAAQ8M,GAC/BC,EAAS/rD,KAAKg/C,GAAShtG,SAEvB,IAAIg6G,EAAmB,IAAIjlE,GAAS,CAChChhC,MAAO65B,GAAK,qCACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,IACLw2F,UAA8B,IAAlBy8D,EAAa,GACzBv5D,WAAYu2D,GACZriE,SAAU,SAAUl0F,GAChBu5J,EAAav5J,EAAM,GAAK,EACxB4jK,EAAS/rD,KAAKg/C,GAASyC,mBAAmBC,EAAYC,GAAU3vG,SAChE84D,EAAgBrF,YAGpBwmD,EAAiB,IAAIllE,GAAS,CAC9BhhC,MAAO65B,GAAK,mCACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,IACLw2F,UAA4B,IAAhB08D,EAAW,GACvBx5D,WAAYu2D,GACZriE,SAAU,SAAUl0F,GAChBw5J,EAAWx5J,EAAM,GAAK,EACtB4jK,EAAS/rD,KAAKg/C,GAASyC,mBAAmBC,EAAYC,GAAU3vG,SAChE84D,EAAgBrF,YAGxBumD,EAAiBxmE,aAAarxF,MAAMmtF,aAAe,OACnD7nE,EAAIr8B,YAAY4uK,EAAiBxmE,cACjC/rE,EAAIr8B,YAAY6uK,EAAezmE,cAI/B,IAAIiL,EAAiBl0G,SAASM,cAAc,OAC5C+yF,GAAGkB,IAAI2f,EAAgB,CACnB97B,MAAO,QACPstB,WAAY,QACZrtB,OAAQ,QACR0xB,gBAAiB,UACjBtE,UAAW,OACXb,UAAW,sEACXX,SAAU,SACVnrD,SAAU,WACVqzD,WAAY,OACZt0F,QAAS,OACTysF,WAAY,SACZD,eAAgB,SAChBiE,YAAa,eAKb,IAFJ,IAAI8lB,EAAmC,GAE1B/gI,EAAI,EAAGA,EAAI6sH,EAAO5sH,OAAQD,IAC/B+gI,EAAgBv6H,KAAK,CACjBi1G,MAAOz7G,IAAMiiL,EAAqBE,EAAWt1D,EAAO7sH,GAAGS,QAAQsrF,OAC/D4wB,QAASkQ,EAAO7sH,GAAG28G,QACnBmQ,WAAYD,EAAO7sH,GAAG8sH,aAIlC,IAAIoU,EAAkB,IAAIpE,GAAgB,CACtC/xC,MAAO33C,SAAS,GAAKy3C,GACrBG,OAAQ53C,SAAS,GAAK03C,GACtB+hC,OAAQkU,IAGRuhD,EAAsBt8E,GAAGvgF,GAAG,CAC5ByhF,IAAK,CACDz7C,SAAU,WACV8rD,UAAW,0BACXxsB,MAAO33C,SAAS,GAAKy3C,GAAK,KAC1BG,OAAQ53C,SAAS,GAAK03C,GAAK,QAGnCw3F,EAAoB9uK,YAAY0tH,EAAgBtlB,cAChDiL,EAAerzG,YAAY8uK,GAE3BzyI,EAAIr8B,YAAYqzG,GAEhB,IACIs7D,EAAS/rD,KAAKg/C,GAASyC,mBAAmBC,EAAYC,GAAU3vG,SAChE84D,EAAgBrF,SAClB,MAAM71H,GACH6pC,EAAYq6F,cAAclkI,GAG/B5D,EAAOq2F,QAAU,WACb2pF,EAAiB3pF,UACjB4pF,EAAe5pF,UACf28E,EAAQ38E,WAEZr2F,EAAOgpJ,SAAW,WAEd,OADAhpJ,EAAOq2F,UACA,CACHq/E,WAAYA,EACZC,SAAUA,OAKC,GAEhB31K,GAGXyC,MAAA,SAAMk6E,GACF,IAAIt+E,EAAUs+E,EAAOt+E,QACjBq3K,EAAa/4F,EAAOrzE,MAAMosK,WAC1BC,EAAWh5F,EAAOrzE,MAAMqsK,SACxB1qD,EAAUtuC,EAAOsuC,QACrB,IAAK5sH,GAA0B,OAAfq3K,GAAoC,OAAbC,IAAsB1qD,EACzD,OAAO,EACXA,EAAQQ,OAAM,GACd,IAAIs0D,EAAWL,KACf,IAAKK,EACD,OAAO,EAEX,IAAI/M,EAAU+M,EAAS/M,QAAQ30K,EAAQsrF,QAcvC,OAbAo2F,EAAS/rD,KAAKg/C,GAASyC,mBAAmBC,EAAYC,GAAU3vG,SAChE3nE,EAAQ8tH,UAAU,EAAG,EAAG9tH,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,QAC7DvqF,EAAQytG,UAAUi0E,EAAU,EAAG,GAC/B/M,EAAQ38E,UACR40B,EAAQQ,OAAM,GACdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,wBACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CACLrzE,MAAOqzE,EAAOrzE,WAIf,ICjLF62K,GAAa,CAEtBr1C,UAAA,SAAUnuD,OAoGGyjG,EAAT,WACI10K,EAAOslC,SAASqvI,EAAUnhL,OAC1ByM,EAAQqlC,SAASsvI,EAAWphL,OAC5BirF,EAAMn5C,SAASuvI,EAASrhL,OACxBq1G,EAASvjE,SAASwvI,EAAYthL,OAC9B,IAAIwvG,EAAW/kB,EAAOmiC,WAAapgH,EAAOC,EACtCgjG,EAAYhlB,EAAOoiC,YAAc5hC,EAAMoqB,EAEvC7F,GAAY,IACR+xE,IACA/0K,GAAQi+E,EAAOmiC,WAAangH,EAAQ,EACpC00K,EAAUnhL,MAAQ,GAAKwM,GAEvBg1K,IACA/0K,GAASg+E,EAAOmiC,WAAapgH,EAAO,EACpC40K,EAAWphL,MAAQ,GAAKyM,GAE5B+iG,EAAW,GAEXA,EAAW41C,IACPm8B,IACA/0K,GAAQi+E,EAAOmiC,WAAangH,EAAQ24I,EACpC+7B,EAAUnhL,MAAQ,GAAKwM,GAEvBg1K,IACA/0K,GAASg+E,EAAOmiC,WAAapgH,EAAO44I,EACpCg8B,EAAWphL,MAAQ,GAAKyM,GAE5B+iG,EAAW41C,GAEX31C,GAAa,IACTgyE,IACAx2F,GAAOR,EAAOoiC,YAAcxX,EAAS,EACrCgsE,EAASrhL,MAAQ,GAAKirF,GAEtBy2F,IACArsE,GAAU5qB,EAAOoiC,YAAc5hC,EAAM,EACrCq2F,EAAYthL,MAAQ,GAAKq1G,GAE7B5F,EAAY,GAEZA,EAAY41C,IACRo8B,IACAx2F,GAAOR,EAAOoiC,YAAcxX,EAASgwC,EACrCg8B,EAASrhL,MAAQ,GAAKirF,GAEtBy2F,IACArsE,GAAU5qB,EAAOoiC,YAAc5hC,EAAMo6D,EACrCi8B,EAAYthL,MAAQ,GAAKq1G,GAE7B5F,EAAY41C,GAEhBs8B,EAAQv/C,aAAa,CACjB9kG,GAAI9wB,EACJ+wB,GAAI0tD,EACJxB,MAAO+lB,EACP9lB,OAAQ+lB,IAIZ8xE,GAAc,EACdC,GAAe,EACfC,GAAa,EACbC,GAAgB,GA6DX56G,EAAT,SAAgBgmC,GACZ,IAAMwzB,EAAM57B,GAAG4B,QAAQwG,EAAUrjB,MAAOqjB,EAAUpjB,OAAQ,IAAK,IAAK,GACpE9hB,EAAQ04D,EAAI72C,MAAQqjB,EAAUrjB,MAE9B,IAAMhmD,EAASihE,GAAGiC,aAAa,IAAK,IAAK25B,EAAI72C,MAAO62C,EAAI52C,QAExDk3F,EAAW33J,MAAMwgE,MAAQgB,EAAOmiC,WAAahlD,EAAQ,KACrDg5G,EAAW33J,MAAMygE,OAASe,EAAOoiC,YAAcjlD,EAAQ,KAEvDg6G,EAAc34J,MAAMzc,KAAQi3B,EAAOnG,EAAIwvE,EAAUxvE,EAAIsqC,EAAS,KAC9Dg6G,EAAc34J,MAAMgiE,IAAOxnD,EAAOlG,EAAIuvE,EAAUvvE,EAAIqqC,EAAS,KAE7Dp7D,EAAOslC,SAAS,IAAMg7D,EAAUxvE,GAChC2tD,EAAMn5C,SAAS,IAAMg7D,EAAUvvE,GAC/B9wB,EAAQqlC,SAAS,IAAMg7D,EAAUxvE,EAAIwvE,EAAUrjB,MAAQgB,EAAOmiC,aAC9DvX,EAASvjE,SAAS,IAAMg7D,EAAUvvE,EAAIuvE,EAAUpjB,OAASe,EAAOoiC,cAChEs0D,EAAUnhL,MAAQ,GAAKwM,EACvB60K,EAASrhL,MAAQ,GAAKirF,EACtBm2F,EAAWphL,MAAQ,GAAKyM,EACxB60K,EAAYthL,MAAQ,GAAKq1G,EAEzB3Q,GAAGuJ,qBAAqBn8D,SAAS,GAAM,GAAK81B,IAAS,SAAUp3D,GAC3D+0G,EAAet8F,MAAM+sF,WAAa,OAASxlG,EAAM,IACvB,IAAtBqxK,EAAgB58K,IAChB27K,EAAW33J,MAAM+sF,WAAa,OAASxlG,EAAM,QAGrD+0G,EAAet8F,MAAMm6G,mBAAsB3/F,EAAOnG,EAAK,MAASmG,EAAOlG,EAAK,KAE5EokJ,EAAQt/C,SAASz6D,IA5Pf6iB,EAAShN,EAAOgN,OACtB,IAAKA,EACD,OAAO,EACX,IAAMm2F,EAAal8E,GAAGja,SAEdq3F,EAAMp9E,GAAG4B,QAAQ7b,EAAOmiC,WAAYniC,EAAOoiC,YAAa,IAAK,IAAK,GAClEtjC,EAAIz3C,SAAS,GAAKgwI,EAAIr4F,OAAQD,EAAI13C,SAAS,GAAKgwI,EAAIp4F,QACpDq4F,EAAgBx4F,EAAIkB,EAAOmiC,WAC/Bg0D,EAAWn3F,MAAQF,EACnBq3F,EAAWl3F,OAASF,EACpBo3F,EAAW33J,MAAMC,QAAU,QAC3B03J,EAAWl2F,WAAW,MAAMkiB,UAAUniB,EAAOqkC,kBAAkBizD,GAAgB,EAAG,EAAGx4F,EAAGC,GAG5F,IAAMj7C,EAAMl9B,SAASM,cAAc,OAC7B7Q,EAAc,CAChBqF,QAASooC,GAEbA,EAAIiiE,UAAYkE,GAAK,2BAA6B,aAClD,IAGI9sC,EAHAp7D,EAAO,EAAGC,EAAQ,EAAGw+E,EAAM,EAAGoqB,EAAS,EACvCksE,GAAc,EAAOC,GAAe,EAAOC,GAAa,EAAOC,GAAgB,EAC7Et8B,EAAW3nE,EAAO2nE,SAAUC,EAAY5nE,EAAO4nE,UAO/C28B,EAAYt9E,GAAGvgF,GAAG,CACpByhF,IAAK,CAACmQ,WAAY,OAAQrsB,OAAQ,UAEhCu4F,EAAYv9E,GAAGvgF,GAAG,CACpByhF,IAAK,CAACmQ,WAAY,OAAQrsB,OAAQ,UAEtCn7C,EAAIr8B,YAAY8vK,GAChBzzI,EAAIr8B,YAAY+vK,GAEhB,IAAMd,EAAY/nE,GAAM,CACpBpuE,KAAM,EACNtpC,KAAM,SACN+hB,KAAMgnE,EAAOmiC,WACbrpG,IAAK6hI,EACLx/C,IAAK,CAACnc,MAAO,OAAQ4sB,YAAa,QAClCtvC,SAAU,SAAS9pC,GACfskJ,GAAc,EACdL,OAGFE,EAAahoE,GAAM,CACrBpuE,KAAM,EACNtpC,KAAM,SACN+hB,KAAMgnE,EAAOmiC,WACbrpG,IAAK6hI,EACLx/C,IAAK,CAACnc,MAAO,QACb1iB,SAAU,SAAS9pC,GACfukJ,GAAe,EACfN,OAGFG,EAAWjoE,GAAM,CACnBpuE,KAAM,EACNtpC,KAAM,SACN+hB,KAAMgnE,EAAOoiC,YACbtpG,IAAK8hI,EACLz/C,IAAK,CAACnc,MAAO,OAAQ4sB,YAAa,QAClCtvC,SAAU,SAAS9pC,GACfwkJ,GAAa,EACbP,OAGFI,EAAcloE,GAAM,CACtBpuE,KAAM,EACNtpC,KAAM,SACN+hB,KAAMgnE,EAAOoiC,YACbtpG,IAAK8hI,EACLz/C,IAAK,CAACnc,MAAO,QACb1iB,SAAU,SAAS9pC,GACfykJ,GAAgB,EAChBR,OAIFgB,EAAa,CACfh5J,QAAS,eACTugE,MAAO,QAEXu4F,EAAU3jG,OACNqmB,GAAGvgF,GAAG,CAACiE,QAASssF,GAAK,oBAAsB,IAAK9O,IAAKs8E,IACrDf,EACAz8E,GAAGvgF,GAAG,CAACiE,QAASssF,GAAK,qBAAuB,IAAK9O,IAAKs8E,IACtDd,GAEJa,EAAU5jG,OACNqmB,GAAGvgF,GAAG,CAACiE,QAASssF,GAAK,mBAAqB,IAAK9O,IAAKs8E,IACpDb,EACA38E,GAAGvgF,GAAG,CAACiE,QAASssF,GAAK,sBAAwB,IAAK9O,IAAKs8E,IACvDZ,GAqEJ,IAAIa,GAAkB,EAClBC,EAAsB,IAAIvpE,GAAS,CACnC7tE,MAAM,EACN6vC,MAAO65B,GAAK,2BACZuE,UAAU,EACVlyC,SAAU,SAAS7pC,GACfilJ,EAAkBjlJ,EAClBykJ,EAAQr/C,WAAW6/C,MAG3B5zI,EAAIr8B,YAAYwyF,GAAGvgF,GAAG,CAClByhF,IAAK,CACD97D,MAAO,WAIf,IAAI+3I,EAAkB,CAAC77K,EAAG,EAAGmmF,EAAG,EAAGjvD,EAAG,EAAGj4B,EAAG,GACtC0hK,EAAkB,CACpB,CAAC3gK,EAAG,EAAGmmF,EAAG,EAAGjvD,EAAG,EAAGj4B,EAAG,GACtB,CAACe,EAAG,IAAKmmF,EAAG,IAAKjvD,EAAG,IAAKj4B,EAAG,GAC5B,CAACe,EAAG,EAAGmmF,EAAG,EAAGjvD,EAAG,EAAGj4B,EAAG,IAE1B0hK,EAAgBzhK,KAAK,CACjBc,EAAGy3E,EAAOksE,gBAAgB3jJ,EAC1BmmF,EAAG1O,EAAOksE,gBAAgBx9D,EAC1BjvD,EAAGugD,EAAOksE,gBAAgBzsH,EAC1Bj4B,EAAG,IAEP0hK,EAAgBzhK,KAAK,CACjBc,EAAGy3E,EAAOmsE,kBAAkB5jJ,EAC5BmmF,EAAG1O,EAAOmsE,kBAAkBz9D,EAC5BjvD,EAAGugD,EAAOmsE,kBAAkB1sH,EAC5Bj4B,EAAG,IAGP,IAAM2hK,EAAe,IAAI7kD,GAAa,CAClClnC,MAAO65B,GAAK,oBACZyN,SAAUwkD,EACVx1D,SAAU,SAAS1N,GACfo+E,EAAkBp+E,EA8G1B,SAAkBA,GAEd,IAAI0tB,EACc,IAAd1tB,EAAQx+F,GACRksH,EAAc,kBACdkxD,EAAep5J,MAAM+sF,WAAa,GAClC4qE,EAAW33J,MAAM+sF,WAAa,KAE9Bmb,EAAe1tB,EAAQz9F,EAAIy9F,EAAQtX,EAAIsX,EAAQvmE,EAAI,MAAe,wBAA0B,kBAC5FmlJ,EAAep5J,MAAM+sF,WAAatR,GAAG0L,eAAe9M,SAASG,GAE7DiB,GAAGuJ,qBAAqBn8D,SAAS,GAAM,GAAK81B,IAAS,SAAUp3D,GAC3DowK,EAAW33J,MAAM+sF,WAAa,OAASxlG,EAAM,QAGrDowK,EAAW33J,MAAMgtF,UAAY,eAAiBkb,EA5H1CmxD,CAAS7+E,MAKX8+E,EAAU79E,GAAGvgF,GAAG,CAClByhF,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,mBAGxBnnE,EAAIr8B,YAAYqwK,GAChBA,EAAQrwK,YAAYkwK,EAAoB9nE,cACxCioE,EAAQrwK,YAAY00J,EAAatsD,cAqCjC,IAAMiL,EAAiB7gB,GAAGvgF,GAAG,CACzByhF,IAAK,CACDnc,MAAO,QACPqtB,UAAW,OACXC,WAAY,QACZrtB,OAAQ,QACR0xB,gBAAiB,UACjBjxD,SAAU,WACV8rD,UAAW,sEACXX,SAAU,SACVkI,WAAY,OACZ7D,YAAa,aACbivD,YAAa,UAGrBrjD,EAAe7H,cAAgB,WAC3B,OAAO,GAEX,IAAM2kE,EAAiB39E,GAAGvgF,GAAG,CACzByhF,IAAK,CACDz7C,SAAU,WACV39C,KAAM,IACNy+E,IAAK,IACLoqB,OAAQ,IACR5oG,MAAO,OAGf84G,EAAerzG,YAAYmwK,GAE3B,IAAMT,EAAgBvwK,SAASM,cAAc,OAC7CiwK,EAAc34J,MAAMkhC,SAAW,WAC/By3H,EAAc34J,MAAMzc,KAAO,MAC3Bo1K,EAAc34J,MAAMgiE,IAAM,MAC1Bs6B,EAAerzG,YAAY0vK,GAGLl9E,GAAG4L,cAAcsxE,EAAe,IACxC1vK,YAAY0uK,GAG1BA,EAAW33J,MAAMgtF,UAAY,8BAC7B2qE,EAAW33J,MAAMkhC,SAAW,WAC5By2H,EAAW33J,MAAMzc,KAAO,MACxBo0K,EAAW33J,MAAMgiE,IAAM,MAEvB18C,EAAIr8B,YAAYqzG,GAChB,IAAMo8D,EAAU,IAAIjhD,GAAQ,CACxBpjG,EAAG,EACHC,EAAG,EACHksD,MAAOgB,EAAOmiC,WACdljC,OAAQe,EAAOoiC,YACfjlD,MAAOA,EACPb,SAAUD,EACVi6D,KAAMqkB,EACNvkB,KAAMwkB,IAqCV,OAnCAv+E,EAAO66G,EAAQpiD,gBACfqiD,EAAc1vK,YAAYyvK,EAAQrnE,cAoBlCx5G,EAAOq2F,QAAU,WACbwqF,EAAQxqF,UACRirF,EAAoBjrF,WAExBr2F,EAAOgpJ,SAAW,WAEd,OADAhpJ,EAAOq2F,UACA,CACH3qF,KAAMA,EACNC,MAAOA,EACPw+E,IAAKA,EACLoqB,OAAQA,EACRmY,UAAiC,IAAtBq0D,EAAgB58K,EAAU,KAAO48K,IAG7C/gL,GAGXyC,MAAA,SAAMk6E,GACF,IAAMgN,EAAShN,EAAOgN,OAChBshC,EAAUtuC,EAAOsuC,QACvB,SAAKthC,IAAWshC,GAAW91G,MAAMwnE,EAAOrzE,MAAMoC,OAASyJ,MAAMwnE,EAAOrzE,MAAMqC,QAAUwJ,MAAMwnE,EAAOrzE,MAAM6gF,MAAQh1E,MAAMwnE,EAAOrzE,MAAMirG,WAGlI0W,EAAQQ,OAAM,GACd9hC,EAAOyjB,aAAazwB,EAAOrzE,OAC3B2hH,EAAQQ,OAAM,GACdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,cACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CACLrzE,MAAOuI,KAAKC,MAAMD,KAAK4c,UAAUkuD,EAAOrzE,aAGzC,KCjXFo4K,GAAW,CAEpB52C,UAAA,SAAUnuD,OAEFt+E,EAAUs+E,EAAOt+E,QACjBsjL,EAAShlG,EAAOgN,OACpB,IAAKtrF,IAAYsjL,EACb,OAAO,EAGX,IAAIl3D,EAASk3D,EAAO31D,YAChB6zD,EAAqB8B,EAAOlxB,cAAcpyJ,EAAQsrF,QAElDq3F,EAAMp9E,GAAG4B,QAAQnnG,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,OAAQ,IAAK,IAAK,GACxEH,EAAIz3C,SAAS,GAAKgwI,EAAIr4F,OAAQD,EAAI13C,SAAS,GAAKgwI,EAAIp4F,QAEpDk3F,EAAal8E,GAAGja,OAAOlB,EAAGC,GAEpBk5F,EAAM9B,EAAWl2F,WAAW,MAClCg4F,EAAIn1E,OACAqzE,EAAWn3F,MAAQtqF,EAAQsrF,OAAOhB,QAClCi5F,EAAIl1E,uBAAwB,GAEhCk1E,EAAI91E,UAAUztG,EAAQsrF,OAAQ,EAAG,EAAGlB,EAAGC,GACvCk5F,EAAI/0E,UAGR,IAIIiyB,EAJA+wC,EAAMt/J,SAASM,cAAc,OAC7B7Q,EAAc,CACdqF,QAASwqK,GAuWb,OAFA91H,YAjWA,WAE4B17C,EAAQsrF,OAAOhB,MAGvCknF,EAAIngE,UAAYkE,GAAK,6BAA+B,aAEpD,IAAIiuE,EAAS,CACT38K,EAAG,CAAC,CAAC,EAAG,GAAI,CAAC,EAAI,EAAG,EAAI,GAAI,CAAC,EAAI,EAAG,EAAI,GAAI,CAAC,EAAG,IAChDmmF,EAAG,CAAC,CAAC,EAAG,GAAI,CAAC,EAAI,EAAG,EAAI,GAAI,CAAC,EAAI,EAAG,EAAI,GAAI,CAAC,EAAG,IAChDjvD,EAAG,CAAC,CAAC,EAAG,GAAI,CAAC,EAAI,EAAG,EAAI,GAAI,CAAC,EAAI,EAAG,EAAI,GAAI,CAAC,EAAG,KAGhD2jJ,EAAWL,KACf,GAAKK,EAAL,CAGA,IAcI+B,EAdA9O,EAAU+M,EAAS/M,QAAQ8M,GAC/BC,EAAS/rD,KAAKg/C,GAAShtG,SAsQvB,IAAI18D,EAAQ,aAvPSmC,GACjB,IAAIgiC,EAAMl9B,SAASM,cAAc,OACjC48B,EAAImvE,cAAgB,WAChB,OAAO,GAEXnvE,EAAItlB,MAAMkhC,SAAW,WACrB5b,EAAItlB,MAAMmtF,aAAe,OACzB,IAAI34F,EAAO,MACPm5J,EAASrqK,EAAEqqK,OACfgM,EAAc,IAAIlgE,GAAS,CACvB7I,UAAW,CACP,CACIj7G,GAAI,MACJi8E,MAAO65B,GAAK,sBAEhB,CACI91G,GAAI,MACJi8E,MAAO65B,GAAK,QAEhB,CACI91G,GAAI,QACJi8E,MAAO65B,GAAK,UAEhB,CACI91G,GAAI,OACJi8E,MAAO65B,GAAK,UAGpBuO,UAAW,MACX9R,SAAU,SAASvyG,GAEF,SADb6e,EAAO7e,KAEHg4K,EAAS,CACL5wK,EAAG,CAAC,CAAC,EAAG,GAAI,CAAC,EAAI,EAAG,EAAI,GAAI,CAAC,EAAI,EAAG,EAAI,GAAI,CAAC,EAAG,IAChDmmF,EAAG,CAAC,CAAC,EAAG,GAAI,CAAC,EAAI,EAAG,EAAI,GAAI,CAAC,EAAI,EAAG,EAAI,GAAI,CAAC,EAAG,IAChDjvD,EAAG,CAAC,CAAC,EAAG,GAAI,CAAC,EAAI,EAAG,EAAI,GAAI,CAAC,EAAI,EAAG,EAAI,GAAI,CAAC,EAAG,MAGxD,IAAImgF,EAAQu5D,EAAO5wK,EACN,UAATyX,IACA4/F,EAAQu5D,EAAOzqF,GAEN,SAAT1uE,IACA4/F,EAAQu5D,EAAO15I,GAElB2lJ,EAAW1iD,OAAO,EAAG2iD,EAAQzlE,EAAM,GAAG,GAAKylE,GAC3Cx2K,EAAW6zH,OAAO9iB,EAAM,GAAG,GAAK0lE,EAAOD,EAAQzlE,EAAM,GAAG,GAAKylE,GAC7D1zF,EAAW+wC,OAAO9iB,EAAM,GAAG,GAAK0lE,EAAOD,EAAQzlE,EAAM,GAAG,GAAKylE,GAC7Dl3E,EAAWu0B,OAAO4iD,EAAOD,EAAQzlE,EAAM,GAAG,GAAKylE,GAEhDE,OAGRz0I,EAAIr8B,YAAY0wK,EAAYtoE,cAE5B,IAAI2oE,EAAY5xK,SAASM,cAAc,OACvC+yF,GAAGkB,IAAIq9E,EAAW,CACd94H,SAAU,WACV2sD,UAAW,OACX6C,YAAa,eAEjBprE,EAAIr8B,YAAY+wK,GAEhB,IAAIF,EAAQ,IAAKD,EAAQ,IACrBr4F,EAASp5E,SAASM,cAAc,UACpC84E,EAAOhB,MAAQs5F,EACft4F,EAAOf,OAASo5F,EAChBp+E,GAAGkB,IAAInb,EAAQ,CACXurB,WAAY,UACZC,UAAW,8BAEf,IAAI/X,EAAMzT,EAAOC,WAAW,eASnB41C,EAAIrjG,GACT,OAAOrkB,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,EAAGwZ,aAG1BimJ,EAAY5lJ,EAAGC,EAAGwpC,EAAUo8G,GACjC,IACIC,EAAY7lJ,EAAG8lJ,EAAY/lJ,EAC3B6uB,EAAQ96C,SAASM,cAAc,OA4DnC,OA3DA+yF,GAAGkB,IAAIz5C,EAAO,CACVhC,SAAU,WACV39C,KAAO8wB,EAAI6+F,EAAgB,KAC3BlxC,IAAM1tD,EAAI4+F,EAAgB,KAC1B1yC,MAAO0yC,OACPzyC,OAAQyyC,OACRnmB,WAAY,OACZwD,OAAQ,OACRhB,aAAc2jB,OACdlmB,UAAW,uBACXuH,WAAY,OACZorD,YAAa,SAUhBz8G,EAAcyxD,gBAAkB,IAAIlZ,GAAGiN,gBAAgB,CACpD5yG,OAAQotD,EACRgpC,YAAa,EACbiB,UAAW,SAASp8C,GAChBA,EAAM04C,sBACa,gBAAf14C,EAAMt4C,OACN2hL,EAAY/lJ,EACZ8lJ,EAAY7lJ,GAEK,SAAjByc,EAAMw4C,QAAoC,gBAAfx4C,EAAMt4C,OAC5ByhL,IACDE,GAAarpI,EAAMg6C,IAEvB12D,EAAI1kB,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAIs/J,EAAOM,IAChCD,GAAappI,EAAMi6C,GACnB12D,EAAI3kB,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAIq/J,EAAOM,IArBxC1+E,GAAGkB,IAAIz5C,EAAO,CACV3/C,KAAO8wB,EAAI6+F,EAAgB,KAC3BlxC,IAAM1tD,EAAI4+F,EAAgB,OAqBtBp1D,EAAS,CACLzpC,EAAGA,EACHC,EAAGA,QAMnB0lJ,EAAU/wK,YAAYi6C,GAErBA,EAAcg0E,OAAS,SAAUmjD,EAAMC,GAGpCH,EADA7lJ,EAAIgmJ,EAEJF,EAHA/lJ,EAAIgmJ,EAIJ5+E,GAAGkB,IAAIz5C,EAAO,CACV3/C,KAAO8wB,EAAI6+F,EAAgB,KAC3BlxC,IAAM1tD,EAAI4+F,EAAgB,QAI3BhwE,WAGFq3H,EAAc9kL,EAAG4+B,EAAGC,GACZ,QAAT9f,IACAm5J,EAAO5wK,EAAEtH,GAAK,CAAC4hI,EAAIhjG,EAAIylJ,GAAQziD,EAAI,EAAI/iG,EAAIulJ,IAC3ClM,EAAOzqF,EAAEztF,GAAK,CAAC4hI,EAAIhjG,EAAIylJ,GAAQziD,EAAI,EAAI/iG,EAAIulJ,IAC3ClM,EAAO15I,EAAEx+B,GAAK,CAAC4hI,EAAIhjG,EAAIylJ,GAAQziD,EAAI,EAAI/iG,EAAIulJ,KAElC,QAATrlK,IACAm5J,EAAO5wK,EAAEtH,GAAK,CAAC4hI,EAAIhjG,EAAIylJ,GAAQziD,EAAI,EAAI/iG,EAAIulJ,KAElC,UAATrlK,IACAm5J,EAAOzqF,EAAEztF,GAAK,CAAC4hI,EAAIhjG,EAAIylJ,GAAQziD,EAAI,EAAI/iG,EAAIulJ,KAElC,SAATrlK,IACAm5J,EAAO15I,EAAEx+B,GAAK,CAAC4hI,EAAIhjG,EAAIylJ,GAAQziD,EAAI,EAAI/iG,EAAIulJ,KA3FnDG,EAAU/wK,YAAYu4E,GA+FtB,IAAIo4F,EAAKK,EAAY,EAAGJ,GAAO,SAAU7lK,GACrCumK,EAAc,EAAGvmK,EAAIqgB,EAAGrgB,EAAIsgB,GAC5BylJ,OACD,GACC12K,EAAK42K,EAAYH,EAAQ,EAAGD,EAAQ,EAAI,GAAG,SAAU7lK,GACrDumK,EAAc,EAAGvmK,EAAIqgB,EAAGrgB,EAAIsgB,GAC5BylJ,OAEA5zF,EAAK8zF,EAAYH,EAAQ,EAAI,EAAGD,EAAQ,GAAG,SAAU7lK,GACrDumK,EAAc,EAAGvmK,EAAIqgB,EAAGrgB,EAAIsgB,GAC5BylJ,OAEAp3E,EAAKs3E,EAAYH,EAAO,GAAG,SAAU9lK,GACrCumK,EAAc,EAAGvmK,EAAIqgB,EAAGrgB,EAAIsgB,GAC5BylJ,OACD,YAGMA,IACLv4F,EAAOhB,MAAQgB,EAAOhB,MACtByU,EAAMzT,EAAOC,WAAW,MAOxB,IALA,IAAI+4F,EAAY,CACZz9K,EAAG,GACHmmF,EAAG,GACHjvD,EAAG,IAEEiwD,EAAI,EAAGA,EAAIypF,EAAO5wK,EAAErH,OAAQwuF,IACjCs2F,EAAUz9K,EAAEd,KAAK0xK,EAAO5wK,EAAEmnF,IAC1Bs2F,EAAUt3F,EAAEjnF,KAAK0xK,EAAOzqF,EAAEgB,IAC1Bs2F,EAAUvmJ,EAAEh4B,KAAK0xK,EAAO15I,EAAEiwD,aAGrBu2F,EAAUrmE,GACfnf,EAAIwrB,YAEJ,IADA,IAAIi6D,EAAS,IAAIj/E,GAAGyH,mBAAmBkR,GAC9B3+G,EAAI,EAAGA,EAAI,IAAKA,IAAK,CAC1B,IAAI6+B,EAAIomJ,EAAOziF,YAAYxiG,EAAI,KAC/B6+B,EAAI3kB,KAAK2K,IAAI,EAAG3K,KAAK6K,IAAI,EAAG8Z,IAElB,IAAN7+B,EACAw/F,EAAIyrB,OAAOjrH,EAAI,IAAMqkL,EAAOD,EAAQvlJ,EAAIulJ,GAExC5kF,EAAI0rB,OAAOlrH,EAAI,IAAMqkL,EAAOD,EAAQvlJ,EAAIulJ,GAGhD5kF,EAAI2rB,SAGR3rB,EAAIqP,OACS,QAAT9vF,GACAygF,EAAIkqB,YAAc,QAClBs7D,EAAUD,EAAUz9K,KAEpBk4F,EAAI8pB,YAAc,GAClB9pB,EAAIkqB,YAAc,MAClBs7D,EAAUD,EAAUz9K,GACpBk4F,EAAIkqB,YAAc,QAClBs7D,EAAUD,EAAUt3F,GACpB+R,EAAIkqB,YAAc,OAClBs7D,EAAUD,EAAUvmJ,IAExBghE,EAAIyP,UACJphG,EAAEw6D,SAAS08G,GAGfT,IAGAnhL,KAAK+hL,OAAS,WACV,OAAOr1I,GAEX1sC,KAAKs1F,QAAU,WACV0rF,EAAWjlE,gBAAgBzmB,UAC3B7qF,EAAWsxG,gBAAgBzmB,UAC3B/H,EAAWwuB,gBAAgBzmB,UAC3ByU,EAAWgS,gBAAgBzmB,WAIxB,CAAgB,CACxBy/E,OAAQ+L,EACR57G,SAAU,SAAU9pD,GAChB0lK,EAAS1lK,aAtQb,IACI4jK,EAAS/rD,KAAKg/C,GAAS8C,OAAO+L,EAAO38K,EAAG28K,EAAOx2F,EAAGw2F,EAAOzlJ,GAAG4pC,SACxD84D,GACAA,EAAgBrF,SAEtB,MAAM71H,GACHisK,EAAY/nC,cAAclkI,IAiQ3Bm/K,MAKRlT,EAAIz+J,YAAY9H,EAAMw5K,UAItB,IAAIr+D,EAAiBl0G,SAASM,cAAc,OAC5C+yF,GAAGkB,IAAI2f,EAAgB,CACnB97B,MAAO,QACPstB,WAAY,QACZrtB,OAAQ,QACR0xB,gBAAiB,UACjBtE,UAAW,OACXb,UAAW,sEACXX,SAAU,SACVnrD,SAAU,WACVqzD,WAAY,OACZt0F,QAAS,OACTysF,WAAY,SACZD,eAAgB,SAChBiE,YAAa,eAKb,IAFJ,IAAI8lB,EAAmC,GAE1BtxC,EAAI,EAAGA,EAAIo9B,EAAO5sH,OAAQwvF,IAC/BsxC,EAAgBv6H,KAAK,CACjBi1G,MAAOhsB,IAAMwyF,EAAqBE,EAAWt1D,EAAOp9B,GAAGhvF,QAAQsrF,OAC/D4wB,QAASkQ,EAAOp9B,GAAGktB,QACnBmQ,WAAYD,EAAOp9B,GAAGq9B,aAIlCoU,EAAkB,IAAIpE,GAAgB,CAClC/xC,MAAO33C,SAAS,GAAKy3C,GACrBG,OAAQ53C,SAAS,GAAK03C,GACtB+hC,OAAQkU,IAGZ,IAAIuhD,EAAsBt8E,GAAGvgF,GAAG,CAC5ByhF,IAAK,CACDz7C,SAAU,WACV8rD,UAAW,0BACXxsB,MAAO33C,SAAS,GAAKy3C,GAAK,KAC1BG,OAAQ53C,SAAS,GAAK03C,GAAK,QAGnCw3F,EAAoB9uK,YAAY0tH,EAAgBtlB,cAChDiL,EAAerzG,YAAY8uK,GAG3BrQ,EAAIz+J,YAAYqzG,GAEhBzkH,EAAOq2F,QAAU,WACb/sF,EAAM+sF,UACN28E,EAAQ38E,UACRyrF,EAAYzrF,WAEhBr2F,EAAOgpJ,SAAW,WAEd,OADAhpJ,EAAOq2F,UACA,CACHy/E,OAAQ+L,OAKG,GAEhB7hL,GAGXyC,MAAA,SAAMk6E,GACF,IAAIt+E,EAAUs+E,EAAOt+E,QACjBy3K,EAASn5F,EAAOrzE,MAAMwsK,OACtB7qD,EAAUtuC,EAAOsuC,QACrB,IAAK5sH,GAAsB,OAAXy3K,IAAoB7qD,EAChC,OAAO,EACXA,EAAQQ,OAAM,GACd,IAAIs0D,EAAWL,KACf,IAAKK,EACD,OAAO,EAEX,IAAI/M,EAAU+M,EAAS/M,QAAQ30K,EAAQsrF,QAcvC,OAbAo2F,EAAS/rD,KAAKg/C,GAAS8C,OAAOA,EAAO5wK,EAAG4wK,EAAOzqF,EAAGyqF,EAAO15I,GAAG4pC,SAC5D3nE,EAAQ8tH,UAAU,EAAG,EAAG9tH,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,QAC7DvqF,EAAQytG,UAAUi0E,EAAU,EAAG,GAC/B/M,EAAQ38E,UACR40B,EAAQQ,OAAM,GACdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,YACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CACLrzE,MAAOqzE,EAAOrzE,WAIf,ICvaf05K,GAAiB9yK,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SCQ/G,OAAM4iL,GAAO,CAEhBn4C,UAAA,SAAUnuD,OAsLG4hD,EAAT,WACI,IAAInhC,EAAO8lF,EAAa7pE,MAA4BzvB,WAAW,MAC/DwT,EAAIqP,OACJrP,EAAI+uB,UAAU,EAAG,EAAG+2D,EAAa7pE,MAAM1wB,MAAOu6F,EAAa7pE,MAAMzwB,QAE7Du6F,IACIj2D,IACA9vB,EAAIwP,UAAUs2E,EAAa7pE,MAAM1wB,MAAO,GACxCyU,EAAIt2B,OAAM,EAAI,IAEdqmD,IACA/vB,EAAIwP,UAAU,EAAGs2E,EAAa7pE,MAAMzwB,QACpCwU,EAAIt2B,MAAM,GAAG,KAIrB,IAAK,IAAIlpE,EAAI,EAAGA,EAAI6sH,EAAO5sH,OAAQD,IAC/Bw/F,EAAIqP,OACC02E,GAAgBtD,IAAuBjiL,IACpCsvH,IACA9vB,EAAIwP,UAAUs2E,EAAa7pE,MAAM1wB,MAAO,GACxCyU,EAAIt2B,OAAM,EAAI,IAEdqmD,IACA/vB,EAAIwP,UAAU,EAAGs2E,EAAa7pE,MAAMzwB,QACpCwU,EAAIt2B,MAAM,GAAG,KAGjBs2B,EAAIzT,OAAOhB,MAAQ8hC,EAAO7sH,GAAGS,QAAQsrF,OAAOhB,QAC5CyU,EAAIsP,uBAAwB,GAEhCtP,EAAI8pB,YAAcuD,EAAO7sH,GAAG28G,QAC5Bnd,EAAImR,yBAA2Bkc,EAAO7sH,GAAG8sH,WACzCttB,EAAI0O,UAAU2e,EAAO7sH,GAAGS,QAAQsrF,OAAQ,EAAG,EAAGu5F,EAAa7pE,MAAM1wB,MAAOu6F,EAAa7pE,MAAMzwB,QAC3FwU,EAAIyP,UAERiyB,EAAgBrF,SAChBr8B,EAAIyP,WA1NJxuG,EAAUs+E,EAAOt+E,QACjBsrF,EAAShN,EAAOgN,OACpB,IAAKtrF,IAAYsrF,EACb,OAAO,EAGX,IAAI8gC,EAAS9gC,EAAOqiC,YAChB6zD,EAAqBl2F,EAAO8mE,cAAcpyJ,EAAQsrF,QAElD61C,EAAM57B,GAAG4B,QAAQnnG,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,OAAQ,IAAK,IAAK,GACxEH,EAAIz3C,SAAS,GAAKwuF,EAAI72C,OAAQD,EAAI13C,SAAS,GAAKwuF,EAAI52C,QAEpDn7C,EAAMl9B,SAASM,cAAc,OAC7B7Q,EAAc,CACdqF,QAASooC,GAETy/E,GAAe,EACfC,GAAa,EACbg2D,GAAe,EACnB11I,EAAIiiE,UAAYkE,GAAK,2BAA6B,aAGlD,IAAIwvE,EAAqB,IAAIrrE,GAAS,CAClC7tE,KAAMgjF,EACNnzC,MAAO65B,GAAK,0BAA4B,KACtCuE,UAAQ,EACVlyC,SAAU,SAAS9pC,GACf+wF,EAAe/wF,EACfoiG,KAEJz5B,IAAK,CACDwQ,aAAc,UAGlB+tE,EAAmB,IAAItrE,GAAS,CAChC7tE,KAAMijF,EACNpzC,MAAO65B,GAAK,wBAA0B,KACtCuE,UAAU,EACVlyC,SAAU,SAAS9pC,GACfgxF,EAAahxF,EACboiG,KAEJz5B,IAAK,CACDwQ,aAAc,UAGtB7nE,EAAIr8B,YAAYgyK,EAAmB5pE,cACnC/rE,EAAIr8B,YAAYiyK,EAAiB7pE,cAMjC,IAAI8pE,EAAW/yK,SAASM,cAAc,OACtC+yF,GAAG+M,iBAAiB2yE,EAAU,iBAAiB,WAC3C,OAAO,KAEXA,EAASpzE,YAAc0D,GAAK,qBAC5B0vE,EAASn7J,MAAMwgE,MAAQ,QACvB26F,EAASn7J,MAAMygE,OAAS,OACxB06F,EAASn7J,MAAMmyI,WAAa,OAC5BgpB,EAASn7J,MAAMw5F,UAAY,SAC3B2hE,EAASn7J,MAAMsyF,SAAW,OAC1B6oE,EAASn7J,MAAMo7J,cAAgB,MAC/BD,EAASn7J,MAAMq7J,oBAAsB,OACrCF,EAASn7J,MAAMgtF,UAAY,qCAC3BmuE,EAASn7J,MAAM+sF,WAAa,OAAS3C,EAAAywE,IAAe,wBACpDM,EAASn7J,MAAMuyF,eAAiB,KAChC4oE,EAASn7J,MAAMmyF,gBAAkB,UAEjC,IAAImpE,EAAWlzK,SAASM,cAAc,OACtC+yF,GAAG+M,iBAAiB8yE,EAAU,iBAAiB,WAC3C,OAAO,KAEXA,EAASvzE,YAAc0D,GAAK,qBAC5B6vE,EAASt7J,MAAMwgE,MAAQ,QACvB86F,EAASt7J,MAAMygE,OAAS,OACxB66F,EAASt7J,MAAMmyI,WAAa,OAC5BmpB,EAASt7J,MAAMw5F,UAAY,SAC3B8hE,EAASt7J,MAAMsyF,SAAW,OAC1BgpE,EAASt7J,MAAMo7J,cAAgB,MAC/BE,EAASt7J,MAAMu7J,qBAAuB,OACtCD,EAASt7J,MAAMuwF,OAAS,UACxB+qE,EAASt7J,MAAMmyF,gBAAkB,qBACjCmpE,EAASt7J,MAAMuyF,eAAiB,KAEhC9W,GAAG+M,iBAAiB2yE,EAAU,iBAAiB,YACtB,IAAjBH,IACAG,EAASn7J,MAAMmyF,gBAAkB,WAEzC1W,GAAG+M,iBAAiB2yE,EAAU,gBAAgB,YACrB,IAAjBH,IACAG,EAASn7J,MAAMmyF,gBAAkB,yBAEzC1W,GAAG+M,iBAAiB8yE,EAAU,iBAAiB,YACtB,IAAjBN,IACAM,EAASt7J,MAAMmyF,gBAAkB,WAEzC1W,GAAG+M,iBAAiB8yE,EAAU,gBAAgB,YACrB,IAAjBN,IACAM,EAASt7J,MAAMmyF,gBAAkB,yBAGzCgpE,EAASlvE,QAAU,WACf+uE,GAAe,EAEfM,EAASt7J,MAAM+sF,WAAa,GAC5BuuE,EAASt7J,MAAMmyF,gBAAkB,qBACjCmpE,EAASt7J,MAAMgtF,UAAY,GAC3BsuE,EAASt7J,MAAMuwF,OAAS,UAExB4qE,EAASn7J,MAAM+sF,WAAa,OAAS3C,EAAAywE,IAAe,wBACpDM,EAASn7J,MAAMuyF,eAAiB,KAChC4oE,EAASn7J,MAAMmyF,gBAAkB,UACjCgpE,EAASn7J,MAAMuwF,OAAS,UACxB4qE,EAASn7J,MAAMgtF,UAAY,qCAE3BopB,KAEJklD,EAASrvE,QAAU,WACf+uE,GAAe,EAEfG,EAASn7J,MAAM+sF,WAAa,GAC5BouE,EAASn7J,MAAMmyF,gBAAkB,qBACjCgpE,EAASn7J,MAAMgtF,UAAY,GAC3BmuE,EAASn7J,MAAMuwF,OAAS,UAExB+qE,EAASt7J,MAAM+sF,WAAa,OAAS3C,EAAAywE,IAAe,wBACpDS,EAASt7J,MAAMuyF,eAAiB,KAChC+oE,EAASt7J,MAAMmyF,gBAAkB,UACjCmpE,EAASt7J,MAAMuwF,OAAS,UACxB+qE,EAASt7J,MAAMgtF,UAAY,qCAE3BopB,KAGJ,IAAIolD,EAAgBpzK,SAASM,cAAc,OAC3C8yK,EAAcvyK,YAAYkyK,GAC1BK,EAAcvyK,YAAYqyK,GAC1Bh2I,EAAIr8B,YAAYuyK,GAGhB,IAAIl/D,EAAiBl0G,SAASM,cAAc,OAC5C+yF,GAAGkB,IAAI2f,EAAgB,CACnB97B,MAAO,QACPstB,WAAY,QACZrtB,OAAQ,QACR0xB,gBAAiB,UACjBtE,UAAW,OACXb,UAAW,sEACXX,SAAU,SACVnrD,SAAU,WACVqzD,WAAY,OACZt0F,QAAS,OACTysF,WAAY,SACZD,eAAgB,SAChBiE,YAAa,eAGjB,IAAIqqE,EAA8B,CAC9B7pE,MAAOzV,GAAGja,OAAO7xE,KAAK4gD,MAAM+vB,GAAI3wE,KAAK4gD,MAAMgwB,IAC3C6xB,QAAS,EACTmQ,WAAY,eAEZoU,EAAkB,IAAIpE,GAAgB,CACtC/xC,MAAO7wE,KAAK4gD,MAAM+vB,GAClBG,OAAQ9wE,KAAK4gD,MAAMgwB,GACnB+hC,OAAQ,CAACy4D,KAGThD,EAAsBt8E,GAAGvgF,GAAG,CAC5ByhF,IAAK,CACDz7C,SAAU,WACV8rD,UAAW,0BACXxsB,MAAO33C,SAAS,GAAKy3C,GAAK,KAC1BG,OAAQ53C,SAAS,GAAK03C,GAAK,QA6DnC,OA1DAw3F,EAAoB9uK,YAAY0tH,EAAgBtlB,cAChDiL,EAAerzG,YAAY8uK,GAyC3BnmI,WAAWwkF,EAAe,GAG1B9wF,EAAIr8B,YAAYqzG,GAChBzkH,EAAOq2F,QAAU,WACb+sF,EAAmB/sF,UACnBgtF,EAAiBhtF,WAErBr2F,EAAOgpJ,SAAW,WAEd,OADAhpJ,EAAOq2F,UACA,CACHutF,WAAY12D,EACZ22D,SAAU12D,EACV22D,WAAYX,IAGbnjL,GAGXyC,MAAA,SAAMk6E,GACF,IAAIt+E,EAAUs+E,EAAOt+E,QACjBsrF,EAAShN,EAAOgN,OAChBshC,EAAUtuC,EAAOsuC,QACjB24D,EAAajnG,EAAOrzE,MAAMs6K,WAC1BC,EAAWlnG,EAAOrzE,MAAMu6K,SACxBC,EAAannG,EAAOrzE,MAAMw6K,WAC9B,SAAKzlL,GAAYsrF,GAAWshC,KAI5BA,EAAQQ,OAAM,GACd9hC,EAAOo0C,KAAK6lD,EAAYC,EAAUC,EAAa,KAAOn6F,EAAO8mE,cAAcpyJ,EAAQsrF,SACnFshC,EAAQQ,OAAM,GAEdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,QACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CACLrzE,MAAOqzE,EAAOrzE,WAGf,KCxQFy6K,GAAkB,CAE3Bj5C,UAAA,SAAUnuD,OAEFt+E,EAAUs+E,EAAOt+E,QACjBsrF,EAAShN,EAAOgN,OACpB,IAAKtrF,IAAYsrF,EACb,OAAO,EAGX,IAAI8gC,EAAS9gC,EAAOqiC,YAChB6zD,EAAqBl2F,EAAO8mE,cAAcpyJ,EAAQsrF,QAElD61C,EAAM57B,GAAG4B,QAAQnnG,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,OAAO,IAAK,IAAM,GACxEH,EAAIz3C,SAAS,GAAKwuF,EAAI72C,OAAQD,EAAI13C,SAAS,GAAKwuF,EAAI52C,QAEpDk3F,EAAal8E,GAAGja,OAAOlB,EAAGC,GAEpB0U,EAAM0iF,EAAWl2F,WAAW,MAClCwT,EAAIqP,OACAqzE,EAAWn3F,MAAQtqF,EAAQsrF,OAAOhB,QAClCyU,EAAIsP,uBAAwB,GAEhCtP,EAAI0O,UAAUztG,EAAQsrF,OAAQ,EAAG,EAAGlB,EAAGC,GACvC0U,EAAIyP,UAGR,IAAIp/D,EAAMl9B,SAASM,cAAc,OAC7B7Q,EAAc,CACdqF,QAASooC,GAoHb,OADAsM,YAhHA,WACI,IAAIk1E,EAAM,EAAG+0D,EAAa,EAC1Bv2I,EAAIiiE,UAAYkE,GAAK,8BAAgC,aAErD,IAAImsE,EAAWL,KACf,GAAKK,EAAL,CAGA,IAAI/M,EAAU+M,EAAS/M,QAAQ8M,GAC/BC,EAAS/rD,KAAKg/C,GAAShtG,SAEvB,IAAIi+G,EAAY,IAAIlpE,GAAS,CACzBhhC,MAAO65B,GAAK,sBACZjrB,MAAO,IACPC,OAAQ,GACRjmE,KAAK,IACLF,IAAK,IACLw2F,UAAiB,IAANgW,EACX9S,WAAYu2D,GACZriE,SAAU,SAAUl0F,GAChB8yG,EAAM9yG,EAAM,IACZ4jK,EAAS/rD,KAAKg/C,GAASsD,cAAcrnD,EAAK+0D,GAAYh+G,SACtD84D,EAAgBrF,YAGpByqD,EAAmB,IAAInpE,GAAS,CAChChhC,MAAO65B,GAAK,6BACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,IACLw2F,UAA8B,IAAlB+qE,EAAa,GACzB7nE,WAAYu2D,GACZriE,SAAU,SAAUl0F,GAChB6nK,EAAa7nK,EAAM,GAAK,EACxB4jK,EAAS/rD,KAAKg/C,GAASsD,cAAcrnD,EAAK+0D,GAAYh+G,SACtD84D,EAAgBrF,YAGxBwqD,EAAUzqE,aAAarxF,MAAMmtF,aAAe,OAC5C7nE,EAAIr8B,YAAY6yK,EAAUzqE,cAC1B/rE,EAAIr8B,YAAY8yK,EAAiB1qE,cAGjC,IAAIiL,EAAiBl0G,SAASM,cAAc,OAC5C+yF,GAAGkB,IAAI2f,EAAgB,CACnB97B,MAAO,QACPstB,WAAY,QACZrtB,OAAQ,QACR0xB,gBAAiB,UACjBtE,UAAW,OACXb,UAAW,sEACXX,SAAU,SACVnrD,SAAU,WACVqzD,WAAY,OACZt0F,QAAS,OACTysF,WAAY,SACZD,eAAgB,SAChBiE,YAAa,eAKb,IAFJ,IAAI8lB,EAAmC,GAE1B/gI,EAAI,EAAGA,EAAI6sH,EAAO5sH,OAAQD,IAC/B+gI,EAAgBv6H,KAAK,CACjBi1G,MAAOz7G,IAAMiiL,EAAqBE,EAAWt1D,EAAO7sH,GAAGS,QAAQsrF,OAC/D4wB,QAASkQ,EAAO7sH,GAAG28G,QACnBmQ,WAAYD,EAAO7sH,GAAG8sH,aAIlC,IAAIoU,EAAkB,IAAIpE,GAAgB,CACtC/xC,MAAO33C,SAAS,GAAKy3C,GACrBG,OAAQ53C,SAAS,GAAK03C,GACtB+hC,OAAQkU,IAGRuhD,EAAsBt8E,GAAGvgF,GAAG,CAC5ByhF,IAAK,CACDz7C,SAAU,WACV8rD,UAAW,0BACXxsB,MAAO33C,SAAS,GAAKy3C,GAAK,KAC1BG,OAAQ53C,SAAS,GAAK03C,GAAK,QAGnCw3F,EAAoB9uK,YAAY0tH,EAAgBtlB,cAChDiL,EAAerzG,YAAY8uK,GAG3BzyI,EAAIr8B,YAAYqzG,GAEhB,IACIs7D,EAAS/rD,KAAKg/C,GAASsD,cAAcrnD,EAAK+0D,GAAYh+G,SACtD84D,EAAgBrF,SAClB,MAAM71H,GACH6pC,EAAYq6F,cAAclkI,GAG/B5D,EAAOq2F,QAAU,WACb4tF,EAAU5tF,UACV6tF,EAAiB7tF,UACjB28E,EAAQ38E,WAEZr2F,EAAOgpJ,SAAW,WAEd,OADAhpJ,EAAOq2F,UACA,CACH44B,IAAKA,EACL+0D,WAAYA,OAKD,GAChBhkL,GAGXyC,MAAA,SAAMk6E,GACF,IAAIt+E,EAAUs+E,EAAOt+E,QACjB4wH,EAAMtyC,EAAOrzE,MAAM2lH,IACnBhE,EAAUtuC,EAAOsuC,QACjB+4D,EAAarnG,EAAOrzE,MAAM06K,WAC9B,IAAK3lL,GAAmB,OAAR4wH,GAA+B,OAAf+0D,IAAwB/4D,EACpD,OAAO,EACXA,EAAQQ,OAAM,GACd,IAAIs0D,EAAWL,KACf,IAAKK,EACD,OAAO,EAEX,IAAI/M,EAAU+M,EAAS/M,QAAQ30K,EAAQsrF,QAavC,OAZAo2F,EAAS/rD,KAAKg/C,GAASsD,cAAcrnD,EAAK+0D,GAAYh+G,SACtD3nE,EAAQ8tH,UAAU,EAAG,EAAG9tH,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,QAC7DvqF,EAAQytG,UAAUi0E,EAAU,EAAG,GAC/B/M,EAAQ38E,UACR40B,EAAQQ,OAAM,GACdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,mBACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CACLrzE,MAAOqzE,EAAOrzE,WAGf,IClLF66K,GAAS,CAElB1hL,MAAA,SAAMk6E,GACF,IAAIt+E,EAAUs+E,EAAOt+E,QACjB4sH,EAAUtuC,EAAOsuC,QACrB,IAAK5sH,IAAY4sH,EACb,OAAO,EAEXA,EAAQQ,OAAM,GAEd,IAAIs0D,EAAWL,KACf,IAAKK,EACD,OAAO,EAEX,IAAI/M,EAAU+M,EAAS/M,QAAQ30K,EAAQsrF,QAcvC,OAbAo2F,EAAS/rD,KAAKg/C,GAAS5nC,SAASplE,SAChC3nE,EAAQ8tH,UAAU,EAAG,EAAG9tH,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,QAC7DvqF,EAAQytG,UAAUi0E,EAAU,EAAG,GAC/B/M,EAAQ38E,UAER40B,EAAQQ,OAAM,GACdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,UACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CACLrzE,MAAOqzE,EAAOrzE,WAGf,ICvBF86K,GAAgB,CAEzBt5C,UAAA,SAAUnuD,OACFt+E,EAAUs+E,EAAOt+E,QACjBsjL,EAAShlG,EAAOgN,OACpB,IAAKtrF,IAAYsjL,EACb,OAAO,EAGX,IAAI5/D,EAAU/pG,OAAOq/F,WAAa,IAC9BoT,EAASk3D,EAAO31D,YAChB6zD,EAAqB8B,EAAOlxB,cAAcpyJ,EAAQsrF,QAElD61C,EAAM57B,GAAG4B,QAAQnnG,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,OAAQm5B,EAAU,IAAM,IAAKA,EAAU,IAAM,IAAK,GACxGsiE,EAAWrzI,SAAS,GAAKwuF,EAAI72C,OAAQ27F,EAAWtzI,SAAS,GAAKwuF,EAAI52C,QAClEH,EAAI3wE,KAAK6K,IAAI0hK,EAAUhmL,EAAQsrF,OAAOhB,OACtCD,EAAI5wE,KAAK6K,IAAI2hK,EAAUjmL,EAAQsrF,OAAOf,QAEtCk3F,EAAal8E,GAAGja,OAAOlB,EAAGC,GAEpB0U,EAAM0iF,EAAWl2F,WAAW,MAClCwT,EAAIqP,OACAhkB,EAAIpqF,EAAQsrF,OAAOhB,QACnByU,EAAIsP,uBAAwB,GAEhCtP,EAAI0O,UAAUztG,EAAQsrF,OAAQ,EAAG,EAAGlB,EAAGC,GACvC0U,EAAIyP,UAER,IAAI03E,EAAuBF,EAAWhmL,EAAQsrF,OAAOhB,MAEjDknF,EAAMt/J,SAASM,cAAc,OAC7B7Q,EAAc,CACdqF,QAASwqK,GAER9tD,IACD/hH,EAAO2oF,MAAQ,KAGnB,IAAI67F,EAAqB,GAkUzB,OAFAzqI,YA9TA,WACI81H,EAAIngE,UAAYkE,GAAK,kCAAoC,aAEzD,IAAImsE,EAAWL,KACf,GAAKK,EAAL,CAGA,IAEIzyC,EAAIm3C,EAAIC,EAAIC,EACZ/0C,EAAID,EAAIi1C,EAAIC,EAHZ7R,EAAU+M,EAAS/M,QAAQ8M,GAC/BC,EAAS/rD,KAAKg/C,GAAShtG,SAgFvBsnE,EAAKw3C,EAAI,EAAG,EAAGC,GACfN,EAAKK,EAAIT,EAAU,EAAGU,GACtBL,EAAKI,EAAIT,EAAUC,EAAUS,GAC7BJ,EAAKG,EAAI,EAAGR,EAAUS,GACtBn1C,EAAKk1C,EAAI,EAAG,GACZn1C,EAAKm1C,EAAIT,EAAU,GACnBO,EAAKE,EAAIT,EAAUC,GACnBO,EAAKC,EAAI,EAAGR,GAEZ,IAAIrrC,GAAS,EACT+rC,EAAez0K,SAASM,cAAc,OAC1C+yF,GAAG+M,iBAAiBq0E,EAAc,iBAAiB,WAC/C,OAAO,KAEXA,EAAa90E,YAAc0D,GAAK,6BAChCoxE,EAAa78J,MAAMwgE,MAAQ,QAC3Bq8F,EAAa78J,MAAMygE,OAAS,OAC5Bo8F,EAAa78J,MAAM8tF,WAAa8L,EAAU,IAAM,QAChDijE,EAAa78J,MAAMmyI,WAAa,OAChC0qB,EAAa78J,MAAMw5F,UAAY,SAC/BqjE,EAAa78J,MAAMsyF,SAAW,OAC9BuqE,EAAa78J,MAAMo7J,cAAgB,MACnCyB,EAAa78J,MAAMq7J,oBAAsB,OACzCwB,EAAa78J,MAAMuwF,OAAS,UAC5BssE,EAAa78J,MAAMmyF,gBAAkB,qBACrC0qE,EAAa78J,MAAMuyF,eAAiB,KAEpC,IAAIuqE,EAAc10K,SAASM,cAAc,OACzC+yF,GAAG+M,iBAAiBs0E,EAAa,iBAAiB,WAC9C,OAAO,KAEXA,EAAY/0E,YAAc0D,GAAK,4BAC/BqxE,EAAY98J,MAAMwgE,MAAQ,QAC1Bs8F,EAAY98J,MAAMygE,OAAS,OAC3Bq8F,EAAY98J,MAAMmyI,WAAa,OAC/B2qB,EAAY98J,MAAMw5F,UAAY,SAC9BsjE,EAAY98J,MAAMsyF,SAAW,OAC7BwqE,EAAY98J,MAAMo7J,cAAgB,MAClC0B,EAAY98J,MAAMu7J,qBAAuB,OACzCuB,EAAY98J,MAAMgtF,UAAY,qCAC9B8vE,EAAY98J,MAAM+sF,WAAa,OAAS3C,EAAAywE,IAAe,wBACvDiC,EAAY98J,MAAMuyF,eAAiB,KACnCuqE,EAAY98J,MAAMmyF,gBAAkB,UAGpC1W,GAAG+M,iBAAiBq0E,EAAc,iBAAiB,YAChC,IAAX/rC,IACA+rC,EAAa78J,MAAMmyF,gBAAkB,WAE7C1W,GAAG+M,iBAAiBq0E,EAAc,gBAAgB,YAC/B,IAAX/rC,IACA+rC,EAAa78J,MAAMmyF,gBAAkB,yBAE7C1W,GAAG+M,iBAAiBs0E,EAAa,iBAAiB,YAC/B,IAAXhsC,IACAgsC,EAAY98J,MAAMmyF,gBAAkB,WAE5C1W,GAAG+M,iBAAiBs0E,EAAa,gBAAgB,YAC9B,IAAXhsC,IACAgsC,EAAY98J,MAAMmyF,gBAAkB,yBAG5C0qE,EAAa5wE,QAAU,WAEnB4wE,EAAa78J,MAAM+sF,WAAa,OAAS3C,EAAAywE,IAAe,wBACxDgC,EAAa78J,MAAMuyF,eAAiB,KACpCsqE,EAAa78J,MAAMmyF,gBAAkB,UACrC0qE,EAAa78J,MAAMgtF,UAAY,qCAC/B6vE,EAAa78J,MAAMuwF,OAAS,UAE5BusE,EAAY98J,MAAM+sF,WAAa,GAC/B+vE,EAAY98J,MAAMmyF,gBAAkB,qBACpC2qE,EAAY98J,MAAMgtF,UAAY,GAC9B8vE,EAAY98J,MAAMuwF,OAAS,UAE3Bk3B,EAAGznH,MAAMC,QAAU,OACnBunH,EAAGxnH,MAAMC,QAAU,OACnBw8J,EAAGz8J,MAAMC,QAAU,OACnBy8J,EAAG18J,MAAMC,QAAU,OAEnBklH,EAAGnlH,MAAMC,QAAU,QACnBq8J,EAAGt8J,MAAMC,QAAU,QACnBs8J,EAAGv8J,MAAMC,QAAU,QACnBu8J,EAAGx8J,MAAMC,QAAU,QACnBklH,EAAGniB,KAAKykB,GACR60C,EAAGt5D,KAAKwkB,GACR+0C,EAAGv5D,KAAKy5D,GACRD,EAAGx5D,KAAK05D,GACR5rC,GAAS,EACTjzE,KAEJi/G,EAAY7wE,QAAU,WAClB6kC,GAAS,EAETgsC,EAAY98J,MAAM+sF,WAAa,OAAS3C,EAAAywE,IAAe,wBACvDiC,EAAY98J,MAAMuyF,eAAiB,KACnCuqE,EAAY98J,MAAMmyF,gBAAkB,UACpC2qE,EAAY98J,MAAMgtF,UAAY,qCAC9B8vE,EAAY98J,MAAMuwF,OAAS,UAE3BssE,EAAa78J,MAAM+sF,WAAa,GAChC8vE,EAAa78J,MAAMmyF,gBAAkB,qBACrC0qE,EAAa78J,MAAMgtF,UAAY,GAC/B6vE,EAAa78J,MAAMuwF,OAAS,UAE5B40B,EAAGnlH,MAAMC,QAAU,OACnBq8J,EAAGt8J,MAAMC,QAAU,OACnBs8J,EAAGv8J,MAAMC,QAAU,OACnBu8J,EAAGx8J,MAAMC,QAAU,OAEnBwnH,EAAGznH,MAAMC,QAAU,QACnBunH,EAAGxnH,MAAMC,QAAU,QACnBw8J,EAAGz8J,MAAMC,QAAU,QACnBy8J,EAAG18J,MAAMC,QAAU,QACnBwnH,EAAGzkB,KAAKmiB,GACRqC,EAAGxkB,KAAKs5D,GACRG,EAAGz5D,KAAKu5D,GACRG,EAAG15D,KAAKw5D,IAGZ,IAAIhB,EAAgBpzK,SAASM,cAAc,OAC3C8yK,EAAcvyK,YAAY4zK,GAC1BrB,EAAcvyK,YAAY6zK,GAC1BpV,EAAIz+J,YAAYuyK,GAGhB,IAAIl/D,EAAiBl0G,SAASM,cAAc,OAC5C4zG,EAAe7H,cAAgB,WAC3B,OAAO,GAEXhZ,GAAGkB,IAAI2f,EAAgB,CACnB97B,MAAOo5B,EAAU,QAAU,QAC3B9L,WAAY,QACZrtB,OAAQm5B,EAAU,QAAU,QAC5BzH,gBAAiB,UACjBtE,UAAW,OACXb,UAAW,sEACXX,SAAU,SACVnrD,SAAU,WACVqzD,WAAY,OACZt0F,QAAS,OACTysF,WAAY,SACZD,eAAgB,SAChBiE,YAAa,eAKb,IAFJ,IAAI8lB,EAAmC,GAE1BtxC,EAAI,EAAGA,EAAIo9B,EAAO5sH,OAAQwvF,IAAK,CACpC,IAAI1D,EAAS0D,IAAMwyF,EAAqBE,EAAWt1D,EAAOp9B,GAAGhvF,QAAQsrF,OACrEg1C,EAAgBv6H,KAAK,CACjBi1G,MAAO1vB,EACP4wB,QAASkQ,EAAOp9B,GAAGktB,QACnBmQ,WAAYD,EAAOp9B,GAAGq9B,aAIlC,IAAIoU,EAAkB,IAAIpE,GAAgB,CACtC/xC,MAAO33C,SAAS,GAAKqzI,GACrBz7F,OAAQ53C,SAAS,GAAKszI,GACtB75D,OAAQkU,IAGRuhD,EAAsBt8E,GAAGvgF,GAAG,CAC5ByhF,IAAK,CACDz7C,SAAU,WACV8rD,UAAW,0BACXxsB,MAAO33C,SAAS,GAAKqzI,GAAY,KACjCz7F,OAAQ53C,SAAS,GAAKszI,GAAY,QAG1CpE,EAAoB9uK,YAAY0tH,EAAgBtlB,cAChDiL,EAAerzG,YAAY8uK,GAE3BA,EAAoB9uK,YAAYw+H,GAChCswC,EAAoB9uK,YAAYu+H,GAChCuwC,EAAoB9uK,YAAYwzK,GAChC1E,EAAoB9uK,YAAYyzK,GAEhCv3C,EAAGnlH,MAAMC,QAAU,OACnBq8J,EAAGt8J,MAAMC,QAAU,OACnBs8J,EAAGv8J,MAAMC,QAAU,OACnBu8J,EAAGx8J,MAAMC,QAAU,OACnB83J,EAAoB9uK,YAAYk8H,GAChC4yC,EAAoB9uK,YAAYqzK,GAChCvE,EAAoB9uK,YAAYszK,GAChCxE,EAAoB9uK,YAAYuzK,GAGhC9U,EAAIz+J,YAAYqzG,GAChBz+C,IACAhmE,EAAOq2F,QAAU,WACb,IAAK,IAAIz4F,EAAI,EAAGA,EAAI4mL,EAAmB3mL,OAAQD,IAC3C4mL,EAAmB5mL,GAAGy4F,UAE1B28E,EAAQ38E,WAEZr2F,EAAOgpJ,SAAW,WAEd,OADAhpJ,EAAOq2F,UACA,CACH4iD,OAAQ,CACJ3L,EAAG9wG,EAAI+nJ,EACPj3C,EAAG7wG,EAAI8nJ,EAEPE,EAAGjoJ,EAAI+nJ,EACPE,EAAGhoJ,EAAI8nJ,EAEPG,EAAGloJ,EAAI+nJ,EACPG,EAAGjoJ,EAAI8nJ,EAEPI,EAAGnoJ,EAAI+nJ,EACPI,EAAGloJ,EAAI8nJ,GAEX1L,MAAO,CACHjpC,EAAGpzG,EAAI+nJ,EACP30C,EAAGnzG,EAAI8nJ,EAEP50C,EAAGnzG,EAAI+nJ,EACP50C,EAAGlzG,EAAI8nJ,EAEPK,EAAGpoJ,EAAI+nJ,EACPK,EAAGnoJ,EAAI8nJ,EAEPM,EAAGroJ,EAAI+nJ,EACPM,EAAGpoJ,EAAI8nJ,cA7SVv+G,IACL,IACI+5G,EAAS/rD,KAAKg/C,GAAS4F,YACnB,CAACtrC,EAAG9wG,EAAG8wG,EAAG7wG,EAAGgoJ,EAAGjoJ,EAAGioJ,EAAGhoJ,EAAGioJ,EAAGloJ,EAAGkoJ,EAAGjoJ,EAAGkoJ,EAAGnoJ,EAAGmoJ,EAAGloJ,GAAG70B,KAAI,SAAC+0C,EAAM/+C,GACxD,OAAIA,EAAI,GAAM,EACH++C,EAAO0nI,EAAW57F,EAElB9rC,EAAO2nI,EAAW57F,KAGjC,CAACknD,EAAGpzG,EAAGozG,EAAGnzG,EAAGkzG,EAAGnzG,EAAGmzG,EAAGlzG,EAAGmoJ,EAAGpoJ,EAAGooJ,EAAGnoJ,EAAGooJ,EAAGroJ,EAAGqoJ,EAAGpoJ,GAAG70B,KAAI,SAAC+0C,EAAM/+C,GACxD,OAAIA,EAAI,GAAM,EACH++C,EAAO0nI,EAAW57F,EAElB9rC,EAAO2nI,EAAW57F,MAGnC1iB,SACF84D,EAAgBrF,SAClB,MAAM71H,GACHisK,EAAY/nC,cAAclkI,aAI1BkhL,EAAItoJ,EAAGC,EAAGwpC,GACf,IACIx4B,EAAMl9B,SAASM,cAAc,OAChC48B,EAAYjR,EAAIA,EAChBiR,EAAYhR,EAAIA,EACjBmnE,GAAGkB,IAAIr3D,EAAK,CACRk7C,MAAOu8F,OACPt8F,OAAQs8F,OACR5qE,gBAAiB,OACjBnF,UAAW,uBACXuC,aAAcwtE,OACd77H,SAAU,WACVqvD,OAAQ,OACRhtG,KAAQ+hC,EAAYjR,EAAI0oJ,EAAe,KACvC/6F,IAAO18C,EAAYhR,EAAIyoJ,EAAe,KACtCxoE,WAAY,OACZorD,YAAa,SAGjB,IAAIhrD,EAAkB,IAAIlZ,GAAGiN,gBAAgB,CACzC5yG,OAAQwvC,EACR4mD,YAAa,EACbiB,UAAW,SAASp8C,GAChBA,EAAM04C,sBACe,SAAjB14C,EAAMw4C,QAAoC,gBAAfx4C,EAAMt4C,OAChC6sC,EAAYjR,GAAK0c,EAAMg6C,GACvBzlD,EAAYhR,GAAKyc,EAAMi6C,GACxB1lD,EAAItlB,MAAMzc,KAAS+hC,EAAYjR,EAAI0oJ,EAAe,KAClDz3I,EAAItlB,MAAMgiE,IAAQ18C,EAAYhR,EAAIyoJ,EAAe,KAC7Cj/G,GACAA,IAEJD,QAWZ,OAPCv4B,EAAY09E,KAAO,SAAU1/G,GACzBgiC,EAAYjR,EAAI/wB,EAAE+wB,EAClBiR,EAAYhR,EAAIhxB,EAAEgxB,EACnBgR,EAAItlB,MAAMzc,KAAS+hC,EAAYjR,EAAI0oJ,EAAe,KAClDz3I,EAAItlB,MAAMgiE,IAAQ18C,EAAYhR,EAAIyoJ,EAAe,MAErDV,EAAmBpgL,KAAK04G,GACjBrvE,WAGFs3I,IACLn1C,EAAGzkB,KAAKmiB,GACRqC,EAAGxkB,KAAKs5D,GACRG,EAAGz5D,KAAKu5D,GACRG,EAAG15D,KAAKw5D,MAyOO,GAEhB3kL,GAGXyC,MAAA,SAAMk6E,GACF,IAAIt+E,EAAUs+E,EAAOt+E,QACjB4sH,EAAUtuC,EAAOsuC,QACjBguB,EAASt8D,EAAOrzE,MAAM2vI,OACtB4/B,EAAQl8F,EAAOrzE,MAAMuvK,MACzB,KAAKx6K,GAAY46I,GAAW4/B,GAAU5tD,GAClC,OAAO,EACXA,EAAQQ,OAAM,GACd,IAAIs0D,EAAWL,KACf,IAAKK,EACD,OAAO,EAEX,IAAI/M,EAAU+M,EAAS/M,QAAQ30K,EAAQsrF,QAC/BtrF,EAAQsrF,OAAOhB,MACftqF,EAAQsrF,OAAOf,OAavB,OAZAm3F,EAAS/rD,KAAKg/C,GAAS4F,YAAY3/B,EAAQ4/B,GAAO7yG,SAClD3nE,EAAQ8tH,UAAU,EAAG,EAAG9tH,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,QAC7DvqF,EAAQytG,UAAUi0E,EAAU,EAAG,GAC/B/M,EAAQ38E,UACR40B,EAAQQ,OAAM,GACdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,iBACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CACLrzE,MAAOqzE,EAAOrzE,WAGf,IC9Yf67K,GAAiBj1K,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SCQ/G,IAAM+kL,GAAS,CAElBt6C,UAAA,SAAUnuD,OAsLG3W,EAAT,WACI,GAAiC,IAA5B49F,EAAW1kK,MAAMrB,QAAgBmgI,GAA+C,IAA7B6lC,EAAY3kK,MAAMrB,QAAgBogI,EAGtF,OAFAA,GAAgB,OAChBD,GAAe,GAKnB,GAFA4lC,EAAW1kK,MAAQ,GAAK4Y,KAAK2K,IAAI,EAAGuuB,SAAS4yH,EAAW1kK,QACxD2kK,EAAY3kK,MAAQ,GAAK4Y,KAAK2K,IAAI,EAAGuuB,SAAS6yH,EAAY3kK,QACtDs8H,IACIyC,IACA2lC,EAAW1kK,MAAQ,GAAK8xC,SAAS,GAAMA,SAAS6yH,EAAY3kK,OAAS08H,IAErEoC,IACA6lC,EAAY3kK,MAAQ,GAAK8xC,SAAS,GAAMA,SAAS4yH,EAAW1kK,OAAS08H,IAGrE5qF,SAAS4yH,EAAW1kK,OAASolJ,GAAYtzG,SAAS6yH,EAAY3kK,OAASqlJ,GAAW,CAClF,IAAI/kB,EAAM57B,GAAG4B,QAAQx0D,SAAS4yH,EAAW1kK,OAAQ8xC,SAAS6yH,EAAY3kK,OAAQolJ,EAAUC,EAAW,GACnGqf,EAAW1kK,MAAQ,GAAK8xC,SAAS,GAAKwuF,EAAI72C,OAC1Ck7E,EAAY3kK,MAAQ,GAAK8xC,SAAS,GAAKwuF,EAAI52C,QAI/C53C,SAAS4yH,EAAW1kK,OAASolJ,IAC7Bsf,EAAW1kK,MAAQ,GAAKolJ,GAExBtzG,SAAS6yH,EAAY3kK,OAASqlJ,IAC9Bsf,EAAY3kK,MAAQ,GAAKqlJ,GAG7BtmB,GAAgB,EAChBD,GAAe,EAEftvB,EAAW19D,SAAS4yH,EAAW1kK,OAC/ByvG,EAAY39D,SAAS6yH,EAAY3kK,OAEjC,IAAIolK,EAAU1gE,GAAG4B,QAAQkJ,EAAUC,EAAW,IAAK,IAAK,GACpD02E,EAAWr0I,SAAS,GAAKszH,EAAQ37E,OAAQ28F,EAAWt0I,SAAS,GAAKszH,EAAQ17E,QAC9Eq4F,EAAgBoE,EAAW32E,EAE3B,IAAI/rE,EAASihE,GAAGiC,aAAa,IAAK,IAAKw/E,EAAUC,GAjEd,WAA/BC,EAAgB9rE,YAChBwtD,EAAc9+I,MAAMy8F,eAAiBq8D,EAAgB,EAAI,YAAc,GAEvEha,EAAct+E,MAAQgB,EAAOmiC,WAC7Bm7C,EAAcr+E,OAASe,EAAOoiC,YAE9Bq7C,EAAW36D,OACX26D,EAAWz6D,sBAAwB,OACnCy6D,EAAWt7D,UAAUg0E,EAAY,EAAG,GACpCl8E,GAAGwJ,aAAa65D,EAAev4D,EAAUC,GACzCy4D,EAAWv6D,YAGXo6D,EAAc9+I,MAAMy8F,eAAiB,YAErCqiD,EAAct+E,MAAQ+lB,EACtBu4D,EAAcr+E,OAAS+lB,EACvBy4D,EAAW36D,OACX26D,EAAW16D,uBAAwB,EACnC06D,EAAWt7D,UAAUg0E,EAAY,EAAG,EAAG7Y,EAAct+E,MAAOs+E,EAAcr+E,QAC1Ew+E,EAAWv6D,WAiDfo6D,EAAc9+I,MAAMwgE,MAAQ7wE,KAAK2K,IAAI,EAAG4iK,GAAY,KACpDpe,EAAc9+I,MAAMygE,OAAS9wE,KAAK2K,IAAI,EAAG6iK,GAAY,KACrDE,EAAcr9J,MAAMzc,KAAOi3B,EAAOnG,EAAI,KACtCgpJ,EAAcr9J,MAAMgiE,IAAMxnD,EAAOlG,EAAI,KACrC+oJ,EAAcr9J,MAAMwgE,MAAQ7wE,KAAK2K,IAAI,EAAG4iK,GAAY,KACpDG,EAAcr9J,MAAMygE,OAAS9wE,KAAK2K,IAAI,EAAG6iK,GAAY,MArOrD37F,EAAShN,EAAOgN,OACpB,IAAKA,EACD,OAAO,EAEX,IAAIq3F,EAAMp9E,GAAG4B,QAAS7b,EAAOmiC,WAAYniC,EAAOoiC,YAAa,IAAK,IAAI,GAClEtjC,EAAIz3C,SAAS,GAAKgwI,EAAIr4F,OAAQD,EAAI13C,SAAS,GAAKgwI,EAAIp4F,QAEpDq4F,EAAgBx4F,EAAIkB,EAAOmiC,WAC3Bg0D,EAAan2F,EAAOqkC,kBAAkB,GAGtCvgF,EAAMl9B,SAASM,cAAc,OAC7B7Q,EAAc,CACdqF,QAASooC,GAETihE,EAAW/kB,EAAOmiC,WAAYnd,EAAYhlB,EAAOoiC,YAErDt+E,EAAIiiE,UAAYkE,GAAK,6BAA+B,aAGpD,IAAI0wC,EAAW3nE,EAAO2nE,SAAUC,EAAY5nE,EAAO4nE,UAE/CygB,EAAephE,GAAGvgF,GAAG,CACrByhF,IAAK,CACDnc,MAAO,QACPC,OAAQ,OACRqsB,WAAY,UAGhBgwD,EAAgBrhE,GAAGvgF,GAAG,CACtByhF,IAAK,CACDnc,MAAO,QACPC,OAAQ,OACRqsB,WAAY,UAGhB2uD,EAAahgE,GAAGvgF,GAAG,CACnBykF,QAAS,QACThD,IAAK,CACD2V,SAAU,QACV9xB,MAAO,QAEXiK,OAAQ,CACJhyF,KAAM,SACN+hB,IAAK,IACLF,IAAK,GAAK6hI,EACVplJ,MAAO,GAAKyqF,EAAOmiC,cAGvB+3C,EAAcjgE,GAAGvgF,GAAG,CACpBykF,QAAS,QACThD,IAAK,CACD2V,SAAU,QACV9xB,MAAO,QAEXiK,OAAQ,CACJhyF,KAAM,SACN+hB,IAAK,IACLF,IAAK,GAAK8hI,EACVrlJ,MAAO,GAAKyqF,EAAOoiC,eAG3B63C,EAAWxvD,QAAU,WAChBrzG,KAAamiG,QACd86B,GAAe,EACfh4D,KAEJ69F,EAAYzvD,QAAU,WACjBrzG,KAAamiG,QACd+6B,GAAgB,EAChBj4D,KAEJ49F,EAAWvrD,SAAW,WAClB2lB,GAAe,EACfh4D,KAEJ69F,EAAYxrD,SAAW,WACnB4lB,GAAgB,EAChBj4D,KAEJg/F,EAAaznF,OAAOq2B,GAAK,SAAW,KAAMgwD,GAC1CqB,EAAc1nF,OAAOq2B,GAAK,UAAY,KAAMiwD,GAC5C,IAAI4hB,EAAe7hF,GAAGvgF,GAAG,CACrByhF,IAAK,CACDoQ,WAAY,OAAS3C,EAAA4yE,IAAe,wBACpCzqE,eAAgB,eAGxB+qE,EAAaloG,OAAOynF,EAAcC,GAClCx3H,EAAIr8B,YAAYq0K,GAGhB,IAAIxnD,GAAgB,EAAOD,GAAe,EACtCpC,EAAQjyC,EAAOmiC,WAAaniC,EAAOoiC,YAcnCyP,GAAgB,EAChBkqD,EAAoB,IAAI3tE,GAAS,CACjC7tE,MAAM,EACN6vC,MAAO65B,GAAK,yBACZuE,UAAU,EACVlyC,SAAU,SAAS7pC,IACfo/F,EAAgBp/F,IAhBhBwnI,EAAW1kK,MAAQ,GAAKyqF,EAAOmiC,WAC/B+3C,EAAY3kK,MAAQ,GAAKyqF,EAAOoiC,YAChC05D,EAAat9J,MAAM+sF,WAAa,OAAS3C,EAAA4yE,IAAe,wBACxDM,EAAat9J,MAAMuyF,eAAiB,YACpC10C,KAEAy/G,EAAat9J,MAAM+sF,WAAa,MAcxCznE,EAAIr8B,YAAYwyF,GAAGvgF,GAAG,CAClByhF,IAAK,CACD97D,MAAO,WAKf,IAAIu8I,EAAkB,IAAIhtE,GAAO,CAC7BO,aAAa,EACbC,UAAW,CACP,CAAC,SAAUnF,GAAK,qBAChB,CAAC,YAAaA,GAAK,yBAEvBlM,MAAOkM,GAAK,qBACZqF,UAAW,SACX5I,SAAU,WACNrqC,OAIJ2/G,EAAmB/hF,GAAGvgF,GAAG,CACzBg4B,OAAQ5N,EACRq3D,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,mBAGxB+wE,EAAiBv0K,YAAYs0K,EAAkBlsE,cAC/CmsE,EAAiBv0K,YAAYm0K,EAAgB/rE,cAE7C,IAAIytD,EAAgBrjE,GAAGja,OAAOlB,EAAGC,GACjCu+E,EAAc9+I,MAAMy8F,eAAiB,YAGrC,IAAIwiD,EAAaH,EAAcr9E,WAAW,MAiFtC66B,EAAiBl0G,SAASM,cAAc,OAC5C+yF,GAAGkB,IAAI2f,EAAgB,CACnB97B,MAAO,QACPstB,WAAY,QACZrtB,OAAQ,QACRxgE,QAAS,QACTkyF,gBAAiB,UACjBtE,UAAW,OACXb,UAAW,sEACX9rD,SAAU,WACVqzD,WAAY,OACZ7D,YAAa,eAIjB,IAAI2sE,EAAgB5hF,GAAG4L,cAAciV,EAAgB,IA0BrD,OAzBA+gE,EAAcp0K,YAAY61J,GAC1Bue,EAAcr9J,MAAMwgE,MAAQF,EAAI,KAChC+8F,EAAcr9J,MAAMygE,OAASF,EAAI,KACjC88F,EAAcr9J,MAAMkhC,SAAW,WAC/Bm8H,EAAcr9J,MAAMqsF,SAAW,SAC/BgxE,EAAcr9J,MAAMgtF,UAAY,0BAChCqwE,EAAcr9J,MAAMqsF,SAAW,SAC/B5Q,GAAGuJ,qBAAqB,GAAG,SAAUz9F,GACjC+0G,EAAet8F,MAAM+sF,WAAa,OAASxlG,EAAM,OAGrD+9B,EAAIr8B,YAAYqzG,GAChBz+C,IAEAhmE,EAAOq2F,QAAU,WACbqvF,EAAkBrvF,WAEtBr2F,EAAOgpJ,SAAW,WAEd,OADAhpJ,EAAOq2F,UACA,CACH1N,MAAO+lB,EACP9lB,OAAQ+lB,EACRud,UAAWq5D,EAAgB9rE,aAG5Bz5G,GAGXyC,MAAA,SAAMk6E,GACF,IAAIgN,EAAShN,EAAOgN,OAChBshC,EAAUtuC,EAAOsuC,QACjBtiC,EAAQhM,EAAOrzE,MAAMq/E,MACrBC,EAASjM,EAAOrzE,MAAMs/E,OACtBsjC,EAAYvvC,EAAOrzE,MAAM4iH,UAC7B,SAAKviC,IAAWshC,KAGhBA,EAAQQ,OAAM,GACd9hC,EAAO4hD,OAAO5iD,EAAOC,EAAQsjC,GAC7BjB,EAAQQ,OAAM,GACdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,UACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CACLrzE,MAAOqzE,EAAOrzE,WAGf,KC/SFs8K,GAAS,CAElB96C,UAAA,SAAUnuD,OAuBG3W,EAAT,WAKI,GAJCw/G,EAAcr9J,MAAc09J,gBAAkB,UAAYj3F,EAAM,OAChE42F,EAAcr9J,MAAc29J,aAAe,UAAYl3F,EAAM,OAC7D42F,EAAcr9J,MAAc49J,WAAa,UAAYn3F,EAAM,OAC3D42F,EAAcr9J,MAAc69J,YAAc,UAAYp3F,EAAM,OACjC,KAAxB92E,KAAKsmB,IAAIwwD,EAAM,KAAa,CAE5B,IAAI4wC,EAAM57B,GAAG4B,QAAQ9c,EAAGD,EAAG,IAAK,IAAK,GACjC3hB,EAAQ91B,SAAS,GAAKwuF,EAAI52C,QAAUH,EACvC+8F,EAAcr9J,MAAc09J,gBAAkB,UAAYj3F,EAAM,cAAgB9nB,EAAQ,IACxF0+G,EAAcr9J,MAAc29J,aAAe,UAAYl3F,EAAM,cAAgB9nB,EAAQ,IACrF0+G,EAAcr9J,MAAc49J,WAAa,UAAYn3F,EAAM,cAAgB9nB,EAAQ,IACnF0+G,EAAcr9J,MAAc69J,YAAc,UAAYp3F,EAAM,cAAgB9nB,EAAQ,MAlCzF6iB,EAAShN,EAAOgN,OACpB,IAAKA,EACD,OAAO,EAEX,IAAIq3F,EAAMp9E,GAAG4B,QAAQ7b,EAAOmiC,WAAYniC,EAAOoiC,YAAa,IAAK,IAAK,GAClEtjC,EAAIz3C,SAAS,GAAKgwI,EAAIr4F,OAAQD,EAAI13C,SAAS,GAAKgwI,EAAIp4F,QAEpDq4F,EAAgBx4F,EAAIkB,EAAOmiC,WAC3Bg0D,EAAal8E,GAAGja,OAAOlB,EAAGC,GAC9Bo3F,EAAW33J,MAAMC,QAAU,QAC3B03J,EAAWl2F,WAAW,MAAMkiB,UAAUniB,EAAOqkC,kBAAkBizD,GAAgB,EAAG,EAAGx4F,EAAGC,GAGxF,IAAIj7C,EAAMl9B,SAASM,cAAc,OAC7B7Q,EAAc,CACdqF,QAASooC,GAETmhD,EAAM,EACVnhD,EAAIiiE,UAAYkE,GAAK,6BAA+B,aAEpD,IAkBIqyE,EAAU11K,SAASM,cAAc,UACrCo1K,EAAQv2E,UAAY,8CACjB,IAACw2E,EAAW31K,SAASM,cAAc,UACtCq1K,EAASx2E,UAAY,8CACrBw2E,EAAS/9J,MAAMotF,YAAc,MAG7B0wE,EAAQ7xE,QAAU,WACdxlB,GAAO,GACP5oB,KAEJkgH,EAAS9xE,QAAU,WACfxlB,GAAO,GACP5oB,KAGJv4B,EAAIr8B,YAAY80K,GAChBz4I,EAAIr8B,YAAY60K,GAEhB,IAAIxhE,EAAiBl0G,SAASM,cAAc,OAC5C+yF,GAAGkB,IAAI2f,EAAgB,CACnB97B,MAAO,QACPstB,WAAY,QACZrtB,OAAQ,QACRxgE,QAAS,QACTkyF,gBAAiB,UACjBtE,UAAW,OACXb,UAAW,sEACXX,SAAU,SACVnrD,SAAU,WACVqzD,WAAY,OACZ7D,YAAa,eAGjB,IAAIktD,EAAcx1J,SAASM,cAAc,OACzCk1J,EAAY59I,MAAMC,QAAU,aAC5B29I,EAAY59I,MAAM06F,cAAgB,SAClC,IAAI2iE,EAAgB5hF,GAAG4L,cAAcu2D,EAAa,IAsBlD,OArBAyf,EAAcp0K,YAAY0uK,GAC1Br7D,EAAerzG,YAAY20J,GAC3Byf,EAAcr9J,MAAMwgE,MAAQF,EAAI,KAChC+8F,EAAcr9J,MAAMygE,OAASF,EAAI,KACjC88F,EAAcr9J,MAAM8tF,WAAa,OACjCuvE,EAAcr9J,MAAMotF,YAAc,OAClCiwE,EAAcr9J,MAAMgtF,UAAY,0BAChCqwE,EAAcr9J,MAAMqsF,SAAW,SAC/B5Q,GAAGuJ,qBAAqB,GAAG,SAAUz9F,GACjC81K,EAAcr9J,MAAM+sF,WAAa,OAASxlG,EAAM,OAEpD81K,EAAcr9J,MAAM24F,WAAa,oBAEjCrzE,EAAIr8B,YAAYqzG,GAChBz+C,IAEAhmE,EAAOgpJ,SAAW,WACd,MAAO,CACHp6D,IAAKA,IAGN5uF,GAGXyC,MAAA,SAAMk6E,GACF,IAAIgN,EAAShN,EAAOgN,OAChBshC,EAAUtuC,EAAOsuC,QACjBr8B,EAAMjS,EAAOrzE,MAAMslF,IACvB,SAAKjF,IAAWshC,KAEhBA,EAAQQ,OAAM,GACd9hC,EAAOif,OAAOha,GACdq8B,EAAQQ,OAAM,GACdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,UACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CACLrzE,MAAOqzE,EAAOrzE,WAGf,KCnHF68K,GAAc,CAEvBr7C,UAAA,SAAUnuD,OACFt+E,EAAUs+E,EAAOt+E,QACjBsrF,EAAShN,EAAOgN,OACpB,IAAKtrF,IAAYsrF,EACb,OAAO,EAGX,IAAI8gC,EAAS9gC,EAAOqiC,YAChB6zD,EAAqBl2F,EAAO8mE,cAAcpyJ,EAAQsrF,QAElD61C,EAAM57B,GAAG4B,QAAQnnG,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,OAAQ,IAAK,IAAK,GACxEy7F,EAAWrzI,SAAS,GAAKwuF,EAAI72C,OAAQ27F,EAAWtzI,SAAS,GAAKwuF,EAAI52C,QAClEH,EAAI3wE,KAAK6K,IAAI0hK,EAAUhmL,EAAQsrF,OAAOhB,OACtCD,EAAI5wE,KAAK6K,IAAI2hK,EAAUjmL,EAAQsrF,OAAOf,QAEtCk3F,EAAal8E,GAAGja,OAAOlB,EAAGC,GAEpB0U,EAAM0iF,EAAWl2F,WAAW,MAClCwT,EAAIqP,OACAhkB,EAAIpqF,EAAQsrF,OAAOhB,QACnByU,EAAIsP,uBAAwB,GAEhCtP,EAAI0O,UAAUztG,EAAQsrF,OAAQ,EAAG,EAAGlB,EAAGC,GACvC0U,EAAIyP,UAER,IAAIo0E,EAAgBx4F,EAAIpqF,EAAQsrF,OAAOhB,MACnC47F,EAAuBF,EAAWhmL,EAAQsrF,OAAOhB,MAEjDknF,EAAMt/J,SAASM,cAAc,OAC7B7Q,EAAc,CACdqF,QAASwqK,GAGT2U,EAAqB,GA+KzB,OAHAzqI,YA1KA,WACI,IAAImyC,EAAO,GAAI4rD,EAAW,IAC1B+3B,EAAIngE,UAAYkE,GAAK,iCAAmC,aAExD,IAAImsE,EAAWL,KACf,GAAKK,EAAL,CAGA,IAEIqG,EAAIC,EAFJrT,EAAU+M,EAAS/M,QAAQ8M,GAC/BC,EAAS/rD,KAAKg/C,GAAShtG,SAuDvBogH,EAAKtB,EAAI9zI,SAAS,GAAMqzI,EAAW,GAAKrzI,SAAS,GAAMszI,EAAW,IAClE+B,EAAKvB,EAAI9zI,SAAS,IAAMqzI,EAAWA,EAAW,IAAKrzI,SAAS,IAAMszI,EAAWA,EAAW,KAExF,IAAIgC,EAAa,IAAIvrE,GAAS,CAC1BhhC,MAAO65B,GAAK,0BACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,IACLw2F,UAAW/sB,EACXiwB,WAAYu2D,GACZriE,SAAU,SAAUl0F,GAChB+vE,EAAO/vE,EACP6pD,OAGRsgH,EAAW9sE,aAAarxF,MAAMmtF,aAAe,OAC7Cu6D,EAAIz+J,YAAYk1K,EAAW9sE,cAC3B,IAAI+sE,EAAiB,IAAIxrE,GAAS,CAC9BhhC,MAAO65B,GAAK,8BACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,IACLw2F,UAAW6+B,EACX37B,WAAYu2D,GACZriE,SAAU,SAAUl0F,GAChB27H,EAAW37H,EACX6pD,OAGR6pG,EAAIz+J,YAAYm1K,EAAe/sE,cAG/B,IAAIiL,EAAiBl0G,SAASM,cAAc,OAC5C4zG,EAAe7H,cAAgB,WAC3B,OAAO,GAEXhZ,GAAGkB,IAAI2f,EAAgB,CACnB97B,MAAO,QACPstB,WAAY,QACZrtB,OAAQ,QACR0xB,gBAAiB,UACjBtE,UAAW,OACXb,UAAW,sEACXX,SAAU,SACVnrD,SAAU,WACVqzD,WAAY,OACZt0F,QAAS,OACTysF,WAAY,SACZD,eAAgB,SAChBiE,YAAa,eAKb,IAFJ,IAAI8lB,EAAmC,GAE1BtxC,EAAI,EAAGA,EAAIo9B,EAAO5sH,OAAQwvF,IAC/BsxC,EAAgBv6H,KAAK,CACjBi1G,MAAOhsB,IAAMwyF,EAAqBE,EAAWt1D,EAAOp9B,GAAGhvF,QAAQsrF,OAC/D4wB,QAASkQ,EAAOp9B,GAAGktB,QACnBmQ,WAAYD,EAAOp9B,GAAGq9B,aAIlC,IAAIoU,EAAkB,IAAIpE,GAAgB,CACtC/xC,MAAO33C,SAAS,GAAKqzI,GACrBz7F,OAAQ53C,SAAS,GAAKszI,GACtB75D,OAAQkU,IAGRuhD,EAAsBt8E,GAAGvgF,GAAG,CAC5ByhF,IAAK,CACDz7C,SAAU,WACV8rD,UAAW,0BACXxsB,MAAO33C,SAAS,GAAKqzI,GAAY,KACjCz7F,OAAQ53C,SAAS,GAAKszI,GAAY,QAG1CpE,EAAoB9uK,YAAY0tH,EAAgBtlB,cAChDiL,EAAerzG,YAAY8uK,GAE3BA,EAAoB9uK,YAAYg1K,GAChClG,EAAoB9uK,YAAYi1K,GAGhCxW,EAAIz+J,YAAYqzG,GAChBz+C,IACAhmE,EAAOq2F,QAAU,WACb,IAAK,IAAIz4F,EAAI,EAAGA,EAAI4mL,EAAmB3mL,OAAQD,IAC3C4mL,EAAmB5mL,GAAGy4F,UAE1BiwF,EAAWjwF,UACXkwF,EAAelwF,UACf28E,EAAQ38E,WAEZr2F,EAAOgpJ,SAAW,WAEd,OADAhpJ,EAAOq2F,UACA,CACHlyF,EAAG,CAACq4B,EAAG4pJ,EAAG5pJ,EAAI+nJ,EAAsB9nJ,EAAG2pJ,EAAG3pJ,EAAI8nJ,GAC9CnoJ,EAAG,CAACI,EAAG6pJ,EAAG7pJ,EAAI+nJ,EAAsB9nJ,EAAG4pJ,EAAG5pJ,EAAI8nJ,GAC9Cr4F,KAAMA,EACN4rD,SAAUA,aA1JT9xE,IACL,IACI+5G,EAAS/rD,KAAKg/C,GAAS2E,UACnByO,EAAG5pJ,EAAI+nJ,EAAuBtD,EAC9BmF,EAAG3pJ,EAAI8nJ,EAAuBtD,EAC9BoF,EAAG7pJ,EAAI+nJ,EAAuBtD,EAC9BoF,EAAG5pJ,EAAI8nJ,EAAuBtD,EAC9B/0F,EAAO+0F,EACPnpC,EAAWmpC,GACbj7G,SACF84D,EAAgBrF,SAClB,MAAM71H,GACHisK,EAAY/nC,cAAclkI,aAI1BkhL,EAAItoJ,EAAGC,GACZ,IACIgR,EAAMm2D,GAAGvgF,GAAG,CACZyhF,IAAK,CACDnc,MAAOu8F,OACPt8F,OAAQs8F,OACR5qE,gBAAiB,OACjBnF,UAAW,uBACXuC,aAAcwtE,OACd77H,SAAU,WACVqvD,OAAQ,OACRhtG,KAAO8wB,EAAI0oJ,EAAe,KAC1B/6F,IAAM1tD,EAAIyoJ,EAAe,KACzBxoE,WAAY,OACZorD,YAAa,UAGpBr6H,EAAYjR,EAAIA,EAChBiR,EAAYhR,EAAIA,EACjB,IAAIqgF,EAAkB,IAAIlZ,GAAGiN,gBAAgB,CACzC5yG,OAAQwvC,EACR4mD,YAAa,EACbiB,UAAW,SAASp8C,GAChBA,EAAM04C,sBACe,SAAjB14C,EAAMw4C,QAAoC,gBAAfx4C,EAAMt4C,OAChC6sC,EAAYjR,GAAK0c,EAAMg6C,GACvBzlD,EAAYhR,GAAKyc,EAAMi6C,GACxB1lD,EAAItlB,MAAMzc,KAAS+hC,EAAYjR,EAAI0oJ,EAAe,KAClDz3I,EAAItlB,MAAMgiE,IAAQ18C,EAAYhR,EAAIyoJ,EAAe,KACjDl/G,QAKZ,OADAw+G,EAAmBpgL,KAAK04G,GACjBrvE,KA6GQ,GAGhBztC,GAGXyC,MAAA,SAAMk6E,GACF,IAAIt+E,EAAUs+E,EAAOt+E,QACjB4sH,EAAUtuC,EAAOsuC,QACjB9mH,EAAIw4E,EAAOrzE,MAAMnF,EACjBi4B,EAAIugD,EAAOrzE,MAAM8yB,EACjB8vD,EAAOvP,EAAOrzE,MAAM4iF,KACpB4rD,EAAWn7D,EAAOrzE,MAAMwuI,SAC5B,IAAKz5I,IAAY4sH,EACb,OAAO,EACXA,EAAQQ,OAAM,GACd,IAAIs0D,EAAWL,KACf,IAAKK,EACD,OAAO,EAEX,IAAI/M,EAAU+M,EAAS/M,QAAQ30K,EAAQsrF,QAavC,OAZAo2F,EAAS/rD,KAAKg/C,GAAS2E,UAAUxzK,EAAEq4B,EAAGr4B,EAAEs4B,EAAGL,EAAEI,EAAGJ,EAAEK,EAAGyvD,EAAM4rD,GAAU9xE,SACrE3nE,EAAQ8tH,UAAU,EAAG,EAAG9tH,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,QAC7DvqF,EAAQytG,UAAUi0E,EAAU,EAAG,GAC/B/M,EAAQ38E,UACR40B,EAAQQ,OAAM,GACdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,eACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CACLrzE,MAAOqzE,EAAOrzE,WAGf,IC1OFk9K,GAAY,CAErB17C,UAAA,SAAUnuD,OACF/+E,EAiZK2gI,EAAT,eAAuB/G,EAAgBh1H,UAAA3E,OAAA,QAAA,IAAA2E,UAAA,IAAAA,UAAA,GACnC,GAAKg8H,EAAL,CAGA,IAAIgoD,EAAYhoD,EAAcC,eAC9B,GAAI5sH,KAAK4c,UAAU+3J,KAAeC,GAA0BjvD,EAA5D,CAGAivD,EAAwB50K,KAAK4c,UAAU+3J,GACnCjC,EAAuB,IACvBiC,EAAUhqJ,GAAK+nJ,EACfiC,EAAU/pJ,GAAK8nJ,EACfiC,EAAU79F,OAAS47F,EACnBiC,EAAU59F,QAAU27F,GAExB,IAAImC,EAAuB/nD,EAAgBkhD,GAAoBxmE,MAC3Djc,EAAMspF,EAAqB98F,WAAW,MAC1CwT,EAAIqP,OACJrP,EAAI+uB,UAAU,EAAG,EAAGu6D,EAAqB/9F,MAAO+9F,EAAqB99F,QACrEgb,GAAGyI,+BACCjP,EACAqtB,EAAOo1D,GAAoBxhL,QAAQsrF,OACnC68F,EACArsD,EAC+B,cAA/BorD,EAAgB9rE,YAChB7V,GAAGmI,mBAAmBy6E,EAAWA,EAAU79F,MAAQk2C,EAAcl2C,MAAO69F,EAAU59F,OAASi2C,EAAcj2C,SAE7GwU,EAAIyP,UACJiyB,EAAgBrF,YA2BXktD,EAAT,WACInoD,EAAca,OAAO,CACjB7iG,EAAGwU,SAAS8rD,EAAO59F,OAAS2/H,EAAcriG,EAC1CC,EAAGuU,SAAS+rD,EAAO79F,OAAS2/H,EAAcpiG,IAE9C+hG,EAAcc,YAAYtuF,SAAS41I,EAAO1nL,QAC1Cq/H,KA7cAlgI,EAAUs+E,EAAOt+E,QACjBsrF,EAAShN,EAAOgN,OACpB,IAAKtrF,IAAYsrF,EACb,OAAO,EAGX,IAQI60C,EARAzc,EAAU/pG,OAAOq/F,WAAa,IAC9BoT,EAAS9gC,EAAOqiC,YAChB6zD,EAAqBl2F,EAAO8mE,cAAcpyJ,EAAQsrF,QAElD61C,EAAM57B,GAAG4B,QAAQnnG,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,OAAQm5B,EAAU,IAAM,IAAKA,EAAU,IAAM,IAAK,GACxGsiE,EAAWrzI,SAAS,GAAKwuF,EAAI72C,OAAQ27F,EAAWtzI,SAAS,GAAKwuF,EAAI52C,QAClEH,EAAI3wE,KAAK6K,IAAI0hK,EAAUhmL,EAAQsrF,OAAOhB,OACtCD,EAAI5wE,KAAK6K,IAAI2hK,EAAUjmL,EAAQsrF,OAAOf,QAEtC27F,EAAuBF,EAAWhmL,EAAQsrF,OAAOhB,MAGjDwxC,EAKA,CAAE39F,EAAG,EAAGC,EAAG,EAAGksD,MAAO,EAAGC,OAAQ,GAE5Bi+F,EAAkB,CAClBl/G,GAAI,KACJE,GAAI,KACJtzB,GAAI,KACJurD,GAAI,MAEJkP,EAAQ3wG,EAAQ4wG,aAAa,EAAG,EAAG5wG,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,QAE5E,GAAIomB,EAAMjqF,KAAK,GAAK,GAAKiqF,EAAMjqF,KAAKiqF,EAAMjqF,KAAKlnB,OAAS,GAAK,EACzDgpL,EAAWl/G,GAAK,EAChBk/G,EAAWh/G,GAAK,EAChBg/G,EAAWtyI,GAAKl2C,EAAQsrF,OAAOhB,MAAQ,EACvCk+F,EAAW/mF,GAAKzhG,EAAQsrF,OAAOf,OAAS,OAExC,IAAKhrF,EAAI,EAAGA,EAAIoxG,EAAMjqF,KAAKlnB,OAAQD,GAAK,EACpC,GAAIoxG,EAAMjqF,KAAKnnB,GAAK,EAAI,CACpB,IAAI4+B,GAAM5+B,EAAI,GAAK,EAAMS,EAAQsrF,OAAOhB,MACpClsD,EAAI3kB,KAAKuK,OAAOzkB,EAAI,GAAK,EAAIS,EAAQsrF,OAAOhB,QAC5Ck+F,EAAWl/G,GAAKnrC,GAAuB,OAAlBqqJ,EAAWl/G,MAChCk/G,EAAWl/G,GAAKnrC,GAEE,OAAlBqqJ,EAAWh/G,KACXg/G,EAAWh/G,GAAKprC,IAEhBoqJ,EAAWtyI,GAAK/X,GAAuB,OAAlBqqJ,EAAWtyI,MAChCsyI,EAAWtyI,GAAK/X,IAEhBqqJ,EAAW/mF,GAAKrjE,GAAuB,OAAlBoqJ,EAAW/mF,MAChC+mF,EAAW/mF,GAAKrjE,GAKhC,GAAsB,OAAlBoqJ,EAAWl/G,IAAiC,OAAlBk/G,EAAWh/G,GAErC,OADAg9B,MAAM+O,GAAK,4BACJ,EAEXumB,EAAU39F,EAAIqqJ,EAAWl/G,GACzBwyD,EAAU19F,EAAIoqJ,EAAWh/G,GACzBsyD,EAAUxxC,MAAQk+F,EAAWtyI,GAAKsyI,EAAWl/G,GAAK,EAClDwyD,EAAUvxC,OAASi+F,EAAW/mF,GAAK+mF,EAAWh/G,GAAK,EAGvD,IAAMg3D,EAAgB,CAClBriG,EAAG29F,EAAU39F,EAAI29F,EAAUxxC,MAAQ,EACnClsD,EAAG09F,EAAU19F,EAAI09F,EAAUvxC,OAAS,EACpCD,MAAOwxC,EAAUxxC,MACjBC,OAAQuxC,EAAUvxC,OAClBujB,SAAU,GAKV1+D,EAAMl9B,SAASM,cAAc,OAC7B7Q,EAAc,CACdqF,QAASooC,GAERs0E,IACD/hH,EAAO2oF,MAAQ,KAEnBl7C,EAAIiiE,UAAYkE,GAAK,gCAErB,IAAIrmB,EAAc,IAAIqW,GAAGgN,YAAY,CACjCjjB,OAAQ,SAAS9C,GACT+Y,GAAG6M,gBAAe,KAIP,SAAX5lB,IACAiS,EAAO59F,MAAQ,IAAMkzC,WAAW0qD,EAAO59F,OAAS,GAChDynL,KAEW,UAAX97F,IACAiS,EAAO59F,MAAQ,IAAMkzC,WAAW0qD,EAAO59F,OAAS,GAChDynL,KAEW,OAAX97F,IACAkS,EAAO79F,MAAQ,IAAMkzC,WAAW2qD,EAAO79F,OAAS,GAChDynL,KAEW,SAAX97F,IACAkS,EAAO79F,MAAQ,IAAMkzC,WAAW2qD,EAAO79F,OAAS,GAChDynL,SAMRG,EAAcv2K,SAASM,cAAc,OACrCk2K,EAAex2K,SAASM,cAAc,OACtCm2K,EAAaz2K,SAASM,cAAc,OACpCksF,EAASxsF,SAASM,cAAc,SAChCisF,EAASvsF,SAASM,cAAc,SAChC+1K,EAASr2K,SAASM,cAAc,UACpCi2K,EAAY3+J,MAAMwgE,MAAQ,QAC1Bm+F,EAAY3+J,MAAMygE,OAAS,OAC3Bm+F,EAAa5+J,MAAMwgE,MAAQ,QAC3Bo+F,EAAa5+J,MAAMygE,OAAS,OAC5Bm+F,EAAa5+J,MAAMC,QAAU,eAC7B0+J,EAAY3+J,MAAMC,QAAU,eAC5B4+J,EAAW7+J,MAAMC,QAAU,eAC3B4+J,EAAW7+J,MAAMwgE,MAAQ,QACzBq+F,EAAW7+J,MAAMygE,OAAS,OAC1BmU,EAAOn8F,KAAO,SACdk8F,EAAOl8F,KAAO,SACdgmL,EAAOhmL,KAAO,SACdk8F,EAAO30E,MAAMwgE,MAAQ,OACrBoU,EAAO50E,MAAMwgE,MAAQ,OACrBi+F,EAAOz+J,MAAMwgE,MAAQ,OACrBoU,EAAO79F,MAAQ,IACf49F,EAAO59F,MAAQ,IACf0nL,EAAO1nL,MAAQ,IACf69F,EAAOqX,QAAU,WACZrzG,KAAamiG,QACdyjF,KAEJ7pF,EAAOsX,QAAU,WACZrzG,KAAamiG,QACdyjF,KAEJC,EAAOxyE,QAAU,WACZrzG,KAAamiG,QACdyjF,KAEJ5pF,EAAOsb,SAAW,WACdsuE,KAEJ7pF,EAAOub,SAAW,WACdsuE,KAEJC,EAAOvuE,SAAW,WACdsuE,KAEJ5pF,EAAOipE,QAAU,WACb2gB,KAEJ7pF,EAAOkpE,QAAU,WACb2gB,KAEJC,EAAO5gB,QAAU,WACb2gB,KAEJG,EAAYvpG,OAAO,MAAOuf,GAC1BiqF,EAAaxpG,OAAO,MAAOwf,GAC3BiqF,EAAWzpG,OAAOq2B,GAAK,6BAA+B,KAAMgzE,GACvD7kE,IACgBne,GAAGvgF,GAAG,CACnBg4B,OAAQ5N,EACRq3D,IAAK,CACDkR,UAAW,UAGVz4B,OAAOupG,EAAaC,EAAcC,GAI/C,IAAMC,EAAe,CACjBhxE,WAAY,OACZD,UAAW,QAETkxE,EAAYtjF,GAAGvgF,GAAI,CACrBg4B,OAAQ5N,EACRq3D,IAAK,CACD18E,QAAS,OACT2tF,SAAU,OACVE,WAAY,WA4FhBulB,GAzFa53B,GAAGvgF,GAAI,CACpBg4B,OAAQ6rI,EACRp/E,QAAS,SACTxgF,QAASssF,GAAK,yBAA2B,KACzCxD,QAAS,WACL,IAAM5jE,EAAIgyF,EAAcC,eACxBD,EAAc3E,SAASrtF,EAAEm8C,MAAOn8C,EAAEo8C,SAEtCkc,IAAKmiF,IAEQrjF,GAAGvgF,GAAI,CACpBg4B,OAAQ6rI,EACRp/E,QAAS,SACTxgF,QAASssF,GAAK,yBAA2B,KACzCxD,QAAS,WACL,IAAM5jE,EAAIgyF,EAAcC,eACxBD,EAAc3E,QAAQrtF,EAAEm8C,OAAQn8C,EAAEo8C,SAEtCkc,IAAKmiF,IAEerjF,GAAGvgF,GAAI,CAC3Bg4B,OAAQ6rI,EACRp/E,QAAS,SACTxgF,QAAS,OACR8oF,QAAQ,WACL,IAAM5jE,EAAIgyF,EAAcC,eACxBjyF,EAAE2/D,UAAY,GACd3/D,EAAE2/D,UAAY,IACdqyB,EAAcc,YAAY9yF,EAAE2/D,UAC5By6E,EAAO1nL,MAAQ,GAAK4Y,KAAK4gD,MAAMlsB,EAAE2/D,UACjCoyB,KAEJz5B,IAAKmiF,IAEgBrjF,GAAGvgF,GAAI,CAC5Bg4B,OAAQ6rI,EACRp/E,QAAS,SACTxgF,QAAS,OACT8oF,QAAS,WACL,IAAM5jE,EAAIgyF,EAAcC,eACxBjyF,EAAE2/D,UAAY,GACd3/D,EAAE2/D,UAAY,IACdqyB,EAAcc,YAAY9yF,EAAE2/D,UAC5By6E,EAAO1nL,MAAQ,GAAK4Y,KAAK4gD,MAAMlsB,EAAE2/D,UACjCoyB,KAEJz5B,IAAKmiF,IAEcrjF,GAAGvgF,GAAI,CAC1Bg4B,OAAQ6rI,EACRp/E,QAAS,SACTxgF,QAAS,KACT8oF,QAAS,WACL,IAAM5jE,EAAIgyF,EAAcC,eACpBinD,EAAkBjsE,WAClB+kB,EAAc3E,QAAQ2E,EAAc2oD,WAAa36I,EAAEo8C,OAAS,EAAc,EAAXp8C,EAAEo8C,QAEjE41C,EAAc3E,QAAkB,EAAVrtF,EAAEm8C,MAAsB,EAAXn8C,EAAEo8C,SAG7Ckc,IAAKmiF,IAEYrjF,GAAGvgF,GAAI,CACxBg4B,OAAQ6rI,EACRp/E,QAAS,SACTxgF,QAAS,OACT8oF,QAAS,WACL,IAAM5jE,EAAIgyF,EAAcC,eACxBD,EAAc3E,QAAQ/hH,KAAK4gD,MAAMlsB,EAAEm8C,MAAQ,GAAI7wE,KAAK4gD,MAAMlsB,EAAEo8C,OAAS,KAEzEkc,IAAKmiF,IAESrjF,GAAGvgF,GAAI,CACrBg4B,OAAQ6rI,EACRp/E,QAAS,SACTxgF,QAASssF,GAAK,UACdxD,QAAS,WACL,IAAM5jE,EAAIgyF,EAAcC,eACxBD,EAAca,OAAO,CAAE7iG,EAAGn+B,EAAQsrF,OAAOhB,MAAQ,EAAGlsD,EAAGp+B,EAAQsrF,OAAOf,OAAS,IAC/E41C,EAAcc,YAAY9yF,EAAE2/D,UAC5BoyB,KAEJz5B,IAAKmiF,KAOW,GAChBvB,EAAoB,IAAI3tE,GAAS,CACjC7tE,MAAM,EACN6vC,MAAO65B,GAAK,8BACZlM,MAAOkM,GAAK,yBACZuE,UAAU,EACVlyC,SAAU,SAAS7pC,GACfo/F,EAAgBp/F,EAChBoiG,EAAc4oD,eAAe5rD,IAEjC12B,IAAK,CACD18E,QAAS,kBAGbi/J,GAAa,EACbC,EAAmB,IAAIvvE,GAAS,CAChC7tE,MAAM,EACN6vC,MAAO65B,GAAK,yBACZlM,MAAOkM,GAAK,+BACZuE,UAAU,EACVlyC,SAAU,SAAS7pC,GACfirJ,EAAajrJ,EACboiG,EAAc+oD,YAAYF,IAE9BviF,IAAK,CACD18E,QAAS,eACT6tF,WAAY,UAGduxE,EAAkB5jF,GAAGvgF,GAAG,IAC9BmkK,EAAgBjqG,OAAOmoG,EAAkBlsE,aAAc8tE,EAAiB9tE,cAExE/rE,EAAIr8B,YAAYwyF,GAAGvgF,GAAG,CAClByhF,IAAK,CACD97D,MAAO,OACP4/C,OAAQ,WAIhB,IAAM6+F,EAAY7jF,GAAGvgF,GAAG,CACpBg4B,OAAQ5N,EACRq3D,IAAK,CACD18E,QAAS,OACTwsF,eAAgB,mBAIpB2wE,EAAkB,IAAIhtE,GAAO,CAC7BO,aAAa,EACbC,UAAW,CACP,CAAC,SAAUnF,GAAK,qBAChB,CAAC,YAAaA,GAAK,yBAEvBqF,UAAW,SACXvR,MAAOkM,GAAK,qBACZvD,SAAU,WACNkuB,GAAc,MAGtBkpD,EAAUlqG,OAAOiqG,EAAiBjC,EAAgB/rE,cAGlD,IAAIiL,EAAiBl0G,SAASM,cAAc,OAC5C4zG,EAAe7H,cAAgB,WAC3B,OAAO,GAEXhZ,GAAGkB,IAAI2f,EAAgB,CACnB97B,MAAOo5B,EAAU,QAAU,QAC3B9L,WAAY,QACZrtB,OAAQm5B,EAAU,QAAU,QAC5BzH,gBAAiB,UACjBtE,UAAW,OACXb,UAAW,sEACXX,SAAU,SACVnrD,SAAU,WACVqzD,WAAY,OACZt0F,QAAS,OACTysF,WAAY,SACZD,eAAgB,SAChBiE,YAAa,eAKb,IAFJ,IAAI8lB,EAAmC,GAE1BtxC,EAAI,EAAGA,EAAIo9B,EAAO5sH,OAAQwvF,IAAK,CACpC,IAAIs0F,OAAA,EACJ,GAAIt0F,IAAMwyF,GACN8B,EAAS/9E,GAAGja,OAAO34C,SAAS,GAAKy3C,GAAIz3C,SAAS,GAAK03C,KAClCkB,WAAW,MACxBkiB,UAAU2e,EAAOp9B,GAAGhvF,QAAQsrF,OAAQ,EAAG,EAAGg4F,EAAOh5F,MAAOg5F,EAAO/4F,aAEnE+4F,EAASl3D,EAAOp9B,GAAGhvF,QAAQsrF,OAE/Bg1C,EAAgBv6H,KAAK,CACjBi1G,MAAOsoE,EACPpnE,QAASkQ,EAAOp9B,GAAGktB,QACnBmQ,WAAYD,EAAOp9B,GAAGq9B,aAIlC,IAAIoU,EAAkB,IAAIpE,GAAgB,CACtC/xC,MAAO33C,SAAS,GAAKqzI,GACrBz7F,OAAQ53C,SAAS,GAAKszI,GACtB75D,OAAQkU,IAGRuhD,EAAsBt8E,GAAGvgF,GAAG,CAC5ByhF,IAAK,CACDz7C,SAAU,WACV8rD,UAAW,0BACXxsB,MAAO33C,SAAS,GAAKqzI,GAAY,KACjCz7F,OAAQ53C,SAAS,GAAKszI,GAAY,QAG1CpE,EAAoB9uK,YAAY0tH,EAAgBtlB,cAChDiL,EAAerzG,YAAY8uK,GAE3B,IAAIuG,OAAA,EAqFJ,OArDAjoD,EAAgB,IAAIxD,GAAc,CAC9Bx+F,EAAGqiG,EAAcriG,EACjBC,EAAGoiG,EAAcpiG,EACjBksD,MAAOk2C,EAAcl2C,MACrBC,OAAQi2C,EAAcj2C,OACtBujB,SAAU0yB,EAAc1yB,SACxBqvB,eAAe,EACfC,MAAO,CAAC,EAAGp9H,EAAQsrF,OAAOhB,OAC1B+yC,MAAO,CAAC,EAAGr9H,EAAQsrF,OAAOf,QAC1B3iB,SAAU,SAAUz5B,GAChBswD,EAAO59F,MAAQ,GAAK4Y,KAAK4gD,MAAMlsB,EAAEhQ,EAAIqiG,EAAcriG,GACnDugE,EAAO79F,MAAQ,GAAK4Y,KAAK4gD,MAAMlsB,EAAE/P,EAAIoiG,EAAcpiG,GACnDmqJ,EAAO1nL,MAAQ,GAAK4Y,KAAK4gD,MAAMlsB,EAAE2/D,UACjCoyB,KAEJz3D,MAAOy9G,IAEX3gF,GAAGkB,IAAI05B,EAAchlB,aAAc,CAC/BnwD,SAAU,WACV39C,KAAM,IACNy+E,IAAK,MAET+1F,EAAoB9uK,YAAYotH,EAAchlB,cAW9C+kB,IAEA9wF,EAAIr8B,YAAYqzG,GAChBzkH,EAAOq2F,QAAU,WACb9I,EAAY8I,UACZmoC,EAAcnoC,UACdqvF,EAAkBrvF,UAClBixF,EAAiBjxF,WAErBr2F,EAAOgpJ,SAAW,WACd,IAAMw9B,EAAYhoD,EAAcC,eAC5Bn1H,EAAQ,CACR0iG,UAAAw6E,EACA3zF,OAAQsnC,EACRutD,YAA4C,cAA/BnC,EAAgB9rE,YACzB7V,GAAGmI,mBAAmBy6E,EAAWA,EAAU79F,MAAQk2C,EAAcl2C,MAAO69F,EAAU59F,OAASi2C,EAAcj2C,SAGjH,OADA5oF,EAAOq2F,UACAxkF,KAAKC,MAAMD,KAAK4c,UAAUnlB,KAE9BtJ,GAGXyC,MAAA,SAAMk6E,GACF,IAAMt+E,EAAUs+E,EAAOt+E,QACjB4sH,EAAUtuC,EAAOsuC,QACvB,IAAK5sH,IAAY4sH,EACb,OAAO,EAEXA,EAAQQ,OAAM,GAEd,IAAMniH,EAA+BqzE,EAAOrzE,MAExCsiG,EAAahI,GAAGgI,WAAWvtG,EAAQsrF,QAgBvC,OAfAtrF,EAAQ8tH,UAAU,EAAG,EAAG9tH,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,QAC7Dgb,GAAGyI,+BACChuG,EACAutG,EACAtiG,EAAM0iG,UACN1iG,EAAMupF,OACNvpF,EAAMo+K,aAGVz8D,EAAQQ,OAAM,GACdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,aACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CAACrzE,MAAAA,OAEP,IC3gBFq+K,GAAS,CAElB78C,UAAA,SAAUnuD,OACFgN,EAAShN,EAAOgN,OAChBtrF,EAAUs+E,EAAOt+E,QACrB,IAAKsrF,IAAWtrF,EACZ,OAAO,EAGX,IAAIosH,EAAS9gC,EAAOqiC,YAChB6zD,EAAqBl2F,EAAO8mE,cAAcpyJ,EAAQsrF,QAElD61C,EAAM57B,GAAG4B,QAAQnnG,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,OAAQ,IAAK,IAAK,GACxEy7F,EAAWrzI,SAAS,GAAKwuF,EAAI72C,OAAQ27F,EAAWtzI,SAAS,GAAKwuF,EAAI52C,QAClEH,EAAI3wE,KAAK6K,IAAI0hK,EAAUhmL,EAAQsrF,OAAOhB,OACtCD,EAAI5wE,KAAK6K,IAAI2hK,EAAUjmL,EAAQsrF,OAAOf,QAEtCk3F,EAAal8E,GAAGja,OAAOlB,EAAGC,GAEpB0U,EAAM0iF,EAAWl2F,WAAW,MAClCwT,EAAIqP,OACAhkB,EAAIpqF,EAAQsrF,OAAOhB,QACnByU,EAAIsP,uBAAwB,GAEhCtP,EAAI0O,UAAUztG,EAAQsrF,OAAQ,EAAG,EAAGlB,EAAGC,GACvC0U,EAAIyP,UAER,IAAIo0E,EAAgBx4F,EAAIpqF,EAAQsrF,OAAOhB,MAEnCl7C,EAAMl9B,SAASM,cAAc,OAC7B7Q,EAAc,CACdqF,QAASooC,GAmGb,OAFAsM,YA7FA,WACI,IAAIo2E,EAAS,GACb1iF,EAAIiiE,UAAYkE,GAAK,oCAAsC,aAE3D,IAAImsE,EAAWL,KACf,GAAKK,EAAL,CAGA,IAAI/M,EAAU+M,EAAS/M,QAAQ8M,GAC/BC,EAAS/rD,KAAKg/C,GAAShtG,SAEvB,IAAI4hH,EAAe,IAAI7sE,GAAS,CAC5BhhC,MAAO65B,GAAK,UACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,IACLw2F,UAAWkX,EACXhU,WAAYu2D,GACZriE,SAAU,SAAUl0F,GAChBg0G,EAASh0G,EACT4jK,EAAS/rD,KAAKg/C,GAAS6D,aAAa1mD,EAAS8wD,GAAej7G,SAC5D84D,EAAgBrF,YAGxBhsF,EAAIr8B,YAAYw2K,EAAapuE,cAG7B,IAAIiL,EAAiBl0G,SAASM,cAAc,OAC5C+yF,GAAGkB,IAAI2f,EAAgB,CACnB97B,MAAO,QACPstB,WAAY,QACZrtB,OAAQ,QACR0xB,gBAAiB,UACjBtE,UAAW,OACXb,UAAW,sEACXX,SAAU,SACVnrD,SAAU,WACVqzD,WAAY,OACZt0F,QAAS,OACTysF,WAAY,SACZD,eAAgB,SAChBiE,YAAa,eAKb,IAFJ,IAAI8lB,EAAmC,GAE1B/gI,EAAI,EAAGA,EAAI6sH,EAAO5sH,OAAQD,IAC/B+gI,EAAgBv6H,KAAK,CACjBi1G,MAAOz7G,IAAMiiL,EAAqBE,EAAWt1D,EAAO7sH,GAAGS,QAAQsrF,OAC/D4wB,QAASkQ,EAAO7sH,GAAG28G,QACnBmQ,WAAYD,EAAO7sH,GAAG8sH,aAIlC,IAAIoU,EAAkB,IAAIpE,GAAgB,CACtC/xC,MAAO33C,SAAS,GAAKqzI,GACrBz7F,OAAQ53C,SAAS,GAAKszI,GACtB75D,OAAQkU,IAGRuhD,EAAsBt8E,GAAGvgF,GAAG,CAC5ByhF,IAAK,CACDz7C,SAAU,WACV8rD,UAAW,0BACXxsB,MAAO33C,SAAS,GAAKqzI,GAAY,KACjCz7F,OAAQ53C,SAAS,GAAKszI,GAAY,QAG1CpE,EAAoB9uK,YAAY0tH,EAAgBtlB,cAChDiL,EAAerzG,YAAY8uK,GAE3BzyI,EAAIr8B,YAAYqzG,GAEhB,IACIs7D,EAAS/rD,KAAKg/C,GAAS6D,aAAa1mD,EAAS8wD,GAAej7G,SAC5D84D,EAAgBrF,SAClB,MAAM71H,GACH6pC,EAAYq6F,cAAclkI,GAG/B5D,EAAOq2F,QAAU,WACb28E,EAAQ38E,UACRuxF,EAAavxF,WAEjBr2F,EAAOgpJ,SAAW,WAEd,OADAhpJ,EAAOq2F,UACA,CACH85B,OAAQA,OAKG,GAEhBnwH,GAGXyC,MAAA,SAAMk6E,GACF,IAAIt+E,EAAUs+E,EAAOt+E,QACjB4sH,EAAUtuC,EAAOsuC,QACjBkF,EAASxzC,EAAOrzE,MAAM6mH,OAC1B,IAAK9xH,IAAY8xH,IAAWlF,EACxB,OAAO,EACXA,EAAQQ,OAAM,GACd,IAAIs0D,EAAWL,KACf,IAAKK,EACD,OAAO,EAEX,IAAI/M,EAAU+M,EAAS/M,QAAQ30K,EAAQsrF,QAavC,OAZAo2F,EAAS/rD,KAAKg/C,GAAS6D,aAAa1mD,GAAQnqD,SAC5C3nE,EAAQ8tH,UAAU,EAAG,EAAG9tH,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,QAC7DvqF,EAAQytG,UAAUi0E,EAAU,EAAG,GAC/B/M,EAAQ38E,UACR40B,EAAQQ,OAAM,GACdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,UACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CACLrzE,MAAOqzE,EAAOrzE,WAGf,IC7JFu+K,GAAgB,CAEzB/8C,UAAA,SAAUnuD,OACFt+E,EAAUs+E,EAAOt+E,QACjBsrF,EAAShN,EAAOgN,OACpB,IAAKtrF,IAAYsrF,EACb,OAAO,EAGX,IAAI8gC,EAAS9gC,EAAOqiC,YAChB6zD,EAAqBl2F,EAAO8mE,cAAcpyJ,EAAQsrF,QAElD61C,EAAM57B,GAAG4B,QAAQnnG,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,OAAQ,IAAK,IAAK,GACxEy7F,EAAWrzI,SAAS,GAAKwuF,EAAI72C,OAAQ27F,EAAWtzI,SAAS,GAAKwuF,EAAI52C,QAClEH,EAAI3wE,KAAK6K,IAAI0hK,EAAUhmL,EAAQsrF,OAAOhB,OACtCD,EAAI5wE,KAAK6K,IAAI2hK,EAAUjmL,EAAQsrF,OAAOf,QAEtCk3F,EAAal8E,GAAGja,OAAOlB,EAAGC,GAEpB0U,EAAM0iF,EAAWl2F,WAAW,MAClCwT,EAAIqP,OACAhkB,EAAIpqF,EAAQsrF,OAAOhB,QACnByU,EAAIsP,uBAAwB,GAEhCtP,EAAI0O,UAAUztG,EAAQsrF,OAAQ,EAAG,EAAGlB,EAAGC,GACvC0U,EAAIyP,UAER,IAAIo0E,EAAgBx4F,EAAIpqF,EAAQsrF,OAAOhB,MAEnCl7C,EAAMl9B,SAASM,cAAc,OAC7B7Q,EAAc,CACdqF,QAASooC,GAuHb,OAFAsM,YAlHA,WACI,IAAIo2E,EAAS,EAAGwmD,EAAW,IAC3BlpI,EAAIiiE,UAAYkE,GAAK,mCAAqC,aAE1D,IAAImsE,EAAWL,KACf,GAAKK,EAAL,CAGA,IAAI/M,EAAU+M,EAAS/M,QAAQ8M,GAC/BC,EAAS/rD,KAAKg/C,GAAShtG,SAEvB,IAAI4hH,EAAe,IAAI7sE,GAAS,CAC5BhhC,MAAO65B,GAAK,UACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,IACLw2F,UAAW,EACXkD,WAAYu2D,GACZriE,SAAU,SAAUl0F,GAChBg0G,EAASh0G,EACT4jK,EAAS/rD,KAAKg/C,GAAS0D,YAAYvmD,EAAS8wD,EAAetK,GAAU3wG,SACrE84D,EAAgBrF,UAEpBld,MAAO,CAAC,CAAC,EAAG,GAAI,CAAC,GAAK,GAAI,CAAC,GAAK,IAAK,CAAC,EAAG,QAEzCurE,EAAiB,IAAI/sE,GAAS,CAC9BhhC,MAAO65B,GAAK,gCACZjrB,MAAO,IACPC,OAAQ,GACRjmE,IAAK,EACLF,IAAK,GACLw2F,UAAW,IACXkD,WAAYu2D,GACZriE,SAAU,SAAUl0F,GAChBw6J,EAAWx6J,EAAM,GACjB4jK,EAAS/rD,KAAKg/C,GAAS0D,YAAYvmD,EAAS8wD,EAAetK,GAAU3wG,SACrE84D,EAAgBrF,UAEpBld,MAAO,CAAC,CAAC,EAAG,GAAI,CAAC,GAAK,GAAI,CAAC,GAAK,IAAK,CAAC,EAAG,OAE7CqrE,EAAapuE,aAAarxF,MAAMmtF,aAAe,OAC/C7nE,EAAIr8B,YAAYw2K,EAAapuE,cAC7B/rE,EAAIr8B,YAAY02K,EAAetuE,cAG/B,IAAIiL,EAAiBl0G,SAASM,cAAc,OAC5C+yF,GAAGkB,IAAI2f,EAAgB,CACnB97B,MAAO,QACPstB,WAAY,QACZrtB,OAAQ,QACR0xB,gBAAiB,UACjBtE,UAAW,OACXb,UAAW,sEACXX,SAAU,SACVnrD,SAAU,WACVqzD,WAAY,OACZt0F,QAAS,OACTysF,WAAY,SACZD,eAAgB,SAChBiE,YAAa,eAKb,IAFJ,IAAI8lB,EAAmC,GAE1B/gI,EAAI,EAAGA,EAAI6sH,EAAO5sH,OAAQD,IAC/B+gI,EAAgBv6H,KAAK,CACjBi1G,MAAOz7G,IAAMiiL,EAAqBE,EAAWt1D,EAAO7sH,GAAGS,QAAQsrF,OAC/D4wB,QAASkQ,EAAO7sH,GAAG28G,QACnBmQ,WAAYD,EAAO7sH,GAAG8sH,aAIlC,IAAIoU,EAAkB,IAAIpE,GAAgB,CACtC/xC,MAAO33C,SAAS,GAAKqzI,GACrBz7F,OAAQ53C,SAAS,GAAKszI,GACtB75D,OAAQkU,IAGRuhD,EAAsBt8E,GAAGvgF,GAAG,CAC5ByhF,IAAK,CACDz7C,SAAU,WACV8rD,UAAW,0BACXxsB,MAAO33C,SAAS,GAAKqzI,GAAY,KACjCz7F,OAAQ53C,SAAS,GAAKszI,GAAY,QAG1CpE,EAAoB9uK,YAAY0tH,EAAgBtlB,cAChDiL,EAAerzG,YAAY8uK,GAG3BzyI,EAAIr8B,YAAYqzG,GAEhB,IACIs7D,EAAS/rD,KAAKg/C,GAAS0D,YAAYvmD,EAAS8wD,EAAetK,GAAU3wG,SACrE84D,EAAgBrF,SAClB,MAAM71H,GACH6pC,EAAYq6F,cAAclkI,GAG/B5D,EAAOq2F,QAAU,WACbuxF,EAAavxF,UACbyxF,EAAezxF,UACf28E,EAAQ38E,WAEZr2F,EAAOgpJ,SAAW,WAEd,OADAhpJ,EAAOq2F,UACA,CACH85B,OAAQA,EACRwmD,SAAUA,OAKC,GAEhB32K,GAIXyC,MAAA,SAAMk6E,GACF,IAAIt+E,EAAUs+E,EAAOt+E,QACjB4sH,EAAUtuC,EAAOsuC,QACjBkF,EAASxzC,EAAOrzE,MAAM6mH,OACtBwmD,EAAWh6F,EAAOrzE,MAAMqtK,SAC5B,IAAKt4K,GAAsB,OAAX8xH,GAAgC,OAAbwmD,IAAsB1rD,EACrD,OAAO,EACXA,EAAQQ,OAAM,GACd,IAAIs0D,EAAWL,KACf,IAAKK,EACD,OAAO,EAEX,IAAI/M,EAAU+M,EAAS/M,QAAQ30K,EAAQsrF,QAavC,OAZAo2F,EAAS/rD,KAAKg/C,GAAS0D,YAAYvmD,EAAQwmD,GAAU3wG,SACrD3nE,EAAQ8tH,UAAU,EAAG,EAAG9tH,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,QAC7DvqF,EAAQytG,UAAUi0E,EAAU,EAAG,GAC/B/M,EAAQ38E,UACR40B,EAAQQ,OAAM,GACdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,iBACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CACLrzE,MAAOqzE,EAAOrzE,WAGf,ICnLFy+K,GAAU,CAEnBj9C,UAAA,SAAUnuD,OACFt+E,EAAUs+E,EAAOt+E,QACjBsrF,EAAShN,EAAOgN,OACpB,IAAKtrF,IAAYsrF,EACb,OAAO,EAGX,IAAI8gC,EAAS9gC,EAAOqiC,YAChB6zD,EAAqBl2F,EAAO8mE,cAAcpyJ,EAAQsrF,QAElD61C,EAAM57B,GAAG4B,QAAQnnG,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,OAAQ,IAAK,IAAK,GACxEH,EAAIz3C,SAAS,GAAKwuF,EAAI72C,OAAQD,EAAI13C,SAAS,GAAKwuF,EAAI52C,QAEpDk3F,EAAal8E,GAAGja,OAAOlB,EAAGC,GAEpB0U,EAAM0iF,EAAWl2F,WAAW,MAClCwT,EAAIqP,OACAqzE,EAAWn3F,MAAQtqF,EAAQsrF,OAAOhB,QAClCyU,EAAIsP,uBAAwB,GAEhCtP,EAAI0O,UAAUztG,EAAQsrF,OAAQ,EAAG,EAAGlB,EAAGC,GACvC0U,EAAIyP,UAGR,IAAIp/D,EAAMl9B,SAASM,cAAc,OAC7B7Q,EAAc,CACdqF,QAASooC,GAoJb,OAFAsM,YA/IA,WAEItM,EAAIr8B,YAAYwyF,GAAGvgF,GAAG,CAClBiE,QAASssF,GAAK,+BACd9O,IAAK,CACDwQ,aAAc,UAItB,IAAIyqE,EAAWL,KACf,GAAKK,EAAL,CAGA,IAAI/M,EAAU+M,EAAS/M,QAAQ8M,GAC/BC,EAAS/rD,KAAKg/C,GAAShtG,SAQvB,IAAIgiH,EAAW,qBACXC,EAAgB,IAAIrmE,GAAQ,CAC5B7I,UAAW,CACP,CACIj7G,GAAI,qBACJi8E,MAAO65B,GAAK,iCAEhB,CACI91G,GAAI,YACJi8E,MAAO65B,GAAK,yBAGpBuO,UAAW6lE,EACX33E,SAAU,SAASvyG,GACfkqL,EAAWlqL,EACXygI,OAGR9wF,EAAIr8B,YAAY62K,EAAczuE,cAG9B,IAAIunE,EAAkB,CAAC77K,EAAG,EAAGmmF,EAAG,EAAGjvD,EAAG,EAAGj4B,EAAG,GACxC0hK,EAAkB,CAClB,KACA,CAAC3gK,EAAG,EAAGmmF,EAAG,EAAGjvD,EAAG,EAAGj4B,EAAG,GACtB,CAACe,EAAG,IAAKmmF,EAAG,IAAKjvD,EAAG,IAAKj4B,EAAG,IAEhC0hK,EAAgBzhK,KAAK,CACjBc,EAAGy3E,EAAOksE,gBAAgB3jJ,EAC1BmmF,EAAG1O,EAAOksE,gBAAgBx9D,EAC1BjvD,EAAGugD,EAAOksE,gBAAgBzsH,EAC1Bj4B,EAAG,IAEP0hK,EAAgBzhK,KAAK,CACjBc,EAAGy3E,EAAOmsE,kBAAkB5jJ,EAC5BmmF,EAAG1O,EAAOmsE,kBAAkBz9D,EAC5BjvD,EAAGugD,EAAOmsE,kBAAkB1sH,EAC5Bj4B,EAAG,IAGP,IAAI2hK,EAAe,IAAI7kD,GAAa,CAChClnC,MAAO65B,GAAK,2BACZyN,SAAUwkD,EACVrkD,aAAc,EACdnR,SAAU,SAAS1N,GACfo+E,EAAkBp+E,EAClB47B,OAGRunC,EAAatsD,aAAarxF,MAAM6tF,UAAY,OAC5CvoE,EAAIr8B,YAAY00J,EAAatsD,cAG7B,IAAIiL,EAAiBl0G,SAASM,cAAc,OAC5C+yF,GAAGkB,IAAI2f,EAAgB,CACnB97B,MAAO,QACPstB,WAAY,QACZrtB,OAAQ,QACR0xB,gBAAiB,UACjBtE,UAAW,OACXb,UAAW,sEACXX,SAAU,SACVnrD,SAAU,WACVqzD,WAAY,OACZt0F,QAAS,OACTysF,WAAY,SACZD,eAAgB,SAChBiE,YAAa,eAKb,IAFJ,IAAI8lB,EAAmC,GAE1B/gI,EAAI,EAAGA,EAAI6sH,EAAO5sH,OAAQD,IAC/B+gI,EAAgBv6H,KAAK,CACjBi1G,MAAOz7G,IAAMiiL,EAAqBE,EAAWt1D,EAAO7sH,GAAGS,QAAQsrF,OAC/D4wB,QAASkQ,EAAO7sH,GAAG28G,QACnBmQ,WAAYD,EAAO7sH,GAAG8sH,aAIlC,IAAIoU,EAAkB,IAAIpE,GAAgB,CACtC/xC,MAAO33C,SAAS,GAAKy3C,GACrBG,OAAQ53C,SAAS,GAAK03C,GACtB+hC,OAAQkU,IAGRuhD,EAAsBt8E,GAAGvgF,GAAG,CAC5ByhF,IAAK,CACDz7C,SAAU,WACV8rD,UAAW,0BACXxsB,MAAO33C,SAAS,GAAKy3C,GAAK,KAC1BG,OAAQ53C,SAAS,GAAK03C,GAAK,QAGnCw3F,EAAoB9uK,YAAY0tH,EAAgBtlB,cAChDiL,EAAerzG,YAAY8uK,GAG3BzyI,EAAIr8B,YAAYqzG,GAEhB1qE,YAAW,WACP,IACIwkF,IACF,MAAM36H,GACH6pC,EAAYq6F,cAAclkI,MAEhC,GAEH5D,EAAOq2F,QAAU,WACb28E,EAAQ38E,UACR4xF,EAAc5xF,WAElBr2F,EAAOgpJ,SAAW,WAEd,OADAhpJ,EAAOq2F,UACA,CACH2xF,SAAUA,EACVjH,gBAAiBA,aA1HhBxiD,IACLwhD,EAAS/rD,KAAKg/C,GAASvnC,QAAqB,uBAAbu8C,EAAmCjH,GAAiB/6G,SACnF84D,EAAgBrF,YA6HD,GAEhBz5H,GAIXyC,MAAA,SAAMk6E,GACF,IAAIt+E,EAAUs+E,EAAOt+E,QACjB4sH,EAAUtuC,EAAOsuC,QACjB+8D,EAAWrrG,EAAOrzE,MAAM0+K,SACxBjH,EAAkBpkG,EAAOrzE,MAAMy3K,gBACnC,IAAK1iL,IAAY2pL,IAAa/8D,EAC1B,OAAO,EACXA,EAAQQ,OAAM,GACd,IAAIs0D,EAAWL,KACf,IAAKK,EACD,OAAO,EAEX,IAAI/M,EAAU+M,EAAS/M,QAAQ30K,EAAQsrF,QAavC,OAZAo2F,EAAS/rD,KAAKg/C,GAASvnC,QAAqB,uBAAbu8C,EAAmCjH,GAAiB/6G,SACnF3nE,EAAQ8tH,UAAU,EAAG,EAAG9tH,EAAQsrF,OAAOhB,MAAOtqF,EAAQsrF,OAAOf,QAC7DvqF,EAAQytG,UAAUi0E,EAAU,EAAG,GAC/B/M,EAAQ38E,UACR40B,EAAQQ,OAAM,GACdR,EAAQ7mH,KAAK,CACTwnH,KAAM,CAAC,SAAU,WACjBja,OAAQ,QACRh1B,OAAQ,CAAC,CACLrzE,MAAOqzE,EAAOrzE,WAGf,aCpMN4+K,GAAaC,EAAQC,GACtBA,EAAUt9C,YACVq9C,EAAOr9C,UAAYs9C,EAAUt9C,WAEjCq9C,EAAO1lL,MAAQ2lL,EAAU3lL,uCClBP4lL,GAAkBv3D,UAAlBw3D,GAAiB7lL,MAAA1B,KAAAyB,oBAAjB8lL,YAAAA,GAAiB51E,EAAAvyG,QAAAoyG,EAAA/6F,GAAArB,MAAhC,SAAQw8F,EAAyBme,OAChC8H,EAEAy1B,EAMKzwJ,EAED++C,EAWJ4rI,EACAppJ,oEAdJ,IARIy5F,EAAW9H,EAAS+H,gBAEpBw1B,EAAY,CACZ1lE,MAAOmoC,EAAShF,WAChBljC,OAAQkoC,EAAS/E,YAEjBv/G,SAAU,IAEL5O,EAAI,EAAGA,EAAIg7H,EAAS/6H,OAAQD,IAE7B++C,EAAOi8E,EAASh7H,GACpBywJ,EAAU7hJ,SAASpI,KAAK,CACpBxB,KAAM+5C,EAAK/5C,KACX23G,QAAS59D,EAAK49D,QACd5wB,OAAQhtC,EAAKgtC,OACb8kC,UAAWonB,GAAGyY,IAAIC,aAAa5xG,EAAK+tE,YACpCh/G,KAAM,EACNy+E,IAAK,oBAIKj6E,EAAA,uBAAdq4K,EAAKt1E,EAAAj/F,KACLmrB,EAASopJ,EAAM75B,eAAeL,qBAC3B,IAAI5nD,KAAK,CAACtnE,GAAS,CAAEv+B,KAAM,yEAxBhB0nL,GAAiB7lL,MAAA1B,KAAAyB,kBCHvCgmL,GAAiBt4K,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,gBFyBxFkiJ,YGmCdkmC,GAAMC,EAA6BC,OA6BtCC,EAAT,SAA4B10I,GACxB,OAAS,GAALA,EACO,GAEF,GAALA,EACO,IAEF,GAALA,EACO,KAEF,GAALA,EACO,MAEF,GAALA,EACO,OAEJA,GAiCF20I,EAAT,SAAqB1sK,GACjBm/I,EAAoBwtB,SAAS3sK,GACzB0rI,GACAA,EAAkBkhC,cAAoB,EAAN5sK,IA0Z/B6sK,EAAT,SACIC,EAMAr7B,EACA8M,YAYSwuB,EAAqBvgG,EAAOC,GACjC,IAAIH,EAAIz3C,SAAS23C,GACbD,EAAI13C,SAAS43C,GAWjB,OAVIH,EAAI0gG,IACJzgG,GAAIygG,EAAkB1gG,EACtBA,EAAI0gG,GAEJzgG,EAAIygG,IACJ1gG,GAAI0gG,EAAkBzgG,EACtBA,EAAIygG,GAID,CACHxgG,MAHJF,EAAIz3C,SAAS,GAAKy3C,GAIdG,OAHJF,EAAI13C,SAAS,GAAK03C,aAOb0gG,EAAcz/F,GACnB,IAAI0/F,EAAoBH,EAAqBv/F,EAAOhB,MAAOgB,EAAOf,QAG9Dk3F,EAAal8E,GAAGja,OAAOA,EAAOhB,MAAOgB,EAAOf,QAC5Bk3F,EAAWl2F,WAAW,MAC5BkiB,UAAUniB,EAAQ,EAAG,GAEnCia,GAAGwJ,aAAa0yE,EAAYuJ,EAAkB1gG,MAAO0gG,EAAkBzgG,QAEvEkoC,EAAS/7G,MAAM,CACX4zE,MAAO0gG,EAAkB1gG,MACzBC,OAAQygG,EAAkBzgG,OAC1BywB,MAAOymE,EACPp0D,UAAWkiC,IAGfjG,GAAa3hF,OAAO,GACpB4hF,EAAgB92B,EAASo4B,SAAS,IAClCrB,EAAkBxwB,YAClBywB,GAAO9hF,OAAO6hF,EAAkBzM,WAAYyM,EAAkBuB,gBAE/C,EAOhB,SACMkgC,EAAiBC,EAAyBC,YAGtCnmE,EAAK8jD,EAAcsiB,EAAYtgB,GACpCsgB,EAAW9gG,MAAQ8gG,EAAW9gG,MAC9B8gG,EAAW7/F,WAAW,MAAMkiB,UAAUq7D,GAAegC,EAAQ3sI,GAAI2sI,EAAQ1sI,GACzE0qI,EAAax+E,MAAQwgF,EAAQxgF,MAC7Bw+E,EAAav+E,OAASugF,EAAQvgF,OAC9Bu+E,EAAav9E,WAAW,MAAMkiB,UAAU29E,EAAY,EAAG,GAE3D,GAAID,IAAYA,EAAQ7gG,QAAU4gG,EAAgB5gG,OAAQ6gG,EAAQ5gG,SAAW2gG,EAAgB3gG,QAAS,CAClG,IAAI8gG,EAAa9lF,GAAGja,OAAO6/F,EAAQ7gG,MAAO6gG,EAAQ5gG,QAOlD,GANA2gG,EAAgB5gG,MAAQ6gG,EAAQ7gG,MAChC4gG,EAAgB3gG,OAAS4gG,EAAQ5gG,OAE5B2gG,EAAgB9+D,QACjBpH,EAAKkmE,EAAgB5/F,OAAQ+/F,EAAYF,GAEzCD,EAAgB9+D,OAChB,IAAK,IAAI7sH,EAAI,EAAGA,EAAI2rL,EAAgB9+D,OAAO5sH,OAAQD,IAAK,CAEpDylH,EADWkmE,EAAgB9+D,OAAO7sH,GACxBy7G,MAAOqwE,EAAYF,IAMzC,IAAIH,EAAoBH,EAAqBK,EAAgB5gG,MAAO4gG,EAAgB3gG,QAMpF,GALA2gG,EAAgB5gG,MAAQ0gG,EAAkB1gG,MAC1C4gG,EAAgB3gG,OAASygG,EAAkBzgG,OACtC2gG,EAAgB9+D,QACjB7mB,GAAGwJ,aAAam8E,EAAgB5/F,OAAQ4/F,EAAgB5gG,MAAO4gG,EAAgB3gG,QAE/E2gG,EAAgB9+D,OAChB,IAAK,IAAIp9B,EAAI,EAAGA,EAAIk8F,EAAgB9+D,OAAO5sH,OAAQwvF,IAAK,CACpD,IAAImjB,EAAO+4E,EAAgB9+D,OAAOp9B,GAClCuW,GAAGwJ,aAAaoD,EAAK6I,MAAOkwE,EAAgB5gG,MAAO4gG,EAAgB3gG,QAI3E,IAAIwkC,OAAA,EAEAA,EADAm8D,EAAgB9+D,OACHqG,EAAS/7G,MAAM,CACxB4zE,MAAO4gG,EAAgB5gG,MACvBC,OAAQ2gG,EAAgB3gG,OACxB6hC,OAAQ8+D,EAAgB9+D,SAGfqG,EAAS/7G,MAAM,CACxB4zE,MAAO4gG,EAAgB5gG,MACvBC,OAAQ2gG,EAAgB3gG,OACxBywB,MAAOkwE,EAAgB5/F,SAG/Bg+D,GAAa3hF,OAAOonD,GACpBw6B,EAAgB92B,EAASo4B,SAAS97B,IAClCy6B,EAAkBxwB,YAClBywB,GAAO9hF,OAAO6hF,EAAkBzM,WAAYyM,EAAkBuB,gBAE/C,WAGVugC,EAAchgG,GACnBksD,GAAGgtB,wBAAwB,CACvB5kK,OAAQglJ,EACRnyB,SAAUA,EACVsyC,YAAaz5E,EACb1jB,SAAU,SAAS+mC,EAAc06E,GAC7B,GAAK16E,EAAL,CAIAiF,GAAUwZ,OAAM,GAChBqF,EAASxF,WACT,IACIs+D,EADS94D,EAAS9E,YACQnuH,OAAS,EACnC+vJ,GACA98B,EAAS++B,YAAY+5B,EAAkBh8B,GAE3C,IAAIi8B,EAAqB/4D,EAASw+B,gBAAgBs6B,GAClDhmF,GAAGyI,+BAA+Bw9E,EAAoBlgG,EAAQqjB,EAAc,KAAM06E,GAClF9/B,EAAgB92B,EAASo4B,SAAS0gC,IAClCjiC,GAAa3hF,OAAO4jH,GAEpB33E,GAAUwZ,OAAM,GAEhBxZ,GAAU7tG,KAAK,CACXwnH,KAAM,CAAC,QACPja,OAAQ,cACRh1B,OAAQ,CAACinB,GAAGgI,WAAWi+E,EAAmBlgG,QAASikE,UApJ9Dq7B,GAAiB9zK,MAAM8zK,EAActgG,QAAUxzE,MAAM8zK,EAAcrgG,SAAWqgG,EAActgG,OAAS,GAAKsgG,EAAcrgG,QAAU,EACnIitD,GAAG4M,MAAM,CACLxkJ,OAAQglJ,EACRriJ,KAAM,QACNqQ,QAAS2iG,GAAK,sBACdniB,QAAS,CAAC,SAsJA,YAAdipE,GAA4BA,GAC5B7kB,GAAGyyB,sBAAsB,CACrBjvD,MAAO4vE,EACPhrL,OAAQglJ,EACRwlB,QAAS0gB,EACTljH,SAAU,SAASv8D,GACE,aAAbA,EAAI9I,KACJwoL,EAAc1/K,EAAI2vG,OACE,iBAAb3vG,EAAI9I,KACX0oL,EAAiB5/K,EAAI2vG,MAAO3vG,EAAIy/J,SACZ,aAAbz/J,EAAI9I,KACX+oL,EAAcjgL,EAAI2vG,OACX3vG,EAAI9I,QAOT,UAAd85J,GACAivB,EAAcV,EAAct/F,QAEd,UAAd+wE,IAC2B,QAAvBuuB,EAAcroL,KACd0oL,EAAiBL,GAEjBG,EAAcH,EAAct/F,WAyF/BmgG,EAAT,SAA0BniF,EAAO+yD,YAEpBqvB,IACLl0C,GAAG4M,MAAM,CACLxkJ,OAAQglJ,EACRriJ,KAAM,UACNqQ,QAAS2iG,GAAK,0BAA4B,eAC1CniB,QAAS,CAAC,QAKlB,IADA,IACgBhQ,EADZuoG,GAAqB,EAChBpsL,EAAI,EAAS6jF,EAAOkmB,EAAM/pG,GAAIA,IAAK,CACxC,IAAIqsL,EAAYxoG,EAAK7+E,KAAK8W,MAAM,KAEd,SADlBuwK,EAAYA,EAAUA,EAAUpsL,OAAS,GAAGinB,eACrB,SAETynI,GACN,IAEI29B,EAAgB,KAEpB,GAAI39B,EAAEjjH,MAHa,WAIfusG,GAAG4M,MAAM,CACLxkJ,OAAQglJ,EACRriJ,KAAM,QACNqQ,QAAS,8CACTwgF,QAAS,CAAC,YALlB,CAUA,IAEI04F,EAFAC,EAAgC,IAAjBziF,EAAM9pG,QAAgB0uJ,EAAEjjH,MAdrB,SAelB+gJ,GAAe,EAGfD,GACAv0C,GAAG4M,MAAM,CACLxkJ,OAAQglJ,EACRhyI,QAAS2iG,GAAK,kBACd3tC,SAAU,SAAUjmE,GAChBqqL,GAAe,EACfF,EAAc,MAElBzzE,UAAW,SAAUnnD,GACjB46H,EAAc56H,KAM1B,IAAI+6H,EAAS,IAAIn9B,WACjBm9B,EAAOp5K,OAAS,SAAUq5K,GAEtB10C,GAAG2Y,YAAYjuJ,MAAK,SAASkuJ,GAEzB,IAAI27B,GAAiBC,EAIrB,IACI,IAAIG,EAUJ,IAPAA,EAAM/7B,EAAUg8B,QACXF,EAAatsL,OAAO+B,OACrB,CACI0qL,oBAAoB,EACpBC,eAAe,EACfC,wBAAwB,KAExBjiG,MAAQuhG,GAAiBM,EAAI5hG,OAASshG,EAe1C,OAdIC,GACAA,SAEJt0C,GAAG4M,MAAM,CACLxkJ,OAAQglJ,EACRriJ,KAAM,QAENqQ,QAAS2iG,GAAK,wBAAwBjkG,QAAO,OAAS,QAChD,eACAikG,GAAK,mBAAqB,KAAO42E,EAAI7hG,MAAQ,MAAQ6hG,EAAI5hG,OAFtDgrB,sBAKTniB,QAAS,CAAC,QAOlB+4F,EAAM,KAEN,IACIA,EAAM/7B,EAAUg8B,QAASF,EAAatsL,OAAO+B,QAC/C,MAAO4D,IAGT,GAAI4mL,EAAK,CAEL,IAAIK,EAAeh1C,GAAGyY,IAAIm8B,QAAQD,GAEhB,UAAd9vB,GAAyBmwB,EAAaxoL,OACtC0nL,IAGAI,GACAA,IAEJnB,EAAsB6B,EAAct+B,EAAE3pJ,KAAM83J,QAE5C8vB,EAAM/7B,EAAUg8B,QAASF,EAAatsL,OAAO+B,OAAgB,CAAE0qL,oBAAoB,EAAMC,eAAe,IACtF,UAAdjwB,GACAqvB,IAGAI,GACAA,IAEJnB,EAAsB,CAClBpoL,KAAM,MACN+nF,MAAO6hG,EAAI7hG,MACXC,OAAQ4hG,EAAI5hG,OACZe,OAAQ6gG,EAAI7gG,OACZtnF,OAAO,GACRkqJ,EAAE3pJ,KAAM83J,GAIjB,MAAO92J,GACDumL,GACAA,IAEJt0C,GAAG4M,MAAM,CACLxkJ,OAAQglJ,EACRriJ,KAAM,QACNqQ,QAAS,kCACTwgF,QAAS,CAAC,YAGnB9/E,OAAM,WACLw4K,IACAtlF,MAAM,yCAIdylF,EAAOQ,kBAAkBv+B,IAnIV,CAoIhB9qE,GAEIA,EAAK7gF,KAAKkP,MAAM,WAAS,SACrBy/C,GACPv3C,OAAOs/D,IAAMt/D,OAAOs/D,KAAOt/D,OAAO20I,UAClC,IAAIj9I,EAAMsI,OAAOs/D,IAAIoQ,gBAAgBn4B,GACjCo1C,EAAK,IAAIie,MACbje,EAAGh0F,IAAMjB,EACTk0F,GAAGc,UAAUC,GAAI,WACbqkF,EAAsB,CAClBpoL,KAAM,QACN+nF,MAAOgc,EAAGhc,MACVC,OAAQ+b,EAAG/b,OACXe,OAAQgb,GACTp1C,EAAE3sD,KAAM83J,MAZa,CAc7Bj5E,GAEHuoG,GAAqB,EAGzBA,GACAn0C,GAAG4M,MAAM,CACLxkJ,OAAQglJ,EACRhyI,QAAS2iG,GAAK,2BACdhzG,KAAM,QACN6wF,QAAS,CAAC,SAsEbs5F,EAAT,WAGQC,EAAUC,GACVC,EAAmB1xE,aAAarxF,MAAMC,QAAU,QAEhD8iK,EAAmB3qB,aAAah+C,GAC5B2oE,EAAmBnoD,UACH,SAAZxgB,GACA3e,GAAGkB,IAAIomF,EAAmB1xE,aAAc,CACpC9tG,KAAM,QACNC,MAAO,KAEXi4F,GAAGkB,IAAI+iD,EAAkBruC,aAAc,CACnC9tG,KAAM,YAGVk4F,GAAGkB,IAAIomF,EAAmB1xE,aAAc,CACpC9tG,KAAM,GACNC,MAAO,UAEXi4F,GAAGkB,IAAI+iD,EAAkBruC,aAAc,CACnC9tG,KAAM,OAGdm1J,EAAU14I,MAAMC,QAAU,QAC1By/H,EAAkBhuB,QAAQ/hH,KAAK2K,IAAI,EAAGuoK,EAAUG,GAAYC,GAC5DjjC,EAAckjC,SAAQ,KAGN,SAAZ9oE,GACA3e,GAAGkB,IAAIomF,EAAmB1xE,aAAc,CACpC9tG,KAAM,IACNC,MAAO,KAEXi4F,GAAGkB,IAAI+iD,EAAkBruC,aAAc,CACnC9tG,KAAM,QAGVk4F,GAAGkB,IAAIomF,EAAmB1xE,aAAc,CACpC9tG,KAAM,GACNC,MAAO,MAEXi4F,GAAGkB,IAAI+iD,EAAkBruC,aAAc,CACnC9tG,KAAM,OAGdm1J,EAAU14I,MAAMC,QAAU,OAC1By/H,EAAkBhuB,QAAQ/hH,KAAK2K,IAAI,EAAGuoK,GAAUI,GAChDjjC,EAAckjC,SAAQ,MAK1BH,EAAmB1xE,aAAarxF,MAAMC,QAAU,OAChC,SAAZm6F,EACA3e,GAAGkB,IAAI+iD,EAAkBruC,aAAc,CACnC9tG,KAAM,UAGVk4F,GAAGkB,IAAI+iD,EAAkBruC,aAAc,CACnC9tG,KAAM,MAGdm1J,EAAU14I,MAAMC,QAAU,QAC1By/H,EAAkBhuB,QAAQ/hH,KAAK2K,IAAI,EAAGuoK,EAAUG,GAAYC,GAC5DjjC,EAAckjC,SAAQ,KAMrBC,EAAT,WACoB,SAAZ/oE,GACA3e,GAAGkB,IAAI+7D,EAAW,CACdn1J,KAAM,IACNC,MAAO,GACP6zG,WAAY,OACZC,YAAa,iCAEjB7b,GAAGkB,IAAI+iD,EAAkBruC,aAAc,CACnC9tG,KAAM,YAGVk4F,GAAGkB,IAAI+7D,EAAW,CACdn1J,KAAM,GACNC,MAAO,IACP6zG,WAAY,+BACZC,YAAa,SAEjB7b,GAAGkB,IAAI+iD,EAAkBruC,aAAc,CACnC9tG,KAAM,OAGdy8I,EAAcmR,WAAW/2C,GACzBssC,GAAayK,WAAW,GAAK/2C,GAC7BolC,GAAa2R,WAAW,GAAK/2C,GAC7BwoE,IACAQ,GAAkB7oE,cAAcH,IAiK3BqlC,EAAT,SAAyBt5B,GACrBk9D,EAAkBl9D,EAAMjwH,QACxBotL,EAAa7xC,WAAWtrB,EAAMjwH,SAC9BwwJ,GAAaiB,SAASxhC,IAsOjBo9D,EAAT,WACI71C,GAAGytB,eAAe,CACdiB,aAAcA,EACdC,eAAgB9c,EAAciB,kBAC9B+a,cAAeylB,EACf1kB,YAAa3zC,EAAShF,WACtB44C,aAAc5zC,EAAS/E,YACvB44C,eAAgB3sJ,OAAOq/F,WAAa4zE,EAAoBD,EAAUA,EAAUG,EAC5EvmB,gBAAiBwmB,EACjBvmB,UAAW,SAASl8E,EAAOC,EAAQx0B,GAC/B08D,EAAS/7G,MAAM,CACX4zE,MAAOA,EACPC,OAAQA,EACRx0B,MAAmB,IAAZA,EAAMjwD,EAAUiwD,EAAQ,OAGnCuzF,GAAa3hF,OAAO,GACpB4hF,EAAgB92B,EAASo4B,SAAS,IAClCrB,EAAkBxwB,YAClBywB,GAAO9hF,OAAO6hF,EAAkBzM,WAAYyM,EAAkBuB,gBAE/C,GAEnB0b,SAAU,gBAIT6mB,EAAT,SAAoB1lH,GAChB29B,GAAGsD,YAAY,CACXvd,OAAQmnC,EAAS9C,kBAAkB,GACnCxmB,SAAU5D,GAAGkC,UAAY4nD,EAAe,OACxChmD,MAAO9D,GAAGkC,UAAY4nD,EAAe,OACrCznF,SAAUA,GAAsB,gBAuM/B2lH,EAAT,WACI,GAAKC,EAgBL,IAZA,IAQI/nD,EAAYgoD,EAAiB/nD,YAC7BgoD,EAAWF,EAAWzrB,iBAEtB4rB,EAAUruL,OAAOD,KAXP,CACVs2H,KAAQ,GACRW,KAAQ,GACRvjG,KAAQ,GACRq+E,KAAQ,GACRglB,MAAS,KAOJ72H,EAAI,EAAGA,EAAIouL,EAAQnuL,OAAQD,IAC5BkmI,IAAckoD,EAAQpuL,GACtBiuL,EAAW1yB,aAAa6yB,EAAQpuL,IAAI,IAEpCiuL,EAAW1yB,aAAa6yB,EAAQpuL,IAAI,GAChCmuL,IAAaC,EAAQpuL,IACrBiuL,EAAWvjK,KAAKw7G,KAOvBmoD,EAAT,SAAyB7pB,GACrBvsB,GAAGqsB,gBAAgBjf,EAAUnyB,EAAS9C,kBAAkB,IAAI,SAAUk+D,GAClE,GAAsB,IAAlBA,EAASxgL,MAAiC,IAAnBwgL,EAASvgL,OAAgC,IAAjBugL,EAAS/hG,KAAiC,IAApB+hG,EAAS33E,OAAlF,CAIA,IAAI9oG,EAAI,CACJpN,QAASmtL,EACT7hG,OAAQmnC,EACRxnH,MAAO4iL,EACPjhE,QAAShZ,IAEb4jC,GAAG8T,UAAU3e,WAAWvoI,MAAMgJ,GAC9Bk8I,GAAa3hF,SACb6hF,EAAkBxwB,YAClBywB,GAAO9hF,OAAO6hF,EAAkBzM,WAAYyM,EAAkBuB,kBAC/DjB,EAAeia,IAuBb+pB,EAAT,WACI,GAAKxD,EAASyD,UAAd,CAGA,IACMh8D,EADY,IAEFp4G,OAAOs/F,aACnB+0E,EAAehrB,aAAe,GAAKrpJ,OAAOs/F,YAE9Cg1E,GAAiBnkK,MAAMC,QAAUgoG,EAAY,GAAK,SApxDlD+4D,EAAkBrxK,KAAK6K,IAAI,KAAM7K,KAAK2K,IAAI,KAAM3K,KAAK2K,IAAIzK,OAAO82G,OAAOnmC,MAAO3wE,OAAO82G,OAAOlmC,UAC5FqiG,EAAoB,IACpB1oE,EAA6BomE,EAAS4D,MAAQ,OAAU7oF,GAAarb,QAAQ,WAAaqb,GAAarb,QAAQ,WAAa,QAC1HqlE,EAAgBi7B,EAAS1+F,KAAO0+F,EAAS1+F,IAAIyjE,aAAgBi7B,EAAS1+F,IAAIyjE,aAAe,SACzF3K,EAAe4lC,EAAS5lC,aAC1BE,EAAW1yI,SAASM,cAAc,OACtCoyI,EAAS9yC,UAAY,wBACrB,IAAI66E,EAAkBlzK,KAAK2K,IAAI,EAAGzK,OAAOq/F,YACrC+zE,EAAmBtzK,KAAK2K,IAAI,EAAGzK,OAAOs/F,aACpC6zE,EAAY,IACdrlC,EAAyB,MACzBh1B,EAAqB,IAAI+kB,GAAG+c,SAC5B81B,EAAW,CACPr9D,WAAYq9D,GACZ,CACA//F,MAAO7wE,KAAK6K,IAAIwmK,EAAiBnxK,OAAOq/F,WAAa4zE,EAAoBD,EAAUA,EAAUG,GAC7FviG,OAAQ9wE,KAAK6K,IAAIwmK,EAAiBiC,IACnCzC,EAAS4D,OAAQ,EAAK,GAC7Bz7D,EAAS+oB,WAAW5nC,IACpB,IACI45E,EADAz8B,EAAwB,KAGvBu5B,EAAS3lC,eACV2lC,EAAS3lC,aAAe,CAAC94G,KAAM,aAAUn1B,MAAO,eAqCpD,IAAK,IAAIqnB,KAbLssJ,EACAA,EAAW,MAEXz2E,GAAUwZ,OAAM,GAChBqF,EAASxF,WACTwF,EAASnF,UAAU,EAAG,CAAEzmH,EAAG,IAAKmmF,EAAG,IAAKjvD,EAAG,MAC3C61E,GAAUwZ,OAAM,IAEpB2jC,EAAY,CACRzlE,OAAQ,IAAIksD,GAAG+c,SAAS,CAACznC,KAAM2F,GAAW63D,EAAS4D,OAAQ,EAAK,GAChErpF,MAAO4tB,EAAS07D,gBAAkB,EAClCj9B,QAAS,IAEC1Z,GAAG0Z,QACT1Z,GAAG0Z,QAAQrsJ,eAAek5B,KAC1BgzH,EAAUG,QAAQnzH,GAAK,IAAIy5G,GAAG0Z,QAAQnzH,GAClCgzH,EAAUzlE,QACVylE,EAAUG,QAAQnzH,GAAGw9G,WAAWwV,EAAUzlE,OAAO2lE,gBAAgBF,EAAUlsD,SAMvF,IAAIqhE,EAAe,IAAI3gE,GAAGwL,IAAI,EAAG,EAAG,GAChCq8E,OAAA,EAAcgB,OAAA,EACdC,EAAuB,EACvBlB,EAAkB16D,EAASw+B,gBAAgBx+B,EAAS07D,gBAAkB,GASpElxB,EAAsB,IAAIzlB,GAAG8c,qBAC/B,SAACv+F,GACGszF,EAAcznC,SAAS7rD,GACvBq3H,EAAaxrE,SAAS7rD,GACtBmwG,EAAe3gE,GAAGqD,QAAQ7yC,MAE9B,SAAC9qB,GACGmiJ,EAAa5xD,QAAQvwF,GACrBu+G,EAAkBkhC,cAAqB,EAAPz/I,MAEpC,SAACixE,GACGkxE,EAAa3xC,WAAWv/B,MAE5B,WAAM,OAAAmtC,EAAcxnC,cACpB,WAAM,OAAA0uC,EAAW69B,GAAgBryC,aACjC,WAAM,OAAAwU,EAAW69B,GAAgBpyC,gBACjC,WACI,MAAO,CACHiE,WAAYzI,GAAG6c,UAAU+5B,GAAgBnuC,WACzCC,cAAe1I,GAAG6c,UAAU+5B,GAAgBluC,kBAKpDouC,EAAgB,IAAI/oF,GAAGqN,WAAW27E,cAAc,CAChDhwF,UAAWgsF,EAAmB,KAE9BiE,EAAgB,IAAIjpF,GAAGqN,WAAW67E,cAElCC,EAAiB,IAAInpF,GAAGqN,WAAWA,WAAW,CAC9Cza,SAAU,CACNq2F,EACAF,KAIRI,EAAep2F,aAAY,SAASz9C,GACb,SAAfA,EAAMt4C,OACNigK,EAAU14I,MAAMkzF,cAAgB,OAChCowE,EAAalyC,UAAUrgG,EAAM1c,EAAG0c,EAAMzc,EAAGyc,EAAM+3C,UAC/C42D,EAAkBmlC,gBAEH,SAAf9zI,EAAMt4C,OACN6qL,EAAajyC,OAAOtgG,EAAM1c,EAAG0c,EAAMzc,EAAGyc,EAAM+3C,UAAU,EAAO/3C,EAAMi9C,aACnE0xD,EAAkBkI,iBAAiB72G,EAAM1c,EAAG0c,EAAMzc,EAAGyc,EAAM+3C,UAC3D42D,EAAkBmlC,gBAEH,OAAf9zI,EAAMt4C,OACNigK,EAAU14I,MAAMkzF,cAAgB,GAChCowE,EAAahyC,UACboO,EAAkBmlC,gBAEH,SAAf9zI,EAAMt4C,OACN6qL,EAAapsC,WAAW3F,gBAAgBxgG,EAAMwuB,GAAIxuB,EAAM0uB,GAAI1uB,EAAMyuB,GAAIzuB,EAAM2uB,IAC5EggF,EAAkBmlC,mBAI1B,IAAIC,EAAmB,CACnB3jJ,KAAM,GACNmgF,MAAO,OACPI,QAAQ,EACRE,UAAU,EACVJ,KAAM,aACNpP,QAAS,GAGPstC,EAAuC,IAAIhS,GAAGkd,kBAAkB,CAClEjiC,SAAUA,EACVnoC,MAAO7wE,KAAK2K,IAAI,EAAGuoK,EAAUG,GAC7BviG,OAAQwiG,EACRnvF,OAAQ8wF,EAAet2F,QACvB6+B,OAAQ,SAAS7yB,EAAQyqF,GACrB5xB,EAAoBr7C,SAASxd,GACzByqF,IACAxlC,EAAcyO,cACdtO,EAAkB3G,QAAQ4qC,EAAiB/nD,eAGnDxP,OAAQ,SAAS44D,EAASC,GACtB,IAAIhgE,EAAa0D,EAAS2/B,cAAc+6B,EAAgB7hG,QACxDmnC,EAASu8D,UAAUjgE,EAAY+/D,EAASC,EAAS1lC,EAAcxnC,WAAYotE,GAAOjzC,aAAcizC,GAAOhiB,eAAgBgiB,GAAO/hB,YAAa+hB,GAAO9hB,UAAW8hB,GAAO7hB,iBACpK5jB,EAAkBmlC,gBAEtBx4D,OAAQ,SAAS24D,EAASC,EAASryF,GAC3B86C,GAAGyrB,cAAct+J,MAAQ,GAI7B6yI,GAAGswB,eAAe,CACdr1C,SAAUA,EACV1D,WAAY0D,EAAS2/B,cAAc+6B,EAAgB7hG,QACnDntD,EAAG2wJ,EACH1wJ,EAAG2wJ,EACHryF,SAAUA,EACV3mC,MAAOszF,EAAcxnC,WACrBskD,eAAgB9c,EAAciB,kBAC9Br/G,KAAM2jJ,EAAiB3jJ,KACvBmgF,MAAOwjE,EAAiBxjE,MACxBI,OAAQojE,EAAiBpjE,OACzBE,SAAUkjE,EAAiBljE,SAC3BJ,KAAMsjE,EAAiBtjE,KACvBpP,QAAS0yE,EAAiB1yE,QAC1BsqD,UAAW,SAAS1oJ,GAEhB,IAAImqJ,EAAYnqJ,EAAIi4C,MACpBkyG,EAAUniK,EAAIgY,EAAIo+F,QAElB0yE,EAAiB3jJ,KAAOntB,EAAImtB,KAC5B2jJ,EAAiBxjE,MAAQttG,EAAIstG,MAC7BwjE,EAAiBpjE,OAAS1tG,EAAI0tG,OAC9BojE,EAAiBljE,SAAW5tG,EAAI4tG,SAChCkjE,EAAiBtjE,KAAOxtG,EAAIwtG,KAC5BsjE,EAAiB1yE,QAAUp+F,EAAIo+F,QAE/B,IAAI6S,EAAa0D,EAAS2/B,cAAc+6B,EAAgB7hG,QACxDmnC,EAASrhB,KAAK2d,EAAY,CACtB7D,QAASptG,EAAIotG,QACb/sF,EAAGrgB,EAAIqgB,EACPC,EAAGtgB,EAAIsgB,EACP6M,KAAMntB,EAAImtB,KACVqgF,KAAMxtG,EAAIwtG,KACVF,MAAOttG,EAAIstG,MACXI,OAAQ1tG,EAAI0tG,OACZE,SAAU5tG,EAAI4tG,SACdhvB,SAAUA,EACV3mC,MAAOwvC,GAAG0L,eAAe5M,UAAU4jE,KAEvCze,EAAkBmlC,mBAK9Bt4D,QAAS,SAAShiC,EAASy6F,EAASC,EAASryF,GACzB,SAAZrI,GACA66F,GAAU5/F,OAAOw/F,EAASC,EAASryF,GAEvB,SAAZrI,GACA66F,GAAU/5B,OAAO25B,EAASC,GAEd,OAAZ16F,GACA66F,GAAU3/F,KAAKu/F,EAASC,IAIhCr8D,aAAc,SAASy8D,GAEfA,EAAct4D,QAAQ1xG,SAAS,UAC/B2kI,EAAcM,IAAI,CACd7nJ,KAAM,YACNkmE,MAAO0mH,EAAc1mH,MACrBqlC,SAAgC,IAAtBqhF,EAAcnyF,MAAcvjF,KAAK2uD,KAInDqlH,EAAiB/sB,gBAAgByuB,EAAc1mH,QAAU+gF,EAAkB4lC,eAC3E3B,EAAiB9sB,iBAAiBwuB,EAAc1mH,QAAU+gF,EAAkB6lC,eAE5E5lC,GAAO9hF,OAAOwnH,EAAc1mH,MAA6B,IAAtB0mH,EAAcnyF,MAAcvjF,KAAK2uD,KAExEgwD,OAAQ,WACAxkB,GAAUF,WACN47E,GAAgBx+B,QAChBhH,EAAcM,IAAI70C,GAAK,SAAS,IAI5C+iB,OAAQ,WACA1kB,GAAUD,WACN27E,GAAgB39B,QAChB7H,EAAcM,IAAI70C,GAAK,SAAS,MAK5CrmB,EAAc,IAAIqW,GAAGgN,YAAY,CACjCjjB,OAAQ,SAAS9C,EAAQ3xC,EAAOu8D,GAC5B,KAAIogC,GAAGyrB,cAAct+J,MAAQ,MAGzB4gG,GAAG6M,gBAAe,MAINo8E,EAActwF,gBAAkBsrD,EAAkBtrD,iBAClE,CA6GA,GAzGiB,SAAbkZ,GACAoyC,EAAkB+lC,WAAWrgG,EAAYqoB,UAAU,SAAW,EAAE,EAAI,IAEvD,UAAbH,GACAoyC,EAAkB+lC,WAAWrgG,EAAYqoB,UAAU,UAAW,EAAG,GAAI,IAExD,SAAbH,GACAoyC,EAAkB1xB,UAEL,QAAb1gB,GACAoyC,EAAkBxwB,WAAU,GAE5B,CAAC,SAAU,SAAS7zG,SAASiyF,KAC7Bv8D,EAAMozC,iBACNqhG,GAAgBx+B,SAGhB,CAAC,SAAU,SAAS3rI,SAASiyF,KAGrB7R,GAAGkN,SAAS,eAAgB2E,IAC5B7R,GAAGkN,SAAS,cAAe2E,KACf,MAAX5qB,KAGT3xC,EAAMozC,iBACNqhG,GAAgB39B,QAEf24B,EAAS4D,QACN,CAAC,SAAU,SAAS/oK,SAASiyF,KAC7Bv8D,EAAMozC,iBACNuhG,GAAephF,QAEf,CAAC,eAAgB,eAAejpF,SAASiyF,KACzCv8D,EAAMozC,sCAEL,SAAQqmB,QACD3b,2EAAAA,GAAU,oBAEJ+rD,EAAaphH,MAAMmvF,EAASzC,qEAElCr3B,GAAU,EACVj9C,YAAW,WACP,MAAM,IAAI/7C,MAAM,uDAAsDi1G,EAAAC,MACvE,GACHi1C,EAAcM,IAAI,KAAI70C,GAAG,wBAA0B,WAEnD5c,IACA2xF,EAAS3lC,aAAajuI,QACtBozI,EAAcM,IAAI70C,GAAK,wBAAwB,gEAIvD,CAAC,SAAU,SAASpwF,SAASiyF,KAC7Bv8D,EAAMozC,iBACN2/F,GAAgB,KAGpB,CAAC,SAAU,SAASzoK,SAASiyF,IAC7Bv8D,EAAMozC,iBAINiB,EAAYugG,kBAAkB,CAAC,OAAQ,QAAS,KAAM,WACvC,SAAXjjG,GACAg9D,EAAkBkmC,cAAc,EAAG,GAExB,UAAXljG,GACAg9D,EAAkBkmC,eAAc,EAAI,GAEzB,OAAXljG,GACAg9D,EAAkBkmC,cAAc,EAAG,GAExB,SAAXljG,GACAg9D,EAAkBkmC,cAAc,GAAG,IAKvC,CAAC,SAAS,WAAWvqK,SAASiyF,KACf,SAAX5qB,IACAg9D,EAAkBmmC,UAAS,IAAK,GAChClmC,GAAO9hF,OAAO6hF,EAAkBzM,WAAYyM,EAAkBuB,gBAEnD,UAAXv+D,IACAg9D,EAAkBmmC,SAAS,IAAI,GAC/BlmC,GAAO9hF,OAAO6hF,EAAkBzM,WAAYyM,EAAkBuB,iBAGlE,CAAC,QAAQ5lI,SAASiyF,KAClBoyC,EAAkBmmC,SAAS,GAC3BlmC,GAAO9hF,OAAO6hF,EAAkBzM,WAAYyM,EAAkBuB,gBAIjD,cAAb3zC,GACAg2E,EAAarsC,aAAa,IAAOyI,EAAkBzM,YAEtC,eAAb3lC,GACAg2E,EAAatsC,aAAa,IAAO0I,EAAkBzM,YAEtC,UAAb3lC,IACAqb,EAASnF,UAAUmF,EAAS2/B,cAAc+6B,EAAgB7hG,QAAS+9D,EAAcxnC,YACjFioC,EAAcM,IAAI70C,GAAK,WAAW,IAElC,CAAC,SAAU,aAAapwF,SAASiyF,GAAW,CAC5C,IAAI2X,EAAa0D,EAAS2/B,cAAc+6B,EAAgB7hG,QACrC,IAAfyjC,GAAqBwhC,EAAWvM,YAAY7B,qBAG5C1vB,EAASm9D,WAAW7gE,GAFpB0D,EAASnF,UAAUyB,EAAY,CAACloH,EAAG,IAAKmmF,EAAG,IAAKjvD,EAAG,KAAM,aAI7D+rH,EAAcM,IAAI70C,GAAK,kBAAkB,GAE5B,MAAb6B,IACAv8D,EAAMozC,iBACNu7D,EAAkB3G,QAAQ,QAC1B4qC,EAAiB9qE,UAAU,QAC3B6qE,EAAWvjK,KAAK,QAChBsjK,IACAsC,GAAY5lK,KAAK,aAEJ,MAAbmtF,IACAv8D,EAAMozC,iBACNu7D,EAAkB3G,QAAQ,QAC1B4qC,EAAiB9qE,UAAU,QAC3B6qE,EAAWvjK,KAAK,QAChBsjK,IACAsC,GAAY5lK,KAAK,gBAEJ,MAAbmtF,IACAv8D,EAAMozC,iBACNu7D,EAAkB3G,QAAQ,QAC1B4qC,EAAiB9qE,UAAU,QAC3B6qE,EAAWvjK,KAAK,QAChBsjK,IACAsC,GAAY5lK,KAAK,eAGJ,MAAbmtF,IACAv8D,EAAMozC,iBACNu7D,EAAkB3G,QAAQ,QAC1B4qC,EAAiB9qE,UAAU,QAC3B6qE,EAAWvjK,KAAK,QAChBsjK,IACAsC,GAAY5lK,KAAK,cACjBg0B,QAAQ7d,IAAIiuJ,IAGC,MAAbj3E,IACAv8D,EAAMozC,iBACNu7D,EAAkB3G,QAAQ,QAC1B4qC,EAAiB9qE,UAAU,QAC3B6qE,EAAWvjK,KAAK,QAChBsjK,IACAsC,GAAY5lK,KAAK,eACjBg0B,QAAQ7d,IAAIiuJ,IAKC,MAAbj3E,IACAv8D,EAAMozC,iBACNu7D,EAAkB3G,QAAQ,QAC1B4qC,EAAiB9qE,UAAU,QAC3B6qE,EAAWvjK,KAAK,QAChBsjK,IACAsC,GAAY5lK,KAAK,gBACjBg0B,QAAQ7d,IAAIiuJ,IAEC,MAAbj3E,IACAv8D,EAAMozC,iBACNu7D,EAAkB3G,QAAQ,QAC1B4qC,EAAiB9qE,UAAU,QAC3B6qE,EAAWvjK,KAAK,QAChBsjK,IACAsC,GAAY5lK,KAAK,eAGJ,MAAbmtF,IACAv8D,EAAMozC,iBACNu7D,EAAkB3G,QAAQ,QAC1B4qC,EAAiB9qE,UAAU,QAC3B6qE,EAAWvjK,KAAK,QAChBsjK,KAEa,MAAbn2E,IACAv8D,EAAMozC,iBACNu7D,EAAkB3G,QAAQ,QAC1B4qC,EAAiB9qE,UAAU,QAC3B6qE,EAAWvjK,KAAK,QAChBsjK,KAEa,MAAbn2E,IACAv8D,EAAMozC,iBACNu7D,EAAkB3G,QAAQ,SAC1B4qC,EAAiB9qE,UAAU,SAC3B6qE,EAAWvjK,KAAK,SAChBsjK,KAEa,MAAbn2E,IACAv8D,EAAMozC,iBACNo7D,EAAc2N,gBAKtBznE,KAAM,SAAS/C,EAAQ3xC,OAodtByvI,EAAS4D,QACV,IAAI12C,GAAG+jB,eAAe,CAClB37J,OAAQsS,SAASutE,KACjB68E,OAAQ,SAAShzD,EAAO+yD,GAChB7kB,GAAGyrB,cAAct+J,MAAQ,GAG7B8mL,EAAiBniF,EAAO+yD,IAE5BD,YAAa,WACT,OAAkC,IAA3B5kB,GAAGyrB,cAAct+J,SAIhC4gG,GAAGhqD,iBAAiB5hC,OAAQ,SAnRhC,SAAiB6vE,GACTguD,GAAGyrB,cAAct+J,MAAQ,IAgC7B6kF,EAAE0E,kBACF1E,EAAEyE,iBAEEzE,EAAEsmG,cAAcxmF,MAAM,YA/BgBymF,EAAYnoH,GAClB,GAA5BmoH,EAAWD,eACc,mBAAbloH,GACRA,OAAS7mE,GAIjB,IAAIk9B,EAAQ8xJ,EAAWD,cAAc7xJ,MAErC,GAAal9B,MAATk9B,EACyB,mBAAb2pC,GACRA,OAAS7mE,QAGb,IAAK,IAAIxB,EAAI,EAAGA,EAAI0+B,EAAMz+B,OAAQD,IAC9B,IAAsC,GAAlC0+B,EAAM1+B,GAAGgD,KAAKwF,QAAQ,SAA1B,CAGA,IAAIihG,EAAO/qE,EAAM1+B,GAAGywL,YAEK,mBAAbpoH,GACRA,EAASohC,IAWrBinF,CAAiCzmG,GAAG,SAAU0mG,GAE1C,GAAIA,EAAW,CACX,IAAIlkC,EAAM,IAAIznC,MACdynC,EAAIn5I,OAAS,WACT83K,EAAsB,CAClBpoL,KAAM,QACN+nF,MAAO0hE,EAAI1hE,MACXC,OAAQyhE,EAAIzhE,OACZe,OAAQ0gE,GACT,KAAM,YAEb,IAAImkC,EAASx2K,OAAOs/D,KAAOt/D,OAAO20I,UAClCtC,EAAI15I,IAAM69K,EAAO9mG,gBAAgB6mG,OAGlC1mG,EAAEsmG,cAAc7xJ,MAAM,IAC7BurD,EAAEsmG,cAAc7xJ,MAAM,GAAGmyJ,aAAY,SAASC,GAE1C,IADAA,EAAWA,EAAS1+I,QACPlgC,MAAK,WAAa,CAE3B,IAAIu6I,EAAM,IAAIznC,MACdynC,EAAIn5I,OAAS,WACT83K,EAAsB,CAClBpoL,KAAM,QACN+nF,MAAO0hE,EAAI1hE,MACXC,OAAQyhE,EAAIzhE,OACZe,OAAQ0gE,GACT,KAAM,YAEbA,EAAIr5I,QAAU,SAAUpN,GACpB04C,QAAQ7d,IAAI,gBAAiB76B,IAEjCymJ,EAAIskC,YAAc,YAClBtkC,EAAI15I,IAAM+9K,OAEP,GAAIA,EAAS5+K,MAAK,uCAAyC,CAE9D,IAAI2yF,EAASmB,GAAG0L,eAAe1M,SAAS8rF,EAAS/+K,QAAQ,IAAK,KAC9D2rJ,EAAoBr7C,SAASxd,WAuMK,IAGlD,IAAMmsD,EAAkB,GAGxB,IAAK,IAAIa,KAAK5Z,GAAG6c,UACb,GAAI7c,GAAG6c,UAAUxvJ,eAAeusJ,GAAI,CAChC,IAAIm/B,EAAK,IAAI/4C,GAAG6c,UAAUjD,GAAGjR,GAAG,CAC5BK,aAAcgqC,EACd9pC,gBAAiB,SAASxkC,GACtB+gD,EAAoBuzB,YAAYt0E,IAEpC4mC,eAAgB,WACZma,EAAoBwzB,iBAAiB,CACjCxwC,WAAYzI,GAAG6c,UAAU+5B,GAAgBnuC,WACzCC,cAAe1I,GAAG6c,UAAU+5B,GAAgBluC,mBAIxDqQ,EAAWa,GAAKm/B,EAChBA,EAAGp1E,aAAarxF,MAAMywF,QAAU,OAKxChV,GAAGkB,IAAIm+C,EAAU,CACb55F,SAAU,WACV39C,KAAM,IACNy+E,IAAK,IACLx+E,MAAO,IACP4oG,OAAQ,MAGZ,IAAI4zC,EAAgB,IAAItS,GAAGihB,cAErB+J,EAAYj9D,GAAGvgF,GAAG,IAClBgpK,EAAiBzoF,GAAGvgF,GAAG,CACzBg4B,OAAQwlH,IAEZA,EAAUjkD,cAAgB,WACtB,OAAO,GAEXikD,EAAUzsD,QAAUxQ,GAAGgE,YAGvB,IAAIsjF,EAAqB,IAAIr1C,GAAGwqB,mBAAmB,CAC/ChwD,SAAU,WACN06E,OAyERA,IAiCA,IAAIgE,OAAA,EACJh1I,YAAW,WACPg1I,EAAmB,IAAIl5C,GAAG+kB,iBAAiB,CACvCH,YAAa,WACT,OAAkC,IAA3B5kB,GAAGyrB,cAAct+J,QAAgB6pL,EAActwF,gBAE1D++D,oBAAAA,IAEJrY,EAAS7xI,YAAY29K,EAAiBv1E,gBACvC,GAEH5V,GAAGrmB,OAAO0lE,EAAU,CAAC4E,EAAkBruC,aAAcqnD,EAAWqqB,EAAmB1xE,eAEnF5V,GAAGkB,IAAI+7D,EAAW,CACdx3G,SAAU,WACV19C,MAAO,IACPw+E,IAAK,IACLoqB,OAAQ,IACR5rB,MAAQwiG,EAAY,EAAK,KAEzB32E,SAAU,SACV8F,gBAAiB,OACjBkF,WAAY,+BACZ9C,WAAY,OACZorD,YAAa,SAGjB,IAAIknB,OAAA,EAEAA,EADArG,EAAS4D,MACS,IAAIla,GAAgB,CAClClW,OAAQ,WACJ7Z,GAAgBqmC,EAAS4D,MAAM78K,IAAM,eAAgBi5K,EAAS4D,QAElEha,SAAU,WACN18B,GAAG4M,MAAM,CACLxkJ,OAAQglJ,EACRhyI,QAAS2iG,GAAK,iBACdniB,QAAS,CAACmiB,GAAK,UAAW,UAC1B3tC,SAAQysC,EAAAvyG,QAAAoyG,EAAA/6F,GAAArB,MAAE,SAAQw8F,EAAD3yG,OAKT+uH,uEAJA/uH,IAAW4zG,GAAK,UAAQ,iDAIxBmb,EAAUnrB,GAAGvgF,GAAG,CAChBg4B,OAAQ4nG,EACR9yC,UAAW,iBACX7oF,QAAS,+BAAiCssF,GAAK,uBAGnD+0E,EAAS4D,MAAMha,UACX,WACIoW,EAAS3lC,aAAajuI,QACtBkuI,EAASnpG,YAAYi1E,MAEzB,WACIk0B,EAASnpG,YAAYi1E,oDAKzCmjC,YAAa,WACT3vC,EAAsB,SAAZA,EAAqB,QAAU,OACzC+oE,OAIU,IAAIz1C,GAAG6lB,gBAAgB,CACrCI,QAAS6sB,EAAS7sB,QAClBmzB,OAAQ,WACJ3sC,GAAgB,YAAaqmC,EAAS4D,QAE1CxwB,MAAO,WACH2vB,KAEJ1vB,SAAU,WACNkzB,GAAQC,iBAEZlzB,OAAQ,WACJ4xB,GAAephF,QAEnByvD,QAAS,WACLyvB,KAEJxvB,OAAQ,WACJ7Z,GAAgB,YAAaqmC,EAAS4D,UAIlD3oF,GAAGqB,aAAa+pF,EAAgBx1E,aAAc,wBAC9Cw1E,EAAgBx1E,aAAarxF,MAAMmtF,aAAe,OAGlD,IAAIw2E,EAAmB,IAAIj2C,GAAGwmB,iBAAiB,CAC3CK,WAAY,SAAS54B,GACjB,GAAkB,SAAdA,EACA+jB,EAAkB3G,QAAQ,aACvB,GAAkB,SAAdpd,EACP+jB,EAAkB3G,QAAQ,aACvB,GAAkB,SAAdpd,EACP+jB,EAAkB3G,QAAQ,aACvB,GAAkB,SAAdpd,EACP+jB,EAAkB3G,QAAQ,YACvB,CAAA,GAAkB,UAAdpd,EAGP,MAAM,IAAI9lI,MAAM,qBAFhB6pJ,EAAkB3G,QAAQ,SAI9B2qC,EAAWvjK,KAAKw7G,GAChB8nD,IACAlkC,EAAcyO,eAElBqI,SAAU,WACN3W,EAAkB+lC,WAAWrgG,EAAYqoB,UAAU,SAAW,EAAE,EAAI,KAExE6oD,UAAW,WACP5W,EAAkB+lC,WAAWrgG,EAAYqoB,UAAU,UAAW,EAAG,GAAI,KAEzE6gB,OAAQ,WACJk3D,GAAgBx+B,QAEpBx4B,OAAQ,WACJg3D,GAAgB39B,UAGxB87B,EAAiBtpD,WAAW4oD,EAAW,KACvCn5E,GAAU25C,aAAY,WAClBkgC,EAAiB7sB,cAAchtD,GAAUF,WACzC+5E,EAAiB5sB,cAAcjtD,GAAUD,cAE7CpO,GAAGqB,aAAa6mF,EAAiBtyE,aAAc,wBAG/C,IAAIkuC,OAAA,GAqCJA,EAAgB,IAAI7R,GAAG0e,cAAc,CACjC5rE,MAAO,IACPC,OAAQ,GACRisE,SAAU,IACVa,WAAY,IAAI9xD,GAAGwL,IAAI,EAAG,EAAG,GAC7BkmB,OAZJ,SAAuB85D,GACnB7qB,EAAe6qB,EACf3D,EAAaxrE,SAASmvE,GACtB9zB,EAAoBxJ,UAAUs9B,GAC9B1nC,EAAcyO,kBAUJI,UAAUz+I,KAAK2K,IAAI,IAAK3K,KAAK6K,IAAI,IAAKyoK,EAAW,OAC/D1jC,EAAc4O,iBAAgB,SAAU+4B,GAEhCA,EACAxnC,EAAkB3G,QAAQ,SAE1B2G,EAAkB3G,QAAQ4qC,EAAiB/nD,aAC3C6nD,QAIR,IAAI0D,GAAW/+K,SAASM,cAAc,OAClCi6J,GAAWv6J,SAASM,cAAc,OACtC+yF,GAAGkB,IAAIgmE,GAAU,CACbjqD,OAAQ,OACRz4F,QAAS,OACT2tF,SAAU,OACVnB,eAAgB,gBAChBC,WAAY,aAEhB,IAAI06E,GAAyB,IAAI15C,GAAGspB,uBAAuB,CACvDviE,UAAW,EACXyiE,SAAU,SAASljI,GACfwwJ,EAAczvF,aAAa0rF,EAAmBzsJ,OAMtDynE,GAAGrmB,OACCutF,GACA,CAACpjB,EAAcluC,aAAckuC,EAAc8O,mBAAoB+4B,GAAuB/1E,eAG1F,IAAI00E,GAAc,IAAIr4C,GAAG0pB,OAAO,CAC5Bp9C,UAAW,WACXu9C,WAAW,EACXO,OAAS,WA0BL,QAvBST,EAAT,SAAmB30E,GACf,MAAO,CACH/sF,GAAI+sF,EACJwuB,MAAOw8B,GAAG6c,UAAU7nE,GAAQwuB,MAC5B3R,MAAOmuC,GAAG6c,UAAU7nE,GAAQwzD,QAC5BshB,OAAQ,WAvFxB,IAAyB6vB,EAwFL5gC,EAAW/jE,GAAQ2uB,aAAarxF,MAAMC,QAAU,QAvFhD,iBADKonK,EAyFW3kG,KAvF5B6hG,EAAuB8C,GAGvB9nC,IACgB,gBAAZ8nC,EACA9nC,EAAc7gH,QAAO,GAErB6gH,EAAc7gH,QAAO,IAI7B4lJ,EAAiB+C,GACjB/D,EAAe78B,EAAW4gC,IACbvvE,SAASskD,GACtBknB,EAAa7xC,WAAW4xC,GACxB3jC,EAAkB3G,QAAQ,QAC1B4qC,EAAiB9qE,UAAU,QAC3B4qE,IAuEgBlkC,EAAcyO,cACdmF,EAAoBwzB,iBAAiB,CACjCxwC,WAAYzI,GAAG6c,UAAU7nE,GAAQyzD,WACjCC,cAAe1I,GAAG6c,UAAU7nE,GAAQ0zD,gBAExCsqC,EAAYj6B,EAAW/jE,GAAQuvD,WAC/BkhB,EAAoBuzB,YAAYjgC,EAAW/jE,GAAQwvD,eAEvDtjC,QAAS,WACL63C,EAAW/jE,GAAQ2uB,aAAarxF,MAAMC,QAAU,UAnBxDpoB,EAAS,GAwBT8qF,EAASntF,OAAOD,KAAKkxJ,GAChBhxJ,EAAI,EAAGA,EAAIktF,EAAOjtF,OAAQD,IAC/BoC,EAAOoE,KAAKo7J,EAAU10E,EAAOltF,KAEjC,OAAOoC,EA7BF,KAiCb,IAAK,IAAI0vJ,MAAK7Z,GAAG6c,UACT7c,GAAG6c,UAAUxvJ,eAAewsJ,KAC5B4/B,GAASl+K,YAAYw9I,EAAWc,IAAGl2C,cAI3C,IAAMsuC,GAAS,IAAIjS,GAAGm0B,OAAO,CACzBljG,MAAO,EACPqlC,SAAU,EACVi+D,QAAS,WACLviB,EAAkBxwB,WAAU,GAC5BywB,GAAO9hF,OAAO6hF,EAAkBzM,WAAYyM,EAAkBuB,gBAElEkhB,MAAO,WACHziB,EAAkB1xB,UAClB2xB,GAAO9hF,OAAO6hF,EAAkBzM,WAAYyM,EAAkBuB,gBAElEohB,cAAe,SAASr+D,EAAUmuB,GAC9ButB,EAAkBmmC,SAAS7hF,EAAUmuB,GACrCwtB,GAAO9hF,OAAO6hF,EAAkBzM,WAAYyM,EAAkBuB,kBAIlEkkC,GAAS,IAAIz3C,GAAGg1B,OAAO,CACvB/P,YAAapT,IAGb+nC,GAAS,IAAI55C,GAAG61B,OAAO,CACvB5Q,YAAapT,IAGbgoC,GAAU,IAAI75C,GAAG81B,QAAQ,CACzB7Q,YAAapT,IAGb6lC,GAAY,IAAI13C,GAAGud,UAAU,CAC7B1+B,QAAS,SAASi7D,EAAQhoH,EAAIE,EAAItzB,EAAIurD,EAAI/E,GAEtC,IAAIqyB,EAAa0D,EAAS2/B,cAAc+6B,EAAgB7hG,QAEpDq9B,EAAgB,CAChBpmH,KAAM8uL,GAAQ1iB,WACdrlG,GAAIA,EACJE,GAAIA,EACJtzB,GAAIA,EACJurD,GAAIA,EACJ/E,SAAUA,EACVotB,WAAYunE,GAAQxiB,gBACpB3yD,QAASm1E,GAAQr1C,aACjBlzB,SAAUuoE,GAAQvyC,eAEK,SAAvBuyC,GAAQ1iB,YACRhmD,EAASK,UAAYqgC,EAAcxnC,WACnC8G,EAASC,UAAYyoE,GAAQziB,eAC7BjmD,EAASO,YAAcmoE,GAAQtiB,aAAe7/E,EAAYqoB,UAAU,WAEpEoR,EAASa,aAAe6nE,GAAQviB,cAAgB5/E,EAAYqoB,UAAU,SAC5C,WAAtB85E,GAAQ5uC,WACR95B,EAASK,UAAYqgC,EAAcxnC,WACnC8G,EAASC,UAAYyoE,GAAQziB,gBAE7BjmD,EAASI,QAAUsgC,EAAcxnC,YAIrCyvE,GACA7+D,EAAS8+D,aAAaxiE,EAAY,MAClC0D,EAASqnB,UAAU/qB,EAAYpG,IAE/B8J,EAAS8+D,aAAaxiE,EAAY,CAC9B4G,KAAM,SAAS52B,GACXy4C,GAAGsC,UAAU/6C,EAAK4pB,MAI9B6gC,EAAkBmlC,kBAKpBrlC,GAAe9R,GAAG23B,eAAe18C,GAAU,SAAU30G,GACvDyrI,EAAgB92B,EAASo4B,SAAS/sI,IAClC81F,GAAU7tG,KAAK,CACXwnH,KAAM,CAAC,QACPja,OAAQ,aACRh1B,OAAQ,CAACxgE,OAEd8mI,GACG4L,GAAe,IAAIhZ,GAAGshB,aAAa,CACrClU,SAAUA,EACV7yC,QAAS,WACLy7E,EAAWvjK,KAAK,aAGxBumI,GAAasK,aAAaiyB,GAAY,KACtCv8B,GAAaiB,SAASh/B,EAASo4B,SAASp4B,EAAS2/B,cAAc+6B,EAAgB7hG,UAE/E,IAAMkmG,GAAY,IAAIh6C,GAAGy3B,UACrBrqB,EACAyE,EACAC,GACAC,EACAC,EACAC,IACA,WACI,OAAOyc,KAEX,WACI,OAAO4kB,KAEX,WACI,OAAOr4D,KAEX,WACI,OAAO06D,MAET7C,EAAS4D,MACXpkC,GAGEwlC,GAAkB,IAAI93C,GAAGod,gBAC3BrE,EACAC,GACAlH,GACAG,GACAD,GACA,WACI,IAAKuH,EACD,MAAM,IAAIpxJ,MAAM,6BAEpB,OAAOoxJ,KAEX,WAAM,OAAAt+B,KACN,WAAM,OAAA06D,KACN,SAACsE,GACGtE,EAAkBsE,KAEtB,WAAM,OAAArE,KAEVx5E,GAAU25C,aAAY,SAACngJ,GACnBkiL,GAAgBoC,QAAQtkL,MAuC5B,IAAMoiL,GAAiB,IAAIh4C,GAAGie,eAC1B60B,EAAS3lC,aACTC,GACA,WAAM,OAAA6C,KACN,WAAM,OAAAh1B,IACN48B,GAGEwhC,GAAUvG,EAAS4D,MAAQ,KAAO,IAAI12C,GAAGw3B,QAC3CpqB,EACAF,GACA,WAAM,OAAAjyB,EAASzC,eACfy3B,GACA,SAACllJ,GACGklJ,EAAallJ,IAEjBkpL,GACA,WACI+D,GAAephF,SAEnBi/E,EACAC,GACA,WACI91C,GAAGwzB,YAAYv4C,EAAUmyB,EAAU0lC,EAAS3lC,aAAc2lC,EAAS1+F,KAAO0+F,EAAS1+F,IAAIkgE,SAAWw+B,EAAS1+F,IAAIkgE,SAAW,QAE9H8hC,EACAtD,EAAS3lC,cAGPgtC,GAAc,IAAIn6C,GAAG03B,aACvB,WACIhrD,EAAsB,SAAZA,EAAqB,QAAU,OACzC+oE,IACK3C,EAAS4D,OACV7oF,GAAapb,QAAQ,UAAWi6B,KAGxComE,EAASsH,SAGbpE,EAAa,IAAIh2C,GAAG0pB,OAAO,CACvBp9C,UAAW,OACX89C,OAAQ,CACJ,CACIniK,GAAI,OACJ4pG,MAAOkM,GAAK,cACZyF,MAAO9G,EAAAwvB,IACP49B,OAAQ,WACmB,gBAAnB8sB,GACA/kC,EAAc7gH,QAAO,GAEzB+8D,GAAGrmB,OACCutF,GACA,CAACpjB,EAAcluC,aAAckuC,EAAc8O,mBAAoB+4B,GAAuB/1E,eAE1F81E,GAASnnK,MAAMC,QAAU,SAE7B2uF,QAAS,WACLu4E,GAASnnK,MAAMC,QAAU,QAE7B08E,IAAK,CACD+zD,SAAU,SAGlB,CACI/6J,GAAI,OACJ4pG,MAAOkM,GAAK,aACZyF,MAAO9G,EAAAyxB,IACP5T,WAAW,EACXuvC,OAAQ,WACJ7X,GAAOqR,cAAa,IAExBpiD,QAAS,WACL+wC,GAAOqR,cAAa,IAExBr0D,IAAK,CACD+zD,SAAU,SAGlB,CACI/6J,GAAI,OACJ4pG,MAAOkM,GAAK,qBACZyF,MAAO9G,EAAAyvB,IACP5R,WAAW,EACXuvC,OAAQ,WACJjY,EAAc7gH,QAAO,GACrBymJ,GAAOn0B,cAAa,IAExBpiD,QAAS,WACLu2E,GAAOn0B,cAAa,IAExBr0D,IAAK,CACD+zD,SAAU,SAGlB,CACI/6J,GAAI,OACJ4pG,MAAOkM,GAAK,aACZyF,MAAO9G,EAAA0vB,IACP7R,WAAW,EACXuvC,OAAQ,WACJjY,EAAc7gH,QAAO,GACrB4oJ,GAAOt2B,cAAa,IAExBpiD,QAAS,WACL04E,GAAOt2B,cAAa,IAExBr0D,IAAK,CACD+zD,SAAU,SAGlB,CACI/6J,GAAI,QACJ4pG,MAAOkM,GAAK,cACZyF,MAAO9G,EAAA2vB,IACP9R,WAAW,EACXuvC,OAAQ,WACJjY,EAAc7gH,QAAO,GACrB6oJ,GAAQv2B,cAAa,IAEzBpiD,QAAS,WACL24E,GAAQv2B,cAAa,IAEzBr0D,IAAK,CACD+zD,SAAU,SAGlB,CACI/6J,GAAI,SACJ4pG,MAAOkM,GAAK,cACZyF,MAAO9G,EAAA29E,IACPvwB,OAAQ,WACJhY,GAAa3hF,SACb2hF,GAAax/H,MAAMC,QAAU,SAEjC2uF,QAAS,WACL4wC,GAAax/H,MAAMC,QAAU,QAEjC08E,IAAK,CACD+zD,SAAU,SAGlB,CACI/6J,GAAI,OACJi8E,MAAO65B,GAAK,YACZ+rD,OAAQ,WACJkwB,GAAUttD,QAEdxrB,QAAS,WACL84E,GAAUM,QAEdrrF,IAAK,CACD8T,QAAS,UAGjB,CACI96G,GAAI,OACJi8E,MAAO65B,GAAK,YACZwc,YAAa8+D,GACbvvB,OAAQ,WACCuvB,KAGLA,GAAQ11E,aAAarxF,MAAMC,QAAU,QACrC8mK,GAAQ/1B,cAAa,KAEzBpiD,QAAS,WACAm4E,KAGLA,GAAQ11E,aAAarxF,MAAMC,QAAU,OACrC8mK,GAAQ/1B,cAAa,KAEzBr0D,IAAK,CACD8T,QAAS,UAGjB,CACI96G,GAAI,WACJ4pG,MAAOkM,GAAK,gBACZyF,MAAO9G,EAAAi2E,IACP7oB,OAAQ,WACJqwB,GAAYx2E,aAAarxF,MAAMC,QAAU,SAG7C2uF,QAAS,WACLi5E,GAAYx2E,aAAarxF,MAAMC,QAAU,QAG7C08E,IAAK,CACD+zD,SAAU,YAsD1B,IAAMyzB,GAAmB1oF,GAAGvgF,GAAG,CAC3ByhF,IAAK,CACDnc,MAAO,QACPt/B,SAAU,WACVkrD,OAAQ,IACR7oG,KAAM,OAGVi9K,EAASyD,YACTE,GAAiB/uG,OAAOorG,EAASyD,WAChB,IAAIvxI,kBAAiB,WAAM,OAAAsxI,OACnCzwI,QACL2wI,EACA,CACI5pI,YAAY,EACZ0+G,WAAW,EACXC,SAAS,KAkBrBx9D,GAAGrmB,OAAO8uG,EAAgB,CACtBx9B,GAAar1C,aACbqyE,EAAWryE,aACX81E,GACAxnC,GAAOtuC,aACP8zE,GAAO9zE,aACPi2E,GAAOj2E,aACPk2E,GAAQl2E,aACRmuC,GACAkoC,GAAUr2E,aACV01E,GAAUA,GAAQ11E,aAAe,KACjCw2E,GAAYx2E,aACZ5V,GAAGvgF,GAAG,CACFyhF,IAAK,CACDlc,OAAQ,UAGhB0jG,IAAsC,OAG1C,OAAMf,GAAoB,IAAI11C,GAAG8qB,kBAAkB,CAC/CE,UAAAA,EACAt+C,QAAAA,IAKJxhH,KAAKggH,MAAQ,WACT,OAAOkiC,GAGXliJ,KAAKwqI,OAAS,SAAC9iD,EAAGC,GAGV1wE,OAAOo4K,QAAU,GACjBp4K,OAAOw+F,SAAS,EAAG,GAGnBw0E,IAAYlzK,KAAK2K,IAAI,EAAGgmE,IAAM2iG,IAAatzK,KAAK2K,IAAI,EAAGimE,KAI3DsiG,EAAUlzK,KAAK2K,IAAI,EAAGgmE,GACtB2iG,EAAWtzK,KAAK2K,IAAI,EAAGimE,GAEvBqiG,IACAoB,IAEAt9B,GAAasK,aAAaiyB,GAAY,KACtC1jC,EAAc6O,UAAUz+I,KAAK2K,IAAI,IAAK3K,KAAK6K,IAAI,IAAKyoK,EAAW,OAC/DU,EAAiBtpD,WAAW4oD,EAAW,OAG3CrqL,KAAK0nJ,IAAM,SAAChlD,GACR0kD,EAAcM,IAAIhlD,IAGtB1iG,KAAKsvL,OAAS,WACV,OAAO5rC,GAAa3zB,EAAS9C,kBAAkB,GAAGvwB,UAAU,eAGhE18F,KAAKuvL,gCAAS,SAAQ39E,sFACL01E,GAAkBv3D,mIAGnC/vH,KAAKwvL,gBAAkB,WACnBhuE,EAAsB,SAAZA,EAAqB,QAAU,OACpComE,EAAS4D,OACV7oF,GAAapb,QAAQ,UAAWi6B,GAEpC+oE,KAKJvqL,KAAKwqI,OAAOy/C,EAASI,GACrBE,gBAGI1nF,GAAGhqD,iBAAiB5hC,OAAQ,UAAU,cAC7BuzH,OAAOvzH,OAAOq/F,WAAYr/F,OAAOs/F,gBAE1C1T,GAAGhqD,iBAAiB5hC,OAAQ,qBAAqB,cACxCuzH,OAAOvzH,OAAOq/F,WAAYr/F,OAAOs/F,gBAK1C,IAAMk5E,GAAsB5sF,GAAGvgF,GAAG,CAC9Bg4B,OAAQ9qC,SAASutE,KACjBgnB,IAAK,CACDz7C,SAAU,QACV39C,KAAM,IACNy+E,IAAK,IACLx+E,MAAO,IACP4oG,OAAQ,IACR8G,cAAe,OACftG,OAAQ,KACR2H,WAAY,UAGH,IAAI+zE,gBAAe,WAAM,OAAMpxF,GAADksC,OAAOvzH,OAAOq/F,WAAYr/F,OAAOs/F,gBACvE57D,QAAQ80I,IAGjB5sF,GAAGhqD,iBAAiB74C,KAAKggH,QAAS,SAAS,SAAC7nE,GACxCA,EAAMozC,oBAGV,IAAMokG,GAAU,SAAC9sL,GACbA,EAAE0oF,kBAENt0E,OAAO4hC,iBAAiB,eAAgB82I,IACxC14K,OAAO4hC,iBAAiB,gBAAiB82I,IACzC14K,OAAO4hC,iBAAiB,aAAc82I,IC18D9CR,GAAiBhgL,EAAA,SAAAC,aAA6C,SAAWD,EAAA,SAAA7P,QAA6C,SJ0B9GiqI,GAAgBC,WAGZgY,GAER2lC,GAAa19C,GAAUC,qBAAsBm1C,IAC7CsI,GAAa19C,GAAUQ,WAAYm1C,IACnC+H,GAAa19C,GAAUU,SAAUw2C,IACjCwG,GAAa19C,GAAUzM,KAAMklD,IAC7BiF,GAAa19C,GAAUW,gBAAiB44C,IACxCmE,GAAa19C,GAAUY,OAAQ+4C,IAC/B+D,GAAa19C,GAAUc,cAAe84C,IACtC8D,GAAa19C,GAAUe,OAAQ65C,IAC/B8C,GAAa19C,GAAU5hC,OAAQg9E,IAC/BsC,GAAa19C,GAAUgB,YAAa26C,IACpC+B,GAAa19C,GAAUx+B,UAAWw6E,IAClC0B,GAAa19C,GAAUmB,OAAQg8C,IAC/BO,GAAa19C,GAAUoB,cAAei8C,IACtCK,GAAa19C,GAAUiB,QAASs8C,IAEhCz9C,GAAgBC,UAAW,wBKjC9B,SAAQomD,QASIC,EARLC,EAEAC,EAkCWC,EAAAC,2EAAAD,EAAW,kBAAXC,EAAWvuL,MAAA1B,KAAAyB,YAAXwuL,EAAW,kBAAXA,EAAWt+E,EAAAvyG,QAAAoyG,EAAA/6F,GAAArB,MAA1B,SAAQw8F,QAEAowC,EACAv4B,EAEMy5B,EAKFhzI,2EATR2yF,GAAGlZ,oBAAoB1yE,OAAQ,mBAAoB+4K,GAC/ChuC,EAAe,IAAIlN,GAAGge,aACtBrpC,EAAsB,uBAEGu4B,EAAamB,eAAhCD,EAAUhxC,EAAAj/F,QAEZw2G,EAAUy5B,EAAWz5B,2DAIP,aAAhBvX,EAAAC,GAAIjiG,QACFA,EAAU,mCACW,iBAAhBgiG,EAAAC,GAAIjiG,UACTA,EAAU,0CAEVA,GACA8oC,YAAW,WAEP,MADA82I,GAASA,EAAMpoC,IAAIx3I,GACb,IAAIjT,MAAM,kCAAiCi1G,EAAAC,MAClD,aAGX09E,EAAgBpmE,EAASu4B,8DAvBHtgJ,MAAA1B,KAAAyB,YA5BjBouL,EAAT,SAAyBpmE,EAAqBu4B,GAC1C,GAAI8tC,EACA,KAAM,6CAEV,IAAII,EAAkB1gL,SAASwlJ,eAAe,kBAC9C,IAEIk7B,EAAgB1sF,WAAWzqD,YAAYm3I,GACzC,MAAMrtL,IAER,IAAMo/I,EAAe,IAAInN,GAAG6qB,aAAazuD,IAAW,GAAM,GAC1D4+E,EAAQ,IAAIpI,GACRj+D,EACA,CACIw4B,aAAAA,EACAD,aAAAA,IAGRC,EAAa94G,OACTsgF,GACAzwE,YAAW,WACP82I,EAAMpoC,IAAI70C,GAAK,4BAChB,KAGPrjG,SAASutE,KAAK1sE,YAAYy/K,EAAM9vE,UA/BhC+vE,GAAc,EAClBltF,GAAGhqD,iBAAiB5hC,OAAQ,oBAAoB,WAC5C84K,GAAc,cnL2FQn9E,GAAgBu9E,YAAY59E,WmLlClDw9E,EACAC,IAEAntF,GAAGhqD,iBAAiB5hC,OAAQ,mBAAoB+4K","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@swc/helpers/src/_apply_decorated_descriptor.js","node_modules/@swc/helpers/src/_array_with_holes.js","node_modules/@swc/helpers/src/_array_without_holes.js","node_modules/@swc/helpers/src/_assert_this_initialized.js","node_modules/@swc/helpers/src/_async_generator.js","node_modules/@swc/helpers/src/_await_value.js","node_modules/@swc/helpers/src/_async_generator_delegate.js","node_modules/@swc/helpers/src/_async_iterator.js","node_modules/@swc/helpers/src/_async_to_generator.js","node_modules/@swc/helpers/src/_await_async_generator.js","node_modules/@swc/helpers/src/_class_call_check.js","node_modules/@swc/helpers/src/_class_name_tdz_error.js","node_modules/@swc/helpers/src/_class_private_field_get.js","node_modules/@swc/helpers/src/_class_private_field_loose_base.js","node_modules/@swc/helpers/src/_class_private_field_set.js","node_modules/@swc/helpers/src/_class_private_method_get.js","node_modules/@swc/helpers/src/_class_private_method_set.js","node_modules/@swc/helpers/src/_class_static_private_field_spec_get.js","node_modules/@swc/helpers/src/_class_static_private_field_spec_set.js","node_modules/@swc/helpers/src/_construct.js","node_modules/@swc/helpers/src/_create_class.js","node_modules/@swc/helpers/src/_decorate.js","node_modules/@swc/helpers/src/_to_array.js","node_modules/@swc/helpers/src/_iterable_to_array.js","node_modules/@swc/helpers/src/_non_iterable_rest.js","node_modules/@swc/helpers/src/_to_property_key.js","node_modules/@swc/helpers/src/_type_of.js","node_modules/@swc/helpers/src/_to_primitive.js","node_modules/@swc/helpers/src/_defaults.js","node_modules/@swc/helpers/src/_define_enumerable_properties.js","node_modules/@swc/helpers/src/_define_property.js","node_modules/@swc/helpers/src/_extends.js","node_modules/@swc/helpers/src/_get.js","node_modules/@swc/helpers/src/_super_prop_base.js","node_modules/@swc/helpers/src/_get_prototype_of.js","node_modules/@swc/helpers/src/_inherits.js","node_modules/@swc/helpers/src/_set_prototype_of.js","node_modules/@swc/helpers/src/_inherits_loose.js","node_modules/@swc/helpers/src/_initializer_define_property.js","node_modules/@swc/helpers/src/_initializer_warning_helper.js","node_modules/@swc/helpers/src/_instanceof.js","node_modules/@swc/helpers/src/_interop_require_default.js","node_modules/@swc/helpers/src/_interop_require_wildcard.js","node_modules/@swc/helpers/src/_is_native_function.js","node_modules/@swc/helpers/src/_iterable_to_array_limit.js","node_modules/@swc/helpers/src/_iterable_to_array_limit_loose.js","node_modules/@swc/helpers/src/_jsx.js","node_modules/@swc/helpers/src/_new_arrow_check.js","node_modules/@swc/helpers/src/_non_iterable_spread.js","node_modules/@swc/helpers/src/_object_spread.js","node_modules/@swc/helpers/src/_object_without_properties.js","node_modules/@swc/helpers/src/_object_without_properties_loose.js","node_modules/@swc/helpers/src/_possible_constructor_return.js","node_modules/@swc/helpers/src/_read_only_error.js","node_modules/@swc/helpers/src/_set.js","node_modules/@swc/helpers/src/_skip_first_generator_next.js","node_modules/@swc/helpers/src/_sliced_to_array.js","node_modules/@swc/helpers/src/_sliced_to_array_loose.js","node_modules/@swc/helpers/src/_tagged_template_literal.js","node_modules/@swc/helpers/src/_tagged_template_literal_loose.js","node_modules/@swc/helpers/src/_throw.js","node_modules/@swc/helpers/src/_to_consumable_array.js","node_modules/@swc/helpers/src/_wrap_async_generator.js","node_modules/@swc/helpers/src/_wrap_native_super.js","node_modules/@swc/helpers/src/_create_super.js","node_modules/@swc/helpers/src/_is_native_reflect_construct.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-aee906963841d655.js","node_modules/@parcel/runtime-js/lib/helpers/browser/js-loader.js","node_modules/@parcel/runtime-js/lib/helpers/cacheLoader.js","node_modules/@parcel/runtime-js/lib/runtime-5285abb43fbaa551.js","node_modules/@parcel/runtime-js/lib/runtime-d3a03a7b107c2f0b.js","node_modules/@parcel/runtime-js/lib/runtime-6e7034b19cf2f01a.js","node_modules/@parcel/runtime-js/lib/runtime-e882b0fca79bf394.js","node_modules/@parcel/runtime-js/lib/runtime-0322ffe67a2c5bd7.js","node_modules/regenerator-runtime/runtime.js","node_modules/core-js/internals/object-get-own-property-descriptor.js","node_modules/core-js/internals/global.js","node_modules/core-js/internals/descriptors.js","node_modules/core-js/internals/fails.js","node_modules/core-js/internals/function-bind-native.js","node_modules/core-js/internals/function-call.js","node_modules/core-js/internals/object-property-is-enumerable.js","node_modules/core-js/internals/create-property-descriptor.js","node_modules/core-js/internals/function-uncurry-this.js","node_modules/core-js/internals/classof-raw.js","node_modules/core-js/internals/indexed-object.js","node_modules/core-js/internals/require-object-coercible.js","node_modules/core-js/internals/to-indexed-object.js","node_modules/core-js/internals/is-callable.js","node_modules/core-js/internals/is-object.js","node_modules/core-js/internals/get-built-in.js","node_modules/core-js/internals/object-is-prototype-of.js","node_modules/core-js/internals/engine-user-agent.js","node_modules/core-js/internals/engine-v8-version.js","node_modules/core-js/internals/native-symbol.js","node_modules/core-js/internals/use-symbol-as-uid.js","node_modules/core-js/internals/is-symbol.js","node_modules/core-js/internals/try-to-string.js","node_modules/core-js/internals/a-callable.js","node_modules/core-js/internals/get-method.js","node_modules/core-js/internals/ordinary-to-primitive.js","node_modules/core-js/internals/is-pure.js","node_modules/core-js/internals/set-global.js","node_modules/core-js/internals/shared-store.js","node_modules/core-js/internals/shared.js","node_modules/core-js/internals/to-object.js","node_modules/core-js/internals/has-own-property.js","node_modules/core-js/internals/uid.js","node_modules/core-js/internals/well-known-symbol.js","node_modules/core-js/internals/to-primitive.js","node_modules/core-js/internals/to-property-key.js","node_modules/core-js/internals/document-create-element.js","node_modules/core-js/internals/ie8-dom-define.js","node_modules/core-js/internals/object-define-property.js","node_modules/core-js/internals/v8-prototype-define-bug.js","node_modules/core-js/internals/an-object.js","node_modules/core-js/internals/create-non-enumerable-property.js","node_modules/core-js/internals/inspect-source.js","node_modules/core-js/internals/native-weak-map.js","node_modules/core-js/internals/shared-key.js","node_modules/core-js/internals/hidden-keys.js","node_modules/core-js/internals/internal-state.js","node_modules/core-js/internals/function-name.js","node_modules/core-js/internals/redefine.js","node_modules/core-js/internals/object-get-own-property-names.js","node_modules/core-js/internals/to-integer-or-infinity.js","node_modules/core-js/internals/to-absolute-index.js","node_modules/core-js/internals/to-length.js","node_modules/core-js/internals/length-of-array-like.js","node_modules/core-js/internals/array-includes.js","node_modules/core-js/internals/object-keys-internal.js","node_modules/core-js/internals/object-get-own-property-symbols.js","node_modules/core-js/internals/enum-bug-keys.js","node_modules/core-js/internals/own-keys.js","node_modules/core-js/internals/copy-constructor-properties.js","node_modules/core-js/internals/is-forced.js","node_modules/core-js/internals/export.js","node_modules/core-js/internals/function-apply.js","node_modules/core-js/internals/is-array.js","node_modules/core-js/internals/to-string-tag-support.js","node_modules/core-js/internals/classof.js","node_modules/core-js/internals/to-string.js","node_modules/core-js/internals/object-define-properties.js","node_modules/core-js/internals/object-keys.js","node_modules/core-js/internals/html.js","node_modules/core-js/internals/object-create.js","node_modules/core-js/internals/object-get-own-property-names-external.js","node_modules/core-js/internals/create-property.js","node_modules/core-js/internals/array-slice-simple.js","node_modules/core-js/internals/well-known-symbol-wrapped.js","node_modules/core-js/internals/array-slice.js","node_modules/core-js/internals/path.js","node_modules/core-js/internals/define-well-known-symbol.js","node_modules/core-js/internals/set-to-string-tag.js","node_modules/core-js/internals/function-bind-context.js","node_modules/core-js/internals/is-constructor.js","node_modules/core-js/internals/array-species-constructor.js","node_modules/core-js/internals/array-species-create.js","node_modules/core-js/internals/array-iteration.js","node_modules/core-js/modules/es.symbol.js","node_modules/core-js/modules/es.symbol.description.js","node_modules/core-js/modules/es.symbol.async-iterator.js","node_modules/core-js/modules/es.symbol.has-instance.js","node_modules/core-js/modules/es.symbol.is-concat-spreadable.js","node_modules/core-js/modules/es.symbol.iterator.js","node_modules/core-js/modules/es.symbol.match.js","node_modules/core-js/modules/es.symbol.replace.js","node_modules/core-js/modules/es.symbol.search.js","node_modules/core-js/modules/es.symbol.species.js","node_modules/core-js/modules/es.symbol.split.js","node_modules/core-js/modules/es.symbol.to-primitive.js","node_modules/core-js/modules/es.symbol.to-string-tag.js","node_modules/core-js/modules/es.symbol.unscopables.js","node_modules/core-js/internals/array-method-has-species-support.js","node_modules/core-js/modules/es.array.concat.js","node_modules/core-js/internals/array-copy-within.js","node_modules/core-js/internals/add-to-unscopables.js","node_modules/core-js/modules/es.array.copy-within.js","node_modules/core-js/internals/array-fill.js","node_modules/core-js/modules/es.array.fill.js","node_modules/core-js/modules/es.array.filter.js","node_modules/core-js/modules/es.array.find.js","node_modules/core-js/modules/es.array.find-index.js","node_modules/core-js/internals/flatten-into-array.js","node_modules/core-js/modules/es.array.flat.js","node_modules/core-js/modules/es.array.flat-map.js","node_modules/core-js/internals/iterator-close.js","node_modules/core-js/internals/call-with-safe-iteration-closing.js","node_modules/core-js/internals/iterators.js","node_modules/core-js/internals/is-array-iterator-method.js","node_modules/core-js/internals/get-iterator-method.js","node_modules/core-js/internals/get-iterator.js","node_modules/core-js/internals/array-from.js","node_modules/core-js/internals/check-correctness-of-iteration.js","node_modules/core-js/modules/es.array.from.js","node_modules/core-js/modules/es.array.includes.js","node_modules/core-js/modules/es.array.index-of.js","node_modules/core-js/internals/array-method-is-strict.js","node_modules/core-js/modules/es.array.iterator.js","node_modules/core-js/internals/correct-prototype-getter.js","node_modules/core-js/internals/object-get-prototype-of.js","node_modules/core-js/internals/iterators-core.js","node_modules/core-js/internals/create-iterator-constructor.js","node_modules/core-js/internals/a-possible-prototype.js","node_modules/core-js/internals/object-set-prototype-of.js","node_modules/core-js/internals/define-iterator.js","node_modules/core-js/modules/es.array.join.js","node_modules/core-js/internals/array-last-index-of.js","node_modules/core-js/modules/es.array.last-index-of.js","node_modules/core-js/modules/es.array.map.js","node_modules/core-js/modules/es.array.of.js","node_modules/core-js/internals/array-reduce.js","node_modules/core-js/modules/es.array.reduce.js","node_modules/core-js/internals/engine-is-node.js","node_modules/core-js/modules/es.array.reduce-right.js","node_modules/core-js/modules/es.array.reverse.js","node_modules/core-js/modules/es.array.slice.js","node_modules/core-js/internals/array-sort.js","node_modules/core-js/internals/engine-ff-version.js","node_modules/core-js/internals/engine-is-ie-or-edge.js","node_modules/core-js/internals/engine-webkit-version.js","node_modules/core-js/modules/es.array.sort.js","node_modules/core-js/internals/set-species.js","node_modules/core-js/modules/es.array.species.js","node_modules/core-js/modules/es.array.splice.js","node_modules/core-js/modules/es.array.unscopables.flat.js","node_modules/core-js/modules/es.array.unscopables.flat-map.js","node_modules/core-js/internals/array-buffer-native.js","node_modules/core-js/internals/redefine-all.js","node_modules/core-js/internals/an-instance.js","node_modules/core-js/internals/to-index.js","node_modules/core-js/internals/ieee754.js","node_modules/core-js/internals/array-buffer.js","node_modules/core-js/modules/es.array-buffer.constructor.js","node_modules/core-js/internals/a-constructor.js","node_modules/core-js/internals/species-constructor.js","node_modules/core-js/modules/es.array-buffer.slice.js","node_modules/core-js/modules/es.date.to-json.js","node_modules/core-js/internals/date-to-primitive.js","node_modules/core-js/modules/es.date.to-primitive.js","node_modules/core-js/modules/es.function.has-instance.js","node_modules/core-js/modules/es.function.name.js","node_modules/core-js/modules/es.json.to-string-tag.js","node_modules/core-js/internals/internal-metadata.js","node_modules/core-js/internals/array-buffer-non-extensible.js","node_modules/core-js/internals/object-is-extensible.js","node_modules/core-js/internals/freezing.js","node_modules/core-js/internals/iterate.js","node_modules/core-js/internals/inherit-if-required.js","node_modules/core-js/internals/collection.js","node_modules/core-js/internals/collection-strong.js","node_modules/core-js/modules/es.map.js","node_modules/core-js/internals/math-log1p.js","node_modules/core-js/modules/es.math.acosh.js","node_modules/core-js/modules/es.math.asinh.js","node_modules/core-js/modules/es.math.atanh.js","node_modules/core-js/internals/math-sign.js","node_modules/core-js/modules/es.math.cbrt.js","node_modules/core-js/modules/es.math.clz32.js","node_modules/core-js/internals/math-expm1.js","node_modules/core-js/modules/es.math.cosh.js","node_modules/core-js/modules/es.math.expm1.js","node_modules/core-js/internals/math-fround.js","node_modules/core-js/modules/es.math.fround.js","node_modules/core-js/modules/es.math.hypot.js","node_modules/core-js/modules/es.math.imul.js","node_modules/core-js/internals/math-log10.js","node_modules/core-js/modules/es.math.log10.js","node_modules/core-js/modules/es.math.log1p.js","node_modules/core-js/modules/es.math.log2.js","node_modules/core-js/modules/es.math.sign.js","node_modules/core-js/modules/es.math.sinh.js","node_modules/core-js/modules/es.math.tanh.js","node_modules/core-js/modules/es.math.to-string-tag.js","node_modules/core-js/modules/es.math.trunc.js","node_modules/core-js/modules/es.number.constructor.js","node_modules/core-js/internals/this-number-value.js","node_modules/core-js/internals/whitespaces.js","node_modules/core-js/internals/string-trim.js","node_modules/core-js/modules/es.number.epsilon.js","node_modules/core-js/internals/number-is-finite.js","node_modules/core-js/modules/es.number.is-finite.js","node_modules/core-js/internals/is-integral-number.js","node_modules/core-js/modules/es.number.is-integer.js","node_modules/core-js/modules/es.number.is-nan.js","node_modules/core-js/modules/es.number.is-safe-integer.js","node_modules/core-js/modules/es.number.max-safe-integer.js","node_modules/core-js/modules/es.number.min-safe-integer.js","node_modules/core-js/internals/number-parse-float.js","node_modules/core-js/modules/es.number.parse-float.js","node_modules/core-js/internals/number-parse-int.js","node_modules/core-js/modules/es.number.parse-int.js","node_modules/core-js/internals/string-repeat.js","node_modules/core-js/modules/es.number.to-fixed.js","node_modules/core-js/internals/object-assign.js","node_modules/core-js/modules/es.object.assign.js","node_modules/core-js/internals/object-prototype-accessors-forced.js","node_modules/core-js/modules/es.object.define-getter.js","node_modules/core-js/modules/es.object.define-setter.js","node_modules/core-js/internals/object-to-array.js","node_modules/core-js/modules/es.object.entries.js","node_modules/core-js/modules/es.object.freeze.js","node_modules/core-js/modules/es.object.from-entries.js","node_modules/core-js/modules/es.object.get-own-property-descriptor.js","node_modules/core-js/modules/es.object.get-own-property-descriptors.js","node_modules/core-js/modules/es.object.get-own-property-names.js","node_modules/core-js/modules/es.object.get-prototype-of.js","node_modules/core-js/internals/same-value.js","node_modules/core-js/modules/es.object.is.js","node_modules/core-js/modules/es.object.is-extensible.js","node_modules/core-js/modules/es.object.is-frozen.js","node_modules/core-js/modules/es.object.is-sealed.js","node_modules/core-js/modules/es.object.keys.js","node_modules/core-js/modules/es.object.lookup-getter.js","node_modules/core-js/modules/es.object.lookup-setter.js","node_modules/core-js/modules/es.object.prevent-extensions.js","node_modules/core-js/modules/es.object.seal.js","node_modules/core-js/modules/es.object.set-prototype-of.js","node_modules/core-js/internals/object-to-string.js","node_modules/core-js/modules/es.object.to-string.js","node_modules/core-js/modules/es.object.values.js","node_modules/core-js/modules/es.parse-float.js","node_modules/core-js/modules/es.parse-int.js","node_modules/core-js/internals/native-promise-constructor.js","node_modules/core-js/internals/engine-is-ios.js","node_modules/core-js/internals/task.js","node_modules/core-js/modules/es.promise.js","node_modules/core-js/internals/microtask.js","node_modules/core-js/internals/engine-is-ios-pebble.js","node_modules/core-js/internals/engine-is-webos-webkit.js","node_modules/core-js/internals/new-promise-capability.js","node_modules/core-js/internals/promise-resolve.js","node_modules/core-js/internals/host-report-errors.js","node_modules/core-js/internals/perform.js","node_modules/core-js/internals/queue.js","node_modules/core-js/internals/engine-is-browser.js","node_modules/core-js/modules/es.promise.finally.js","node_modules/core-js/modules/es.reflect.apply.js","node_modules/core-js/internals/function-bind.js","node_modules/core-js/modules/es.reflect.construct.js","node_modules/core-js/modules/es.reflect.define-property.js","node_modules/core-js/modules/es.reflect.delete-property.js","node_modules/core-js/internals/is-data-descriptor.js","node_modules/core-js/modules/es.reflect.get.js","node_modules/core-js/modules/es.reflect.get-own-property-descriptor.js","node_modules/core-js/modules/es.reflect.get-prototype-of.js","node_modules/core-js/modules/es.reflect.has.js","node_modules/core-js/modules/es.reflect.is-extensible.js","node_modules/core-js/modules/es.reflect.own-keys.js","node_modules/core-js/modules/es.reflect.prevent-extensions.js","node_modules/core-js/modules/es.reflect.set.js","node_modules/core-js/modules/es.reflect.set-prototype-of.js","node_modules/core-js/modules/es.regexp.constructor.js","node_modules/core-js/internals/is-regexp.js","node_modules/core-js/internals/regexp-flags.js","node_modules/core-js/internals/regexp-sticky-helpers.js","node_modules/core-js/internals/regexp-unsupported-dot-all.js","node_modules/core-js/internals/regexp-unsupported-ncg.js","node_modules/core-js/internals/regexp-exec.js","node_modules/core-js/modules/es.regexp.exec.js","node_modules/core-js/modules/es.regexp.flags.js","node_modules/core-js/modules/es.regexp.to-string.js","node_modules/core-js/modules/es.set.js","node_modules/core-js/internals/string-multibyte.js","node_modules/core-js/modules/es.string.code-point-at.js","node_modules/core-js/modules/es.string.ends-with.js","node_modules/core-js/internals/not-a-regexp.js","node_modules/core-js/internals/correct-is-regexp-logic.js","node_modules/core-js/modules/es.string.from-code-point.js","node_modules/core-js/modules/es.string.includes.js","node_modules/core-js/modules/es.string.iterator.js","node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js","node_modules/core-js/internals/advance-string-index.js","node_modules/core-js/internals/regexp-exec-abstract.js","node_modules/core-js/modules/es.string.match.js","node_modules/core-js/internals/string-pad.js","node_modules/core-js/modules/es.string.pad-end.js","node_modules/core-js/internals/string-pad-webkit-bug.js","node_modules/core-js/modules/es.string.pad-start.js","node_modules/core-js/modules/es.string.raw.js","node_modules/core-js/modules/es.string.repeat.js","node_modules/core-js/internals/get-substitution.js","node_modules/core-js/modules/es.string.replace.js","node_modules/core-js/modules/es.string.search.js","node_modules/core-js/modules/es.string.split.js","node_modules/core-js/modules/es.string.starts-with.js","node_modules/core-js/modules/es.string.trim.js","node_modules/core-js/internals/string-trim-forced.js","node_modules/core-js/modules/es.string.trim-end.js","node_modules/core-js/modules/es.string.trim-start.js","node_modules/core-js/internals/create-html.js","node_modules/core-js/internals/string-html-forced.js","node_modules/core-js/modules/es.string.anchor.js","node_modules/core-js/modules/es.string.big.js","node_modules/core-js/modules/es.string.blink.js","node_modules/core-js/modules/es.string.bold.js","node_modules/core-js/modules/es.string.fixed.js","node_modules/core-js/modules/es.string.fontcolor.js","node_modules/core-js/modules/es.string.fontsize.js","node_modules/core-js/modules/es.string.italics.js","node_modules/core-js/modules/es.string.link.js","node_modules/core-js/modules/es.string.small.js","node_modules/core-js/modules/es.string.strike.js","node_modules/core-js/modules/es.string.sub.js","node_modules/core-js/modules/es.string.sup.js","node_modules/core-js/internals/array-buffer-view-core.js","node_modules/core-js/internals/typed-array-constructors-require-wrappers.js","node_modules/core-js/internals/to-positive-integer.js","node_modules/core-js/internals/to-offset.js","node_modules/core-js/internals/typed-array-constructor.js","node_modules/core-js/internals/typed-array-from.js","node_modules/core-js/modules/es.typed-array.float32-array.js","node_modules/core-js/modules/es.typed-array.float64-array.js","node_modules/core-js/modules/es.typed-array.int8-array.js","node_modules/core-js/modules/es.typed-array.int16-array.js","node_modules/core-js/modules/es.typed-array.int32-array.js","node_modules/core-js/modules/es.typed-array.uint8-array.js","node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js","node_modules/core-js/modules/es.typed-array.uint16-array.js","node_modules/core-js/modules/es.typed-array.uint32-array.js","node_modules/core-js/modules/es.typed-array.copy-within.js","node_modules/core-js/modules/es.typed-array.every.js","node_modules/core-js/modules/es.typed-array.fill.js","node_modules/core-js/modules/es.typed-array.filter.js","node_modules/core-js/internals/array-from-constructor-and-list.js","node_modules/core-js/internals/typed-array-species-constructor.js","node_modules/core-js/internals/typed-array-from-species-and-list.js","node_modules/core-js/modules/es.typed-array.find.js","node_modules/core-js/modules/es.typed-array.find-index.js","node_modules/core-js/modules/es.typed-array.for-each.js","node_modules/core-js/modules/es.typed-array.from.js","node_modules/core-js/modules/es.typed-array.includes.js","node_modules/core-js/modules/es.typed-array.index-of.js","node_modules/core-js/modules/es.typed-array.iterator.js","node_modules/core-js/modules/es.typed-array.join.js","node_modules/core-js/modules/es.typed-array.last-index-of.js","node_modules/core-js/modules/es.typed-array.map.js","node_modules/core-js/modules/es.typed-array.of.js","node_modules/core-js/modules/es.typed-array.reduce.js","node_modules/core-js/modules/es.typed-array.reduce-right.js","node_modules/core-js/modules/es.typed-array.reverse.js","node_modules/core-js/modules/es.typed-array.set.js","node_modules/core-js/modules/es.typed-array.slice.js","node_modules/core-js/modules/es.typed-array.some.js","node_modules/core-js/modules/es.typed-array.sort.js","node_modules/core-js/modules/es.typed-array.subarray.js","node_modules/core-js/modules/es.typed-array.to-locale-string.js","node_modules/core-js/modules/es.typed-array.to-string.js","node_modules/core-js/internals/collection-weak.js","node_modules/core-js/modules/es.weak-map.js","node_modules/core-js/modules/es.weak-set.js","node_modules/core-js/internals/clear-error-stack.js","node_modules/core-js/internals/install-error-cause.js","node_modules/core-js/internals/normalize-string-argument.js","node_modules/core-js/internals/error-stack-installable.js","node_modules/core-js/modules/es.aggregate-error.js","node_modules/core-js/modules/esnext.array.last-index.js","node_modules/core-js/modules/esnext.array.last-item.js","node_modules/core-js/internals/composite-key.js","node_modules/core-js/modules/esnext.composite-key.js","node_modules/core-js/modules/esnext.composite-symbol.js","node_modules/core-js/modules/es.global-this.js","node_modules/core-js/internals/collection-delete-all.js","node_modules/core-js/modules/esnext.map.delete-all.js","node_modules/core-js/internals/get-map-iterator.js","node_modules/core-js/modules/esnext.map.every.js","node_modules/core-js/modules/esnext.map.filter.js","node_modules/core-js/modules/esnext.map.find.js","node_modules/core-js/modules/esnext.map.find-key.js","node_modules/core-js/internals/collection-from.js","node_modules/core-js/modules/esnext.map.from.js","node_modules/core-js/modules/esnext.map.group-by.js","node_modules/core-js/internals/same-value-zero.js","node_modules/core-js/modules/esnext.map.includes.js","node_modules/core-js/modules/esnext.map.key-by.js","node_modules/core-js/modules/esnext.map.key-of.js","node_modules/core-js/modules/esnext.map.map-keys.js","node_modules/core-js/modules/esnext.map.map-values.js","node_modules/core-js/modules/esnext.map.merge.js","node_modules/core-js/internals/collection-of.js","node_modules/core-js/modules/esnext.map.of.js","node_modules/core-js/modules/esnext.map.reduce.js","node_modules/core-js/modules/esnext.map.some.js","node_modules/core-js/modules/esnext.map.update.js","node_modules/core-js/modules/esnext.math.clamp.js","node_modules/core-js/modules/esnext.math.deg-per-rad.js","node_modules/core-js/modules/esnext.math.degrees.js","node_modules/core-js/internals/math-scale.js","node_modules/core-js/modules/esnext.math.fscale.js","node_modules/core-js/modules/esnext.math.iaddh.js","node_modules/core-js/modules/esnext.math.imulh.js","node_modules/core-js/modules/esnext.math.isubh.js","node_modules/core-js/modules/esnext.math.rad-per-deg.js","node_modules/core-js/modules/esnext.math.radians.js","node_modules/core-js/modules/esnext.math.scale.js","node_modules/core-js/modules/esnext.math.seeded-prng.js","node_modules/core-js/modules/esnext.math.signbit.js","node_modules/core-js/modules/esnext.math.umulh.js","node_modules/core-js/modules/esnext.number.from-string.js","node_modules/core-js/modules/esnext.observable.js","node_modules/core-js/modules/es.promise.all-settled.js","node_modules/core-js/modules/es.promise.any.js","node_modules/core-js/modules/esnext.promise.try.js","node_modules/core-js/internals/reflect-metadata.js","node_modules/core-js/modules/esnext.reflect.define-metadata.js","node_modules/core-js/modules/esnext.reflect.delete-metadata.js","node_modules/core-js/modules/esnext.reflect.get-metadata.js","node_modules/core-js/internals/array-unique-by.js","node_modules/core-js/modules/esnext.reflect.get-metadata-keys.js","node_modules/core-js/modules/esnext.reflect.get-own-metadata.js","node_modules/core-js/modules/esnext.reflect.get-own-metadata-keys.js","node_modules/core-js/modules/esnext.reflect.has-metadata.js","node_modules/core-js/modules/esnext.reflect.has-own-metadata.js","node_modules/core-js/modules/esnext.reflect.metadata.js","node_modules/core-js/internals/collection-add-all.js","node_modules/core-js/modules/esnext.set.add-all.js","node_modules/core-js/modules/esnext.set.delete-all.js","node_modules/core-js/modules/esnext.set.difference.js","node_modules/core-js/internals/get-set-iterator.js","node_modules/core-js/modules/esnext.set.every.js","node_modules/core-js/modules/esnext.set.filter.js","node_modules/core-js/modules/esnext.set.find.js","node_modules/core-js/modules/esnext.set.from.js","node_modules/core-js/modules/esnext.set.intersection.js","node_modules/core-js/modules/esnext.set.is-disjoint-from.js","node_modules/core-js/modules/esnext.set.is-subset-of.js","node_modules/core-js/modules/esnext.set.is-superset-of.js","node_modules/core-js/modules/esnext.set.join.js","node_modules/core-js/modules/esnext.set.map.js","node_modules/core-js/modules/esnext.set.of.js","node_modules/core-js/modules/esnext.set.reduce.js","node_modules/core-js/modules/esnext.set.some.js","node_modules/core-js/modules/esnext.set.symmetric-difference.js","node_modules/core-js/modules/esnext.set.union.js","node_modules/core-js/modules/esnext.string.at.js","node_modules/core-js/modules/esnext.string.code-points.js","node_modules/core-js/modules/es.string.match-all.js","node_modules/core-js/modules/es.string.replace-all.js","node_modules/core-js/modules/esnext.symbol.dispose.js","node_modules/core-js/modules/esnext.symbol.observable.js","node_modules/core-js/modules/esnext.symbol.pattern-match.js","node_modules/core-js/modules/esnext.weak-map.delete-all.js","node_modules/core-js/modules/esnext.weak-map.from.js","node_modules/core-js/modules/esnext.weak-map.of.js","node_modules/core-js/modules/esnext.weak-set.add-all.js","node_modules/core-js/modules/esnext.weak-set.delete-all.js","node_modules/core-js/modules/esnext.weak-set.from.js","node_modules/core-js/modules/esnext.weak-set.of.js","node_modules/core-js/internals/dom-iterables.js","node_modules/core-js/internals/dom-token-list-prototype.js","node_modules/core-js/internals/array-for-each.js","node_modules/core-js/modules/web.dom-collections.for-each.js","node_modules/core-js/modules/web.dom-collections.iterator.js","node_modules/core-js/modules/web.immediate.js","node_modules/core-js/modules/web.queue-microtask.js","node_modules/core-js/internals/native-url.js","node_modules/core-js/modules/web.url.js","node_modules/core-js/internals/string-punycode-to-ascii.js","node_modules/core-js/internals/validate-arguments-length.js","node_modules/core-js/modules/web.url-search-params.js","node_modules/mdn-polyfills/Node.prototype.append.js","src/app/script/polyfills.ts","node_modules/core-js/modules/web.url.to-json.js","src/app/script/bb/base/create-canvas.ts","src/app/script/bb/base/browser.ts","src/app/script/bb/input/event-listener.ts","src/app/script/bb/base/base.ts","src/app/script/bb/input/key-listener.ts","src/app/script/bb/math/math.ts","src/app/script/bb/input/pointer-listener.ts","src/app/script/bb/input/event-chain.ts","src/app/script/bb/base/canvas.ts","src/app/script/bb/math/matrix.ts","src/app/script/bb/math/vec2.ts","src/app/script/bb/math/line.ts","src/app/script/bb/color/color.ts","src/app/script/bb/base/ui.ts","src/app/script/bb/base/bb-log.ts","src/app/script/bb/base/local-storage.ts","src/app/script/bb/bb.ts","src/app/script/klecks/history/kl-history.ts","src/app/script/klecks/ui/modals/modal-count.ts","node_modules/@parcel/runtime-js/lib/runtime-e01418e00fcffc80.js","node_modules/@parcel/runtime-js/lib/runtime-97b721c08df94a0b.js","src/app/languages/languages.ts","src/app/languages/en.json","src/app/script/language/language.ts","src/app/script/klecks/ui/modals/popup.ts","src/app/script/klecks/ui/base-components/checkbox.ts","src/app/script/klecks/ui/base-components/input.ts","src/app/script/klecks/ui/base-components/select.ts","src/app/script/klecks/ui/base-components/image-toggle.ts","src/app/script/klecks/ui/base-components/image-radio-list.ts","node_modules/@parcel/runtime-js/lib/runtime-4a62e24b7304760f.js","src/app/script/klecks/ui/base-components/pen-pressure-toggle.ts","src/app/script/klecks/ui/base-components/slider-falloff.ts","src/app/script/klecks/ui/base-components/kl-slider.ts","node_modules/@parcel/runtime-js/lib/runtime-abbcc475b73e87e3.js","src/app/script/klecks/ui/modals/color-slider-hex-dialog.ts","node_modules/@parcel/runtime-js/lib/runtime-66a5902bb255c112.js","src/app/script/klecks/ui/base-components/kl-color-slider.ts","src/app/script/klecks/ui/base-components/kl-color-slider-small.ts","src/app/script/klecks/ui/base-components/point-slider.ts","src/app/script/klecks/ui/base-components/color-options.ts","src/app/script/klecks/ui/base-components/options.ts","node_modules/@parcel/runtime-js/lib/runtime-3b99789c92750431.js","src/app/script/klecks/ui/components/status-overlay.ts","src/app/script/klecks/ui/components/crop-copy.ts","node_modules/@parcel/runtime-js/lib/runtime-402b90e8743b8604.js","node_modules/@parcel/runtime-js/lib/runtime-a7afb975fb3652da.js","node_modules/@parcel/runtime-js/lib/runtime-d81f85ae284bf346.js","node_modules/@parcel/runtime-js/lib/runtime-b3baa23c2648f89a.js","node_modules/@parcel/runtime-js/lib/runtime-abd25029d5d0e40f.js","src/app/script/klecks/image-operations/flood-fill.ts","src/app/script/klecks/image-operations/shape-tool.ts","src/app/script/klecks/image-operations/render-text.ts","src/app/script/klecks/canvas/draw-project.ts","src/app/script/klecks/canvas/kl-canvas.ts","src/app/script/klecks/canvas/translate-blending.ts","src/app/script/klecks/canvas-ui/workspace-svg-overlay.ts","node_modules/@parcel/runtime-js/lib/runtime-e57728b54ddf1ac5.js","node_modules/@parcel/runtime-js/lib/runtime-3442d42605821f3f.js","node_modules/@parcel/runtime-js/lib/runtime-3729da8811b5b5e3.js","node_modules/@parcel/runtime-js/lib/runtime-5bb90b0c27450081.js","src/app/script/klecks/canvas-ui/kl-canvas-workspace.ts","src/app/script/klecks/canvas-ui/canvas-preview.ts","src/app/script/klecks/ui/components/free-transform.ts","node_modules/@parcel/runtime-js/lib/runtime-b8274e56b1ae4db4.js","src/app/script/klecks/ui/components/free-transform-canvas.ts","src/app/script/klecks/ui/components/cropper.ts","node_modules/@parcel/runtime-js/lib/runtime-5d20dd3c37ee2fe2.js","node_modules/@parcel/runtime-js/lib/runtime-f9a6db188a722683.js","node_modules/@parcel/runtime-js/lib/runtime-1e99cd2138e1a145.js","node_modules/@parcel/runtime-js/lib/runtime-256f7484f23deb5a.js","node_modules/@parcel/runtime-js/lib/runtime-d624a30236391c3e.js","node_modules/@parcel/runtime-js/lib/runtime-8b6317d1c00f433d.js","node_modules/@parcel/runtime-js/lib/runtime-b4b5507914f2c76c.js","node_modules/@parcel/runtime-js/lib/runtime-230be4f787e94a6a.js","node_modules/@parcel/runtime-js/lib/runtime-d081ef7058d7092a.js","node_modules/@parcel/runtime-js/lib/runtime-c687331db2197154.js","src/app/script/klecks/ui/components/tool-dropdown.ts","node_modules/@parcel/runtime-js/lib/runtime-a6a029b57995d63a.js","node_modules/@parcel/runtime-js/lib/runtime-5a45fd7168d456d8.js","node_modules/@parcel/runtime-js/lib/runtime-0b9264050ab20826.js","node_modules/@parcel/runtime-js/lib/runtime-92dfe6f46629fcc8.js","node_modules/@parcel/runtime-js/lib/runtime-b68d4f7bbc551314.js","node_modules/@parcel/runtime-js/lib/runtime-53a5f9dcb56089fd.js","node_modules/@parcel/runtime-js/lib/runtime-10849201973728f1.js","node_modules/@parcel/runtime-js/lib/runtime-cb5e455c927da963.js","node_modules/@parcel/runtime-js/lib/runtime-0e0614f301c7e6a9.js","node_modules/@parcel/runtime-js/lib/runtime-cb52ddb76c2fb811.js","node_modules/@parcel/runtime-js/lib/runtime-75760a7e5bb5df23.js","node_modules/@parcel/runtime-js/lib/runtime-e1a2885dca4a683a.js","node_modules/@parcel/runtime-js/lib/runtime-09ad719a405717bf.js","src/app/script/klecks/storage/psd.ts","src/app/script/klecks/storage/indexed-db.ts","node_modules/@parcel/runtime-js/lib/runtime-955e4fe1b0ded7b8.js","node_modules/@parcel/runtime-js/lib/runtime-2279d0317e938ef7.js","node_modules/@parcel/runtime-js/lib/runtime-9784220165c2c5dc.js","node_modules/@parcel/runtime-js/lib/runtime-8ee8efec7eddd1f0.js","node_modules/@parcel/runtime-js/lib/runtime-6b42e3ec9dd3f11e.js","node_modules/@parcel/runtime-js/lib/runtime-7cbfa11eabb6ece2.js","node_modules/@parcel/runtime-js/lib/runtime-e4fa55f9c47c88f8.js","node_modules/@parcel/runtime-js/lib/runtime-90bb0505d135ade7.js","node_modules/@parcel/runtime-js/lib/runtime-6e5626a7a9f81a46.js","node_modules/@parcel/runtime-js/lib/runtime-ed3d183a6f5e0d5d.js","node_modules/@parcel/runtime-js/lib/runtime-1192e39d04181e72.js","node_modules/@parcel/runtime-js/lib/runtime-b0ea98dacb433f95.js","node_modules/@parcel/runtime-js/lib/runtime-ffb77a22421733a0.js","src/app/script/klecks/filters/filters.ts","src/app/script/bb/math/perlin.ts","src/app/script/klecks/brushes/alphas/brush-alphas.ts","src/app/script/klecks/brushes/brushes-common.ts","src/app/script/klecks/brushes/blend-brush.ts","src/app/script/klecks/brushes/sketchy-brush.ts","src/app/script/klecks/brushes/smudge-brush.ts","src/app/script/klecks/brushes/chemy-brush.ts","src/app/script/klecks/brushes/brushes.ts","src/app/script/klecks/brushes/pen-brush.ts","src/app/script/klecks/brushes/pixel-brush.ts","src/app/script/klecks/brushes/eraser-brush.ts","src/app/script/klecks/brushes-ui/brushes-consts.ts","node_modules/@parcel/runtime-js/lib/runtime-7686fcea82a2b96a.js","src/app/script/klecks/brushes-ui/pen-brush-ui.ts","node_modules/@parcel/runtime-js/lib/runtime-bca2537a97916a9a.js","src/app/script/klecks/brushes-ui/blend-brush-ui.ts","node_modules/@parcel/runtime-js/lib/runtime-5a7b200ac55bb372.js","src/app/script/klecks/brushes-ui/sketchy-brush-ui.ts","node_modules/@parcel/runtime-js/lib/runtime-543b2dc4ab99cce1.js","src/app/script/klecks/brushes-ui/pixel-brush-ui.ts","node_modules/@parcel/runtime-js/lib/runtime-7c1a24eb627c58fe.js","src/app/script/klecks/brushes-ui/eraser-brush-ui.ts","node_modules/@parcel/runtime-js/lib/runtime-a97bcd5e44829968.js","src/app/script/klecks/brushes-ui/smudge-brush-ui.ts","node_modules/@parcel/runtime-js/lib/runtime-cc137c863a33806b.js","src/app/script/klecks/ui/base-components/box-toggle.ts","src/app/script/klecks/brushes-ui/chemy-brush-ui.ts","src/app/script/klecks/brushes-ui/brushes-ui.ts","src/app/script/klecks/ui/modals/show-iframe-popup.ts","src/app/script/klecks/ui/base-components/radio-list.ts","src/app/script/klecks/ui/components/browser-storage-ui.ts","src/app/script/klecks/storage/base-64-to-blob.ts","src/app/script/klecks/storage/project-converter.ts","src/app/script/klecks/storage/project-store.ts","src/app/script/klecks/ui/tool-tabs/file-tab.ts","src/app/script/klecks/ui/tool-tabs/filter-tab.ts","src/app/script/klecks/ui/modals/imgur-upload.ts","node_modules/@parcel/runtime-js/lib/runtime-236948a56a015621.js","src/app/script/klecks/storage/ag-psd-wrapper.ts","src/app/script/klecks/ui/components/save-reminder.ts","node_modules/file-saver/src/FileSaver.js","src/app/script/klecks/storage/save-to-computer.ts","src/app/script/klecks/history/undo-redo-catchup.ts","src/app/script/klecks/brushes-ui/brush-setting-service.ts","node_modules/@parcel/runtime-js/lib/runtime-fe0076583c830dae.js","node_modules/@parcel/runtime-js/lib/runtime-3e6e1c3a924e75a7.js","src/app/script/klecks/ui/tool-tabs/settings-tab.ts","src/app/script/klecks/kl.ts","src/app/script/klecks/ui/components/layer-preview.ts","src/app/script/klecks/ui/components/show-reminder-toast.ts","src/app/script/klecks/ui/components/fitted-image.ts","src/app/script/klecks/ui/components/kl-image-dropper.ts","src/app/script/klecks/ui/components/overlay-toolspace.ts","src/app/script/klecks/ui/components/toolspace-top-row.ts","src/app/script/klecks/ui/components/toolspace-tool-row.ts","src/app/script/klecks/ui/components/toolspace-stabilizer-row.ts","src/app/script/klecks/ui/components/tab-row.ts","src/app/script/klecks/ui/components/toolspace-collapser.ts","src/app/script/klecks/ui/components/toolspace-scroller.ts","src/app/script/klecks/ui/modals/export-dialog-deprecated.ts","src/app/script/klecks/ui/modals/clipboard-dialog.ts","src/app/script/klecks/ui/modals/show-import-as-layer-dialog.ts","src/app/script/klecks/ui/modals/new-image-dialog.ts","src/app/script/klecks/ui/modals/text-tool-dialog.ts","src/app/script/klecks/ui/modals/show-import-image-dialog.ts","src/app/script/klecks/ui/tool-tabs/hand-ui.ts","src/app/script/klecks/ui/tool-tabs/fill-ui.ts","src/app/script/klecks/ui/tool-tabs/text-ui.ts","src/app/script/klecks/ui/tool-tabs/shape-ui.ts","src/app/script/klecks/ui/tool-tabs/kl-layer-manager.ts","src/app/script/embed/toolspace-top-row.ts","src/app/script/klecks/filters/filters-consts.ts","src/app/script-vendor/glfx.ts","src/app/script/klecks/filters/shared-gl-fx.ts","src/app/script/klecks/filters/gl-brightness-contrast.ts","src/app/script/klecks/filters/crop-extend.ts","src/app/script/klecks/filters/gl-curves.ts","node_modules/@parcel/runtime-js/lib/runtime-33aff74bfbd7207b.js","src/app/script/klecks/filters/flip.ts","src/app/script/klecks/filters/gl-hue-saturation.ts","src/app/script/klecks/filters/invert.ts","src/app/script/klecks/filters/gl-perspective.ts","node_modules/@parcel/runtime-js/lib/runtime-606bbda3499bbf7f.js","src/app/script/klecks/filters/resize.ts","src/app/script/klecks/filters/rotate.ts","src/app/script/klecks/filters/gl-tilt-shift.ts","src/app/script/klecks/filters/transform.ts","src/app/script/klecks/filters/gl-blur.ts","src/app/script/klecks/filters/gl-unsharp-mask.ts","src/app/script/klecks/filters/to-alpha.ts","src/app/script/klecks/filters/filters-lazy.ts","src/app/script/klecks/storage/kl-canvas-to-psd-blob.ts","node_modules/@parcel/runtime-js/lib/runtime-854dafc36aea51c4.js","src/app/script/app/kl-app.ts","node_modules/@parcel/runtime-js/lib/runtime-55c65103339c1cdd.js","src/app/script/main-standalone.ts"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","export default function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object['ke' + 'ys'](descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator ? (decorator(target, property, desc) || desc) : desc;\n  }, desc);\n\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n\n  if (desc.initializer === void 0) {\n    Object['define' + 'Property'](target, property, desc);\n    desc = null;\n  }\n\n  return desc;\n}\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n","import AwaitValue from './_await_value';\n\nexport default function AsyncGenerator(gen) {\n  var front, back;\n\n  function send(key, arg) {\n    return new Promise(function (resolve, reject) {\n      var request = {\n        key: key,\n        arg: arg,\n        resolve: resolve,\n        reject: reject,\n        next: null\n      };\n\n      if (back) {\n        back = back.next = request;\n      } else {\n        front = back = request;\n        resume(key, arg);\n      }\n    });\n  }\n\n  function resume(key, arg) {\n    try {\n      var result = gen[key](arg);\n      var value = result.value;\n      var wrappedAwait = value instanceof AwaitValue;\n      Promise.resolve(wrappedAwait ? value.wrapped : value).then(function (arg) {\n        if (wrappedAwait) {\n          resume(\"next\", arg);\n          return;\n        }\n\n        settle(result.done ? \"return\" : \"normal\", arg);\n      }, function (err) {\n        resume(\"throw\", err);\n      });\n    } catch (err) {\n      settle(\"throw\", err);\n    }\n  }\n\n  function settle(type, value) {\n    switch (type) {\n      case \"return\":\n        front.resolve({\n          value: value,\n          done: true\n        });\n        break;\n\n      case \"throw\":\n        front.reject(value);\n        break;\n\n      default:\n        front.resolve({\n          value: value,\n          done: false\n        });\n        break;\n    }\n\n    front = front.next;\n\n    if (front) {\n      resume(front.key, front.arg);\n    } else {\n      back = null;\n    }\n  }\n\n  this._invoke = send;\n\n  if (typeof gen.return !== \"function\") {\n    this.return = undefined;\n  }\n}\n\nif (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n  AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n    return this;\n  };\n}\n\nAsyncGenerator.prototype.next = function (arg) {\n  return this._invoke(\"next\", arg);\n};\n\nAsyncGenerator.prototype.throw = function (arg) {\n  return this._invoke(\"throw\", arg);\n};\n\nAsyncGenerator.prototype.return = function (arg) {\n  return this._invoke(\"return\", arg);\n};\n","export default function _AwaitValue(value) {\n  this.wrapped = value;\n}\n","export default function _asyncGeneratorDelegate(inner, awaitWrap) {\n  var iter = {},\n    waiting = false;\n\n  function pump(key, value) {\n    waiting = true;\n    value = new Promise(function (resolve) {\n      resolve(inner[key](value));\n    });\n    return {\n      done: false,\n      value: awaitWrap(value)\n    };\n  }\n\n  ;\n\n  if (typeof Symbol === \"function\" && Symbol.iterator) {\n    iter[Symbol.iterator] = function () {\n      return this;\n    };\n  }\n\n  iter.next = function (value) {\n    if (waiting) {\n      waiting = false;\n      return value;\n    }\n\n    return pump(\"next\", value);\n  };\n\n  if (typeof inner.throw === \"function\") {\n    iter.throw = function (value) {\n      if (waiting) {\n        waiting = false;\n        throw value;\n      }\n\n      return pump(\"throw\", value);\n    };\n  }\n\n  if (typeof inner.return === \"function\") {\n    iter.return = function (value) {\n      return pump(\"return\", value);\n    };\n  }\n\n  return iter;\n}\n","export default function _asyncIterator(iterable) {\n  var method;\n\n  if (typeof Symbol === \"function\") {\n    if (Symbol.asyncIterator) {\n      method = iterable[Symbol.asyncIterator];\n      if (method != null) return method.call(iterable);\n    }\n\n    if (Symbol.iterator) {\n      method = iterable[Symbol.iterator];\n      if (method != null) return method.call(iterable);\n    }\n  }\n\n  throw new TypeError(\"Object is not async iterable\");\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n","import AwaitValue from './_await_value';\n\nexport default function _awaitAsyncGenerator(value) {\n  return new AwaitValue(value);\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _classNameTDZError(name) {\n  throw new Error(\"Class \\\"\" + name + \"\\\" cannot be referenced in computed property keys.\");\n}\n","export default function _classPrivateFieldGet(receiver, privateMap) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return privateMap.get(receiver).value;\n}\n","export default function _classPrivateFieldBase(receiver, privateKey) {\n  if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n    throw new TypeError(\"attempted to use private field on non-instance\");\n  }\n\n  return receiver;\n}\n","export default function _classPrivateFieldSet(receiver, privateMap, value) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to set private field on non-instance\");\n  }\n\n  var descriptor = privateMap.get(receiver);\n\n  if (!descriptor.writable) {\n    throw new TypeError(\"attempted to set read only private field\");\n  }\n\n  descriptor.value = value;\n  return value;\n}\n","export default function _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return fn;\n}\n","export default function _classPrivateMethodSet() {\n  throw new TypeError(\"attempted to reassign private method\");\n}\n","export default function _classStaticPrivateFieldSpecGet(receiver, classConstructor, descriptor) {\n  if (receiver !== classConstructor) {\n    throw new TypeError(\"Private static access of wrong provenance\");\n  }\n\n  return descriptor.value;\n}\n","export default function _classStaticPrivateFieldSpecSet(receiver, classConstructor, descriptor, value) {\n  if (receiver !== classConstructor) {\n    throw new TypeError(\"Private static access of wrong provenance\");\n  }\n\n  if (!descriptor.writable) {\n    throw new TypeError(\"attempted to set read only private field\");\n  }\n\n  descriptor.value = value;\n  return value;\n}\n","function isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () { }));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    construct = Reflect.construct;\n  } else {\n    construct = function construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return construct.apply(null, arguments);\n}\n\nexport default function _construct(Parent, args, Class) {\n  return construct.apply(null, arguments);\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n","import toArray from './_to_array';\nimport toPropertyKey from './_to_property_key';\n\nexport default function _decorate(decorators, factory, superClass) {\n  var r = factory(function initialize(O) {\n    _initializeInstanceElements(O, decorated.elements);\n  }, superClass);\n\n  var decorated = _decorateClass(_coalesceClassElements(r.d.map(_createElementDescriptor)), decorators);\n\n  _initializeClassElements(r.F, decorated.elements);\n\n  return _runClassFinishers(r.F, decorated.finishers);\n}\n\nfunction _createElementDescriptor(def) {\n  var key = toPropertyKey(def.key);\n  var descriptor;\n\n  if (def.kind === \"method\") {\n    descriptor = {\n      value: def.value,\n      writable: true,\n      configurable: true,\n      enumerable: false\n    };\n    Object.defineProperty(def.value, \"name\", {\n      value: _typeof(key) === \"symbol\" ? \"\" : key,\n      configurable: true\n    });\n  } else if (def.kind === \"get\") {\n    descriptor = {\n      get: def.value,\n      configurable: true,\n      enumerable: false\n    };\n  } else if (def.kind === \"set\") {\n    descriptor = {\n      set: def.value,\n      configurable: true,\n      enumerable: false\n    };\n  } else if (def.kind === \"field\") {\n    descriptor = {\n      configurable: true,\n      writable: true,\n      enumerable: true\n    };\n  }\n\n  var element = {\n    kind: def.kind === \"field\" ? \"field\" : \"method\",\n    key: key,\n    placement: def.static ? \"static\" : def.kind === \"field\" ? \"own\" : \"prototype\",\n    descriptor: descriptor\n  };\n  if (def.decorators) element.decorators = def.decorators;\n  if (def.kind === \"field\") element.initializer = def.value;\n  return element;\n}\n\nfunction _coalesceGetterSetter(element, other) {\n  if (element.descriptor.get !== undefined) {\n    other.descriptor.get = element.descriptor.get;\n  } else {\n    other.descriptor.set = element.descriptor.set;\n  }\n}\n\nfunction _coalesceClassElements(elements) {\n  var newElements = [];\n\n  var isSameElement = function isSameElement(other) {\n    return other.kind === \"method\" && other.key === element.key && other.placement === element.placement;\n  };\n\n  for (var i = 0; i < elements.length; i++) {\n    var element = elements[i];\n    var other;\n\n    if (element.kind === \"method\" && (other = newElements.find(isSameElement))) {\n      if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) {\n        if (_hasDecorators(element) || _hasDecorators(other)) {\n          throw new ReferenceError(\"Duplicated methods (\" + element.key + \") can't be decorated.\");\n        }\n\n        other.descriptor = element.descriptor;\n      } else {\n        if (_hasDecorators(element)) {\n          if (_hasDecorators(other)) {\n            throw new ReferenceError(\"Decorators can't be placed on different accessors with for \" + \"the same property (\" + element.key + \").\");\n          }\n\n          other.decorators = element.decorators;\n        }\n\n        _coalesceGetterSetter(element, other);\n      }\n    } else {\n      newElements.push(element);\n    }\n  }\n\n  return newElements;\n}\n\nfunction _hasDecorators(element) {\n  return element.decorators && element.decorators.length;\n}\n\nfunction _isDataDescriptor(desc) {\n  return desc !== undefined && !(desc.value === undefined && desc.writable === undefined);\n}\n\nfunction _initializeClassElements(F, elements) {\n  var proto = F.prototype;\n  [\"method\", \"field\"].forEach(function (kind) {\n    elements.forEach(function (element) {\n      var placement = element.placement;\n\n      if (element.kind === kind && (placement === \"static\" || placement === \"prototype\")) {\n        var receiver = placement === \"static\" ? F : proto;\n\n        _defineClassElement(receiver, element);\n      }\n    });\n  });\n}\n\nfunction _initializeInstanceElements(O, elements) {\n  [\"method\", \"field\"].forEach(function (kind) {\n    elements.forEach(function (element) {\n      if (element.kind === kind && element.placement === \"own\") {\n        _defineClassElement(O, element);\n      }\n    });\n  });\n}\n\nfunction _defineClassElement(receiver, element) {\n  var descriptor = element.descriptor;\n\n  if (element.kind === \"field\") {\n    var initializer = element.initializer;\n    descriptor = {\n      enumerable: descriptor.enumerable,\n      writable: descriptor.writable,\n      configurable: descriptor.configurable,\n      value: initializer === void 0 ? void 0 : initializer.call(receiver)\n    };\n  }\n\n  Object.defineProperty(receiver, element.key, descriptor);\n}\n\nfunction _decorateClass(elements, decorators) {\n  var newElements = [];\n  var finishers = [];\n  var placements = {\n    static: [],\n    prototype: [],\n    own: []\n  };\n  elements.forEach(function (element) {\n    _addElementPlacement(element, placements);\n  });\n  elements.forEach(function (element) {\n    if (!_hasDecorators(element)) return newElements.push(element);\n\n    var elementFinishersExtras = _decorateElement(element, placements);\n\n    newElements.push(elementFinishersExtras.element);\n    newElements.push.apply(newElements, elementFinishersExtras.extras);\n    finishers.push.apply(finishers, elementFinishersExtras.finishers);\n  });\n\n  if (!decorators) {\n    return {\n      elements: newElements,\n      finishers: finishers\n    };\n  }\n\n  var result = _decorateConstructor(newElements, decorators);\n\n  finishers.push.apply(finishers, result.finishers);\n  result.finishers = finishers;\n  return result;\n}\n\nfunction _addElementPlacement(element, placements, silent) {\n  var keys = placements[element.placement];\n\n  if (!silent && keys.indexOf(element.key) !== -1) {\n    throw new TypeError(\"Duplicated element (\" + element.key + \")\");\n  }\n\n  keys.push(element.key);\n}\n\nfunction _decorateElement(element, placements) {\n  var extras = [];\n  var finishers = [];\n\n  for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) {\n    var keys = placements[element.placement];\n    keys.splice(keys.indexOf(element.key), 1);\n\n    var elementObject = _fromElementDescriptor(element);\n\n    var elementFinisherExtras = _toElementFinisherExtras((0, decorators[i])(elementObject) || elementObject);\n\n    element = elementFinisherExtras.element;\n\n    _addElementPlacement(element, placements);\n\n    if (elementFinisherExtras.finisher) {\n      finishers.push(elementFinisherExtras.finisher);\n    }\n\n    var newExtras = elementFinisherExtras.extras;\n\n    if (newExtras) {\n      for (var j = 0; j < newExtras.length; j++) {\n        _addElementPlacement(newExtras[j], placements);\n      }\n\n      extras.push.apply(extras, newExtras);\n    }\n  }\n\n  return {\n    element: element,\n    finishers: finishers,\n    extras: extras\n  };\n}\n\nfunction _decorateConstructor(elements, decorators) {\n  var finishers = [];\n\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    var obj = _fromClassDescriptor(elements);\n\n    var elementsAndFinisher = _toClassDescriptor((0, decorators[i])(obj) || obj);\n\n    if (elementsAndFinisher.finisher !== undefined) {\n      finishers.push(elementsAndFinisher.finisher);\n    }\n\n    if (elementsAndFinisher.elements !== undefined) {\n      elements = elementsAndFinisher.elements;\n\n      for (var j = 0; j < elements.length - 1; j++) {\n        for (var k = j + 1; k < elements.length; k++) {\n          if (elements[j].key === elements[k].key && elements[j].placement === elements[k].placement) {\n            throw new TypeError(\"Duplicated element (\" + elements[j].key + \")\");\n          }\n        }\n      }\n    }\n  }\n\n  return {\n    elements: elements,\n    finishers: finishers\n  };\n}\n\nfunction _fromElementDescriptor(element) {\n  var obj = {\n    kind: element.kind,\n    key: element.key,\n    placement: element.placement,\n    descriptor: element.descriptor\n  };\n  var desc = {\n    value: \"Descriptor\",\n    configurable: true\n  };\n  Object.defineProperty(obj, Symbol.toStringTag, desc);\n  if (element.kind === \"field\") obj.initializer = element.initializer;\n  return obj;\n}\n\nfunction _toElementDescriptors(elementObjects) {\n  if (elementObjects === undefined) return;\n  return toArray(elementObjects).map(function (elementObject) {\n    var element = _toElementDescriptor(elementObject);\n\n    _disallowProperty(elementObject, \"finisher\", \"An element descriptor\");\n\n    _disallowProperty(elementObject, \"extras\", \"An element descriptor\");\n\n    return element;\n  });\n}\n\nfunction _toElementDescriptor(elementObject) {\n  var kind = String(elementObject.kind);\n\n  if (kind !== \"method\" && kind !== \"field\") {\n    throw new TypeError('An element descriptor\\'s .kind property must be either \"method\" or' + ' \"field\", but a decorator created an element descriptor with' + ' .kind \"' + kind + '\"');\n  }\n\n  var key = toPropertyKey(elementObject.key);\n  var placement = String(elementObject.placement);\n\n  if (placement !== \"static\" && placement !== \"prototype\" && placement !== \"own\") {\n    throw new TypeError('An element descriptor\\'s .placement property must be one of \"static\",' + ' \"prototype\" or \"own\", but a decorator created an element descriptor' + ' with .placement \"' + placement + '\"');\n  }\n\n  var descriptor = elementObject.descriptor;\n\n  _disallowProperty(elementObject, \"elements\", \"An element descriptor\");\n\n  var element = {\n    kind: kind,\n    key: key,\n    placement: placement,\n    descriptor: Object.assign({}, descriptor)\n  };\n\n  if (kind !== \"field\") {\n    _disallowProperty(elementObject, \"initializer\", \"A method descriptor\");\n  } else {\n    _disallowProperty(descriptor, \"get\", \"The property descriptor of a field descriptor\");\n\n    _disallowProperty(descriptor, \"set\", \"The property descriptor of a field descriptor\");\n\n    _disallowProperty(descriptor, \"value\", \"The property descriptor of a field descriptor\");\n\n    element.initializer = elementObject.initializer;\n  }\n\n  return element;\n}\n\nfunction _toElementFinisherExtras(elementObject) {\n  var element = _toElementDescriptor(elementObject);\n\n  var finisher = _optionalCallableProperty(elementObject, \"finisher\");\n\n  var extras = _toElementDescriptors(elementObject.extras);\n\n  return {\n    element: element,\n    finisher: finisher,\n    extras: extras\n  };\n}\n\nfunction _fromClassDescriptor(elements) {\n  var obj = {\n    kind: \"class\",\n    elements: elements.map(_fromElementDescriptor)\n  };\n  var desc = {\n    value: \"Descriptor\",\n    configurable: true\n  };\n  Object.defineProperty(obj, Symbol.toStringTag, desc);\n  return obj;\n}\n\nfunction _toClassDescriptor(obj) {\n  var kind = String(obj.kind);\n\n  if (kind !== \"class\") {\n    throw new TypeError('A class descriptor\\'s .kind property must be \"class\", but a decorator' + ' created a class descriptor with .kind \"' + kind + '\"');\n  }\n\n  _disallowProperty(obj, \"key\", \"A class descriptor\");\n\n  _disallowProperty(obj, \"placement\", \"A class descriptor\");\n\n  _disallowProperty(obj, \"descriptor\", \"A class descriptor\");\n\n  _disallowProperty(obj, \"initializer\", \"A class descriptor\");\n\n  _disallowProperty(obj, \"extras\", \"A class descriptor\");\n\n  var finisher = _optionalCallableProperty(obj, \"finisher\");\n\n  var elements = _toElementDescriptors(obj.elements);\n\n  return {\n    elements: elements,\n    finisher: finisher\n  };\n}\n\nfunction _disallowProperty(obj, name, objectType) {\n  if (obj[name] !== undefined) {\n    throw new TypeError(objectType + \" can't have a .\" + name + \" property.\");\n  }\n}\n\nfunction _optionalCallableProperty(obj, name) {\n  var value = obj[name];\n\n  if (value !== undefined && typeof value !== \"function\") {\n    throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n  }\n\n  return value;\n}\n\nfunction _runClassFinishers(constructor, finishers) {\n  for (var i = 0; i < finishers.length; i++) {\n    var newConstructor = (0, finishers[i])(constructor);\n\n    if (newConstructor !== undefined) {\n      if (typeof newConstructor !== \"function\") {\n        throw new TypeError(\"Finishers must return a constructor.\");\n      }\n\n      constructor = newConstructor;\n    }\n  }\n\n  return constructor;\n}\n","import arrayWithHoles from './_array_with_holes';\nimport iterableToArray from './_iterable_to_array';\nimport nonIterableRest from './_non_iterable_rest';\n\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || nonIterableRest();\n}\n","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n","import _typeof from './_type_of';\nimport toPrimitive from './_to_primitive';\n\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","export default function _typeof(obj) {\n    return obj && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n};\n","import _typeof from './_type_of';\n\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}","export default function _defaults(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n}\n","export default function _defineEnumerableProperties(obj, descs) {\n  for (var key in descs) {\n    var desc = descs[key];\n    desc.configurable = desc.enumerable = true;\n    if (\"value\" in desc) desc.writable = true;\n    Object.defineProperty(obj, key, desc);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n    for (var i = 0; i < objectSymbols.length; i++) {\n      var sym = objectSymbols[i];\n      var desc = descs[sym];\n      desc.configurable = desc.enumerable = true;\n      if (\"value\" in desc) desc.writable = true;\n      Object.defineProperty(obj, sym, desc);\n    }\n  }\n\n  return obj;\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","function extends_() {\n  extends_ = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return extends_.apply(this, arguments);\n}\n\nexport default function _extends() {\n  return extends_.apply(this, arguments);\n}\n","import superPropBase from './_super_prop_base';\n\nfunction get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    get = Reflect.get;\n  } else {\n    get = function get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver || target);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return get(target, property, receiver);\n}\n\nexport default function _get(target, property, reciever) {\n  return get(target, property, reciever);\n}\n","import getPrototypeOf from './_get_prototype_of';\n\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n","function getPrototypeOf(o) {\n  getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return getPrototypeOf(o);\n}\n\nexport default function _getPrototypeOf(o) {\n  return getPrototypeOf(o);\n}","import setPrototypeOf from './_set_prototype_of';\n\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n","function setPrototypeOf(o, p) {\n  setPrototypeOf = Object.setPrototypeOf || function setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return setPrototypeOf(o, p);\n}\n\nexport default function _setPrototypeOf(o, p) {\n  return setPrototypeOf(o, p);\n}\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n","export default function _initializerDefineProperty(target, property, descriptor, context) {\n  if (!descriptor) return;\n  Object.defineProperty(target, property, {\n    enumerable: descriptor.enumerable,\n    configurable: descriptor.configurable,\n    writable: descriptor.writable,\n    value: descriptor.initializer ? descriptor.initializer.call(context) : void 0\n  });\n}\n","export default function _initializerWarningHelper(descriptor, context) {\n  throw new Error('Decorating class property failed. Please ensure that ' + 'proposal-class-properties is enabled and set to use loose mode. ' + 'To use proposal-class-properties in spec mode with decorators, wait for ' + 'the next major version of decorators in stage 2.');\n}\n","export default function _instanceof(left, right) {\n  if (right != null && typeof Symbol !== \"undefined\" && right[Symbol.hasInstance]) {\n    return right[Symbol.hasInstance](left);\n  } else {\n    return left instanceof right;\n  }\n}","export default function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n","export default function _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n","export default function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n","export default function _iterableToArrayLimitLoose(arr, i) {\n  var _arr = [];\n\n  for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {\n    _arr.push(_step.value);\n\n    if (i && _arr.length === i) break;\n  }\n\n  return _arr;\n}\n","var REACT_ELEMENT_TYPE;\n\nexport default function _createRawReactElement(type, props, key, children) {\n  if (!REACT_ELEMENT_TYPE) {\n    REACT_ELEMENT_TYPE = typeof Symbol === \"function\" && Symbol.for && Symbol.for(\"react.element\") || 0xeac7;\n  }\n\n  var defaultProps = type && type.defaultProps;\n  var childrenLength = arguments.length - 3;\n\n  if (!props && childrenLength !== 0) {\n    props = {\n      children: void 0\n    };\n  }\n\n  if (props && defaultProps) {\n    for (var propName in defaultProps) {\n      if (props[propName] === void 0) {\n        props[propName] = defaultProps[propName];\n      }\n    }\n  } else if (!props) {\n    props = defaultProps || {};\n  }\n\n  if (childrenLength === 1) {\n    props.children = children;\n  } else if (childrenLength > 1) {\n    var childArray = new Array(childrenLength);\n\n    for (var i = 0; i < childrenLength; i++) {\n      childArray[i] = arguments[i + 3];\n    }\n\n    props.children = childArray;\n  }\n\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key === undefined ? null : '' + key,\n    ref: null,\n    props: props,\n    _owner: null\n  };\n}\n","export default function _newArrowCheck(innerThis, boundThis) {\n  if (innerThis !== boundThis) {\n    throw new TypeError(\"Cannot instantiate an arrow function\");\n  }\n}\n","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n","import defineProperty from './_define_property';\n\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from './_object_without_properties_loose';\n\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n","import assertThisInitialized from './_assert_this_initialized';\nimport _typeof from './_type_of';\n\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n","export default function _readOnlyError(name) {\n  throw new Error(\"\\\"\" + name + \"\\\" is read-only\");\n}\n","import defineProperty from './_define_property';\nimport superPropBase from './_super_prop_base';\n\nfunction set(target, property, value, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.set) {\n    set = Reflect.set;\n  } else {\n    set = function set(target, property, value, receiver) {\n      var base = superPropBase(target, property);\n      var desc;\n\n      if (base) {\n        desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.set) {\n          desc.set.call(receiver, value);\n          return true;\n        } else if (!desc.writable) {\n          return false;\n        }\n      }\n\n      desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n      if (desc) {\n        if (!desc.writable) {\n          return false;\n        }\n\n        desc.value = value;\n        Object.defineProperty(receiver, property, desc);\n      } else {\n        defineProperty(receiver, property, value);\n      }\n\n      return true;\n    };\n  }\n\n  return set(target, property, value, receiver);\n}\n\nexport default function _set(target, property, value, receiver, isStrict) {\n  var s = set(target, property, value, receiver || target);\n\n  if (!s && isStrict) {\n    throw new Error('failed to set property');\n  }\n\n  return value;\n}\n","export default function _skipFirstGeneratorNext(fn) {\n  return function () {\n    var it = fn.apply(this, arguments);\n    it.next();\n    return it;\n  };\n}\n","import arrayWithHoles from './_array_with_holes';\nimport iterableToArrayLimit from './_iterable_to_array';\nimport nonIterableRest from './_non_iterable_rest';\n\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","import arrayWithHoles from './_array_with_holes';\nimport iterableToArrayLimitLoose from './_iterable_to_array_limit_loose';\nimport nonIterableRest from './_non_iterable_rest';\n\nexport default function _slicedToArrayLoose(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimitLoose(arr, i) || nonIterableRest();\n}\n","export default function _taggedTemplateLiteral(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n}\n","export default function _taggedTemplateLiteralLoose(strings, raw) {\n  if (!raw) {\n    raw = strings.slice(0);\n  }\n\n  strings.raw = raw;\n  return strings;\n}\n","export default function _throw(e) {\n    throw e;\n}","import arrayWithoutHoles from './_array_without_holes';\nimport iterableToArray from './_iterable_to_array';\nimport nonIterableSpread from './_non_iterable_spread';\n\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n","import AsyncGenerator from './_async_generator';\n\nexport default function _wrapAsyncGenerator(fn) {\n  return function () {\n    return new AsyncGenerator(fn.apply(this, arguments));\n  };\n}\n","import construct from './_construct';\nimport isNativeFunction from './_is_native_function';\nimport getPrototypeOf from './_get_prototype_of';\nimport setPrototypeOf from './_set_prototype_of';\n\nfunction wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  wrapNativeSuper = function wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return wrapNativeSuper(Class);\n}\n\nexport default function _wrapNativeSuper(Class) {\n  return wrapNativeSuper(Class);\n}\n","import _isNativeReflectConstruct from \"./_is_native_reflect_construct\";\nimport _getPrototypeOf from \"./_get_prototype_of\";\nimport _possibleConstructorReturn from './_possible_constructor_return';\n\nexport default function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n    return function _createSuperInternal() {\n        var Super = _getPrototypeOf(Derived),\n            result;\n        if (hasNativeReflectConstruct) {\n            var NewTarget = _getPrototypeOf(this).constructor;\n            result = Reflect.construct(Super, arguments, NewTarget);\n        } else {\n            result = Super.apply(this, arguments);\n        }\n        return _possibleConstructorReturn(this, result);\n    };\n}","export default function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n    try {\n        Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { }));\n        return true;\n    } catch (e) {\n        return false;\n    }\n}","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"5RGAp\"))).then(() => parcelRequire('fz5vW'));","\"use strict\";\n\nvar cacheLoader = require('../cacheLoader');\n\nmodule.exports = cacheLoader(function (bundle) {\n  return new Promise(function (resolve, reject) {\n    // Don't insert the same script twice (e.g. if it was already in the HTML)\n    var existingScripts = document.getElementsByTagName('script');\n\n    if ([].concat(existingScripts).some(function isCurrentBundle(script) {\n      return script.src === bundle;\n    })) {\n      resolve();\n      return;\n    }\n\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'text/javascript';\n    script.charset = 'utf-8';\n    script.src = bundle;\n\n    script.onerror = function (e) {\n      var error = new TypeError(\"Failed to fetch dynamically imported module: \".concat(bundle, \". Error: \").concat(e.message));\n      script.onerror = script.onload = null;\n      script.remove();\n      reject(error);\n    };\n\n    script.onload = function () {\n      script.onerror = script.onload = null;\n      resolve();\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n});","\"use strict\";\n\nvar cachedBundles = {};\nvar cachedPreloads = {};\nvar cachedPrefetches = {};\n\nfunction getCache(type) {\n  switch (type) {\n    case 'preload':\n      return cachedPreloads;\n\n    case 'prefetch':\n      return cachedPrefetches;\n\n    default:\n      return cachedBundles;\n  }\n}\n\nmodule.exports = function (loader, type) {\n  return function (bundle) {\n    var cache = getCache(type);\n\n    if (cache[bundle]) {\n      return cache[bundle];\n    }\n\n    return cache[bundle] = loader.apply(null, arguments).catch(function (e) {\n      delete cache[bundle];\n      throw e;\n    });\n  };\n};","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"y5edP\"))).then(() => parcelRequire('7ZPTi'));","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"dsJ3g\"))).then(() => parcelRequire('blNy6'));","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"kNYzr\"))).then(() => parcelRequire('2m2jt'));","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"79hnx\"))).then(() => parcelRequire('jNQF2'));","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"lYbF2\\\":\\\"index.c56c2932.js\\\",\\\"l7FYj\\\":\\\"check.8d706b11.svg\\\",\\\"kbyFQ\\\":\\\"cancel.17aa34ea.svg\\\",\\\"5RGAp\\\":\\\"de.1d07f28c.js\\\",\\\"y5edP\\\":\\\"ja.22be4cfe.js\\\",\\\"dsJ3g\\\":\\\"zh-CN.dc42080c.js\\\",\\\"5H9IS\\\":\\\"brush-pressure.f4437531.svg\\\",\\\"la7yv\\\":\\\"copy.4adadd0c.svg\\\",\\\"cTtMO\\\":\\\"tool-picker.d0e69c3a.svg\\\",\\\"iQ1f0\\\":\\\"angle.f0b557ac.svg\\\",\\\"1mb1v\\\":\\\"add-layer.ce1078bb.svg\\\",\\\"11KJK\\\":\\\"duplicate-layer.3314e3c7.svg\\\",\\\"floUo\\\":\\\"merge-layers.19da79a6.svg\\\",\\\"kino6\\\":\\\"remove-layer.4e9b2b7d.svg\\\",\\\"hhQeq\\\":\\\"rename-layer.13b70bac.svg\\\",\\\"1dLwT\\\":\\\"cursor-picker.db2f5b39.png\\\",\\\"9wZxU\\\":\\\"cursor-zoom-ew.fbb85406.png\\\",\\\"hQSEH\\\":\\\"cursor-fill.8027a243.png\\\",\\\"916ZI\\\":\\\"cursor-text.dcaa5de5.png\\\",\\\"045N6\\\":\\\"cursor-rotate.5b164044.png\\\",\\\"eHdqz\\\":\\\"klecks-logo.802fb0cc.png\\\",\\\"3x5dR\\\":\\\"new-image.09cdcd80.svg\\\",\\\"hbDTd\\\":\\\"import.7a68c844.svg\\\",\\\"16iGk\\\":\\\"export.bc31616f.svg\\\",\\\"2ME3z\\\":\\\"share.454898d1.svg\\\",\\\"hZnSk\\\":\\\"help.208e9032.svg\\\",\\\"6mHrC\\\":\\\"tool-paint.6cdb3344.svg\\\",\\\"hS5Hj\\\":\\\"tool-fill.3358320a.svg\\\",\\\"doX4v\\\":\\\"tool-text.1cbd0325.svg\\\",\\\"7NqHO\\\":\\\"tool-shape.3de78c3f.svg\\\",\\\"dz3mY\\\":\\\"caret-down.68d4cd16.svg\\\",\\\"2gZH2\\\":\\\"tool-hand.e7fc81b9.svg\\\",\\\"04ZZm\\\":\\\"tool-zoom-in.d413f042.svg\\\",\\\"j9xio\\\":\\\"tool-zoom-out.299f4d1f.svg\\\",\\\"AnO0a\\\":\\\"tool-undo.540bf765.svg\\\",\\\"nTvP2\\\":\\\"inverted-border.3353c7f3.svg\\\",\\\"6toXQ\\\":\\\"edit-rotate.fd0e572a.svg\\\",\\\"b1UMP\\\":\\\"ui-collapse.2b5dfc6a.svg\\\",\\\"lvwQ5\\\":\\\"align-left.4876a845.svg\\\",\\\"imAvm\\\":\\\"align-center.6f56d4bd.svg\\\",\\\"dC0sF\\\":\\\"align-right.1521d61c.svg\\\",\\\"h3hPo\\\":\\\"typo-italic.39f02a8d.svg\\\",\\\"1pAeY\\\":\\\"typo-bold.8156fef3.svg\\\",\\\"5tPq3\\\":\\\"edit-brightness-contrast.8430cb26.svg\\\",\\\"cazOx\\\":\\\"edit-crop.16c534dd.svg\\\",\\\"245NA\\\":\\\"edit-curves.bbdb97b2.svg\\\",\\\"1hkCG\\\":\\\"edit-flip.00fd2c6b.svg\\\",\\\"k2eFf\\\":\\\"edit-hue-saturation.c9c1c847.svg\\\",\\\"krKGd\\\":\\\"edit-invert.fa435c66.png\\\",\\\"ehfxY\\\":\\\"edit-perspective.e23100db.svg\\\",\\\"beOjS\\\":\\\"edit-resize.56391e2b.svg\\\",\\\"Gk9bV\\\":\\\"edit-tilt-shift.dd20efff.png\\\",\\\"csed7\\\":\\\"edit-to-alpha.f7a2065a.svg\\\",\\\"equSE\\\":\\\"edit-transform.c8795430.svg\\\",\\\"h1dN3\\\":\\\"edit-triangle-blur.9df2dbef.png\\\",\\\"LfAXI\\\":\\\"edit-unsharp-mask.c58e988c.png\\\",\\\"iiCd6\\\":\\\"brush-pen.49a7b91e.svg\\\",\\\"6fRlX\\\":\\\"brush-blend.2b9837fa.svg\\\",\\\"hC7PC\\\":\\\"brush-sketchy.9e5d0120.png\\\",\\\"eZgVv\\\":\\\"brush-pixel.673f3e4c.svg\\\",\\\"fPZin\\\":\\\"brush-eraser.a9e10dce.svg\\\",\\\"fp7H1\\\":\\\"brush-smudge.45852bcd.svg\\\",\\\"eX098\\\":\\\"brush-chemy.a5a188f6.svg\\\",\\\"iGeXe\\\":\\\"loading.7ff8a2ac.gif\\\",\\\"kNYzr\\\":\\\"dist.abd92f9b.js\\\",\\\"kSWIa\\\":\\\"bitbof-logo.bc5e3ed5.svg\\\",\\\"4FMUg\\\":\\\"ui-swap-lr.7f474f51.svg\\\",\\\"79hnx\\\":\\\"licenses.85c0196d.js\\\",\\\"eFiVD\\\":\\\"checkmark.5cb0764b.svg\\\",\\\"2BZYe\\\":\\\"constrain.62f04e45.svg\\\",\\\"k9Nks\\\":\\\"tab-settings.1f52740e.svg\\\",\\\"bBxqy\\\":\\\"tab-layers.c8a104e7.svg\\\"}\"));","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","var DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar bind = FunctionPrototype.bind;\nvar call = FunctionPrototype.call;\nvar uncurryThis = NATIVE_BIND && bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? function (fn) {\n  return fn && uncurryThis(fn);\n} : function (fn) {\n  return fn && function () {\n    return call.apply(fn, arguments);\n  };\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","var global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar Object = global.Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : Object(it);\n} : Object;\n","var global = require('../internals/global');\n\nvar TypeError = global.TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = function (argument) {\n  return typeof argument == 'function';\n};\n","var isCallable = require('../internals/is-callable');\n\nmodule.exports = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar Object = global.Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, Object(it));\n};\n","var global = require('../internals/global');\n\nvar String = global.String;\n\nmodule.exports = function (argument) {\n  try {\n    return String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar TypeError = global.TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw TypeError(tryToString(argument) + ' is not a function');\n};\n","var aCallable = require('../internals/a-callable');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return func == null ? undefined : aCallable(func);\n};\n","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar TypeError = global.TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","module.exports = false;\n","var global = require('../internals/global');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.20.3',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2022 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","var global = require('../internals/global');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar Object = global.Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar symbolFor = Symbol && Symbol['for'];\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    var description = 'Symbol.' + name;\n    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else if (USE_SYMBOL_AS_UID && symbolFor) {\n      WellKnownSymbolsStore[name] = symbolFor(description);\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TypeError = global.TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var global = require('../internals/global');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar TypeError = global.TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar String = global.String;\nvar TypeError = global.TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw TypeError(String(argument) + ' is not an object');\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(inspectSource(WeakMap));\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","module.exports = {};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = uncurryThis(store.get);\n  var wmhas = uncurryThis(store.has);\n  var wmset = uncurryThis(store.set);\n  set = function (it, metadata) {\n    if (wmhas(store, it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    wmset(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var name = options && options.name !== undefined ? options.name : key;\n  var state;\n  if (isCallable(value)) {\n    if (String(name).slice(0, 7) === 'Symbol(') {\n      name = '[' + String(name).replace(/^Symbol\\(([^)]*)\\)/, '$1') + ']';\n    }\n    if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n      createNonEnumerableProperty(value, 'name', name);\n    }\n    state = enforceInternalState(value);\n    if (!state.source) {\n      state.source = TEMPLATE.join(typeof name == 'string' ? name : '');\n    }\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n});\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- safe\n  return number !== number || number === 0 ? 0 : (number > 0 ? floor : ceil)(number);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","var hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n  options.name        - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar apply = FunctionPrototype.apply;\nvar call = FunctionPrototype.call;\n\n// eslint-disable-next-line es/no-reflect -- safe\nmodule.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {\n  return call.apply(apply, arguments);\n});\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var global = require('../internals/global');\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar Object = global.Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var global = require('../internals/global');\nvar classof = require('../internals/classof');\n\nvar String = global.String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return String(argument);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","/* eslint-disable es/no-object-getownpropertynames -- safe */\nvar classof = require('../internals/classof-raw');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar arraySlice = require('../internals/array-slice-simple');\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return $getOwnPropertyNames(it);\n  } catch (error) {\n    return arraySlice(windowNames);\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && classof(it) == 'Window'\n    ? getWindowNames(it)\n    : $getOwnPropertyNames(toIndexedObject(it));\n};\n","'use strict';\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","var global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\n\nvar Array = global.Array;\nvar max = Math.max;\n\nmodule.exports = function (O, start, end) {\n  var length = lengthOfArrayLike(O);\n  var k = toAbsoluteIndex(start, length);\n  var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n  var result = Array(max(fin - k, 0));\n  for (var n = 0; k < fin; k++, n++) createProperty(result, n, O[k]);\n  result.length = n;\n  return result;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nexports.f = wellKnownSymbol;\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis([].slice);\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var path = require('../internals/path');\nvar hasOwn = require('../internals/has-own-property');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (NAME) {\n  var Symbol = path.Symbol || (path.Symbol = {});\n  if (!hasOwn(Symbol, NAME)) defineProperty(Symbol, NAME, {\n    value: wrappedWellKnownSymbolModule.f(NAME)\n  });\n};\n","var defineProperty = require('../internals/object-define-property').f;\nvar hasOwn = require('../internals/has-own-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (target, TAG, STATIC) {\n  if (target && !STATIC) target = target.prototype;\n  if (target && !hasOwn(target, TO_STRING_TAG)) {\n    defineProperty(target, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar empty = [];\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.exec(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, empty, argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","var global = require('../internals/global');\nvar isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar Array = global.Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var bind = require('../internals/function-bind-context');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = uncurryThis([].push);\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_REJECT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that);\n    var length = lengthOfArrayLike(self);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push(target, value);      // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push(target, value);      // filterReject\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterReject` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterReject: createMethod(7)\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IS_PURE = require('../internals/is-pure');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar fails = require('../internals/fails');\nvar hasOwn = require('../internals/has-own-property');\nvar isArray = require('../internals/is-array');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar isSymbol = require('../internals/is-symbol');\nvar anObject = require('../internals/an-object');\nvar toObject = require('../internals/to-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar $toString = require('../internals/to-string');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar nativeObjectCreate = require('../internals/object-create');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternal = require('../internals/object-get-own-property-names-external');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar arraySlice = require('../internals/array-slice');\nvar redefine = require('../internals/redefine');\nvar shared = require('../internals/shared');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar uid = require('../internals/uid');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineWellKnownSymbol = require('../internals/define-well-known-symbol');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar InternalStateModule = require('../internals/internal-state');\nvar $forEach = require('../internals/array-iteration').forEach;\n\nvar HIDDEN = sharedKey('hidden');\nvar SYMBOL = 'Symbol';\nvar PROTOTYPE = 'prototype';\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(SYMBOL);\n\nvar ObjectPrototype = Object[PROTOTYPE];\nvar $Symbol = global.Symbol;\nvar SymbolPrototype = $Symbol && $Symbol[PROTOTYPE];\nvar TypeError = global.TypeError;\nvar QObject = global.QObject;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;\nvar nativePropertyIsEnumerable = propertyIsEnumerableModule.f;\nvar push = uncurryThis([].push);\n\nvar AllSymbols = shared('symbols');\nvar ObjectPrototypeSymbols = shared('op-symbols');\nvar StringToSymbolRegistry = shared('string-to-symbol-registry');\nvar SymbolToStringRegistry = shared('symbol-to-string-registry');\nvar WellKnownSymbolsStore = shared('wks');\n\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDescriptor = DESCRIPTORS && fails(function () {\n  return nativeObjectCreate(nativeDefineProperty({}, 'a', {\n    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (O, P, Attributes) {\n  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);\n  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];\n  nativeDefineProperty(O, P, Attributes);\n  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {\n    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);\n  }\n} : nativeDefineProperty;\n\nvar wrap = function (tag, description) {\n  var symbol = AllSymbols[tag] = nativeObjectCreate(SymbolPrototype);\n  setInternalState(symbol, {\n    type: SYMBOL,\n    tag: tag,\n    description: description\n  });\n  if (!DESCRIPTORS) symbol.description = description;\n  return symbol;\n};\n\nvar $defineProperty = function defineProperty(O, P, Attributes) {\n  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);\n  anObject(O);\n  var key = toPropertyKey(P);\n  anObject(Attributes);\n  if (hasOwn(AllSymbols, key)) {\n    if (!Attributes.enumerable) {\n      if (!hasOwn(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));\n      O[HIDDEN][key] = true;\n    } else {\n      if (hasOwn(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;\n      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });\n    } return setSymbolDescriptor(O, key, Attributes);\n  } return nativeDefineProperty(O, key, Attributes);\n};\n\nvar $defineProperties = function defineProperties(O, Properties) {\n  anObject(O);\n  var properties = toIndexedObject(Properties);\n  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));\n  $forEach(keys, function (key) {\n    if (!DESCRIPTORS || call($propertyIsEnumerable, properties, key)) $defineProperty(O, key, properties[key]);\n  });\n  return O;\n};\n\nvar $create = function create(O, Properties) {\n  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);\n};\n\nvar $propertyIsEnumerable = function propertyIsEnumerable(V) {\n  var P = toPropertyKey(V);\n  var enumerable = call(nativePropertyIsEnumerable, this, P);\n  if (this === ObjectPrototype && hasOwn(AllSymbols, P) && !hasOwn(ObjectPrototypeSymbols, P)) return false;\n  return enumerable || !hasOwn(this, P) || !hasOwn(AllSymbols, P) || hasOwn(this, HIDDEN) && this[HIDDEN][P]\n    ? enumerable : true;\n};\n\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {\n  var it = toIndexedObject(O);\n  var key = toPropertyKey(P);\n  if (it === ObjectPrototype && hasOwn(AllSymbols, key) && !hasOwn(ObjectPrototypeSymbols, key)) return;\n  var descriptor = nativeGetOwnPropertyDescriptor(it, key);\n  if (descriptor && hasOwn(AllSymbols, key) && !(hasOwn(it, HIDDEN) && it[HIDDEN][key])) {\n    descriptor.enumerable = true;\n  }\n  return descriptor;\n};\n\nvar $getOwnPropertyNames = function getOwnPropertyNames(O) {\n  var names = nativeGetOwnPropertyNames(toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (!hasOwn(AllSymbols, key) && !hasOwn(hiddenKeys, key)) push(result, key);\n  });\n  return result;\n};\n\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(O) {\n  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;\n  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (hasOwn(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || hasOwn(ObjectPrototype, key))) {\n      push(result, AllSymbols[key]);\n    }\n  });\n  return result;\n};\n\n// `Symbol` constructor\n// https://tc39.es/ecma262/#sec-symbol-constructor\nif (!NATIVE_SYMBOL) {\n  $Symbol = function Symbol() {\n    if (isPrototypeOf(SymbolPrototype, this)) throw TypeError('Symbol is not a constructor');\n    var description = !arguments.length || arguments[0] === undefined ? undefined : $toString(arguments[0]);\n    var tag = uid(description);\n    var setter = function (value) {\n      if (this === ObjectPrototype) call(setter, ObjectPrototypeSymbols, value);\n      if (hasOwn(this, HIDDEN) && hasOwn(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));\n    };\n    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });\n    return wrap(tag, description);\n  };\n\n  SymbolPrototype = $Symbol[PROTOTYPE];\n\n  redefine(SymbolPrototype, 'toString', function toString() {\n    return getInternalState(this).tag;\n  });\n\n  redefine($Symbol, 'withoutSetter', function (description) {\n    return wrap(uid(description), description);\n  });\n\n  propertyIsEnumerableModule.f = $propertyIsEnumerable;\n  definePropertyModule.f = $defineProperty;\n  definePropertiesModule.f = $defineProperties;\n  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;\n  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;\n  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;\n\n  wrappedWellKnownSymbolModule.f = function (name) {\n    return wrap(wellKnownSymbol(name), name);\n  };\n\n  if (DESCRIPTORS) {\n    // https://github.com/tc39/proposal-Symbol-description\n    nativeDefineProperty(SymbolPrototype, 'description', {\n      configurable: true,\n      get: function description() {\n        return getInternalState(this).description;\n      }\n    });\n    if (!IS_PURE) {\n      redefine(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });\n    }\n  }\n}\n\n$({ global: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {\n  Symbol: $Symbol\n});\n\n$forEach(objectKeys(WellKnownSymbolsStore), function (name) {\n  defineWellKnownSymbol(name);\n});\n\n$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Symbol.for` method\n  // https://tc39.es/ecma262/#sec-symbol.for\n  'for': function (key) {\n    var string = $toString(key);\n    if (hasOwn(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];\n    var symbol = $Symbol(string);\n    StringToSymbolRegistry[string] = symbol;\n    SymbolToStringRegistry[symbol] = string;\n    return symbol;\n  },\n  // `Symbol.keyFor` method\n  // https://tc39.es/ecma262/#sec-symbol.keyfor\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol');\n    if (hasOwn(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];\n  },\n  useSetter: function () { USE_SETTER = true; },\n  useSimple: function () { USE_SETTER = false; }\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {\n  // `Object.create` method\n  // https://tc39.es/ecma262/#sec-object.create\n  create: $create,\n  // `Object.defineProperty` method\n  // https://tc39.es/ecma262/#sec-object.defineproperty\n  defineProperty: $defineProperty,\n  // `Object.defineProperties` method\n  // https://tc39.es/ecma262/#sec-object.defineproperties\n  defineProperties: $defineProperties,\n  // `Object.getOwnPropertyDescriptor` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Object.getOwnPropertyNames` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertynames\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // `Object.getOwnPropertySymbols` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertysymbols\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\n$({ target: 'Object', stat: true, forced: fails(function () { getOwnPropertySymbolsModule.f(1); }) }, {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return getOwnPropertySymbolsModule.f(toObject(it));\n  }\n});\n\n// `JSON.stringify` method behavior with symbols\n// https://tc39.es/ecma262/#sec-json.stringify\nif ($stringify) {\n  var FORCED_JSON_STRINGIFY = !NATIVE_SYMBOL || fails(function () {\n    var symbol = $Symbol();\n    // MS Edge converts symbol values to JSON as {}\n    return $stringify([symbol]) != '[null]'\n      // WebKit converts symbol values to JSON as null\n      || $stringify({ a: symbol }) != '{}'\n      // V8 throws on boxed symbols\n      || $stringify(Object(symbol)) != '{}';\n  });\n\n  $({ target: 'JSON', stat: true, forced: FORCED_JSON_STRINGIFY }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      var args = arraySlice(arguments);\n      var $replacer = replacer;\n      if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n      if (!isArray(replacer)) replacer = function (key, value) {\n        if (isCallable($replacer)) value = call($replacer, this, key, value);\n        if (!isSymbol(value)) return value;\n      };\n      args[1] = replacer;\n      return apply($stringify, null, args);\n    }\n  });\n}\n\n// `Symbol.prototype[@@toPrimitive]` method\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive\nif (!SymbolPrototype[TO_PRIMITIVE]) {\n  var valueOf = SymbolPrototype.valueOf;\n  // eslint-disable-next-line no-unused-vars -- required for .length\n  redefine(SymbolPrototype, TO_PRIMITIVE, function (hint) {\n    // TODO: improve hint logic\n    return call(valueOf, this);\n  });\n}\n// `Symbol.prototype[@@toStringTag]` property\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@tostringtag\nsetToStringTag($Symbol, SYMBOL);\n\nhiddenKeys[HIDDEN] = true;\n","// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar toString = require('../internals/to-string');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\nvar SymbolPrototype = NativeSymbol && NativeSymbol.prototype;\n\nif (DESCRIPTORS && isCallable(NativeSymbol) && (!('description' in SymbolPrototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : toString(arguments[0]);\n    var result = isPrototypeOf(SymbolPrototype, this)\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  SymbolWrapper.prototype = SymbolPrototype;\n  SymbolPrototype.constructor = SymbolWrapper;\n\n  var NATIVE_SYMBOL = String(NativeSymbol('test')) == 'Symbol(test)';\n  var symbolToString = uncurryThis(SymbolPrototype.toString);\n  var symbolValueOf = uncurryThis(SymbolPrototype.valueOf);\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  var replace = uncurryThis(''.replace);\n  var stringSlice = uncurryThis(''.slice);\n\n  defineProperty(SymbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = symbolValueOf(this);\n      var string = symbolToString(symbol);\n      if (hasOwn(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = NATIVE_SYMBOL ? stringSlice(string, 7, -1) : replace(string, regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.asyncIterator` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.asynciterator\ndefineWellKnownSymbol('asyncIterator');\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.hasInstance` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.hasinstance\ndefineWellKnownSymbol('hasInstance');\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.isConcatSpreadable` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.isconcatspreadable\ndefineWellKnownSymbol('isConcatSpreadable');\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.iterator` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.iterator\ndefineWellKnownSymbol('iterator');\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.match` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.match\ndefineWellKnownSymbol('match');\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.replace` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.replace\ndefineWellKnownSymbol('replace');\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.search` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.search\ndefineWellKnownSymbol('search');\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.species` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.species\ndefineWellKnownSymbol('species');\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.split` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.split\ndefineWellKnownSymbol('split');\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.toPrimitive` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.toprimitive\ndefineWellKnownSymbol('toPrimitive');\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.toStringTag` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.tostringtag\ndefineWellKnownSymbol('toStringTag');\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.unscopables` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.unscopables\ndefineWellKnownSymbol('unscopables');\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\nvar TypeError = global.TypeError;\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = lengthOfArrayLike(E);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar min = Math.min;\n\n// `Array.prototype.copyWithin` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.copywithin\n// eslint-disable-next-line es/no-array-prototype-copywithin -- safe\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = lengthOfArrayLike(O);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var $ = require('../internals/export');\nvar copyWithin = require('../internals/array-copy-within');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.copyWithin` method\n// https://tc39.es/ecma262/#sec-array.prototype.copywithin\n$({ target: 'Array', proto: true }, {\n  copyWithin: copyWithin\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('copyWithin');\n","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = lengthOfArrayLike(O);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","'use strict';\nvar global = require('../internals/global');\nvar isArray = require('../internals/is-array');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar bind = require('../internals/function-bind-context');\n\nvar TypeError = global.TypeError;\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg) : false;\n  var element, elementLen;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        elementLen = lengthOfArrayLike(element);\n        targetIndex = flattenIntoArray(target, original, element, elementLen, targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://tc39.es/ecma262/#sec-array.prototype.flat\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = lengthOfArrayLike(O);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toIntegerOrInfinity(depthArg));\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flatMap` method\n// https://tc39.es/ecma262/#sec-array.prototype.flatmap\n$({ target: 'Array', proto: true }, {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen = lengthOfArrayLike(O);\n    var A;\n    aCallable(callbackfn);\n    A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return A;\n  }\n});\n","var call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getMethod = require('../internals/get-method');\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n","var anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator, 'throw', error);\n  }\n};\n","module.exports = {};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","var classof = require('../internals/classof');\nvar getMethod = require('../internals/get-method');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar TypeError = global.TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw TypeError(tryToString(argument) + ' is not iterable');\n};\n","'use strict';\nvar global = require('../internals/global');\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar isConstructor = require('../internals/is-constructor');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar Array = global.Array;\n\n// `Array.from` method implementation\n// https://tc39.es/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var IS_CONSTRUCTOR = isConstructor(this);\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined);\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod && !(this == Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = getIterator(O, iteratorMethod);\n    next = iterator.next;\n    result = IS_CONSTRUCTOR ? new this() : [];\n    for (;!(step = call(next, iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = lengthOfArrayLike(O);\n    result = IS_CONSTRUCTOR ? new this(length) : Array(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line es/no-array-from, no-throw-literal -- required for testing\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n","var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  // eslint-disable-next-line es/no-array-from -- required for testing\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.es/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","'use strict';\n/* eslint-disable es/no-array-prototype-indexof -- required for testing */\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar $IndexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar un$IndexOf = uncurryThis([].indexOf);\n\nvar NEGATIVE_ZERO = !!un$IndexOf && 1 / un$IndexOf([1], 1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\n\n// `Array.prototype.indexOf` method\n// https://tc39.es/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    var fromIndex = arguments.length > 1 ? arguments[1] : undefined;\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? un$IndexOf(this, searchElement, fromIndex) || 0\n      : $IndexOf(this, searchElement, fromIndex);\n  }\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineProperty = require('../internals/object-define-property').f;\nvar defineIterator = require('../internals/define-iterator');\nvar IS_PURE = require('../internals/is-pure');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.es/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.es/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.es/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.es/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.es/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.es/ecma262/#sec-createmappedargumentsobject\nvar values = Iterators.Arguments = Iterators.Array;\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n// V8 ~ Chrome 45- bug\nif (!IS_PURE && DESCRIPTORS && values.name !== 'values') try {\n  defineProperty(values, 'name', { value: 'values' });\n} catch (error) { /* empty */ }\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","var global = require('../internals/global');\nvar hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar Object = global.Object;\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  var object = toObject(O);\n  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof Object ? ObjectPrototype : null;\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar create = require('../internals/object-create');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\n/* eslint-disable es/no-array-prototype-keys -- safe */\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = IteratorPrototype == undefined || fails(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype[ITERATOR].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};\nelse if (IS_PURE) IteratorPrototype = create(IteratorPrototype);\n\n// `%IteratorPrototype%[@@iterator]()` method\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator\nif (!isCallable(IteratorPrototype[ITERATOR])) {\n  redefine(IteratorPrototype, ITERATOR, function () {\n    return this;\n  });\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next, ENUMERABLE_NEXT) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(+!ENUMERABLE_NEXT, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar String = global.String;\nvar TypeError = global.TypeError;\n\nmodule.exports = function (argument) {\n  if (typeof argument == 'object' || isCallable(argument)) return argument;\n  throw TypeError(\"Can't set \" + String(argument) + ' as a prototype');\n};\n","/* eslint-disable no-proto -- safe */\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    setter = uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set);\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar IS_PURE = require('../internals/is-pure');\nvar FunctionName = require('../internals/function-name');\nvar isCallable = require('../internals/is-callable');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar PROPER_FUNCTION_NAME = FunctionName.PROPER;\nvar CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (!isCallable(CurrentIteratorPrototype[ITERATOR])) {\n          redefine(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array.prototype.{ values, @@iterator }.name in V8 / FF\n  if (PROPER_FUNCTION_NAME && DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    if (!IS_PURE && CONFIGURABLE_FUNCTION_NAME) {\n      createNonEnumerableProperty(IterablePrototype, 'name', VALUES);\n    } else {\n      INCORRECT_VALUES_NAME = true;\n      defaultIterator = function values() { return call(nativeIterator, this); };\n    }\n  }\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    redefine(IterablePrototype, ITERATOR, defaultIterator, { name: DEFAULT });\n  }\n  Iterators[NAME] = defaultIterator;\n\n  return methods;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar un$Join = uncurryThis([].join);\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return un$Join(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\n/* eslint-disable es/no-array-prototype-lastindexof -- safe */\nvar apply = require('../internals/function-apply');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar min = Math.min;\nvar $lastIndexOf = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!$lastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');\nvar FORCED = NEGATIVE_ZERO || !STRICT_METHOD;\n\n// `Array.prototype.lastIndexOf` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.lastindexof\nmodule.exports = FORCED ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n  // convert -0 to +0\n  if (NEGATIVE_ZERO) return apply($lastIndexOf, this, arguments) || 0;\n  var O = toIndexedObject(this);\n  var length = lengthOfArrayLike(O);\n  var index = length - 1;\n  if (arguments.length > 1) index = min(index, toIntegerOrInfinity(arguments[1]));\n  if (index < 0) index = length + index;\n  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;\n  return -1;\n} : $lastIndexOf;\n","var $ = require('../internals/export');\nvar lastIndexOf = require('../internals/array-last-index-of');\n\n// `Array.prototype.lastIndexOf` method\n// https://tc39.es/ecma262/#sec-array.prototype.lastindexof\n// eslint-disable-next-line es/no-array-prototype-lastindexof -- required for testing\n$({ target: 'Array', proto: true, forced: lastIndexOf !== [].lastIndexOf }, {\n  lastIndexOf: lastIndexOf\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar isConstructor = require('../internals/is-constructor');\nvar createProperty = require('../internals/create-property');\n\nvar Array = global.Array;\n\nvar ISNT_GENERIC = fails(function () {\n  function F() { /* empty */ }\n  return !(Array.of.call(F) instanceof F);\n});\n\n// `Array.of` method\n// https://tc39.es/ecma262/#sec-array.of\n// WebKit Array.of isn't generic\n$({ target: 'Array', stat: true, forced: ISNT_GENERIC }, {\n  of: function of(/* ...args */) {\n    var index = 0;\n    var argumentsLength = arguments.length;\n    var result = new (isConstructor(this) ? this : Array)(argumentsLength);\n    while (argumentsLength > index) createProperty(result, index, arguments[index++]);\n    result.length = argumentsLength;\n    return result;\n  }\n});\n","var global = require('../internals/global');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar TypeError = global.TypeError;\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aCallable(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || CHROME_BUG }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n","var classof = require('../internals/classof-raw');\nvar global = require('../internals/global');\n\nmodule.exports = classof(global.process) == 'process';\n","'use strict';\nvar $ = require('../internals/export');\nvar $reduceRight = require('../internals/array-reduce').right;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduceRight');\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduceRight` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduceright\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || CHROME_BUG }, {\n  reduceRight: function reduceRight(callbackfn /* , initialValue */) {\n    return $reduceRight(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isArray = require('../internals/is-array');\n\nvar un$Reverse = uncurryThis([].reverse);\nvar test = [1, 2];\n\n// `Array.prototype.reverse` method\n// https://tc39.es/ecma262/#sec-array.prototype.reverse\n// fix for Safari 12.0 bug\n// https://bugs.webkit.org/show_bug.cgi?id=188794\n$({ target: 'Array', proto: true, forced: String(test) === String(test.reverse()) }, {\n  reverse: function reverse() {\n    // eslint-disable-next-line no-self-assign -- dirty hack\n    if (isArray(this)) this.length = this.length;\n    return un$Reverse(this);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar un$Slice = require('../internals/array-slice');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\n\nvar SPECIES = wellKnownSymbol('species');\nvar Array = global.Array;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.es/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = lengthOfArrayLike(O);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (isConstructor(Constructor) && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return un$Slice(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n","var arraySlice = require('../internals/array-slice-simple');\n\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    array,\n    mergeSort(arraySlice(array, 0, middle), comparefn),\n    mergeSort(arraySlice(array, middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (array, left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n\n  while (lindex < llength || rindex < rlength) {\n    array[lindex + rindex] = (lindex < llength && rindex < rlength)\n      ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n      : lindex < llength ? left[lindex++] : right[rindex++];\n  } return array;\n};\n\nmodule.exports = mergeSort;\n","var userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","var UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n","var userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar un$Sort = uncurryThis(test.sort);\nvar push = uncurryThis(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? un$Sort(array) : un$Sort(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n\n    internalSort(items, getSortCompare(comparefn));\n\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) delete array[index++];\n\n    return array;\n  }\n});\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar definePropertyModule = require('../internals/object-define-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n  var defineProperty = definePropertyModule.f;\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineProperty(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n","var setSpecies = require('../internals/set-species');\n\n// `Array[@@species]` getter\n// https://tc39.es/ecma262/#sec-get-array-@@species\nsetSpecies('Array');\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar TypeError = global.TypeError;\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flat');\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flatMap');\n","// eslint-disable-next-line es/no-typed-arrays -- safe\nmodule.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';\n","var redefine = require('../internals/redefine');\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) redefine(target, key, src[key], options);\n  return target;\n};\n","var global = require('../internals/global');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\n\nvar TypeError = global.TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw TypeError('Incorrect invocation');\n};\n","var global = require('../internals/global');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toLength = require('../internals/to-length');\n\nvar RangeError = global.RangeError;\n\n// `ToIndex` abstract operation\n// https://tc39.es/ecma262/#sec-toindex\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toIntegerOrInfinity(it);\n  var length = toLength(number);\n  if (number !== length) throw RangeError('Wrong length or index');\n  return length;\n};\n","// IEEE754 conversions based on https://github.com/feross/ieee754\nvar global = require('../internals/global');\n\nvar Array = global.Array;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\n\nvar pack = function (number, mantissaLength, bytes) {\n  var buffer = Array(bytes);\n  var exponentLength = bytes * 8 - mantissaLength - 1;\n  var eMax = (1 << exponentLength) - 1;\n  var eBias = eMax >> 1;\n  var rt = mantissaLength === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var sign = number < 0 || number === 0 && 1 / number < 0 ? 1 : 0;\n  var index = 0;\n  var exponent, mantissa, c;\n  number = abs(number);\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (number != number || number === Infinity) {\n    // eslint-disable-next-line no-self-compare -- NaN check\n    mantissa = number != number ? 1 : 0;\n    exponent = eMax;\n  } else {\n    exponent = floor(log(number) / LN2);\n    c = pow(2, -exponent);\n    if (number * c < 1) {\n      exponent--;\n      c *= 2;\n    }\n    if (exponent + eBias >= 1) {\n      number += rt / c;\n    } else {\n      number += rt * pow(2, 1 - eBias);\n    }\n    if (number * c >= 2) {\n      exponent++;\n      c /= 2;\n    }\n    if (exponent + eBias >= eMax) {\n      mantissa = 0;\n      exponent = eMax;\n    } else if (exponent + eBias >= 1) {\n      mantissa = (number * c - 1) * pow(2, mantissaLength);\n      exponent = exponent + eBias;\n    } else {\n      mantissa = number * pow(2, eBias - 1) * pow(2, mantissaLength);\n      exponent = 0;\n    }\n  }\n  while (mantissaLength >= 8) {\n    buffer[index++] = mantissa & 255;\n    mantissa /= 256;\n    mantissaLength -= 8;\n  }\n  exponent = exponent << mantissaLength | mantissa;\n  exponentLength += mantissaLength;\n  while (exponentLength > 0) {\n    buffer[index++] = exponent & 255;\n    exponent /= 256;\n    exponentLength -= 8;\n  }\n  buffer[--index] |= sign * 128;\n  return buffer;\n};\n\nvar unpack = function (buffer, mantissaLength) {\n  var bytes = buffer.length;\n  var exponentLength = bytes * 8 - mantissaLength - 1;\n  var eMax = (1 << exponentLength) - 1;\n  var eBias = eMax >> 1;\n  var nBits = exponentLength - 7;\n  var index = bytes - 1;\n  var sign = buffer[index--];\n  var exponent = sign & 127;\n  var mantissa;\n  sign >>= 7;\n  while (nBits > 0) {\n    exponent = exponent * 256 + buffer[index--];\n    nBits -= 8;\n  }\n  mantissa = exponent & (1 << -nBits) - 1;\n  exponent >>= -nBits;\n  nBits += mantissaLength;\n  while (nBits > 0) {\n    mantissa = mantissa * 256 + buffer[index--];\n    nBits -= 8;\n  }\n  if (exponent === 0) {\n    exponent = 1 - eBias;\n  } else if (exponent === eMax) {\n    return mantissa ? NaN : sign ? -Infinity : Infinity;\n  } else {\n    mantissa = mantissa + pow(2, mantissaLength);\n    exponent = exponent - eBias;\n  } return (sign ? -1 : 1) * mantissa * pow(2, exponent - mantissaLength);\n};\n\nmodule.exports = {\n  pack: pack,\n  unpack: unpack\n};\n","'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-native');\nvar FunctionName = require('../internals/function-name');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefineAll = require('../internals/redefine-all');\nvar fails = require('../internals/fails');\nvar anInstance = require('../internals/an-instance');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toLength = require('../internals/to-length');\nvar toIndex = require('../internals/to-index');\nvar IEEE754 = require('../internals/ieee754');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar arrayFill = require('../internals/array-fill');\nvar arraySlice = require('../internals/array-slice-simple');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar PROPER_FUNCTION_NAME = FunctionName.PROPER;\nvar CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;\nvar getInternalState = InternalStateModule.get;\nvar setInternalState = InternalStateModule.set;\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length';\nvar WRONG_INDEX = 'Wrong index';\nvar NativeArrayBuffer = global[ARRAY_BUFFER];\nvar $ArrayBuffer = NativeArrayBuffer;\nvar ArrayBufferPrototype = $ArrayBuffer && $ArrayBuffer[PROTOTYPE];\nvar $DataView = global[DATA_VIEW];\nvar DataViewPrototype = $DataView && $DataView[PROTOTYPE];\nvar ObjectPrototype = Object.prototype;\nvar Array = global.Array;\nvar RangeError = global.RangeError;\nvar fill = uncurryThis(arrayFill);\nvar reverse = uncurryThis([].reverse);\n\nvar packIEEE754 = IEEE754.pack;\nvar unpackIEEE754 = IEEE754.unpack;\n\nvar packInt8 = function (number) {\n  return [number & 0xFF];\n};\n\nvar packInt16 = function (number) {\n  return [number & 0xFF, number >> 8 & 0xFF];\n};\n\nvar packInt32 = function (number) {\n  return [number & 0xFF, number >> 8 & 0xFF, number >> 16 & 0xFF, number >> 24 & 0xFF];\n};\n\nvar unpackInt32 = function (buffer) {\n  return buffer[3] << 24 | buffer[2] << 16 | buffer[1] << 8 | buffer[0];\n};\n\nvar packFloat32 = function (number) {\n  return packIEEE754(number, 23, 4);\n};\n\nvar packFloat64 = function (number) {\n  return packIEEE754(number, 52, 8);\n};\n\nvar addGetter = function (Constructor, key) {\n  defineProperty(Constructor[PROTOTYPE], key, { get: function () { return getInternalState(this)[key]; } });\n};\n\nvar get = function (view, count, index, isLittleEndian) {\n  var intIndex = toIndex(index);\n  var store = getInternalState(view);\n  if (intIndex + count > store.byteLength) throw RangeError(WRONG_INDEX);\n  var bytes = getInternalState(store.buffer).bytes;\n  var start = intIndex + store.byteOffset;\n  var pack = arraySlice(bytes, start, start + count);\n  return isLittleEndian ? pack : reverse(pack);\n};\n\nvar set = function (view, count, index, conversion, value, isLittleEndian) {\n  var intIndex = toIndex(index);\n  var store = getInternalState(view);\n  if (intIndex + count > store.byteLength) throw RangeError(WRONG_INDEX);\n  var bytes = getInternalState(store.buffer).bytes;\n  var start = intIndex + store.byteOffset;\n  var pack = conversion(+value);\n  for (var i = 0; i < count; i++) bytes[start + i] = pack[isLittleEndian ? i : count - i - 1];\n};\n\nif (!NATIVE_ARRAY_BUFFER) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, ArrayBufferPrototype);\n    var byteLength = toIndex(length);\n    setInternalState(this, {\n      bytes: fill(Array(byteLength), 0),\n      byteLength: byteLength\n    });\n    if (!DESCRIPTORS) this.byteLength = byteLength;\n  };\n\n  ArrayBufferPrototype = $ArrayBuffer[PROTOTYPE];\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, DataViewPrototype);\n    anInstance(buffer, ArrayBufferPrototype);\n    var bufferLength = getInternalState(buffer).byteLength;\n    var offset = toIntegerOrInfinity(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);\n    setInternalState(this, {\n      buffer: buffer,\n      byteLength: byteLength,\n      byteOffset: offset\n    });\n    if (!DESCRIPTORS) {\n      this.buffer = buffer;\n      this.byteLength = byteLength;\n      this.byteOffset = offset;\n    }\n  };\n\n  DataViewPrototype = $DataView[PROTOTYPE];\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, 'byteLength');\n    addGetter($DataView, 'buffer');\n    addGetter($DataView, 'byteLength');\n    addGetter($DataView, 'byteOffset');\n  }\n\n  redefineAll(DataViewPrototype, {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : undefined);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments.length > 1 ? arguments[1] : undefined);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackInt32(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined)) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments.length > 1 ? arguments[1] : undefined), 23);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments.length > 1 ? arguments[1] : undefined), 52);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packInt8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packInt8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packInt16, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packInt32, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packFloat32, value, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packFloat64, value, arguments.length > 2 ? arguments[2] : undefined);\n    }\n  });\n} else {\n  var INCORRECT_ARRAY_BUFFER_NAME = PROPER_FUNCTION_NAME && NativeArrayBuffer.name !== ARRAY_BUFFER;\n  /* eslint-disable no-new -- required for testing */\n  if (!fails(function () {\n    NativeArrayBuffer(1);\n  }) || !fails(function () {\n    new NativeArrayBuffer(-1);\n  }) || fails(function () {\n    new NativeArrayBuffer();\n    new NativeArrayBuffer(1.5);\n    new NativeArrayBuffer(NaN);\n    return INCORRECT_ARRAY_BUFFER_NAME && !CONFIGURABLE_FUNCTION_NAME;\n  })) {\n  /* eslint-enable no-new -- required for testing */\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, ArrayBufferPrototype);\n      return new NativeArrayBuffer(toIndex(length));\n    };\n\n    $ArrayBuffer[PROTOTYPE] = ArrayBufferPrototype;\n\n    for (var keys = getOwnPropertyNames(NativeArrayBuffer), j = 0, key; keys.length > j;) {\n      if (!((key = keys[j++]) in $ArrayBuffer)) {\n        createNonEnumerableProperty($ArrayBuffer, key, NativeArrayBuffer[key]);\n      }\n    }\n\n    ArrayBufferPrototype.constructor = $ArrayBuffer;\n  } else if (INCORRECT_ARRAY_BUFFER_NAME && CONFIGURABLE_FUNCTION_NAME) {\n    createNonEnumerableProperty(NativeArrayBuffer, 'name', ARRAY_BUFFER);\n  }\n\n  // WebKit bug - the same parent prototype for typed arrays and data view\n  if (setPrototypeOf && getPrototypeOf(DataViewPrototype) !== ObjectPrototype) {\n    setPrototypeOf(DataViewPrototype, ObjectPrototype);\n  }\n\n  // iOS Safari 7.x bug\n  var testView = new $DataView(new $ArrayBuffer(2));\n  var $setInt8 = uncurryThis(DataViewPrototype.setInt8);\n  testView.setInt8(0, 2147483648);\n  testView.setInt8(1, 2147483649);\n  if (testView.getInt8(0) || !testView.getInt8(1)) redefineAll(DataViewPrototype, {\n    setInt8: function setInt8(byteOffset, value) {\n      $setInt8(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      $setInt8(this, byteOffset, value << 24 >> 24);\n    }\n  }, { unsafe: true });\n}\n\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\n\nmodule.exports = {\n  ArrayBuffer: $ArrayBuffer,\n  DataView: $DataView\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar arrayBufferModule = require('../internals/array-buffer');\nvar setSpecies = require('../internals/set-species');\n\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar ArrayBuffer = arrayBufferModule[ARRAY_BUFFER];\nvar NativeArrayBuffer = global[ARRAY_BUFFER];\n\n// `ArrayBuffer` constructor\n// https://tc39.es/ecma262/#sec-arraybuffer-constructor\n$({ global: true, forced: NativeArrayBuffer !== ArrayBuffer }, {\n  ArrayBuffer: ArrayBuffer\n});\n\nsetSpecies(ARRAY_BUFFER);\n","var global = require('../internals/global');\nvar isConstructor = require('../internals/is-constructor');\nvar tryToString = require('../internals/try-to-string');\n\nvar TypeError = global.TypeError;\n\n// `Assert: IsConstructor(argument) is true`\nmodule.exports = function (argument) {\n  if (isConstructor(argument)) return argument;\n  throw TypeError(tryToString(argument) + ' is not a constructor');\n};\n","var anObject = require('../internals/an-object');\nvar aConstructor = require('../internals/a-constructor');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aConstructor(S);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar ArrayBufferModule = require('../internals/array-buffer');\nvar anObject = require('../internals/an-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar speciesConstructor = require('../internals/species-constructor');\n\nvar ArrayBuffer = ArrayBufferModule.ArrayBuffer;\nvar DataView = ArrayBufferModule.DataView;\nvar DataViewPrototype = DataView.prototype;\nvar un$ArrayBufferSlice = uncurryThis(ArrayBuffer.prototype.slice);\nvar getUint8 = uncurryThis(DataViewPrototype.getUint8);\nvar setUint8 = uncurryThis(DataViewPrototype.setUint8);\n\nvar INCORRECT_SLICE = fails(function () {\n  return !new ArrayBuffer(2).slice(1, undefined).byteLength;\n});\n\n// `ArrayBuffer.prototype.slice` method\n// https://tc39.es/ecma262/#sec-arraybuffer.prototype.slice\n$({ target: 'ArrayBuffer', proto: true, unsafe: true, forced: INCORRECT_SLICE }, {\n  slice: function slice(start, end) {\n    if (un$ArrayBufferSlice && end === undefined) {\n      return un$ArrayBufferSlice(anObject(this), start); // FF fix\n    }\n    var length = anObject(this).byteLength;\n    var first = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    var result = new (speciesConstructor(this, ArrayBuffer))(toLength(fin - first));\n    var viewSource = new DataView(this);\n    var viewTarget = new DataView(result);\n    var index = 0;\n    while (first < fin) {\n      setUint8(viewTarget, index++, getUint8(viewSource, first++));\n    } return result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toObject = require('../internals/to-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar FORCED = fails(function () {\n  return new Date(NaN).toJSON() !== null\n    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;\n});\n\n// `Date.prototype.toJSON` method\n// https://tc39.es/ecma262/#sec-date.prototype.tojson\n$({ target: 'Date', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  toJSON: function toJSON(key) {\n    var O = toObject(this);\n    var pv = toPrimitive(O, 'number');\n    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();\n  }\n});\n","'use strict';\nvar global = require('../internals/global');\nvar anObject = require('../internals/an-object');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\n\nvar TypeError = global.TypeError;\n\n// `Date.prototype[@@toPrimitive](hint)` method implementation\n// https://tc39.es/ecma262/#sec-date.prototype-@@toprimitive\nmodule.exports = function (hint) {\n  anObject(this);\n  if (hint === 'string' || hint === 'default') hint = 'string';\n  else if (hint !== 'number') throw TypeError('Incorrect hint');\n  return ordinaryToPrimitive(this, hint);\n};\n","var hasOwn = require('../internals/has-own-property');\nvar redefine = require('../internals/redefine');\nvar dateToPrimitive = require('../internals/date-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\nvar DatePrototype = Date.prototype;\n\n// `Date.prototype[@@toPrimitive]` method\n// https://tc39.es/ecma262/#sec-date.prototype-@@toprimitive\nif (!hasOwn(DatePrototype, TO_PRIMITIVE)) {\n  redefine(DatePrototype, TO_PRIMITIVE, dateToPrimitive);\n}\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar definePropertyModule = require('../internals/object-define-property');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar HAS_INSTANCE = wellKnownSymbol('hasInstance');\nvar FunctionPrototype = Function.prototype;\n\n// `Function.prototype[@@hasInstance]` method\n// https://tc39.es/ecma262/#sec-function.prototype-@@hasinstance\nif (!(HAS_INSTANCE in FunctionPrototype)) {\n  definePropertyModule.f(FunctionPrototype, HAS_INSTANCE, { value: function (O) {\n    if (!isCallable(this) || !isObject(O)) return false;\n    var P = this.prototype;\n    if (!isObject(P)) return O instanceof this;\n    // for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:\n    while (O = getPrototypeOf(O)) if (P === O) return true;\n    return false;\n  } });\n}\n","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var global = require('../internals/global');\nvar setToStringTag = require('../internals/set-to-string-tag');\n\n// JSON[@@toStringTag] property\n// https://tc39.es/ecma262/#sec-json-@@tostringtag\nsetToStringTag(global.JSON, 'JSON', true);\n","var $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternalModule = require('../internals/object-get-own-property-names-external');\nvar isExtensible = require('../internals/object-is-extensible');\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar REQUIRED = false;\nvar METADATA = uid('meta');\nvar id = 0;\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + id++, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && REQUIRED && isExtensible(it) && !hasOwn(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar enable = function () {\n  meta.enable = function () { /* empty */ };\n  REQUIRED = true;\n  var getOwnPropertyNames = getOwnPropertyNamesModule.f;\n  var splice = uncurryThis([].splice);\n  var test = {};\n  test[METADATA] = 1;\n\n  // prevent exposing of metadata key\n  if (getOwnPropertyNames(test).length) {\n    getOwnPropertyNamesModule.f = function (it) {\n      var result = getOwnPropertyNames(it);\n      for (var i = 0, length = result.length; i < length; i++) {\n        if (result[i] === METADATA) {\n          splice(result, i, 1);\n          break;\n        }\n      } return result;\n    };\n\n    $({ target: 'Object', stat: true, forced: true }, {\n      getOwnPropertyNames: getOwnPropertyNamesExternalModule.f\n    });\n  }\n};\n\nvar meta = module.exports = {\n  enable: enable,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n","// FF26- bug: ArrayBuffers are non-extensible, but Object.isExtensible does not report it\nvar fails = require('../internals/fails');\n\nmodule.exports = fails(function () {\n  if (typeof ArrayBuffer == 'function') {\n    var buffer = new ArrayBuffer(8);\n    // eslint-disable-next-line es/no-object-isextensible, es/no-object-defineproperty -- safe\n    if (Object.isExtensible(buffer)) Object.defineProperty(buffer, 'a', { value: 8 });\n  }\n});\n","var fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar ARRAY_BUFFER_NON_EXTENSIBLE = require('../internals/array-buffer-non-extensible');\n\n// eslint-disable-next-line es/no-object-isextensible -- safe\nvar $isExtensible = Object.isExtensible;\nvar FAILS_ON_PRIMITIVES = fails(function () { $isExtensible(1); });\n\n// `Object.isExtensible` method\n// https://tc39.es/ecma262/#sec-object.isextensible\nmodule.exports = (FAILS_ON_PRIMITIVES || ARRAY_BUFFER_NON_EXTENSIBLE) ? function isExtensible(it) {\n  if (!isObject(it)) return false;\n  if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) == 'ArrayBuffer') return false;\n  return $isExtensible ? $isExtensible(it) : true;\n} : $isExtensible;\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-isextensible, es/no-object-preventextensions -- required for testing\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","var global = require('../internals/global');\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar TypeError = global.TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal', condition);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n","var isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar iterate = require('../internals/iterate');\nvar anInstance = require('../internals/an-instance');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nmodule.exports = function (CONSTRUCTOR_NAME, wrapper, common) {\n  var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;\n  var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var NativeConstructor = global[CONSTRUCTOR_NAME];\n  var NativePrototype = NativeConstructor && NativeConstructor.prototype;\n  var Constructor = NativeConstructor;\n  var exported = {};\n\n  var fixMethod = function (KEY) {\n    var uncurriedNativeMethod = uncurryThis(NativePrototype[KEY]);\n    redefine(NativePrototype, KEY,\n      KEY == 'add' ? function add(value) {\n        uncurriedNativeMethod(this, value === 0 ? 0 : value);\n        return this;\n      } : KEY == 'delete' ? function (key) {\n        return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : KEY == 'get' ? function get(key) {\n        return IS_WEAK && !isObject(key) ? undefined : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : KEY == 'has' ? function has(key) {\n        return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : function set(key, value) {\n        uncurriedNativeMethod(this, key === 0 ? 0 : key, value);\n        return this;\n      }\n    );\n  };\n\n  var REPLACE = isForced(\n    CONSTRUCTOR_NAME,\n    !isCallable(NativeConstructor) || !(IS_WEAK || NativePrototype.forEach && !fails(function () {\n      new NativeConstructor().entries().next();\n    }))\n  );\n\n  if (REPLACE) {\n    // create collection constructor\n    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);\n    InternalMetadataModule.enable();\n  } else if (isForced(CONSTRUCTOR_NAME, true)) {\n    var instance = new Constructor();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~ Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    // eslint-disable-next-line no-new -- required for testing\n    var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) { new NativeConstructor(iterable); });\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new NativeConstructor();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n\n    if (!ACCEPT_ITERABLES) {\n      Constructor = wrapper(function (dummy, iterable) {\n        anInstance(dummy, NativePrototype);\n        var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);\n        if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n        return that;\n      });\n      Constructor.prototype = NativePrototype;\n      NativePrototype.constructor = Constructor;\n    }\n\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n\n    // weak collections should not contains .clear method\n    if (IS_WEAK && NativePrototype.clear) delete NativePrototype.clear;\n  }\n\n  exported[CONSTRUCTOR_NAME] = Constructor;\n  $({ global: true, forced: Constructor != NativeConstructor }, exported);\n\n  setToStringTag(Constructor, CONSTRUCTOR_NAME);\n\n  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);\n\n  return Constructor;\n};\n","'use strict';\nvar defineProperty = require('../internals/object-define-property').f;\nvar create = require('../internals/object-create');\nvar redefineAll = require('../internals/redefine-all');\nvar bind = require('../internals/function-bind-context');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar defineIterator = require('../internals/define-iterator');\nvar setSpecies = require('../internals/set-species');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fastKey = require('../internals/internal-metadata').fastKey;\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var Constructor = wrapper(function (that, iterable) {\n      anInstance(that, Prototype);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        index: create(null),\n        first: undefined,\n        last: undefined,\n        size: 0\n      });\n      if (!DESCRIPTORS) that.size = 0;\n      if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var Prototype = Constructor.prototype;\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var entry = getEntry(that, key);\n      var previous, index;\n      // change existing entry\n      if (entry) {\n        entry.value = value;\n      // create new entry\n      } else {\n        state.last = entry = {\n          index: index = fastKey(key, true),\n          key: key,\n          value: value,\n          previous: previous = state.last,\n          next: undefined,\n          removed: false\n        };\n        if (!state.first) state.first = entry;\n        if (previous) previous.next = entry;\n        if (DESCRIPTORS) state.size++;\n        else that.size++;\n        // add to index\n        if (index !== 'F') state.index[index] = entry;\n      } return that;\n    };\n\n    var getEntry = function (that, key) {\n      var state = getInternalState(that);\n      // fast case\n      var index = fastKey(key);\n      var entry;\n      if (index !== 'F') return state.index[index];\n      // frozen object case\n      for (entry = state.first; entry; entry = entry.next) {\n        if (entry.key == key) return entry;\n      }\n    };\n\n    redefineAll(Prototype, {\n      // `{ Map, Set }.prototype.clear()` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.clear\n      // https://tc39.es/ecma262/#sec-set.prototype.clear\n      clear: function clear() {\n        var that = this;\n        var state = getInternalState(that);\n        var data = state.index;\n        var entry = state.first;\n        while (entry) {\n          entry.removed = true;\n          if (entry.previous) entry.previous = entry.previous.next = undefined;\n          delete data[entry.index];\n          entry = entry.next;\n        }\n        state.first = state.last = undefined;\n        if (DESCRIPTORS) state.size = 0;\n        else that.size = 0;\n      },\n      // `{ Map, Set }.prototype.delete(key)` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.delete\n      // https://tc39.es/ecma262/#sec-set.prototype.delete\n      'delete': function (key) {\n        var that = this;\n        var state = getInternalState(that);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.next;\n          var prev = entry.previous;\n          delete state.index[entry.index];\n          entry.removed = true;\n          if (prev) prev.next = next;\n          if (next) next.previous = prev;\n          if (state.first == entry) state.first = next;\n          if (state.last == entry) state.last = prev;\n          if (DESCRIPTORS) state.size--;\n          else that.size--;\n        } return !!entry;\n      },\n      // `{ Map, Set }.prototype.forEach(callbackfn, thisArg = undefined)` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.foreach\n      // https://tc39.es/ecma262/#sec-set.prototype.foreach\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        var state = getInternalState(this);\n        var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n        var entry;\n        while (entry = entry ? entry.next : state.first) {\n          boundFunction(entry.value, entry.key, this);\n          // revert to the last existing entry\n          while (entry && entry.removed) entry = entry.previous;\n        }\n      },\n      // `{ Map, Set}.prototype.has(key)` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.has\n      // https://tc39.es/ecma262/#sec-set.prototype.has\n      has: function has(key) {\n        return !!getEntry(this, key);\n      }\n    });\n\n    redefineAll(Prototype, IS_MAP ? {\n      // `Map.prototype.get(key)` method\n      // https://tc39.es/ecma262/#sec-map.prototype.get\n      get: function get(key) {\n        var entry = getEntry(this, key);\n        return entry && entry.value;\n      },\n      // `Map.prototype.set(key, value)` method\n      // https://tc39.es/ecma262/#sec-map.prototype.set\n      set: function set(key, value) {\n        return define(this, key === 0 ? 0 : key, value);\n      }\n    } : {\n      // `Set.prototype.add(value)` method\n      // https://tc39.es/ecma262/#sec-set.prototype.add\n      add: function add(value) {\n        return define(this, value = value === 0 ? 0 : value, value);\n      }\n    });\n    if (DESCRIPTORS) defineProperty(Prototype, 'size', {\n      get: function () {\n        return getInternalState(this).size;\n      }\n    });\n    return Constructor;\n  },\n  setStrong: function (Constructor, CONSTRUCTOR_NAME, IS_MAP) {\n    var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';\n    var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);\n    var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);\n    // `{ Map, Set }.prototype.{ keys, values, entries, @@iterator }()` methods\n    // https://tc39.es/ecma262/#sec-map.prototype.entries\n    // https://tc39.es/ecma262/#sec-map.prototype.keys\n    // https://tc39.es/ecma262/#sec-map.prototype.values\n    // https://tc39.es/ecma262/#sec-map.prototype-@@iterator\n    // https://tc39.es/ecma262/#sec-set.prototype.entries\n    // https://tc39.es/ecma262/#sec-set.prototype.keys\n    // https://tc39.es/ecma262/#sec-set.prototype.values\n    // https://tc39.es/ecma262/#sec-set.prototype-@@iterator\n    defineIterator(Constructor, CONSTRUCTOR_NAME, function (iterated, kind) {\n      setInternalState(this, {\n        type: ITERATOR_NAME,\n        target: iterated,\n        state: getInternalCollectionState(iterated),\n        kind: kind,\n        last: undefined\n      });\n    }, function () {\n      var state = getInternalIteratorState(this);\n      var kind = state.kind;\n      var entry = state.last;\n      // revert to the last existing entry\n      while (entry && entry.removed) entry = entry.previous;\n      // get next entry\n      if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {\n        // or finish the iteration\n        state.target = undefined;\n        return { value: undefined, done: true };\n      }\n      // return step by kind\n      if (kind == 'keys') return { value: entry.key, done: false };\n      if (kind == 'values') return { value: entry.value, done: false };\n      return { value: [entry.key, entry.value], done: false };\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // `{ Map, Set }.prototype[@@species]` accessors\n    // https://tc39.es/ecma262/#sec-get-map-@@species\n    // https://tc39.es/ecma262/#sec-get-set-@@species\n    setSpecies(CONSTRUCTOR_NAME);\n  }\n};\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Map` constructor\n// https://tc39.es/ecma262/#sec-map-objects\ncollection('Map', function (init) {\n  return function Map() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var log = Math.log;\n\n// `Math.log1p` method implementation\n// https://tc39.es/ecma262/#sec-math.log1p\n// eslint-disable-next-line es/no-math-log1p -- safe\nmodule.exports = Math.log1p || function log1p(x) {\n  return (x = +x) > -1e-8 && x < 1e-8 ? x - x * x / 2 : log(1 + x);\n};\n","var $ = require('../internals/export');\nvar log1p = require('../internals/math-log1p');\n\n// eslint-disable-next-line es/no-math-acosh -- required for testing\nvar $acosh = Math.acosh;\nvar log = Math.log;\nvar sqrt = Math.sqrt;\nvar LN2 = Math.LN2;\n\nvar FORCED = !$acosh\n  // V8 bug: https://code.google.com/p/v8/issues/detail?id=3509\n  || Math.floor($acosh(Number.MAX_VALUE)) != 710\n  // Tor Browser bug: Math.acosh(Infinity) -> NaN\n  || $acosh(Infinity) != Infinity;\n\n// `Math.acosh` method\n// https://tc39.es/ecma262/#sec-math.acosh\n$({ target: 'Math', stat: true, forced: FORCED }, {\n  acosh: function acosh(x) {\n    return (x = +x) < 1 ? NaN : x > 94906265.62425156\n      ? log(x) + LN2\n      : log1p(x - 1 + sqrt(x - 1) * sqrt(x + 1));\n  }\n});\n","var $ = require('../internals/export');\n\n// eslint-disable-next-line es/no-math-asinh -- required for testing\nvar $asinh = Math.asinh;\nvar log = Math.log;\nvar sqrt = Math.sqrt;\n\nfunction asinh(x) {\n  return !isFinite(x = +x) || x == 0 ? x : x < 0 ? -asinh(-x) : log(x + sqrt(x * x + 1));\n}\n\n// `Math.asinh` method\n// https://tc39.es/ecma262/#sec-math.asinh\n// Tor Browser bug: Math.asinh(0) -> -0\n$({ target: 'Math', stat: true, forced: !($asinh && 1 / $asinh(0) > 0) }, {\n  asinh: asinh\n});\n","var $ = require('../internals/export');\n\n// eslint-disable-next-line es/no-math-atanh -- required for testing\nvar $atanh = Math.atanh;\nvar log = Math.log;\n\n// `Math.atanh` method\n// https://tc39.es/ecma262/#sec-math.atanh\n// Tor Browser bug: Math.atanh(-0) -> 0\n$({ target: 'Math', stat: true, forced: !($atanh && 1 / $atanh(-0) < 0) }, {\n  atanh: function atanh(x) {\n    return (x = +x) == 0 ? x : log((1 + x) / (1 - x)) / 2;\n  }\n});\n","// `Math.sign` method implementation\n// https://tc39.es/ecma262/#sec-math.sign\n// eslint-disable-next-line es/no-math-sign -- safe\nmodule.exports = Math.sign || function sign(x) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return (x = +x) == 0 || x != x ? x : x < 0 ? -1 : 1;\n};\n","var $ = require('../internals/export');\nvar sign = require('../internals/math-sign');\n\nvar abs = Math.abs;\nvar pow = Math.pow;\n\n// `Math.cbrt` method\n// https://tc39.es/ecma262/#sec-math.cbrt\n$({ target: 'Math', stat: true }, {\n  cbrt: function cbrt(x) {\n    return sign(x = +x) * pow(abs(x), 1 / 3);\n  }\n});\n","var $ = require('../internals/export');\n\nvar floor = Math.floor;\nvar log = Math.log;\nvar LOG2E = Math.LOG2E;\n\n// `Math.clz32` method\n// https://tc39.es/ecma262/#sec-math.clz32\n$({ target: 'Math', stat: true }, {\n  clz32: function clz32(x) {\n    return (x >>>= 0) ? 31 - floor(log(x + 0.5) * LOG2E) : 32;\n  }\n});\n","// eslint-disable-next-line es/no-math-expm1 -- safe\nvar $expm1 = Math.expm1;\nvar exp = Math.exp;\n\n// `Math.expm1` method implementation\n// https://tc39.es/ecma262/#sec-math.expm1\nmodule.exports = (!$expm1\n  // Old FF bug\n  || $expm1(10) > 22025.465794806719 || $expm1(10) < 22025.4657948067165168\n  // Tor Browser bug\n  || $expm1(-2e-17) != -2e-17\n) ? function expm1(x) {\n  return (x = +x) == 0 ? x : x > -1e-6 && x < 1e-6 ? x + x * x / 2 : exp(x) - 1;\n} : $expm1;\n","var $ = require('../internals/export');\nvar expm1 = require('../internals/math-expm1');\n\n// eslint-disable-next-line es/no-math-cosh -- required for testing\nvar $cosh = Math.cosh;\nvar abs = Math.abs;\nvar E = Math.E;\n\n// `Math.cosh` method\n// https://tc39.es/ecma262/#sec-math.cosh\n$({ target: 'Math', stat: true, forced: !$cosh || $cosh(710) === Infinity }, {\n  cosh: function cosh(x) {\n    var t = expm1(abs(x) - 1) + 1;\n    return (t + 1 / (t * E * E)) * (E / 2);\n  }\n});\n","var $ = require('../internals/export');\nvar expm1 = require('../internals/math-expm1');\n\n// `Math.expm1` method\n// https://tc39.es/ecma262/#sec-math.expm1\n// eslint-disable-next-line es/no-math-expm1 -- required for testing\n$({ target: 'Math', stat: true, forced: expm1 != Math.expm1 }, { expm1: expm1 });\n","var sign = require('../internals/math-sign');\n\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar EPSILON = pow(2, -52);\nvar EPSILON32 = pow(2, -23);\nvar MAX32 = pow(2, 127) * (2 - EPSILON32);\nvar MIN32 = pow(2, -126);\n\nvar roundTiesToEven = function (n) {\n  return n + 1 / EPSILON - 1 / EPSILON;\n};\n\n// `Math.fround` method implementation\n// https://tc39.es/ecma262/#sec-math.fround\n// eslint-disable-next-line es/no-math-fround -- safe\nmodule.exports = Math.fround || function fround(x) {\n  var $abs = abs(x);\n  var $sign = sign(x);\n  var a, result;\n  if ($abs < MIN32) return $sign * roundTiesToEven($abs / MIN32 / EPSILON32) * MIN32 * EPSILON32;\n  a = (1 + EPSILON32 / EPSILON) * $abs;\n  result = a - (a - $abs);\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (result > MAX32 || result != result) return $sign * Infinity;\n  return $sign * result;\n};\n","var $ = require('../internals/export');\nvar fround = require('../internals/math-fround');\n\n// `Math.fround` method\n// https://tc39.es/ecma262/#sec-math.fround\n$({ target: 'Math', stat: true }, { fround: fround });\n","var $ = require('../internals/export');\n\n// eslint-disable-next-line es/no-math-hypot -- required for testing\nvar $hypot = Math.hypot;\nvar abs = Math.abs;\nvar sqrt = Math.sqrt;\n\n// Chrome 77 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=9546\nvar BUGGY = !!$hypot && $hypot(Infinity, NaN) !== Infinity;\n\n// `Math.hypot` method\n// https://tc39.es/ecma262/#sec-math.hypot\n$({ target: 'Math', stat: true, forced: BUGGY }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  hypot: function hypot(value1, value2) {\n    var sum = 0;\n    var i = 0;\n    var aLen = arguments.length;\n    var larg = 0;\n    var arg, div;\n    while (i < aLen) {\n      arg = abs(arguments[i++]);\n      if (larg < arg) {\n        div = larg / arg;\n        sum = sum * div * div + 1;\n        larg = arg;\n      } else if (arg > 0) {\n        div = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * sqrt(sum);\n  }\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-math-imul -- required for testing\nvar $imul = Math.imul;\n\nvar FORCED = fails(function () {\n  return $imul(0xFFFFFFFF, 5) != -5 || $imul.length != 2;\n});\n\n// `Math.imul` method\n// https://tc39.es/ecma262/#sec-math.imul\n// some WebKit versions fails with big numbers, some has wrong arity\n$({ target: 'Math', stat: true, forced: FORCED }, {\n  imul: function imul(x, y) {\n    var UINT16 = 0xFFFF;\n    var xn = +x;\n    var yn = +y;\n    var xl = UINT16 & xn;\n    var yl = UINT16 & yn;\n    return 0 | xl * yl + ((UINT16 & xn >>> 16) * yl + xl * (UINT16 & yn >>> 16) << 16 >>> 0);\n  }\n});\n","var log = Math.log;\nvar LOG10E = Math.LOG10E;\n\n// eslint-disable-next-line es/no-math-log10 -- safe\nmodule.exports = Math.log10 || function log10(x) {\n  return log(x) * LOG10E;\n};\n","var $ = require('../internals/export');\nvar log10 = require('../internals/math-log10');\n\n// `Math.log10` method\n// https://tc39.es/ecma262/#sec-math.log10\n$({ target: 'Math', stat: true }, {\n  log10: log10\n});\n","var $ = require('../internals/export');\nvar log1p = require('../internals/math-log1p');\n\n// `Math.log1p` method\n// https://tc39.es/ecma262/#sec-math.log1p\n$({ target: 'Math', stat: true }, { log1p: log1p });\n","var $ = require('../internals/export');\n\nvar log = Math.log;\nvar LN2 = Math.LN2;\n\n// `Math.log2` method\n// https://tc39.es/ecma262/#sec-math.log2\n$({ target: 'Math', stat: true }, {\n  log2: function log2(x) {\n    return log(x) / LN2;\n  }\n});\n","var $ = require('../internals/export');\nvar sign = require('../internals/math-sign');\n\n// `Math.sign` method\n// https://tc39.es/ecma262/#sec-math.sign\n$({ target: 'Math', stat: true }, {\n  sign: sign\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar expm1 = require('../internals/math-expm1');\n\nvar abs = Math.abs;\nvar exp = Math.exp;\nvar E = Math.E;\n\nvar FORCED = fails(function () {\n  // eslint-disable-next-line es/no-math-sinh -- required for testing\n  return Math.sinh(-2e-17) != -2e-17;\n});\n\n// `Math.sinh` method\n// https://tc39.es/ecma262/#sec-math.sinh\n// V8 near Chromium 38 has a problem with very small numbers\n$({ target: 'Math', stat: true, forced: FORCED }, {\n  sinh: function sinh(x) {\n    return abs(x = +x) < 1 ? (expm1(x) - expm1(-x)) / 2 : (exp(x - 1) - exp(-x - 1)) * (E / 2);\n  }\n});\n","var $ = require('../internals/export');\nvar expm1 = require('../internals/math-expm1');\n\nvar exp = Math.exp;\n\n// `Math.tanh` method\n// https://tc39.es/ecma262/#sec-math.tanh\n$({ target: 'Math', stat: true }, {\n  tanh: function tanh(x) {\n    var a = expm1(x = +x);\n    var b = expm1(-x);\n    return a == Infinity ? 1 : b == Infinity ? -1 : (a - b) / (exp(x) + exp(-x));\n  }\n});\n","var setToStringTag = require('../internals/set-to-string-tag');\n\n// Math[@@toStringTag] property\n// https://tc39.es/ecma262/#sec-math-@@tostringtag\nsetToStringTag(Math, 'Math', true);\n","var $ = require('../internals/export');\n\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n$({ target: 'Math', stat: true }, {\n  trunc: function trunc(it) {\n    return (it > 0 ? floor : ceil)(it);\n  }\n});\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar hasOwn = require('../internals/has-own-property');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar isSymbol = require('../internals/is-symbol');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar thisNumberValue = require('../internals/this-number-value');\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\nvar TypeError = global.TypeError;\nvar arraySlice = uncurryThis(''.slice);\nvar charCodeAt = uncurryThis(''.charCodeAt);\n\n// `ToNumeric` abstract operation\n// https://tc39.es/ecma262/#sec-tonumeric\nvar toNumeric = function (value) {\n  var primValue = toPrimitive(value, 'number');\n  return typeof primValue == 'bigint' ? primValue : toNumber(primValue);\n};\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, 'number');\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (isSymbol(it)) throw TypeError('Cannot convert a Symbol value to a number');\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = charCodeAt(it, 0);\n    if (first === 43 || first === 45) {\n      third = charCodeAt(it, 2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (charCodeAt(it, 1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = arraySlice(it, 2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = charCodeAt(digits, index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var n = arguments.length < 1 ? 0 : NativeNumber(toNumeric(value));\n    var dummy = this;\n    // check on 1..constructor(foo) case\n    return isPrototypeOf(NumberPrototype, dummy) && fails(function () { thisNumberValue(dummy); })\n      ? inheritIfRequired(Object(n), dummy, NumberWrapper) : n;\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (hasOwn(NativeNumber, key = keys[j]) && !hasOwn(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","var uncurryThis = require('../internals/function-uncurry-this');\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = uncurryThis(1.0.valueOf);\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar whitespaces = require('../internals/whitespaces');\n\nvar replace = uncurryThis(''.replace);\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = replace(string, ltrim, '');\n    if (TYPE & 2) string = replace(string, rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var $ = require('../internals/export');\n\n// `Number.EPSILON` constant\n// https://tc39.es/ecma262/#sec-number.epsilon\n$({ target: 'Number', stat: true }, {\n  EPSILON: Math.pow(2, -52)\n});\n","var global = require('../internals/global');\n\nvar globalIsFinite = global.isFinite;\n\n// `Number.isFinite` method\n// https://tc39.es/ecma262/#sec-number.isfinite\n// eslint-disable-next-line es/no-number-isfinite -- safe\nmodule.exports = Number.isFinite || function isFinite(it) {\n  return typeof it == 'number' && globalIsFinite(it);\n};\n","var $ = require('../internals/export');\nvar numberIsFinite = require('../internals/number-is-finite');\n\n// `Number.isFinite` method\n// https://tc39.es/ecma262/#sec-number.isfinite\n$({ target: 'Number', stat: true }, { isFinite: numberIsFinite });\n","var isObject = require('../internals/is-object');\n\nvar floor = Math.floor;\n\n// `IsIntegralNumber` abstract operation\n// https://tc39.es/ecma262/#sec-isintegralnumber\n// eslint-disable-next-line es/no-number-isinteger -- safe\nmodule.exports = Number.isInteger || function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n","var $ = require('../internals/export');\nvar isIntegralNumber = require('../internals/is-integral-number');\n\n// `Number.isInteger` method\n// https://tc39.es/ecma262/#sec-number.isinteger\n$({ target: 'Number', stat: true }, {\n  isInteger: isIntegralNumber\n});\n","var $ = require('../internals/export');\n\n// `Number.isNaN` method\n// https://tc39.es/ecma262/#sec-number.isnan\n$({ target: 'Number', stat: true }, {\n  isNaN: function isNaN(number) {\n    // eslint-disable-next-line no-self-compare -- NaN check\n    return number != number;\n  }\n});\n","var $ = require('../internals/export');\nvar isIntegralNumber = require('../internals/is-integral-number');\n\nvar abs = Math.abs;\n\n// `Number.isSafeInteger` method\n// https://tc39.es/ecma262/#sec-number.issafeinteger\n$({ target: 'Number', stat: true }, {\n  isSafeInteger: function isSafeInteger(number) {\n    return isIntegralNumber(number) && abs(number) <= 0x1FFFFFFFFFFFFF;\n  }\n});\n","var $ = require('../internals/export');\n\n// `Number.MAX_SAFE_INTEGER` constant\n// https://tc39.es/ecma262/#sec-number.max_safe_integer\n$({ target: 'Number', stat: true }, {\n  MAX_SAFE_INTEGER: 0x1FFFFFFFFFFFFF\n});\n","var $ = require('../internals/export');\n\n// `Number.MIN_SAFE_INTEGER` constant\n// https://tc39.es/ecma262/#sec-number.min_safe_integer\n$({ target: 'Number', stat: true }, {\n  MIN_SAFE_INTEGER: -0x1FFFFFFFFFFFFF\n});\n","var global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar trim = require('../internals/string-trim').trim;\nvar whitespaces = require('../internals/whitespaces');\n\nvar charAt = uncurryThis(''.charAt);\nvar n$ParseFloat = global.parseFloat;\nvar Symbol = global.Symbol;\nvar ITERATOR = Symbol && Symbol.iterator;\nvar FORCED = 1 / n$ParseFloat(whitespaces + '-0') !== -Infinity\n  // MS Edge 18- broken with boxed symbols\n  || (ITERATOR && !fails(function () { n$ParseFloat(Object(ITERATOR)); }));\n\n// `parseFloat` method\n// https://tc39.es/ecma262/#sec-parsefloat-string\nmodule.exports = FORCED ? function parseFloat(string) {\n  var trimmedString = trim(toString(string));\n  var result = n$ParseFloat(trimmedString);\n  return result === 0 && charAt(trimmedString, 0) == '-' ? -0 : result;\n} : n$ParseFloat;\n","var $ = require('../internals/export');\nvar parseFloat = require('../internals/number-parse-float');\n\n// `Number.parseFloat` method\n// https://tc39.es/ecma262/#sec-number.parseFloat\n// eslint-disable-next-line es/no-number-parsefloat -- required for testing\n$({ target: 'Number', stat: true, forced: Number.parseFloat != parseFloat }, {\n  parseFloat: parseFloat\n});\n","var global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar trim = require('../internals/string-trim').trim;\nvar whitespaces = require('../internals/whitespaces');\n\nvar $parseInt = global.parseInt;\nvar Symbol = global.Symbol;\nvar ITERATOR = Symbol && Symbol.iterator;\nvar hex = /^[+-]?0x/i;\nvar exec = uncurryThis(hex.exec);\nvar FORCED = $parseInt(whitespaces + '08') !== 8 || $parseInt(whitespaces + '0x16') !== 22\n  // MS Edge 18- broken with boxed symbols\n  || (ITERATOR && !fails(function () { $parseInt(Object(ITERATOR)); }));\n\n// `parseInt` method\n// https://tc39.es/ecma262/#sec-parseint-string-radix\nmodule.exports = FORCED ? function parseInt(string, radix) {\n  var S = trim(toString(string));\n  return $parseInt(S, (radix >>> 0) || (exec(hex, S) ? 16 : 10));\n} : $parseInt;\n","var $ = require('../internals/export');\nvar parseInt = require('../internals/number-parse-int');\n\n// `Number.parseInt` method\n// https://tc39.es/ecma262/#sec-number.parseint\n// eslint-disable-next-line es/no-number-parseint -- required for testing\n$({ target: 'Number', stat: true, forced: Number.parseInt != parseInt }, {\n  parseInt: parseInt\n});\n","'use strict';\nvar global = require('../internals/global');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar RangeError = global.RangeError;\n\n// `String.prototype.repeat` method implementation\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\nmodule.exports = function repeat(count) {\n  var str = toString(requireObjectCoercible(this));\n  var result = '';\n  var n = toIntegerOrInfinity(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar thisNumberValue = require('../internals/this-number-value');\nvar $repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar RangeError = global.RangeError;\nvar String = global.String;\nvar floor = Math.floor;\nvar repeat = uncurryThis($repeat);\nvar stringSlice = uncurryThis(''.slice);\nvar un$ToFixed = uncurryThis(1.0.toFixed);\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar multiply = function (data, n, c) {\n  var index = -1;\n  var c2 = c;\n  while (++index < 6) {\n    c2 += n * data[index];\n    data[index] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\n\nvar divide = function (data, n) {\n  var index = 6;\n  var c = 0;\n  while (--index >= 0) {\n    c += data[index];\n    data[index] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\n\nvar dataToString = function (data) {\n  var index = 6;\n  var s = '';\n  while (--index >= 0) {\n    if (s !== '' || index === 0 || data[index] !== 0) {\n      var t = String(data[index]);\n      s = s === '' ? t : s + repeat('0', 7 - t.length) + t;\n    }\n  } return s;\n};\n\nvar FORCED = fails(function () {\n  return un$ToFixed(0.00008, 3) !== '0.000' ||\n    un$ToFixed(0.9, 0) !== '1' ||\n    un$ToFixed(1.255, 2) !== '1.25' ||\n    un$ToFixed(1000000000000000128.0, 0) !== '1000000000000000128';\n}) || !fails(function () {\n  // V8 ~ Android 4.3-\n  un$ToFixed({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toIntegerOrInfinity(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    // TODO: ES2018 increased the maximum number of fraction digits to 100, need to improve the implementation\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(data, 0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(data, 1e7, 0);\n          j -= 7;\n        }\n        multiply(data, pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(data, 1 << 23);\n          j -= 23;\n        }\n        divide(data, 1 << j);\n        multiply(data, 1, 1);\n        divide(data, 2);\n        result = dataToString(data);\n      } else {\n        multiply(data, 0, z);\n        multiply(data, 1 << -e, 0);\n        result = dataToString(data) + repeat('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat('0', fractDigits - k) + result\n        : stringSlice(result, 0, k - fractDigits) + '.' + stringSlice(result, k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar call = require('../internals/function-call');\nvar fails = require('../internals/fails');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\n\n// eslint-disable-next-line es/no-object-assign -- safe\nvar $assign = Object.assign;\n// eslint-disable-next-line es/no-object-defineproperty -- required for testing\nvar defineProperty = Object.defineProperty;\nvar concat = uncurryThis([].concat);\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\nmodule.exports = !$assign || fails(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line es/no-symbol -- safe\n  var symbol = Symbol();\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return $assign({}, A)[symbol] != 7 || objectKeys($assign({}, B)).join('') != alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`\n  var T = toObject(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? concat(objectKeys(S), getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || call(propertyIsEnumerable, S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","var $ = require('../internals/export');\nvar assign = require('../internals/object-assign');\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\n// eslint-disable-next-line es/no-object-assign -- required for testing\n$({ target: 'Object', stat: true, forced: Object.assign !== assign }, {\n  assign: assign\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\n// Forced replacement object prototype accessors methods\nmodule.exports = IS_PURE || !fails(function () {\n  // This feature detection crashes old WebKit\n  // https://github.com/zloirock/core-js/issues/232\n  if (WEBKIT && WEBKIT < 535) return;\n  var key = Math.random();\n  // In FF throws only define methods\n  // eslint-disable-next-line no-undef, no-useless-call -- required for testing\n  __defineSetter__.call(null, key, function () { /* empty */ });\n  delete global[key];\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar FORCED = require('../internals/object-prototype-accessors-forced');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar definePropertyModule = require('../internals/object-define-property');\n\n// `Object.prototype.__defineGetter__` method\n// https://tc39.es/ecma262/#sec-object.prototype.__defineGetter__\nif (DESCRIPTORS) {\n  $({ target: 'Object', proto: true, forced: FORCED }, {\n    __defineGetter__: function __defineGetter__(P, getter) {\n      definePropertyModule.f(toObject(this), P, { get: aCallable(getter), enumerable: true, configurable: true });\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar FORCED = require('../internals/object-prototype-accessors-forced');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar definePropertyModule = require('../internals/object-define-property');\n\n// `Object.prototype.__defineSetter__` method\n// https://tc39.es/ecma262/#sec-object.prototype.__defineSetter__\nif (DESCRIPTORS) {\n  $({ target: 'Object', proto: true, forced: FORCED }, {\n    __defineSetter__: function __defineSetter__(P, setter) {\n      definePropertyModule.f(toObject(this), P, { set: aCallable(setter), enumerable: true, configurable: true });\n    }\n  });\n}\n","var DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\nvar propertyIsEnumerable = uncurryThis($propertyIsEnumerable);\nvar push = uncurryThis([].push);\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable(O, key)) {\n        push(result, TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.es/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.es/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","var $ = require('../internals/export');\nvar FREEZING = require('../internals/freezing');\nvar fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\nvar onFreeze = require('../internals/internal-metadata').onFreeze;\n\n// eslint-disable-next-line es/no-object-freeze -- safe\nvar $freeze = Object.freeze;\nvar FAILS_ON_PRIMITIVES = fails(function () { $freeze(1); });\n\n// `Object.freeze` method\n// https://tc39.es/ecma262/#sec-object.freeze\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !FREEZING }, {\n  freeze: function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(onFreeze(it)) : it;\n  }\n});\n","var $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar createProperty = require('../internals/create-property');\n\n// `Object.fromEntries` method\n// https://github.com/tc39/proposal-object-from-entries\n$({ target: 'Object', stat: true }, {\n  fromEntries: function fromEntries(iterable) {\n    var obj = {};\n    iterate(iterable, function (k, v) {\n      createProperty(obj, k, v);\n    }, { AS_ENTRIES: true });\n    return obj;\n  }\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names-external').f;\n\n// eslint-disable-next-line es/no-object-getownpropertynames -- required for testing\nvar FAILS_ON_PRIMITIVES = fails(function () { return !Object.getOwnPropertyNames(1); });\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  getOwnPropertyNames: getOwnPropertyNames\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toObject = require('../internals/to-object');\nvar nativeGetPrototypeOf = require('../internals/object-get-prototype-of');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetPrototypeOf(1); });\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(it) {\n    return nativeGetPrototypeOf(toObject(it));\n  }\n});\n\n","// `SameValue` abstract operation\n// https://tc39.es/ecma262/#sec-samevalue\n// eslint-disable-next-line es/no-object-is -- safe\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","var $ = require('../internals/export');\nvar is = require('../internals/same-value');\n\n// `Object.is` method\n// https://tc39.es/ecma262/#sec-object.is\n$({ target: 'Object', stat: true }, {\n  is: is\n});\n","var $ = require('../internals/export');\nvar $isExtensible = require('../internals/object-is-extensible');\n\n// `Object.isExtensible` method\n// https://tc39.es/ecma262/#sec-object.isextensible\n// eslint-disable-next-line es/no-object-isextensible -- safe\n$({ target: 'Object', stat: true, forced: Object.isExtensible !== $isExtensible }, {\n  isExtensible: $isExtensible\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar ARRAY_BUFFER_NON_EXTENSIBLE = require('../internals/array-buffer-non-extensible');\n\n// eslint-disable-next-line es/no-object-isfrozen -- safe\nvar $isFrozen = Object.isFrozen;\nvar FAILS_ON_PRIMITIVES = fails(function () { $isFrozen(1); });\n\n// `Object.isFrozen` method\n// https://tc39.es/ecma262/#sec-object.isfrozen\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES || ARRAY_BUFFER_NON_EXTENSIBLE }, {\n  isFrozen: function isFrozen(it) {\n    if (!isObject(it)) return true;\n    if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) == 'ArrayBuffer') return true;\n    return $isFrozen ? $isFrozen(it) : false;\n  }\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar ARRAY_BUFFER_NON_EXTENSIBLE = require('../internals/array-buffer-non-extensible');\n\n// eslint-disable-next-line es/no-object-issealed -- safe\nvar $isSealed = Object.isSealed;\nvar FAILS_ON_PRIMITIVES = fails(function () { $isSealed(1); });\n\n// `Object.isSealed` method\n// https://tc39.es/ecma262/#sec-object.issealed\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES || ARRAY_BUFFER_NON_EXTENSIBLE }, {\n  isSealed: function isSealed(it) {\n    if (!isObject(it)) return true;\n    if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) == 'ArrayBuffer') return true;\n    return $isSealed ? $isSealed(it) : false;\n  }\n});\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar FORCED = require('../internals/object-prototype-accessors-forced');\nvar toObject = require('../internals/to-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\n\n// `Object.prototype.__lookupGetter__` method\n// https://tc39.es/ecma262/#sec-object.prototype.__lookupGetter__\nif (DESCRIPTORS) {\n  $({ target: 'Object', proto: true, forced: FORCED }, {\n    __lookupGetter__: function __lookupGetter__(P) {\n      var O = toObject(this);\n      var key = toPropertyKey(P);\n      var desc;\n      do {\n        if (desc = getOwnPropertyDescriptor(O, key)) return desc.get;\n      } while (O = getPrototypeOf(O));\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar FORCED = require('../internals/object-prototype-accessors-forced');\nvar toObject = require('../internals/to-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\n\n// `Object.prototype.__lookupSetter__` method\n// https://tc39.es/ecma262/#sec-object.prototype.__lookupSetter__\nif (DESCRIPTORS) {\n  $({ target: 'Object', proto: true, forced: FORCED }, {\n    __lookupSetter__: function __lookupSetter__(P) {\n      var O = toObject(this);\n      var key = toPropertyKey(P);\n      var desc;\n      do {\n        if (desc = getOwnPropertyDescriptor(O, key)) return desc.set;\n      } while (O = getPrototypeOf(O));\n    }\n  });\n}\n","var $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar onFreeze = require('../internals/internal-metadata').onFreeze;\nvar FREEZING = require('../internals/freezing');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-preventextensions -- safe\nvar $preventExtensions = Object.preventExtensions;\nvar FAILS_ON_PRIMITIVES = fails(function () { $preventExtensions(1); });\n\n// `Object.preventExtensions` method\n// https://tc39.es/ecma262/#sec-object.preventextensions\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !FREEZING }, {\n  preventExtensions: function preventExtensions(it) {\n    return $preventExtensions && isObject(it) ? $preventExtensions(onFreeze(it)) : it;\n  }\n});\n","var $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar onFreeze = require('../internals/internal-metadata').onFreeze;\nvar FREEZING = require('../internals/freezing');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-seal -- safe\nvar $seal = Object.seal;\nvar FAILS_ON_PRIMITIVES = fails(function () { $seal(1); });\n\n// `Object.seal` method\n// https://tc39.es/ecma262/#sec-object.seal\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !FREEZING }, {\n  seal: function seal(it) {\n    return $seal && isObject(it) ? $seal(onFreeze(it)) : it;\n  }\n});\n","var $ = require('../internals/export');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n$({ target: 'Object', stat: true }, {\n  setPrototypeOf: setPrototypeOf\n});\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classof = require('../internals/classof');\n\n// `Object.prototype.toString` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nmodule.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {\n  return '[object ' + classof(this) + ']';\n};\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar redefine = require('../internals/redefine');\nvar toString = require('../internals/object-to-string');\n\n// `Object.prototype.toString` method\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nif (!TO_STRING_TAG_SUPPORT) {\n  redefine(Object.prototype, 'toString', toString, { unsafe: true });\n}\n","var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.es/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","var $ = require('../internals/export');\nvar $parseFloat = require('../internals/number-parse-float');\n\n// `parseFloat` method\n// https://tc39.es/ecma262/#sec-parsefloat-string\n$({ global: true, forced: parseFloat != $parseFloat }, {\n  parseFloat: $parseFloat\n});\n","var $ = require('../internals/export');\nvar $parseInt = require('../internals/number-parse-int');\n\n// `parseInt` method\n// https://tc39.es/ecma262/#sec-parseint-string-radix\n$({ global: true, forced: parseInt != $parseInt }, {\n  parseInt: $parseInt\n});\n","var global = require('../internals/global');\n\nmodule.exports = global.Promise;\n","var userAgent = require('../internals/engine-user-agent');\n\nmodule.exports = /(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent);\n","var global = require('../internals/global');\nvar apply = require('../internals/function-apply');\nvar bind = require('../internals/function-bind-context');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar fails = require('../internals/fails');\nvar html = require('../internals/html');\nvar arraySlice = require('../internals/array-slice');\nvar createElement = require('../internals/document-create-element');\nvar IS_IOS = require('../internals/engine-is-ios');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar set = global.setImmediate;\nvar clear = global.clearImmediate;\nvar process = global.process;\nvar Dispatch = global.Dispatch;\nvar Function = global.Function;\nvar MessageChannel = global.MessageChannel;\nvar String = global.String;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar location, defer, channel, port;\n\ntry {\n  // Deno throws a ReferenceError on `location` access without `--location` flag\n  location = global.location;\n} catch (error) { /* empty */ }\n\nvar run = function (id) {\n  if (hasOwn(queue, id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\n\nvar runner = function (id) {\n  return function () {\n    run(id);\n  };\n};\n\nvar listener = function (event) {\n  run(event.data);\n};\n\nvar post = function (id) {\n  // old engines have not location.origin\n  global.postMessage(String(id), location.protocol + '//' + location.host);\n};\n\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!set || !clear) {\n  set = function setImmediate(fn) {\n    var args = arraySlice(arguments, 1);\n    queue[++counter] = function () {\n      apply(isCallable(fn) ? fn : Function(fn), undefined, args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clear = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (IS_NODE) {\n    defer = function (id) {\n      process.nextTick(runner(id));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(runner(id));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  // except iOS - https://github.com/zloirock/core-js/issues/624\n  } else if (MessageChannel && !IS_IOS) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = bind(port.postMessage, port);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (\n    global.addEventListener &&\n    isCallable(global.postMessage) &&\n    !global.importScripts &&\n    location && location.protocol !== 'file:' &&\n    !fails(post)\n  ) {\n    defer = post;\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in createElement('script')) {\n    defer = function (id) {\n      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(runner(id), 0);\n    };\n  }\n}\n\nmodule.exports = {\n  set: set,\n  clear: clear\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar call = require('../internals/function-call');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar redefine = require('../internals/redefine');\nvar redefineAll = require('../internals/redefine-all');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar setSpecies = require('../internals/set-species');\nvar aCallable = require('../internals/a-callable');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar anInstance = require('../internals/an-instance');\nvar inspectSource = require('../internals/inspect-source');\nvar iterate = require('../internals/iterate');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar speciesConstructor = require('../internals/species-constructor');\nvar task = require('../internals/task').set;\nvar microtask = require('../internals/microtask');\nvar promiseResolve = require('../internals/promise-resolve');\nvar hostReportErrors = require('../internals/host-report-errors');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar Queue = require('../internals/queue');\nvar InternalStateModule = require('../internals/internal-state');\nvar isForced = require('../internals/is-forced');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_BROWSER = require('../internals/engine-is-browser');\nvar IS_NODE = require('../internals/engine-is-node');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\nvar PROMISE = 'Promise';\n\nvar getInternalState = InternalStateModule.getterFor(PROMISE);\nvar setInternalState = InternalStateModule.set;\nvar getInternalPromiseState = InternalStateModule.getterFor(PROMISE);\nvar NativePromisePrototype = NativePromise && NativePromise.prototype;\nvar PromiseConstructor = NativePromise;\nvar PromisePrototype = NativePromisePrototype;\nvar TypeError = global.TypeError;\nvar document = global.document;\nvar process = global.process;\nvar newPromiseCapability = newPromiseCapabilityModule.f;\nvar newGenericPromiseCapability = newPromiseCapability;\n\nvar DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);\nvar NATIVE_REJECTION_EVENT = isCallable(global.PromiseRejectionEvent);\nvar UNHANDLED_REJECTION = 'unhandledrejection';\nvar REJECTION_HANDLED = 'rejectionhandled';\nvar PENDING = 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\nvar HANDLED = 1;\nvar UNHANDLED = 2;\nvar SUBCLASSING = false;\n\nvar Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;\n\nvar FORCED = isForced(PROMISE, function () {\n  var PROMISE_CONSTRUCTOR_SOURCE = inspectSource(PromiseConstructor);\n  var GLOBAL_CORE_JS_PROMISE = PROMISE_CONSTRUCTOR_SOURCE !== String(PromiseConstructor);\n  // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n  // We can't detect it synchronously, so just check versions\n  if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION === 66) return true;\n  // We need Promise#finally in the pure version for preventing prototype pollution\n  if (IS_PURE && !PromisePrototype['finally']) return true;\n  // We can't use @@species feature detection in V8 since it causes\n  // deoptimization and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if (V8_VERSION >= 51 && /native code/.test(PROMISE_CONSTRUCTOR_SOURCE)) return false;\n  // Detect correctness of subclassing with @@species support\n  var promise = new PromiseConstructor(function (resolve) { resolve(1); });\n  var FakePromise = function (exec) {\n    exec(function () { /* empty */ }, function () { /* empty */ });\n  };\n  var constructor = promise.constructor = {};\n  constructor[SPECIES] = FakePromise;\n  SUBCLASSING = promise.then(function () { /* empty */ }) instanceof FakePromise;\n  if (!SUBCLASSING) return true;\n  // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n  return !GLOBAL_CORE_JS_PROMISE && IS_BROWSER && !NATIVE_REJECTION_EVENT;\n});\n\nvar INCORRECT_ITERATION = FORCED || !checkCorrectnessOfIteration(function (iterable) {\n  PromiseConstructor.all(iterable)['catch'](function () { /* empty */ });\n});\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && isCallable(then = it.then) ? then : false;\n};\n\nvar callReaction = function (reaction, state) {\n  var value = state.value;\n  var ok = state.state == FULFILLED;\n  var handler = ok ? reaction.ok : reaction.fail;\n  var resolve = reaction.resolve;\n  var reject = reaction.reject;\n  var domain = reaction.domain;\n  var result, then, exited;\n  try {\n    if (handler) {\n      if (!ok) {\n        if (state.rejection === UNHANDLED) onHandleUnhandled(state);\n        state.rejection = HANDLED;\n      }\n      if (handler === true) result = value;\n      else {\n        if (domain) domain.enter();\n        result = handler(value); // can throw\n        if (domain) {\n          domain.exit();\n          exited = true;\n        }\n      }\n      if (result === reaction.promise) {\n        reject(TypeError('Promise-chain cycle'));\n      } else if (then = isThenable(result)) {\n        call(then, result, resolve, reject);\n      } else resolve(result);\n    } else reject(value);\n  } catch (error) {\n    if (domain && !exited) domain.exit();\n    reject(error);\n  }\n};\n\nvar notify = function (state, isReject) {\n  if (state.notified) return;\n  state.notified = true;\n  microtask(function () {\n    var reactions = state.reactions;\n    var reaction;\n    while (reaction = reactions.get()) {\n      callReaction(reaction, state);\n    }\n    state.notified = false;\n    if (isReject && !state.rejection) onUnhandled(state);\n  });\n};\n\nvar dispatchEvent = function (name, promise, reason) {\n  var event, handler;\n  if (DISPATCH_EVENT) {\n    event = document.createEvent('Event');\n    event.promise = promise;\n    event.reason = reason;\n    event.initEvent(name, false, true);\n    global.dispatchEvent(event);\n  } else event = { promise: promise, reason: reason };\n  if (!NATIVE_REJECTION_EVENT && (handler = global['on' + name])) handler(event);\n  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);\n};\n\nvar onUnhandled = function (state) {\n  call(task, global, function () {\n    var promise = state.facade;\n    var value = state.value;\n    var IS_UNHANDLED = isUnhandled(state);\n    var result;\n    if (IS_UNHANDLED) {\n      result = perform(function () {\n        if (IS_NODE) {\n          process.emit('unhandledRejection', value, promise);\n        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;\n      if (result.error) throw result.value;\n    }\n  });\n};\n\nvar isUnhandled = function (state) {\n  return state.rejection !== HANDLED && !state.parent;\n};\n\nvar onHandleUnhandled = function (state) {\n  call(task, global, function () {\n    var promise = state.facade;\n    if (IS_NODE) {\n      process.emit('rejectionHandled', promise);\n    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);\n  });\n};\n\nvar bind = function (fn, state, unwrap) {\n  return function (value) {\n    fn(state, value, unwrap);\n  };\n};\n\nvar internalReject = function (state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  state.value = value;\n  state.state = REJECTED;\n  notify(state, true);\n};\n\nvar internalResolve = function (state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  try {\n    if (state.facade === value) throw TypeError(\"Promise can't be resolved itself\");\n    var then = isThenable(value);\n    if (then) {\n      microtask(function () {\n        var wrapper = { done: false };\n        try {\n          call(then, value,\n            bind(internalResolve, wrapper, state),\n            bind(internalReject, wrapper, state)\n          );\n        } catch (error) {\n          internalReject(wrapper, error, state);\n        }\n      });\n    } else {\n      state.value = value;\n      state.state = FULFILLED;\n      notify(state, false);\n    }\n  } catch (error) {\n    internalReject({ done: false }, error, state);\n  }\n};\n\n// constructor polyfill\nif (FORCED) {\n  // 25.4.3.1 Promise(executor)\n  PromiseConstructor = function Promise(executor) {\n    anInstance(this, PromisePrototype);\n    aCallable(executor);\n    call(Internal, this);\n    var state = getInternalState(this);\n    try {\n      executor(bind(internalResolve, state), bind(internalReject, state));\n    } catch (error) {\n      internalReject(state, error);\n    }\n  };\n  PromisePrototype = PromiseConstructor.prototype;\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  Internal = function Promise(executor) {\n    setInternalState(this, {\n      type: PROMISE,\n      done: false,\n      notified: false,\n      parent: false,\n      reactions: new Queue(),\n      rejection: false,\n      state: PENDING,\n      value: undefined\n    });\n  };\n  Internal.prototype = redefineAll(PromisePrototype, {\n    // `Promise.prototype.then` method\n    // https://tc39.es/ecma262/#sec-promise.prototype.then\n    // eslint-disable-next-line unicorn/no-thenable -- safe\n    then: function then(onFulfilled, onRejected) {\n      var state = getInternalPromiseState(this);\n      var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));\n      state.parent = true;\n      reaction.ok = isCallable(onFulfilled) ? onFulfilled : true;\n      reaction.fail = isCallable(onRejected) && onRejected;\n      reaction.domain = IS_NODE ? process.domain : undefined;\n      if (state.state == PENDING) state.reactions.add(reaction);\n      else microtask(function () {\n        callReaction(reaction, state);\n      });\n      return reaction.promise;\n    },\n    // `Promise.prototype.catch` method\n    // https://tc39.es/ecma262/#sec-promise.prototype.catch\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    var state = getInternalState(promise);\n    this.promise = promise;\n    this.resolve = bind(internalResolve, state);\n    this.reject = bind(internalReject, state);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === PromiseConstructor || C === PromiseWrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n\n  if (!IS_PURE && isCallable(NativePromise) && NativePromisePrototype !== Object.prototype) {\n    nativeThen = NativePromisePrototype.then;\n\n    if (!SUBCLASSING) {\n      // make `Promise#then` return a polyfilled `Promise` for native promise-based APIs\n      redefine(NativePromisePrototype, 'then', function then(onFulfilled, onRejected) {\n        var that = this;\n        return new PromiseConstructor(function (resolve, reject) {\n          call(nativeThen, that, resolve, reject);\n        }).then(onFulfilled, onRejected);\n      // https://github.com/zloirock/core-js/issues/640\n      }, { unsafe: true });\n\n      // makes sure that native promise-based APIs `Promise#catch` properly works with patched `Promise#then`\n      redefine(NativePromisePrototype, 'catch', PromisePrototype['catch'], { unsafe: true });\n    }\n\n    // make `.constructor === Promise` work for native promise-based APIs\n    try {\n      delete NativePromisePrototype.constructor;\n    } catch (error) { /* empty */ }\n\n    // make `instanceof Promise` work for native promise-based APIs\n    if (setPrototypeOf) {\n      setPrototypeOf(NativePromisePrototype, PromisePrototype);\n    }\n  }\n}\n\n$({ global: true, wrap: true, forced: FORCED }, {\n  Promise: PromiseConstructor\n});\n\nsetToStringTag(PromiseConstructor, PROMISE, false, true);\nsetSpecies(PROMISE);\n\nPromiseWrapper = getBuiltIn(PROMISE);\n\n// statics\n$({ target: PROMISE, stat: true, forced: FORCED }, {\n  // `Promise.reject` method\n  // https://tc39.es/ecma262/#sec-promise.reject\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    call(capability.reject, undefined, r);\n    return capability.promise;\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: IS_PURE || FORCED }, {\n  // `Promise.resolve` method\n  // https://tc39.es/ecma262/#sec-promise.resolve\n  resolve: function resolve(x) {\n    return promiseResolve(IS_PURE && this === PromiseWrapper ? PromiseConstructor : this, x);\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: INCORRECT_ITERATION }, {\n  // `Promise.all` method\n  // https://tc39.es/ecma262/#sec-promise.all\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aCallable(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        remaining++;\n        call($promiseResolve, C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  },\n  // `Promise.race` method\n  // https://tc39.es/ecma262/#sec-promise.race\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aCallable(C.resolve);\n      iterate(iterable, function (promise) {\n        call($promiseResolve, C, promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","var global = require('../internals/global');\nvar bind = require('../internals/function-bind-context');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar macrotask = require('../internals/task').set;\nvar IS_IOS = require('../internals/engine-is-ios');\nvar IS_IOS_PEBBLE = require('../internals/engine-is-ios-pebble');\nvar IS_WEBOS_WEBKIT = require('../internals/engine-is-webos-webkit');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar MutationObserver = global.MutationObserver || global.WebKitMutationObserver;\nvar document = global.document;\nvar process = global.process;\nvar Promise = global.Promise;\n// Node.js 11 shows ExperimentalWarning on getting `queueMicrotask`\nvar queueMicrotaskDescriptor = getOwnPropertyDescriptor(global, 'queueMicrotask');\nvar queueMicrotask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;\n\nvar flush, head, last, notify, toggle, node, promise, then;\n\n// modern engines have queueMicrotask method\nif (!queueMicrotask) {\n  flush = function () {\n    var parent, fn;\n    if (IS_NODE && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (error) {\n        if (head) notify();\n        else last = undefined;\n        throw error;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339\n  // also except WebOS Webkit https://github.com/zloirock/core-js/issues/898\n  if (!IS_IOS && !IS_NODE && !IS_WEBOS_WEBKIT && MutationObserver && document) {\n    toggle = true;\n    node = document.createTextNode('');\n    new MutationObserver(flush).observe(node, { characterData: true });\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (!IS_IOS_PEBBLE && Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    promise = Promise.resolve(undefined);\n    // workaround of WebKit ~ iOS Safari 10.1 bug\n    promise.constructor = Promise;\n    then = bind(promise.then, promise);\n    notify = function () {\n      then(flush);\n    };\n  // Node.js without promises\n  } else if (IS_NODE) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    // strange IE + webpack dev server bug - use .bind(global)\n    macrotask = bind(macrotask, global);\n    notify = function () {\n      macrotask(flush);\n    };\n  }\n}\n\nmodule.exports = queueMicrotask || function (fn) {\n  var task = { fn: fn, next: undefined };\n  if (last) last.next = task;\n  if (!head) {\n    head = task;\n    notify();\n  } last = task;\n};\n","var userAgent = require('../internals/engine-user-agent');\nvar global = require('../internals/global');\n\nmodule.exports = /ipad|iphone|ipod/i.test(userAgent) && global.Pebble !== undefined;\n","var userAgent = require('../internals/engine-user-agent');\n\nmodule.exports = /web0s(?!.*chrome)/i.test(userAgent);\n","'use strict';\nvar aCallable = require('../internals/a-callable');\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aCallable(resolve);\n  this.reject = aCallable(reject);\n};\n\n// `NewPromiseCapability` abstract operation\n// https://tc39.es/ecma262/#sec-newpromisecapability\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","var anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar newPromiseCapability = require('../internals/new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var global = require('../internals/global');\n\nmodule.exports = function (a, b) {\n  var console = global.console;\n  if (console && console.error) {\n    arguments.length == 1 ? console.error(a) : console.error(a, b);\n  }\n};\n","module.exports = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n","var Queue = function () {\n  this.head = null;\n  this.tail = null;\n};\n\nQueue.prototype = {\n  add: function (item) {\n    var entry = { item: item, next: null };\n    if (this.head) this.tail.next = entry;\n    else this.head = entry;\n    this.tail = entry;\n  },\n  get: function () {\n    var entry = this.head;\n    if (entry) {\n      this.head = entry.next;\n      if (this.tail === entry) this.tail = null;\n      return entry.item;\n    }\n  }\n};\n\nmodule.exports = Queue;\n","module.exports = typeof window == 'object';\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar fails = require('../internals/fails');\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar speciesConstructor = require('../internals/species-constructor');\nvar promiseResolve = require('../internals/promise-resolve');\nvar redefine = require('../internals/redefine');\n\n// Safari bug https://bugs.webkit.org/show_bug.cgi?id=200829\nvar NON_GENERIC = !!NativePromise && fails(function () {\n  // eslint-disable-next-line unicorn/no-thenable -- required for testing\n  NativePromise.prototype['finally'].call({ then: function () { /* empty */ } }, function () { /* empty */ });\n});\n\n// `Promise.prototype.finally` method\n// https://tc39.es/ecma262/#sec-promise.prototype.finally\n$({ target: 'Promise', proto: true, real: true, forced: NON_GENERIC }, {\n  'finally': function (onFinally) {\n    var C = speciesConstructor(this, getBuiltIn('Promise'));\n    var isFunction = isCallable(onFinally);\n    return this.then(\n      isFunction ? function (x) {\n        return promiseResolve(C, onFinally()).then(function () { return x; });\n      } : onFinally,\n      isFunction ? function (e) {\n        return promiseResolve(C, onFinally()).then(function () { throw e; });\n      } : onFinally\n    );\n  }\n});\n\n// makes sure that native promise-based APIs `Promise#finally` properly works with patched `Promise#then`\nif (!IS_PURE && isCallable(NativePromise)) {\n  var method = getBuiltIn('Promise').prototype['finally'];\n  if (NativePromise.prototype['finally'] !== method) {\n    redefine(NativePromise.prototype, 'finally', method, { unsafe: true });\n  }\n}\n","var $ = require('../internals/export');\nvar functionApply = require('../internals/function-apply');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\n\n// MS Edge argumentsList argument is optional\nvar OPTIONAL_ARGUMENTS_LIST = !fails(function () {\n  // eslint-disable-next-line es/no-reflect -- required for testing\n  Reflect.apply(function () { /* empty */ });\n});\n\n// `Reflect.apply` method\n// https://tc39.es/ecma262/#sec-reflect.apply\n$({ target: 'Reflect', stat: true, forced: OPTIONAL_ARGUMENTS_LIST }, {\n  apply: function apply(target, thisArgument, argumentsList) {\n    return functionApply(aCallable(target), thisArgument, anObject(argumentsList));\n  }\n});\n","'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar arraySlice = require('../internals/array-slice');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar Function = global.Function;\nvar concat = uncurryThis([].concat);\nvar join = uncurryThis([].join);\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!hasOwn(factories, argsLength)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    factories[argsLength] = Function('C,a', 'return new C(' + join(list, ',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.es/ecma262/#sec-function.prototype.bind\nmodule.exports = NATIVE_BIND ? Function.bind : function bind(that /* , ...args */) {\n  var F = aCallable(this);\n  var Prototype = F.prototype;\n  var partArgs = arraySlice(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = concat(partArgs, arraySlice(arguments));\n    return this instanceof boundFunction ? construct(F, args.length, args) : F.apply(that, args);\n  };\n  if (isObject(Prototype)) boundFunction.prototype = Prototype;\n  return boundFunction;\n};\n","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar bind = require('../internals/function-bind');\nvar aConstructor = require('../internals/a-constructor');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar fails = require('../internals/fails');\n\nvar nativeConstruct = getBuiltIn('Reflect', 'construct');\nvar ObjectPrototype = Object.prototype;\nvar push = [].push;\n\n// `Reflect.construct` method\n// https://tc39.es/ecma262/#sec-reflect.construct\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\n\nvar ARGS_BUG = !fails(function () {\n  nativeConstruct(function () { /* empty */ });\n});\n\nvar FORCED = NEW_TARGET_BUG || ARGS_BUG;\n\n$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {\n  construct: function construct(Target, args /* , newTarget */) {\n    aConstructor(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aConstructor(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      apply(push, $args, args);\n      return new (apply(bind, Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : ObjectPrototype);\n    var result = apply(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar fails = require('../internals/fails');\n\n// MS Edge has broken Reflect.defineProperty - throwing instead of returning false\nvar ERROR_INSTEAD_OF_FALSE = fails(function () {\n  // eslint-disable-next-line es/no-reflect -- required for testing\n  Reflect.defineProperty(definePropertyModule.f({}, 1, { value: 1 }), 1, { value: 2 });\n});\n\n// `Reflect.defineProperty` method\n// https://tc39.es/ecma262/#sec-reflect.defineproperty\n$({ target: 'Reflect', stat: true, forced: ERROR_INSTEAD_OF_FALSE, sham: !DESCRIPTORS }, {\n  defineProperty: function defineProperty(target, propertyKey, attributes) {\n    anObject(target);\n    var key = toPropertyKey(propertyKey);\n    anObject(attributes);\n    try {\n      definePropertyModule.f(target, key, attributes);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n});\n","var $ = require('../internals/export');\nvar anObject = require('../internals/an-object');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\n\n// `Reflect.deleteProperty` method\n// https://tc39.es/ecma262/#sec-reflect.deleteproperty\n$({ target: 'Reflect', stat: true }, {\n  deleteProperty: function deleteProperty(target, propertyKey) {\n    var descriptor = getOwnPropertyDescriptor(anObject(target), propertyKey);\n    return descriptor && !descriptor.configurable ? false : delete target[propertyKey];\n  }\n});\n","var hasOwn = require('../internals/has-own-property');\n\nmodule.exports = function (descriptor) {\n  return descriptor !== undefined && (hasOwn(descriptor, 'value') || hasOwn(descriptor, 'writable'));\n};\n","var $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar anObject = require('../internals/an-object');\nvar isDataDescriptor = require('../internals/is-data-descriptor');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\n\n// `Reflect.get` method\n// https://tc39.es/ecma262/#sec-reflect.get\nfunction get(target, propertyKey /* , receiver */) {\n  var receiver = arguments.length < 3 ? target : arguments[2];\n  var descriptor, prototype;\n  if (anObject(target) === receiver) return target[propertyKey];\n  descriptor = getOwnPropertyDescriptorModule.f(target, propertyKey);\n  if (descriptor) return isDataDescriptor(descriptor)\n    ? descriptor.value\n    : descriptor.get === undefined ? undefined : call(descriptor.get, receiver);\n  if (isObject(prototype = getPrototypeOf(target))) return get(prototype, propertyKey, receiver);\n}\n\n$({ target: 'Reflect', stat: true }, {\n  get: get\n});\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar anObject = require('../internals/an-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\n\n// `Reflect.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-reflect.getownpropertydescriptor\n$({ target: 'Reflect', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, propertyKey) {\n    return getOwnPropertyDescriptorModule.f(anObject(target), propertyKey);\n  }\n});\n","var $ = require('../internals/export');\nvar anObject = require('../internals/an-object');\nvar objectGetPrototypeOf = require('../internals/object-get-prototype-of');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\n// `Reflect.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-reflect.getprototypeof\n$({ target: 'Reflect', stat: true, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(target) {\n    return objectGetPrototypeOf(anObject(target));\n  }\n});\n","var $ = require('../internals/export');\n\n// `Reflect.has` method\n// https://tc39.es/ecma262/#sec-reflect.has\n$({ target: 'Reflect', stat: true }, {\n  has: function has(target, propertyKey) {\n    return propertyKey in target;\n  }\n});\n","var $ = require('../internals/export');\nvar anObject = require('../internals/an-object');\nvar $isExtensible = require('../internals/object-is-extensible');\n\n// `Reflect.isExtensible` method\n// https://tc39.es/ecma262/#sec-reflect.isextensible\n$({ target: 'Reflect', stat: true }, {\n  isExtensible: function isExtensible(target) {\n    anObject(target);\n    return $isExtensible(target);\n  }\n});\n","var $ = require('../internals/export');\nvar ownKeys = require('../internals/own-keys');\n\n// `Reflect.ownKeys` method\n// https://tc39.es/ecma262/#sec-reflect.ownkeys\n$({ target: 'Reflect', stat: true }, {\n  ownKeys: ownKeys\n});\n","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar anObject = require('../internals/an-object');\nvar FREEZING = require('../internals/freezing');\n\n// `Reflect.preventExtensions` method\n// https://tc39.es/ecma262/#sec-reflect.preventextensions\n$({ target: 'Reflect', stat: true, sham: !FREEZING }, {\n  preventExtensions: function preventExtensions(target) {\n    anObject(target);\n    try {\n      var objectPreventExtensions = getBuiltIn('Object', 'preventExtensions');\n      if (objectPreventExtensions) objectPreventExtensions(target);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n});\n","var $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar isDataDescriptor = require('../internals/is-data-descriptor');\nvar fails = require('../internals/fails');\nvar definePropertyModule = require('../internals/object-define-property');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\n// `Reflect.set` method\n// https://tc39.es/ecma262/#sec-reflect.set\nfunction set(target, propertyKey, V /* , receiver */) {\n  var receiver = arguments.length < 4 ? target : arguments[3];\n  var ownDescriptor = getOwnPropertyDescriptorModule.f(anObject(target), propertyKey);\n  var existingDescriptor, prototype, setter;\n  if (!ownDescriptor) {\n    if (isObject(prototype = getPrototypeOf(target))) {\n      return set(prototype, propertyKey, V, receiver);\n    }\n    ownDescriptor = createPropertyDescriptor(0);\n  }\n  if (isDataDescriptor(ownDescriptor)) {\n    if (ownDescriptor.writable === false || !isObject(receiver)) return false;\n    if (existingDescriptor = getOwnPropertyDescriptorModule.f(receiver, propertyKey)) {\n      if (existingDescriptor.get || existingDescriptor.set || existingDescriptor.writable === false) return false;\n      existingDescriptor.value = V;\n      definePropertyModule.f(receiver, propertyKey, existingDescriptor);\n    } else definePropertyModule.f(receiver, propertyKey, createPropertyDescriptor(0, V));\n  } else {\n    setter = ownDescriptor.set;\n    if (setter === undefined) return false;\n    call(setter, receiver, V);\n  } return true;\n}\n\n// MS Edge 17-18 Reflect.set allows setting the property to object\n// with non-writable property on the prototype\nvar MS_EDGE_BUG = fails(function () {\n  var Constructor = function () { /* empty */ };\n  var object = definePropertyModule.f(new Constructor(), 'a', { configurable: true });\n  // eslint-disable-next-line es/no-reflect -- required for testing\n  return Reflect.set(Constructor.prototype, 'a', 1, object) !== false;\n});\n\n$({ target: 'Reflect', stat: true, forced: MS_EDGE_BUG }, {\n  set: set\n});\n","var $ = require('../internals/export');\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\nvar objectSetPrototypeOf = require('../internals/object-set-prototype-of');\n\n// `Reflect.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-reflect.setprototypeof\nif (objectSetPrototypeOf) $({ target: 'Reflect', stat: true }, {\n  setPrototypeOf: function setPrototypeOf(target, proto) {\n    anObject(target);\n    aPossiblePrototype(proto);\n    try {\n      objectSetPrototypeOf(target, proto);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isForced = require('../internals/is-forced');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar isRegExp = require('../internals/is-regexp');\nvar toString = require('../internals/to-string');\nvar regExpFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar hasOwn = require('../internals/has-own-property');\nvar enforceInternalState = require('../internals/internal-state').enforce;\nvar setSpecies = require('../internals/set-species');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar UNSUPPORTED_DOT_ALL = require('../internals/regexp-unsupported-dot-all');\nvar UNSUPPORTED_NCG = require('../internals/regexp-unsupported-ncg');\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = global.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar SyntaxError = global.SyntaxError;\nvar getFlags = uncurryThis(regExpFlags);\nvar exec = uncurryThis(RegExpPrototype.exec);\nvar charAt = uncurryThis(''.charAt);\nvar replace = uncurryThis(''.replace);\nvar stringIndexOf = uncurryThis(''.indexOf);\nvar stringSlice = uncurryThis(''.slice);\n// TODO: Use only propper RegExpIdentifierName\nvar IS_NCG = /^\\?<[^\\s\\d!#%&*+<=>@^][^\\s!#%&*+<=>@^]*>/;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar MISSED_STICKY = stickyHelpers.MISSED_STICKY;\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\n\nvar BASE_FORCED = DESCRIPTORS &&\n  (!CORRECT_NEW || MISSED_STICKY || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG || fails(function () {\n    re2[MATCH] = false;\n    // RegExp constructor can alter flags and IsRegExp works correct with @@match\n    return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';\n  }));\n\nvar handleDotAll = function (string) {\n  var length = string.length;\n  var index = 0;\n  var result = '';\n  var brackets = false;\n  var chr;\n  for (; index <= length; index++) {\n    chr = charAt(string, index);\n    if (chr === '\\\\') {\n      result += chr + charAt(string, ++index);\n      continue;\n    }\n    if (!brackets && chr === '.') {\n      result += '[\\\\s\\\\S]';\n    } else {\n      if (chr === '[') {\n        brackets = true;\n      } else if (chr === ']') {\n        brackets = false;\n      } result += chr;\n    }\n  } return result;\n};\n\nvar handleNCG = function (string) {\n  var length = string.length;\n  var index = 0;\n  var result = '';\n  var named = [];\n  var names = {};\n  var brackets = false;\n  var ncg = false;\n  var groupid = 0;\n  var groupname = '';\n  var chr;\n  for (; index <= length; index++) {\n    chr = charAt(string, index);\n    if (chr === '\\\\') {\n      chr = chr + charAt(string, ++index);\n    } else if (chr === ']') {\n      brackets = false;\n    } else if (!brackets) switch (true) {\n      case chr === '[':\n        brackets = true;\n        break;\n      case chr === '(':\n        if (exec(IS_NCG, stringSlice(string, index + 1))) {\n          index += 2;\n          ncg = true;\n        }\n        result += chr;\n        groupid++;\n        continue;\n      case chr === '>' && ncg:\n        if (groupname === '' || hasOwn(names, groupname)) {\n          throw new SyntaxError('Invalid capture group name');\n        }\n        names[groupname] = true;\n        named[named.length] = [groupname, groupid];\n        ncg = false;\n        groupname = '';\n        continue;\n    }\n    if (ncg) groupname += chr;\n    else result += chr;\n  } return [result, named];\n};\n\n// `RegExp` constructor\n// https://tc39.es/ecma262/#sec-regexp-constructor\nif (isForced('RegExp', BASE_FORCED)) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = isPrototypeOf(RegExpPrototype, this);\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    var groups = [];\n    var rawPattern = pattern;\n    var rawFlags, dotAll, sticky, handled, result, state;\n\n    if (!thisIsRegExp && patternIsRegExp && flagsAreUndefined && pattern.constructor === RegExpWrapper) {\n      return pattern;\n    }\n\n    if (patternIsRegExp || isPrototypeOf(RegExpPrototype, pattern)) {\n      pattern = pattern.source;\n      if (flagsAreUndefined) flags = 'flags' in rawPattern ? rawPattern.flags : getFlags(rawPattern);\n    }\n\n    pattern = pattern === undefined ? '' : toString(pattern);\n    flags = flags === undefined ? '' : toString(flags);\n    rawPattern = pattern;\n\n    if (UNSUPPORTED_DOT_ALL && 'dotAll' in re1) {\n      dotAll = !!flags && stringIndexOf(flags, 's') > -1;\n      if (dotAll) flags = replace(flags, /s/g, '');\n    }\n\n    rawFlags = flags;\n\n    if (MISSED_STICKY && 'sticky' in re1) {\n      sticky = !!flags && stringIndexOf(flags, 'y') > -1;\n      if (sticky && UNSUPPORTED_Y) flags = replace(flags, /y/g, '');\n    }\n\n    if (UNSUPPORTED_NCG) {\n      handled = handleNCG(pattern);\n      pattern = handled[0];\n      groups = handled[1];\n    }\n\n    result = inheritIfRequired(NativeRegExp(pattern, flags), thisIsRegExp ? this : RegExpPrototype, RegExpWrapper);\n\n    if (dotAll || sticky || groups.length) {\n      state = enforceInternalState(result);\n      if (dotAll) {\n        state.dotAll = true;\n        state.raw = RegExpWrapper(handleDotAll(pattern), rawFlags);\n      }\n      if (sticky) state.sticky = true;\n      if (groups.length) state.groups = groups;\n    }\n\n    if (pattern !== rawPattern) try {\n      // fails in old engines, but we have no alternatives for unsupported regex syntax\n      createNonEnumerableProperty(result, 'source', rawPattern === '' ? '(?:)' : rawPattern);\n    } catch (error) { /* empty */ }\n\n    return result;\n  };\n\n  var proxy = function (key) {\n    key in RegExpWrapper || defineProperty(RegExpWrapper, key, {\n      configurable: true,\n      get: function () { return NativeRegExp[key]; },\n      set: function (it) { NativeRegExp[key] = it; }\n    });\n  };\n\n  for (var keys = getOwnPropertyNames(NativeRegExp), index = 0; keys.length > index;) {\n    proxy(keys[index++]);\n  }\n\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  redefine(global, 'RegExp', RegExpWrapper);\n}\n\n// https://tc39.es/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.es/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","var fails = require('../internals/fails');\nvar global = require('../internals/global');\n\n// babel-minify and Closure Compiler transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError\nvar $RegExp = global.RegExp;\n\nvar UNSUPPORTED_Y = fails(function () {\n  var re = $RegExp('a', 'y');\n  re.lastIndex = 2;\n  return re.exec('abcd') != null;\n});\n\n// UC Browser bug\n// https://github.com/zloirock/core-js/issues/1008\nvar MISSED_STICKY = UNSUPPORTED_Y || fails(function () {\n  return !$RegExp('a', 'y').sticky;\n});\n\nvar BROKEN_CARET = UNSUPPORTED_Y || fails(function () {\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687\n  var re = $RegExp('^r', 'gy');\n  re.lastIndex = 2;\n  return re.exec('str') != null;\n});\n\nmodule.exports = {\n  BROKEN_CARET: BROKEN_CARET,\n  MISSED_STICKY: MISSED_STICKY,\n  UNSUPPORTED_Y: UNSUPPORTED_Y\n};\n","var fails = require('../internals/fails');\nvar global = require('../internals/global');\n\n// babel-minify and Closure Compiler transpiles RegExp('.', 's') -> /./s and it causes SyntaxError\nvar $RegExp = global.RegExp;\n\nmodule.exports = fails(function () {\n  var re = $RegExp('.', 's');\n  return !(re.dotAll && re.exec('\\n') && re.flags === 's');\n});\n","var fails = require('../internals/fails');\nvar global = require('../internals/global');\n\n// babel-minify and Closure Compiler transpiles RegExp('(?<a>b)', 'g') -> /(?<a>b)/g and it causes SyntaxError\nvar $RegExp = global.RegExp;\n\nmodule.exports = fails(function () {\n  var re = $RegExp('(?<a>b)', 'g');\n  return re.exec('b').groups.a !== 'b' ||\n    'b'.replace(re, '$<a>c') !== 'bc';\n});\n","'use strict';\n/* eslint-disable regexp/no-empty-capturing-group, regexp/no-empty-group, regexp/no-lazy-ends -- testing */\n/* eslint-disable regexp/no-useless-quantifier -- testing */\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar regexpFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar shared = require('../internals/shared');\nvar create = require('../internals/object-create');\nvar getInternalState = require('../internals/internal-state').get;\nvar UNSUPPORTED_DOT_ALL = require('../internals/regexp-unsupported-dot-all');\nvar UNSUPPORTED_NCG = require('../internals/regexp-unsupported-ncg');\n\nvar nativeReplace = shared('native-string-replace', String.prototype.replace);\nvar nativeExec = RegExp.prototype.exec;\nvar patchedExec = nativeExec;\nvar charAt = uncurryThis(''.charAt);\nvar indexOf = uncurryThis(''.indexOf);\nvar replace = uncurryThis(''.replace);\nvar stringSlice = uncurryThis(''.slice);\n\nvar UPDATES_LAST_INDEX_WRONG = (function () {\n  var re1 = /a/;\n  var re2 = /b*/g;\n  call(nativeExec, re1, 'a');\n  call(nativeExec, re2, 'a');\n  return re1.lastIndex !== 0 || re2.lastIndex !== 0;\n})();\n\nvar UNSUPPORTED_Y = stickyHelpers.BROKEN_CARET;\n\n// nonparticipating capturing group, copied from es5-shim's String#split patch.\nvar NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;\n\nvar PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG;\n\nif (PATCH) {\n  patchedExec = function exec(string) {\n    var re = this;\n    var state = getInternalState(re);\n    var str = toString(string);\n    var raw = state.raw;\n    var result, reCopy, lastIndex, match, i, object, group;\n\n    if (raw) {\n      raw.lastIndex = re.lastIndex;\n      result = call(patchedExec, raw, str);\n      re.lastIndex = raw.lastIndex;\n      return result;\n    }\n\n    var groups = state.groups;\n    var sticky = UNSUPPORTED_Y && re.sticky;\n    var flags = call(regexpFlags, re);\n    var source = re.source;\n    var charsAdded = 0;\n    var strCopy = str;\n\n    if (sticky) {\n      flags = replace(flags, 'y', '');\n      if (indexOf(flags, 'g') === -1) {\n        flags += 'g';\n      }\n\n      strCopy = stringSlice(str, re.lastIndex);\n      // Support anchored sticky behavior.\n      if (re.lastIndex > 0 && (!re.multiline || re.multiline && charAt(str, re.lastIndex - 1) !== '\\n')) {\n        source = '(?: ' + source + ')';\n        strCopy = ' ' + strCopy;\n        charsAdded++;\n      }\n      // ^(? + rx + ) is needed, in combination with some str slicing, to\n      // simulate the 'y' flag.\n      reCopy = new RegExp('^(?:' + source + ')', flags);\n    }\n\n    if (NPCG_INCLUDED) {\n      reCopy = new RegExp('^' + source + '$(?!\\\\s)', flags);\n    }\n    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;\n\n    match = call(nativeExec, sticky ? reCopy : re, strCopy);\n\n    if (sticky) {\n      if (match) {\n        match.input = stringSlice(match.input, charsAdded);\n        match[0] = stringSlice(match[0], charsAdded);\n        match.index = re.lastIndex;\n        re.lastIndex += match[0].length;\n      } else re.lastIndex = 0;\n    } else if (UPDATES_LAST_INDEX_WRONG && match) {\n      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;\n    }\n    if (NPCG_INCLUDED && match && match.length > 1) {\n      // Fix browsers whose `exec` methods don't consistently return `undefined`\n      // for NPCG, like IE8. NOTE: This doesn' work for /(.?)?/\n      call(nativeReplace, match[0], reCopy, function () {\n        for (i = 1; i < arguments.length - 2; i++) {\n          if (arguments[i] === undefined) match[i] = undefined;\n        }\n      });\n    }\n\n    if (match && groups) {\n      match.groups = object = create(null);\n      for (i = 0; i < groups.length; i++) {\n        group = groups[i];\n        object[group[0]] = match[group[1]];\n      }\n    }\n\n    return match;\n  };\n}\n\nmodule.exports = patchedExec;\n","'use strict';\nvar $ = require('../internals/export');\nvar exec = require('../internals/regexp-exec');\n\n// `RegExp.prototype.exec` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.exec\n$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {\n  exec: exec\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar objectDefinePropertyModule = require('../internals/object-define-property');\nvar regExpFlags = require('../internals/regexp-flags');\nvar fails = require('../internals/fails');\n\nvar RegExpPrototype = RegExp.prototype;\n\nvar FORCED = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n  return Object.getOwnPropertyDescriptor(RegExpPrototype, 'flags').get.call({ dotAll: true, sticky: true }) !== 'sy';\n});\n\n// `RegExp.prototype.flags` getter\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nif (FORCED) objectDefinePropertyModule.f(RegExpPrototype, 'flags', {\n  configurable: true,\n  get: regExpFlags\n});\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar $toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar regExpFlags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar n$ToString = RegExpPrototype[TO_STRING];\nvar getFlags = uncurryThis(regExpFlags);\n\nvar NOT_GENERIC = fails(function () { return n$ToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = PROPER_FUNCTION_NAME && n$ToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = $toString(R.source);\n    var rf = R.flags;\n    var f = $toString(rf === undefined && isPrototypeOf(RegExpPrototype, R) && !('flags' in RegExpPrototype) ? getFlags(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.es/ecma262/#sec-set-objects\ncollection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar stringSlice = uncurryThis(''.slice);\n\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = toString(requireObjectCoercible($this));\n    var position = toIntegerOrInfinity(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = charCodeAt(S, position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = charCodeAt(S, position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING\n          ? charAt(S, position)\n          : first\n        : CONVERT_TO_STRING\n          ? stringSlice(S, position, position + 2)\n          : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.es/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar codeAt = require('../internals/string-multibyte').codeAt;\n\n// `String.prototype.codePointAt` method\n// https://tc39.es/ecma262/#sec-string.prototype.codepointat\n$({ target: 'String', proto: true }, {\n  codePointAt: function codePointAt(pos) {\n    return codeAt(this, pos);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\n// eslint-disable-next-line es/no-string-prototype-endswith -- safe\nvar un$EndsWith = uncurryThis(''.endsWith);\nvar slice = uncurryThis(''.slice);\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('endsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'endsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.endsWith` method\n// https://tc39.es/ecma262/#sec-string.prototype.endswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  endsWith: function endsWith(searchString /* , endPosition = @length */) {\n    var that = toString(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var endPosition = arguments.length > 1 ? arguments[1] : undefined;\n    var len = that.length;\n    var end = endPosition === undefined ? len : min(toLength(endPosition), len);\n    var search = toString(searchString);\n    return un$EndsWith\n      ? un$EndsWith(that, search, end)\n      : slice(that, end - search.length, end) === search;\n  }\n});\n","var global = require('../internals/global');\nvar isRegExp = require('../internals/is-regexp');\n\nvar TypeError = global.TypeError;\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\nvar RangeError = global.RangeError;\nvar fromCharCode = String.fromCharCode;\n// eslint-disable-next-line es/no-string-fromcodepoint -- required for testing\nvar $fromCodePoint = String.fromCodePoint;\nvar join = uncurryThis([].join);\n\n// length should be 1, old FF problem\nvar INCORRECT_LENGTH = !!$fromCodePoint && $fromCodePoint.length != 1;\n\n// `String.fromCodePoint` method\n// https://tc39.es/ecma262/#sec-string.fromcodepoint\n$({ target: 'String', stat: true, forced: INCORRECT_LENGTH }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  fromCodePoint: function fromCodePoint(x) {\n    var elements = [];\n    var length = arguments.length;\n    var i = 0;\n    var code;\n    while (length > i) {\n      code = +arguments[i++];\n      if (toAbsoluteIndex(code, 0x10FFFF) !== code) throw RangeError(code + ' is not a valid code point');\n      elements[i] = code < 0x10000\n        ? fromCharCode(code)\n        : fromCharCode(((code -= 0x10000) >> 10) + 0xD800, code % 0x400 + 0xDC00);\n    } return join(elements, '');\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\nvar stringIndexOf = uncurryThis(''.indexOf);\n\n// `String.prototype.includes` method\n// https://tc39.es/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~stringIndexOf(\n      toString(requireObjectCoercible(this)),\n      toString(notARegExp(searchString)),\n      arguments.length > 1 ? arguments[1] : undefined\n    );\n  }\n});\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar toString = require('../internals/to-string');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: toString(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","'use strict';\n// TODO: Remove from `core-js@4` since it's moved to entry points\nrequire('../modules/es.regexp.exec');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar redefine = require('../internals/redefine');\nvar regexpExec = require('../internals/regexp-exec');\nvar fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar SPECIES = wellKnownSymbol('species');\nvar RegExpPrototype = RegExp.prototype;\n\nmodule.exports = function (KEY, exec, FORCED, SHAM) {\n  var SYMBOL = wellKnownSymbol(KEY);\n\n  var DELEGATES_TO_SYMBOL = !fails(function () {\n    // String methods call symbol-named RegEp methods\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) != 7;\n  });\n\n  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {\n    // Symbol-named RegExp methods call .exec\n    var execCalled = false;\n    var re = /a/;\n\n    if (KEY === 'split') {\n      // We can't use real regex here since it causes deoptimization\n      // and serious performance degradation in V8\n      // https://github.com/zloirock/core-js/issues/306\n      re = {};\n      // RegExp[@@split] doesn't call the regex's exec method, but first creates\n      // a new one. We need to return the patched regex when creating the new one.\n      re.constructor = {};\n      re.constructor[SPECIES] = function () { return re; };\n      re.flags = '';\n      re[SYMBOL] = /./[SYMBOL];\n    }\n\n    re.exec = function () { execCalled = true; return null; };\n\n    re[SYMBOL]('');\n    return !execCalled;\n  });\n\n  if (\n    !DELEGATES_TO_SYMBOL ||\n    !DELEGATES_TO_EXEC ||\n    FORCED\n  ) {\n    var uncurriedNativeRegExpMethod = uncurryThis(/./[SYMBOL]);\n    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {\n      var uncurriedNativeMethod = uncurryThis(nativeMethod);\n      var $exec = regexp.exec;\n      if ($exec === regexpExec || $exec === RegExpPrototype.exec) {\n        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {\n          // The native String method already delegates to @@method (this\n          // polyfilled function), leasing to infinite recursion.\n          // We avoid it by directly calling the native @@method method.\n          return { done: true, value: uncurriedNativeRegExpMethod(regexp, str, arg2) };\n        }\n        return { done: true, value: uncurriedNativeMethod(str, regexp, arg2) };\n      }\n      return { done: false };\n    });\n\n    redefine(String.prototype, KEY, methods[0]);\n    redefine(RegExpPrototype, SYMBOL, methods[1]);\n  }\n\n  if (SHAM) createNonEnumerableProperty(RegExpPrototype[SYMBOL], 'sham', true);\n};\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\n\n// `AdvanceStringIndex` abstract operation\n// https://tc39.es/ecma262/#sec-advancestringindex\nmodule.exports = function (S, index, unicode) {\n  return index + (unicode ? charAt(S, index).length : 1);\n};\n","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof-raw');\nvar regexpExec = require('../internals/regexp-exec');\n\nvar TypeError = global.TypeError;\n\n// `RegExpExec` abstract operation\n// https://tc39.es/ecma262/#sec-regexpexec\nmodule.exports = function (R, S) {\n  var exec = R.exec;\n  if (isCallable(exec)) {\n    var result = call(exec, R, S);\n    if (result !== null) anObject(result);\n    return result;\n  }\n  if (classof(R) === 'RegExp') return call(regexpExec, R, S);\n  throw TypeError('RegExp#exec called on incompatible receiver');\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar getMethod = require('../internals/get-method');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@match logic\nfixRegExpWellKnownSymbolLogic('match', function (MATCH, nativeMatch, maybeCallNative) {\n  return [\n    // `String.prototype.match` method\n    // https://tc39.es/ecma262/#sec-string.prototype.match\n    function match(regexp) {\n      var O = requireObjectCoercible(this);\n      var matcher = regexp == undefined ? undefined : getMethod(regexp, MATCH);\n      return matcher ? call(matcher, regexp, O) : new RegExp(regexp)[MATCH](toString(O));\n    },\n    // `RegExp.prototype[@@match]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@match\n    function (string) {\n      var rx = anObject(this);\n      var S = toString(string);\n      var res = maybeCallNative(nativeMatch, rx, S);\n\n      if (res.done) return res.value;\n\n      if (!rx.global) return regExpExec(rx, S);\n\n      var fullUnicode = rx.unicode;\n      rx.lastIndex = 0;\n      var A = [];\n      var n = 0;\n      var result;\n      while ((result = regExpExec(rx, S)) !== null) {\n        var matchStr = toString(result[0]);\n        A[n] = matchStr;\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n        n++;\n      }\n      return n === 0 ? null : A;\n    }\n  ];\n});\n","// https://github.com/tc39/proposal-string-pad-start-end\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar $repeat = require('../internals/string-repeat');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar repeat = uncurryThis($repeat);\nvar stringSlice = uncurryThis(''.slice);\nvar ceil = Math.ceil;\n\n// `String.prototype.{ padStart, padEnd }` methods implementation\nvar createMethod = function (IS_END) {\n  return function ($this, maxLength, fillString) {\n    var S = toString(requireObjectCoercible($this));\n    var intMaxLength = toLength(maxLength);\n    var stringLength = S.length;\n    var fillStr = fillString === undefined ? ' ' : toString(fillString);\n    var fillLen, stringFiller;\n    if (intMaxLength <= stringLength || fillStr == '') return S;\n    fillLen = intMaxLength - stringLength;\n    stringFiller = repeat(fillStr, ceil(fillLen / fillStr.length));\n    if (stringFiller.length > fillLen) stringFiller = stringSlice(stringFiller, 0, fillLen);\n    return IS_END ? S + stringFiller : stringFiller + S;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.padStart` method\n  // https://tc39.es/ecma262/#sec-string.prototype.padstart\n  start: createMethod(false),\n  // `String.prototype.padEnd` method\n  // https://tc39.es/ecma262/#sec-string.prototype.padend\n  end: createMethod(true)\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $padEnd = require('../internals/string-pad').end;\nvar WEBKIT_BUG = require('../internals/string-pad-webkit-bug');\n\n// `String.prototype.padEnd` method\n// https://tc39.es/ecma262/#sec-string.prototype.padend\n$({ target: 'String', proto: true, forced: WEBKIT_BUG }, {\n  padEnd: function padEnd(maxLength /* , fillString = ' ' */) {\n    return $padEnd(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","// https://github.com/zloirock/core-js/issues/280\nvar userAgent = require('../internals/engine-user-agent');\n\nmodule.exports = /Version\\/10(?:\\.\\d+){1,2}(?: [\\w./]+)?(?: Mobile\\/\\w+)? Safari\\//.test(userAgent);\n","'use strict';\nvar $ = require('../internals/export');\nvar $padStart = require('../internals/string-pad').start;\nvar WEBKIT_BUG = require('../internals/string-pad-webkit-bug');\n\n// `String.prototype.padStart` method\n// https://tc39.es/ecma262/#sec-string.prototype.padstart\n$({ target: 'String', proto: true, forced: WEBKIT_BUG }, {\n  padStart: function padStart(maxLength /* , fillString = ' ' */) {\n    return $padStart(this, maxLength, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toObject = require('../internals/to-object');\nvar toString = require('../internals/to-string');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar push = uncurryThis([].push);\nvar join = uncurryThis([].join);\n\n// `String.raw` method\n// https://tc39.es/ecma262/#sec-string.raw\n$({ target: 'String', stat: true }, {\n  raw: function raw(template) {\n    var rawTemplate = toIndexedObject(toObject(template).raw);\n    var literalSegments = lengthOfArrayLike(rawTemplate);\n    var argumentsLength = arguments.length;\n    var elements = [];\n    var i = 0;\n    while (literalSegments > i) {\n      push(elements, toString(rawTemplate[i++]));\n      if (i === literalSegments) return join(elements, '');\n      if (i < argumentsLength) push(elements, toString(arguments[i]));\n    }\n  }\n});\n","var $ = require('../internals/export');\nvar repeat = require('../internals/string-repeat');\n\n// `String.prototype.repeat` method\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\n$({ target: 'String', proto: true }, {\n  repeat: repeat\n});\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar floor = Math.floor;\nvar charAt = uncurryThis(''.charAt);\nvar replace = uncurryThis(''.replace);\nvar stringSlice = uncurryThis(''.slice);\nvar SUBSTITUTION_SYMBOLS = /\\$([$&'`]|\\d{1,2}|<[^>]*>)/g;\nvar SUBSTITUTION_SYMBOLS_NO_NAMED = /\\$([$&'`]|\\d{1,2})/g;\n\n// `GetSubstitution` abstract operation\n// https://tc39.es/ecma262/#sec-getsubstitution\nmodule.exports = function (matched, str, position, captures, namedCaptures, replacement) {\n  var tailPos = position + matched.length;\n  var m = captures.length;\n  var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;\n  if (namedCaptures !== undefined) {\n    namedCaptures = toObject(namedCaptures);\n    symbols = SUBSTITUTION_SYMBOLS;\n  }\n  return replace(replacement, symbols, function (match, ch) {\n    var capture;\n    switch (charAt(ch, 0)) {\n      case '$': return '$';\n      case '&': return matched;\n      case '`': return stringSlice(str, 0, position);\n      case \"'\": return stringSlice(str, tailPos);\n      case '<':\n        capture = namedCaptures[stringSlice(ch, 1, -1)];\n        break;\n      default: // \\d\\d?\n        var n = +ch;\n        if (n === 0) return match;\n        if (n > m) {\n          var f = floor(n / 10);\n          if (f === 0) return match;\n          if (f <= m) return captures[f - 1] === undefined ? charAt(ch, 1) : captures[f - 1] + charAt(ch, 1);\n          return match;\n        }\n        capture = captures[n - 1];\n    }\n    return capture === undefined ? '' : capture;\n  });\n};\n","'use strict';\nvar apply = require('../internals/function-apply');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar fails = require('../internals/fails');\nvar anObject = require('../internals/an-object');\nvar isCallable = require('../internals/is-callable');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar getMethod = require('../internals/get-method');\nvar getSubstitution = require('../internals/get-substitution');\nvar regExpExec = require('../internals/regexp-exec-abstract');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar REPLACE = wellKnownSymbol('replace');\nvar max = Math.max;\nvar min = Math.min;\nvar concat = uncurryThis([].concat);\nvar push = uncurryThis([].push);\nvar stringIndexOf = uncurryThis(''.indexOf);\nvar stringSlice = uncurryThis(''.slice);\n\nvar maybeToString = function (it) {\n  return it === undefined ? it : String(it);\n};\n\n// IE <= 11 replaces $0 with the whole match, as if it was $&\n// https://stackoverflow.com/questions/6024666/getting-ie-to-replace-a-regex-with-the-literal-string-0\nvar REPLACE_KEEPS_$0 = (function () {\n  // eslint-disable-next-line regexp/prefer-escape-replacement-dollar-char -- required for testing\n  return 'a'.replace(/./, '$0') === '$0';\n})();\n\n// Safari <= 13.0.3(?) substitutes nth capture where n>m with an empty string\nvar REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {\n  if (/./[REPLACE]) {\n    return /./[REPLACE]('a', '$0') === '';\n  }\n  return false;\n})();\n\nvar REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {\n  var re = /./;\n  re.exec = function () {\n    var result = [];\n    result.groups = { a: '7' };\n    return result;\n  };\n  // eslint-disable-next-line regexp/no-useless-dollar-replacements -- false positive\n  return ''.replace(re, '$<a>') !== '7';\n});\n\n// @@replace logic\nfixRegExpWellKnownSymbolLogic('replace', function (_, nativeReplace, maybeCallNative) {\n  var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE ? '$' : '$0';\n\n  return [\n    // `String.prototype.replace` method\n    // https://tc39.es/ecma262/#sec-string.prototype.replace\n    function replace(searchValue, replaceValue) {\n      var O = requireObjectCoercible(this);\n      var replacer = searchValue == undefined ? undefined : getMethod(searchValue, REPLACE);\n      return replacer\n        ? call(replacer, searchValue, O, replaceValue)\n        : call(nativeReplace, toString(O), searchValue, replaceValue);\n    },\n    // `RegExp.prototype[@@replace]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@replace\n    function (string, replaceValue) {\n      var rx = anObject(this);\n      var S = toString(string);\n\n      if (\n        typeof replaceValue == 'string' &&\n        stringIndexOf(replaceValue, UNSAFE_SUBSTITUTE) === -1 &&\n        stringIndexOf(replaceValue, '$<') === -1\n      ) {\n        var res = maybeCallNative(nativeReplace, rx, S, replaceValue);\n        if (res.done) return res.value;\n      }\n\n      var functionalReplace = isCallable(replaceValue);\n      if (!functionalReplace) replaceValue = toString(replaceValue);\n\n      var global = rx.global;\n      if (global) {\n        var fullUnicode = rx.unicode;\n        rx.lastIndex = 0;\n      }\n      var results = [];\n      while (true) {\n        var result = regExpExec(rx, S);\n        if (result === null) break;\n\n        push(results, result);\n        if (!global) break;\n\n        var matchStr = toString(result[0]);\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n      }\n\n      var accumulatedResult = '';\n      var nextSourcePosition = 0;\n      for (var i = 0; i < results.length; i++) {\n        result = results[i];\n\n        var matched = toString(result[0]);\n        var position = max(min(toIntegerOrInfinity(result.index), S.length), 0);\n        var captures = [];\n        // NOTE: This is equivalent to\n        //   captures = result.slice(1).map(maybeToString)\n        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in\n        // the slice polyfill when slicing native arrays) \"doesn't work\" in safari 9 and\n        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.\n        for (var j = 1; j < result.length; j++) push(captures, maybeToString(result[j]));\n        var namedCaptures = result.groups;\n        if (functionalReplace) {\n          var replacerArgs = concat([matched], captures, position, S);\n          if (namedCaptures !== undefined) push(replacerArgs, namedCaptures);\n          var replacement = toString(apply(replaceValue, undefined, replacerArgs));\n        } else {\n          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);\n        }\n        if (position >= nextSourcePosition) {\n          accumulatedResult += stringSlice(S, nextSourcePosition, position) + replacement;\n          nextSourcePosition = position + matched.length;\n        }\n      }\n      return accumulatedResult + stringSlice(S, nextSourcePosition);\n    }\n  ];\n}, !REPLACE_SUPPORTS_NAMED_GROUPS || !REPLACE_KEEPS_$0 || REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE);\n","'use strict';\nvar call = require('../internals/function-call');\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar sameValue = require('../internals/same-value');\nvar toString = require('../internals/to-string');\nvar getMethod = require('../internals/get-method');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@search logic\nfixRegExpWellKnownSymbolLogic('search', function (SEARCH, nativeSearch, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.es/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = requireObjectCoercible(this);\n      var searcher = regexp == undefined ? undefined : getMethod(regexp, SEARCH);\n      return searcher ? call(searcher, regexp, O) : new RegExp(regexp)[SEARCH](toString(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@search\n    function (string) {\n      var rx = anObject(this);\n      var S = toString(string);\n      var res = maybeCallNative(nativeSearch, rx, S);\n\n      if (res.done) return res.value;\n\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","'use strict';\nvar apply = require('../internals/function-apply');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar isRegExp = require('../internals/is-regexp');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar getMethod = require('../internals/get-method');\nvar arraySlice = require('../internals/array-slice-simple');\nvar callRegExpExec = require('../internals/regexp-exec-abstract');\nvar regexpExec = require('../internals/regexp-exec');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar fails = require('../internals/fails');\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\nvar MAX_UINT32 = 0xFFFFFFFF;\nvar min = Math.min;\nvar $push = [].push;\nvar exec = uncurryThis(/./.exec);\nvar push = uncurryThis($push);\nvar stringSlice = uncurryThis(''.slice);\n\n// Chrome 51 has a buggy \"split\" implementation when RegExp#exec !== nativeExec\n// Weex JS has frozen built-in prototypes, so use try / catch wrapper\nvar SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {\n  // eslint-disable-next-line regexp/no-empty-group -- required for testing\n  var re = /(?:)/;\n  var originalExec = re.exec;\n  re.exec = function () { return originalExec.apply(this, arguments); };\n  var result = 'ab'.split(re);\n  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';\n});\n\n// @@split logic\nfixRegExpWellKnownSymbolLogic('split', function (SPLIT, nativeSplit, maybeCallNative) {\n  var internalSplit;\n  if (\n    'abbc'.split(/(b)*/)[1] == 'c' ||\n    // eslint-disable-next-line regexp/no-empty-group -- required for testing\n    'test'.split(/(?:)/, -1).length != 4 ||\n    'ab'.split(/(?:ab)*/).length != 2 ||\n    '.'.split(/(.?)(.?)/).length != 4 ||\n    // eslint-disable-next-line regexp/no-empty-capturing-group, regexp/no-empty-group -- required for testing\n    '.'.split(/()()/).length > 1 ||\n    ''.split(/.?/).length\n  ) {\n    // based on es5-shim implementation, need to rework it\n    internalSplit = function (separator, limit) {\n      var string = toString(requireObjectCoercible(this));\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (separator === undefined) return [string];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) {\n        return call(nativeSplit, string, separator, lim);\n      }\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var match, lastIndex, lastLength;\n      while (match = call(regexpExec, separatorCopy, string)) {\n        lastIndex = separatorCopy.lastIndex;\n        if (lastIndex > lastLastIndex) {\n          push(output, stringSlice(string, lastLastIndex, match.index));\n          if (match.length > 1 && match.index < string.length) apply($push, output, arraySlice(match, 1));\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n          if (output.length >= lim) break;\n        }\n        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string.length) {\n        if (lastLength || !exec(separatorCopy, '')) push(output, '');\n      } else push(output, stringSlice(string, lastLastIndex));\n      return output.length > lim ? arraySlice(output, 0, lim) : output;\n    };\n  // Chakra, V8\n  } else if ('0'.split(undefined, 0).length) {\n    internalSplit = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : call(nativeSplit, this, separator, limit);\n    };\n  } else internalSplit = nativeSplit;\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.es/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = requireObjectCoercible(this);\n      var splitter = separator == undefined ? undefined : getMethod(separator, SPLIT);\n      return splitter\n        ? call(splitter, separator, O, limit)\n        : call(internalSplit, toString(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (string, limit) {\n      var rx = anObject(this);\n      var S = toString(string);\n      var res = maybeCallNative(internalSplit, rx, S, limit, internalSplit !== nativeSplit);\n\n      if (res.done) return res.value;\n\n      var C = speciesConstructor(rx, RegExp);\n\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (UNSUPPORTED_Y ? 'g' : 'y');\n\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(UNSUPPORTED_Y ? '^(?:' + rx.source + ')' : rx, flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = UNSUPPORTED_Y ? 0 : q;\n        var z = callRegExpExec(splitter, UNSUPPORTED_Y ? stringSlice(S, q) : S);\n        var e;\n        if (\n          z === null ||\n          (e = min(toLength(splitter.lastIndex + (UNSUPPORTED_Y ? q : 0)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          push(A, stringSlice(S, p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            push(A, z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      push(A, stringSlice(S, p));\n      return A;\n    }\n  ];\n}, !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC, UNSUPPORTED_Y);\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\n// eslint-disable-next-line es/no-string-prototype-startswith -- safe\nvar un$StartsWith = uncurryThis(''.startsWith);\nvar stringSlice = uncurryThis(''.slice);\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.startsWith` method\n// https://tc39.es/ecma262/#sec-string.prototype.startswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = toString(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = toString(searchString);\n    return un$StartsWith\n      ? un$StartsWith(that, search, index)\n      : stringSlice(that, index, index + search.length) === search;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","var PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]()\n      || non[METHOD_NAME]() !== non\n      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $trimEnd = require('../internals/string-trim').end;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\nvar FORCED = forcedStringTrimMethod('trimEnd');\n\nvar trimEnd = FORCED ? function trimEnd() {\n  return $trimEnd(this);\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n} : ''.trimEnd;\n\n// `String.prototype.{ trimEnd, trimRight }` methods\n// https://tc39.es/ecma262/#sec-string.prototype.trimend\n// https://tc39.es/ecma262/#String.prototype.trimright\n$({ target: 'String', proto: true, name: 'trimEnd', forced: FORCED }, {\n  trimEnd: trimEnd,\n  trimRight: trimEnd\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $trimStart = require('../internals/string-trim').start;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\nvar FORCED = forcedStringTrimMethod('trimStart');\n\nvar trimStart = FORCED ? function trimStart() {\n  return $trimStart(this);\n// eslint-disable-next-line es/no-string-prototype-trimstart-trimend -- safe\n} : ''.trimStart;\n\n// `String.prototype.{ trimStart, trimLeft }` methods\n// https://tc39.es/ecma262/#sec-string.prototype.trimstart\n// https://tc39.es/ecma262/#String.prototype.trimleft\n$({ target: 'String', proto: true, name: 'trimStart', forced: FORCED }, {\n  trimStart: trimStart,\n  trimLeft: trimStart\n});\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\n\nvar quot = /\"/g;\nvar replace = uncurryThis(''.replace);\n\n// `CreateHTML` abstract operation\n// https://tc39.es/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = toString(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + replace(toString(value), quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.anchor` method\n// https://tc39.es/ecma262/#sec-string.prototype.anchor\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('anchor') }, {\n  anchor: function anchor(name) {\n    return createHTML(this, 'a', 'name', name);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.big` method\n// https://tc39.es/ecma262/#sec-string.prototype.big\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('big') }, {\n  big: function big() {\n    return createHTML(this, 'big', '', '');\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.blink` method\n// https://tc39.es/ecma262/#sec-string.prototype.blink\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('blink') }, {\n  blink: function blink() {\n    return createHTML(this, 'blink', '', '');\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.bold` method\n// https://tc39.es/ecma262/#sec-string.prototype.bold\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('bold') }, {\n  bold: function bold() {\n    return createHTML(this, 'b', '', '');\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.fixed` method\n// https://tc39.es/ecma262/#sec-string.prototype.fixed\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('fixed') }, {\n  fixed: function fixed() {\n    return createHTML(this, 'tt', '', '');\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.fontcolor` method\n// https://tc39.es/ecma262/#sec-string.prototype.fontcolor\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('fontcolor') }, {\n  fontcolor: function fontcolor(color) {\n    return createHTML(this, 'font', 'color', color);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.fontsize` method\n// https://tc39.es/ecma262/#sec-string.prototype.fontsize\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('fontsize') }, {\n  fontsize: function fontsize(size) {\n    return createHTML(this, 'font', 'size', size);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.italics` method\n// https://tc39.es/ecma262/#sec-string.prototype.italics\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('italics') }, {\n  italics: function italics() {\n    return createHTML(this, 'i', '', '');\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.link` method\n// https://tc39.es/ecma262/#sec-string.prototype.link\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('link') }, {\n  link: function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.small` method\n// https://tc39.es/ecma262/#sec-string.prototype.small\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('small') }, {\n  small: function small() {\n    return createHTML(this, 'small', '', '');\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.strike` method\n// https://tc39.es/ecma262/#sec-string.prototype.strike\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('strike') }, {\n  strike: function strike() {\n    return createHTML(this, 'strike', '', '');\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.sub` method\n// https://tc39.es/ecma262/#sec-string.prototype.sub\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('sub') }, {\n  sub: function sub() {\n    return createHTML(this, 'sub', '', '');\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.sup` method\n// https://tc39.es/ecma262/#sec-string.prototype.sup\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('sup') }, {\n  sup: function sup() {\n    return createHTML(this, 'sup', '', '');\n  }\n});\n","'use strict';\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-native');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar classof = require('../internals/classof');\nvar tryToString = require('../internals/try-to-string');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar defineProperty = require('../internals/object-define-property').f;\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar uid = require('../internals/uid');\n\nvar Int8Array = global.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar Uint8ClampedArray = global.Uint8ClampedArray;\nvar Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;\nvar TypedArray = Int8Array && getPrototypeOf(Int8Array);\nvar TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);\nvar ObjectPrototype = Object.prototype;\nvar TypeError = global.TypeError;\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');\nvar TYPED_ARRAY_CONSTRUCTOR = uid('TYPED_ARRAY_CONSTRUCTOR');\n// Fixing native typed arrays in Opera Presto crashes the browser, see #595\nvar NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(global.opera) !== 'Opera';\nvar TYPED_ARRAY_TAG_REQUIRED = false;\nvar NAME, Constructor, Prototype;\n\nvar TypedArrayConstructorsList = {\n  Int8Array: 1,\n  Uint8Array: 1,\n  Uint8ClampedArray: 1,\n  Int16Array: 2,\n  Uint16Array: 2,\n  Int32Array: 4,\n  Uint32Array: 4,\n  Float32Array: 4,\n  Float64Array: 8\n};\n\nvar BigIntArrayConstructorsList = {\n  BigInt64Array: 8,\n  BigUint64Array: 8\n};\n\nvar isView = function isView(it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return klass === 'DataView'\n    || hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar isTypedArray = function (it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar aTypedArray = function (it) {\n  if (isTypedArray(it)) return it;\n  throw TypeError('Target is not a typed array');\n};\n\nvar aTypedArrayConstructor = function (C) {\n  if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C))) return C;\n  throw TypeError(tryToString(C) + ' is not a typed array constructor');\n};\n\nvar exportTypedArrayMethod = function (KEY, property, forced, options) {\n  if (!DESCRIPTORS) return;\n  if (forced) for (var ARRAY in TypedArrayConstructorsList) {\n    var TypedArrayConstructor = global[ARRAY];\n    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY)) try {\n      delete TypedArrayConstructor.prototype[KEY];\n    } catch (error) {\n      // old WebKit bug - some methods are non-configurable\n      try {\n        TypedArrayConstructor.prototype[KEY] = property;\n      } catch (error2) { /* empty */ }\n    }\n  }\n  if (!TypedArrayPrototype[KEY] || forced) {\n    redefine(TypedArrayPrototype, KEY, forced ? property\n      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);\n  }\n};\n\nvar exportTypedArrayStaticMethod = function (KEY, property, forced) {\n  var ARRAY, TypedArrayConstructor;\n  if (!DESCRIPTORS) return;\n  if (setPrototypeOf) {\n    if (forced) for (ARRAY in TypedArrayConstructorsList) {\n      TypedArrayConstructor = global[ARRAY];\n      if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY)) try {\n        delete TypedArrayConstructor[KEY];\n      } catch (error) { /* empty */ }\n    }\n    if (!TypedArray[KEY] || forced) {\n      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable\n      try {\n        return redefine(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);\n      } catch (error) { /* empty */ }\n    } else return;\n  }\n  for (ARRAY in TypedArrayConstructorsList) {\n    TypedArrayConstructor = global[ARRAY];\n    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {\n      redefine(TypedArrayConstructor, KEY, property);\n    }\n  }\n};\n\nfor (NAME in TypedArrayConstructorsList) {\n  Constructor = global[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) createNonEnumerableProperty(Prototype, TYPED_ARRAY_CONSTRUCTOR, Constructor);\n  else NATIVE_ARRAY_BUFFER_VIEWS = false;\n}\n\nfor (NAME in BigIntArrayConstructorsList) {\n  Constructor = global[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) createNonEnumerableProperty(Prototype, TYPED_ARRAY_CONSTRUCTOR, Constructor);\n}\n\n// WebKit bug - typed arrays constructors prototype is Object.prototype\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {\n  // eslint-disable-next-line no-shadow -- safe\n  TypedArray = function TypedArray() {\n    throw TypeError('Incorrect invocation');\n  };\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (global[NAME]) setPrototypeOf(global[NAME], TypedArray);\n  }\n}\n\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {\n  TypedArrayPrototype = TypedArray.prototype;\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (global[NAME]) setPrototypeOf(global[NAME].prototype, TypedArrayPrototype);\n  }\n}\n\n// WebKit bug - one more object in Uint8ClampedArray prototype chain\nif (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {\n  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);\n}\n\nif (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {\n  TYPED_ARRAY_TAG_REQUIRED = true;\n  defineProperty(TypedArrayPrototype, TO_STRING_TAG, { get: function () {\n    return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;\n  } });\n  for (NAME in TypedArrayConstructorsList) if (global[NAME]) {\n    createNonEnumerableProperty(global[NAME], TYPED_ARRAY_TAG, NAME);\n  }\n}\n\nmodule.exports = {\n  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,\n  TYPED_ARRAY_CONSTRUCTOR: TYPED_ARRAY_CONSTRUCTOR,\n  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,\n  aTypedArray: aTypedArray,\n  aTypedArrayConstructor: aTypedArrayConstructor,\n  exportTypedArrayMethod: exportTypedArrayMethod,\n  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,\n  isView: isView,\n  isTypedArray: isTypedArray,\n  TypedArray: TypedArray,\n  TypedArrayPrototype: TypedArrayPrototype\n};\n","/* eslint-disable no-new -- required for testing */\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar NATIVE_ARRAY_BUFFER_VIEWS = require('../internals/array-buffer-view-core').NATIVE_ARRAY_BUFFER_VIEWS;\n\nvar ArrayBuffer = global.ArrayBuffer;\nvar Int8Array = global.Int8Array;\n\nmodule.exports = !NATIVE_ARRAY_BUFFER_VIEWS || !fails(function () {\n  Int8Array(1);\n}) || !fails(function () {\n  new Int8Array(-1);\n}) || !checkCorrectnessOfIteration(function (iterable) {\n  new Int8Array();\n  new Int8Array(null);\n  new Int8Array(1.5);\n  new Int8Array(iterable);\n}, true) || fails(function () {\n  // Safari (11+) bug - a reason why even Safari 13 should load a typed array polyfill\n  return new Int8Array(new ArrayBuffer(2), 1, undefined).length !== 1;\n});\n","var global = require('../internals/global');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar RangeError = global.RangeError;\n\nmodule.exports = function (it) {\n  var result = toIntegerOrInfinity(it);\n  if (result < 0) throw RangeError(\"The argument can't be less than 0\");\n  return result;\n};\n","var global = require('../internals/global');\nvar toPositiveInteger = require('../internals/to-positive-integer');\n\nvar RangeError = global.RangeError;\n\nmodule.exports = function (it, BYTES) {\n  var offset = toPositiveInteger(it);\n  if (offset % BYTES) throw RangeError('Wrong offset');\n  return offset;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = require('../internals/typed-array-constructors-require-wrappers');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar ArrayBufferModule = require('../internals/array-buffer');\nvar anInstance = require('../internals/an-instance');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar isIntegralNumber = require('../internals/is-integral-number');\nvar toLength = require('../internals/to-length');\nvar toIndex = require('../internals/to-index');\nvar toOffset = require('../internals/to-offset');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar classof = require('../internals/classof');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar create = require('../internals/object-create');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar typedArrayFrom = require('../internals/typed-array-from');\nvar forEach = require('../internals/array-iteration').forEach;\nvar setSpecies = require('../internals/set-species');\nvar definePropertyModule = require('../internals/object-define-property');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar InternalStateModule = require('../internals/internal-state');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nvar getInternalState = InternalStateModule.get;\nvar setInternalState = InternalStateModule.set;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar round = Math.round;\nvar RangeError = global.RangeError;\nvar ArrayBuffer = ArrayBufferModule.ArrayBuffer;\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\nvar DataView = ArrayBufferModule.DataView;\nvar NATIVE_ARRAY_BUFFER_VIEWS = ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS;\nvar TYPED_ARRAY_CONSTRUCTOR = ArrayBufferViewCore.TYPED_ARRAY_CONSTRUCTOR;\nvar TYPED_ARRAY_TAG = ArrayBufferViewCore.TYPED_ARRAY_TAG;\nvar TypedArray = ArrayBufferViewCore.TypedArray;\nvar TypedArrayPrototype = ArrayBufferViewCore.TypedArrayPrototype;\nvar aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;\nvar isTypedArray = ArrayBufferViewCore.isTypedArray;\nvar BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';\nvar WRONG_LENGTH = 'Wrong length';\n\nvar fromList = function (C, list) {\n  aTypedArrayConstructor(C);\n  var index = 0;\n  var length = list.length;\n  var result = new C(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n};\n\nvar addGetter = function (it, key) {\n  nativeDefineProperty(it, key, { get: function () {\n    return getInternalState(this)[key];\n  } });\n};\n\nvar isArrayBuffer = function (it) {\n  var klass;\n  return isPrototypeOf(ArrayBufferPrototype, it) || (klass = classof(it)) == 'ArrayBuffer' || klass == 'SharedArrayBuffer';\n};\n\nvar isTypedArrayIndex = function (target, key) {\n  return isTypedArray(target)\n    && !isSymbol(key)\n    && key in target\n    && isIntegralNumber(+key)\n    && key >= 0;\n};\n\nvar wrappedGetOwnPropertyDescriptor = function getOwnPropertyDescriptor(target, key) {\n  key = toPropertyKey(key);\n  return isTypedArrayIndex(target, key)\n    ? createPropertyDescriptor(2, target[key])\n    : nativeGetOwnPropertyDescriptor(target, key);\n};\n\nvar wrappedDefineProperty = function defineProperty(target, key, descriptor) {\n  key = toPropertyKey(key);\n  if (isTypedArrayIndex(target, key)\n    && isObject(descriptor)\n    && hasOwn(descriptor, 'value')\n    && !hasOwn(descriptor, 'get')\n    && !hasOwn(descriptor, 'set')\n    // TODO: add validation descriptor w/o calling accessors\n    && !descriptor.configurable\n    && (!hasOwn(descriptor, 'writable') || descriptor.writable)\n    && (!hasOwn(descriptor, 'enumerable') || descriptor.enumerable)\n  ) {\n    target[key] = descriptor.value;\n    return target;\n  } return nativeDefineProperty(target, key, descriptor);\n};\n\nif (DESCRIPTORS) {\n  if (!NATIVE_ARRAY_BUFFER_VIEWS) {\n    getOwnPropertyDescriptorModule.f = wrappedGetOwnPropertyDescriptor;\n    definePropertyModule.f = wrappedDefineProperty;\n    addGetter(TypedArrayPrototype, 'buffer');\n    addGetter(TypedArrayPrototype, 'byteOffset');\n    addGetter(TypedArrayPrototype, 'byteLength');\n    addGetter(TypedArrayPrototype, 'length');\n  }\n\n  $({ target: 'Object', stat: true, forced: !NATIVE_ARRAY_BUFFER_VIEWS }, {\n    getOwnPropertyDescriptor: wrappedGetOwnPropertyDescriptor,\n    defineProperty: wrappedDefineProperty\n  });\n\n  module.exports = function (TYPE, wrapper, CLAMPED) {\n    var BYTES = TYPE.match(/\\d+$/)[0] / 8;\n    var CONSTRUCTOR_NAME = TYPE + (CLAMPED ? 'Clamped' : '') + 'Array';\n    var GETTER = 'get' + TYPE;\n    var SETTER = 'set' + TYPE;\n    var NativeTypedArrayConstructor = global[CONSTRUCTOR_NAME];\n    var TypedArrayConstructor = NativeTypedArrayConstructor;\n    var TypedArrayConstructorPrototype = TypedArrayConstructor && TypedArrayConstructor.prototype;\n    var exported = {};\n\n    var getter = function (that, index) {\n      var data = getInternalState(that);\n      return data.view[GETTER](index * BYTES + data.byteOffset, true);\n    };\n\n    var setter = function (that, index, value) {\n      var data = getInternalState(that);\n      if (CLAMPED) value = (value = round(value)) < 0 ? 0 : value > 0xFF ? 0xFF : value & 0xFF;\n      data.view[SETTER](index * BYTES + data.byteOffset, value, true);\n    };\n\n    var addElement = function (that, index) {\n      nativeDefineProperty(that, index, {\n        get: function () {\n          return getter(this, index);\n        },\n        set: function (value) {\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n\n    if (!NATIVE_ARRAY_BUFFER_VIEWS) {\n      TypedArrayConstructor = wrapper(function (that, data, offset, $length) {\n        anInstance(that, TypedArrayConstructorPrototype);\n        var index = 0;\n        var byteOffset = 0;\n        var buffer, byteLength, length;\n        if (!isObject(data)) {\n          length = toIndex(data);\n          byteLength = length * BYTES;\n          buffer = new ArrayBuffer(byteLength);\n        } else if (isArrayBuffer(data)) {\n          buffer = data;\n          byteOffset = toOffset(offset, BYTES);\n          var $len = data.byteLength;\n          if ($length === undefined) {\n            if ($len % BYTES) throw RangeError(WRONG_LENGTH);\n            byteLength = $len - byteOffset;\n            if (byteLength < 0) throw RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if (byteLength + byteOffset > $len) throw RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if (isTypedArray(data)) {\n          return fromList(TypedArrayConstructor, data);\n        } else {\n          return call(typedArrayFrom, TypedArrayConstructor, data);\n        }\n        setInternalState(that, {\n          buffer: buffer,\n          byteOffset: byteOffset,\n          byteLength: byteLength,\n          length: length,\n          view: new DataView(buffer)\n        });\n        while (index < length) addElement(that, index++);\n      });\n\n      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);\n      TypedArrayConstructorPrototype = TypedArrayConstructor.prototype = create(TypedArrayPrototype);\n    } else if (TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS) {\n      TypedArrayConstructor = wrapper(function (dummy, data, typedArrayOffset, $length) {\n        anInstance(dummy, TypedArrayConstructorPrototype);\n        return inheritIfRequired(function () {\n          if (!isObject(data)) return new NativeTypedArrayConstructor(toIndex(data));\n          if (isArrayBuffer(data)) return $length !== undefined\n            ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES), $length)\n            : typedArrayOffset !== undefined\n              ? new NativeTypedArrayConstructor(data, toOffset(typedArrayOffset, BYTES))\n              : new NativeTypedArrayConstructor(data);\n          if (isTypedArray(data)) return fromList(TypedArrayConstructor, data);\n          return call(typedArrayFrom, TypedArrayConstructor, data);\n        }(), dummy, TypedArrayConstructor);\n      });\n\n      if (setPrototypeOf) setPrototypeOf(TypedArrayConstructor, TypedArray);\n      forEach(getOwnPropertyNames(NativeTypedArrayConstructor), function (key) {\n        if (!(key in TypedArrayConstructor)) {\n          createNonEnumerableProperty(TypedArrayConstructor, key, NativeTypedArrayConstructor[key]);\n        }\n      });\n      TypedArrayConstructor.prototype = TypedArrayConstructorPrototype;\n    }\n\n    if (TypedArrayConstructorPrototype.constructor !== TypedArrayConstructor) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, 'constructor', TypedArrayConstructor);\n    }\n\n    createNonEnumerableProperty(TypedArrayConstructorPrototype, TYPED_ARRAY_CONSTRUCTOR, TypedArrayConstructor);\n\n    if (TYPED_ARRAY_TAG) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, TYPED_ARRAY_TAG, CONSTRUCTOR_NAME);\n    }\n\n    exported[CONSTRUCTOR_NAME] = TypedArrayConstructor;\n\n    $({\n      global: true, forced: TypedArrayConstructor != NativeTypedArrayConstructor, sham: !NATIVE_ARRAY_BUFFER_VIEWS\n    }, exported);\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayConstructor)) {\n      createNonEnumerableProperty(TypedArrayConstructor, BYTES_PER_ELEMENT, BYTES);\n    }\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayConstructorPrototype)) {\n      createNonEnumerableProperty(TypedArrayConstructorPrototype, BYTES_PER_ELEMENT, BYTES);\n    }\n\n    setSpecies(CONSTRUCTOR_NAME);\n  };\n} else module.exports = function () { /* empty */ };\n","var bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar aConstructor = require('../internals/a-constructor');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar aTypedArrayConstructor = require('../internals/array-buffer-view-core').aTypedArrayConstructor;\n\nmodule.exports = function from(source /* , mapfn, thisArg */) {\n  var C = aConstructor(this);\n  var O = toObject(source);\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var i, length, result, step, iterator, next;\n  if (iteratorMethod && !isArrayIteratorMethod(iteratorMethod)) {\n    iterator = getIterator(O, iteratorMethod);\n    next = iterator.next;\n    O = [];\n    while (!(step = call(next, iterator)).done) {\n      O.push(step.value);\n    }\n  }\n  if (mapping && argumentsLength > 2) {\n    mapfn = bind(mapfn, arguments[2]);\n  }\n  length = lengthOfArrayLike(O);\n  result = new (aTypedArrayConstructor(C))(length);\n  for (i = 0; length > i; i++) {\n    result[i] = mapping ? mapfn(O[i], i) : O[i];\n  }\n  return result;\n};\n","var createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Float32Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Float32', function (init) {\n  return function Float32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","var createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Float64Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Float64', function (init) {\n  return function Float64Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","var createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Int8Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Int8', function (init) {\n  return function Int8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","var createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Int16Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Int16', function (init) {\n  return function Int16Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","var createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Int32Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Int32', function (init) {\n  return function Int32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","var createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Uint8Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Uint8', function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","var createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Uint8ClampedArray` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Uint8', function (init) {\n  return function Uint8ClampedArray(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n}, true);\n","var createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Uint16Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Uint16', function (init) {\n  return function Uint16Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","var createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Uint32Array` constructor\n// https://tc39.es/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Uint32', function (init) {\n  return function Uint32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $ArrayCopyWithin = require('../internals/array-copy-within');\n\nvar u$ArrayCopyWithin = uncurryThis($ArrayCopyWithin);\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.copyWithin` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.copywithin\nexportTypedArrayMethod('copyWithin', function copyWithin(target, start /* , end */) {\n  return u$ArrayCopyWithin(aTypedArray(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $every = require('../internals/array-iteration').every;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.every` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.every\nexportTypedArrayMethod('every', function every(callbackfn /* , thisArg */) {\n  return $every(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar call = require('../internals/function-call');\nvar $fill = require('../internals/array-fill');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.fill` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.fill\nexportTypedArrayMethod('fill', function fill(value /* , start, end */) {\n  var length = arguments.length;\n  return call(\n    $fill,\n    aTypedArray(this),\n    value,\n    length > 1 ? arguments[1] : undefined,\n    length > 2 ? arguments[2] : undefined\n  );\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $filter = require('../internals/array-iteration').filter;\nvar fromSpeciesAndList = require('../internals/typed-array-from-species-and-list');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.filter` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.filter\nexportTypedArrayMethod('filter', function filter(callbackfn /* , thisArg */) {\n  var list = $filter(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  return fromSpeciesAndList(this, list);\n});\n","var lengthOfArrayLike = require('../internals/length-of-array-like');\n\nmodule.exports = function (Constructor, list) {\n  var index = 0;\n  var length = lengthOfArrayLike(list);\n  var result = new Constructor(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n};\n","var ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar speciesConstructor = require('../internals/species-constructor');\n\nvar TYPED_ARRAY_CONSTRUCTOR = ArrayBufferViewCore.TYPED_ARRAY_CONSTRUCTOR;\nvar aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;\n\n// a part of `TypedArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#typedarray-species-create\nmodule.exports = function (originalArray) {\n  return aTypedArrayConstructor(speciesConstructor(originalArray, originalArray[TYPED_ARRAY_CONSTRUCTOR]));\n};\n","var arrayFromConstructorAndList = require('../internals/array-from-constructor-and-list');\nvar typedArraySpeciesConstructor = require('../internals/typed-array-species-constructor');\n\nmodule.exports = function (instance, list) {\n  return arrayFromConstructorAndList(typedArraySpeciesConstructor(instance), list);\n};\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $find = require('../internals/array-iteration').find;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.find` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.find\nexportTypedArrayMethod('find', function find(predicate /* , thisArg */) {\n  return $find(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $findIndex = require('../internals/array-iteration').findIndex;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.findindex\nexportTypedArrayMethod('findIndex', function findIndex(predicate /* , thisArg */) {\n  return $findIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $forEach = require('../internals/array-iteration').forEach;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.foreach\nexportTypedArrayMethod('forEach', function forEach(callbackfn /* , thisArg */) {\n  $forEach(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = require('../internals/typed-array-constructors-require-wrappers');\nvar exportTypedArrayStaticMethod = require('../internals/array-buffer-view-core').exportTypedArrayStaticMethod;\nvar typedArrayFrom = require('../internals/typed-array-from');\n\n// `%TypedArray%.from` method\n// https://tc39.es/ecma262/#sec-%typedarray%.from\nexportTypedArrayStaticMethod('from', typedArrayFrom, TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS);\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $includes = require('../internals/array-includes').includes;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.includes` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.includes\nexportTypedArrayMethod('includes', function includes(searchElement /* , fromIndex */) {\n  return $includes(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $indexOf = require('../internals/array-includes').indexOf;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.indexOf` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.indexof\nexportTypedArrayMethod('indexOf', function indexOf(searchElement /* , fromIndex */) {\n  return $indexOf(aTypedArray(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar ArrayIterators = require('../modules/es.array.iterator');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar Uint8Array = global.Uint8Array;\nvar arrayValues = uncurryThis(ArrayIterators.values);\nvar arrayKeys = uncurryThis(ArrayIterators.keys);\nvar arrayEntries = uncurryThis(ArrayIterators.entries);\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar TypedArrayPrototype = Uint8Array && Uint8Array.prototype;\n\nvar GENERIC = !fails(function () {\n  TypedArrayPrototype[ITERATOR].call([1]);\n});\n\nvar ITERATOR_IS_VALUES = !!TypedArrayPrototype\n  && TypedArrayPrototype.values\n  && TypedArrayPrototype[ITERATOR] === TypedArrayPrototype.values\n  && TypedArrayPrototype.values.name === 'values';\n\nvar typedArrayValues = function values() {\n  return arrayValues(aTypedArray(this));\n};\n\n// `%TypedArray%.prototype.entries` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.entries\nexportTypedArrayMethod('entries', function entries() {\n  return arrayEntries(aTypedArray(this));\n}, GENERIC);\n// `%TypedArray%.prototype.keys` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.keys\nexportTypedArrayMethod('keys', function keys() {\n  return arrayKeys(aTypedArray(this));\n}, GENERIC);\n// `%TypedArray%.prototype.values` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.values\nexportTypedArrayMethod('values', typedArrayValues, GENERIC || !ITERATOR_IS_VALUES, { name: 'values' });\n// `%TypedArray%.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype-@@iterator\nexportTypedArrayMethod(ITERATOR, typedArrayValues, GENERIC || !ITERATOR_IS_VALUES, { name: 'values' });\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar $join = uncurryThis([].join);\n\n// `%TypedArray%.prototype.join` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.join\nexportTypedArrayMethod('join', function join(separator) {\n  return $join(aTypedArray(this), separator);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar apply = require('../internals/function-apply');\nvar $lastIndexOf = require('../internals/array-last-index-of');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.lastIndexOf` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.lastindexof\nexportTypedArrayMethod('lastIndexOf', function lastIndexOf(searchElement /* , fromIndex */) {\n  var length = arguments.length;\n  return apply($lastIndexOf, aTypedArray(this), length > 1 ? [searchElement, arguments[1]] : [searchElement]);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $map = require('../internals/array-iteration').map;\nvar typedArraySpeciesConstructor = require('../internals/typed-array-species-constructor');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.map` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.map\nexportTypedArrayMethod('map', function map(mapfn /* , thisArg */) {\n  return $map(aTypedArray(this), mapfn, arguments.length > 1 ? arguments[1] : undefined, function (O, length) {\n    return new (typedArraySpeciesConstructor(O))(length);\n  });\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = require('../internals/typed-array-constructors-require-wrappers');\n\nvar aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;\nvar exportTypedArrayStaticMethod = ArrayBufferViewCore.exportTypedArrayStaticMethod;\n\n// `%TypedArray%.of` method\n// https://tc39.es/ecma262/#sec-%typedarray%.of\nexportTypedArrayStaticMethod('of', function of(/* ...items */) {\n  var index = 0;\n  var length = arguments.length;\n  var result = new (aTypedArrayConstructor(this))(length);\n  while (length > index) result[index] = arguments[index++];\n  return result;\n}, TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS);\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $reduce = require('../internals/array-reduce').left;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduce\nexportTypedArrayMethod('reduce', function reduce(callbackfn /* , initialValue */) {\n  var length = arguments.length;\n  return $reduce(aTypedArray(this), callbackfn, length, length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $reduceRight = require('../internals/array-reduce').right;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.reduceRicht` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reduceright\nexportTypedArrayMethod('reduceRight', function reduceRight(callbackfn /* , initialValue */) {\n  var length = arguments.length;\n  return $reduceRight(aTypedArray(this), callbackfn, length, length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar floor = Math.floor;\n\n// `%TypedArray%.prototype.reverse` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.reverse\nexportTypedArrayMethod('reverse', function reverse() {\n  var that = this;\n  var length = aTypedArray(that).length;\n  var middle = floor(length / 2);\n  var index = 0;\n  var value;\n  while (index < middle) {\n    value = that[index];\n    that[index++] = that[--length];\n    that[length] = value;\n  } return that;\n});\n","'use strict';\nvar global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toOffset = require('../internals/to-offset');\nvar toIndexedObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\n\nvar RangeError = global.RangeError;\nvar Int8Array = global.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar $set = Int8ArrayPrototype && Int8ArrayPrototype.set;\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS = !fails(function () {\n  // eslint-disable-next-line es/no-typed-arrays -- required for testing\n  var array = new Uint8ClampedArray(2);\n  call($set, array, { length: 1, 0: 3 }, 1);\n  return array[1] !== 3;\n});\n\n// https://bugs.chromium.org/p/v8/issues/detail?id=11294 and other\nvar TO_OBJECT_BUG = WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS && ArrayBufferViewCore.NATIVE_ARRAY_BUFFER_VIEWS && fails(function () {\n  var array = new Int8Array(2);\n  array.set(1);\n  array.set('2', 1);\n  return array[0] !== 0 || array[1] !== 2;\n});\n\n// `%TypedArray%.prototype.set` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.set\nexportTypedArrayMethod('set', function set(arrayLike /* , offset */) {\n  aTypedArray(this);\n  var offset = toOffset(arguments.length > 1 ? arguments[1] : undefined, 1);\n  var src = toIndexedObject(arrayLike);\n  if (WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS) return call($set, this, src, offset);\n  var length = this.length;\n  var len = lengthOfArrayLike(src);\n  var index = 0;\n  if (len + offset > length) throw RangeError('Wrong length');\n  while (index < len) this[offset + index] = src[index++];\n}, !WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS || TO_OBJECT_BUG);\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar typedArraySpeciesConstructor = require('../internals/typed-array-species-constructor');\nvar fails = require('../internals/fails');\nvar arraySlice = require('../internals/array-slice');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar FORCED = fails(function () {\n  // eslint-disable-next-line es/no-typed-arrays -- required for testing\n  new Int8Array(1).slice();\n});\n\n// `%TypedArray%.prototype.slice` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.slice\nexportTypedArrayMethod('slice', function slice(start, end) {\n  var list = arraySlice(aTypedArray(this), start, end);\n  var C = typedArraySpeciesConstructor(this);\n  var index = 0;\n  var length = list.length;\n  var result = new C(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n}, FORCED);\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $some = require('../internals/array-iteration').some;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.some` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.some\nexportTypedArrayMethod('some', function some(callbackfn /* , thisArg */) {\n  return $some(aTypedArray(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar aCallable = require('../internals/a-callable');\nvar internalSort = require('../internals/array-sort');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar Array = global.Array;\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar Uint16Array = global.Uint16Array;\nvar un$Sort = Uint16Array && uncurryThis(Uint16Array.prototype.sort);\n\n// WebKit\nvar ACCEPT_INCORRECT_ARGUMENTS = !!un$Sort && !(fails(function () {\n  un$Sort(new Uint16Array(2), null);\n}) && fails(function () {\n  un$Sort(new Uint16Array(2), {});\n}));\n\nvar STABLE_SORT = !!un$Sort && !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 74;\n  if (FF) return FF < 67;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 602;\n\n  var array = new Uint16Array(516);\n  var expected = Array(516);\n  var index, mod;\n\n  for (index = 0; index < 516; index++) {\n    mod = index % 4;\n    array[index] = 515 - index;\n    expected[index] = index - 2 * mod + 3;\n  }\n\n  un$Sort(array, function (a, b) {\n    return (a / 4 | 0) - (b / 4 | 0);\n  });\n\n  for (index = 0; index < 516; index++) {\n    if (array[index] !== expected[index]) return true;\n  }\n});\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (y !== y) return -1;\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (x !== x) return 1;\n    if (x === 0 && y === 0) return 1 / x > 0 && 1 / y < 0 ? 1 : -1;\n    return x > y;\n  };\n};\n\n// `%TypedArray%.prototype.sort` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.sort\nexportTypedArrayMethod('sort', function sort(comparefn) {\n  if (comparefn !== undefined) aCallable(comparefn);\n  if (STABLE_SORT) return un$Sort(this, comparefn);\n\n  return internalSort(aTypedArray(this), getSortCompare(comparefn));\n}, !STABLE_SORT || ACCEPT_INCORRECT_ARGUMENTS);\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar typedArraySpeciesConstructor = require('../internals/typed-array-species-constructor');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.subarray` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.subarray\nexportTypedArrayMethod('subarray', function subarray(begin, end) {\n  var O = aTypedArray(this);\n  var length = O.length;\n  var beginIndex = toAbsoluteIndex(begin, length);\n  var C = typedArraySpeciesConstructor(O);\n  return new C(\n    O.buffer,\n    O.byteOffset + beginIndex * O.BYTES_PER_ELEMENT,\n    toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - beginIndex)\n  );\n});\n","'use strict';\nvar global = require('../internals/global');\nvar apply = require('../internals/function-apply');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar fails = require('../internals/fails');\nvar arraySlice = require('../internals/array-slice');\n\nvar Int8Array = global.Int8Array;\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar $toLocaleString = [].toLocaleString;\n\n// iOS Safari 6.x fails here\nvar TO_LOCALE_STRING_BUG = !!Int8Array && fails(function () {\n  $toLocaleString.call(new Int8Array(1));\n});\n\nvar FORCED = fails(function () {\n  return [1, 2].toLocaleString() != new Int8Array([1, 2]).toLocaleString();\n}) || !fails(function () {\n  Int8Array.prototype.toLocaleString.call([1, 2]);\n});\n\n// `%TypedArray%.prototype.toLocaleString` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tolocalestring\nexportTypedArrayMethod('toLocaleString', function toLocaleString() {\n  return apply(\n    $toLocaleString,\n    TO_LOCALE_STRING_BUG ? arraySlice(aTypedArray(this)) : aTypedArray(this),\n    arraySlice(arguments)\n  );\n}, FORCED);\n","'use strict';\nvar exportTypedArrayMethod = require('../internals/array-buffer-view-core').exportTypedArrayMethod;\nvar fails = require('../internals/fails');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar Uint8Array = global.Uint8Array;\nvar Uint8ArrayPrototype = Uint8Array && Uint8Array.prototype || {};\nvar arrayToString = [].toString;\nvar join = uncurryThis([].join);\n\nif (fails(function () { arrayToString.call({}); })) {\n  arrayToString = function toString() {\n    return join(this);\n  };\n}\n\nvar IS_NOT_ARRAY_METHOD = Uint8ArrayPrototype.toString != arrayToString;\n\n// `%TypedArray%.prototype.toString` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tostring\nexportTypedArrayMethod('toString', arrayToString, IS_NOT_ARRAY_METHOD);\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar redefineAll = require('../internals/redefine-all');\nvar getWeakData = require('../internals/internal-metadata').getWeakData;\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar ArrayIterationModule = require('../internals/array-iteration');\nvar hasOwn = require('../internals/has-own-property');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\nvar find = ArrayIterationModule.find;\nvar findIndex = ArrayIterationModule.findIndex;\nvar splice = uncurryThis([].splice);\nvar id = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function (store) {\n  return store.frozen || (store.frozen = new UncaughtFrozenStore());\n};\n\nvar UncaughtFrozenStore = function () {\n  this.entries = [];\n};\n\nvar findUncaughtFrozen = function (store, key) {\n  return find(store.entries, function (it) {\n    return it[0] === key;\n  });\n};\n\nUncaughtFrozenStore.prototype = {\n  get: function (key) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) return entry[1];\n  },\n  has: function (key) {\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function (key, value) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) entry[1] = value;\n    else this.entries.push([key, value]);\n  },\n  'delete': function (key) {\n    var index = findIndex(this.entries, function (it) {\n      return it[0] === key;\n    });\n    if (~index) splice(this.entries, index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var Constructor = wrapper(function (that, iterable) {\n      anInstance(that, Prototype);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        id: id++,\n        frozen: undefined\n      });\n      if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var Prototype = Constructor.prototype;\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var data = getWeakData(anObject(key), true);\n      if (data === true) uncaughtFrozenStore(state).set(key, value);\n      else data[state.id] = value;\n      return that;\n    };\n\n    redefineAll(Prototype, {\n      // `{ WeakMap, WeakSet }.prototype.delete(key)` methods\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.delete\n      // https://tc39.es/ecma262/#sec-weakset.prototype.delete\n      'delete': function (key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state)['delete'](key);\n        return data && hasOwn(data, state.id) && delete data[state.id];\n      },\n      // `{ WeakMap, WeakSet }.prototype.has(key)` methods\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.has\n      // https://tc39.es/ecma262/#sec-weakset.prototype.has\n      has: function has(key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state).has(key);\n        return data && hasOwn(data, state.id);\n      }\n    });\n\n    redefineAll(Prototype, IS_MAP ? {\n      // `WeakMap.prototype.get(key)` method\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.get\n      get: function get(key) {\n        var state = getInternalState(this);\n        if (isObject(key)) {\n          var data = getWeakData(key);\n          if (data === true) return uncaughtFrozenStore(state).get(key);\n          return data ? data[state.id] : undefined;\n        }\n      },\n      // `WeakMap.prototype.set(key, value)` method\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.set\n      set: function set(key, value) {\n        return define(this, key, value);\n      }\n    } : {\n      // `WeakSet.prototype.add(value)` method\n      // https://tc39.es/ecma262/#sec-weakset.prototype.add\n      add: function add(value) {\n        return define(this, value, true);\n      }\n    });\n\n    return Constructor;\n  }\n};\n","'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar redefineAll = require('../internals/redefine-all');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar collection = require('../internals/collection');\nvar collectionWeak = require('../internals/collection-weak');\nvar isObject = require('../internals/is-object');\nvar isExtensible = require('../internals/object-is-extensible');\nvar enforceInternalState = require('../internals/internal-state').enforce;\nvar NATIVE_WEAK_MAP = require('../internals/native-weak-map');\n\nvar IS_IE11 = !global.ActiveXObject && 'ActiveXObject' in global;\nvar InternalWeakMap;\n\nvar wrapper = function (init) {\n  return function WeakMap() {\n    return init(this, arguments.length ? arguments[0] : undefined);\n  };\n};\n\n// `WeakMap` constructor\n// https://tc39.es/ecma262/#sec-weakmap-constructor\nvar $WeakMap = collection('WeakMap', wrapper, collectionWeak);\n\n// IE11 WeakMap frozen keys fix\n// We can't use feature detection because it crash some old IE builds\n// https://github.com/zloirock/core-js/issues/485\nif (NATIVE_WEAK_MAP && IS_IE11) {\n  InternalWeakMap = collectionWeak.getConstructor(wrapper, 'WeakMap', true);\n  InternalMetadataModule.enable();\n  var WeakMapPrototype = $WeakMap.prototype;\n  var nativeDelete = uncurryThis(WeakMapPrototype['delete']);\n  var nativeHas = uncurryThis(WeakMapPrototype.has);\n  var nativeGet = uncurryThis(WeakMapPrototype.get);\n  var nativeSet = uncurryThis(WeakMapPrototype.set);\n  redefineAll(WeakMapPrototype, {\n    'delete': function (key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeDelete(this, key) || state.frozen['delete'](key);\n      } return nativeDelete(this, key);\n    },\n    has: function has(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas(this, key) || state.frozen.has(key);\n      } return nativeHas(this, key);\n    },\n    get: function get(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas(this, key) ? nativeGet(this, key) : state.frozen.get(key);\n      } return nativeGet(this, key);\n    },\n    set: function set(key, value) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        nativeHas(this, key) ? nativeSet(this, key, value) : state.frozen.set(key, value);\n      } else nativeSet(this, key, value);\n      return this;\n    }\n  });\n}\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionWeak = require('../internals/collection-weak');\n\n// `WeakSet` constructor\n// https://tc39.es/ecma262/#sec-weakset-constructor\ncollection('WeakSet', function (init) {\n  return function WeakSet() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionWeak);\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String(Error(arg).stack); })('zxcasd');\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string') {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n","var isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\n// `InstallErrorCause` abstract operation\n// https://tc39.es/proposal-error-cause/#sec-errorobjects-install-error-cause\nmodule.exports = function (O, options) {\n  if (isObject(options) && 'cause' in options) {\n    createNonEnumerableProperty(O, 'cause', options.cause);\n  }\n};\n","var toString = require('../internals/to-string');\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n","var fails = require('../internals/fails');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = !fails(function () {\n  var error = Error('a');\n  if (!('stack' in error)) return true;\n  // eslint-disable-next-line es/no-object-defineproperty -- safe\n  Object.defineProperty(error, 'stack', createPropertyDescriptor(1, 7));\n  return error.stack !== 7;\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar create = require('../internals/object-create');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar clearErrorStack = require('../internals/clear-error-stack');\nvar installErrorCause = require('../internals/install-error-cause');\nvar iterate = require('../internals/iterate');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar ERROR_STACK_INSTALLABLE = require('../internals/error-stack-installable');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar Error = global.Error;\nvar push = [].push;\n\nvar $AggregateError = function AggregateError(errors, message /* , options */) {\n  var options = arguments.length > 2 ? arguments[2] : undefined;\n  var isInstance = isPrototypeOf(AggregateErrorPrototype, this);\n  var that;\n  if (setPrototypeOf) {\n    that = setPrototypeOf(new Error(), isInstance ? getPrototypeOf(this) : AggregateErrorPrototype);\n  } else {\n    that = isInstance ? this : create(AggregateErrorPrototype);\n    createNonEnumerableProperty(that, TO_STRING_TAG, 'Error');\n  }\n  if (message !== undefined) createNonEnumerableProperty(that, 'message', normalizeStringArgument(message));\n  if (ERROR_STACK_INSTALLABLE) createNonEnumerableProperty(that, 'stack', clearErrorStack(that.stack, 1));\n  installErrorCause(that, options);\n  var errorsArray = [];\n  iterate(errors, push, { that: errorsArray });\n  createNonEnumerableProperty(that, 'errors', errorsArray);\n  return that;\n};\n\nif (setPrototypeOf) setPrototypeOf($AggregateError, Error);\nelse copyConstructorProperties($AggregateError, Error, { name: true });\n\nvar AggregateErrorPrototype = $AggregateError.prototype = create(Error.prototype, {\n  constructor: createPropertyDescriptor(1, $AggregateError),\n  message: createPropertyDescriptor(1, ''),\n  name: createPropertyDescriptor(1, 'AggregateError')\n});\n\n// `AggregateError` constructor\n// https://tc39.es/ecma262/#sec-aggregate-error-constructor\n$({ global: true }, {\n  AggregateError: $AggregateError\n});\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar defineProperty = require('../internals/object-define-property').f;\n\n// `Array.prototype.lastIndex` getter\n// https://github.com/keithamus/proposal-array-last\nif (DESCRIPTORS && !('lastIndex' in [])) {\n  defineProperty(Array.prototype, 'lastIndex', {\n    configurable: true,\n    get: function lastIndex() {\n      var O = toObject(this);\n      var len = lengthOfArrayLike(O);\n      return len == 0 ? 0 : len - 1;\n    }\n  });\n\n  addToUnscopables('lastIndex');\n}\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar defineProperty = require('../internals/object-define-property').f;\n\n// `Array.prototype.lastIndex` accessor\n// https://github.com/keithamus/proposal-array-last\nif (DESCRIPTORS && !('lastItem' in [])) {\n  defineProperty(Array.prototype, 'lastItem', {\n    configurable: true,\n    get: function lastItem() {\n      var O = toObject(this);\n      var len = lengthOfArrayLike(O);\n      return len == 0 ? undefined : O[len - 1];\n    },\n    set: function lastItem(value) {\n      var O = toObject(this);\n      var len = lengthOfArrayLike(O);\n      return O[len == 0 ? 0 : len - 1] = value;\n    }\n  });\n\n  addToUnscopables('lastItem');\n}\n","// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`\nrequire('../modules/es.map');\nrequire('../modules/es.weak-map');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar create = require('../internals/object-create');\nvar isObject = require('../internals/is-object');\n\nvar Object = global.Object;\nvar TypeError = global.TypeError;\nvar Map = getBuiltIn('Map');\nvar WeakMap = getBuiltIn('WeakMap');\n\nvar Node = function () {\n  // keys\n  this.object = null;\n  this.symbol = null;\n  // child nodes\n  this.primitives = null;\n  this.objectsByIndex = create(null);\n};\n\nNode.prototype.get = function (key, initializer) {\n  return this[key] || (this[key] = initializer());\n};\n\nNode.prototype.next = function (i, it, IS_OBJECT) {\n  var store = IS_OBJECT\n    ? this.objectsByIndex[i] || (this.objectsByIndex[i] = new WeakMap())\n    : this.primitives || (this.primitives = new Map());\n  var entry = store.get(it);\n  if (!entry) store.set(it, entry = new Node());\n  return entry;\n};\n\nvar root = new Node();\n\nmodule.exports = function () {\n  var active = root;\n  var length = arguments.length;\n  var i, it;\n  // for prevent leaking, start from objects\n  for (i = 0; i < length; i++) {\n    if (isObject(it = arguments[i])) active = active.next(i, it, true);\n  }\n  if (this === Object && active === root) throw TypeError('Composite keys must contain a non-primitive component');\n  for (i = 0; i < length; i++) {\n    if (!isObject(it = arguments[i])) active = active.next(i, it, false);\n  } return active;\n};\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar apply = require('../internals/function-apply');\nvar getCompositeKeyNode = require('../internals/composite-key');\nvar getBuiltIn = require('../internals/get-built-in');\nvar create = require('../internals/object-create');\n\nvar Object = global.Object;\n\nvar initializer = function () {\n  var freeze = getBuiltIn('Object', 'freeze');\n  return freeze ? freeze(create(null)) : create(null);\n};\n\n// https://github.com/tc39/proposal-richer-keys/tree/master/compositeKey\n$({ global: true }, {\n  compositeKey: function compositeKey() {\n    return apply(getCompositeKeyNode, Object, arguments).get('object', initializer);\n  }\n});\n","var $ = require('../internals/export');\nvar getCompositeKeyNode = require('../internals/composite-key');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\n\n// https://github.com/tc39/proposal-richer-keys/tree/master/compositeKey\n$({ global: true }, {\n  compositeSymbol: function compositeSymbol() {\n    if (arguments.length == 1 && typeof arguments[0] == 'string') return getBuiltIn('Symbol')['for'](arguments[0]);\n    return apply(getCompositeKeyNode, null, arguments).get('symbol', getBuiltIn('Symbol'));\n  }\n});\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\n\n// `globalThis` object\n// https://tc39.es/ecma262/#sec-globalthis\n$({ global: true }, {\n  globalThis: global\n});\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\n\n// https://github.com/tc39/collection-methods\nmodule.exports = function deleteAll(/* ...elements */) {\n  var collection = anObject(this);\n  var remover = aCallable(collection['delete']);\n  var allDeleted = true;\n  var wasDeleted;\n  for (var k = 0, len = arguments.length; k < len; k++) {\n    wasDeleted = call(remover, collection, arguments[k]);\n    allDeleted = allDeleted && wasDeleted;\n  }\n  return !!allDeleted;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar deleteAll = require('../internals/collection-delete-all');\n\n// `Map.prototype.deleteAll` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  deleteAll: deleteAll\n});\n","var call = require('../internals/function-call');\n\nmodule.exports = function (it) {\n  // eslint-disable-next-line es/no-map -- safe\n  return call(Map.prototype.entries, it);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.every` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  every: function every(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return !iterate(iterator, function (key, value, stop) {\n      if (!boundFunction(value, key, map)) return stop();\n    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar speciesConstructor = require('../internals/species-constructor');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.filter` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    var newMap = new (speciesConstructor(map, getBuiltIn('Map')))();\n    var setter = aCallable(newMap.set);\n    iterate(iterator, function (key, value) {\n      if (boundFunction(value, key, map)) call(setter, newMap, key, value);\n    }, { AS_ENTRIES: true, IS_ITERATOR: true });\n    return newMap;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.find` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  find: function find(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return iterate(iterator, function (key, value, stop) {\n      if (boundFunction(value, key, map)) return stop(value);\n    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.findKey` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  findKey: function findKey(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return iterate(iterator, function (key, value, stop) {\n      if (boundFunction(value, key, map)) return stop(key);\n    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).result;\n  }\n});\n","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar aConstructor = require('../internals/a-constructor');\nvar iterate = require('../internals/iterate');\n\nvar push = [].push;\n\nmodule.exports = function from(source /* , mapFn, thisArg */) {\n  var length = arguments.length;\n  var mapFn = length > 1 ? arguments[1] : undefined;\n  var mapping, array, n, boundFunction;\n  aConstructor(this);\n  mapping = mapFn !== undefined;\n  if (mapping) aCallable(mapFn);\n  if (source == undefined) return new this();\n  array = [];\n  if (mapping) {\n    n = 0;\n    boundFunction = bind(mapFn, length > 2 ? arguments[2] : undefined);\n    iterate(source, function (nextItem) {\n      call(push, array, boundFunction(nextItem, n++));\n    });\n  } else {\n    iterate(source, push, { that: array });\n  }\n  return new this(array);\n};\n","var $ = require('../internals/export');\nvar from = require('../internals/collection-from');\n\n// `Map.from` method\n// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from\n$({ target: 'Map', stat: true }, {\n  from: from\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar getIterator = require('../internals/get-iterator');\nvar iterate = require('../internals/iterate');\n\nvar push = uncurryThis([].push);\n\n// `Map.groupBy` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', stat: true }, {\n  groupBy: function groupBy(iterable, keyDerivative) {\n    aCallable(keyDerivative);\n    var iterator = getIterator(iterable);\n    var newMap = new this();\n    var has = aCallable(newMap.has);\n    var get = aCallable(newMap.get);\n    var set = aCallable(newMap.set);\n    iterate(iterator, function (element) {\n      var derivedKey = keyDerivative(element);\n      if (!call(has, newMap, derivedKey)) call(set, newMap, derivedKey, [element]);\n      else push(call(get, newMap, derivedKey), element);\n    }, { IS_ITERATOR: true });\n    return newMap;\n  }\n});\n","// `SameValueZero` abstract operation\n// https://tc39.es/ecma262/#sec-samevaluezero\nmodule.exports = function (x, y) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return x === y || x != x && y != y;\n};\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar anObject = require('../internals/an-object');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar sameValueZero = require('../internals/same-value-zero');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.includes` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  includes: function includes(searchElement) {\n    return iterate(getMapIterator(anObject(this)), function (key, value, stop) {\n      if (sameValueZero(value, searchElement)) return stop();\n    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\n\n// `Map.keyBy` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', stat: true }, {\n  keyBy: function keyBy(iterable, keyDerivative) {\n    var newMap = new this();\n    aCallable(keyDerivative);\n    var setter = aCallable(newMap.set);\n    iterate(iterable, function (element) {\n      call(setter, newMap, keyDerivative(element), element);\n    });\n    return newMap;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.keyOf` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  keyOf: function keyOf(searchElement) {\n    return iterate(getMapIterator(anObject(this)), function (key, value, stop) {\n      if (value === searchElement) return stop(key);\n    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).result;\n  }\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar speciesConstructor = require('../internals/species-constructor');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.mapKeys` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  mapKeys: function mapKeys(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    var newMap = new (speciesConstructor(map, getBuiltIn('Map')))();\n    var setter = aCallable(newMap.set);\n    iterate(iterator, function (key, value) {\n      call(setter, newMap, boundFunction(value, key, map), value);\n    }, { AS_ENTRIES: true, IS_ITERATOR: true });\n    return newMap;\n  }\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar speciesConstructor = require('../internals/species-constructor');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.mapValues` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  mapValues: function mapValues(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    var newMap = new (speciesConstructor(map, getBuiltIn('Map')))();\n    var setter = aCallable(newMap.set);\n    iterate(iterator, function (key, value) {\n      call(setter, newMap, key, boundFunction(value, key, map));\n    }, { AS_ENTRIES: true, IS_ITERATOR: true });\n    return newMap;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar iterate = require('../internals/iterate');\n\n// `Map.prototype.merge` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  merge: function merge(iterable /* ...iterables */) {\n    var map = anObject(this);\n    var setter = aCallable(map.set);\n    var argumentsLength = arguments.length;\n    var i = 0;\n    while (i < argumentsLength) {\n      iterate(arguments[i++], setter, { that: map, AS_ENTRIES: true });\n    }\n    return map;\n  }\n});\n","'use strict';\nvar arraySlice = require('../internals/array-slice');\n\n// https://tc39.github.io/proposal-setmap-offrom/\nmodule.exports = function of() {\n  return new this(arraySlice(arguments));\n};\n","var $ = require('../internals/export');\nvar of = require('../internals/collection-of');\n\n// `Map.of` method\n// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of\n$({ target: 'Map', stat: true }, {\n  of: of\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar aCallable = require('../internals/a-callable');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\nvar TypeError = global.TypeError;\n\n// `Map.prototype.reduce` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    aCallable(callbackfn);\n    iterate(iterator, function (key, value) {\n      if (noInitial) {\n        noInitial = false;\n        accumulator = value;\n      } else {\n        accumulator = callbackfn(accumulator, value, key, map);\n      }\n    }, { AS_ENTRIES: true, IS_ITERATOR: true });\n    if (noInitial) throw TypeError('Reduce of empty map with no initial value');\n    return accumulator;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getMapIterator = require('../internals/get-map-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.some` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  some: function some(callbackfn /* , thisArg */) {\n    var map = anObject(this);\n    var iterator = getMapIterator(map);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return iterate(iterator, function (key, value, stop) {\n      if (boundFunction(value, key, map)) return stop();\n    }, { AS_ENTRIES: true, IS_ITERATOR: true, INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar aCallable = require('../internals/a-callable');\n\nvar TypeError = global.TypeError;\n\n// `Set.prototype.update` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Map', proto: true, real: true, forced: IS_PURE }, {\n  update: function update(key, callback /* , thunk */) {\n    var map = anObject(this);\n    var get = aCallable(map.get);\n    var has = aCallable(map.has);\n    var set = aCallable(map.set);\n    var length = arguments.length;\n    aCallable(callback);\n    var isPresentInMap = call(has, map, key);\n    if (!isPresentInMap && length < 3) {\n      throw TypeError('Updating absent value');\n    }\n    var value = isPresentInMap ? call(get, map, key) : aCallable(length > 2 ? arguments[2] : undefined)(key, map);\n    call(set, map, key, callback(value, key, map));\n    return map;\n  }\n});\n","var $ = require('../internals/export');\n\nvar min = Math.min;\nvar max = Math.max;\n\n// `Math.clamp` method\n// https://rwaldron.github.io/proposal-math-extensions/\n$({ target: 'Math', stat: true }, {\n  clamp: function clamp(x, lower, upper) {\n    return min(upper, max(lower, x));\n  }\n});\n","var $ = require('../internals/export');\n\n// `Math.DEG_PER_RAD` constant\n// https://rwaldron.github.io/proposal-math-extensions/\n$({ target: 'Math', stat: true }, {\n  DEG_PER_RAD: Math.PI / 180\n});\n","var $ = require('../internals/export');\n\nvar RAD_PER_DEG = 180 / Math.PI;\n\n// `Math.degrees` method\n// https://rwaldron.github.io/proposal-math-extensions/\n$({ target: 'Math', stat: true }, {\n  degrees: function degrees(radians) {\n    return radians * RAD_PER_DEG;\n  }\n});\n","// `Math.scale` method implementation\n// https://rwaldron.github.io/proposal-math-extensions/\nmodule.exports = Math.scale || function scale(x, inLow, inHigh, outLow, outHigh) {\n  var nx = +x;\n  var nInLow = +inLow;\n  var nInHigh = +inHigh;\n  var nOutLow = +outLow;\n  var nOutHigh = +outHigh;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (nx != nx || nInLow != nInLow || nInHigh != nInHigh || nOutLow != nOutLow || nOutHigh != nOutHigh) return NaN;\n  if (nx === Infinity || nx === -Infinity) return nx;\n  return (nx - nInLow) * (nOutHigh - nOutLow) / (nInHigh - nInLow) + nOutLow;\n};\n","var $ = require('../internals/export');\n\nvar scale = require('../internals/math-scale');\nvar fround = require('../internals/math-fround');\n\n// `Math.fscale` method\n// https://rwaldron.github.io/proposal-math-extensions/\n$({ target: 'Math', stat: true }, {\n  fscale: function fscale(x, inLow, inHigh, outLow, outHigh) {\n    return fround(scale(x, inLow, inHigh, outLow, outHigh));\n  }\n});\n","var $ = require('../internals/export');\n\n// `Math.iaddh` method\n// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\n// TODO: Remove from `core-js@4`\n$({ target: 'Math', stat: true }, {\n  iaddh: function iaddh(x0, x1, y0, y1) {\n    var $x0 = x0 >>> 0;\n    var $x1 = x1 >>> 0;\n    var $y0 = y0 >>> 0;\n    return $x1 + (y1 >>> 0) + (($x0 & $y0 | ($x0 | $y0) & ~($x0 + $y0 >>> 0)) >>> 31) | 0;\n  }\n});\n","var $ = require('../internals/export');\n\n// `Math.imulh` method\n// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\n// TODO: Remove from `core-js@4`\n$({ target: 'Math', stat: true }, {\n  imulh: function imulh(u, v) {\n    var UINT16 = 0xFFFF;\n    var $u = +u;\n    var $v = +v;\n    var u0 = $u & UINT16;\n    var v0 = $v & UINT16;\n    var u1 = $u >> 16;\n    var v1 = $v >> 16;\n    var t = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);\n    return u1 * v1 + (t >> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >> 16);\n  }\n});\n","var $ = require('../internals/export');\n\n// `Math.isubh` method\n// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\n// TODO: Remove from `core-js@4`\n$({ target: 'Math', stat: true }, {\n  isubh: function isubh(x0, x1, y0, y1) {\n    var $x0 = x0 >>> 0;\n    var $x1 = x1 >>> 0;\n    var $y0 = y0 >>> 0;\n    return $x1 - (y1 >>> 0) - ((~$x0 & $y0 | ~($x0 ^ $y0) & $x0 - $y0 >>> 0) >>> 31) | 0;\n  }\n});\n","var $ = require('../internals/export');\n\n// `Math.RAD_PER_DEG` constant\n// https://rwaldron.github.io/proposal-math-extensions/\n$({ target: 'Math', stat: true }, {\n  RAD_PER_DEG: 180 / Math.PI\n});\n","var $ = require('../internals/export');\n\nvar DEG_PER_RAD = Math.PI / 180;\n\n// `Math.radians` method\n// https://rwaldron.github.io/proposal-math-extensions/\n$({ target: 'Math', stat: true }, {\n  radians: function radians(degrees) {\n    return degrees * DEG_PER_RAD;\n  }\n});\n","var $ = require('../internals/export');\nvar scale = require('../internals/math-scale');\n\n// `Math.scale` method\n// https://rwaldron.github.io/proposal-math-extensions/\n$({ target: 'Math', stat: true }, {\n  scale: scale\n});\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar anObject = require('../internals/an-object');\nvar numberIsFinite = require('../internals/number-is-finite');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar SEEDED_RANDOM = 'Seeded Random';\nvar SEEDED_RANDOM_GENERATOR = SEEDED_RANDOM + ' Generator';\nvar SEED_TYPE_ERROR = 'Math.seededPRNG() argument should have a \"seed\" field with a finite value.';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(SEEDED_RANDOM_GENERATOR);\nvar TypeError = global.TypeError;\n\nvar $SeededRandomGenerator = createIteratorConstructor(function SeededRandomGenerator(seed) {\n  setInternalState(this, {\n    type: SEEDED_RANDOM_GENERATOR,\n    seed: seed % 2147483647\n  });\n}, SEEDED_RANDOM, function next() {\n  var state = getInternalState(this);\n  var seed = state.seed = (state.seed * 1103515245 + 12345) % 2147483647;\n  return { value: (seed & 1073741823) / 1073741823, done: false };\n});\n\n// `Math.seededPRNG` method\n// https://github.com/tc39/proposal-seeded-random\n// based on https://github.com/tc39/proposal-seeded-random/blob/78b8258835b57fc2100d076151ab506bc3202ae6/demo.html\n$({ target: 'Math', stat: true, forced: true }, {\n  seededPRNG: function seededPRNG(it) {\n    var seed = anObject(it).seed;\n    if (!numberIsFinite(seed)) throw TypeError(SEED_TYPE_ERROR);\n    return new $SeededRandomGenerator(seed);\n  }\n});\n","var $ = require('../internals/export');\n\n// `Math.signbit` method\n// https://github.com/tc39/proposal-Math.signbit\n$({ target: 'Math', stat: true }, {\n  signbit: function signbit(x) {\n    return (x = +x) == x && x == 0 ? 1 / x == -Infinity : x < 0;\n  }\n});\n","var $ = require('../internals/export');\n\n// `Math.umulh` method\n// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\n// TODO: Remove from `core-js@4`\n$({ target: 'Math', stat: true }, {\n  umulh: function umulh(u, v) {\n    var UINT16 = 0xFFFF;\n    var $u = +u;\n    var $v = +v;\n    var u0 = $u & UINT16;\n    var v0 = $v & UINT16;\n    var u1 = $u >>> 16;\n    var v1 = $v >>> 16;\n    var t = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);\n    return u1 * v1 + (t >>> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >>> 16);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar parseInt = require('../internals/number-parse-int');\n\nvar INVALID_NUMBER_REPRESENTATION = 'Invalid number representation';\nvar INVALID_RADIX = 'Invalid radix';\nvar RangeError = global.RangeError;\nvar SyntaxError = global.SyntaxError;\nvar TypeError = global.TypeError;\nvar valid = /^[\\da-z]+$/;\nvar charAt = uncurryThis(''.charAt);\nvar exec = uncurryThis(valid.exec);\nvar numberToString = uncurryThis(1.0.toString);\nvar stringSlice = uncurryThis(''.slice);\n\n// `Number.fromString` method\n// https://github.com/tc39/proposal-number-fromstring\n$({ target: 'Number', stat: true }, {\n  fromString: function fromString(string, radix) {\n    var sign = 1;\n    var R, mathNum;\n    if (typeof string != 'string') throw TypeError(INVALID_NUMBER_REPRESENTATION);\n    if (!string.length) throw SyntaxError(INVALID_NUMBER_REPRESENTATION);\n    if (charAt(string, 0) == '-') {\n      sign = -1;\n      string = stringSlice(string, 1);\n      if (!string.length) throw SyntaxError(INVALID_NUMBER_REPRESENTATION);\n    }\n    R = radix === undefined ? 10 : toIntegerOrInfinity(radix);\n    if (R < 2 || R > 36) throw RangeError(INVALID_RADIX);\n    if (!exec(valid, string) || numberToString(mathNum = parseInt(string, R), R) !== string) {\n      throw SyntaxError(INVALID_NUMBER_REPRESENTATION);\n    }\n    return sign * mathNum;\n  }\n});\n","'use strict';\n// https://github.com/tc39/proposal-observable\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar setSpecies = require('../internals/set-species');\nvar aCallable = require('../internals/a-callable');\nvar isCallable = require('../internals/is-callable');\nvar isConstructor = require('../internals/is-constructor');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar anInstance = require('../internals/an-instance');\nvar defineProperty = require('../internals/object-define-property').f;\nvar redefine = require('../internals/redefine');\nvar redefineAll = require('../internals/redefine-all');\nvar getIterator = require('../internals/get-iterator');\nvar getMethod = require('../internals/get-method');\nvar iterate = require('../internals/iterate');\nvar hostReportErrors = require('../internals/host-report-errors');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar $$OBSERVABLE = wellKnownSymbol('observable');\nvar OBSERVABLE = 'Observable';\nvar SUBSCRIPTION = 'Subscription';\nvar SUBSCRIPTION_OBSERVER = 'SubscriptionObserver';\nvar getterFor = InternalStateModule.getterFor;\nvar setInternalState = InternalStateModule.set;\nvar getObservableInternalState = getterFor(OBSERVABLE);\nvar getSubscriptionInternalState = getterFor(SUBSCRIPTION);\nvar getSubscriptionObserverInternalState = getterFor(SUBSCRIPTION_OBSERVER);\nvar Array = global.Array;\n\nvar SubscriptionState = function (observer) {\n  this.observer = anObject(observer);\n  this.cleanup = undefined;\n  this.subscriptionObserver = undefined;\n};\n\nSubscriptionState.prototype = {\n  type: SUBSCRIPTION,\n  clean: function () {\n    var cleanup = this.cleanup;\n    if (cleanup) {\n      this.cleanup = undefined;\n      try {\n        cleanup();\n      } catch (error) {\n        hostReportErrors(error);\n      }\n    }\n  },\n  close: function () {\n    if (!DESCRIPTORS) {\n      var subscription = this.facade;\n      var subscriptionObserver = this.subscriptionObserver;\n      subscription.closed = true;\n      if (subscriptionObserver) subscriptionObserver.closed = true;\n    } this.observer = undefined;\n  },\n  isClosed: function () {\n    return this.observer === undefined;\n  }\n};\n\nvar Subscription = function (observer, subscriber) {\n  var subscriptionState = setInternalState(this, new SubscriptionState(observer));\n  var start;\n  if (!DESCRIPTORS) this.closed = false;\n  try {\n    if (start = getMethod(observer, 'start')) call(start, observer, this);\n  } catch (error) {\n    hostReportErrors(error);\n  }\n  if (subscriptionState.isClosed()) return;\n  var subscriptionObserver = subscriptionState.subscriptionObserver = new SubscriptionObserver(subscriptionState);\n  try {\n    var cleanup = subscriber(subscriptionObserver);\n    var subscription = cleanup;\n    if (cleanup != null) subscriptionState.cleanup = isCallable(cleanup.unsubscribe)\n      ? function () { subscription.unsubscribe(); }\n      : aCallable(cleanup);\n  } catch (error) {\n    subscriptionObserver.error(error);\n    return;\n  } if (subscriptionState.isClosed()) subscriptionState.clean();\n};\n\nSubscription.prototype = redefineAll({}, {\n  unsubscribe: function unsubscribe() {\n    var subscriptionState = getSubscriptionInternalState(this);\n    if (!subscriptionState.isClosed()) {\n      subscriptionState.close();\n      subscriptionState.clean();\n    }\n  }\n});\n\nif (DESCRIPTORS) defineProperty(Subscription.prototype, 'closed', {\n  configurable: true,\n  get: function () {\n    return getSubscriptionInternalState(this).isClosed();\n  }\n});\n\nvar SubscriptionObserver = function (subscriptionState) {\n  setInternalState(this, {\n    type: SUBSCRIPTION_OBSERVER,\n    subscriptionState: subscriptionState\n  });\n  if (!DESCRIPTORS) this.closed = false;\n};\n\nSubscriptionObserver.prototype = redefineAll({}, {\n  next: function next(value) {\n    var subscriptionState = getSubscriptionObserverInternalState(this).subscriptionState;\n    if (!subscriptionState.isClosed()) {\n      var observer = subscriptionState.observer;\n      try {\n        var nextMethod = getMethod(observer, 'next');\n        if (nextMethod) call(nextMethod, observer, value);\n      } catch (error) {\n        hostReportErrors(error);\n      }\n    }\n  },\n  error: function error(value) {\n    var subscriptionState = getSubscriptionObserverInternalState(this).subscriptionState;\n    if (!subscriptionState.isClosed()) {\n      var observer = subscriptionState.observer;\n      subscriptionState.close();\n      try {\n        var errorMethod = getMethod(observer, 'error');\n        if (errorMethod) call(errorMethod, observer, value);\n        else hostReportErrors(value);\n      } catch (err) {\n        hostReportErrors(err);\n      } subscriptionState.clean();\n    }\n  },\n  complete: function complete() {\n    var subscriptionState = getSubscriptionObserverInternalState(this).subscriptionState;\n    if (!subscriptionState.isClosed()) {\n      var observer = subscriptionState.observer;\n      subscriptionState.close();\n      try {\n        var completeMethod = getMethod(observer, 'complete');\n        if (completeMethod) call(completeMethod, observer);\n      } catch (error) {\n        hostReportErrors(error);\n      } subscriptionState.clean();\n    }\n  }\n});\n\nif (DESCRIPTORS) defineProperty(SubscriptionObserver.prototype, 'closed', {\n  configurable: true,\n  get: function () {\n    return getSubscriptionObserverInternalState(this).subscriptionState.isClosed();\n  }\n});\n\nvar $Observable = function Observable(subscriber) {\n  anInstance(this, ObservablePrototype);\n  setInternalState(this, {\n    type: OBSERVABLE,\n    subscriber: aCallable(subscriber)\n  });\n};\n\nvar ObservablePrototype = $Observable.prototype;\n\nredefineAll(ObservablePrototype, {\n  subscribe: function subscribe(observer) {\n    var length = arguments.length;\n    return new Subscription(isCallable(observer) ? {\n      next: observer,\n      error: length > 1 ? arguments[1] : undefined,\n      complete: length > 2 ? arguments[2] : undefined\n    } : isObject(observer) ? observer : {}, getObservableInternalState(this).subscriber);\n  }\n});\n\nredefineAll($Observable, {\n  from: function from(x) {\n    var C = isConstructor(this) ? this : $Observable;\n    var observableMethod = getMethod(anObject(x), $$OBSERVABLE);\n    if (observableMethod) {\n      var observable = anObject(call(observableMethod, x));\n      return observable.constructor === C ? observable : new C(function (observer) {\n        return observable.subscribe(observer);\n      });\n    }\n    var iterator = getIterator(x);\n    return new C(function (observer) {\n      iterate(iterator, function (it, stop) {\n        observer.next(it);\n        if (observer.closed) return stop();\n      }, { IS_ITERATOR: true, INTERRUPTED: true });\n      observer.complete();\n    });\n  },\n  of: function of() {\n    var C = isConstructor(this) ? this : $Observable;\n    var length = arguments.length;\n    var items = Array(length);\n    var index = 0;\n    while (index < length) items[index] = arguments[index++];\n    return new C(function (observer) {\n      for (var i = 0; i < length; i++) {\n        observer.next(items[i]);\n        if (observer.closed) return;\n      } observer.complete();\n    });\n  }\n});\n\nredefine(ObservablePrototype, $$OBSERVABLE, function () { return this; });\n\n$({ global: true }, {\n  Observable: $Observable\n});\n\nsetSpecies(OBSERVABLE);\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar iterate = require('../internals/iterate');\n\n// `Promise.allSettled` method\n// https://tc39.es/ecma262/#sec-promise.allsettled\n$({ target: 'Promise', stat: true }, {\n  allSettled: function allSettled(iterable) {\n    var C = this;\n    var capability = newPromiseCapabilityModule.f(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var promiseResolve = aCallable(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        remaining++;\n        call(promiseResolve, C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = { status: 'fulfilled', value: value };\n          --remaining || resolve(values);\n        }, function (error) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = { status: 'rejected', reason: error };\n          --remaining || resolve(values);\n        });\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar aCallable = require('../internals/a-callable');\nvar getBuiltIn = require('../internals/get-built-in');\nvar call = require('../internals/function-call');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar iterate = require('../internals/iterate');\n\nvar PROMISE_ANY_ERROR = 'No one promise resolved';\n\n// `Promise.any` method\n// https://tc39.es/ecma262/#sec-promise.any\n$({ target: 'Promise', stat: true }, {\n  any: function any(iterable) {\n    var C = this;\n    var AggregateError = getBuiltIn('AggregateError');\n    var capability = newPromiseCapabilityModule.f(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var promiseResolve = aCallable(C.resolve);\n      var errors = [];\n      var counter = 0;\n      var remaining = 1;\n      var alreadyResolved = false;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyRejected = false;\n        remaining++;\n        call(promiseResolve, C, promise).then(function (value) {\n          if (alreadyRejected || alreadyResolved) return;\n          alreadyResolved = true;\n          resolve(value);\n        }, function (error) {\n          if (alreadyRejected || alreadyResolved) return;\n          alreadyRejected = true;\n          errors[index] = error;\n          --remaining || reject(new AggregateError(errors, PROMISE_ANY_ERROR));\n        });\n      });\n      --remaining || reject(new AggregateError(errors, PROMISE_ANY_ERROR));\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\n\n// `Promise.try` method\n// https://github.com/tc39/proposal-promise-try\n$({ target: 'Promise', stat: true }, {\n  'try': function (callbackfn) {\n    var promiseCapability = newPromiseCapabilityModule.f(this);\n    var result = perform(callbackfn);\n    (result.error ? promiseCapability.reject : promiseCapability.resolve)(result.value);\n    return promiseCapability.promise;\n  }\n});\n","// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`\nrequire('../modules/es.map');\nrequire('../modules/es.weak-map');\nvar getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar shared = require('../internals/shared');\n\nvar Map = getBuiltIn('Map');\nvar WeakMap = getBuiltIn('WeakMap');\nvar push = uncurryThis([].push);\n\nvar metadata = shared('metadata');\nvar store = metadata.store || (metadata.store = new WeakMap());\n\nvar getOrCreateMetadataMap = function (target, targetKey, create) {\n  var targetMetadata = store.get(target);\n  if (!targetMetadata) {\n    if (!create) return;\n    store.set(target, targetMetadata = new Map());\n  }\n  var keyMetadata = targetMetadata.get(targetKey);\n  if (!keyMetadata) {\n    if (!create) return;\n    targetMetadata.set(targetKey, keyMetadata = new Map());\n  } return keyMetadata;\n};\n\nvar ordinaryHasOwnMetadata = function (MetadataKey, O, P) {\n  var metadataMap = getOrCreateMetadataMap(O, P, false);\n  return metadataMap === undefined ? false : metadataMap.has(MetadataKey);\n};\n\nvar ordinaryGetOwnMetadata = function (MetadataKey, O, P) {\n  var metadataMap = getOrCreateMetadataMap(O, P, false);\n  return metadataMap === undefined ? undefined : metadataMap.get(MetadataKey);\n};\n\nvar ordinaryDefineOwnMetadata = function (MetadataKey, MetadataValue, O, P) {\n  getOrCreateMetadataMap(O, P, true).set(MetadataKey, MetadataValue);\n};\n\nvar ordinaryOwnMetadataKeys = function (target, targetKey) {\n  var metadataMap = getOrCreateMetadataMap(target, targetKey, false);\n  var keys = [];\n  if (metadataMap) metadataMap.forEach(function (_, key) { push(keys, key); });\n  return keys;\n};\n\nvar toMetadataKey = function (it) {\n  return it === undefined || typeof it == 'symbol' ? it : String(it);\n};\n\nmodule.exports = {\n  store: store,\n  getMap: getOrCreateMetadataMap,\n  has: ordinaryHasOwnMetadata,\n  get: ordinaryGetOwnMetadata,\n  set: ordinaryDefineOwnMetadata,\n  keys: ordinaryOwnMetadataKeys,\n  toKey: toMetadataKey\n};\n","var $ = require('../internals/export');\nvar ReflectMetadataModule = require('../internals/reflect-metadata');\nvar anObject = require('../internals/an-object');\n\nvar toMetadataKey = ReflectMetadataModule.toKey;\nvar ordinaryDefineOwnMetadata = ReflectMetadataModule.set;\n\n// `Reflect.defineMetadata` method\n// https://github.com/rbuckton/reflect-metadata\n$({ target: 'Reflect', stat: true }, {\n  defineMetadata: function defineMetadata(metadataKey, metadataValue, target /* , targetKey */) {\n    var targetKey = arguments.length < 4 ? undefined : toMetadataKey(arguments[3]);\n    ordinaryDefineOwnMetadata(metadataKey, metadataValue, anObject(target), targetKey);\n  }\n});\n","var $ = require('../internals/export');\nvar ReflectMetadataModule = require('../internals/reflect-metadata');\nvar anObject = require('../internals/an-object');\n\nvar toMetadataKey = ReflectMetadataModule.toKey;\nvar getOrCreateMetadataMap = ReflectMetadataModule.getMap;\nvar store = ReflectMetadataModule.store;\n\n// `Reflect.deleteMetadata` method\n// https://github.com/rbuckton/reflect-metadata\n$({ target: 'Reflect', stat: true }, {\n  deleteMetadata: function deleteMetadata(metadataKey, target /* , targetKey */) {\n    var targetKey = arguments.length < 3 ? undefined : toMetadataKey(arguments[2]);\n    var metadataMap = getOrCreateMetadataMap(anObject(target), targetKey, false);\n    if (metadataMap === undefined || !metadataMap['delete'](metadataKey)) return false;\n    if (metadataMap.size) return true;\n    var targetMetadata = store.get(target);\n    targetMetadata['delete'](targetKey);\n    return !!targetMetadata.size || store['delete'](target);\n  }\n});\n","var $ = require('../internals/export');\nvar ReflectMetadataModule = require('../internals/reflect-metadata');\nvar anObject = require('../internals/an-object');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\n\nvar ordinaryHasOwnMetadata = ReflectMetadataModule.has;\nvar ordinaryGetOwnMetadata = ReflectMetadataModule.get;\nvar toMetadataKey = ReflectMetadataModule.toKey;\n\nvar ordinaryGetMetadata = function (MetadataKey, O, P) {\n  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);\n  if (hasOwn) return ordinaryGetOwnMetadata(MetadataKey, O, P);\n  var parent = getPrototypeOf(O);\n  return parent !== null ? ordinaryGetMetadata(MetadataKey, parent, P) : undefined;\n};\n\n// `Reflect.getMetadata` method\n// https://github.com/rbuckton/reflect-metadata\n$({ target: 'Reflect', stat: true }, {\n  getMetadata: function getMetadata(metadataKey, target /* , targetKey */) {\n    var targetKey = arguments.length < 3 ? undefined : toMetadataKey(arguments[2]);\n    return ordinaryGetMetadata(metadataKey, anObject(target), targetKey);\n  }\n});\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar Map = getBuiltIn('Map');\nvar MapPrototype = Map.prototype;\nvar mapForEach = uncurryThis(MapPrototype.forEach);\nvar mapHas = uncurryThis(MapPrototype.has);\nvar mapSet = uncurryThis(MapPrototype.set);\nvar push = uncurryThis([].push);\n\n// `Array.prototype.uniqueBy` method\n// https://github.com/tc39/proposal-array-unique\nmodule.exports = function uniqueBy(resolver) {\n  var that = toObject(this);\n  var length = lengthOfArrayLike(that);\n  var result = arraySpeciesCreate(that, 0);\n  var map = new Map();\n  var resolverFunction = resolver != null ? aCallable(resolver) : function (value) {\n    return value;\n  };\n  var index, item, key;\n  for (index = 0; index < length; index++) {\n    item = that[index];\n    key = resolverFunction(item);\n    if (!mapHas(map, key)) mapSet(map, key, item);\n  }\n  mapForEach(map, function (value) {\n    push(result, value);\n  });\n  return result;\n};\n","var $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar ReflectMetadataModule = require('../internals/reflect-metadata');\nvar anObject = require('../internals/an-object');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar $arrayUniqueBy = require('../internals/array-unique-by');\n\nvar arrayUniqueBy = uncurryThis($arrayUniqueBy);\nvar concat = uncurryThis([].concat);\nvar ordinaryOwnMetadataKeys = ReflectMetadataModule.keys;\nvar toMetadataKey = ReflectMetadataModule.toKey;\n\nvar ordinaryMetadataKeys = function (O, P) {\n  var oKeys = ordinaryOwnMetadataKeys(O, P);\n  var parent = getPrototypeOf(O);\n  if (parent === null) return oKeys;\n  var pKeys = ordinaryMetadataKeys(parent, P);\n  return pKeys.length ? oKeys.length ? arrayUniqueBy(concat(oKeys, pKeys)) : pKeys : oKeys;\n};\n\n// `Reflect.getMetadataKeys` method\n// https://github.com/rbuckton/reflect-metadata\n$({ target: 'Reflect', stat: true }, {\n  getMetadataKeys: function getMetadataKeys(target /* , targetKey */) {\n    var targetKey = arguments.length < 2 ? undefined : toMetadataKey(arguments[1]);\n    return ordinaryMetadataKeys(anObject(target), targetKey);\n  }\n});\n","var $ = require('../internals/export');\nvar ReflectMetadataModule = require('../internals/reflect-metadata');\nvar anObject = require('../internals/an-object');\n\nvar ordinaryGetOwnMetadata = ReflectMetadataModule.get;\nvar toMetadataKey = ReflectMetadataModule.toKey;\n\n// `Reflect.getOwnMetadata` method\n// https://github.com/rbuckton/reflect-metadata\n$({ target: 'Reflect', stat: true }, {\n  getOwnMetadata: function getOwnMetadata(metadataKey, target /* , targetKey */) {\n    var targetKey = arguments.length < 3 ? undefined : toMetadataKey(arguments[2]);\n    return ordinaryGetOwnMetadata(metadataKey, anObject(target), targetKey);\n  }\n});\n","var $ = require('../internals/export');\nvar ReflectMetadataModule = require('../internals/reflect-metadata');\nvar anObject = require('../internals/an-object');\n\nvar ordinaryOwnMetadataKeys = ReflectMetadataModule.keys;\nvar toMetadataKey = ReflectMetadataModule.toKey;\n\n// `Reflect.getOwnMetadataKeys` method\n// https://github.com/rbuckton/reflect-metadata\n$({ target: 'Reflect', stat: true }, {\n  getOwnMetadataKeys: function getOwnMetadataKeys(target /* , targetKey */) {\n    var targetKey = arguments.length < 2 ? undefined : toMetadataKey(arguments[1]);\n    return ordinaryOwnMetadataKeys(anObject(target), targetKey);\n  }\n});\n","var $ = require('../internals/export');\nvar ReflectMetadataModule = require('../internals/reflect-metadata');\nvar anObject = require('../internals/an-object');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\n\nvar ordinaryHasOwnMetadata = ReflectMetadataModule.has;\nvar toMetadataKey = ReflectMetadataModule.toKey;\n\nvar ordinaryHasMetadata = function (MetadataKey, O, P) {\n  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);\n  if (hasOwn) return true;\n  var parent = getPrototypeOf(O);\n  return parent !== null ? ordinaryHasMetadata(MetadataKey, parent, P) : false;\n};\n\n// `Reflect.hasMetadata` method\n// https://github.com/rbuckton/reflect-metadata\n$({ target: 'Reflect', stat: true }, {\n  hasMetadata: function hasMetadata(metadataKey, target /* , targetKey */) {\n    var targetKey = arguments.length < 3 ? undefined : toMetadataKey(arguments[2]);\n    return ordinaryHasMetadata(metadataKey, anObject(target), targetKey);\n  }\n});\n","var $ = require('../internals/export');\nvar ReflectMetadataModule = require('../internals/reflect-metadata');\nvar anObject = require('../internals/an-object');\n\nvar ordinaryHasOwnMetadata = ReflectMetadataModule.has;\nvar toMetadataKey = ReflectMetadataModule.toKey;\n\n// `Reflect.hasOwnMetadata` method\n// https://github.com/rbuckton/reflect-metadata\n$({ target: 'Reflect', stat: true }, {\n  hasOwnMetadata: function hasOwnMetadata(metadataKey, target /* , targetKey */) {\n    var targetKey = arguments.length < 3 ? undefined : toMetadataKey(arguments[2]);\n    return ordinaryHasOwnMetadata(metadataKey, anObject(target), targetKey);\n  }\n});\n","var $ = require('../internals/export');\nvar ReflectMetadataModule = require('../internals/reflect-metadata');\nvar anObject = require('../internals/an-object');\n\nvar toMetadataKey = ReflectMetadataModule.toKey;\nvar ordinaryDefineOwnMetadata = ReflectMetadataModule.set;\n\n// `Reflect.metadata` method\n// https://github.com/rbuckton/reflect-metadata\n$({ target: 'Reflect', stat: true }, {\n  metadata: function metadata(metadataKey, metadataValue) {\n    return function decorator(target, key) {\n      ordinaryDefineOwnMetadata(metadataKey, metadataValue, anObject(target), toMetadataKey(key));\n    };\n  }\n});\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\n\n// https://github.com/tc39/collection-methods\nmodule.exports = function addAll(/* ...elements */) {\n  var set = anObject(this);\n  var adder = aCallable(set.add);\n  for (var k = 0, len = arguments.length; k < len; k++) {\n    call(adder, set, arguments[k]);\n  }\n  return set;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar addAll = require('../internals/collection-add-all');\n\n// `Set.prototype.addAll` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  addAll: addAll\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar deleteAll = require('../internals/collection-delete-all');\n\n// `Set.prototype.deleteAll` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  deleteAll: deleteAll\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar speciesConstructor = require('../internals/species-constructor');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.difference` method\n// https://github.com/tc39/proposal-set-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  difference: function difference(iterable) {\n    var set = anObject(this);\n    var newSet = new (speciesConstructor(set, getBuiltIn('Set')))(set);\n    var remover = aCallable(newSet['delete']);\n    iterate(iterable, function (value) {\n      call(remover, newSet, value);\n    });\n    return newSet;\n  }\n});\n","var call = require('../internals/function-call');\n\nmodule.exports = function (it) {\n  // eslint-disable-next-line es/no-set -- safe\n  return call(Set.prototype.values, it);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.every` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  every: function every(callbackfn /* , thisArg */) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return !iterate(iterator, function (value, stop) {\n      if (!boundFunction(value, value, set)) return stop();\n    }, { IS_ITERATOR: true, INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar speciesConstructor = require('../internals/species-constructor');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.filter` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    var newSet = new (speciesConstructor(set, getBuiltIn('Set')))();\n    var adder = aCallable(newSet.add);\n    iterate(iterator, function (value) {\n      if (boundFunction(value, value, set)) call(adder, newSet, value);\n    }, { IS_ITERATOR: true });\n    return newSet;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.find` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  find: function find(callbackfn /* , thisArg */) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return iterate(iterator, function (value, stop) {\n      if (boundFunction(value, value, set)) return stop(value);\n    }, { IS_ITERATOR: true, INTERRUPTED: true }).result;\n  }\n});\n","var $ = require('../internals/export');\nvar from = require('../internals/collection-from');\n\n// `Set.from` method\n// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from\n$({ target: 'Set', stat: true }, {\n  from: from\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar speciesConstructor = require('../internals/species-constructor');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.intersection` method\n// https://github.com/tc39/proposal-set-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  intersection: function intersection(iterable) {\n    var set = anObject(this);\n    var newSet = new (speciesConstructor(set, getBuiltIn('Set')))();\n    var hasCheck = aCallable(set.has);\n    var adder = aCallable(newSet.add);\n    iterate(iterable, function (value) {\n      if (call(hasCheck, set, value)) call(adder, newSet, value);\n    });\n    return newSet;\n  }\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isDisjointFrom\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  isDisjointFrom: function isDisjointFrom(iterable) {\n    var set = anObject(this);\n    var hasCheck = aCallable(set.has);\n    return !iterate(iterable, function (value, stop) {\n      if (call(hasCheck, set, value) === true) return stop();\n    }, { INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar isCallable = require('../internals/is-callable');\nvar anObject = require('../internals/an-object');\nvar getIterator = require('../internals/get-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isSubsetOf\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  isSubsetOf: function isSubsetOf(iterable) {\n    var iterator = getIterator(this);\n    var otherSet = anObject(iterable);\n    var hasCheck = otherSet.has;\n    if (!isCallable(hasCheck)) {\n      otherSet = new (getBuiltIn('Set'))(iterable);\n      hasCheck = aCallable(otherSet.has);\n    }\n    return !iterate(iterator, function (value, stop) {\n      if (call(hasCheck, otherSet, value) === false) return stop();\n    }, { IS_ITERATOR: true, INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isSupersetOf\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  isSupersetOf: function isSupersetOf(iterable) {\n    var set = anObject(this);\n    var hasCheck = aCallable(set.has);\n    return !iterate(iterable, function (value, stop) {\n      if (call(hasCheck, set, value) === false) return stop();\n    }, { INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar anObject = require('../internals/an-object');\nvar toString = require('../internals/to-string');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\nvar arrayJoin = uncurryThis([].join);\nvar push = [].push;\n\n// `Set.prototype.join` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  join: function join(separator) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var sep = separator === undefined ? ',' : toString(separator);\n    var result = [];\n    iterate(iterator, push, { that: result, IS_ITERATOR: true });\n    return arrayJoin(result, sep);\n  }\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar speciesConstructor = require('../internals/species-constructor');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.map` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  map: function map(callbackfn /* , thisArg */) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    var newSet = new (speciesConstructor(set, getBuiltIn('Set')))();\n    var adder = aCallable(newSet.add);\n    iterate(iterator, function (value) {\n      call(adder, newSet, boundFunction(value, value, set));\n    }, { IS_ITERATOR: true });\n    return newSet;\n  }\n});\n","var $ = require('../internals/export');\nvar of = require('../internals/collection-of');\n\n// `Set.of` method\n// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of\n$({ target: 'Set', stat: true }, {\n  of: of\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar IS_PURE = require('../internals/is-pure');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\nvar TypeError = global.TypeError;\n\n// `Set.prototype.reduce` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    aCallable(callbackfn);\n    iterate(iterator, function (value) {\n      if (noInitial) {\n        noInitial = false;\n        accumulator = value;\n      } else {\n        accumulator = callbackfn(accumulator, value, value, set);\n      }\n    }, { IS_ITERATOR: true });\n    if (noInitial) throw TypeError('Reduce of empty set with no initial value');\n    return accumulator;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar anObject = require('../internals/an-object');\nvar bind = require('../internals/function-bind-context');\nvar getSetIterator = require('../internals/get-set-iterator');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.some` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  some: function some(callbackfn /* , thisArg */) {\n    var set = anObject(this);\n    var iterator = getSetIterator(set);\n    var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return iterate(iterator, function (value, stop) {\n      if (boundFunction(value, value, set)) return stop();\n    }, { IS_ITERATOR: true, INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar speciesConstructor = require('../internals/species-constructor');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.symmetricDifference` method\n// https://github.com/tc39/proposal-set-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  symmetricDifference: function symmetricDifference(iterable) {\n    var set = anObject(this);\n    var newSet = new (speciesConstructor(set, getBuiltIn('Set')))(set);\n    var remover = aCallable(newSet['delete']);\n    var adder = aCallable(newSet.add);\n    iterate(iterable, function (value) {\n      call(remover, newSet, value) || call(adder, newSet, value);\n    });\n    return newSet;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar getBuiltIn = require('../internals/get-built-in');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar speciesConstructor = require('../internals/species-constructor');\nvar iterate = require('../internals/iterate');\n\n// `Set.prototype.union` method\n// https://github.com/tc39/proposal-set-methods\n$({ target: 'Set', proto: true, real: true, forced: IS_PURE }, {\n  union: function union(iterable) {\n    var set = anObject(this);\n    var newSet = new (speciesConstructor(set, getBuiltIn('Set')))(set);\n    iterate(iterable, aCallable(newSet.add), { that: newSet });\n    return newSet;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar charAt = require('../internals/string-multibyte').charAt;\nvar fails = require('../internals/fails');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\n\nvar FORCED = fails(function () {\n  return '𠮷'.at(-2) !== '𠮷';\n});\n\n// `String.prototype.at` method\n// https://github.com/mathiasbynens/String.prototype.at\n$({ target: 'String', proto: true, forced: FORCED }, {\n  at: function at(index) {\n    var S = toString(requireObjectCoercible(this));\n    var len = S.length;\n    var relativeIndex = toIntegerOrInfinity(index);\n    var k = relativeIndex >= 0 ? relativeIndex : len + relativeIndex;\n    return (k < 0 || k >= len) ? undefined : charAt(S, k);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar InternalStateModule = require('../internals/internal-state');\nvar StringMultibyteModule = require('../internals/string-multibyte');\n\nvar codeAt = StringMultibyteModule.codeAt;\nvar charAt = StringMultibyteModule.charAt;\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// TODO: unify with String#@@iterator\nvar $StringIterator = createIteratorConstructor(function StringIterator(string) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: string,\n    index: 0\n  });\n}, 'String', function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: { codePoint: codeAt(point, 0), position: index }, done: false };\n});\n\n// `String.prototype.codePoints` method\n// https://github.com/tc39/proposal-string-prototype-codepoints\n$({ target: 'String', proto: true }, {\n  codePoints: function codePoints() {\n    return new $StringIterator(toString(requireObjectCoercible(this)));\n  }\n});\n","'use strict';\n/* eslint-disable es/no-string-prototype-matchall -- safe */\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar anObject = require('../internals/an-object');\nvar classof = require('../internals/classof-raw');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar isRegExp = require('../internals/is-regexp');\nvar regExpFlags = require('../internals/regexp-flags');\nvar getMethod = require('../internals/get-method');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\nvar InternalStateModule = require('../internals/internal-state');\nvar IS_PURE = require('../internals/is-pure');\n\nvar MATCH_ALL = wellKnownSymbol('matchAll');\nvar REGEXP_STRING = 'RegExp String';\nvar REGEXP_STRING_ITERATOR = REGEXP_STRING + ' Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(REGEXP_STRING_ITERATOR);\nvar RegExpPrototype = RegExp.prototype;\nvar TypeError = global.TypeError;\nvar getFlags = uncurryThis(regExpFlags);\nvar stringIndexOf = uncurryThis(''.indexOf);\nvar un$MatchAll = uncurryThis(''.matchAll);\n\nvar WORKS_WITH_NON_GLOBAL_REGEX = !!un$MatchAll && !fails(function () {\n  un$MatchAll('a', /./);\n});\n\nvar $RegExpStringIterator = createIteratorConstructor(function RegExpStringIterator(regexp, string, $global, fullUnicode) {\n  setInternalState(this, {\n    type: REGEXP_STRING_ITERATOR,\n    regexp: regexp,\n    string: string,\n    global: $global,\n    unicode: fullUnicode,\n    done: false\n  });\n}, REGEXP_STRING, function next() {\n  var state = getInternalState(this);\n  if (state.done) return { value: undefined, done: true };\n  var R = state.regexp;\n  var S = state.string;\n  var match = regExpExec(R, S);\n  if (match === null) return { value: undefined, done: state.done = true };\n  if (state.global) {\n    if (toString(match[0]) === '') R.lastIndex = advanceStringIndex(S, toLength(R.lastIndex), state.unicode);\n    return { value: match, done: false };\n  }\n  state.done = true;\n  return { value: match, done: false };\n});\n\nvar $matchAll = function (string) {\n  var R = anObject(this);\n  var S = toString(string);\n  var C, flagsValue, flags, matcher, $global, fullUnicode;\n  C = speciesConstructor(R, RegExp);\n  flagsValue = R.flags;\n  if (flagsValue === undefined && isPrototypeOf(RegExpPrototype, R) && !('flags' in RegExpPrototype)) {\n    flagsValue = getFlags(R);\n  }\n  flags = flagsValue === undefined ? '' : toString(flagsValue);\n  matcher = new C(C === RegExp ? R.source : R, flags);\n  $global = !!~stringIndexOf(flags, 'g');\n  fullUnicode = !!~stringIndexOf(flags, 'u');\n  matcher.lastIndex = toLength(R.lastIndex);\n  return new $RegExpStringIterator(matcher, S, $global, fullUnicode);\n};\n\n// `String.prototype.matchAll` method\n// https://tc39.es/ecma262/#sec-string.prototype.matchall\n$({ target: 'String', proto: true, forced: WORKS_WITH_NON_GLOBAL_REGEX }, {\n  matchAll: function matchAll(regexp) {\n    var O = requireObjectCoercible(this);\n    var flags, S, matcher, rx;\n    if (regexp != null) {\n      if (isRegExp(regexp)) {\n        flags = toString(requireObjectCoercible('flags' in RegExpPrototype\n          ? regexp.flags\n          : getFlags(regexp)\n        ));\n        if (!~stringIndexOf(flags, 'g')) throw TypeError('`.matchAll` does not allow non-global regexes');\n      }\n      if (WORKS_WITH_NON_GLOBAL_REGEX) return un$MatchAll(O, regexp);\n      matcher = getMethod(regexp, MATCH_ALL);\n      if (matcher === undefined && IS_PURE && classof(regexp) == 'RegExp') matcher = $matchAll;\n      if (matcher) return call(matcher, regexp, O);\n    } else if (WORKS_WITH_NON_GLOBAL_REGEX) return un$MatchAll(O, regexp);\n    S = toString(O);\n    rx = new RegExp(regexp, 'g');\n    return IS_PURE ? call($matchAll, rx, S) : rx[MATCH_ALL](S);\n  }\n});\n\nIS_PURE || MATCH_ALL in RegExpPrototype || redefine(RegExpPrototype, MATCH_ALL, $matchAll);\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar isCallable = require('../internals/is-callable');\nvar isRegExp = require('../internals/is-regexp');\nvar toString = require('../internals/to-string');\nvar getMethod = require('../internals/get-method');\nvar regExpFlags = require('../internals/regexp-flags');\nvar getSubstitution = require('../internals/get-substitution');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar REPLACE = wellKnownSymbol('replace');\nvar RegExpPrototype = RegExp.prototype;\nvar TypeError = global.TypeError;\nvar getFlags = uncurryThis(regExpFlags);\nvar indexOf = uncurryThis(''.indexOf);\nvar replace = uncurryThis(''.replace);\nvar stringSlice = uncurryThis(''.slice);\nvar max = Math.max;\n\nvar stringIndexOf = function (string, searchValue, fromIndex) {\n  if (fromIndex > string.length) return -1;\n  if (searchValue === '') return fromIndex;\n  return indexOf(string, searchValue, fromIndex);\n};\n\n// `String.prototype.replaceAll` method\n// https://tc39.es/ecma262/#sec-string.prototype.replaceall\n$({ target: 'String', proto: true }, {\n  replaceAll: function replaceAll(searchValue, replaceValue) {\n    var O = requireObjectCoercible(this);\n    var IS_REG_EXP, flags, replacer, string, searchString, functionalReplace, searchLength, advanceBy, replacement;\n    var position = 0;\n    var endOfLastMatch = 0;\n    var result = '';\n    if (searchValue != null) {\n      IS_REG_EXP = isRegExp(searchValue);\n      if (IS_REG_EXP) {\n        flags = toString(requireObjectCoercible('flags' in RegExpPrototype\n          ? searchValue.flags\n          : getFlags(searchValue)\n        ));\n        if (!~indexOf(flags, 'g')) throw TypeError('`.replaceAll` does not allow non-global regexes');\n      }\n      replacer = getMethod(searchValue, REPLACE);\n      if (replacer) {\n        return call(replacer, searchValue, O, replaceValue);\n      } else if (IS_PURE && IS_REG_EXP) {\n        return replace(toString(O), searchValue, replaceValue);\n      }\n    }\n    string = toString(O);\n    searchString = toString(searchValue);\n    functionalReplace = isCallable(replaceValue);\n    if (!functionalReplace) replaceValue = toString(replaceValue);\n    searchLength = searchString.length;\n    advanceBy = max(1, searchLength);\n    position = stringIndexOf(string, searchString, 0);\n    while (position !== -1) {\n      replacement = functionalReplace\n        ? toString(replaceValue(searchString, position, string))\n        : getSubstitution(searchString, string, position, [], undefined, replaceValue);\n      result += stringSlice(string, endOfLastMatch, position) + replacement;\n      endOfLastMatch = position + searchLength;\n      position = stringIndexOf(string, searchString, position + advanceBy);\n    }\n    if (endOfLastMatch < string.length) {\n      result += stringSlice(string, endOfLastMatch);\n    }\n    return result;\n  }\n});\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.dispose` well-known symbol\n// https://github.com/tc39/proposal-using-statement\ndefineWellKnownSymbol('dispose');\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.observable` well-known symbol\n// https://github.com/tc39/proposal-observable\ndefineWellKnownSymbol('observable');\n","// TODO: remove from `core-js@4`\nvar defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.patternMatch` well-known symbol\n// https://github.com/tc39/proposal-pattern-matching\ndefineWellKnownSymbol('patternMatch');\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar deleteAll = require('../internals/collection-delete-all');\n\n// `WeakMap.prototype.deleteAll` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'WeakMap', proto: true, real: true, forced: IS_PURE }, {\n  deleteAll: deleteAll\n});\n","var $ = require('../internals/export');\nvar from = require('../internals/collection-from');\n\n// `WeakMap.from` method\n// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.from\n$({ target: 'WeakMap', stat: true }, {\n  from: from\n});\n","var $ = require('../internals/export');\nvar of = require('../internals/collection-of');\n\n// `WeakMap.of` method\n// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.of\n$({ target: 'WeakMap', stat: true }, {\n  of: of\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar addAll = require('../internals/collection-add-all');\n\n// `WeakSet.prototype.addAll` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'WeakSet', proto: true, real: true, forced: IS_PURE }, {\n  addAll: addAll\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar deleteAll = require('../internals/collection-delete-all');\n\n// `WeakSet.prototype.deleteAll` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'WeakSet', proto: true, real: true, forced: IS_PURE }, {\n  deleteAll: deleteAll\n});\n","var $ = require('../internals/export');\nvar from = require('../internals/collection-from');\n\n// `WeakSet.from` method\n// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.from\n$({ target: 'WeakSet', stat: true }, {\n  from: from\n});\n","var $ = require('../internals/export');\nvar of = require('../internals/collection-of');\n\n// `WeakSet.of` method\n// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.of\n$({ target: 'WeakSet', stat: true }, {\n  of: of\n});\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","// in old WebKit versions, `element.classList` is not an instance of global `DOMTokenList`\nvar documentCreateElement = require('../internals/document-create-element');\n\nvar classList = documentCreateElement('span').classList;\nvar DOMTokenListPrototype = classList && classList.constructor && classList.constructor.prototype;\n\nmodule.exports = DOMTokenListPrototype === Object.prototype ? undefined : DOMTokenListPrototype;\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar DOMTokenListPrototype = require('../internals/dom-token-list-prototype');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar handlePrototype = function (CollectionPrototype) {\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n};\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  if (DOMIterables[COLLECTION_NAME]) {\n    handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype);\n  }\n}\n\nhandlePrototype(DOMTokenListPrototype);\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar DOMTokenListPrototype = require('../internals/dom-token-list-prototype');\nvar ArrayIteratorMethods = require('../modules/es.array.iterator');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nvar handlePrototype = function (CollectionPrototype, COLLECTION_NAME) {\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG]) {\n      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n    }\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n};\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype, COLLECTION_NAME);\n}\n\nhandlePrototype(DOMTokenListPrototype, 'DOMTokenList');\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar task = require('../internals/task');\n\nvar FORCED = !global.setImmediate || !global.clearImmediate;\n\n// http://w3c.github.io/setImmediate/\n$({ global: true, bind: true, enumerable: true, forced: FORCED }, {\n  // `setImmediate` method\n  // http://w3c.github.io/setImmediate/#si-setImmediate\n  setImmediate: task.set,\n  // `clearImmediate` method\n  // http://w3c.github.io/setImmediate/#si-clearImmediate\n  clearImmediate: task.clear\n});\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar microtask = require('../internals/microtask');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar process = global.process;\n\n// `queueMicrotask` method\n// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-queuemicrotask\n$({ global: true, enumerable: true, noTargetGet: true }, {\n  queueMicrotask: function queueMicrotask(fn) {\n    var domain = IS_NODE && process.domain;\n    microtask(domain ? domain.bind(fn) : fn);\n  }\n});\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line unicorn/relative-url-style -- required for testing\n  var url = new URL('b?a=1&b=2&c=3', 'http://a');\n  var searchParams = url.searchParams;\n  var result = '';\n  url.pathname = 'c%20d';\n  searchParams.forEach(function (value, key) {\n    searchParams['delete']('b');\n    result += key + value;\n  });\n  return (IS_PURE && !url.toJSON)\n    || !searchParams.sort\n    || url.href !== 'http://a/c%20d?a=1&c=3'\n    || searchParams.get('c') !== '3'\n    || String(new URLSearchParams('?a=1')) !== 'a=1'\n    || !searchParams[ITERATOR]\n    // throws in Edge\n    || new URL('https://a@b').username !== 'a'\n    || new URLSearchParams(new URLSearchParams('a=b')).get('a') !== 'b'\n    // not punycoded in Edge\n    || new URL('http://тест').host !== 'xn--e1aybc'\n    // not escaped in Chrome 62-\n    || new URL('http://a#б').hash !== '#%D0%B1'\n    // fails in Chrome 66-\n    || result !== 'a1c3'\n    // throws in Safari\n    || new URL('http://x', undefined).host !== 'x';\n});\n","'use strict';\n// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`\nrequire('../modules/es.string.iterator');\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar USE_NATIVE_URL = require('../internals/native-url');\nvar global = require('../internals/global');\nvar bind = require('../internals/function-bind-context');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperties = require('../internals/object-define-properties').f;\nvar redefine = require('../internals/redefine');\nvar anInstance = require('../internals/an-instance');\nvar hasOwn = require('../internals/has-own-property');\nvar assign = require('../internals/object-assign');\nvar arrayFrom = require('../internals/array-from');\nvar arraySlice = require('../internals/array-slice-simple');\nvar codeAt = require('../internals/string-multibyte').codeAt;\nvar toASCII = require('../internals/string-punycode-to-ascii');\nvar $toString = require('../internals/to-string');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar URLSearchParamsModule = require('../modules/web.url-search-params');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar getInternalURLState = InternalStateModule.getterFor('URL');\nvar URLSearchParams = URLSearchParamsModule.URLSearchParams;\nvar getInternalSearchParamsState = URLSearchParamsModule.getState;\n\nvar NativeURL = global.URL;\nvar TypeError = global.TypeError;\nvar parseInt = global.parseInt;\nvar floor = Math.floor;\nvar pow = Math.pow;\nvar charAt = uncurryThis(''.charAt);\nvar exec = uncurryThis(/./.exec);\nvar join = uncurryThis([].join);\nvar numberToString = uncurryThis(1.0.toString);\nvar pop = uncurryThis([].pop);\nvar push = uncurryThis([].push);\nvar replace = uncurryThis(''.replace);\nvar shift = uncurryThis([].shift);\nvar split = uncurryThis(''.split);\nvar stringSlice = uncurryThis(''.slice);\nvar toLowerCase = uncurryThis(''.toLowerCase);\nvar unshift = uncurryThis([].unshift);\n\nvar INVALID_AUTHORITY = 'Invalid authority';\nvar INVALID_SCHEME = 'Invalid scheme';\nvar INVALID_HOST = 'Invalid host';\nvar INVALID_PORT = 'Invalid port';\n\nvar ALPHA = /[a-z]/i;\n// eslint-disable-next-line regexp/no-obscure-range -- safe\nvar ALPHANUMERIC = /[\\d+-.a-z]/i;\nvar DIGIT = /\\d/;\nvar HEX_START = /^0x/i;\nvar OCT = /^[0-7]+$/;\nvar DEC = /^\\d+$/;\nvar HEX = /^[\\da-f]+$/i;\n/* eslint-disable regexp/no-control-character -- safe */\nvar FORBIDDEN_HOST_CODE_POINT = /[\\0\\t\\n\\r #%/:<>?@[\\\\\\]^|]/;\nvar FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT = /[\\0\\t\\n\\r #/:<>?@[\\\\\\]^|]/;\nvar LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE = /^[\\u0000-\\u0020]+|[\\u0000-\\u0020]+$/g;\nvar TAB_AND_NEW_LINE = /[\\t\\n\\r]/g;\n/* eslint-enable regexp/no-control-character -- safe */\nvar EOF;\n\n// https://url.spec.whatwg.org/#ipv4-number-parser\nvar parseIPv4 = function (input) {\n  var parts = split(input, '.');\n  var partsLength, numbers, index, part, radix, number, ipv4;\n  if (parts.length && parts[parts.length - 1] == '') {\n    parts.length--;\n  }\n  partsLength = parts.length;\n  if (partsLength > 4) return input;\n  numbers = [];\n  for (index = 0; index < partsLength; index++) {\n    part = parts[index];\n    if (part == '') return input;\n    radix = 10;\n    if (part.length > 1 && charAt(part, 0) == '0') {\n      radix = exec(HEX_START, part) ? 16 : 8;\n      part = stringSlice(part, radix == 8 ? 1 : 2);\n    }\n    if (part === '') {\n      number = 0;\n    } else {\n      if (!exec(radix == 10 ? DEC : radix == 8 ? OCT : HEX, part)) return input;\n      number = parseInt(part, radix);\n    }\n    push(numbers, number);\n  }\n  for (index = 0; index < partsLength; index++) {\n    number = numbers[index];\n    if (index == partsLength - 1) {\n      if (number >= pow(256, 5 - partsLength)) return null;\n    } else if (number > 255) return null;\n  }\n  ipv4 = pop(numbers);\n  for (index = 0; index < numbers.length; index++) {\n    ipv4 += numbers[index] * pow(256, 3 - index);\n  }\n  return ipv4;\n};\n\n// https://url.spec.whatwg.org/#concept-ipv6-parser\n// eslint-disable-next-line max-statements -- TODO\nvar parseIPv6 = function (input) {\n  var address = [0, 0, 0, 0, 0, 0, 0, 0];\n  var pieceIndex = 0;\n  var compress = null;\n  var pointer = 0;\n  var value, length, numbersSeen, ipv4Piece, number, swaps, swap;\n\n  var chr = function () {\n    return charAt(input, pointer);\n  };\n\n  if (chr() == ':') {\n    if (charAt(input, 1) != ':') return;\n    pointer += 2;\n    pieceIndex++;\n    compress = pieceIndex;\n  }\n  while (chr()) {\n    if (pieceIndex == 8) return;\n    if (chr() == ':') {\n      if (compress !== null) return;\n      pointer++;\n      pieceIndex++;\n      compress = pieceIndex;\n      continue;\n    }\n    value = length = 0;\n    while (length < 4 && exec(HEX, chr())) {\n      value = value * 16 + parseInt(chr(), 16);\n      pointer++;\n      length++;\n    }\n    if (chr() == '.') {\n      if (length == 0) return;\n      pointer -= length;\n      if (pieceIndex > 6) return;\n      numbersSeen = 0;\n      while (chr()) {\n        ipv4Piece = null;\n        if (numbersSeen > 0) {\n          if (chr() == '.' && numbersSeen < 4) pointer++;\n          else return;\n        }\n        if (!exec(DIGIT, chr())) return;\n        while (exec(DIGIT, chr())) {\n          number = parseInt(chr(), 10);\n          if (ipv4Piece === null) ipv4Piece = number;\n          else if (ipv4Piece == 0) return;\n          else ipv4Piece = ipv4Piece * 10 + number;\n          if (ipv4Piece > 255) return;\n          pointer++;\n        }\n        address[pieceIndex] = address[pieceIndex] * 256 + ipv4Piece;\n        numbersSeen++;\n        if (numbersSeen == 2 || numbersSeen == 4) pieceIndex++;\n      }\n      if (numbersSeen != 4) return;\n      break;\n    } else if (chr() == ':') {\n      pointer++;\n      if (!chr()) return;\n    } else if (chr()) return;\n    address[pieceIndex++] = value;\n  }\n  if (compress !== null) {\n    swaps = pieceIndex - compress;\n    pieceIndex = 7;\n    while (pieceIndex != 0 && swaps > 0) {\n      swap = address[pieceIndex];\n      address[pieceIndex--] = address[compress + swaps - 1];\n      address[compress + --swaps] = swap;\n    }\n  } else if (pieceIndex != 8) return;\n  return address;\n};\n\nvar findLongestZeroSequence = function (ipv6) {\n  var maxIndex = null;\n  var maxLength = 1;\n  var currStart = null;\n  var currLength = 0;\n  var index = 0;\n  for (; index < 8; index++) {\n    if (ipv6[index] !== 0) {\n      if (currLength > maxLength) {\n        maxIndex = currStart;\n        maxLength = currLength;\n      }\n      currStart = null;\n      currLength = 0;\n    } else {\n      if (currStart === null) currStart = index;\n      ++currLength;\n    }\n  }\n  if (currLength > maxLength) {\n    maxIndex = currStart;\n    maxLength = currLength;\n  }\n  return maxIndex;\n};\n\n// https://url.spec.whatwg.org/#host-serializing\nvar serializeHost = function (host) {\n  var result, index, compress, ignore0;\n  // ipv4\n  if (typeof host == 'number') {\n    result = [];\n    for (index = 0; index < 4; index++) {\n      unshift(result, host % 256);\n      host = floor(host / 256);\n    } return join(result, '.');\n  // ipv6\n  } else if (typeof host == 'object') {\n    result = '';\n    compress = findLongestZeroSequence(host);\n    for (index = 0; index < 8; index++) {\n      if (ignore0 && host[index] === 0) continue;\n      if (ignore0) ignore0 = false;\n      if (compress === index) {\n        result += index ? ':' : '::';\n        ignore0 = true;\n      } else {\n        result += numberToString(host[index], 16);\n        if (index < 7) result += ':';\n      }\n    }\n    return '[' + result + ']';\n  } return host;\n};\n\nvar C0ControlPercentEncodeSet = {};\nvar fragmentPercentEncodeSet = assign({}, C0ControlPercentEncodeSet, {\n  ' ': 1, '\"': 1, '<': 1, '>': 1, '`': 1\n});\nvar pathPercentEncodeSet = assign({}, fragmentPercentEncodeSet, {\n  '#': 1, '?': 1, '{': 1, '}': 1\n});\nvar userinfoPercentEncodeSet = assign({}, pathPercentEncodeSet, {\n  '/': 1, ':': 1, ';': 1, '=': 1, '@': 1, '[': 1, '\\\\': 1, ']': 1, '^': 1, '|': 1\n});\n\nvar percentEncode = function (chr, set) {\n  var code = codeAt(chr, 0);\n  return code > 0x20 && code < 0x7F && !hasOwn(set, chr) ? chr : encodeURIComponent(chr);\n};\n\n// https://url.spec.whatwg.org/#special-scheme\nvar specialSchemes = {\n  ftp: 21,\n  file: null,\n  http: 80,\n  https: 443,\n  ws: 80,\n  wss: 443\n};\n\n// https://url.spec.whatwg.org/#windows-drive-letter\nvar isWindowsDriveLetter = function (string, normalized) {\n  var second;\n  return string.length == 2 && exec(ALPHA, charAt(string, 0))\n    && ((second = charAt(string, 1)) == ':' || (!normalized && second == '|'));\n};\n\n// https://url.spec.whatwg.org/#start-with-a-windows-drive-letter\nvar startsWithWindowsDriveLetter = function (string) {\n  var third;\n  return string.length > 1 && isWindowsDriveLetter(stringSlice(string, 0, 2)) && (\n    string.length == 2 ||\n    ((third = charAt(string, 2)) === '/' || third === '\\\\' || third === '?' || third === '#')\n  );\n};\n\n// https://url.spec.whatwg.org/#single-dot-path-segment\nvar isSingleDot = function (segment) {\n  return segment === '.' || toLowerCase(segment) === '%2e';\n};\n\n// https://url.spec.whatwg.org/#double-dot-path-segment\nvar isDoubleDot = function (segment) {\n  segment = toLowerCase(segment);\n  return segment === '..' || segment === '%2e.' || segment === '.%2e' || segment === '%2e%2e';\n};\n\n// States:\nvar SCHEME_START = {};\nvar SCHEME = {};\nvar NO_SCHEME = {};\nvar SPECIAL_RELATIVE_OR_AUTHORITY = {};\nvar PATH_OR_AUTHORITY = {};\nvar RELATIVE = {};\nvar RELATIVE_SLASH = {};\nvar SPECIAL_AUTHORITY_SLASHES = {};\nvar SPECIAL_AUTHORITY_IGNORE_SLASHES = {};\nvar AUTHORITY = {};\nvar HOST = {};\nvar HOSTNAME = {};\nvar PORT = {};\nvar FILE = {};\nvar FILE_SLASH = {};\nvar FILE_HOST = {};\nvar PATH_START = {};\nvar PATH = {};\nvar CANNOT_BE_A_BASE_URL_PATH = {};\nvar QUERY = {};\nvar FRAGMENT = {};\n\nvar URLState = function (url, isBase, base) {\n  var urlString = $toString(url);\n  var baseState, failure, searchParams;\n  if (isBase) {\n    failure = this.parse(urlString);\n    if (failure) throw TypeError(failure);\n    this.searchParams = null;\n  } else {\n    if (base !== undefined) baseState = new URLState(base, true);\n    failure = this.parse(urlString, null, baseState);\n    if (failure) throw TypeError(failure);\n    searchParams = getInternalSearchParamsState(new URLSearchParams());\n    searchParams.bindURL(this);\n    this.searchParams = searchParams;\n  }\n};\n\nURLState.prototype = {\n  type: 'URL',\n  // https://url.spec.whatwg.org/#url-parsing\n  // eslint-disable-next-line max-statements -- TODO\n  parse: function (input, stateOverride, base) {\n    var url = this;\n    var state = stateOverride || SCHEME_START;\n    var pointer = 0;\n    var buffer = '';\n    var seenAt = false;\n    var seenBracket = false;\n    var seenPasswordToken = false;\n    var codePoints, chr, bufferCodePoints, failure;\n\n    input = $toString(input);\n\n    if (!stateOverride) {\n      url.scheme = '';\n      url.username = '';\n      url.password = '';\n      url.host = null;\n      url.port = null;\n      url.path = [];\n      url.query = null;\n      url.fragment = null;\n      url.cannotBeABaseURL = false;\n      input = replace(input, LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE, '');\n    }\n\n    input = replace(input, TAB_AND_NEW_LINE, '');\n\n    codePoints = arrayFrom(input);\n\n    while (pointer <= codePoints.length) {\n      chr = codePoints[pointer];\n      switch (state) {\n        case SCHEME_START:\n          if (chr && exec(ALPHA, chr)) {\n            buffer += toLowerCase(chr);\n            state = SCHEME;\n          } else if (!stateOverride) {\n            state = NO_SCHEME;\n            continue;\n          } else return INVALID_SCHEME;\n          break;\n\n        case SCHEME:\n          if (chr && (exec(ALPHANUMERIC, chr) || chr == '+' || chr == '-' || chr == '.')) {\n            buffer += toLowerCase(chr);\n          } else if (chr == ':') {\n            if (stateOverride && (\n              (url.isSpecial() != hasOwn(specialSchemes, buffer)) ||\n              (buffer == 'file' && (url.includesCredentials() || url.port !== null)) ||\n              (url.scheme == 'file' && !url.host)\n            )) return;\n            url.scheme = buffer;\n            if (stateOverride) {\n              if (url.isSpecial() && specialSchemes[url.scheme] == url.port) url.port = null;\n              return;\n            }\n            buffer = '';\n            if (url.scheme == 'file') {\n              state = FILE;\n            } else if (url.isSpecial() && base && base.scheme == url.scheme) {\n              state = SPECIAL_RELATIVE_OR_AUTHORITY;\n            } else if (url.isSpecial()) {\n              state = SPECIAL_AUTHORITY_SLASHES;\n            } else if (codePoints[pointer + 1] == '/') {\n              state = PATH_OR_AUTHORITY;\n              pointer++;\n            } else {\n              url.cannotBeABaseURL = true;\n              push(url.path, '');\n              state = CANNOT_BE_A_BASE_URL_PATH;\n            }\n          } else if (!stateOverride) {\n            buffer = '';\n            state = NO_SCHEME;\n            pointer = 0;\n            continue;\n          } else return INVALID_SCHEME;\n          break;\n\n        case NO_SCHEME:\n          if (!base || (base.cannotBeABaseURL && chr != '#')) return INVALID_SCHEME;\n          if (base.cannotBeABaseURL && chr == '#') {\n            url.scheme = base.scheme;\n            url.path = arraySlice(base.path);\n            url.query = base.query;\n            url.fragment = '';\n            url.cannotBeABaseURL = true;\n            state = FRAGMENT;\n            break;\n          }\n          state = base.scheme == 'file' ? FILE : RELATIVE;\n          continue;\n\n        case SPECIAL_RELATIVE_OR_AUTHORITY:\n          if (chr == '/' && codePoints[pointer + 1] == '/') {\n            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n            pointer++;\n          } else {\n            state = RELATIVE;\n            continue;\n          } break;\n\n        case PATH_OR_AUTHORITY:\n          if (chr == '/') {\n            state = AUTHORITY;\n            break;\n          } else {\n            state = PATH;\n            continue;\n          }\n\n        case RELATIVE:\n          url.scheme = base.scheme;\n          if (chr == EOF) {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.query = base.query;\n          } else if (chr == '/' || (chr == '\\\\' && url.isSpecial())) {\n            state = RELATIVE_SLASH;\n          } else if (chr == '?') {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.query = '';\n            state = QUERY;\n          } else if (chr == '#') {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.query = base.query;\n            url.fragment = '';\n            state = FRAGMENT;\n          } else {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.path.length--;\n            state = PATH;\n            continue;\n          } break;\n\n        case RELATIVE_SLASH:\n          if (url.isSpecial() && (chr == '/' || chr == '\\\\')) {\n            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n          } else if (chr == '/') {\n            state = AUTHORITY;\n          } else {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            state = PATH;\n            continue;\n          } break;\n\n        case SPECIAL_AUTHORITY_SLASHES:\n          state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n          if (chr != '/' || charAt(buffer, pointer + 1) != '/') continue;\n          pointer++;\n          break;\n\n        case SPECIAL_AUTHORITY_IGNORE_SLASHES:\n          if (chr != '/' && chr != '\\\\') {\n            state = AUTHORITY;\n            continue;\n          } break;\n\n        case AUTHORITY:\n          if (chr == '@') {\n            if (seenAt) buffer = '%40' + buffer;\n            seenAt = true;\n            bufferCodePoints = arrayFrom(buffer);\n            for (var i = 0; i < bufferCodePoints.length; i++) {\n              var codePoint = bufferCodePoints[i];\n              if (codePoint == ':' && !seenPasswordToken) {\n                seenPasswordToken = true;\n                continue;\n              }\n              var encodedCodePoints = percentEncode(codePoint, userinfoPercentEncodeSet);\n              if (seenPasswordToken) url.password += encodedCodePoints;\n              else url.username += encodedCodePoints;\n            }\n            buffer = '';\n          } else if (\n            chr == EOF || chr == '/' || chr == '?' || chr == '#' ||\n            (chr == '\\\\' && url.isSpecial())\n          ) {\n            if (seenAt && buffer == '') return INVALID_AUTHORITY;\n            pointer -= arrayFrom(buffer).length + 1;\n            buffer = '';\n            state = HOST;\n          } else buffer += chr;\n          break;\n\n        case HOST:\n        case HOSTNAME:\n          if (stateOverride && url.scheme == 'file') {\n            state = FILE_HOST;\n            continue;\n          } else if (chr == ':' && !seenBracket) {\n            if (buffer == '') return INVALID_HOST;\n            failure = url.parseHost(buffer);\n            if (failure) return failure;\n            buffer = '';\n            state = PORT;\n            if (stateOverride == HOSTNAME) return;\n          } else if (\n            chr == EOF || chr == '/' || chr == '?' || chr == '#' ||\n            (chr == '\\\\' && url.isSpecial())\n          ) {\n            if (url.isSpecial() && buffer == '') return INVALID_HOST;\n            if (stateOverride && buffer == '' && (url.includesCredentials() || url.port !== null)) return;\n            failure = url.parseHost(buffer);\n            if (failure) return failure;\n            buffer = '';\n            state = PATH_START;\n            if (stateOverride) return;\n            continue;\n          } else {\n            if (chr == '[') seenBracket = true;\n            else if (chr == ']') seenBracket = false;\n            buffer += chr;\n          } break;\n\n        case PORT:\n          if (exec(DIGIT, chr)) {\n            buffer += chr;\n          } else if (\n            chr == EOF || chr == '/' || chr == '?' || chr == '#' ||\n            (chr == '\\\\' && url.isSpecial()) ||\n            stateOverride\n          ) {\n            if (buffer != '') {\n              var port = parseInt(buffer, 10);\n              if (port > 0xFFFF) return INVALID_PORT;\n              url.port = (url.isSpecial() && port === specialSchemes[url.scheme]) ? null : port;\n              buffer = '';\n            }\n            if (stateOverride) return;\n            state = PATH_START;\n            continue;\n          } else return INVALID_PORT;\n          break;\n\n        case FILE:\n          url.scheme = 'file';\n          if (chr == '/' || chr == '\\\\') state = FILE_SLASH;\n          else if (base && base.scheme == 'file') {\n            if (chr == EOF) {\n              url.host = base.host;\n              url.path = arraySlice(base.path);\n              url.query = base.query;\n            } else if (chr == '?') {\n              url.host = base.host;\n              url.path = arraySlice(base.path);\n              url.query = '';\n              state = QUERY;\n            } else if (chr == '#') {\n              url.host = base.host;\n              url.path = arraySlice(base.path);\n              url.query = base.query;\n              url.fragment = '';\n              state = FRAGMENT;\n            } else {\n              if (!startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {\n                url.host = base.host;\n                url.path = arraySlice(base.path);\n                url.shortenPath();\n              }\n              state = PATH;\n              continue;\n            }\n          } else {\n            state = PATH;\n            continue;\n          } break;\n\n        case FILE_SLASH:\n          if (chr == '/' || chr == '\\\\') {\n            state = FILE_HOST;\n            break;\n          }\n          if (base && base.scheme == 'file' && !startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {\n            if (isWindowsDriveLetter(base.path[0], true)) push(url.path, base.path[0]);\n            else url.host = base.host;\n          }\n          state = PATH;\n          continue;\n\n        case FILE_HOST:\n          if (chr == EOF || chr == '/' || chr == '\\\\' || chr == '?' || chr == '#') {\n            if (!stateOverride && isWindowsDriveLetter(buffer)) {\n              state = PATH;\n            } else if (buffer == '') {\n              url.host = '';\n              if (stateOverride) return;\n              state = PATH_START;\n            } else {\n              failure = url.parseHost(buffer);\n              if (failure) return failure;\n              if (url.host == 'localhost') url.host = '';\n              if (stateOverride) return;\n              buffer = '';\n              state = PATH_START;\n            } continue;\n          } else buffer += chr;\n          break;\n\n        case PATH_START:\n          if (url.isSpecial()) {\n            state = PATH;\n            if (chr != '/' && chr != '\\\\') continue;\n          } else if (!stateOverride && chr == '?') {\n            url.query = '';\n            state = QUERY;\n          } else if (!stateOverride && chr == '#') {\n            url.fragment = '';\n            state = FRAGMENT;\n          } else if (chr != EOF) {\n            state = PATH;\n            if (chr != '/') continue;\n          } break;\n\n        case PATH:\n          if (\n            chr == EOF || chr == '/' ||\n            (chr == '\\\\' && url.isSpecial()) ||\n            (!stateOverride && (chr == '?' || chr == '#'))\n          ) {\n            if (isDoubleDot(buffer)) {\n              url.shortenPath();\n              if (chr != '/' && !(chr == '\\\\' && url.isSpecial())) {\n                push(url.path, '');\n              }\n            } else if (isSingleDot(buffer)) {\n              if (chr != '/' && !(chr == '\\\\' && url.isSpecial())) {\n                push(url.path, '');\n              }\n            } else {\n              if (url.scheme == 'file' && !url.path.length && isWindowsDriveLetter(buffer)) {\n                if (url.host) url.host = '';\n                buffer = charAt(buffer, 0) + ':'; // normalize windows drive letter\n              }\n              push(url.path, buffer);\n            }\n            buffer = '';\n            if (url.scheme == 'file' && (chr == EOF || chr == '?' || chr == '#')) {\n              while (url.path.length > 1 && url.path[0] === '') {\n                shift(url.path);\n              }\n            }\n            if (chr == '?') {\n              url.query = '';\n              state = QUERY;\n            } else if (chr == '#') {\n              url.fragment = '';\n              state = FRAGMENT;\n            }\n          } else {\n            buffer += percentEncode(chr, pathPercentEncodeSet);\n          } break;\n\n        case CANNOT_BE_A_BASE_URL_PATH:\n          if (chr == '?') {\n            url.query = '';\n            state = QUERY;\n          } else if (chr == '#') {\n            url.fragment = '';\n            state = FRAGMENT;\n          } else if (chr != EOF) {\n            url.path[0] += percentEncode(chr, C0ControlPercentEncodeSet);\n          } break;\n\n        case QUERY:\n          if (!stateOverride && chr == '#') {\n            url.fragment = '';\n            state = FRAGMENT;\n          } else if (chr != EOF) {\n            if (chr == \"'\" && url.isSpecial()) url.query += '%27';\n            else if (chr == '#') url.query += '%23';\n            else url.query += percentEncode(chr, C0ControlPercentEncodeSet);\n          } break;\n\n        case FRAGMENT:\n          if (chr != EOF) url.fragment += percentEncode(chr, fragmentPercentEncodeSet);\n          break;\n      }\n\n      pointer++;\n    }\n  },\n  // https://url.spec.whatwg.org/#host-parsing\n  parseHost: function (input) {\n    var result, codePoints, index;\n    if (charAt(input, 0) == '[') {\n      if (charAt(input, input.length - 1) != ']') return INVALID_HOST;\n      result = parseIPv6(stringSlice(input, 1, -1));\n      if (!result) return INVALID_HOST;\n      this.host = result;\n    // opaque host\n    } else if (!this.isSpecial()) {\n      if (exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT, input)) return INVALID_HOST;\n      result = '';\n      codePoints = arrayFrom(input);\n      for (index = 0; index < codePoints.length; index++) {\n        result += percentEncode(codePoints[index], C0ControlPercentEncodeSet);\n      }\n      this.host = result;\n    } else {\n      input = toASCII(input);\n      if (exec(FORBIDDEN_HOST_CODE_POINT, input)) return INVALID_HOST;\n      result = parseIPv4(input);\n      if (result === null) return INVALID_HOST;\n      this.host = result;\n    }\n  },\n  // https://url.spec.whatwg.org/#cannot-have-a-username-password-port\n  cannotHaveUsernamePasswordPort: function () {\n    return !this.host || this.cannotBeABaseURL || this.scheme == 'file';\n  },\n  // https://url.spec.whatwg.org/#include-credentials\n  includesCredentials: function () {\n    return this.username != '' || this.password != '';\n  },\n  // https://url.spec.whatwg.org/#is-special\n  isSpecial: function () {\n    return hasOwn(specialSchemes, this.scheme);\n  },\n  // https://url.spec.whatwg.org/#shorten-a-urls-path\n  shortenPath: function () {\n    var path = this.path;\n    var pathSize = path.length;\n    if (pathSize && (this.scheme != 'file' || pathSize != 1 || !isWindowsDriveLetter(path[0], true))) {\n      path.length--;\n    }\n  },\n  // https://url.spec.whatwg.org/#concept-url-serializer\n  serialize: function () {\n    var url = this;\n    var scheme = url.scheme;\n    var username = url.username;\n    var password = url.password;\n    var host = url.host;\n    var port = url.port;\n    var path = url.path;\n    var query = url.query;\n    var fragment = url.fragment;\n    var output = scheme + ':';\n    if (host !== null) {\n      output += '//';\n      if (url.includesCredentials()) {\n        output += username + (password ? ':' + password : '') + '@';\n      }\n      output += serializeHost(host);\n      if (port !== null) output += ':' + port;\n    } else if (scheme == 'file') output += '//';\n    output += url.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';\n    if (query !== null) output += '?' + query;\n    if (fragment !== null) output += '#' + fragment;\n    return output;\n  },\n  // https://url.spec.whatwg.org/#dom-url-href\n  setHref: function (href) {\n    var failure = this.parse(href);\n    if (failure) throw TypeError(failure);\n    this.searchParams.update();\n  },\n  // https://url.spec.whatwg.org/#dom-url-origin\n  getOrigin: function () {\n    var scheme = this.scheme;\n    var port = this.port;\n    if (scheme == 'blob') try {\n      return new URLConstructor(scheme.path[0]).origin;\n    } catch (error) {\n      return 'null';\n    }\n    if (scheme == 'file' || !this.isSpecial()) return 'null';\n    return scheme + '://' + serializeHost(this.host) + (port !== null ? ':' + port : '');\n  },\n  // https://url.spec.whatwg.org/#dom-url-protocol\n  getProtocol: function () {\n    return this.scheme + ':';\n  },\n  setProtocol: function (protocol) {\n    this.parse($toString(protocol) + ':', SCHEME_START);\n  },\n  // https://url.spec.whatwg.org/#dom-url-username\n  getUsername: function () {\n    return this.username;\n  },\n  setUsername: function (username) {\n    var codePoints = arrayFrom($toString(username));\n    if (this.cannotHaveUsernamePasswordPort()) return;\n    this.username = '';\n    for (var i = 0; i < codePoints.length; i++) {\n      this.username += percentEncode(codePoints[i], userinfoPercentEncodeSet);\n    }\n  },\n  // https://url.spec.whatwg.org/#dom-url-password\n  getPassword: function () {\n    return this.password;\n  },\n  setPassword: function (password) {\n    var codePoints = arrayFrom($toString(password));\n    if (this.cannotHaveUsernamePasswordPort()) return;\n    this.password = '';\n    for (var i = 0; i < codePoints.length; i++) {\n      this.password += percentEncode(codePoints[i], userinfoPercentEncodeSet);\n    }\n  },\n  // https://url.spec.whatwg.org/#dom-url-host\n  getHost: function () {\n    var host = this.host;\n    var port = this.port;\n    return host === null ? ''\n      : port === null ? serializeHost(host)\n      : serializeHost(host) + ':' + port;\n  },\n  setHost: function (host) {\n    if (this.cannotBeABaseURL) return;\n    this.parse(host, HOST);\n  },\n  // https://url.spec.whatwg.org/#dom-url-hostname\n  getHostname: function () {\n    var host = this.host;\n    return host === null ? '' : serializeHost(host);\n  },\n  setHostname: function (hostname) {\n    if (this.cannotBeABaseURL) return;\n    this.parse(hostname, HOSTNAME);\n  },\n  // https://url.spec.whatwg.org/#dom-url-port\n  getPort: function () {\n    var port = this.port;\n    return port === null ? '' : $toString(port);\n  },\n  setPort: function (port) {\n    if (this.cannotHaveUsernamePasswordPort()) return;\n    port = $toString(port);\n    if (port == '') this.port = null;\n    else this.parse(port, PORT);\n  },\n  // https://url.spec.whatwg.org/#dom-url-pathname\n  getPathname: function () {\n    var path = this.path;\n    return this.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';\n  },\n  setPathname: function (pathname) {\n    if (this.cannotBeABaseURL) return;\n    this.path = [];\n    this.parse(pathname, PATH_START);\n  },\n  // https://url.spec.whatwg.org/#dom-url-search\n  getSearch: function () {\n    var query = this.query;\n    return query ? '?' + query : '';\n  },\n  setSearch: function (search) {\n    search = $toString(search);\n    if (search == '') {\n      this.query = null;\n    } else {\n      if ('?' == charAt(search, 0)) search = stringSlice(search, 1);\n      this.query = '';\n      this.parse(search, QUERY);\n    }\n    this.searchParams.update();\n  },\n  // https://url.spec.whatwg.org/#dom-url-searchparams\n  getSearchParams: function () {\n    return this.searchParams.facade;\n  },\n  // https://url.spec.whatwg.org/#dom-url-hash\n  getHash: function () {\n    var fragment = this.fragment;\n    return fragment ? '#' + fragment : '';\n  },\n  setHash: function (hash) {\n    hash = $toString(hash);\n    if (hash == '') {\n      this.fragment = null;\n      return;\n    }\n    if ('#' == charAt(hash, 0)) hash = stringSlice(hash, 1);\n    this.fragment = '';\n    this.parse(hash, FRAGMENT);\n  },\n  update: function () {\n    this.query = this.searchParams.serialize() || null;\n  }\n};\n\n// `URL` constructor\n// https://url.spec.whatwg.org/#url-class\nvar URLConstructor = function URL(url /* , base */) {\n  var that = anInstance(this, URLPrototype);\n  var base = arguments.length > 1 ? arguments[1] : undefined;\n  var state = setInternalState(that, new URLState(url, false, base));\n  if (!DESCRIPTORS) {\n    that.href = state.serialize();\n    that.origin = state.getOrigin();\n    that.protocol = state.getProtocol();\n    that.username = state.getUsername();\n    that.password = state.getPassword();\n    that.host = state.getHost();\n    that.hostname = state.getHostname();\n    that.port = state.getPort();\n    that.pathname = state.getPathname();\n    that.search = state.getSearch();\n    that.searchParams = state.getSearchParams();\n    that.hash = state.getHash();\n  }\n};\n\nvar URLPrototype = URLConstructor.prototype;\n\nvar accessorDescriptor = function (getter, setter) {\n  return {\n    get: function () {\n      return getInternalURLState(this)[getter]();\n    },\n    set: setter && function (value) {\n      return getInternalURLState(this)[setter](value);\n    },\n    configurable: true,\n    enumerable: true\n  };\n};\n\nif (DESCRIPTORS) {\n  defineProperties(URLPrototype, {\n    // `URL.prototype.href` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-href\n    href: accessorDescriptor('serialize', 'setHref'),\n    // `URL.prototype.origin` getter\n    // https://url.spec.whatwg.org/#dom-url-origin\n    origin: accessorDescriptor('getOrigin'),\n    // `URL.prototype.protocol` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-protocol\n    protocol: accessorDescriptor('getProtocol', 'setProtocol'),\n    // `URL.prototype.username` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-username\n    username: accessorDescriptor('getUsername', 'setUsername'),\n    // `URL.prototype.password` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-password\n    password: accessorDescriptor('getPassword', 'setPassword'),\n    // `URL.prototype.host` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-host\n    host: accessorDescriptor('getHost', 'setHost'),\n    // `URL.prototype.hostname` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-hostname\n    hostname: accessorDescriptor('getHostname', 'setHostname'),\n    // `URL.prototype.port` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-port\n    port: accessorDescriptor('getPort', 'setPort'),\n    // `URL.prototype.pathname` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-pathname\n    pathname: accessorDescriptor('getPathname', 'setPathname'),\n    // `URL.prototype.search` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-search\n    search: accessorDescriptor('getSearch', 'setSearch'),\n    // `URL.prototype.searchParams` getter\n    // https://url.spec.whatwg.org/#dom-url-searchparams\n    searchParams: accessorDescriptor('getSearchParams'),\n    // `URL.prototype.hash` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-hash\n    hash: accessorDescriptor('getHash', 'setHash')\n  });\n}\n\n// `URL.prototype.toJSON` method\n// https://url.spec.whatwg.org/#dom-url-tojson\nredefine(URLPrototype, 'toJSON', function toJSON() {\n  return getInternalURLState(this).serialize();\n}, { enumerable: true });\n\n// `URL.prototype.toString` method\n// https://url.spec.whatwg.org/#URL-stringification-behavior\nredefine(URLPrototype, 'toString', function toString() {\n  return getInternalURLState(this).serialize();\n}, { enumerable: true });\n\nif (NativeURL) {\n  var nativeCreateObjectURL = NativeURL.createObjectURL;\n  var nativeRevokeObjectURL = NativeURL.revokeObjectURL;\n  // `URL.createObjectURL` method\n  // https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL\n  if (nativeCreateObjectURL) redefine(URLConstructor, 'createObjectURL', bind(nativeCreateObjectURL, NativeURL));\n  // `URL.revokeObjectURL` method\n  // https://developer.mozilla.org/en-US/docs/Web/API/URL/revokeObjectURL\n  if (nativeRevokeObjectURL) redefine(URLConstructor, 'revokeObjectURL', bind(nativeRevokeObjectURL, NativeURL));\n}\n\nsetToStringTag(URLConstructor, 'URL');\n\n$({ global: true, forced: !USE_NATIVE_URL, sham: !DESCRIPTORS }, {\n  URL: URLConstructor\n});\n","'use strict';\n// based on https://github.com/bestiejs/punycode.js/blob/master/punycode.js\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\nvar base = 36;\nvar tMin = 1;\nvar tMax = 26;\nvar skew = 38;\nvar damp = 700;\nvar initialBias = 72;\nvar initialN = 128; // 0x80\nvar delimiter = '-'; // '\\x2D'\nvar regexNonASCII = /[^\\0-\\u007E]/; // non-ASCII chars\nvar regexSeparators = /[.\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\nvar OVERFLOW_ERROR = 'Overflow: input needs wider integers to process';\nvar baseMinusTMin = base - tMin;\n\nvar RangeError = global.RangeError;\nvar exec = uncurryThis(regexSeparators.exec);\nvar floor = Math.floor;\nvar fromCharCode = String.fromCharCode;\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar join = uncurryThis([].join);\nvar push = uncurryThis([].push);\nvar replace = uncurryThis(''.replace);\nvar split = uncurryThis(''.split);\nvar toLowerCase = uncurryThis(''.toLowerCase);\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n */\nvar ucs2decode = function (string) {\n  var output = [];\n  var counter = 0;\n  var length = string.length;\n  while (counter < length) {\n    var value = charCodeAt(string, counter++);\n    if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n      // It's a high surrogate, and there is a next character.\n      var extra = charCodeAt(string, counter++);\n      if ((extra & 0xFC00) == 0xDC00) { // Low surrogate.\n        push(output, ((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n      } else {\n        // It's an unmatched surrogate; only append this code unit, in case the\n        // next code unit is the high surrogate of a surrogate pair.\n        push(output, value);\n        counter--;\n      }\n    } else {\n      push(output, value);\n    }\n  }\n  return output;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n */\nvar digitToBasic = function (digit) {\n  //  0..25 map to ASCII a..z or A..Z\n  // 26..35 map to ASCII 0..9\n  return digit + 22 + 75 * (digit < 26);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n */\nvar adapt = function (delta, numPoints, firstTime) {\n  var k = 0;\n  delta = firstTime ? floor(delta / damp) : delta >> 1;\n  delta += floor(delta / numPoints);\n  while (delta > baseMinusTMin * tMax >> 1) {\n    delta = floor(delta / baseMinusTMin);\n    k += base;\n  }\n  return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n */\nvar encode = function (input) {\n  var output = [];\n\n  // Convert the input in UCS-2 to an array of Unicode code points.\n  input = ucs2decode(input);\n\n  // Cache the length.\n  var inputLength = input.length;\n\n  // Initialize the state.\n  var n = initialN;\n  var delta = 0;\n  var bias = initialBias;\n  var i, currentValue;\n\n  // Handle the basic code points.\n  for (i = 0; i < input.length; i++) {\n    currentValue = input[i];\n    if (currentValue < 0x80) {\n      push(output, fromCharCode(currentValue));\n    }\n  }\n\n  var basicLength = output.length; // number of basic code points.\n  var handledCPCount = basicLength; // number of code points that have been handled;\n\n  // Finish the basic string with a delimiter unless it's empty.\n  if (basicLength) {\n    push(output, delimiter);\n  }\n\n  // Main encoding loop:\n  while (handledCPCount < inputLength) {\n    // All non-basic code points < n have been handled already. Find the next larger one:\n    var m = maxInt;\n    for (i = 0; i < input.length; i++) {\n      currentValue = input[i];\n      if (currentValue >= n && currentValue < m) {\n        m = currentValue;\n      }\n    }\n\n    // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>, but guard against overflow.\n    var handledCPCountPlusOne = handledCPCount + 1;\n    if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n      throw RangeError(OVERFLOW_ERROR);\n    }\n\n    delta += (m - n) * handledCPCountPlusOne;\n    n = m;\n\n    for (i = 0; i < input.length; i++) {\n      currentValue = input[i];\n      if (currentValue < n && ++delta > maxInt) {\n        throw RangeError(OVERFLOW_ERROR);\n      }\n      if (currentValue == n) {\n        // Represent delta as a generalized variable-length integer.\n        var q = delta;\n        var k = base;\n        while (true) {\n          var t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n          if (q < t) break;\n          var qMinusT = q - t;\n          var baseMinusT = base - t;\n          push(output, fromCharCode(digitToBasic(t + qMinusT % baseMinusT)));\n          q = floor(qMinusT / baseMinusT);\n          k += base;\n        }\n\n        push(output, fromCharCode(digitToBasic(q)));\n        bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n        delta = 0;\n        handledCPCount++;\n      }\n    }\n\n    delta++;\n    n++;\n  }\n  return join(output, '');\n};\n\nmodule.exports = function (input) {\n  var encoded = [];\n  var labels = split(replace(toLowerCase(input), regexSeparators, '\\u002E'), '.');\n  var i, label;\n  for (i = 0; i < labels.length; i++) {\n    label = labels[i];\n    push(encoded, exec(regexNonASCII, label) ? 'xn--' + encode(label) : label);\n  }\n  return join(encoded, '.');\n};\n","var global = require('../internals/global');\n\nvar TypeError = global.TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\n// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`\nrequire('../modules/es.array.iterator');\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar USE_NATIVE_URL = require('../internals/native-url');\nvar redefine = require('../internals/redefine');\nvar redefineAll = require('../internals/redefine-all');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar InternalStateModule = require('../internals/internal-state');\nvar anInstance = require('../internals/an-instance');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar bind = require('../internals/function-bind-context');\nvar classof = require('../internals/classof');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar $toString = require('../internals/to-string');\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arraySort = require('../internals/array-sort');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar URL_SEARCH_PARAMS = 'URLSearchParams';\nvar URL_SEARCH_PARAMS_ITERATOR = URL_SEARCH_PARAMS + 'Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalParamsState = InternalStateModule.getterFor(URL_SEARCH_PARAMS);\nvar getInternalIteratorState = InternalStateModule.getterFor(URL_SEARCH_PARAMS_ITERATOR);\n\nvar n$Fetch = getBuiltIn('fetch');\nvar N$Request = getBuiltIn('Request');\nvar Headers = getBuiltIn('Headers');\nvar RequestPrototype = N$Request && N$Request.prototype;\nvar HeadersPrototype = Headers && Headers.prototype;\nvar RegExp = global.RegExp;\nvar TypeError = global.TypeError;\nvar decodeURIComponent = global.decodeURIComponent;\nvar encodeURIComponent = global.encodeURIComponent;\nvar charAt = uncurryThis(''.charAt);\nvar join = uncurryThis([].join);\nvar push = uncurryThis([].push);\nvar replace = uncurryThis(''.replace);\nvar shift = uncurryThis([].shift);\nvar splice = uncurryThis([].splice);\nvar split = uncurryThis(''.split);\nvar stringSlice = uncurryThis(''.slice);\n\nvar plus = /\\+/g;\nvar sequences = Array(4);\n\nvar percentSequence = function (bytes) {\n  return sequences[bytes - 1] || (sequences[bytes - 1] = RegExp('((?:%[\\\\da-f]{2}){' + bytes + '})', 'gi'));\n};\n\nvar percentDecode = function (sequence) {\n  try {\n    return decodeURIComponent(sequence);\n  } catch (error) {\n    return sequence;\n  }\n};\n\nvar deserialize = function (it) {\n  var result = replace(it, plus, ' ');\n  var bytes = 4;\n  try {\n    return decodeURIComponent(result);\n  } catch (error) {\n    while (bytes) {\n      result = replace(result, percentSequence(bytes--), percentDecode);\n    }\n    return result;\n  }\n};\n\nvar find = /[!'()~]|%20/g;\n\nvar replacements = {\n  '!': '%21',\n  \"'\": '%27',\n  '(': '%28',\n  ')': '%29',\n  '~': '%7E',\n  '%20': '+'\n};\n\nvar replacer = function (match) {\n  return replacements[match];\n};\n\nvar serialize = function (it) {\n  return replace(encodeURIComponent(it), find, replacer);\n};\n\nvar URLSearchParamsIterator = createIteratorConstructor(function Iterator(params, kind) {\n  setInternalState(this, {\n    type: URL_SEARCH_PARAMS_ITERATOR,\n    iterator: getIterator(getInternalParamsState(params).entries),\n    kind: kind\n  });\n}, 'Iterator', function next() {\n  var state = getInternalIteratorState(this);\n  var kind = state.kind;\n  var step = state.iterator.next();\n  var entry = step.value;\n  if (!step.done) {\n    step.value = kind === 'keys' ? entry.key : kind === 'values' ? entry.value : [entry.key, entry.value];\n  } return step;\n}, true);\n\nvar URLSearchParamsState = function (init) {\n  this.entries = [];\n  this.url = null;\n\n  if (init !== undefined) {\n    if (isObject(init)) this.parseObject(init);\n    else this.parseQuery(typeof init == 'string' ? charAt(init, 0) === '?' ? stringSlice(init, 1) : init : $toString(init));\n  }\n};\n\nURLSearchParamsState.prototype = {\n  type: URL_SEARCH_PARAMS,\n  bindURL: function (url) {\n    this.url = url;\n    this.update();\n  },\n  parseObject: function (object) {\n    var iteratorMethod = getIteratorMethod(object);\n    var iterator, next, step, entryIterator, entryNext, first, second;\n\n    if (iteratorMethod) {\n      iterator = getIterator(object, iteratorMethod);\n      next = iterator.next;\n      while (!(step = call(next, iterator)).done) {\n        entryIterator = getIterator(anObject(step.value));\n        entryNext = entryIterator.next;\n        if (\n          (first = call(entryNext, entryIterator)).done ||\n          (second = call(entryNext, entryIterator)).done ||\n          !call(entryNext, entryIterator).done\n        ) throw TypeError('Expected sequence with length 2');\n        push(this.entries, { key: $toString(first.value), value: $toString(second.value) });\n      }\n    } else for (var key in object) if (hasOwn(object, key)) {\n      push(this.entries, { key: key, value: $toString(object[key]) });\n    }\n  },\n  parseQuery: function (query) {\n    if (query) {\n      var attributes = split(query, '&');\n      var index = 0;\n      var attribute, entry;\n      while (index < attributes.length) {\n        attribute = attributes[index++];\n        if (attribute.length) {\n          entry = split(attribute, '=');\n          push(this.entries, {\n            key: deserialize(shift(entry)),\n            value: deserialize(join(entry, '='))\n          });\n        }\n      }\n    }\n  },\n  serialize: function () {\n    var entries = this.entries;\n    var result = [];\n    var index = 0;\n    var entry;\n    while (index < entries.length) {\n      entry = entries[index++];\n      push(result, serialize(entry.key) + '=' + serialize(entry.value));\n    } return join(result, '&');\n  },\n  update: function () {\n    this.entries.length = 0;\n    this.parseQuery(this.url.query);\n  },\n  updateURL: function () {\n    if (this.url) this.url.update();\n  }\n};\n\n// `URLSearchParams` constructor\n// https://url.spec.whatwg.org/#interface-urlsearchparams\nvar URLSearchParamsConstructor = function URLSearchParams(/* init */) {\n  anInstance(this, URLSearchParamsPrototype);\n  var init = arguments.length > 0 ? arguments[0] : undefined;\n  setInternalState(this, new URLSearchParamsState(init));\n};\n\nvar URLSearchParamsPrototype = URLSearchParamsConstructor.prototype;\n\nredefineAll(URLSearchParamsPrototype, {\n  // `URLSearchParams.prototype.append` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-append\n  append: function append(name, value) {\n    validateArgumentsLength(arguments.length, 2);\n    var state = getInternalParamsState(this);\n    push(state.entries, { key: $toString(name), value: $toString(value) });\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.delete` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-delete\n  'delete': function (name) {\n    validateArgumentsLength(arguments.length, 1);\n    var state = getInternalParamsState(this);\n    var entries = state.entries;\n    var key = $toString(name);\n    var index = 0;\n    while (index < entries.length) {\n      if (entries[index].key === key) splice(entries, index, 1);\n      else index++;\n    }\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.get` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-get\n  get: function get(name) {\n    validateArgumentsLength(arguments.length, 1);\n    var entries = getInternalParamsState(this).entries;\n    var key = $toString(name);\n    var index = 0;\n    for (; index < entries.length; index++) {\n      if (entries[index].key === key) return entries[index].value;\n    }\n    return null;\n  },\n  // `URLSearchParams.prototype.getAll` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-getall\n  getAll: function getAll(name) {\n    validateArgumentsLength(arguments.length, 1);\n    var entries = getInternalParamsState(this).entries;\n    var key = $toString(name);\n    var result = [];\n    var index = 0;\n    for (; index < entries.length; index++) {\n      if (entries[index].key === key) push(result, entries[index].value);\n    }\n    return result;\n  },\n  // `URLSearchParams.prototype.has` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-has\n  has: function has(name) {\n    validateArgumentsLength(arguments.length, 1);\n    var entries = getInternalParamsState(this).entries;\n    var key = $toString(name);\n    var index = 0;\n    while (index < entries.length) {\n      if (entries[index++].key === key) return true;\n    }\n    return false;\n  },\n  // `URLSearchParams.prototype.set` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-set\n  set: function set(name, value) {\n    validateArgumentsLength(arguments.length, 1);\n    var state = getInternalParamsState(this);\n    var entries = state.entries;\n    var found = false;\n    var key = $toString(name);\n    var val = $toString(value);\n    var index = 0;\n    var entry;\n    for (; index < entries.length; index++) {\n      entry = entries[index];\n      if (entry.key === key) {\n        if (found) splice(entries, index--, 1);\n        else {\n          found = true;\n          entry.value = val;\n        }\n      }\n    }\n    if (!found) push(entries, { key: key, value: val });\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.sort` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-sort\n  sort: function sort() {\n    var state = getInternalParamsState(this);\n    arraySort(state.entries, function (a, b) {\n      return a.key > b.key ? 1 : -1;\n    });\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.forEach` method\n  forEach: function forEach(callback /* , thisArg */) {\n    var entries = getInternalParamsState(this).entries;\n    var boundFunction = bind(callback, arguments.length > 1 ? arguments[1] : undefined);\n    var index = 0;\n    var entry;\n    while (index < entries.length) {\n      entry = entries[index++];\n      boundFunction(entry.value, entry.key, this);\n    }\n  },\n  // `URLSearchParams.prototype.keys` method\n  keys: function keys() {\n    return new URLSearchParamsIterator(this, 'keys');\n  },\n  // `URLSearchParams.prototype.values` method\n  values: function values() {\n    return new URLSearchParamsIterator(this, 'values');\n  },\n  // `URLSearchParams.prototype.entries` method\n  entries: function entries() {\n    return new URLSearchParamsIterator(this, 'entries');\n  }\n}, { enumerable: true });\n\n// `URLSearchParams.prototype[@@iterator]` method\nredefine(URLSearchParamsPrototype, ITERATOR, URLSearchParamsPrototype.entries, { name: 'entries' });\n\n// `URLSearchParams.prototype.toString` method\n// https://url.spec.whatwg.org/#urlsearchparams-stringification-behavior\nredefine(URLSearchParamsPrototype, 'toString', function toString() {\n  return getInternalParamsState(this).serialize();\n}, { enumerable: true });\n\nsetToStringTag(URLSearchParamsConstructor, URL_SEARCH_PARAMS);\n\n$({ global: true, forced: !USE_NATIVE_URL }, {\n  URLSearchParams: URLSearchParamsConstructor\n});\n\n// Wrap `fetch` and `Request` for correct work with polyfilled `URLSearchParams`\nif (!USE_NATIVE_URL && isCallable(Headers)) {\n  var headersHas = uncurryThis(HeadersPrototype.has);\n  var headersSet = uncurryThis(HeadersPrototype.set);\n\n  var wrapRequestOptions = function (init) {\n    if (isObject(init)) {\n      var body = init.body;\n      var headers;\n      if (classof(body) === URL_SEARCH_PARAMS) {\n        headers = init.headers ? new Headers(init.headers) : new Headers();\n        if (!headersHas(headers, 'content-type')) {\n          headersSet(headers, 'content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n        return create(init, {\n          body: createPropertyDescriptor(0, $toString(body)),\n          headers: createPropertyDescriptor(0, headers)\n        });\n      }\n    } return init;\n  };\n\n  if (isCallable(n$Fetch)) {\n    $({ global: true, enumerable: true, forced: true }, {\n      fetch: function fetch(input /* , init */) {\n        return n$Fetch(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});\n      }\n    });\n  }\n\n  if (isCallable(N$Request)) {\n    var RequestConstructor = function Request(input /* , init */) {\n      anInstance(this, RequestPrototype);\n      return new N$Request(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});\n    };\n\n    RequestPrototype.constructor = RequestConstructor;\n    RequestConstructor.prototype = RequestPrototype;\n\n    $({ global: true, forced: true }, {\n      Request: RequestConstructor\n    });\n  }\n}\n\nmodule.exports = {\n  URLSearchParams: URLSearchParamsConstructor,\n  getState: getInternalParamsState\n};\n","!function(){function t(){var e=Array.prototype.slice.call(arguments),n=document.createDocumentFragment();e.forEach(function(e){var t=e instanceof Node;n.appendChild(t?e:document.createTextNode(String(e)))}),this.appendChild(n)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty(\"append\")||Object.defineProperty(e,\"append\",{configurable:!0,enumerable:!0,writable:!0,value:t})})}();\n","import 'core-js';\nimport 'mdn-polyfills/Node.prototype.append';\n\nif (!('scrollTo' in Element.prototype)) {\n    Object.defineProperty(Element.prototype, 'scrollTo', {\n        value: function (x, y) {\n            this.scrollLeft = x;\n            this.scrollTop = y;\n        }\n    });\n}\n\nif (!('scrollBy' in Element.prototype)) {\n    Object.defineProperty(Element.prototype, 'scrollBy', {\n        value: function (x, y) {\n            this.scrollLeft += x;\n            this.scrollTop += y;\n        }\n    });\n}\n\n// sometimes Android WebView has no localStorage\nif (!('localStorage' in window)) {\n    try {\n        window['localStorage'] = {\n            getItem: () => null,\n            setItem: () => {},\n            removeItem: () => {},\n        } as any;\n    } catch (e) {\n        // maybe it doesn't let me set this\n    }\n}","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\n\n// `URL.prototype.toJSON` method\n// https://url.spec.whatwg.org/#dom-url-tojson\n$({ target: 'URL', proto: true, enumerable: true }, {\n  toJSON: function toJSON() {\n    return call(URL.prototype.toString, this);\n  }\n});\n","export function createCanvas(w?: number, h?: number): HTMLCanvasElement {\n    const result = document.createElement('canvas');\n    if (w && h) {\n        result.width = w;\n        result.height = h;\n    }\n    return result;\n}","import {createCanvas} from './create-canvas';\n\nexport const isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\nexport const eventUsesHighResTimeStamp = (function() {\n\n    let eventUsesHighResTimeStamp: boolean | null = null;\n    if (document.body) {\n        (function() {\n            const event = new Event('');\n            eventUsesHighResTimeStamp = event.timeStamp < 1000 * 60 * 60;\n        })();\n    } else {\n        window.addEventListener('DOMContentLoaded', function(event) {\n            eventUsesHighResTimeStamp = event.timeStamp < 1000 * 60 * 60;\n        });\n    }\n\n    return function(): boolean {\n        if (eventUsesHighResTimeStamp === null) {\n            throw 'eventUsesHighResTimeStamp not initialized';\n        }\n        return eventUsesHighResTimeStamp;\n    }\n})();\n\nexport const mouseEventHasMovement = (() => {\n\n    // no support: IE, Safari, Safari iOS\n    // supported but broken: Firefox\n\n    if (!('MouseEvent' in window)) {\n        return false;\n    }\n    let mouseEvent;\n    try {\n        mouseEvent = new MouseEvent('mousemove'); // browsers not supporting the constructor don't have it\n    } catch (e) {\n        return false;\n    }\n    if (!('movementX' in mouseEvent)) {\n        return false; // likely safari\n    }\n    return !isFirefox;\n})();\n\nexport const hasPointerEvents = !!window.PointerEvent;\n\nexport const hasWebGl = (function() {\n\n    const hasWebgl = (function() {\n        const canvas = createCanvas();\n        try {\n            canvas.getContext('experimental-webgl', { premultipliedAlpha: false });\n            return true;\n        } catch (e) {\n            return false;\n        }\n    })();\n\n    return function() {\n        return hasWebgl;\n    }\n})();\n\nexport const getVisitor = (function () {\n    const visitor = {\n        chrome: false,\n        gl: false\n    };\n    //Chrome\n    if ((window as any).chrome && (window as any).chrome.app) {\n        visitor.chrome = true;\n    }\n    //WebGL\n    visitor.gl = hasWebGl();\n    return function () {\n        return JSON.parse(JSON.stringify(visitor));\n    }\n})();\n\nexport const isCssMinMaxSupported = (function() {\n    let result: boolean | null = null;\n\n    function test() {\n        const div = document.createElement('div');\n        div.style.position = 'absolute';\n        div.style.top = '0';\n        div.style.left = 'max(0px, 25px)';\n        document.body.appendChild(div);\n        setTimeout(function() {\n            result = div.offsetLeft === 25;\n            document.body.removeChild(div);\n        }, 25);\n    }\n\n    if (document.body) {\n        test();\n    } else {\n        window.addEventListener('DOMContentLoaded', function() {\n            test();\n        });\n    }\n\n    return function(): boolean {\n        if (result === null) {\n            throw new Error('isCssMinMaxSupported not initialized');\n        }\n        return result;\n    };\n})();\n\nexport const canShareFiles = function(): boolean {\n    return 'share' in navigator && 'canShare' in navigator;\n};","import {hasPointerEvents} from '../base/browser';\n\nconst listenerFuncObj = {};\n\nexport const setEventListener = function (DomEl, type, listener) {\n    if (!hasPointerEvents) {\n        type = type.replace('pointer', 'mouse');\n    }\n    DomEl[type] = listener;\n};\n\nexport const addEventListener = function (DomEl, type, listener, options?) {\n    if (!hasPointerEvents) {\n        type = type.replace('pointer', 'mouse');\n    }\n    if (!(type in listenerFuncObj)) {\n        listenerFuncObj[type] = [];\n    }\n    listenerFuncObj[type].push(listener);\n    DomEl.addEventListener(type, listener, options);\n};\n\nexport const removeEventListener = function (DomEl, type, listener, options?) {\n    if (!hasPointerEvents) {\n        type = type.replace('pointer', 'mouse');\n    }\n    if (type in listenerFuncObj) {\n        for (let i = 0; i < listenerFuncObj[type].length; i++) {\n            if (listenerFuncObj[type][i] === listener) {\n                listenerFuncObj[type].splice(i, 1);\n                i--;\n            }\n        }\n    }\n    DomEl.removeEventListener(type, listener, options);\n};","import {IKeyString, ISize2D, ISVG, IVector2D} from '../BB.types';\n\nexport function insertAfter (referenceNode: Element, newNode: Element): void {\n    if (referenceNode.parentNode) {\n        referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    }\n}\n\nexport function loadImage (im: HTMLImageElement, callback: () => void): void {\n    let counter = 0;\n\n    function check() {\n        if (counter === 1000) {\n            alert(\"couldn't load\");\n            return;\n        }\n        if (im.complete) {\n            counter++;\n            callback();\n        } else {\n            setTimeout(check, 1);\n        }\n    }\n\n    check();\n}\n\nexport function css (el: HTMLElement | SVGElement, styleObj: IKeyString): void {\n    const keyArr = Object.keys(styleObj);\n    let keyStr: string;\n    const style = (el.style as unknown) as IKeyString;\n    for (let i = 0; i < keyArr.length; i++) {\n        keyStr = keyArr[i];\n        style[keyStr] = styleObj[keyStr];\n        style.alignContent = 'true';\n        if (keyStr === 'userSelect') {\n            style.webkitUserSelect = styleObj[keyStr]; // safari\n        }\n    }\n}\n\nexport function setAttributes (el: HTMLElement, attrObj: IKeyString): void {\n    const keyArr = Object.keys(attrObj);\n    let keyStr;\n    for (let i = 0; i < keyArr.length; i++) {\n        keyStr = keyArr[i];\n        el.setAttribute(keyStr, attrObj[keyStr]);\n    }\n}\n\nexport function addClassName (el: HTMLElement | SVGElement, classStr: string): void {\n    const classAttr = el.getAttribute('class');\n    const splitArr = classAttr === null ? [] : classAttr.split(' ');\n    if (splitArr.includes(classStr)) {\n        return;\n    }\n    splitArr.push(classStr);\n    el.setAttribute('class', splitArr.join(' '));\n}\n\nexport function removeClassName (el: HTMLElement | SVGElement, classStr: string): void {\n    const classAttr = el.getAttribute('class');\n    const splitArr = classAttr === null ? [] : classAttr.split(' ');\n    if (!splitArr.includes(classStr)) {\n        return;\n    }\n    for (let i = 0; i < splitArr.length; i++) {\n        if (splitArr[i] === classStr) {\n            splitArr.splice(i, 1);\n            i--;\n        }\n    }\n    el.setAttribute('class', splitArr.join(' '));\n}\n\n/**\n * appendChild with an array\n * @param target\n * @param els\n */\nexport function append(target: HTMLElement, els: (HTMLElement | string | null)[]) {\n    const fragment = document.createDocumentFragment();\n    els.forEach(item => item ? fragment.append(item) : null);\n    target.append(fragment);\n}\n\n/**\n * a needs to fit into b\n * @param aw\n * @param ah\n * @param bw\n * @param bh\n * @param min\n */\nexport function fitInto (aw: number, ah: number, bw: number, bh: number, min?: number): ISize2D {\n    let width = aw * bw, height = ah * bw;\n    if (width > bw) {\n        height = bw / width * height;\n        width = bw;\n    }\n    if (height > bh) {\n        width = bh / height * width;\n        height = bh;\n    }\n    if (min) {\n        width = Math.max(min, width);\n        height = Math.max(min, height);\n    }\n    return {width, height};\n}\n\n/**\n * center b in a\n * @param aw\n * @param ah\n * @param bw\n * @param bh\n */\nexport function centerWithin (aw: number, ah: number, bw: number, bh: number): IVector2D {\n    return {\n        x: aw / 2 - bw / 2,\n        y: ah / 2 - bh / 2\n    };\n}\n\nexport function getDate (): string {\n    const date = new Date();\n    const year = date.getFullYear();\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const day = date.getDate().toString().padStart(2, '0');\n    const minutes = (date.getHours() * 60 + date.getMinutes()).toString(36).padStart(3, '0');\n\n    return year + '_' + month + '_' + day + '_' + minutes + '_';\n}\n\nexport function gcd (a: number, b: number): number {\n    return b ? gcd(b, a % b) : a;\n}\n\nexport function reduce (numerator: number, denominator: number): [number, number] {\n    const g = gcd(numerator, denominator);\n    return [numerator / g, denominator / g];\n}\n\nexport function decToFraction (decimalNumber: number): [number, number] {\n    const len = decimalNumber.toString().length - 2;\n    const denominator = Math.pow(10, len);\n    const numerator = decimalNumber * denominator;\n    return reduce(numerator, denominator);\n}\n\n/**\n * blobObj isn't always a Blob, but rather an object, because Blob doesn't exist.\n * @param blobObj\n * @returns {string}\n */\nexport function imageBlobToUrl(blobObj: Blob): string {\n    if (!blobObj) {\n        throw new Error('blobObj is undefined or null');\n    }\n    if (window.Blob && blobObj instanceof Blob) {\n        return URL.createObjectURL(blobObj); // object url\n    } else if (blobObj.constructor.name === 'Object') {\n        const fauxBlob = (blobObj as unknown) as {type: string, encoding: string, data: string};\n        return 'data:' + fauxBlob.type + ';' + fauxBlob.encoding + ',' + fauxBlob.data; // data url\n    } else {\n        throw new Error('unknown blob format');\n    }\n}\n\nexport function dateDayDifference (dateA: string | Date, dateB: string | Date): number {\n    dateA = new Date(dateA);\n    dateB = new Date(dateB);\n    dateA.setHours(0, 0, 0, 0);\n    dateB.setHours(0, 0, 0, 0);\n    return (dateB.getTime() - dateA.getTime()) / (1000 * 60 * 60 * 24);\n}\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function copyObj (obj: any): any {\n    return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * triggers Web Share API - share feature on mobile devices\n * Only works if they support file sharing - e.g. Safari can't do this yet\n * only call if BB.canShareFiles() -> true\n *\n * p = {\n *     canvas: Canvas,\n *     fileName: string,\n *     title: string\n * }\n *\n * @param p\n */\nexport function shareCanvas (p: {canvas: HTMLCanvasElement, fileName:string, title: string, callback: () => void}): void {\n    const mimetype = 'image/png';\n    const err = () => alert('sharing not supported');\n    p.canvas.toBlob(function(blob) {\n        if (blob === null) {\n            err();\n            p.callback();\n            return;\n        }\n        try {\n            const filesArray = [new File([blob], p.fileName, {type: mimetype})];\n            navigator.share({\n                title: p.title,\n                files: filesArray,\n            } as any)\n                .then(r => {\n\n                })\n                .catch(e => {\n                    err();\n            });\n        } catch(e) {\n            err();\n        }\n        p.callback();\n    }, mimetype);\n}\n\n/**\n * Prevent ipad from zooming in when double tapping. iPadOS 13 bug.\n * Give it your click event\n *\n * @param clickEvent\n * @returns {boolean}\n */\nexport function handleClick (clickEvent: MouseEvent): boolean {\n    const target: HTMLElement | null = clickEvent.target as HTMLElement;\n    if (!target) {\n        return false;\n    }\n    if (['A', 'LABEL', 'INPUT'].includes(target.tagName) || (target as any).allowClick) {\n        return true;\n    }\n    clickEvent.preventDefault();\n    return false;\n}\n\n\n/**\n * @param el {elementType: string, childrenArr: []el, ...svg attributes...}\n * @returns svg element tree\n */\nexport function createSvg (el: ISVG): SVGElement {\n    const result = document.createElementNS('http://www.w3.org/2000/svg', el.elementType);\n    const keyArr = Object.keys(el);\n    let keyStr;\n    for (let i = 0; i < keyArr.length; i++) {\n        keyStr = keyArr[i];\n        if (keyStr === 'childrenArr') {\n            for (let e = 0; e < el.childrenArr.length; e++) {\n                result.appendChild(createSvg(el.childrenArr[e]));\n            }\n        } else if (keyStr !== 'elementType') {\n            result.setAttribute(keyStr, el[keyStr] as string);\n        }\n    }\n    return result;\n}","import {addEventListener, removeEventListener} from './event-listener';\n\n\nconst globalKey = (() => {\n\n    const keyStrToKeyObj = { // keyStr not to contain a '+', because that's used for the comboStr\n        'space': [' ', 'Spacebar'], // Spacebar in IE\n        'alt': ['Alt', 'AltGraph'],\n        'shift': 'Shift',\n        'ctrl': 'Control',\n        'cmd': ['Meta', 'MetaLeft', 'MetaRight'],\n        'enter': 'Enter',\n        'esc': 'Escape',\n        'backspace': 'Backspace',\n        'delete': 'Delete',\n        'sqbr_open': '[',\n        'sqbr_close': ']',\n        'a': ['a', 'A'],\n        'b': ['b', 'B'],\n        'c': ['c', 'C'],\n        'e': ['e', 'E'],\n        'f': ['f', 'F'],\n        'g': ['g', 'G'],\n        'r': ['r', 'R'], // when holding shift\n        's': ['s', 'S'],\n        't': ['t', 'T'],\n        'u': ['u', 'U'],\n        'x': ['x', 'X'],\n        'y': ['y', 'Y'],\n        'z': ['z', 'Z'],\n        'plus': '+',\n        'minus': '-',\n        'left': 'ArrowLeft',\n        'right': 'ArrowRight',\n        'up': 'ArrowUp',\n        'down': 'ArrowDown',\n        'home': 'Home',\n        'end': 'End'\n    };\n    const keyToKeyStrArr = Object.keys(keyStrToKeyObj);\n    const isDownObj = {};\n    const keyToKeyStrObj = {}; // event.key to keyStr { ArrowLeft: 'left', ... }\n    let comboArr = [];\n    //a physical key's \"key\" can change as other keys get pressed. to keep track, need to also track the code\n    let codeIsDownObj = {}; // { KeyE: 'e', KeyF: null } - null not down, string, the associated keyStr\n    const listenerArr = [];\n\n    for (let i = 0; i < keyToKeyStrArr.length; i++) {\n        isDownObj[keyToKeyStrArr[i]] = false;\n\n        const code = keyStrToKeyObj[keyToKeyStrArr[i]];\n        if (typeof code === 'string') {\n            keyToKeyStrObj[keyStrToKeyObj[keyToKeyStrArr[i]]] = keyToKeyStrArr[i];\n        } else {\n            for (let e = 0; e < code.length; e++) {\n                keyToKeyStrObj[code[e]] = keyToKeyStrArr[i];\n            }\n        }\n    }\n\n    function emitDown(a, b, c, d?) {\n        listenerArr.forEach(item => {\n            if (!item[0]) {\n                return;\n            }\n            item[0](a, b, c, d);\n        });\n    }\n\n    function emitUp(a, b, c) {\n        listenerArr.forEach(item => {\n            if (!item[1]) {\n                return;\n            }\n            item[1](a, b, c);\n        });\n    }\n\n    function emitBlur() {\n        listenerArr.forEach(item => {\n            if (!item[2]) {\n                return;\n            }\n            item[2]();\n        });\n    }\n\n    function keyDown(e) {\n        const key = e.key;\n        const code = 'code' in e ? e.code : e.keyCode; // ie doesn't have code\n\n        if (key in keyToKeyStrObj) {\n            const keyStr = keyToKeyStrObj[key];\n            if (isDownObj[keyStr]) {\n                emitDown(keyStr, e, comboArr.join('+'), true);\n                return;\n            }\n            isDownObj[keyStr] = true;\n            codeIsDownObj[code] = keyStr;\n\n            //add to combo\n            comboArr.push(keyStr);\n\n            emitDown(keyStr, e, comboArr.join('+'));\n        }\n    }\n\n\n    function keyUp(e) {\n        const key = e.key;\n        const code = 'code' in e ? e.code : e.keyCode; // ie doesn't have code\n        const oldComboStr = comboArr.join('+');\n\n        // because of a macOS bug: when meta key is down, keyup of other keys does not fire.\n        // https://stackoverflow.com/questions/25438608/javascript-keyup-isnt-called-when-command-and-another-is-pressed\n        if ([\n            'Meta', 'MetaLeft', 'MetaRight',\n            'OSLeft', 'OSRight', // Firefox\n        ].includes(code)) {\n            blur(null);\n            return;\n        }\n\n        if (code in codeIsDownObj && codeIsDownObj[code] !== null) {\n            const keyStr = codeIsDownObj[code];\n            isDownObj[keyStr] = false;\n            codeIsDownObj[code] = null;\n\n            //remove from combo\n            for (let i = 0; i < comboArr.length; i++) {\n                if (comboArr[i] == keyStr) {\n                    comboArr.splice(i, 1);\n                    i--;\n                }\n            }\n\n            emitUp(keyStr, e, oldComboStr);\n        }\n    }\n\n    function blur(event) {\n        const oldComboStr = comboArr.join('+');\n        comboArr = [];\n        codeIsDownObj = {};\n\n        const eventArr = [];\n        for (let i = 0; i < keyToKeyStrArr.length; i++) {\n            if (isDownObj[keyToKeyStrArr[i]]) {\n                isDownObj[keyToKeyStrArr[i]] = false;\n                eventArr.push(keyToKeyStrArr[i]);\n            }\n        }\n        for (let i = 0; i < eventArr.length; i++) {\n            emitUp(\n                eventArr[i],\n                {\n                    preventDefault: function () {},\n                    stopPropagation: function () {},\n                },\n                oldComboStr,\n            );\n        }\n        emitBlur();\n    }\n\n\n\n    return {\n        add: (keyListener) => {\n            if (listenerArr.includes(keyListener)) {\n                return;\n            }\n            const first = listenerArr.length === 0;\n            listenerArr.push(keyListener);\n\n            if (first) {\n                addEventListener(document, 'keydown', keyDown);\n                addEventListener(document, 'keyup', keyUp);\n                addEventListener(window, 'blur', blur);\n            }\n        },\n        remove: (keyListener) => {\n            if (!listenerArr.includes(keyListener)) {\n                return;\n            }\n            const last = listenerArr.length === 1;\n            for (let i = 0; i < listenerArr.length; i++) {\n                if (listenerArr[i] === keyListener) {\n                    listenerArr.splice(i, 1);\n                    break;\n                }\n            }\n            if (last) {\n                removeEventListener(document, 'keydown', keyDown);\n                removeEventListener(document, 'keyup', keyUp);\n                removeEventListener(window, 'blur', blur);\n            }\n        },\n        getIsDown: () => {\n            return isDownObj;\n        },\n        getCombo: () => {\n            return comboArr;\n        },\n    };\n})();\n\n\n\n/**\n * Listens to key events in window. Makes combos easier - e.g. ctrl + z\n *\n * keyStr - see in implementation - my representation of a key. e.g. 'r' can be 'r' and 'R'\n * comboStr - string joins currently pressed keyStr with a +\n *              e.g. 'ctrl+z'\n *\n */\nexport class KeyListener {\n\n    private readonly onDown;\n    private readonly onUp;\n    private readonly onBlur;\n    private readonly ref;\n\n    constructor (\n        p: {\n            onDown?: (keyStr: string, e: KeyboardEvent, comboStr: string, isRepeat?: boolean) => void;\n            onUp?: (keyStr: string, e: KeyboardEvent, oldComboStr: string) => void;\n            onBlur?: () => void;\n        },\n    ) {\n        this.onDown = p.onDown;\n        this.onUp = p.onUp;\n        this.onBlur = p.onBlur;\n        this.ref = [this.onDown, this.onUp, this.onBlur];\n        globalKey.add(this.ref);\n    }\n\n    isPressed (keyStr: string): boolean {\n        if (!(keyStr in globalKey.getIsDown())) {\n            throw 'key \"' + keyStr + '\" not found';\n        }\n        return globalKey.getIsDown()[keyStr];\n    }\n\n    getComboStr (): string {\n        return globalKey.getCombo().join('+');\n    }\n\n    comboOnlyContains (keyStrArr: string[]): boolean {\n        for (let i = 0; i < globalKey.getCombo().length; i++) {\n            if (!keyStrArr.includes(globalKey.getCombo()[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    destroy (): void {\n        globalKey.remove(this.ref);\n    }\n}\n\nexport function sameKeys(comboAStr: string, comboBStr: string): boolean {\n    return comboAStr.split('+').sort().join('+')=== comboBStr.split('+').sort().join('+');\n}","import {IBounds, IVector2D} from '../BB.types';\n\nexport function mix (a: number, b: number, f: number): number {\n    return a * (1 - f) + b * f;\n}\n\nexport function dist (ax: number, ay: number, bx: number, by: number): number {\n    return Math.sqrt(Math.pow(ax - bx, 2) + Math.pow(ay - by, 2));\n}\n\nexport function distSquared (ax: number, ay: number, bx: number, by: number): number {\n    // faster because no square-root\n    return Math.pow(ax - bx, 2) + Math.pow(ay - by, 2);\n}\n\nexport function lenSquared (x: number, y: number): number {\n    // faster because no square-root\n    return x * x + y * y;\n}\n\nexport function pointsToAngleRad (p1: IVector2D, p2: IVector2D): number {\n    return Math.atan2(p2.y - p1.y, p2.x - p1.x);\n}\n\nexport function pointsToAngleDeg (p1: IVector2D, p2: IVector2D): number {\n    return pointsToAngleRad(p1, p2) * 180 / Math.PI;\n}\n\nexport function clamp (num: number, min: number, max: number): number {\n    return num <= min\n        ? min\n        : num >= max\n            ? max\n            : num;\n}\n\nexport function rotate (x: number, y: number, deg: number): IVector2D {\n    const theta = deg * (Math.PI / 180);\n    const cs = Math.cos(theta);\n    const sn = Math.sin(theta);\n\n    return {\n        x: x * cs - y * sn,\n        y: x * sn + y * cs\n    };\n}\n\nexport function rotateAround (center: IVector2D, point: IVector2D, deg: number): IVector2D {\n    const rot = rotate(point.x - center.x, point.y - center.y, deg);\n    rot.x += center.x;\n    rot.y += center.y;\n    return rot;\n}\n\nexport function intDxy(remainder: IVector2D, fDx: number, fDy: number) {\n    remainder.x += fDx;\n    remainder.y += fDy;\n    const dX = Math.round(remainder.x);\n    const dY = Math.round(remainder.y);\n    remainder.x -= dX;\n    remainder.y -= dY;\n    return {\n        dX,\n        dY,\n    };\n}\n\n/**\n * return closest even number\n * @param f\n */\nexport function roundEven(f: number) {\n    if (f % 1 === 0) {\n        if (f % 2 === 0) {\n            return f;\n        }\n        return f + 1;\n    }\n    const above = Math.ceil(f);\n    const below = Math.floor(f);\n    if (above % 2 === 0) {\n        return above;\n    } else {\n        return below;\n    }\n}\n\n/**\n * return closest uneven number\n * @param f\n */\nexport function roundUneven(f: number) {\n    if (f % 1 === 0) {\n        if (f % 2 === 0) {\n            return f + 1;\n        }\n        return f;\n    }\n    const above = Math.ceil(f);\n    const below = Math.floor(f);\n    if (above % 2 === 1) {\n        return above;\n    } else {\n        return below;\n    }\n}\n\n/**\n * update target so it includes bounds\n * @param target\n * @param bounds\n */\nexport function updateBounds (target: IBounds, bounds: IBounds): IBounds {\n    if (!bounds) {\n        return target;\n    }\n    if (!target) {\n        target = { x1: bounds.x1, y1: bounds.y1, x2: bounds.x2, y2: bounds.y2 };\n    } else {\n        target.x1 = Math.min(target.x1, bounds.x1);\n        target.y1 = Math.min(target.y1, bounds.y1);\n        target.x2 = Math.max(target.x2, bounds.x2);\n        target.y2 = Math.max(target.y2, bounds.y2);\n    }\n    return target;\n}\n\n/**\n * determine overlap of bounds with width&height\n */\nexport function boundsInArea (bounds: IBounds, width: number, height: number): IBounds | null {\n    let x1 = Math.max(0, bounds.x1);\n    let y1 = Math.max(0, bounds.y1);\n    let x2 = Math.min(width - 1, bounds.x2);\n    let y2 = Math.min(height - 1, bounds.y2);\n    if (x1 > x2 || y1 > y2) {\n        return null;\n    }\n    return { x1, y1, x2, y2 };\n}","import {addEventListener, removeEventListener} from './event-listener';\n\n\n/**\n * Filters wheel events. removes swipe scrolling and pinch scrolling that trackpads do. (as best as it can)\n * Normalizes regular scrolls.\n *\n * Why:\n * - trackpad scrolling is different from old school mouse scrolling\n * - but there is not way to learn from the browser if it's trackpad scrolling\n * - browsers don't even give access to the raw swiping or pinching movement, but some abstraction on top, making the scrolling\n *      continue an arbitrary amount, at an arbitrary scale\n * - each browser does this differently. So you can't offer a coherent experience\n *\n * - also trackpads are painful to draw with. So supporting a trackpad-based workflow makes not much sense.\n *\n * @param callback - func({deltaY: number, pageX: number, pageY: number, clientX: number, clientY: number}\n * @constructor\n */\nimport {eventUsesHighResTimeStamp, hasPointerEvents, isFirefox} from '../base/browser';\nimport {mix} from '../math/math';\n\nconst WheelCleaner = function (callback) {\n    const sequenceTimeoutMs = 200;\n\n    const knownUnitArr = [100];\n    let sequenceLength = 0;\n    let sequenceUnit = null;\n    let endSequenceTimeout;\n    let toEmitDelta = null;\n    let position = null;\n\n\n    function emit(delta) {\n        callback({\n            deltaY: Math.round(delta / sequenceUnit),\n            pageX: position.pageX,\n            pageY: position.pageY,\n            clientX: position.clientX,\n            clientY: position.clientY,\n        });\n    }\n\n    function endSequence() {\n        if (toEmitDelta !== null) {\n            emit(toEmitDelta);\n            toEmitDelta = null;\n        }\n        if (sequenceUnit !== null && !(knownUnitArr.includes(sequenceUnit))) {\n            knownUnitArr.push(sequenceUnit);\n        }\n        sequenceLength = 0;\n        sequenceUnit = null;\n    }\n\n    // --- interface ---\n    this.process = function (event) {\n\n        position = {\n            pageX: event.pageX,\n            pageY: event.pageY,\n            clientX: event.clientX,\n            clientY: event.clientY,\n        };\n\n        clearTimeout(endSequenceTimeout);\n        endSequenceTimeout = setTimeout(endSequence, sequenceTimeoutMs);\n\n        //prep delta\n        let delta = event.deltaY;\n        if ('deltaMode' in event && event.deltaMode === 1) {\n            delta *= 100 / 3;\n        }\n        const absDelta = Math.abs(delta);\n\n\n        if (sequenceLength > 0 && sequenceUnit === null) {\n            //previously determined dirty sequence\n            toEmitDelta = null;\n            return;\n        }\n\n        //sequence begins\n        if (sequenceLength === 0) {\n            sequenceLength++;\n            if (absDelta < 50) {\n                //dirty - probably a swipe scroll or pinch scroll on trackpad\n                return;\n            }\n\n            sequenceUnit = absDelta;\n            if (knownUnitArr.includes(sequenceUnit)) {\n                //we know this unit - emit right away\n                emit(delta);\n            } else {\n                //unknown unit - wait until next event or sequence end, to have more certainty that it's clean\n                toEmitDelta = delta;\n            }\n            return;\n        }\n\n        //sequence continues\n        if (absDelta === 0) {\n            //ignore zero scroll\n            return;\n        }\n        if (\n            absDelta === sequenceUnit ||\n            (absDelta / sequenceUnit) % 1 < 0.0001// a multiple\n        ) {\n            //fine\n        } else if ((sequenceUnit / absDelta) % 1 < 0.0001) {\n            //unit was actually a multiple - update it\n            sequenceUnit = absDelta;\n\n        } else if (absDelta !== sequenceUnit) {\n            //not clean - delta is varying - probably a swipe scroll or pinch scroll on trackpad\n            sequenceUnit = null;\n            toEmitDelta = null;\n            return;\n        }\n\n\n        if (toEmitDelta !== null) {\n            emit(toEmitDelta);\n            toEmitDelta = null;\n        }\n        emit(delta);\n    };\n};\n\n\n/**\n * PointerListener - for pointer events, wheel events. uses fallbacks. ideally consistent behavior across browsers\n * Has some workarounds for browser specific bugs. As browsers get better, this constructor should get smaller\n *\n * p = {\n *     target: DOM element,\n *     onPointer: func (pointerEvent), //optional\n *     onWheel: func (wheelEvent), //optional\n *     onEnterLeave: func (isOver: boolean), //optional\n *     maxPointers: int (1 - n), //default is 1\n *     fixScribble: boolean, // fix ipad scribble issue\n * }\n *\n * pointerEvent = {\n *     type: 'pointerdown'|'pointermove'|'pointerup',\n *     pointerId: long,\n *     pointerType: 'touch'|'mouse'|'pen',\n *     pageX: number,\n *     pageY: number,\n *     clientX: number,\n *     clientY: number,\n *     relX: number, //position relative to top left of target\n *     relY: number,\n *     dX: number, //movementX not supported by safari on iOS, so need my own\n *     dY: number,\n *     downPageX: number, //where was pointer when down-event occurred - set for down|move|up\n *     downPageY: number,\n *     coalescedArr: Array of {\n *         pageX: number,\n *         pageY: number,\n *         clientX: number,\n *         clientY: number,\n *         relX: number, //position relative to top left of target\n *         relY: number,\n *         dX: number,\n *         dY: number,\n *         time: number// same timescale as performance.now() - might be exact same number as in parent\n *     },\n *     time: number, // same timescale as performance.now()\n *     button: 'left'|'middle'|'right',\n *     pressure: number (0-1), // always 1 for touch and mouse\n *     eventPreventDefault: function(),\n *     eventStopPropagation: function(),\n * }\n *\n * wheelEvent = {\n *     deltaY: number, // increments of 1\n *     pageX: number,\n *     pageY: number,\n *     relX: number,\n *     relY: number,\n * }\n *\n * isOver(): boolean - if pointer over the target\n *\n * @param p\n */\nexport const PointerListener = (function () {\n\n    //keeping track of pointers for movement fallback\n    const pointerArr = [];\n\n    function addPointer(event) {\n        const pointerObj = {\n            pointerId: event.pointerId,\n            lastPageX: null,\n            lastPageY: null\n        };\n        pointerArr.push(pointerObj);\n\n        if (pointerArr.length > 15) {\n            pointerArr.shift();\n        }\n\n        return pointerObj;\n    }\n\n    function getPointer(event) {\n        for (let i = pointerArr.length - 1; i >= 0; i--) {\n            if (event.pointerId === pointerArr[i].pointerId) {\n                return pointerArr[i];\n            }\n        }\n        return null;\n    }\n\n\n    let pressureNormalizeAvgCount = 0;\n    let pressureNormalizeAvgPressure = null;\n    let pressureNormalizeIsComplete = false;\n    let pressureNormalizeFactor = 1;\n\n    return function (p) {\n        const targetElement = p.target;\n        const onPointerCallback = p.onPointer;\n        const onWheelCallback = p.onWheel;\n        const onEnterLeaveCallback = p.onEnterLeave;\n        const maxPointers = 'maxPointers' in p ? p.maxPointers : 1;\n        const buttonsToStr = { // translation\n            '1': 'left',\n            '2': 'right',\n            '4': 'middle'\n        };\n        const wheelCleaner = new WheelCleaner(function (wheelEvent) {\n            if (isDestroyed) {\n                return;\n            }\n            if (onWheelCallback) {\n                const bounds = targetElement.getBoundingClientRect();\n                wheelEvent.relX = wheelEvent.clientX - bounds.left + targetElement.scrollLeft;\n                wheelEvent.relY = wheelEvent.clientY - bounds.top + targetElement.scrollTop;\n                onWheelCallback(wheelEvent);\n            }\n        });\n        let isDestroyed = false;\n\n        const timeStampOffset = eventUsesHighResTimeStamp() ? 0 : -performance.timing.navigationStart;\n\n\n        //to circumvent a chrome input glitch\n        let lastPointerType = '';\n        let didSkip = false;\n\n\n        /*\n        pointers that are pressing a button\n        dragObj = {\n            pointerId: long,\n            pointerType: 'mouse'|'pen'|'touch',\n            downPageX: number, //where was pointer when down-event occurred\n            downPageY: number,\n            button: long,\n            lastPageX: number, //pageX in previous event - only for touch events, because they don't have movementX/Y\n            lastPageY: number,\n            lastTimeStamp: number\n        }\n         */\n        const dragObjArr = [];\n        const dragPointerIdArr = [];\n\n        function getDragObj(pointerId) {\n            for (let i = 0; i < dragObjArr.length; i++) {\n                if (pointerId === dragObjArr[i].pointerId) {\n                    return dragObjArr[i];\n                }\n            }\n            return null;\n        }\n\n        function removeDragObj(pointerId) {\n            let removedDragObj = null;\n            for (let i = 0; i < dragPointerIdArr.length; i++) {\n                if (dragPointerIdArr[i] === pointerId) {\n                    removedDragObj = dragObjArr[i];\n                    dragObjArr.splice(i, 1);\n                    dragPointerIdArr.splice(i, 1);\n                    i--;\n                }\n            }\n            return removedDragObj;\n        }\n\n\n        function normalizePressure(pressure, type?) {\n            if (pressure === 0 || pressure === 1) {\n                return pressure;\n            }\n\n            // was this there to prevent some glitch?\n            /*if (pressureNormalizeIsComplete && type === 'pointerdown' && pressure !== 1) {\n                pressure *= 0.004;\n            }*/\n\n            if (pressureNormalizeAvgCount < 60) {\n                if (pressureNormalizeAvgCount === 0) {\n                    pressureNormalizeAvgPressure = pressure;\n                } else {\n                    pressureNormalizeAvgPressure = mix(pressure, pressureNormalizeAvgPressure, 0.95);\n                }\n                pressureNormalizeAvgCount++;\n            } else if (!pressureNormalizeIsComplete) {\n                pressureNormalizeIsComplete = true;\n                //BB.throwOut('avg pressure decision!' + pressureNormalizeAvgPressure);\n                if (pressureNormalizeAvgPressure < 0.13) { // absurd pressure needed\n                    pressureNormalizeFactor = 2.3;\n                }\n            }\n\n\n            return Math.pow(pressure, 1 / pressureNormalizeFactor);\n        }\n\n\n        /**\n         *\n         * More trustworthy pointer attributes. that behave the same across browsers.\n         * returns a new object. this object also gets attached to the orig event. -> event.corrected\n         *\n         * @param event\n         * @returns {{pointerId: number, timeStamp: number, button, buttons, pointerType: (string|string|any), movementY: number, movementX: number, pressure, coalescedArr: [], pageY, pageX, clientX, clientY, eventPreventDefault: func, eventStopPropagation: func}\n         */\n        function correctPointerEvent(event) {\n            if (event.corrected) {\n                return event.corrected;\n            }\n\n            /*if (event.type === 'pointermove' && !window.hidePressureOut) {\n                if (event.type === 'pointermove') {\n                    BB.throwOut(event.pressure + ' ' + event.pointerType);\n                }\n            }*/\n\n            const correctedObj = {\n                pointerId: event.pointerId,\n                pointerType: event.pointerType,\n                pageX: event.pageX,\n                pageY: event.pageY,\n                clientX: event.clientX,\n                clientY: event.clientY,\n                movementX: event.movementX,\n                movementY: event.movementY,\n                timeStamp: event.timeStamp + timeStampOffset,\n                pressure: normalizePressure(event.pressure, event.type),\n                buttons: event.buttons,\n                button: event.button,\n                coalescedArr: [],\n                eventPreventDefault: function () {\n                    event.preventDefault();\n                },\n                eventStopPropagation: function () {\n                    event.stopPropagation();\n                }\n            };\n            event.corrected = correctedObj;\n\n            let customPressure = null;\n            if ('pointerId' in event) {\n                if ('pressure' in event && event.buttons !== 0 && (['mouse'].includes(event.pointerType) || (event.pointerType === 'touch' && event.pressure === 0))) {\n                    correctedObj.pressure = 1;\n                    customPressure = 1;\n                }\n            } else {\n                correctedObj.pointerId = 0;\n                correctedObj.pointerType = 'mouse';\n                correctedObj.pressure = event.buttons !== 0 ? 1 : 0;\n                customPressure = correctedObj.pressure;\n            }\n\n            if (isFirefox && event.pointerType != 'mouse' && event.type === 'pointermove' && event.buttons === 0) { // once again firefox\n                correctedObj.buttons = 1; //todo wrong if no buttons actually pressed\n            }\n\n            let coalescedEventArr = [];\n            if ('getCoalescedEvents' in event) {\n                coalescedEventArr = event.getCoalescedEvents();\n            }\n\n            // chrome somehow movementX not same scale as pageX. todo: only chrome?\n            // so make my own\n\n            let pointerObj = getPointer(correctedObj);\n            if (pointerObj === null) {\n                pointerObj = addPointer(correctedObj);\n            }\n\n            const totalLastX = pointerObj.lastPageX;\n            const totalLastY = pointerObj.lastPageY;\n\n            for (let i = 0; i < coalescedEventArr.length; i++) {\n                const eventItem = coalescedEventArr[i];\n\n                correctedObj.coalescedArr.push({\n                    pageX: eventItem.pageX,\n                    pageY: eventItem.pageY,\n                    clientX: eventItem.clientX,\n                    clientY: eventItem.clientY,\n                    movementX: pointerObj.lastPageX === null ? 0 : eventItem.pageX - pointerObj.lastPageX,\n                    movementY: pointerObj.lastPageY === null ? 0 : eventItem.pageY - pointerObj.lastPageY,\n                    timeStamp: eventItem.timeStamp === 0 ? correctedObj.timeStamp : (eventItem.timeStamp + timeStampOffset), // 0 in firefox\n                    pressure: customPressure === null ? normalizePressure(eventItem.pressure) : customPressure\n                });\n\n                pointerObj.lastPageX = eventItem.pageX;\n                pointerObj.lastPageY = eventItem.pageY;\n            }\n\n            pointerObj.lastPageX = correctedObj.pageX;\n            pointerObj.lastPageY = correctedObj.pageY;\n            correctedObj.movementX = totalLastX === null ? 0 : pointerObj.lastPageX - totalLastX;\n            correctedObj.movementY = totalLastY === null ? 0 : pointerObj.lastPageY - totalLastY;\n\n            return correctedObj;\n\n        }\n\n        /**\n         * creates a value for onPointer, from a pointer event handler\n         *\n         * @param typeStr string - 'pointerdown'|'pointermove'|'pointerup'\n         * @param correctedEvent - corrected pointer event from correctPointerEvent()\n         * @param custom - object for setting custom attributes\n         * @returns {{pointerId: number, pointerType: *, dX: (*), relY: number, dY: (*), relX: number, type: *, event: *, pageY: *, pageX: *}}\n         */\n        function createPointerOutEvent(typeStr, correctedEvent, custom?) {\n\n            const bounds = targetElement.getBoundingClientRect();\n            const result: any = {\n                type: typeStr,\n                pointerId: correctedEvent.pointerId,\n                pointerType: correctedEvent.pointerType,\n                pageX: correctedEvent.pageX,\n                pageY: correctedEvent.pageY,\n                clientX: correctedEvent.clientX,\n                clientY: correctedEvent.clientY,\n                relX: correctedEvent.clientX - bounds.left + targetElement.scrollLeft,\n                relY: correctedEvent.clientY - bounds.top + targetElement.scrollTop,\n                dX: correctedEvent.movementX,\n                dY: correctedEvent.movementY,\n                time: correctedEvent.timeStamp,\n                eventPreventDefault: correctedEvent.eventPreventDefault,\n                eventStopPropagation: correctedEvent.eventStopPropagation\n            };\n\n            if (typeStr === 'pointermove') {\n                result.coalescedArr = [];\n                if (correctedEvent.coalescedArr.length > 1) {\n                    let coalescedItem;\n                    for (let i = 0; i < correctedEvent.coalescedArr.length; i++) {\n                        coalescedItem = correctedEvent.coalescedArr[i];\n                        result.coalescedArr.push({\n                            pageX: coalescedItem.pageX,\n                            pageY: coalescedItem.pageY,\n                            clientX: coalescedItem.clientX,\n                            clientY: coalescedItem.clientY,\n                            relX: coalescedItem.clientX - bounds.left + targetElement.scrollLeft,\n                            relY: coalescedItem.clientY - bounds.top + targetElement.scrollTop,\n                            dX: coalescedItem.movementX,\n                            dY: coalescedItem.movementY,\n                            time: coalescedItem.timeStamp\n                        });\n                    }\n                }\n            }\n\n            if (custom) {\n                const keyArr = Object.keys(custom);\n                for (let i = 0; i < keyArr.length; i++) {\n                    result[keyArr[i]] = custom[keyArr[i]];\n                }\n            }\n\n            return result;\n        }\n\n        /**\n         * creates a value for onPointer, from a fallback touch event handler\n         *\n         * @param typeStr string - 'pointerdown'|'pointermove'|'pointerup'\n         * @param touchListItem - element from changed touch list\n         * @param touchEvent - touch event\n         * @param custom - object for setting custom attributes\n         * @returns {{pointerId: number, pointerType: string, relY: number, relX: number, type: *, event: *, pageY: *, pageX: *}}\n         */\n        function createTouchOutEvent(typeStr, touchListItem, touchEvent, custom) {\n            const bounds = targetElement.getBoundingClientRect();\n            const result: any = {\n                type: typeStr,\n                pointerId: touchListItem.identifier,\n                pointerType: 'touch',\n                pageX: touchListItem.pageX,\n                pageY: touchListItem.pageY,\n                clientX: touchListItem.clientX,\n                clientY: touchListItem.clientY,\n                relX: touchListItem.pageX - bounds.left + targetElement.scrollLeft,\n                relY: touchListItem.pageY - bounds.top + targetElement.scrollTop,\n                time: touchEvent.timeStamp + timeStampOffset,\n                eventPreventDefault: function() { touchEvent.preventDefault(); },\n                eventStopPropagation: function() { touchEvent.stopPropagation(); }\n            };\n\n            if (typeStr === 'pointermove') {\n                result.coalescedArr = [];\n            }\n\n            const keyArr = Object.keys(custom);\n            for (let i = 0; i < keyArr.length; i++) {\n                result[keyArr[i]] = custom[keyArr[i]];\n            }\n\n            return result;\n        }\n\n        function setupDocumentListeners() {\n            addEventListener(document, 'pointermove', onGlobalPointerMove);\n            addEventListener(document, 'pointerup', onGlobalPointerUp);\n            addEventListener(document, 'pointerleave', onGlobalPointerLeave);\n        }\n\n        function destroyDocumentListeners() {\n            removeEventListener(document, 'pointermove', onGlobalPointerMove);\n            removeEventListener(document, 'pointerup', onGlobalPointerUp);\n            removeEventListener(document, 'pointerleave', onGlobalPointerLeave);\n        }\n\n        let isOverCounter = 0; // might be multiple pointers\n        function onPointerEnter() {\n            isOverCounter++;\n            if (onEnterLeaveCallback) {\n                onEnterLeaveCallback(true);\n            }\n        }\n\n        function onPointerLeave() {\n            isOverCounter--;\n            if (onEnterLeaveCallback) {\n                onEnterLeaveCallback(false);\n            }\n        }\n\n        function onPointermove(event) {\n            event = correctPointerEvent(event);\n\n            const tempLastPointerType = lastPointerType;\n            lastPointerType = event.pointerType;\n\n            if (dragPointerIdArr.includes(event.pointerId) || dragPointerIdArr.length === maxPointers || event.pointerType === 'touch') {\n                didSkip = false;\n                return;\n            }\n\n            // chrome input glitch workaround - throws in a random mouse event with the wrong position when using a stylus\n            if (!didSkip && event.pointerType === 'mouse' && tempLastPointerType === 'pen') {\n                didSkip = true;\n                return;\n            }\n            didSkip = false;\n\n            const outEvent = createPointerOutEvent('pointermove', event);\n            onPointerCallback(outEvent);\n\n        }\n\n        function onPointerdown(event) {\n            //BB.throwOut('pointerdown ' + event.pointerId + ' | ' + dragPointerIdArr.length);\n            event = correctPointerEvent(event);\n            ////console.log('debug: ' + event.pointerId + ' pointerdown');\n            if (dragPointerIdArr.includes(event.pointerId) || dragPointerIdArr.length === maxPointers || !([1, 2, 4].includes(event.buttons))) {\n                //BB.throwOut('pointerdown ignored');\n                return;\n            }\n\n\n            //set up global listeners\n            if (dragObjArr.length === 0) {\n                setupDocumentListeners();\n            }\n            const dragObj = {\n                pointerId: event.pointerId,\n                pointerType: event.pointerType,\n                downPageX: event.pageX,\n                downPageY: event.pageY,\n                buttons: event.buttons,\n                lastPageX: event.pageX,\n                lastPageY: event.pageY,\n                lastTimeStamp: event.timeStamp\n            };\n            dragObjArr.push(dragObj);\n            setTouchTimeout(dragObj);\n            dragPointerIdArr.push(event.pointerId);\n\n            const outEvent = createPointerOutEvent('pointerdown', event, {\n                downPageX: event.pageX,\n                downPageY: event.pageY,\n                button: buttonsToStr[event.buttons],\n                pressure: event.pressure\n            });\n\n            onPointerCallback(outEvent);\n        }\n\n\n        function onGlobalPointerMove(event) {\n            //BB.throwOut('pointermove ' + event.pointerId);\n            event = correctPointerEvent(event);\n            ////console.log('debug: ' + event.pointerId + ' GLOBALpointermove');\n            if (!(dragPointerIdArr.includes(event.pointerId))) {\n                return;\n            }\n\n            const dragObj = getDragObj(event.pointerId);\n            clearTouchTimeout(dragObj);\n\n            //if pointer changes button its pressing -> turn into pointerup\n            if (event.buttons !== dragObj.buttons) {\n                //pointer up\n\n                //remove listener\n                if (dragObjArr.length === 1) {\n                    destroyDocumentListeners();\n                }\n                removeDragObj(event.pointerId);\n\n                const outEvent = createPointerOutEvent('pointerup', event, {\n                    downPageX: dragObj.downPageX,\n                    downPageY: dragObj.downPageY\n                });\n                onPointerCallback(outEvent);\n                return;\n\n            }\n\n            setTouchTimeout(dragObj);\n\n            // ipad likes to do this\n            if (\n                event.pointerType === 'pen' &&\n                event.pageX === dragObj.lastPageX &&\n                event.pageY === dragObj.lastPageY &&\n                event.timeStamp === dragObj.lastTimeStamp\n            ) {\n                //ignore\n                return;\n            }\n\n            const outEvent = createPointerOutEvent('pointermove', event, {\n                downPageX: dragObj.downPageX,\n                downPageY: dragObj.downPageY,\n                button: buttonsToStr[event.buttons],\n                pressure: event.pressure\n            });\n\n            dragObj.lastPageX = event.pageX;\n            dragObj.lastPageY = event.pageY;\n            dragObj.lastTimeStamp = event.timeStamp;\n\n            onPointerCallback(outEvent);\n\n        }\n\n        function onGlobalPointerUp(event) {\n            //BB.throwOut('pointerup ' + event.pointerId);\n            event = correctPointerEvent(event);\n            ////console.log('debug: ' + event.pointerId + ' GLOBALpointerup');\n            if (!(dragPointerIdArr.includes(event.pointerId))) {\n                return;\n            }\n\n            //remove listener\n            if (dragObjArr.length === 1) {\n                destroyDocumentListeners();\n            }\n            const dragObj = removeDragObj(event.pointerId);\n            clearTouchTimeout(dragObj);\n\n            const outEvent = createPointerOutEvent('pointerup', event, {\n                downPageX: dragObj.downPageX,\n                downPageY: dragObj.downPageY\n            });\n            onPointerCallback(outEvent);\n\n        }\n\n        function onGlobalPointerLeave(event) {\n            //BB.throwOut('pointerleave ' + event.pointerId);\n            event = correctPointerEvent(event);\n            ////console.log('debug: ' + event.pointerId + ' onGlobalPointerLeave', event);\n            if (!(dragPointerIdArr.includes(event.pointerId))) { //} || event.target !== document) {\n                return;\n            }\n\n            //remove listener\n            if (dragObjArr.length === 1) {\n                destroyDocumentListeners();\n            }\n            const dragObj = removeDragObj(event.pointerId);\n            clearTouchTimeout(dragObj);\n\n            const outEvent = createPointerOutEvent('pointerup', event, {\n                downPageX: dragObj.downPageX,\n                downPageY: dragObj.downPageY\n            });\n            onPointerCallback(outEvent);\n        }\n\n\n        /*\n        --- ipad pointer event glitch damage control ---\n\n        ipad pointer events are glitchy. doesn't always fire pointerup.\n        - when two fingers get really close to each other\n        - when finger moves out and back in bottom\n\n        This artificially fires a pointerup\n        */\n        function onTouchTimeout(dragObj) {\n\n            //create fake event\n            const fakeEvent = {\n                pointerId: dragObj.pointerId,\n                pointerType: dragObj.pointerType,\n                type: 'pointerup',\n                timeStamp: performance.now(),\n                pageX: 0,\n                pageY: 0,\n                clientX: 0,\n                clientY: 0,\n                preventDefault: function () {\n                },\n                stopPropagation: function () {\n                }\n            };\n\n            //call onGlobalPointerUp with it\n            onGlobalPointerUp(fakeEvent);\n        }\n\n        function setTouchTimeout(dragObj) {\n            if (dragObj.pointerType !== 'touch') {\n                return;\n            }\n            dragObj.touchTimeout = setTimeout(function () {\n                onTouchTimeout(dragObj);\n            }, 2500); // 2.5 seconds\n        }\n\n        function clearTouchTimeout(dragObj) {\n            if (!dragObj.touchTimeout) {\n                return;\n            }\n            clearTimeout(dragObj.touchTimeout);\n            dragObj.touchTimeout = null;\n        }\n\n\n        if (onEnterLeaveCallback) {\n            addEventListener(targetElement, 'pointerenter', onPointerEnter);\n            addEventListener(targetElement, 'pointerleave', onPointerLeave);\n        }\n        if (onPointerCallback) {\n            addEventListener(targetElement, 'pointermove', onPointermove);\n            addEventListener(targetElement, 'pointerdown', onPointerdown);\n        }\n        if (onWheelCallback) {\n            addEventListener(targetElement, 'wheel', wheelCleaner.process);\n        }\n\n\n        let onTouchstart;\n        let onTouchmove;\n        let onTouchend;\n\n        // --- touch fallback ---\n        if (!(hasPointerEvents)) {\n\n            onTouchstart = function (event) {\n                ////console.log('onTouchstart', event, event.changedTouches.length);\n                event.preventDefault(); // needs to stay, otherwise page scrolls on iOS12\n\n                const touchArr = event.changedTouches;\n                for (let i = 0; i < touchArr.length && dragObjArr.length < maxPointers; i++) {\n                    const touchObj = touchArr[i];\n\n                    //set up global listeners\n                    if (dragObjArr.length === 0) {\n                        addEventListener(document, 'touchmove', onTouchmove);\n                        addEventListener(document, 'touchend', onTouchend);\n                        addEventListener(document, 'touchcancel', onTouchend);\n                    }\n                    dragObjArr.push({\n                        pointerId: touchObj.identifier,\n                        downPageX: touchObj.pageX,\n                        downPageY: touchObj.pageY,\n                        buttons: 1,\n                        lastPageX: touchObj.pageX,\n                        lastPageY: touchObj.pageY,\n                    });\n                    dragPointerIdArr.push(touchObj.identifier);\n\n                    const outEvent = createTouchOutEvent('pointerdown', touchObj, event, {\n                        dX: 0,\n                        dY: 0,\n                        downPageX: touchObj.downPageX,\n                        downPageY: touchObj.downPageY,\n                        button: 'left',\n                        pressure: 1\n                    });\n                    onPointerCallback(outEvent);\n                }\n\n            }\n\n            onTouchmove = function (event) {\n                event.preventDefault(); // needs to stay, otherwise page scrolls on iOS12\n\n\n                const touchArr = event.changedTouches;\n                for (let i = 0; i < touchArr.length; i++) {\n                    const touchObj = touchArr[i];\n\n                    if (!(dragPointerIdArr.includes(touchObj.identifier))) {\n                        continue;\n                    }\n                    const dragObj = getDragObj(touchObj.identifier);\n\n                    const outEvent = createTouchOutEvent('pointermove', touchObj, event, {\n                        dX: touchObj.pageX - dragObj.lastPageX,\n                        dY: touchObj.pageY - dragObj.lastPageY,\n                        downPageX: dragObj.downPageX,\n                        downPageY: dragObj.downPageY,\n                        button: 'left',\n                        isCoalesced: false,\n                        pressure: 1\n                    });\n                    dragObj.lastPageX = touchObj.pageX;\n                    dragObj.lastPageY = touchObj.pageY;\n                    onPointerCallback(outEvent);\n\n                }\n\n            }\n\n            onTouchend = function (event) {\n                if (event.type !== 'touchcancel') {\n                    event.preventDefault(); // needs to stay, otherwise page scrolls on iOS12\n                }\n\n\n                const touchArr = event.changedTouches;\n                for (let i = 0; i < touchArr.length; i++) {\n                    const touchObj = touchArr[i];\n\n                    if (!(dragPointerIdArr.includes(touchObj.identifier))) {\n                        continue;\n                    }\n\n                    //remove listener\n                    if (dragObjArr.length === 1) {\n                        removeEventListener(document, 'touchmove', onTouchmove);\n                        removeEventListener(document, 'touchend', onTouchend);\n                        removeEventListener(document, 'touchcancel', onTouchend);\n                    }\n                    const dragObj = removeDragObj(touchObj.identifier);\n\n                    const outEvent = createTouchOutEvent('pointerup', touchObj, event, {\n                        dX: touchObj.pageX - dragObj.lastPageX,\n                        dY: touchObj.pageY - dragObj.lastPageY,\n                        downPageX: dragObj.downPageX,\n                        downPageY: dragObj.downPageY,\n                    });\n\n                    onPointerCallback(outEvent);\n                }\n\n            }\n\n            if (onPointerCallback) {\n                addEventListener(targetElement, 'touchstart', onTouchstart);\n            }\n\n        } else if (p.fixScribble) {\n            //ipad scribble workaround https://developer.apple.com/forums/thread/662874\n            onTouchmove = function(e) {\n                e.preventDefault();\n            }\n            addEventListener(targetElement, 'touchmove', onTouchmove);\n\n        }\n\n\n        // --- interface ---\n\n        this.isOver = function () {\n            return isOverCounter > 0;\n        };\n\n        this.destroy = function () {\n            if (isDestroyed) {\n                return;\n            }\n            isDestroyed = true;\n            removeEventListener(targetElement, 'pointerenter', onPointerEnter);\n            removeEventListener(targetElement, 'pointerleave', onPointerLeave);\n            removeEventListener(targetElement, 'pointermove', onPointermove);\n            removeEventListener(targetElement, 'pointerdown', onPointerdown);\n            removeEventListener(targetElement, 'wheel', wheelCleaner.process);\n            if (dragObjArr.length > 0) {\n                destroyDocumentListeners();\n            }\n\n            if (!(hasPointerEvents)) {\n                removeEventListener(targetElement, 'touchstart', onTouchstart);\n                if (dragObjArr.length > 0) {\n                    removeEventListener(document, 'touchmove', onTouchmove);\n                    removeEventListener(document, 'touchend', onTouchend);\n                    removeEventListener(document, 'touchcancel', onTouchend);\n                }\n            } else {\n                removeEventListener(targetElement, 'touchmove', onTouchmove);\n            }\n        };\n\n    }\n})();","import {clamp, dist, mix, pointsToAngleRad} from '../math/math';\n\n\ntype ChainOutFunc = (event?) => void;\n\n/**\n * for chaining event processing. useful for gestures (double tap, pinch zoom, max pointer filter).\n * each element in the chain might hold back the events, swallow them, or transform them\n *\n * p = {\n *     chainArr: ChainElement[]\n * }\n *\n * chainIn(event): null - feed an event into the chain\n * setChainOut(func): void - func(event) <- called when passed through chain\n * ^ each ChainElement needs these methods too\n *\n * @param p\n * @constructor\n */\nexport const EventChain = function (p) {\n\n    const chainArr = p.chainArr;\n    let chainOut: ChainOutFunc = () => undefined;\n\n    function continueChain(i, event) {\n        for (; i < chainArr.length; i++) {\n            event = chainArr[i].chainIn(event);\n            if (event === null) {\n                return null;\n            }\n        }\n        chainOut(event);\n        return null;\n    }\n\n    for (let i = 0; i < chainArr.length; i++) {\n        (function (i) {\n            chainArr[i].setChainOut(function (event) {\n                continueChain(i + 1, event);\n            });\n        })(i);\n    }\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n        return continueChain(0, event);\n    };\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n};\n\n\n/**\n * A ChainElement. Detects double taps.\n *\n * p = {\n *     onDoubleTap: function({pageX: number, pageY: number}) - fires when double tap occurs\n * }\n *\n * chainIn\n * setChainOut\n * setAllowedPointerTypeArr(string[]): void - which pointer types are allowed\n * setAllowedButtonArr(string[]): void - which buttons are allowed\n *\n * @param p\n * @constructor\n */\nexport const DoubleTapper = function (p) {\n\n    let chainOut: ChainOutFunc = function () {\n    };\n    const minSilenceBeforeDurationMs = 400;\n    const maxPressedDurationMs = 300;\n    const maxPressedDistancePx = 10;\n    const maxInbetweenDistancePx = 19;\n    const maxUpToUpDurationMs = 500;\n    const maxUntilSecondDownDurationMs = 300;\n    const minSilenceAfterMs = 250;\n\n    let allowedPointerTypeArr = ['touch', 'mouse', 'pen'];\n    let allowedButtonArr = ['left'];\n\n    let sequenceArr = [];\n    const pointersDownIdArr = [];\n    let lastUpTime = 0;\n    let nowTime = 0;\n\n    let eventQueueArr = [];\n\n\n    function fail() {\n        if (sequenceArr.length === 0) { // no gesture started -> can be ignored\n            return;\n        }\n        clearTimeout(timeoutObj.fail);\n        clearTimeout(timeoutObj.maxUntilSecondDown);\n        clearTimeout(timeoutObj.success);\n        timeoutObj.fail = null;\n        timeoutObj.maxUntilSecondDown = null;\n        timeoutObj.success = null;\n\n\n        for (let i = 0; i < eventQueueArr.length; i++) {\n            chainOut(eventQueueArr[i]);\n        }\n        eventQueueArr = [];\n\n        sequenceArr = [];\n    }\n\n    // double tap achieved\n    function success() {\n        timeoutObj.fail = null;\n        timeoutObj.success = null;\n        eventQueueArr = []; // events get swallowed\n        const lastSequenceItem = sequenceArr[sequenceArr.length - 1];\n        sequenceArr = [];\n        p.onDoubleTap({pageX: lastSequenceItem.pageX, pageY: lastSequenceItem.pageY});\n    }\n\n\n    const timeoutObj = {\n        fail: null,\n        maxUntilSecondDown: null,\n        success: null\n    };\n\n    //returns false if time already up. otherwise sets up timeout\n    function setupTimeout(timeoutStr, targetFunc, timeMS) {\n        const diff = timeMS - nowTime;\n        //console.log(fingers + ': ' + timeoutStr + ' diff', diff);\n        if (diff <= 0) { // time already up\n            return false;\n        }\n        timeoutObj[timeoutStr] = setTimeout(targetFunc, diff);\n        return true;\n    }\n\n\n    /**\n     * @param event object - a pointer event from BB.PointerListener\n     */\n    function processEvent(event) {\n\n        if (event.type === 'pointerdown') {\n            pointersDownIdArr.push(event.pointerId);\n        } else if (event.type === 'pointerup') {\n            for (let i = 0; i < pointersDownIdArr.length; i++) {\n                if (pointersDownIdArr[i] === event.pointerId) {\n                    pointersDownIdArr.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n        if (!allowedPointerTypeArr.includes(event.pointerType)) { //wrong input type -> fail\n            //console.log('wrong input type -> fail');\n            fail();\n            return;\n        }\n\n        nowTime = performance.now();\n        const lastSequenceItem = sequenceArr.length > 0 ? sequenceArr[sequenceArr.length - 1] : null;\n        if (event.type === 'pointerup') {\n            lastUpTime = event.time;\n        }\n\n        if (event.type === 'pointerdown') {\n            if (pointersDownIdArr.length > 1) { // more than one pointer down -> fail\n                //console.log('more than one pointer down -> fail');\n                fail();\n                return;\n            }\n            if (timeoutObj.success !== null) { // silence-after not achieved -> fail\n                //console.log('silence-after not achieved -> fail');\n                fail();\n                return;\n            }\n            if (sequenceArr.length === 0 && nowTime - lastUpTime < minSilenceBeforeDurationMs) { // silence before not achieved -> fail\n                //console.log('silence before not achieved -> fail');\n                fail();\n                return;\n            }\n            if (!allowedButtonArr.includes(event.button)) { // wrong button -> fail\n                //console.log('wrong button -> fail', event.button, allowedButtonArr);\n                fail();\n                return;\n            }\n            if (lastSequenceItem && lastSequenceItem.isDown || sequenceArr.length > 2) { // jumbled -> fail\n                //console.log('jumbled -> fail');\n                fail();\n                return;\n            }\n            if (lastSequenceItem) {\n                const distance = dist(lastSequenceItem.position[0], lastSequenceItem.position[1], event.pageX, event.pageY);\n                if (distance > maxInbetweenDistancePx) { //moved too much -> reset\n                    //console.log('maxInbetweenDistancePx -> reset');\n                    fail();\n\n                    if (nowTime - lastSequenceItem.time < minSilenceBeforeDurationMs) { //silence before not achieved -> fail\n                        return;\n                    }\n                }\n            }\n            sequenceArr.push({\n                isDown: true,\n                time: nowTime,\n                position: [event.pageX, event.pageY],\n                pointerId: event.pointerId\n            });\n            //maxUntilSecondDown\n\n            if (sequenceArr.length > 1) {\n                clearTimeout(timeoutObj.maxUntilSecondDown);\n            } else if (!setupTimeout('maxUntilSecondDown', fail, event.time + maxUntilSecondDownDurationMs)) {\n                //console.log('event.time + maxPressedDurationMs -> fail');\n                fail();\n                return;\n            }\n\n\n            clearTimeout(timeoutObj.fail);\n            if (!setupTimeout('fail', fail, event.time + maxPressedDurationMs)) {\n                //console.log('event.time + maxPressedDurationMs -> fail');\n                fail();\n                return;\n            }\n        }\n        if (lastSequenceItem && event.type === 'pointermove' && lastSequenceItem.pointerId === event.pointerId) {\n            /*if (lastSequenceItem.pointerId !== event.pointerId) { //another pointer mixing in -> fail\n                console.log('another pointer mixing in -> fail');\n                fail();\n                return;\n            }*/\n            const distance = dist(lastSequenceItem.position[0], lastSequenceItem.position[1], event.pageX, event.pageY);\n            if (distance > maxPressedDistancePx) { //moved too much -> fail\n                //console.log('maxPressedDistancePx -> fail');\n                fail();\n                return;\n            }\n        }\n        if (lastSequenceItem && event.type === 'pointerup') {\n            if (lastSequenceItem.pointerId !== event.pointerId) { //another pointer mixing in -> fail\n                fail();\n                return;\n            }\n            if (nowTime >= lastSequenceItem.time + maxPressedDurationMs) { //pressed too long -> fail\n                fail();\n                return;\n            }\n            clearTimeout(timeoutObj.fail);\n\n            if (sequenceArr.length < 3) {\n                if (!setupTimeout('fail', fail, event.time + maxUpToUpDurationMs)) {\n                    fail();\n                    return;\n                }\n\n                sequenceArr = [\n                    lastSequenceItem,\n                    {\n                        isUp: true,\n                        time: nowTime,\n                        position: [event.pageX, event.pageY]\n                    }\n                ];\n                return;\n            }\n\n            if (nowTime < sequenceArr[1].time + maxUpToUpDurationMs) {\n                // double tap almost success\n                // only needs silence\n                sequenceArr.push({\n                    pageX: event.pageX,\n                    pageY: event.pageY\n                });\n                if (!setupTimeout('success', success, event.time + minSilenceAfterMs)) {\n                    fail();\n                }\n            } else { // time up -> fail\n                fail();\n            }\n\n        }\n    }\n\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n\n        processEvent(event);\n\n        if (sequenceArr.length === 0) { //existing events can not become a double tap\n            fail();\n            return event;\n        }\n        // events might become a double tap -> queue\n        eventQueueArr.push(event);\n        return null;\n    };\n\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n\n    this.setAllowedPointerTypeArr = function (arr) {\n        allowedPointerTypeArr = arr;\n    };\n\n    this.setAllowedButtonArr = function (arr) {\n        allowedButtonArr = arr;\n    };\n};\n\n\n/**\n * A ChainElement. Detects a single tap, done with N 'touch' pointers\n *\n * p = {\n *      fingers: number - number of fingers\n *      onTap: function() - fires when tap occurs\n * }\n *\n * chainIn\n * setChainOut\n *\n * @param p\n * @constructor\n */\nexport const NFingerTapper = function (p) {\n\n    const fingers = p.fingers;\n    let chainOut: ChainOutFunc = function () {\n    };\n\n    const minSilenceBeforeDurationMs = 50; //250;\n    const maxTapMs = 500;\n    const maxFirstLastFingerDownMs = 250;\n    const maxPressedDistancePx = 12; //5 + fingers * 5;\n    const silenceAfterDurationMs = 250;\n\n\n    /*\n        fingerObj = {\n            pointerId: number,\n            downTime: number,\n            downPageX: number,\n            downPageY: number,\n            isUp: boolean\n        }\n     */\n    let fingerArr = [];\n    let firstDownTime;\n    let eventQueueArr = [];\n    let lastEventTime = 0;\n    const pointersDownIdArr = [];\n\n    function fail() {\n        if (eventQueueArr.length === 0) {\n            return;\n        }\n        clearTimeout(timeoutObj.firstLastDownTimeout);\n        clearTimeout(timeoutObj.tapTimeout);\n        for (let i = 0; i < eventQueueArr.length; i++) {\n            chainOut(eventQueueArr[i]);\n        }\n        eventQueueArr = [];\n        fingerArr = [];\n    }\n\n    function success() {\n        clearTimeout(timeoutObj.firstLastDownTimeout);\n        clearTimeout(timeoutObj.tapTimeout);\n        eventQueueArr = []; // events get swallowed\n        fingerArr = [];\n        p.onTap();\n    }\n\n    let nowTime;\n    const timeoutObj = {\n        firstLastDownTimeout: null,\n        tapTimeout: null\n    };\n\n    function setupTimeout(timeoutStr, timeMS) {\n        const diff = timeMS - nowTime;\n        //console.log(fingers + ': ' + timeoutStr + ' diff', diff);\n        if (diff <= 0) { // time already up\n            return false;\n        }\n        timeoutObj[timeoutStr] = setTimeout(fail, diff);\n        return true;\n    }\n\n    function processEvent(event) {\n\n        const tempLastEventTime = lastEventTime;\n        lastEventTime = event.time;\n\n        if (event.type === 'pointerdown') {\n            pointersDownIdArr.push(event.pointerId);\n        } else if (event.type === 'pointerup') {\n            for (let i = 0; i < pointersDownIdArr.length; i++) {\n                if (pointersDownIdArr[i] === event.pointerId) {\n                    pointersDownIdArr.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n        if (event.pointerType !== 'touch') {\n            if (fingerArr.length > 0) { // already in gesture -> fail\n                fail();\n            }\n            return;\n        }\n\n        nowTime = performance.now();\n\n        if (event.type === 'pointerdown') {\n            //console.log('down');\n            if (fingerArr.length + 1 !== pointersDownIdArr.length) { // failed before, and some fingers are still down -> fail\n                fail();\n                return;\n            }\n            if (fingerArr.length === fingers) { // too many fingers down -> fail\n                //console.log(fingers + ': too many fingers down -> fail');\n                fail();\n                return;\n            }\n            if (fingerArr.length > 0 && event.time - maxFirstLastFingerDownMs > fingerArr[0].downTime) { // took too long to touch with all fingers -> fail\n                //console.log(fingers + ': took too long to touch with all fingers -> fail');\n                fail();\n                return;\n            }\n            if (fingerArr.length === 0 && event.time - minSilenceBeforeDurationMs < tempLastEventTime) { // not enough silence before -> fail\n                //console.log(fingers + ': not enough silence before -> fail');\n                fail();\n                return;\n            }\n\n            if (fingerArr.length === 0) {\n                firstDownTime = event.time;\n\n                if (!setupTimeout('firstLastDownTimeout', event.time + maxFirstLastFingerDownMs) || !setupTimeout('tapTimeout', event.time + maxTapMs)) { // timeouts already up -> fail\n                    fail();\n                    return;\n                }\n\n            }\n            fingerArr.push({\n                pointerId: event.pointerId,\n                downTime: event.time,\n                downPageX: event.pageX,\n                downPageY: event.pageY\n            });\n            return;\n\n        }\n\n        if (event.type === 'pointermove') {\n\n            if (fingerArr.length === 0) {\n                //not in a gesture -> ignore\n                return;\n            }\n\n            let fingerObj = null;\n            for (let i = 0; i < fingerArr.length; i++) {\n                if (fingerArr[i].pointerId === event.pointerId) {\n                    fingerObj = fingerArr[i];\n                    break;\n                }\n            }\n            if (fingerObj === null) { // finger not part of the tap is on screen -> fail\n                fail();\n                return;\n            }\n\n            if (event.time - maxTapMs > firstDownTime) { // tap took too long -> fail\n                //console.log(fingers + ': tap took too long -> fail');\n                fail();\n                return;\n            }\n\n            const distance = dist(event.pageX, event.pageY, fingerObj.downPageX, fingerObj.downPageY);\n            if (distance > maxPressedDistancePx) { // finger moved too much -> fail\n                //console.log(fingers + ': a finger moved too much -> fail', distance);\n                fail();\n                return;\n            }\n\n        }\n\n        if (event.type === 'pointerup') {\n\n            if (fingerArr.length === 0) {\n                //not in a gesture -> ignore\n                return;\n            }\n\n            //console.log('up', event.pageX, event.pageY);\n            if (fingerArr.length !== fingers) { // not enough fingers -> fail\n                //console.log(fingers + ': not enough fingers -> fail');\n                fail();\n                return;\n            }\n\n            let fingerObj = null;\n            let i = 0;\n            for (; i < fingerArr.length; i++) {\n                if (fingerArr[i].pointerId === event.pointerId) {\n                    fingerObj = fingerArr[i];\n                    break;\n                }\n            }\n            if (fingerObj === null) {\n                //do nothing\n                return;\n            }\n\n            if (event.time - maxTapMs > firstDownTime) { // tap took too long -> fail\n                //console.log(fingers + ': tap took too long -> fail');\n                fail();\n                return;\n            }\n\n            const distance = dist(event.pageX, event.pageY, fingerObj.downPageX, fingerObj.downPageY);\n            if (distance > maxPressedDistancePx) { // finger moved too much -> fail\n                //console.log(fingers + ': b finger moved too much -> fail', distance, event.pageX, event.pageY);\n                //console.log(fingerArr);\n                fail();\n                return;\n            }\n\n            fingerObj.isUp = true;\n\n            let allAreUp = true;\n            for (let i = 0; i < fingerArr.length; i++) {\n                if (!fingerArr[i].isUp) {\n                    allAreUp = false;\n                    break;\n                }\n            }\n            //console.log('fingerArr', fingerArr);\n\n            if (allAreUp) { // success\n                success();\n                return true;\n            }\n\n        }\n\n\n    }\n\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n\n        const result = processEvent(event);\n\n        //console.log(fingerArr.length);\n\n        if (result === true) {\n            //tap success -> event gets swallowed\n            return null;\n        }\n        if (fingerArr.length === 0) {\n            return event;\n        } else {\n            eventQueueArr.push(event);\n        }\n\n        return null;\n\n    };\n\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n};\n\n\n/**\n * A ChainElement. Detects a pinch zooming (2 touch pointers). If one finger lifts, then will use the remaining.\n * Further pointers are ignored, but their events get swallowed during the pinching.\n * pinching ends when ALL pointers are lifted.\n * Events passed through if no pinching.\n *\n * p = {\n *      onPinch: function({type: 'end'} | {\n *          type: 'move',\n *          relX: number,\n *          relY: number,\n *          downRelX: number,\n *          downRelY: number,\n *          angleDeg: number,\n *          scale: number\n *      }) - fires when pinching occurs\n * }\n *\n * chainIn\n * setChainOut\n *\n * @param p\n * @constructor\n */\nexport const PinchZoomer = function (p) {\n\n    const firstFingerMaxDistancePx = 10;\n    const untilSecondFingerDurationMs = 250;\n\n    let chainOut: ChainOutFunc = function () {\n    };\n    const pointersDownIdArr = [];\n    /*\n    gestureObj = {\n        touchPointerArr: Array of {\n            pointerId: number,\n            relX: number,\n            relY: number,\n            downRelX: number, // only for first\n            downRelY: number\n        },\n        otherPointerIdArr: number[],\n        isInProgress: boolean\n    }\n    */\n    let gestureObj = null;\n    let eventQueueArr = [];\n\n\n    function end() {\n        gestureObj = null;\n        eventQueueArr = [];\n    }\n\n    function fail(doSwallow?) {\n        if (!gestureObj) { // no gesture happening -> ignore\n            return;\n        }\n\n        clearTimeout(timeoutObj.secondFingerTimeout);\n        if (!doSwallow) {\n            for (let i = 0; i < eventQueueArr.length; i++) {\n                chainOut(eventQueueArr[i]);\n            }\n        }\n        end();\n    }\n\n\n    let nowTime;\n    const timeoutObj = {\n        secondFingerTimeout: null\n    };\n\n    function setupTimeout(timeoutStr, targetFunc, timeMS) {\n        const diff = timeMS - nowTime;\n        if (diff <= 0) { // time already up\n            return false;\n        }\n        timeoutObj[timeoutStr] = setTimeout(targetFunc, diff);\n        return true;\n    }\n\n\n    function processEvent(event) {\n\n        if (event.type === 'pointerdown') {\n            pointersDownIdArr.push(event.pointerId);\n\n        } else if (event.type === 'pointerup') {\n            for (let i = 0; i < pointersDownIdArr.length; i++) {\n                if (pointersDownIdArr[i] === event.pointerId) {\n                    pointersDownIdArr.splice(i, 1);\n                    break;\n                }\n            }\n        }\n\n        //pass through scenarios\n        if (\n            !gestureObj && (\n                event.pointerType !== 'touch' || // wrong pointer type\n                (event.type === 'pointermove' && pointersDownIdArr.length > 0) || // failed before\n                pointersDownIdArr.length > 1 || // failed before\n                event.type === 'pointerup' // failed before\n            )\n        ) {\n            return;\n        }\n\n        nowTime = performance.now();\n\n\n        //pointer down\n        if (event.type === 'pointerdown') {\n\n            if (gestureObj) {\n                if (event.pointerType === 'touch') { // touch finger down - as nth pointer\n\n                    gestureObj.touchPointerArr.push({\n                        pointerId: event.pointerId,\n                        relX: event.relX,\n                        relY: event.relY\n                    });\n\n                    if (gestureObj.isInProgress) {\n                        continuePinch(gestureObj, {\n                            type: 'down',\n                            index: gestureObj.touchPointerArr.length - 1\n                        });\n                    } else {\n                        clearTimeout(timeoutObj.secondFingerTimeout);\n                        gestureObj.isInProgress = true;\n                        beginPinch(gestureObj);\n                    }\n                    return;\n\n                } else { // non-touch finger down - as nth pointer\n\n                    if (gestureObj.isInProgress) {\n                        gestureObj.otherPointerIdArr.push(event.pointerId);\n                    } else { // second pointer wrong type -> fail\n                        fail();\n                    }\n                    return;\n                }\n\n\n            } else {\n                // first finger down - can only be touch if no gestureObj\n                gestureObj = {\n                    touchPointerArr: [{\n                        pointerId: event.pointerId,\n                        relX: event.relX,\n                        relY: event.relY,\n                        downRelX: event.relX,\n                        downRelY: event.relY\n                    }],\n                    otherPointerIdArr: [],\n                    isInProgress: false\n                };\n                if (!setupTimeout('secondFingerTimeout', function () {\n                    fail();\n                }, event.time + untilSecondFingerDurationMs)) { // time ran out -> fail\n                    fail();\n                    return;\n                }\n                return;\n            }\n\n        }\n\n\n        //pointer move\n        if (event.type === 'pointermove' && event.pointerType === 'touch') {\n            //gesture object should always exist here\n\n            let touchPointerObj = null;\n            let i = 0;\n            for (; i < gestureObj.touchPointerArr.length; i++) {\n                if (event.pointerId === gestureObj.touchPointerArr[i].pointerId) {\n                    touchPointerObj = gestureObj.touchPointerArr[i];\n                    break;\n                }\n            }\n\n            //null should not be possible\n\n            touchPointerObj.relX = event.relX;\n            touchPointerObj.relY = event.relY;\n\n            if (!gestureObj.isInProgress) { // only one finger down & pinching hasn't started\n                const distance = dist(touchPointerObj.downRelX, touchPointerObj.downRelY, touchPointerObj.relX, touchPointerObj.relY);\n                if (distance > firstFingerMaxDistancePx) { // moved too much -> fail\n                    fail();\n                    return;\n                }\n\n            } else {\n                if (i < 2) { // only first two touches can affect pinching\n                    continuePinch(gestureObj, {\n                        type: 'move',\n                        index: i\n                    });\n                }\n            }\n\n            return;\n        }\n\n\n        //pointer up\n        if (event.type === 'pointerup') {\n            //gesture object should always exist here\n\n            if (event.pointerType === 'touch') {\n                let i = 0;\n                for (; i < gestureObj.touchPointerArr.length; i++) {\n                    if (gestureObj.touchPointerArr[i].pointerId === event.pointerId) {\n                        gestureObj.touchPointerArr.splice(i, 1);\n                        break;\n                    }\n                }\n                if (gestureObj.touchPointerArr.length > 0) {\n                    continuePinch(gestureObj, {\n                        type: 'up',\n                        index: i\n                    });\n                }\n\n            } else { // non-touch\n                for (let i = 0; i < gestureObj.otherPointerIdArr.length; i++) {\n                    if (gestureObj.otherPointerIdArr[i] === event.pointerId) {\n                        gestureObj.otherPointerIdArr.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n\n            //all fingers lifted?\n            if (gestureObj.touchPointerArr.length === 0 && gestureObj.otherPointerIdArr.length === 0) {\n                if (gestureObj.isInProgress) { // lifted last finger -> end of pinching\n                    end();\n                    endPinch();\n                } else { // lifted finger again before pinching started -> fail\n                    fail();\n                }\n                return;\n            }\n\n        }\n\n\n    }\n\n\n    // --- actual pinch transform logic ---\n\n    let pincherArr = [];\n\n    function beginPinch(gestureObj) {\n\n        for (let i = 0; i < gestureObj.touchPointerArr.length; i++) {\n            const pointerObj = gestureObj.touchPointerArr[i];\n            pincherArr.push({\n                pointerId: pointerObj.pointerId,\n                relX: pointerObj.relX,\n                relY: pointerObj.relY,\n                downRelX: pointerObj.relX,\n                downRelY: pointerObj.relY\n            });\n        }\n\n        const event: any = {\n            type: 'move',\n            angleRad: 0,\n            scale: 1\n        };\n\n        if (pincherArr.length === 1) {\n            event.relX = pincherArr[0].downRelX;\n            event.relY = pincherArr[0].downRelY;\n        } else {\n            event.relX = 0.5 * (pincherArr[0].downRelX + pincherArr[1].downRelX);\n            event.relY = 0.5 * (pincherArr[0].downRelY + pincherArr[1].downRelY);\n        }\n        event.downRelX = event.relX;\n        event.downRelY = event.relY;\n\n        p.onPinch(event);\n\n    }\n\n    //actionObj = {type: 'down'|'move'|'up', index: number}\n    function continuePinch(gestureObj, actionObj) {\n\n        if (actionObj.index > 1) { // only first two pointers matter\n            return;\n        }\n\n        if (actionObj.type === 'move') {\n\n            let event;\n            pincherArr[actionObj.index].relX = gestureObj.touchPointerArr[actionObj.index].relX;\n            pincherArr[actionObj.index].relY = gestureObj.touchPointerArr[actionObj.index].relY;\n\n            if (pincherArr.length === 1) {\n\n                event = {\n                    type: 'move',\n                    downRelX: pincherArr[0].downRelX,\n                    downRelY: pincherArr[0].downRelY,\n                    relX: pincherArr[0].relX,\n                    relY: pincherArr[0].relY,\n                    angleRad: 0,\n                    scale: 1\n                };\n\n            } else {\n\n                const startDist = dist(pincherArr[0].downRelX, pincherArr[0].downRelY, pincherArr[1].downRelX, pincherArr[1].downRelY);\n                const distance = dist(pincherArr[0].relX, pincherArr[0].relY, pincherArr[1].relX, pincherArr[1].relY);\n\n                const startAngle = pointsToAngleRad({\n                    x: pincherArr[0].downRelX,\n                    y: pincherArr[0].downRelY\n                }, {x: pincherArr[1].downRelX, y: pincherArr[1].downRelY});\n                const angle = pointsToAngleRad({\n                    x: pincherArr[0].relX,\n                    y: pincherArr[0].relY\n                }, {x: pincherArr[1].relX, y: pincherArr[1].relY});\n\n                event = {\n                    type: 'move',\n                    downRelX: 0.5 * (pincherArr[0].downRelX + pincherArr[1].downRelX),\n                    downRelY: 0.5 * (pincherArr[0].downRelY + pincherArr[1].downRelY),\n                    relX: 0.5 * (pincherArr[0].relX + pincherArr[1].relX),\n                    relY: 0.5 * (pincherArr[0].relY + pincherArr[1].relY),\n                    angleRad: angle - startAngle,\n                    scale: distance / startDist\n                };\n\n            }\n\n            p.onPinch(event);\n\n        } else if (actionObj.type === 'down' || actionObj.type === 'up') {\n            endPinch();\n            beginPinch(gestureObj);\n        }\n\n    }\n\n    function endPinch() {\n        pincherArr = [];\n        p.onPinch({\n            type: 'end'\n        });\n    }\n\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n        processEvent(event);\n        if (gestureObj) {\n            if (!gestureObj.isInProgress) { // might still fail -> into queue\n                eventQueueArr.push(event);\n            }\n        } else {\n            return event;\n        }\n        return null;\n    };\n\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n};\n\n\n/**\n * A ChainElement. Splits up coalesced events into their own pointermove events. Otherwise regular pass through.\n *\n * @constructor\n */\nexport const CoalescedExploder = function () {\n\n    let chainOut: ChainOutFunc = function () {\n    };\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n\n        if (event.type === 'pointermove') {\n\n            if (event.coalescedArr.length > 0) {\n\n                let eventCopy = JSON.parse(JSON.stringify(event));\n                eventCopy.coalescedArr = [];\n                let coalescedItem;\n\n                for (let i = 0; i < event.coalescedArr.length; i++) {\n\n                    if (i > 0) {\n                        eventCopy = JSON.parse(JSON.stringify(event));\n                    }\n                    coalescedItem = event.coalescedArr[i];\n\n                    eventCopy.pageX = coalescedItem.pageX;\n                    eventCopy.pageY = coalescedItem.pageY;\n                    eventCopy.relX = coalescedItem.relX;\n                    eventCopy.relY = coalescedItem.relY;\n                    eventCopy.dX = coalescedItem.dX;\n                    eventCopy.dY = coalescedItem.dY;\n                    eventCopy.time = coalescedItem.time;\n                    if (i < event.coalescedArr.length - 1) {\n                        eventCopy.isCoalesced = true;\n                    }\n\n                    chainOut(eventCopy);\n                }\n\n            } else {\n                return event;\n            }\n        } else {\n            return event;\n        }\n\n        return null;\n    };\n\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n};\n\nexport const OnePointerLimiter = function (pointers?) {\n\n    let chainOut: ChainOutFunc = function () {\n    };\n\n    let downPointerId = null;\n    const ignorePointerIdArr = [];\n\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n\n        if (ignorePointerIdArr.includes(event.pointerId)) {\n            if (event.type === 'pointerup') {\n                for (let i = 0; i < ignorePointerIdArr.length; i++) {\n                    if (ignorePointerIdArr[i] === event.pointerId) {\n                        ignorePointerIdArr.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n            return null;\n        }\n\n        if (downPointerId === null) {\n            if (event.type === 'pointerdown') {\n                downPointerId = event.pointerId;\n            }\n            return event;\n\n        } else {\n            if (event.pointerId !== downPointerId) {\n                if (event.type === 'pointerdown') {\n                    ignorePointerIdArr.push(event.pointerId);\n                }\n                return null;\n            }\n            if (event.type === 'pointerup') {\n                downPointerId = null;\n            }\n            return event;\n        }\n\n        return null;\n\n    };\n\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n\n};\n\n\n/**\n * Not really and event chain element. but pretty similar.\n *\n * Processes draw input events. When shift held -> linetool\n * line events - what KlCanvasWorkspace passes onDraw(e)\n *\n * p = {\n *     onDraw: function(drawEvent)\n * }\n *\n * pass input in with process(drawEvent)\n *\n * modifies draw event to include such events:\n * {\n *     type: 'line',\n *     x0: null, // you have to fill that in\n *     y0: null, // you have to fill that in\n *     pressure0: null, // you have to fill that in\n *     x1: number,\n *     y1: number,\n *     pressure1: number\n * }\n *\n * @param p\n * @constructor\n */\nexport const LinetoolProcessor = function (p) {\n\n    let downEvent = null;\n    let eventQueue = [];\n    let direction = null;\n    const DIR_X = 0, DIR_Y = 1;\n\n    this.process = function (event) {\n        if (event.type === 'down') {\n            downEvent = event;\n            direction = null;\n\n            if (event.shiftIsPressed) {\n\n                p.onDraw({\n                    type: 'line',\n                    x0: null,\n                    y0: null,\n                    pressure0: null,\n                    x1: event.x,\n                    y1: event.y,\n                    pressure1: event.pressure\n                });\n\n                eventQueue.push(event);\n                return;\n            }\n\n        }\n\n        if (event.type === 'move') {\n\n            if (event.shiftIsPressed) {\n\n                if (direction === null) {\n                    const dX = Math.abs(event.x - downEvent.x);\n                    const dY = Math.abs(event.y - downEvent.y);\n\n                    if (dX > 5 || dY > 5) {\n                        direction = dX > dY ? DIR_X : DIR_Y;\n\n                        for (let i = 0; i < eventQueue.length; i++) {\n                            const e = eventQueue[i];\n                            if (direction === DIR_X) {\n                                e.y = downEvent.y;\n                            } else {\n                                e.x = downEvent.x;\n                            }\n                            p.onDraw(JSON.parse(JSON.stringify(e)));\n                        }\n                        eventQueue = [];\n                    }\n                }\n\n                if (direction === null) {\n                    eventQueue.push(event);\n                    return;\n                }\n\n                if (direction === DIR_X) {\n                    event.y = downEvent.y;\n                } else {\n                    event.x = downEvent.x;\n                }\n\n            } else {\n                if (eventQueue.length > 0) {\n                    for (let i = 0; i < eventQueue.length; i++) {\n                        p.onDraw(JSON.parse(JSON.stringify(eventQueue[i])));\n                    }\n                    eventQueue = [];\n                }\n            }\n\n        }\n\n        if (event.type === 'up') {\n            eventQueue = [];\n        }\n\n        p.onDraw(JSON.parse(JSON.stringify(event)));\n    };\n};\n\n\n/**\n * cleans up DrawEvents. More trustworthy events. EventChain element\n *\n * that events can only go line this: down -> n x move -> up\n * so, sanitizes this: down, down, down. becomes only one down. the other downs are ignored/swallowed\n * @constructor\n */\nexport const LineSanitizer = function () {\n\n    let chainOut: ChainOutFunc = function () {\n    };\n\n    let isDrawing = false;\n\n    // --- interface ---\n    this.chainIn = function (event) {\n\n        if (event.type === 'down') {\n            if (isDrawing) {\n                //console.log('line sanitizer - down, but already drawing');\n                chainOut({\n                    type: 'up',\n                    scale: event.scale,\n                    shiftIsPressed: event.shiftIsPressed,\n                    isCoalesced: false\n                });\n            } else {\n                isDrawing = true;\n            }\n        }\n        if (!isDrawing && (event.type === 'move' || event.type === 'up')) {\n            //console.log('line sanitizer - ' + event.type + ' but not drawing');\n            return null;\n        }\n\n        if (event.type === 'up' && isDrawing) {\n            isDrawing = false;\n        }\n\n        return event;\n    };\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n    this.getIsDrawing = function () {\n        return isDrawing;\n    };\n};\n\n\n/**\n * Line smoothing. EventChain element. Smoothing via blending new position with old position.\n * for onDraw events from KlCanvasWorkspace.\n *\n * p = {\n *     smoothing: number, // 0-1, 0: no smoothing, 1: 100% smoothing -> would never catch up\n * }\n *\n * smoothing > 0: will fire DrawEvents in interval when no new move events\n *\n * type: 'line' Events are just passed through.\n *\n * @param p\n * @constructor\n */\nexport const LineSmoothing = function (p) {\n\n    let chainOut: ChainOutFunc = function () {\n    };\n    let smoothing = clamp(p.smoothing, 0, 1);\n    let lastMixedInput;\n    let interval;\n    let timeout;\n\n    // --- interface ---\n\n    this.chainIn = function (event) {\n        event = JSON.parse(JSON.stringify(event));\n        clearTimeout(timeout);\n        clearInterval(interval);\n\n        if (event.type === 'down') {\n            lastMixedInput = {\n                x: event.x,\n                y: event.y,\n                pressure: event.pressure\n            };\n        }\n\n        if (event.type === 'move') {\n\n            const inputX = event.x;\n            const inputY = event.y;\n            const inputPressure = event.pressure;\n\n            event.x = mix(event.x, lastMixedInput.x, smoothing);\n            event.y = mix(event.y, lastMixedInput.y, smoothing);\n            event.pressure = mix(event.pressure, lastMixedInput.pressure, smoothing);\n            lastMixedInput = {\n                x: event.x,\n                y: event.y,\n                pressure: event.pressure\n            };\n\n            if (smoothing > 0) {\n                timeout = setTimeout(function () {\n                    interval = setInterval(function () {\n                        event = JSON.parse(JSON.stringify(event));\n\n                        event.x = mix(inputX, lastMixedInput.x, smoothing);\n                        event.y = mix(inputY, lastMixedInput.y, smoothing);\n                        event.pressure = mix(inputPressure, lastMixedInput.pressure, smoothing);\n                        lastMixedInput = {\n                            x: event.x,\n                            y: event.y,\n                            pressure: event.pressure\n                        };\n\n                        chainOut(event);\n                    }, 35);\n                }, 80);\n            }\n\n        }\n\n        return event;\n    };\n\n    this.setChainOut = function (func) {\n        chainOut = func;\n    };\n\n    this.setSmoothing = function (s) {\n        smoothing = clamp(s, 0, 1);\n    };\n};\n","import {IKeyString} from '../BB.types';\nimport {createCanvas} from './create-canvas';\n\nexport function copyCanvas(canvas: HTMLCanvasElement): HTMLCanvasElement {\n    const resultCanvas = createCanvas(canvas.width, canvas.height);\n    const ctx = resultCanvas.getContext('2d');\n    if (!ctx) {\n        throw new Error('2d context not supported or canvas already initialized');\n    }\n    ctx.drawImage(canvas, 0, 0);\n    return resultCanvas;\n}\n\n/**\n * Determine if should disable imageSmoothing for transformation.\n * ImageSmoothing can make images blurry even when they're in the original scale and aligned with the pixelgrid.\n */\nexport function testShouldPixelate(\n    transform: {x: number, y: number, width:number, height: number, angleDeg: number},\n    scaleX: number,\n    scaleY: number,\n): boolean {\n    if (\n        ![1, -1].includes(scaleX) || ![1, -1].includes(scaleY) ||\n        transform.width % 1 !== 0 || transform.height % 1 !== 0 ||\n        Math.abs(transform.angleDeg) % 90 !== 0\n    ) {\n        return false;\n    }\n    const whSwapped = Math.abs(transform.angleDeg - 90) % 180 === 0;\n    const width = whSwapped ? transform.height : transform.width;\n    const height = whSwapped ? transform.width : transform.height;\n    return (\n            (Math.abs(width) % 2 === 0 && transform.x % 1 === 0) ||\n            (Math.abs(width) % 2 === 1 && transform.x % 1 === 0.5)\n        ) &&\n        (\n            (Math.abs(height) % 2 === 0 && transform.y % 1 === 0) ||\n            (Math.abs(height) % 2 === 1 && transform.y % 1 === 0.5)\n        );\n}\n\n\n/**\n * @param destCtx - the canvas that will be drawn on\n * @param transformImage - image that will be drawn on canvas\n * @param transform - {x, y, width, height, angle} - x and y are center of transformImage\n * @param bounds object - optional {x, y, width, height} - crop of transformImage in transformImage image space\n * @param pixelated\n */\nexport function drawTransformedImageWithBounds(\n    destCtx: CanvasRenderingContext2D,\n    transformImage: HTMLImageElement | HTMLCanvasElement,\n    transform: {x: number, y: number, width:number, height: number, angleDeg: number},\n    bounds?: {x: number, y: number, width: number, height: number},\n    pixelated?: boolean,\n): void {\n    if (!bounds) {\n        bounds = {\n            x: 0,\n            y: 0,\n            width: transformImage.width,\n            height: transformImage.height\n        };\n    }\n\n    destCtx.save();\n    if (pixelated) {\n        destCtx.imageSmoothingEnabled = false;\n    } else {\n        destCtx.imageSmoothingEnabled = true;\n        destCtx.imageSmoothingQuality = 'high';\n    }\n\n    destCtx.translate(transform.x, transform.y);\n    destCtx.rotate(transform.angleDeg / 180 * Math.PI);\n    destCtx.scale(transform.width > 0 ? 1 : -1, transform.height > 0 ? 1 : -1);\n    destCtx.drawImage(\n        transformImage,\n        bounds.x, bounds.y, bounds.width, bounds.height,\n        -Math.abs(transform.width) / 2, -Math.abs(transform.height) / 2, Math.abs(transform.width), Math.abs(transform.height));\n\n    destCtx.restore();\n}\n\n/**\n * all transformations are optional\n * center is the point around which will be scaled and rotated\n *\n * @param baseCanvas canvas - the canvas that will be drawn on\n * @param transformImage image|canvas - image that will be drawn on canvas\n * @param transformObj {center: {x, y}, scale: {x, y}, translate: {x, y}, angleDegree}\n */\nexport function drawTransformedImageOnCanvas(\n    baseCanvas: HTMLCanvasElement,\n    transformImage: HTMLImageElement | HTMLCanvasElement,\n    transformObj: {\n        center: {x: number, y: number},\n        scale: {x: number, y: number},\n        translate: {x: number, y: number},\n        angleDegree: number,\n    },\n): void {\n    transformObj = JSON.parse(JSON.stringify(transformObj));\n    if (!transformObj.center) {\n        transformObj.center = {\n            x: transformImage.width / 2,\n            y: transformImage.height / 2\n        }\n    }\n    if (!transformObj.scale) {\n        transformObj.scale = {\n            x: 1,\n            y: 1\n        };\n    }\n    if (!transformObj.angleDegree) {\n        transformObj.angleDegree = 0;\n    }\n    if (!transformObj.translate) {\n        transformObj.translate = {\n            x: 0,\n            y: 0\n        };\n    }\n\n    const ctx = baseCanvas.getContext('2d');\n    if (!ctx) {\n        throw new Error('2d context not supported or canvas already initialized');\n    }\n    ctx.save();\n    if (\n        Math.abs(transformObj.scale.x - 1) >  0.000001 ||\n        Math.abs(transformObj.scale.y - 1) > 0.000001 ||\n        Math.abs(transformObj.angleDegree % 90) > 0.000001\n    ) {\n        ctx.imageSmoothingEnabled = true;\n        ctx.imageSmoothingQuality = 'high';\n    } else {\n        ctx.imageSmoothingEnabled = false;\n    }\n\n    ctx.translate(transformObj.translate.x, transformObj.translate.y);\n    ctx.translate(transformObj.center.x, transformObj.center.y);\n    ctx.rotate(transformObj.angleDegree / 180 * Math.PI);\n    ctx.scale(transformObj.scale.x, transformObj.scale.y);\n    ctx.translate(-transformObj.center.x, -transformObj.center.y);\n    ctx.drawImage(transformImage, 0, 0, transformImage.width, transformImage.height);\n\n    ctx.restore();\n}\n\nexport const createCheckerCanvas = function(size: number): HTMLCanvasElement {\n    const canvas = createCanvas();\n    let ctx;\n    if (size < 1) {\n        canvas.width = 1;\n        canvas.height = 1;\n        ctx = canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('2d context not supported or canvas already initialized');\n        }\n        ctx.fillStyle = 'rgb(128, 128, 128)';\n        ctx.fillRect(0, 0, 1, 1);\n    } else if (size > 200) {\n        canvas.width = 401;\n        canvas.height = 401;\n    } else {\n        canvas.width = size * 2;\n        canvas.height = size * 2;\n        ctx = canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('2d context not supported or canvas already initialized');\n        }\n        ctx.fillStyle = 'rgb(255, 255, 255)';\n        ctx.fillRect(0, 0, size * 2, size * 2);\n        ctx.fillStyle = 'rgb(200, 200, 200)';\n        ctx.fillRect(0, 0, size, size);\n        ctx.fillRect(size, size, size * 2, size * 2);\n    }\n    return canvas;\n};\n\nexport const createCheckerDataUrl = (function () {\n    const cache: IKeyString = { // previously created dataUrls\n        '8': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMElEQVQ4T2M8ceLEfwY8wNzcHJ80A+OoAcMiDP7//483HZw8eRJ/Ohg1gIFx6IcBAIhJUqnarXQ1AAAAAElFTkSuQmCC',\n        '4': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAJ0lEQVQoU2M8ceLEfwYkYG5ujsxlYKSDgv///6O44eTJk6huoL0CAGsOKVVu8UYvAAAAAElFTkSuQmCC'\n    };\n\n    return function (size: number, callback?: (s: string) => void) {\n        function create(size: number): string {\n            size = parseInt('' + size);\n            if (cache['' + size]) {\n                return cache['' + size];\n            }\n            const canvas = createCheckerCanvas(size);\n            const result = canvas.toDataURL('image/png');\n            cache['' + size] = result;\n            return result;\n        }\n\n        if (callback) { //async\n            setTimeout(function () {\n                callback(create(size));\n            }, 1);\n        } else { //sync\n            return create(size);\n        }\n    };\n})();\n\n/**\n * smooth resize image\n * @param canvas canvas - will be resized (modified)\n * @param w\n * @param h\n * @param tmp1 canvas - optional, provide to save resources\n * @param tmp2 canvas - optional, provide to save resources\n */\nexport function resizeCanvas(\n    canvas: HTMLCanvasElement,\n    w: number,\n    h: number,\n    tmp1?: HTMLCanvasElement,\n    tmp2?: HTMLCanvasElement,\n): void {\n\n    //determine base 2 exponents of old and new size\n    function getBase2Obj(oldW: number, oldH: number, newW: number, newH: number) {\n        const result = {\n            oldWidthEx: Math.round(Math.log2(oldW)),\n            oldHeightEx: Math.round(Math.log2(oldH)),\n            newWidthEx: Math.ceil(Math.log2(newW)),\n            newHeightEx: Math.ceil(Math.log2(newH))\n        };\n        result.oldWidthEx = Math.max(result.oldWidthEx, result.newWidthEx);\n        result.oldHeightEx = Math.max(result.oldHeightEx, result.newHeightEx);\n        return result;\n    }\n\n    if (!w || !h || (w === canvas.width && h === canvas.height)) {\n        return;\n    }\n    w = Math.max(w, 1);\n    h = Math.max(h, 1);\n    if (w <= canvas.width && h <= canvas.height) {\n\n        tmp1 = !tmp1 ? createCanvas() : tmp1;\n        tmp2 = !tmp2 ? createCanvas() : tmp2;\n\n        const base2 = getBase2Obj(canvas.width, canvas.height, w, h);\n\n        //initially scale to a base of 2. unless new size is too close to old. e.g. sizing from 900 to 600\n        tmp2.width = base2.oldWidthEx > base2.newWidthEx ? Math.pow(2, base2.oldWidthEx) : w;\n        tmp2.height = base2.oldHeightEx > base2.newHeightEx ? Math.pow(2, base2.oldHeightEx) : h;\n        tmp1.getContext('2d')!.save();\n        tmp2.getContext('2d')!.save();\n\n        let ew, eh;\n        let buffer1 = tmp1, buffer2 = tmp2;\n\n        ew = base2.oldWidthEx;\n        eh = base2.oldHeightEx;\n\n        let bufferCtx = buffer2.getContext('2d')!;\n        bufferCtx.imageSmoothingEnabled = true;\n        bufferCtx.imageSmoothingQuality  = 'high';\n        bufferCtx.globalCompositeOperation  = 'copy';\n        bufferCtx.drawImage(canvas, 0, 0, buffer2.width, buffer2.height);\n\n        let currentWidth = buffer2.width;\n        let currentHeight = buffer2.height;\n\n        //stepwise half the size\n        for (; ew > base2.newWidthEx || eh > base2.newHeightEx; ew--, eh--) {\n            bufferCtx = buffer1.getContext('2d')!;\n            bufferCtx.imageSmoothingEnabled = true;\n            bufferCtx.imageSmoothingQuality  = 'high';\n            bufferCtx.globalCompositeOperation  = 'copy';\n\n            const newWidth = (ew > base2.newWidthEx) ? currentWidth / 2 : currentWidth;\n            const newHeight = (eh > base2.newHeightEx) ? currentHeight / 2 : currentHeight;\n\n            //buffer also needs to be properly sized, unfortunately\n            buffer1.width = newWidth;\n            buffer1.height = newHeight;\n\n            bufferCtx.drawImage(\n                buffer2,\n                0, 0,\n                currentWidth, currentHeight,\n                0, 0,\n                newWidth, newHeight\n            );\n            currentWidth = newWidth;\n            currentHeight = newHeight;\n\n            //swap\n            const tmp = buffer1;\n            buffer1 = buffer2;\n            buffer2 = tmp;\n        }\n\n        //when no longer can be halved, bring to target size\n        canvas.width = w;\n        canvas.height = h;\n        const canvasCtx = canvas.getContext('2d')!;\n        canvasCtx.save();\n        canvasCtx.imageSmoothingEnabled = true;\n        canvasCtx.imageSmoothingQuality  = 'high';\n        canvasCtx.drawImage(\n            buffer2,\n            0, 0,\n            currentWidth, currentHeight,\n            0, 0,\n            w, h\n        );\n        canvasCtx.restore();\n        tmp1.getContext('2d')!.restore();\n        tmp2.getContext('2d')!.restore();\n\n    } else if (w >= canvas.width && h >= canvas.height) {\n\n        tmp1 = !tmp1 ? createCanvas() : tmp1;\n        tmp1.width = w;\n        tmp1.height = h;\n        const tmp1Ctx = tmp1.getContext('2d')!;\n        tmp1Ctx.save();\n        tmp1Ctx.imageSmoothingEnabled = true;\n        tmp1Ctx.imageSmoothingQuality  = 'high';\n        tmp1Ctx.drawImage(canvas, 0, 0, w, h);\n        tmp1Ctx.restore();\n\n        canvas.width = w;\n        canvas.height = h;\n        canvas.getContext('2d')!.drawImage(tmp1, 0, 0);\n\n    } else {\n        resizeCanvas(canvas, w, canvas.height, tmp1, tmp2);\n        resizeCanvas(canvas, w, h, tmp1, tmp2);\n    }\n}\n\n/**\n * puts naive greyscale version of image into alpha channel.\n * only writes a, doesn't write rgb\n * @param canvas\n */\nexport function convertToAlphaChannelCanvas(canvas: HTMLCanvasElement): void {\n    const imdat = canvas.getContext('2d')!.getImageData(0, 0, canvas.width, canvas.height);\n    for (let i = 0; i < imdat.data.length; i += 4) {\n        if (imdat.data[i + 3] === 0) {\n            continue;\n        }\n        imdat.data[i + 3] = (imdat.data[i] + imdat.data[i + 1] + imdat.data[i + 2]) / 3 * (imdat.data[i + 3] / 255);\n    }\n    canvas.getContext('2d')!.putImageData(imdat, 0, 0);\n}\n","export const Matrix = (function () {\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Matrix_math_for_the_web\n    // yes not optimized - but it's not used for physics simulations.\n\n    // const perfTotal = 0;\n\n    // point • matrix\n    function multiplyMatrixAndPoint(matrix, point) {\n        const result = [\n            (point[0] * matrix[0]) + (point[1] * matrix[4]) + (point[2] * matrix[8]) + (point[3] * matrix[12]), // x\n            (point[0] * matrix[1]) + (point[1] * matrix[5]) + (point[2] * matrix[9]) + (point[3] * matrix[13]), // y\n            (point[0] * matrix[2]) + (point[1] * matrix[6]) + (point[2] * matrix[10]) + (point[3] * matrix[14]), // z\n            (point[0] * matrix[3]) + (point[1] * matrix[7]) + (point[2] * matrix[11]) + (point[3] * matrix[15]) // w\n        ];\n        return result;\n    }\n\n    //matrixB • matrixA\n    function multiplyMatrices(matrixA, matrixB) {\n\n        // Slice the second matrix up into rows\n        const row0 = [matrixB[0], matrixB[1], matrixB[2], matrixB[3]];\n        const row1 = [matrixB[4], matrixB[5], matrixB[6], matrixB[7]];\n        const row2 = [matrixB[8], matrixB[9], matrixB[10], matrixB[11]];\n        const row3 = [matrixB[12], matrixB[13], matrixB[14], matrixB[15]];\n\n        // Multiply each row by matrixA\n        const result0 = multiplyMatrixAndPoint(matrixA, row0);\n        const result1 = multiplyMatrixAndPoint(matrixA, row1);\n        const result2 = multiplyMatrixAndPoint(matrixA, row2);\n        const result3 = multiplyMatrixAndPoint(matrixA, row3);\n\n        // Turn the result rows back into a single matrix\n        return [\n            result0[0], result0[1], result0[2], result0[3],\n            result1[0], result1[1], result1[2], result1[3],\n            result2[0], result2[1], result2[2], result2[3],\n            result3[0], result3[1], result3[2], result3[3]\n        ];\n    }\n\n    function createTranslationMatrix(x, y) {\n        return [\n            1, 0, 0, 0,\n            0, 1, 0, 0,\n            0, 0, 1, 0,\n            x, y, 0, 1\n        ];\n    }\n\n    function createRotationMatrix(angleRad) {\n        //let angleRad = angleDeg / 360 * 2 * Math.PI;\n        return [\n            Math.cos(-angleRad), -Math.sin(-angleRad), 0, 0,\n            Math.sin(-angleRad), Math.cos(-angleRad), 0, 0,\n            0, 0, 1, 0,\n            0, 0, 0, 1\n        ];\n    }\n\n    function createScaleMatrix(f) {\n        return [\n            f, 0, 0, 0,\n            0, f, 0, 0,\n            0, 0, 1, 0,\n            0, 0, 0, 1\n        ];\n    }\n\n    return {\n        getIdentity: function () {\n            return [\n                1, 0, 0, 0,\n                0, 1, 0, 0,\n                0, 0, 1, 0,\n                0, 0, 0, 1\n            ];\n        },\n        multiplyMatrixAndPoint: multiplyMatrixAndPoint,\n        multiplyMatrices: multiplyMatrices,\n        createTranslationMatrix: createTranslationMatrix,\n        createRotationMatrix: createRotationMatrix,\n        createScaleMatrix: createScaleMatrix\n    };\n})();","import {IVector2D} from '../BB.types';\n\nexport const Vec2 = {\n    add: function (p1: IVector2D, p2: IVector2D): IVector2D {\n        return {x: p1.x + p2.x, y: p1.y + p2.y};\n    },\n    sub: function (p1: IVector2D, p2: IVector2D): IVector2D {\n        return {x: p1.x - p2.x, y: p1.y - p2.y};\n    },\n    nor: function (p: IVector2D): IVector2D {\n        const len = Math.sqrt(Math.pow(p.x, 2) + Math.pow(p.y, 2));\n        return {x: p.x / len, y: p.y / len};\n    },\n    len: function (p: IVector2D): number {\n        return Math.sqrt(Math.pow(p.x, 2) + Math.pow(p.y, 2));\n    },\n    dist: function (p1: IVector2D, p2: IVector2D): number {\n        return Vec2.len(Vec2.sub(p1, p2));\n    },\n    mul: function (p: IVector2D, s: number): IVector2D {\n        return {x: p.x * s, y: p.y * s};\n    },\n    angle: function (p1: IVector2D, p2: IVector2D): number {\n        return Math.atan2(p2.y - p1.y, p2.x - p1.x);\n    },\n    dot: function(a: IVector2D, b: IVector2D): number {\n        const aArr = [a.x, a.y];\n        const bArr = [b.x, b.y];\n        return aArr.map((x, i) => aArr[i] * bArr[i]).reduce((m, n) => m + n);\n    }\n};","import {Vec2} from './vec2';\nimport {pointsToAngleDeg, clamp, dist, mix} from './math';\nimport {IVector2D} from \"../bb.types\";\n\n/**\n * project p onto line\n * @param lineStart\n * @param lineEnd\n * @param p\n */\nexport const projectPointOnLine = function (lineStart: IVector2D, lineEnd: IVector2D, p: IVector2D): IVector2D {\n    let x, y;\n    if (lineStart.x === lineEnd.x) {\n        x = lineStart.x;\n        y = p.y;\n\n        return {\n            x: x,\n            y: y\n        };\n    }\n    const m = (lineEnd.y - lineStart.y) / (lineEnd.x - lineStart.x);\n    const b = lineStart.y - (m * lineStart.x);\n\n    x = (m * p.y + p.x - m * b) / (m * m + 1);\n    y = (m * m * p.y + m * p.x + b) / (m * m + 1);\n\n    return {\n        x: x,\n        y: y\n    };\n};\n\n\n\n/**\n * Operations on a line made up of points\n *\n * getAtDist(dist) - point when traveling *dist* along the line\n * getLength - gives you total length of line\n *\n * @param params object - {points: [{x:float, y:float}, ...]}\n * @constructor\n */\nexport const PointLine = function (params) {\n    const segmentArr = [];\n    const _this = this;\n\n    for (let i = 0; i < params.points.length; i++) {\n        (function (i) {\n            let length = undefined;\n            if (i < params.points.length - 1) {\n                length = dist(params.points[i].x, params.points[i].y, params.points[i + 1].x, params.points[i + 1].y);\n            }\n            segmentArr[i] = {\n                x: params.points[i].x,\n                y: params.points[i].y,\n                length: length\n            };\n        })(i);\n    }\n\n    /**\n     * @param dist number - distance in pixels, > 0\n     * @returns {{x: number, y: number}}\n     */\n    this.getAtDist = function (dist) {\n        let remainder = Math.min(_this.getLength(), dist);\n        let i = 0;\n\n        for (; remainder > segmentArr[i].length && i < segmentArr.length - 2; i++) {\n            remainder -= segmentArr[i].length;\n        }\n\n        const fac = Math.min(1, Math.max(0, remainder / segmentArr[i].length));\n\n        return {\n            x: (segmentArr[i].x * (1 - fac) + segmentArr[i + 1].x * fac),\n            y: (segmentArr[i].y * (1 - fac) + segmentArr[i + 1].y * fac)\n        };\n    };\n    this.getLength = function () {\n        let result = 0;\n        for (let i = 0; i < segmentArr.length - 1; i++) {\n            result += segmentArr[i].length;\n        }\n        return result;\n    };\n};\n\n/**\n * Each instance is one line made up of bezier interpolated segments.\n * You feed it points. It calculates control points on its own, and the resulting curve.\n *\n * @constructor\n */\nexport const BezierLine = function () {\n    const _this = this;\n    const pointArr = [];\n    let lastDot = 0;\n    let lastPoint;\n    let lastCallbackPoint;\n    let lastAngle;\n    let lastSpacing = null;\n\n    /**\n     * creates bezier curve from control points\n     *\n     * @param p1 - control point 1 {x: float, y: float}\n     * @param p2 - control point 2 {x: float, y: float}\n     * @param p3 - control point 3 {x: float, y: float}\n     * @param p4 - control point 4 {x: float, y: float}\n     * @param resolution - int\n     * @returns {Array} - bezier curve made up of points {x: float, y: float}\n     */\n    function getBezierPoints(p1, p2, p3, p4, resolution) {\n        const curvePoints = [];\n        let t, result;\n        for (let i = 0; i <= resolution; i++) {\n            t = i / resolution;\n            result = {};\n            result.x = Math.pow(1 - t, 3) * p1.x + 3 * Math.pow(1 - t, 2) * t * p2.x + 3 * (1 - t) * Math.pow(t, 2) * p3.x + Math.pow(t, 3) * p4.x;\n            result.y = Math.pow(1 - t, 3) * p1.y + 3 * Math.pow(1 - t, 2) * t * p2.y + 3 * (1 - t) * Math.pow(t, 2) * p3.y + Math.pow(t, 3) * p4.y;\n            curvePoints[curvePoints.length] = result;\n        }\n        return curvePoints;\n    }\n\n    /**\n     *\n     * add now point to line\n     * line will go until the previous point\n     *\n     * @param x - coord of new point\n     * @param y - coord of new point\n     * @param spacing - space between each step\n     * @param callback - calls for each step - x, y, t - t is 0-1 how far along\n     * @param controlsCallback - calls that callback with the bezier control points p1, p2, p3, p4 - each {x: float, y: float}\n     */\n    this.add = function (x, y, spacing, callback, controlsCallback) {\n        if (lastPoint && x === lastPoint.x && y === lastPoint.y) {\n            return;\n        }\n        lastPoint = {x: x, y: y};\n        pointArr[pointArr.length] = {\n            x: x,\n            y: y,\n            spacing: spacing\n        };\n\n        //calculate directions\n        if (pointArr.length === 1) {\n            lastSpacing = spacing;\n            return;\n        } else if (pointArr.length === 2) {\n            pointArr[0].dir = Vec2.nor(Vec2.sub(pointArr[1], pointArr[0]));\n            lastDot = spacing;\n            lastSpacing = spacing;\n            return;\n        } else {\n            const pointM1 = pointArr[pointArr.length - 1];\n            const pointM2 = pointArr[pointArr.length - 2];\n            const pointM3 = pointArr[pointArr.length - 3];\n            pointM2.dir = Vec2.nor(Vec2.sub(pointM1, pointM3));\n            if (isNaN(pointM2.dir.x) || isNaN(pointM2.dir.y)) {\n                //when xy -3 == -1\n                pointM2.dir = JSON.parse(JSON.stringify(pointM3.dir));\n            }\n        }\n\n        //get bezier curve\n        const a = pointArr[pointArr.length - 3];\n        const b = pointArr[pointArr.length - 2];\n        const p1 = a;\n        const p2 = Vec2.add(a, Vec2.mul(a.dir, Vec2.dist(a, b) / 4));\n        const p3 = Vec2.sub(b, Vec2.mul(b.dir, Vec2.dist(a, b) / 4));\n        const p4 = b;\n\n\n        let pointLine;\n        if (callback) {\n            let curvePoints;\n            curvePoints = getBezierPoints(p1, p2, p3, p4, 20);\n            pointLine = new PointLine({points: curvePoints});\n        } else {\n            pointLine = new PointLine({points: [p1, p4]});\n        }\n\n        //interate over curve with spacing and callback\n        const len = pointLine.getLength();\n        let tempSpacing = mix(lastSpacing, spacing, clamp(lastDot / len, 0, 1));\n        let d = lastDot;\n        for (; d <= len; d += tempSpacing) {\n            tempSpacing = mix(lastSpacing, spacing, clamp(d / len, 0, 1));\n            const point = pointLine.getAtDist(d);\n            const angle = lastCallbackPoint ? pointsToAngleDeg(lastCallbackPoint, point) : undefined;\n            if (callback) {\n                callback({\n                    x: point.x,\n                    y: point.y,\n                    t: d / len,\n                    angle: angle,\n                    dAngle: lastCallbackPoint ? angle - lastAngle : 0\n                });\n            }\n            lastCallbackPoint = point;\n            lastAngle = angle;\n        }\n\n        if (callback) {\n            lastDot = d - len;\n        } else {\n            lastDot = 0;\n            controlsCallback({p1: p1, p2: p2, p3: p3, p4: p4});\n        }\n\n        lastSpacing = spacing;\n    };\n\n    this.addFinal = function(spacing, callback, controlsCallback) {\n        if (pointArr.length < 2) {\n            return;\n        }\n\n        const p1 = pointArr[pointArr.length - 2];\n        const p2 = pointArr[pointArr.length - 1];\n\n        const newP = Vec2.add(p2, Vec2.sub(p2, p1));\n\n        _this.add(newP.x, newP.y, spacing, callback, controlsCallback);\n    };\n\n};\n\n/**\n * from glfx.script by evanW:\n * from SplineInterpolator.cs in the Paint.NET source code\n *\n * points go 0 - 1. I think.\n *\n * @param points\n * @constructor\n */\nexport const SplineInterpolator = function (points) {\n    const n = points.length;\n    this.xa = [];\n    this.ya = [];\n    this.u = [];\n    this.y2 = [];\n    let i;\n\n    const first = points[0][0];\n    const last = points[points.length - 1][0];\n\n    points.sort(function (a, b) {\n        return a[0] - b[0];\n    });\n    for (i = 0; i < n; i++) {\n        this.xa.push(points[i][0]);\n        this.ya.push(points[i][1]);\n    }\n\n    this.u[0] = 0;\n    this.y2[0] = 0;\n\n    for (i = 1; i < n - 1; ++i) {\n        // This is the decomposition loop of the tridiagonal algorithm.\n        // y2 and u are used for temporary storage of the decomposed factors.\n        const wx = this.xa[i + 1] - this.xa[i - 1];\n        const sig = (this.xa[i] - this.xa[i - 1]) / wx;\n        const p = sig * this.y2[i - 1] + 2.0;\n\n        this.y2[i] = (sig - 1.0) / p;\n\n        const ddydx =\n            (this.ya[i + 1] - this.ya[i]) / (this.xa[i + 1] - this.xa[i]) -\n            (this.ya[i] - this.ya[i - 1]) / (this.xa[i] - this.xa[i - 1]);\n\n        this.u[i] = (6.0 * ddydx / wx - sig * this.u[i - 1]) / p;\n    }\n\n    this.y2[n - 1] = 0;\n\n    // This is the backsubstitution loop of the tridiagonal algorithm\n    for (i = n - 2; i >= 0; --i) {\n        this.y2[i] = this.y2[i] * this.y2[i + 1] + this.u[i];\n    }\n\n    this.getFirstX = function () {\n        return first;\n    };\n    this.getLastX = function () {\n        return last;\n    };\n};\n\nSplineInterpolator.prototype.interpolate = function (x) {\n    const n = this.ya.length;\n    let klo = 0;\n    let khi = n - 1;\n\n    // We will find the right place in the table by means of\n    // bisection. This is optimal if sequential calls to this\n    // routine are at random values of x. If sequential calls\n    // are in order, and closely spaced, one would do better\n    // to store previous values of klo and khi.\n    while (khi - klo > 1) {\n        const k = (khi + klo) >> 1;\n\n        if (this.xa[k] > x) {\n            khi = k;\n        } else {\n            klo = k;\n        }\n    }\n\n    const h = this.xa[khi] - this.xa[klo];\n    const a = (this.xa[khi] - x) / h;\n    const b = (x - this.xa[klo]) / h;\n\n    // Cubic spline polynomial is now evaluated.\n    return a * this.ya[klo] + b * this.ya[khi] +\n        ((a * a * a - a) * this.y2[klo] + (b * b * b - b) * this.y2[khi]) * (h * h) / 6.0;\n};\n\n/**\n * find x to y. simply by stepping through. suboptimal, so don't call often.\n * searches in x 0-1 range\n *\n * @param y\n * @param resolution\n */\nSplineInterpolator.prototype.findX = function (y, resolution) {\n    let x = null;\n    let dist = null;\n    for (let i = 0; i <= resolution; i++) {\n        const tempX = i / resolution;\n        const tempY = this.interpolate(tempX);\n        if (x === null) {\n            x = tempX;\n            dist = Math.abs(tempY - y);\n            continue;\n        }\n\n        const tempDist = Math.abs(tempY - y);\n\n        if (tempDist < dist) {\n            x = tempX;\n            dist = tempDist;\n        } else {\n            //distance increasing\n            break;\n        }\n    }\n    return x;\n};\n\n/**\n * input for a spline, following curve of quadratic function x^2 [0 - 1]\n * returns [[0, startVal], ..., [1, endVal]]\n * @param startVal\n * @param endVal\n * @param stepSize\n * @returns {[]}\n */\nexport const quadraticSplineInput = function (startVal, endVal, stepSize) {\n    function round(v, dec) {\n        return Math.round(v * Math.pow(10, dec)) / Math.pow(10, dec);\n    }\n\n    const resultArr = [];\n    for (let i = 0; i <= 1; i += stepSize) {\n        resultArr.push([round(i, 4), round(startVal + Math.pow(i, 2) * (endVal - startVal), 4)]);\n    }\n    return resultArr;\n};","\n\n\n// based on js color conversion http://www.webtoolkit.info/\n\n\nexport class HSV {\n    h: number;\n    s: number;\n    v: number;\n    constructor(h: number, s: number, v: number) {\n        this.h = Math.max(0, Math.min(360, h));\n        this.s = Math.max(0.001, Math.min(100, s)); //bug when 0\n        this.v = Math.max(0, Math.min(100, v));\n    }\n}\n\nexport class RGB {\n    r : number;\n    g: number;\n    b: number;\n    constructor(r: number, g: number, b: number) {\n        this.r = Math.max(0, Math.min(255, r));\n        this.g = Math.max(0, Math.min(255, g));\n        this.b = Math.max(0, Math.min(255, b));\n    }\n}\n\nexport class CMYK {\n    c: number;\n    m: number;\n    y: number;\n    k: number;\n    constructor(c: number, m: number, y: number, k: number) {\n        this.c = Math.max(0, Math.min(100, c));\n        this.m = Math.max(0, Math.min(100, m));\n        this.y = Math.max(0, Math.min(100, y));\n        this.k = Math.max(0, Math.min(100, k));\n    }\n}\n\nexport const ColorConverter = {\n\n    _RGBtoHSV: function (RGB: RGB): HSV {\n        const result = new HSV(0, 0, 0);\n\n        const r = RGB.r / 255;\n        const g = RGB.g / 255;\n        const b = RGB.b / 255;\n\n        const minVal = Math.min(r, g, b);\n        const maxVal = Math.max(r, g, b);\n        const delta = maxVal - minVal;\n\n        result.v = maxVal;\n\n        if (delta == 0) {\n            result.h = 0;\n            result.s = 0;\n        } else {\n            result.s = delta / maxVal;\n            const del_R = (((maxVal - r) / 6) + (delta / 2)) / delta;\n            const del_G = (((maxVal - g) / 6) + (delta / 2)) / delta;\n            const del_B = (((maxVal - b) / 6) + (delta / 2)) / delta;\n\n            if (r == maxVal) {\n                result.h = del_B - del_G;\n            } else if (g == maxVal) {\n                result.h = (1 / 3) + del_R - del_B;\n            } else if (b == maxVal) {\n                result.h = (2 / 3) + del_G - del_R;\n            }\n\n            if (result.h < 0) {\n                result.h += 1;\n            }\n            if (result.h > 1) {\n                result.h -= 1;\n            }\n        }\n\n        result.h = Math.round(result.h * 360);\n        result.s = Math.round(result.s * 100);\n        result.v = Math.round(result.v * 100);\n\n        return result;\n    },\n\n    _HSVtoRGB: function (HSV: HSV): RGB {\n        const result = new RGB(0, 0, 0);\n\n        let var_h, var_i, var_1, var_2, var_3, var_r, var_g, var_b;\n\n        const h = (HSV.h / 360) % 1;\n        const s = HSV.s / 100;\n        const v = HSV.v / 100;\n\n        if (s == 0) {\n            result.r = v * 255;\n            result.g = v * 255;\n            result.b = v * 255;\n        } else {\n            var_h = h * 6;\n            var_i = Math.floor(var_h);\n            var_1 = v * (1 - s);\n            var_2 = v * (1 - s * (var_h - var_i));\n            var_3 = v * (1 - s * (1 - (var_h - var_i)));\n\n            if (var_i == 0) {\n                var_r = v;\n                var_g = var_3;\n                var_b = var_1\n            } else if (var_i == 1) {\n                var_r = var_2;\n                var_g = v;\n                var_b = var_1\n            } else if (var_i == 2) {\n                var_r = var_1;\n                var_g = v;\n                var_b = var_3\n            } else if (var_i == 3) {\n                var_r = var_1;\n                var_g = var_2;\n                var_b = v\n            } else if (var_i == 4) {\n                var_r = var_3;\n                var_g = var_1;\n                var_b = v\n            } else {\n                var_r = v;\n                var_g = var_1;\n                var_b = var_2\n            }\n\n            result.r = var_r * 255;\n            result.g = var_g * 255;\n            result.b = var_b * 255;\n\n            result.r = Math.round(result.r);\n            result.g = Math.round(result.g);\n            result.b = Math.round(result.b);\n        }\n\n        return result;\n    },\n\n    _CMYKtoRGB: function (CMYK: CMYK): RGB {\n        const result = new RGB(0, 0, 0);\n\n        const c = CMYK.c / 100;\n        const m = CMYK.m / 100;\n        const y = CMYK.y / 100;\n        const k = CMYK.k / 100;\n\n        result.r = 1 - Math.min(1, c * (1 - k) + k);\n        result.g = 1 - Math.min(1, m * (1 - k) + k);\n        result.b = 1 - Math.min(1, y * (1 - k) + k);\n\n        result.r = Math.round(result.r * 255);\n        result.g = Math.round(result.g * 255);\n        result.b = Math.round(result.b * 255);\n\n        return result;\n    },\n\n    _RGBtoCMYK: function (RGB: RGB): CMYK {\n        const result = new CMYK(0, 0, 0, 0);\n\n        const r = RGB.r / 255;\n        const g = RGB.g / 255;\n        const b = RGB.b / 255;\n\n        result.k = Math.min(1 - r, 1 - g, 1 - b);\n        result.c = (1 - r - result.k) / (1 - result.k);\n        result.m = (1 - g - result.k) / (1 - result.k);\n        result.y = (1 - b - result.k) / (1 - result.k);\n\n        result.c = Math.round(result.c * 100);\n        result.m = Math.round(result.m * 100);\n        result.y = Math.round(result.y * 100);\n        result.k = Math.round(result.k * 100);\n\n        return result;\n    },\n\n    toRGB: function (o: RGB | HSV | CMYK): RGB {\n        if (o instanceof RGB) {\n            return o;\n        }\n        if (o instanceof HSV) {\n            return this._HSVtoRGB(o);\n        }\n        if (o instanceof CMYK) {\n            return this._CMYKtoRGB(o);\n        }\n    },\n\n    toHSV: function (o: RGB | HSV | CMYK): HSV {\n        if (o instanceof HSV) {\n            return o;\n        }\n        if (o instanceof RGB) {\n            return this._RGBtoHSV(o);\n        }\n        if (o instanceof CMYK) {\n            return this._RGBtoHSV(this._CMYKtoRGB(o));\n        }\n    },\n\n    toCMYK: function (o: RGB | HSV | CMYK): CMYK {\n        if (o instanceof CMYK) {\n            return o;\n        }\n        if (o instanceof RGB) {\n            return this._RGBtoCMYK(o);\n        }\n        if (o instanceof HSV) {\n            return this._RGBtoCMYK(this._HSVtoRGB(o));\n        }\n    },\n    toHexString: function (o: RGB): string {\n        if (o instanceof RGB) {\n            let ha = (parseInt('' + o.r)).toString(16);\n            let hb = (parseInt('' + o.g)).toString(16);\n            let hc = (parseInt('' + o.b)).toString(16);\n            if (ha.length == 1)\n                ha = '0' + ha;\n            if (hb.length == 1)\n                hb = '0' + hb;\n            if (hc.length == 1)\n                hc = '0' + hc;\n            return ha + hb + hc;\n        }\n    },\n    toRgbStr: function(rgbObj: {r: number, g: number, b: number}): string {\n        return 'rgb(' + Math.round(rgbObj.r) + ', ' + Math.round(rgbObj.g) + ', ' + Math.round(rgbObj.b) + ')';\n    },\n    toRgbaStr: function(rgbaObj: {r: number, g: number, b: number, a: number}): string {\n        return 'rgba(' + Math.round(rgbaObj.r) + ', ' + Math.round(rgbaObj.g) + ', ' + Math.round(rgbaObj.b) + ', ' + rgbaObj.a + ')';\n    },\n    hexToRGB: function(hexStr: string): RGB | null {\n        hexStr = hexStr.trim();\n        // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n        const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n        hexStr = hexStr.replace(shorthandRegex, function(m, r, g, b) {\n            return r + r + g + g + b + b;\n        });\n\n        const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hexStr);\n        return result ? new RGB(\n            parseInt(result[1], 16),\n            parseInt(result[2], 16),\n            parseInt(result[3], 16)\n        ) : null;\n    }\n\n};\n\nexport function testIsWhiteBestContrast(rgbObj: {r: number, g: number, b: number}): boolean {\n    return (rgbObj.r * 0.299 + rgbObj.g * 0.587 + rgbObj.b * 0.114) < 125;\n}","import {addEventListener} from '../input/event-listener';\nimport {css} from './base';\nimport {BB} from '../bb';\n\n\nexport function appendTextDiv(target: HTMLElement, text: string): HTMLDivElement {\n    const div = document.createElement('div');\n    div.innerHTML = text;\n    target.appendChild(div);\n    return div;\n}\n\n/**\n * Is an input element focused.\n * Set attribute \"data-ignore-focus\" to \"true\" if its focus should be ignored.\n *\n * @param getAll - check all, even those with \"data-ignore-focus\" = \"true\"\n */\nexport function isInputFocused(getAll: boolean = false): boolean {\n    let result = document.activeElement && ['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName);\n    if (getAll) {\n        return result;\n    } else {\n        return result && !document.activeElement.getAttribute('data-ignore-focus');\n    }\n}\n\n/**\n * clears text selection in window\n */\nexport function clearSelection(): void {\n    if (window.getSelection) {\n        const sel = window.getSelection();\n        if (sel) {\n            if (sel.empty) {\n                sel.empty();\n            } else if (sel.removeAllRanges) {\n                sel.removeAllRanges();\n            }\n        }\n    } else if ('selection' in document) {\n        (document as any).selection.empty();\n    }\n}\n\n/**\n * prevents being able to focus element.\n * warning: it creates a listener\n *\n * @param el - dom element\n */\nexport const makeUnfocusable = (function() {\n\n    function preventFocus(event: MouseEvent) {\n        event.preventDefault();\n        let didFocusRelated = false;\n        if (event.relatedTarget) {\n            try {\n                (event.relatedTarget as HTMLElement).focus();\n                didFocusRelated = true;\n            } catch(e) {\n                console.error('failed to focus');\n            }\n        }\n        if (!didFocusRelated) {\n            (event.currentTarget as HTMLElement).blur();\n        }\n    }\n\n    return function(el) {\n        el.setAttribute('tabindex', '-1');\n        addEventListener(el, 'focus', preventFocus);\n    };\n})();\n\n\nconst els: {\n    el: HTMLElement;\n    listeners: [string, any][];\n}[] = [];\n// window['els'] = els;\n\n/**\n *\n * Create DOM element - div by default\n * params = {\n * \t    parent: someOtherDiv,\n * \t    css: {\n * \t\t    width: \"500px\",\n * \t\t    backgroundColor: \"#fff\"\n * \t    },\n * \t    content: \"test\", //or  content: [divA, divB, divC]   or content: someDiv\n * \t    className: \"bla\",\n *      id: \"bla\"\n * }\n *\n * @param params\n */\nexport function el(\n    params: {\n        parent?: HTMLElement,\n        css?: { [key: string]: string },\n        custom?: { [key: string]: any },\n        content?: string | (HTMLElement | string | null)[] | HTMLElement | SVGElement,\n        textContent?: string,\n        className?: string,\n        title?: string,\n        id?: string,\n        tagName?: string,\n        onClick?: (e: Event) => void,\n        onChange?: (e: Event) => void,\n    }\n): HTMLElement {\n    const div = document.createElement(params.tagName ? params.tagName : 'div');\n    const arr = [];\n    if (params.css) {\n        css(div, params.css);\n    }\n\n    if (params.content) {\n        if (typeof params.content === typeof 'aa') {\n            div.innerHTML = params.content as string;\n\n        } else if (Array.isArray(params.content)) {\n            BB.append(div, params.content);\n\n        } else {\n            div.appendChild(params.content as HTMLElement);\n\n        }\n    }\n    if (params.textContent) {\n        div.textContent = params.textContent;\n    }\n    if (params.className) {\n        div.className = params.className;\n    }\n    if (params.id) {\n        div.id = params.id;\n    }\n    if (params.parent) {\n        params.parent.appendChild(div);\n    }\n    if ('title' in params && params.title !== undefined) {\n        div.title = params.title;\n    }\n    const listeners = [];\n    if ('onClick' in params) {\n        addEventListener(div, 'click', params.onClick);\n        listeners.push(['click', params.onClick]);\n    }\n    if ('onChange' in params) {\n        addEventListener(div, 'change', params.onChange);\n        listeners.push(['change', params.onChange]);\n    }\n    if (listeners.length > 0) {\n        els.push({\n            el: div,\n            listeners: listeners,\n        })\n        /*div.style.backgroundColor = '#ff0';\n        div.style.border = '1px solid #ff0';*/\n    }\n    if ('custom' in params) {\n        const customKeyArr = Object.keys(params.custom);\n        for (let i = 0; i < customKeyArr.length; i++) {\n            div.setAttribute(customKeyArr[i], params.custom[customKeyArr[i]]);\n        }\n    }\n    return div;\n}\n\n/**\n * removes event listeners for Elements created via el()\n * @param el\n */\nexport function destroyEl(el: HTMLElement) {\n    for (let i = 0; i < els.length; i++) {\n        const item = els[i];\n        if (item.el === el) {\n            item.listeners.forEach(item => {\n                el.removeEventListener(item[0], item[1]);\n            });\n            els.splice(i, 1);\n            return;\n        }\n    }\n    // not found\n    return;\n}\n","\nexport class BbLog {\n\n    private static listeners: any[] = [];\n\n    constructor() {\n    }\n\n    static subscribe(listener) {\n        if (BbLog.listeners.includes(listener)) {\n            return;\n        }\n        BbLog.listeners.push(listener);\n    }\n\n    static unsubscribe(listener) {\n        for (let i = 0; i < BbLog.listeners.length; i++) {\n            if (listener === BbLog.listeners[i]) {\n                BbLog.listeners.splice(i, 1);\n                return;\n            }\n        }\n    }\n\n    static emit (msg) {\n        BbLog.listeners.forEach(item => {\n            item(msg);\n        });\n    }\n}","/**\n * LocalStorage wrapper that does not throw exceptions.\n * If cookies disabled in Safari localStorage interactions throw exception \"insecure operation\"\n */\nexport class LocalStorage {\n\n    private static error;\n\n    static getItem (key: string): string {\n        let result = null;\n        try {\n            result = localStorage.getItem(key);\n        } catch (e) {\n            this.error = e;\n        }\n        return result;\n    }\n\n    static setItem (key: string, value: string): void {\n        try {\n            localStorage.setItem(key, value);\n        } catch (e) {\n            this.error = e;\n        }\n    }\n\n    static removeItem (key: string): void {\n        try {\n            localStorage.removeItem(key);\n        } catch (e) {\n            this.error = e;\n        }\n    }\n\n    static getError (): any {\n        return this.error;\n    }\n}","import * as BBEventListener from './input/event-listener';\nimport {\n    addClassName, append, centerWithin, copyObj, createSvg,\n    css, dateDayDifference, decToFraction,\n    fitInto, gcd, getDate,\n    handleClick, imageBlobToUrl,\n    insertAfter, loadImage,\n    reduce,\n    removeClassName, setAttributes, shareCanvas\n} from './base/base';\nimport {\n    canShareFiles,\n    eventUsesHighResTimeStamp,\n    getVisitor,\n    hasPointerEvents,\n    hasWebGl,\n    isCssMinMaxSupported,\n    mouseEventHasMovement\n} from './base/browser';\nimport {KeyListener, sameKeys} from './input/key-listener';\nimport {PointerListener} from './input/pointer-listener';\nimport * as EventChain from './input/event-chain';\nimport {\n    convertToAlphaChannelCanvas,\n    copyCanvas,\n    createCheckerCanvas, createCheckerDataUrl,\n    drawTransformedImageOnCanvas,\n    drawTransformedImageWithBounds, resizeCanvas, testShouldPixelate\n} from './base/canvas';\nimport {Matrix} from './math/matrix';\nimport {Vec2} from './math/vec2';\nimport {BezierLine, PointLine, projectPointOnLine, quadraticSplineInput, SplineInterpolator} from './math/line';\nimport {CMYK, ColorConverter, HSV, RGB, testIsWhiteBestContrast} from './color/color';\nimport {appendTextDiv, clearSelection, destroyEl, el, isInputFocused, makeUnfocusable} from './base/ui';\nimport {\n    pointsToAngleDeg,\n    clamp,\n    dist,\n    mix,\n    pointsToAngleRad,\n    rotate,\n    rotateAround,\n    intDxy,\n    roundEven, roundUneven, distSquared, lenSquared, updateBounds, boundsInArea\n} from './math/math';\nimport {createCanvas} from './base/create-canvas';\nimport {BbLog} from './base/bb-log';\nimport {LocalStorage} from './base/local-storage';\n\nexport const BB = {\n\n    // ---- browser ----\n    eventUsesHighResTimeStamp,\n    mouseEventHasMovement,\n    hasPointerEvents,\n    hasWebGl,\n    getVisitor,\n    isCssMinMaxSupported,\n    canShareFiles,\n\n    // ---- base ----\n    insertAfter,\n    loadImage,\n    css,\n    setAttributes,\n    addClassName,\n    removeClassName,\n    append,\n    fitInto,\n    centerWithin,\n    getDate,\n    gcd,\n    reduce,\n    decToFraction,\n    imageBlobToUrl,\n    dateDayDifference,\n    copyObj,\n    shareCanvas,\n    handleClick,\n    createSvg,\n    BbLog,\n    LocalStorage,\n\n    // ---- math ----\n    mix,\n    dist,\n    distSquared,\n    lenSquared,\n    pointsToAngleRad,\n    pointsToAngleDeg,\n    clamp,\n    rotate,\n    rotateAround,\n    Matrix,\n    Vec2,\n    intDxy,\n    roundEven,\n    roundUneven,\n    updateBounds,\n    boundsInArea,\n\n    // ---- line ----\n    projectPointOnLine,\n    PointLine,\n    BezierLine,\n    SplineInterpolator,\n    quadraticSplineInput,\n\n    // ---- canvas ----\n    canvas: createCanvas,\n    copyCanvas,\n    testShouldPixelate,\n    drawTransformedImageWithBounds,\n    drawTransformedImageOnCanvas,\n    createCheckerCanvas,\n    createCheckerDataUrl,\n    resizeCanvas,\n    convertToAlphaChannelCanvas,\n\n    // ---- color ----\n    HSV,\n    RGB,\n    CMYK,\n    ColorConverter,\n    testIsWhiteBestContrast,\n\n    // ---- UI ----\n    appendTextDiv,\n    clearSelection,\n    makeUnfocusable,\n    el,\n    destroyEl,\n    isInputFocused: isInputFocused,\n\n\n    // ---- events / input ----\n\n    addEventListener: BBEventListener.addEventListener,\n    removeEventListener: BBEventListener.removeEventListener,\n    setEventListener: BBEventListener.setEventListener,\n\n    KeyListener,\n    PointerListener,\n    sameKeys,\n\n    EventChain,\n\n};\n","\nexport interface IHistoryEntry {\n    tool: string[];\n    action?: string;\n    params?: any[];\n\n    actions?: {\n        action: string;\n        params: any[];\n    }[]\n}\n\nexport interface IHistoryBroadcast {\n    bufferUpdate: IHistoryEntry;\n}\n\nexport type IHistoryListener = (p: IHistoryBroadcast | null) => void;\n\nlet historyInstance: boolean = false;\n\nexport interface KlHistoryInterface {\n    pause (b: boolean): void;\n    addListener (l: IHistoryListener): void;\n    push (e: IHistoryEntry): void;\n    undo (): (IHistoryEntry | null)[];\n    redo (): (IHistoryEntry | null)[];\n    getAll (): (IHistoryEntry | null)[];\n    canRedo (): boolean;\n    canUndo (): boolean;\n    getState (): number;\n    getActionNumber (): number;\n}\n\nexport class DecoyKlHistory implements KlHistoryInterface {\n    pause (b: boolean): void {}\n    addListener (l: IHistoryListener): void {}\n    push (e: IHistoryEntry): void {}\n    undo (): (IHistoryEntry | null)[] { return []; }\n    redo (): (IHistoryEntry | null)[] { return []; }\n    getAll (): (IHistoryEntry | null)[] { return []; }\n    canRedo (): boolean { return false; }\n    canUndo (): boolean { return false; }\n    getState (): number { return 0; }\n    getActionNumber (): number { return 0; }\n}\n\nexport class KlHistory implements KlHistoryInterface {\n\n    private state: number; // on .push state increments by one\n    private dataArr: (IHistoryEntry | null)[]; // null if beyond max undo to trigger garbage collection\n    private listeners: IHistoryListener[];\n    private pauseStack: number; // how often paused without unpause\n    private readonly max: number = 20; // max number undo steps\n    private maxState: number; // can't go backwards -> max state is the buffer image(klCanvas)\n    private actionNumber: number; // current action the user is on. untouched document = -1 because dataArr.length is 0\n    \n    private broadcast (p: IHistoryBroadcast | null): void {\n        setTimeout(() => {\n            for (let i = 0; i < this.listeners.length; i++) {\n                this.listeners[i](p);\n            }\n            this.state++;\n        }, 1);\n    }\n    \n    // ---- public ----\n    \n    constructor () {\n        if (historyInstance) {\n            throw new Error('klHistory already instantiated');\n        }\n        historyInstance = true;\n        this.state = 0;\n        this.dataArr = [];\n        this.listeners = [];\n        this.pauseStack = 0;\n        this.maxState = -1;\n        this.actionNumber = -1;\n    }\n\n    /**\n     * you need pause because there are sometimes actions that would cause other\n     * undo steps\n     * for example a filter that does something crazy with two layers and then merges them\n     * you want that to be one undo step, and prevent merging from causing its undo step.\n     * so while that filter is doing its magic you should pause possible undo steps that\n     * that are caused by a part of its code(in this example: merging layers)\n     *\n     * @param b\n     */\n    pause (b: boolean): void {\n        if (b === false) {\n            this.pauseStack = Math.max(0, this.pauseStack - 1);\n        } else {\n            this.pauseStack++;\n        }\n    }\n\n    addListener (l: IHistoryListener): void {\n        this.listeners.push(l);\n    }\n\n    push (e: IHistoryEntry): void {\n        if (this.pauseStack > 0) {\n            return;\n        }\n        while (this.actionNumber < this.dataArr.length - 1) {\n            this.dataArr.pop();\n        }\n\n        //taking care of actions that shouldn't cause a new undo step\n        const top = this.dataArr[this.dataArr.length - 1];\n        if (e.action === 'layerOpacity' && top && top.action === 'layerOpacity' && top.params[0] === e.params[0]) {\n            this.dataArr[this.dataArr.length - 1] = e;\n            this.state++; //still needs to increment because something changed\n            return;\n        }\n        if (e.action === 'focusLayer' && top && top.action === 'focusLayer') {\n            this.dataArr[this.dataArr.length - 1] = e;\n            this.state++;\n            return;\n        }\n\n\n        this.dataArr[this.dataArr.length] = e;\n        this.actionNumber = this.dataArr.length - 1;\n        const maxBefore = this.maxState;\n        this.maxState = Math.max(this.maxState, this.actionNumber - this.max);\n        if (maxBefore < this.maxState) {\n            this.broadcast({bufferUpdate: this.dataArr[this.maxState]});\n        } else {\n            this.broadcast(null);\n        }\n        if (this.maxState >= 0) {\n            this.dataArr[this.maxState] = null; //to free some memory...imported images take a lot of space\n        }\n    }\n\n    undo (): (IHistoryEntry | null)[] {\n        let result;\n        if (this.canUndo()) {\n            result = [];\n            for (let i = this.maxState + 1; i < this.actionNumber; i++) {\n                result.push(this.dataArr[i]);\n            }\n            this.actionNumber--;\n            this.broadcast(null);\n        }\n\n        return result;\n    }\n\n    redo (): (IHistoryEntry | null)[] {\n        const result = [];\n        if (this.canRedo()) {\n            this.actionNumber++;\n            result.push(this.dataArr[this.actionNumber]);\n            this.broadcast(null);\n        }\n        return result;\n    }\n\n    getAll (): (IHistoryEntry | null)[] {\n        return [].concat(this.dataArr);\n    }\n\n    canRedo (): boolean {\n        return this.actionNumber < this.dataArr.length - 1;\n    }\n\n    canUndo (): boolean {\n        return this.actionNumber > this.maxState;\n    }\n\n    getState (): number {\n        return this.state;\n    }\n\n    /**\n     * actionNumber - number of undo-able actions a user has done (e.g. if drawn 5 lines total -> 5)\n     */\n    getActionNumber (): number {\n        return (this.actionNumber + 1);\n    }\n    \n}\n\nexport const klHistory = new KlHistory();\n","\n// not the best\n\n/**\n * how many modals are open\n */\n\nexport class DialogCounter {\n    private listeners: ((v: number) => void)[] = [];\n    private count = 0;\n\n    private emit (): void {\n        this.listeners.forEach(item => {\n            item(this.count);\n        });\n    }\n\n    increase (v?: number): void {\n        if (v !== undefined) {\n            this.count += v;\n        } else {\n            this.count++;\n        }\n        this.emit();\n    }\n    decrease (v?: number): void {\n        if (v !== undefined) {\n            this.count -= v;\n        } else {\n            this.count--;\n        }\n        this.emit();\n    }\n    get (): number {\n        return this.count;\n    }\n    subscribe (listener: (v: number) => void): void {\n        this.listeners.push(listener);\n    }\n}\n\nexport const dialogCounter = new DialogCounter();\n","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"l7FYj\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"kbyFQ\");","// generated from src/languages. \"npm run lang:build\" to update\n\n// @ts-ignore\nimport dataEn from './en.json';\n\nexport const english = dataEn;\nexport const languages: {code: string; name: string}[] = [\n    {\n        code: 'en',\n        name: 'English',\n    },\n    {\n        code: 'de',\n        name: 'Deutsch',\n    },\n    {\n        code: 'ja',\n        name: '日本語',\n    },\n    {\n        code: 'zh-CN',\n        name: '简体中文',\n    }\n];\nexport const loadLanguage = async (code: string) => {\n    if (code === 'en') {\n        return english;\n    } else if (code === 'de') {\n        // @ts-ignore\n        return await import('./de.json');\n    } else if (code === 'ja') {\n        // @ts-ignore\n        return await import('./ja.json');\n    } else if (code === 'zh-CN') {\n        // @ts-ignore\n        return await import('./zh-CN.json');\n    }\n    throw new Error('unknown language code');\n};\n\nexport type TTranslationCode = \"switch-ui-left-right\" | // Switch left/right UI\n    \"toggle-show-tools\" | // Show/Hide Tools\n    \"scroll\" | // Scroll\n    \"donate\" | // Donate\n    \"home\" | // Home\n    \"modal-new-tab\" | // Open in new tab\n    \"tab-layers\" | // Layers\n    \"tab-edit\" | // Edit\n    \"tab-file\" | // File\n    \"tool-brush\" | // Brush\n    \"tool-paint-bucket\" | // Paint Bucket\n    \"tool-shape\" | // Shape\n    \"tool-text\" | // Text\n    \"tool-hand\" | // Hand Tool\n    \"tool-zoom\" | // Zoom\n    \"tool-undo-redo\" | // Undo / Redo\n    \"undo\" | // Undo\n    \"redo\" | // Redo\n    \"brush-pen\" | // Pen\n    \"brush-blend\" | // Blend\n    \"brush-sketchy\" | // Sketchy\n    \"brush-pixel\" | // Pixel\n    \"brush-chemy\" | // Chemy\n    \"brush-smudge\" | // Smudge\n    \"brush-size\" | // Size\n    \"brush-blending\" | // Blending\n    \"brush-toggle-pressure\" | // Toggle Pressure Sensitivity\n    \"brush-lock-alpha\" | // Lock Alpha\n    \"brush-lock-alpha-title\" | // Locks layer's alpha channel\n    \"brush-pen-circle\" | // Circle\n    \"brush-pen-chalk\" | // Chalk\n    \"brush-pen-calligraphy\" | // Calligraphy\n    \"brush-pen-square\" | // Square\n    \"brush-sketchy-scale\" | // Scale\n    \"brush-pixel-dither\" | // Dither\n    \"brush-chemy-fill\" | // Fill\n    \"brush-chemy-stroke\" | // Stroke\n    \"brush-chemy-mirror-x\" | // Horizontal Symmetry\n    \"brush-chemy-mirror-y\" | // Vertical Symmetry\n    \"brush-chemy-gradient\" | // Gradient\n    \"brush-eraser-transparent-bg\" | // Transparent Background\n    \"stabilizer\" | // Stabilizer\n    \"stabilizer-title\" | // Stroke Stabilizer\n    \"eyedropper\" | // Eyedropper\n    \"secondary-color\" | // Secondary Color\n    \"manual-color-input\" | // Manual Color Input\n    \"mci-hex\" | // Hex\n    \"mci-copy\" | // Copy\n    \"modal-ok\" | // Ok\n    \"modal-cancel\" | // Cancel\n    \"modal-close\" | // Close\n    \"layers-active-layer\" | // Active Layer\n    \"layers-layer\" | // Layer\n    \"layers-copy\" | // copy\n    \"layers-blending\" | // Blending\n    \"layers-new\" | // New Layer\n    \"layers-remove\" | // Remove Layer\n    \"layers-duplicate\" | // Duplicate Layer\n    \"layers-merge\" | // Merge with layer below\n    \"layers-rename\" | // Rename\n    \"layers-blend-normal\" | // normal\n    \"layers-blend-darken\" | // darken\n    \"layers-blend-multiply\" | // multiply\n    \"layers-blend-color-burn\" | // color burn\n    \"layers-blend-lighten\" | // lighten\n    \"layers-blend-screen\" | // screen\n    \"layers-blend-color-dodge\" | // color dodge\n    \"layers-blend-overlay\" | // overlay\n    \"layers-blend-soft-light\" | // soft light\n    \"layers-blend-hard-light\" | // hard light\n    \"layers-blend-difference\" | // difference\n    \"layers-blend-exclusion\" | // exclusion\n    \"layers-blend-hue\" | // hue\n    \"layers-blend-saturation\" | // saturation\n    \"layers-blend-color\" | // color\n    \"layers-blend-luminosity\" | // luminosity\n    \"layers-rename-title\" | // Rename Layer\n    \"layers-rename-name\" | // Name\n    \"layers-rename-clear\" | // Clear Name\n    \"layers-rename-sketch\" | // Sketch\n    \"layers-rename-colors\" | // Colors\n    \"layers-rename-lines\" | // Lines\n    \"layers-rename-foreground\" | // Foreground\n    \"layers-merge-modal-title\" | // Merge/Mix Layers\n    \"layers-merge-description\" | // Merges the selected layer with the one underneath. Select the mix mode:\n    \"file-no-autosave\" | // No autosave, no cloud storage\n    \"file-new\" | // New\n    \"file-import\" | // Import\n    \"file-save\" | // Save\n    \"file-save-png\" | // Save PNG\n    \"file-save-psd\" | // Save PSD\n    \"file-save-layers\" | // Save Layers\n    \"file-copy\" | // Copy\n    \"file-copy-title\" | // Copy To Clipboard\n    \"file-share\" | // Share\n    \"file-storage\" | // Browser Storage\n    \"file-storage-thumb-title\" | // Restores when reopening page\n    \"file-storage-about\" | // About Browser Storage\n    \"file-storage-cant-access\" | // Can't access\n    \"file-storage-empty\" | // Empty\n    \"file-storage-store\" | // Store\n    \"file-storage-clear\" | // Clear\n    \"file-storage-storing\" | // Storing\n    \"file-storage-overwrite\" | // Overwrite\n    \"file-storage-min-ago\" | // {x}min ago\n    \"file-storage-hours-ago\" | // {x}h ago\n    \"file-storage-days-ago\" | // {x}d ago\n    \"file-storage-month-ago\" | // > 1month ago\n    \"file-storage-restored\" | // Restored from Browser Storage\n    \"file-storage-stored\" | // Stored to Browser Storage\n    \"file-storage-failed\" | // Failed to store to Browser Storage\n    \"file-storage-failed-1\" | // Failed to store. Possible causes:\n    \"file-storage-failed-2\" | // Out of disk space\n    \"file-storage-failed-3\" | // Storage disabled in incognito tab\n    \"file-storage-failed-4\" | // Browser doesn't support storage\n    \"file-storage-failed-clear\" | // Failed to clear.\n    \"file-upload\" | // Upload\n    \"cleared-layer\" | // Cleared layer\n    \"filled\" | // Filled\n    \"new-title\" | // New Image\n    \"new-current\" | // Current\n    \"new-fit\" | // Fit\n    \"new-oversize\" | // Oversize\n    \"new-square\" | // Square\n    \"new-landscape\" | // Landscape\n    \"new-portrait\" | // Portrait\n    \"new-screen\" | // Screen\n    \"new-video\" | // Video\n    \"new-din-paper\" | // DIN Paper\n    \"new-px\" | // px\n    \"new-ratio\" | // Ratio\n    \"upload-title\" | // Upload to Imgur\n    \"upload-link-notice\" | // Anyone with the link to your uploaded image will be able to view it.\n    \"upload-name\" | // Title\n    \"upload-title-untitled\" | // Untitled\n    \"upload-caption\" | // Caption\n    \"upload-tos\" | // Terms of Service\n    \"upload-tos-2\" | // for imgur.com\n    \"upload-submit\" | // Upload\n    \"upload-uploading\" | // Uploading...\n    \"upload-success\" | // Upload Successful\n    \"upload-failed\" | // Upload failed.\n    \"upload-delete\" | // To delete your image from Imgur visit:\n    \"cropcopy-title-copy\" | // Copy To Clipboard\n    \"cropcopy-title-crop\" | // Crop\n    \"cropcopy-btn-copy\" | // To Clipboard\n    \"cropcopy-copied\" | // Copied.\n    \"cropcopy-btn-crop\" | // Apply Crop\n    \"crop-drag-to-crop\" | // Drag to crop\n    \"filter-crop-extend\" | // Crop/Extend\n    \"filter-flip\" | // Flip\n    \"filter-perspective\" | // Perspective\n    \"filter-resize\" | // Resize\n    \"filter-rotate\" | // Rotate\n    \"filter-transform\" | // Transform\n    \"filter-bright-contrast\" | // Bright/Contrast\n    \"filter-curves\" | // Curves\n    \"filter-hue-sat\" | // Hue/Saturation\n    \"filter-invert\" | // Invert\n    \"filter-tilt-shift\" | // Tilt Shift\n    \"filter-to-alpha\" | // To Alpha\n    \"filter-triangle-blur\" | // Triangle Blur\n    \"filter-unsharp-mask\" | // Unsharp Mask\n    \"filter-crop-title\" | // Crop / Extend\n    \"filter-crop-description\" | // Crop or extend the image.\n    \"filter-crop-left\" | // Left\n    \"filter-crop-right\" | // Right\n    \"filter-crop-top\" | // Top\n    \"filter-crop-bottom\" | // Bottom\n    \"filter-crop-rule-thirds\" | // Rule of Thirds\n    \"filter-crop-fill\" | // Fill\n    \"filter-flip-title\" | // Flip\n    \"filter-flip-description\" | // Flips layer or whole image.\n    \"filter-flip-horizontal\" | // Horizontal\n    \"filter-flip-vertical\" | // Vertical\n    \"filter-flip-image\" | // Flip Image\n    \"filter-flip-layer\" | // Flip Layer\n    \"filter-perspective-title\" | // Perspective\n    \"filter-perspective-description\" | // Transforms the selected layer.\n    \"filter-perspective-before\" | // Before\n    \"filter-perspective-after\" | // After\n    \"filter-resize-title\" | // Resize\n    \"filter-resize-description\" | // Resizes the image.\n    \"filter-rotate-title\" | // Rotate\n    \"filter-rotate-description\" | // Rotates the image.\n    \"filter-transform-empty\" | // Layer is empty.\n    \"filter-transform-title\" | // Transform\n    \"filter-transform-description\" | // Transforms selected layer. Hold Shift for additional behavior.\n    \"filter-transform-rotation\" | // Rotation\n    \"filter-transform-flip\" | // Flip\n    \"filter-transform-center\" | // Center\n    \"filter-transform-constrain\" | // Constrain\n    \"filter-transform-snap\" | // Snap\n    \"filter-transform-snap-title\" | // Snap Rotation And Position\n    \"filter-bright-contrast-title\" | // Brightness / Contrast\n    \"filter-bright-contrast-description\" | // Change brightness and contrast for the selected layer.\n    \"filter-bright-contrast-brightness\" | // Brightness\n    \"filter-bright-contrast-contrast\" | // Contrast\n    \"filter-curves-title\" | // Curves\n    \"filter-curves-description\" | // Apply curves on the selected layer.\n    \"filter-curves-all\" | // All\n    \"filter-hue-sat-title\" | // Hue / Saturation\n    \"filter-hue-sat-description\" | // Change hue and saturation for the selected layer.\n    \"filter-hue-sat-hue\" | // Hue\n    \"filter-hue-sat-saturation\" | // Saturation\n    \"filter-applied\" | // applied\n    \"filter-tilt-shift-title\" | // Tilt Shift\n    \"filter-tilt-shift-description\" | // Applies tilt shift on the selected layer.\n    \"filter-tilt-shift-blur\" | // Blur Radius\n    \"filter-tilt-shift-gradient\" | // Gradient Radius\n    \"filter-to-alpha-title\" | // To Alpha\n    \"filter-to-alpha-description\" | // Generates alpha channel for selected layer from:\n    \"filter-to-alpha-inverted-lum\" | // Inverted Luminance\n    \"filter-to-alpha-lum\" | // Luminance\n    \"filter-to-alpha-replace\" | // Replace RGB\n    \"filter-triangle-blur-title\" | // Triangle Blur\n    \"filter-triangle-blur-description\" | // Applies triangle blur on the selected layer.\n    \"filter-unsharp-mask-title\" | // Unsharp Mask\n    \"filter-unsharp-mask-description\" | // Sharpens the selected layer by scaling pixels away from the average of their neighbors.\n    \"filter-unsharp-mask-strength\" | // Strength\n    \"import-opening\" | // Opening file...\n    \"import-title\" | // Import Image\n    \"import-too-large\" | // Image too large, will be downscaled.\n    \"import-btn-as-layer\" | // As Layer\n    \"import-btn-as-image\" | // As Image\n    \"import-as-layer-title\" | // Import Image as New Layer\n    \"import-as-layer-description\" | // Adjust the position of the imported image.\n    \"import-as-layer-limit-reached\" | // Layer limit reached. Image will be placed on existing layer.\n    \"import-as-layer-fit\" | // Fit\n    \"import-flatten\" | // Flatten image\n    \"import-unsupported-file\" | // Unsupported file type. See Help for supported types.\n    \"import-broken-file\" | // Couldn't load image. File might be corrupted.\n    \"import-psd-unsupported\" | // Unsupported features. PSD had to be flattened.\n    \"import-psd-limited-support\" | // PSD support is limited. Flattened will more likely look correct.\n    \"import-psd-too-large\" | // Image exceeds maximum dimensions of {x} x {x} pixels. Unable to import.\n    \"import-psd-size\" | // Image size\n    \"hand-reset\" | // Reset\n    \"hand-fit\" | // Fit\n    \"bucket-tolerance\" | // Tolerance\n    \"bucket-sample\" | // Sample\n    \"bucket-sample-title\" | // Which layers to sample color from\n    \"bucket-sample-all\" | // All\n    \"bucket-sample-active\" | // Active\n    \"bucket-sample-above\" | // Above\n    \"bucket-grow\" | // Grow\n    \"bucket-grow-title\" | // Grow filled area (in pixels)\n    \"bucket-contiguous\" | // Contiguous\n    \"bucket-contiguous-title\" | // Only fill connected areas\n    \"shape-stroke\" | // Stroke\n    \"shape-fill\" | // Fill\n    \"shape-rect\" | // Rectangle\n    \"shape-ellipse\" | // Ellipse\n    \"shape-line\" | // Line\n    \"shape-line-width\" | // Line Width\n    \"shape-outwards\" | // Outwards\n    \"shape-fixed\" | // Fixed 1:1\n    \"shape-snap\" | // Snap\n    \"shape-snap-title\" | // 45° Angle Snapping\n    \"text-instruction\" | // Click canvas to place text\n    \"text-title\" | // Add Text\n    \"text-placeholder\" | // Your text (multiline Shift+Enter)\n    \"text-color\" | // Color\n    \"text-size\" | // Size\n    \"text-left\" | // Left\n    \"text-center\" | // Center\n    \"text-right\" | // Right\n    \"text-italic\" | // Italic\n    \"text-bold\" | // Bold\n    \"save-reminder-title\" | // Reminder to save\n    \"save-reminder-text\" | // Unsaved work may get lost.\n    \"submit\" | // Submit\n    \"submit-title\" | // Submit Drawing\n    \"submit-prompt\" | // Submit drawing?\n    \"submit-submitting\" | // Submitting\n    \"embed-init-loading\" | // Loading app\n    \"embed-init-waiting\" | // Waiting for image\n    \"unsaved\" | // Unsaved\n    \"help\" | // Help\n    \"tab-settings\" | // Settings\n    \"settings-language\" | // Language\n    \"settings-preferred-language\" | // Preferred Language\n    \"settings-language-reload\" | // Will update after reloading.\n    \"licenses\" | // Licenses\n    \"source-code\" | // Source Code\n    \"auto\" | // auto\n    \"zoom-in\" | // Zoom In\n    \"zoom-out\" | // Zoom Out\n    \"radius\" | // Radius\n    \"constrain-proportions\" | // Constrain Proportions\n    \"width\" | // Width\n    \"height\" | // Height\n    \"opacity\" | // Opacity\n    \"red\" | // Red\n    \"green\" | // Green\n    \"blue\" | // Blue\n    \"eraser\" | // Eraser\n    \"center\" | // Center\n    \"background\" | // Background\n    \"scaling-algorithm\" | // Scaling Algorithm\n    \"algorithm-smooth\" | // Smooth\n    \"algorithm-pixelated\" | // Pixelated\n    \"preview\"; // Preview\n","{\"switch-ui-left-right\":\"Switch left/right UI\",\"toggle-show-tools\":\"Show/Hide Tools\",\"scroll\":\"Scroll\",\"donate\":\"Donate\",\"home\":\"Home\",\"modal-new-tab\":\"Open in new tab\",\"tab-layers\":\"Layers\",\"tab-edit\":\"Edit\",\"tab-file\":\"File\",\"tool-brush\":\"Brush\",\"tool-paint-bucket\":\"Paint Bucket\",\"tool-shape\":\"Shape\",\"tool-text\":\"Text\",\"tool-hand\":\"Hand Tool\",\"tool-zoom\":\"Zoom\",\"tool-undo-redo\":\"Undo / Redo\",\"undo\":\"Undo\",\"redo\":\"Redo\",\"brush-pen\":\"Pen\",\"brush-blend\":\"Blend\",\"brush-sketchy\":\"Sketchy\",\"brush-pixel\":\"Pixel\",\"brush-chemy\":\"Chemy\",\"brush-smudge\":\"Smudge\",\"brush-size\":\"Size\",\"brush-blending\":\"Blending\",\"brush-toggle-pressure\":\"Toggle Pressure Sensitivity\",\"brush-lock-alpha\":\"Lock Alpha\",\"brush-lock-alpha-title\":\"Locks layer's alpha channel\",\"brush-pen-circle\":\"Circle\",\"brush-pen-chalk\":\"Chalk\",\"brush-pen-calligraphy\":\"Calligraphy\",\"brush-pen-square\":\"Square\",\"brush-sketchy-scale\":\"Scale\",\"brush-pixel-dither\":\"Dither\",\"brush-chemy-fill\":\"Fill\",\"brush-chemy-stroke\":\"Stroke\",\"brush-chemy-mirror-x\":\"Horizontal Symmetry\",\"brush-chemy-mirror-y\":\"Vertical Symmetry\",\"brush-chemy-gradient\":\"Gradient\",\"brush-eraser-transparent-bg\":\"Transparent Background\",\"stabilizer\":\"Stabilizer\",\"stabilizer-title\":\"Stroke Stabilizer\",\"eyedropper\":\"Eyedropper\",\"secondary-color\":\"Secondary Color\",\"manual-color-input\":\"Manual Color Input\",\"mci-hex\":\"Hex\",\"mci-copy\":\"Copy\",\"modal-ok\":\"Ok\",\"modal-cancel\":\"Cancel\",\"modal-close\":\"Close\",\"layers-active-layer\":\"Active Layer\",\"layers-layer\":\"Layer\",\"layers-copy\":\"copy\",\"layers-blending\":\"Blending\",\"layers-new\":\"New Layer\",\"layers-remove\":\"Remove Layer\",\"layers-duplicate\":\"Duplicate Layer\",\"layers-merge\":\"Merge with layer below\",\"layers-rename\":\"Rename\",\"layers-blend-normal\":\"normal\",\"layers-blend-darken\":\"darken\",\"layers-blend-multiply\":\"multiply\",\"layers-blend-color-burn\":\"color burn\",\"layers-blend-lighten\":\"lighten\",\"layers-blend-screen\":\"screen\",\"layers-blend-color-dodge\":\"color dodge\",\"layers-blend-overlay\":\"overlay\",\"layers-blend-soft-light\":\"soft light\",\"layers-blend-hard-light\":\"hard light\",\"layers-blend-difference\":\"difference\",\"layers-blend-exclusion\":\"exclusion\",\"layers-blend-hue\":\"hue\",\"layers-blend-saturation\":\"saturation\",\"layers-blend-color\":\"color\",\"layers-blend-luminosity\":\"luminosity\",\"layers-rename-title\":\"Rename Layer\",\"layers-rename-name\":\"Name\",\"layers-rename-clear\":\"Clear Name\",\"layers-rename-sketch\":\"Sketch\",\"layers-rename-colors\":\"Colors\",\"layers-rename-lines\":\"Lines\",\"layers-rename-foreground\":\"Foreground\",\"layers-merge-modal-title\":\"Merge/Mix Layers\",\"layers-merge-description\":\"Merges the selected layer with the one underneath. Select the mix mode:\",\"file-no-autosave\":\"No autosave, no cloud storage\",\"file-new\":\"New\",\"file-import\":\"Import\",\"file-save\":\"Save\",\"file-save-png\":\"Save PNG\",\"file-save-psd\":\"Save PSD\",\"file-save-layers\":\"Save Layers\",\"file-copy\":\"Copy\",\"file-copy-title\":\"Copy To Clipboard\",\"file-share\":\"Share\",\"file-storage\":\"Browser Storage\",\"file-storage-thumb-title\":\"Restores when reopening page\",\"file-storage-about\":\"About Browser Storage\",\"file-storage-cant-access\":\"Can't access\",\"file-storage-empty\":\"Empty\",\"file-storage-store\":\"Store\",\"file-storage-clear\":\"Clear\",\"file-storage-storing\":\"Storing\",\"file-storage-overwrite\":\"Overwrite\",\"file-storage-min-ago\":\"{x}min ago\",\"file-storage-hours-ago\":\"{x}h ago\",\"file-storage-days-ago\":\"{x}d ago\",\"file-storage-month-ago\":\"> 1month ago\",\"file-storage-restored\":\"Restored from Browser Storage\",\"file-storage-stored\":\"Stored to Browser Storage\",\"file-storage-failed\":\"Failed to store to Browser Storage\",\"file-storage-failed-1\":\"Failed to store. Possible causes:\",\"file-storage-failed-2\":\"Out of disk space\",\"file-storage-failed-3\":\"Storage disabled in incognito tab\",\"file-storage-failed-4\":\"Browser doesn't support storage\",\"file-storage-failed-clear\":\"Failed to clear.\",\"file-upload\":\"Upload\",\"cleared-layer\":\"Cleared layer\",\"filled\":\"Filled\",\"new-title\":\"New Image\",\"new-current\":\"Current\",\"new-fit\":\"Fit\",\"new-oversize\":\"Oversize\",\"new-square\":\"Square\",\"new-landscape\":\"Landscape\",\"new-portrait\":\"Portrait\",\"new-screen\":\"Screen\",\"new-video\":\"Video\",\"new-din-paper\":\"DIN Paper\",\"new-px\":\"px\",\"new-ratio\":\"Ratio\",\"upload-title\":\"Upload to Imgur\",\"upload-link-notice\":\"Anyone with the link to your uploaded image will be able to view it.\",\"upload-name\":\"Title\",\"upload-title-untitled\":\"Untitled\",\"upload-caption\":\"Caption\",\"upload-tos\":\"Terms of Service\",\"upload-tos-2\":\"for imgur.com\",\"upload-submit\":\"Upload\",\"upload-uploading\":\"Uploading...\",\"upload-success\":\"Upload Successful\",\"upload-failed\":\"Upload failed.\",\"upload-delete\":\"To delete your image from Imgur visit:\",\"cropcopy-title-copy\":\"Copy To Clipboard\",\"cropcopy-title-crop\":\"Crop\",\"cropcopy-btn-copy\":\"To Clipboard\",\"cropcopy-copied\":\"Copied.\",\"cropcopy-btn-crop\":\"Apply Crop\",\"crop-drag-to-crop\":\"Drag to crop\",\"filter-crop-extend\":\"Crop/Extend\",\"filter-flip\":\"Flip\",\"filter-perspective\":\"Perspective\",\"filter-resize\":\"Resize\",\"filter-rotate\":\"Rotate\",\"filter-transform\":\"Transform\",\"filter-bright-contrast\":\"Bright/Contrast\",\"filter-curves\":\"Curves\",\"filter-hue-sat\":\"Hue/Saturation\",\"filter-invert\":\"Invert\",\"filter-tilt-shift\":\"Tilt Shift\",\"filter-to-alpha\":\"To Alpha\",\"filter-triangle-blur\":\"Triangle Blur\",\"filter-unsharp-mask\":\"Unsharp Mask\",\"filter-crop-title\":\"Crop / Extend\",\"filter-crop-description\":\"Crop or extend the image.\",\"filter-crop-left\":\"Left\",\"filter-crop-right\":\"Right\",\"filter-crop-top\":\"Top\",\"filter-crop-bottom\":\"Bottom\",\"filter-crop-rule-thirds\":\"Rule of Thirds\",\"filter-crop-fill\":\"Fill\",\"filter-flip-title\":\"Flip\",\"filter-flip-description\":\"Flips layer or whole image.\",\"filter-flip-horizontal\":\"Horizontal\",\"filter-flip-vertical\":\"Vertical\",\"filter-flip-image\":\"Flip Image\",\"filter-flip-layer\":\"Flip Layer\",\"filter-perspective-title\":\"Perspective\",\"filter-perspective-description\":\"Transforms the selected layer.\",\"filter-perspective-before\":\"Before\",\"filter-perspective-after\":\"After\",\"filter-resize-title\":\"Resize\",\"filter-resize-description\":\"Resizes the image.\",\"filter-rotate-title\":\"Rotate\",\"filter-rotate-description\":\"Rotates the image.\",\"filter-transform-empty\":\"Layer is empty.\",\"filter-transform-title\":\"Transform\",\"filter-transform-description\":\"Transforms selected layer. Hold Shift for additional behavior.\",\"filter-transform-rotation\":\"Rotation\",\"filter-transform-flip\":\"Flip\",\"filter-transform-center\":\"Center\",\"filter-transform-constrain\":\"Constrain\",\"filter-transform-snap\":\"Snap\",\"filter-transform-snap-title\":\"Snap Rotation And Position\",\"filter-bright-contrast-title\":\"Brightness / Contrast\",\"filter-bright-contrast-description\":\"Change brightness and contrast for the selected layer.\",\"filter-bright-contrast-brightness\":\"Brightness\",\"filter-bright-contrast-contrast\":\"Contrast\",\"filter-curves-title\":\"Curves\",\"filter-curves-description\":\"Apply curves on the selected layer.\",\"filter-curves-all\":\"All\",\"filter-hue-sat-title\":\"Hue / Saturation\",\"filter-hue-sat-description\":\"Change hue and saturation for the selected layer.\",\"filter-hue-sat-hue\":\"Hue\",\"filter-hue-sat-saturation\":\"Saturation\",\"filter-applied\":\"applied\",\"filter-tilt-shift-title\":\"Tilt Shift\",\"filter-tilt-shift-description\":\"Applies tilt shift on the selected layer.\",\"filter-tilt-shift-blur\":\"Blur Radius\",\"filter-tilt-shift-gradient\":\"Gradient Radius\",\"filter-to-alpha-title\":\"To Alpha\",\"filter-to-alpha-description\":\"Generates alpha channel for selected layer from:\",\"filter-to-alpha-inverted-lum\":\"Inverted Luminance\",\"filter-to-alpha-lum\":\"Luminance\",\"filter-to-alpha-replace\":\"Replace RGB\",\"filter-triangle-blur-title\":\"Triangle Blur\",\"filter-triangle-blur-description\":\"Applies triangle blur on the selected layer.\",\"filter-unsharp-mask-title\":\"Unsharp Mask\",\"filter-unsharp-mask-description\":\"Sharpens the selected layer by scaling pixels away from the average of their neighbors.\",\"filter-unsharp-mask-strength\":\"Strength\",\"import-opening\":\"Opening file...\",\"import-title\":\"Import Image\",\"import-too-large\":\"Image too large, will be downscaled.\",\"import-btn-as-layer\":\"As Layer\",\"import-btn-as-image\":\"As Image\",\"import-as-layer-title\":\"Import Image as New Layer\",\"import-as-layer-description\":\"Adjust the position of the imported image.\",\"import-as-layer-limit-reached\":\"Layer limit reached. Image will be placed on existing layer.\",\"import-as-layer-fit\":\"Fit\",\"import-flatten\":\"Flatten image\",\"import-unsupported-file\":\"Unsupported file type. See Help for supported types.\",\"import-broken-file\":\"Couldn't load image. File might be corrupted.\",\"import-psd-unsupported\":\"Unsupported features. PSD had to be flattened.\",\"import-psd-limited-support\":\"PSD support is limited. Flattened will more likely look correct.\",\"import-psd-too-large\":\"Image exceeds maximum dimensions of {x} x {x} pixels. Unable to import.\",\"import-psd-size\":\"Image size\",\"hand-reset\":\"Reset\",\"hand-fit\":\"Fit\",\"bucket-tolerance\":\"Tolerance\",\"bucket-sample\":\"Sample\",\"bucket-sample-title\":\"Which layers to sample color from\",\"bucket-sample-all\":\"All\",\"bucket-sample-active\":\"Active\",\"bucket-sample-above\":\"Above\",\"bucket-grow\":\"Grow\",\"bucket-grow-title\":\"Grow filled area (in pixels)\",\"bucket-contiguous\":\"Contiguous\",\"bucket-contiguous-title\":\"Only fill connected areas\",\"shape-stroke\":\"Stroke\",\"shape-fill\":\"Fill\",\"shape-rect\":\"Rectangle\",\"shape-ellipse\":\"Ellipse\",\"shape-line\":\"Line\",\"shape-line-width\":\"Line Width\",\"shape-outwards\":\"Outwards\",\"shape-fixed\":\"Fixed 1:1\",\"shape-snap\":\"Snap\",\"shape-snap-title\":\"45° Angle Snapping\",\"text-instruction\":\"Click canvas to place text\",\"text-title\":\"Add Text\",\"text-placeholder\":\"Your text (multiline Shift+Enter)\",\"text-color\":\"Color\",\"text-size\":\"Size\",\"text-left\":\"Left\",\"text-center\":\"Center\",\"text-right\":\"Right\",\"text-italic\":\"Italic\",\"text-bold\":\"Bold\",\"save-reminder-title\":\"Reminder to save\",\"save-reminder-text\":\"Unsaved work may get lost.\",\"submit\":\"Submit\",\"submit-title\":\"Submit Drawing\",\"submit-prompt\":\"Submit drawing?\",\"submit-submitting\":\"Submitting\",\"embed-init-loading\":\"Loading app\",\"embed-init-waiting\":\"Waiting for image\",\"unsaved\":\"Unsaved\",\"help\":\"Help\",\"tab-settings\":\"Settings\",\"settings-language\":\"Language\",\"settings-preferred-language\":\"Preferred Language\",\"settings-language-reload\":\"Will update after reloading.\",\"licenses\":\"Licenses\",\"source-code\":\"Source Code\",\"auto\":\"auto\",\"zoom-in\":\"Zoom In\",\"zoom-out\":\"Zoom Out\",\"radius\":\"Radius\",\"constrain-proportions\":\"Constrain Proportions\",\"width\":\"Width\",\"height\":\"Height\",\"opacity\":\"Opacity\",\"red\":\"Red\",\"green\":\"Green\",\"blue\":\"Blue\",\"eraser\":\"Eraser\",\"center\":\"Center\",\"background\":\"Background\",\"scaling-algorithm\":\"Scaling Algorithm\",\"algorithm-smooth\":\"Smooth\",\"algorithm-pixelated\":\"Pixelated\",\"preview\":\"Preview\"}","// @ts-ignore\nimport {english, languages, loadLanguage, TTranslationCode} from '../../languages/languages';\n\nexport const LS_LANGUAGE_KEY = 'klecks-language';\n\nexport class LanguageStrings {\n    private data: any;\n    private listeners: (() => void)[] = [];\n    private code: string;\n\n    // --- public ----\n    constructor () {\n        // need to use setLanguage for a different language\n        this.data = {...english};\n        this.code = 'en';\n    }\n\n    async setLanguage (langCode: string): Promise<void> {\n        if (langCode === 'en') {\n            this.data = {...english};\n        } else {\n            this.data = {...english, ...(await loadLanguage(langCode))};\n        }\n        this.code = langCode;\n        document.documentElement.setAttribute(\"lang\", langCode);\n        this.listeners.forEach(item => {\n            item();\n        });\n    }\n\n    get (code: TTranslationCode): string {\n        if (!(code in this.data)) {\n            throw new Error('translation code doesn\\'t exist: ' + code);\n        }\n        return this.data[code];\n    }\n\n    getLanguage (): {code: string; name: string} {\n        return languages.find(item => {\n            return item.code === this.code;\n        })\n    }\n\n    getCode (): string {\n        return this.code;\n    }\n\n    // get notified on language change\n    subscribe (subscriber: () => void) {\n        if (this.listeners.includes(subscriber)) {\n            return;\n        }\n        this.listeners.push(subscriber);\n    }\n\n    unsubscribe (subscriber: () => void) {\n        for (let i = 0; i < this.listeners.length; i++) {\n            if (subscriber === this.listeners[i]) {\n                this.listeners.splice(i, 1);\n                return;\n            }\n        }\n    }\n}\n\nlet activeLanguageCode: string = 'en'; // active language code\n{\n    const langs: string[] = []; // from highest to lowest priority\n    const navLangs = navigator.languages ? navigator.languages : [navigator.language];\n    navLangs.forEach(item => {\n        const split = item.split('-');\n        langs.push(item);\n        if (split.length === 2) {\n            langs.push(split[0]);\n        }\n    });\n    try {\n        if (localStorage.getItem(LS_LANGUAGE_KEY)) {\n            langs.unshift(localStorage.getItem(LS_LANGUAGE_KEY));\n        }\n    } catch (e) {\n        // likely cookies disabled in Safari\n    }\n    for (let i = 0; i < langs.length; i++) {\n        const lang = langs[i];\n        if (languages.find(item => {\n            return item.code.toLowerCase() === lang.toLowerCase();\n        })) {\n            activeLanguageCode = lang;\n            break;\n        }\n    }\n}\n\nexport const languageStrings = new LanguageStrings();\n\nexport const LANG = (code: TTranslationCode | null, replace?: {[key: string]: string}): string => {\n    if (replace) {\n        let result = languageStrings.get(code);\n        const keyArr = Object.keys(replace);\n        keyArr.forEach(key => {\n            result = result.replace(`{${key}}`, replace[key]);\n        });\n        return result;\n    } else {\n        return languageStrings.get(code);\n    }\n};\n\nexport const initLANG = () => languageStrings.setLanguage(activeLanguageCode);","import {dialogCounter} from './modal-count';\nimport {BB} from '../../../bb/bb';\n// @ts-ignore\nimport checkImg from 'url:~/src/app/img/ui/check.svg';\n// @ts-ignore\nimport cancelImg from 'url:~/src/app/img/ui/cancel.svg';\nimport {LANG} from '../../../language/language';\nimport {IKeyString} from '../../../bb/bb.types';\n\nwindow.onscroll = (e) => {\n    e.preventDefault();\n}\n\nexport function popup (\n    p: {\n        target: HTMLElement;\n        div?: HTMLElement; // node with content\n        message: string; // can be html\n        callback?: (result: string) => void;\n        buttons?: string[]; // \"Ok\", and \"Cancel\" will be automatically translated\n        primaries?: string[];\n        type?: 'error' | 'warning' | 'upload' | 'ok'; // todo\n        closefunc?: (f: () => void) => void; // returns a function you can call to close (Cancel) the dialog\n        style?: IKeyString;\n        clickOnEnter?: string; // name of button - will be clicked if enter key pressed\n        autoFocus?: false | string; // name of  to automatically focus - default 'Ok' - false -> none\n        ignoreBackground?: boolean; // deafult false; if true clicking on background doesn't close\n    }\n): void {\n    dialogCounter.increase();\n    let isClosed = false;\n\n\n    // need this extra layer because chrome mobile otherwise scrolls the page and then glitches as the address bar goes away\n    const rootRootEl = BB.el({\n        parent: document.body,\n        css: {\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            right: '0',\n            bottom: '0',\n            overflow: 'hidden',\n        }\n    });\n    const rootEl = BB.el({\n        parent: rootRootEl,\n        className: 'kl-popup',\n    });\n\n    const scrollContent = BB.el({\n        parent: rootEl,\n        css: {\n            width: '100%',\n            minHeight: '100%',\n            // padding: '10px 0',\n            position: 'relative',\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'center',\n            alignItems: 'center',\n        }\n    });\n\n    const bgEl = BB.el({\n        parent: scrollContent,\n        onClick: () => {\n            if (p.ignoreBackground) {\n                return;\n            }\n            close('Cancel');\n        },\n        css: {\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            zIndex: '0',\n            width: '100%',\n            height: '100%',\n        }\n    });\n\n    const titleHeight = 40;\n    const xButton = BB.el({\n        tagName: 'button',\n        className: 'popup-x',\n        content: `<img alt=\"${LANG('modal-close')}\" height=\"20\" src=\"${cancelImg}\">`,\n        title: LANG('modal-close'),\n        onClick: () => {\n            close('Cancel');\n        },\n        css: {\n            width: titleHeight + 'px',\n            height: titleHeight + 'px',\n            lineHeight: titleHeight + 'px',\n            position: 'absolute',\n            right: '0',\n            top: '0',\n            background: 'none',\n            boxShadow: 'none',\n        }\n    });\n\n    const boxClasses = ['kl-popup-box'];\n    boxClasses.push('kl-popup-box--sm');\n    const boxEl = BB.el({\n        content: [\n            xButton,\n            BB.el({\n                content:p.message,\n                css: {\n                    marginBottom: p.div ? '10px' : null,\n                    marginRight: '15px',\n                }\n            }),\n            p.div,\n        ],\n        className: boxClasses.join(' '),\n        css: p.style ? p.style : null,\n    });\n\n    scrollContent.append(\n        BB.el({\n            css: {\n                flex: '0.5',\n            }\n        }),\n        boxEl,\n        BB.el({\n            css: {\n                flex: '1',\n            }\n        })\n    );\n\n    if (p.type === 'error') {\n        BB.addClassName(boxEl, 'poperror');\n    }\n    if (p.type === 'ok') {\n        BB.addClassName(boxEl, 'popok');\n    }\n    if (p.type === 'warning') {\n        BB.addClassName(boxEl, 'popwarning');\n    }\n    if (p.type === 'upload') {\n        BB.addClassName(boxEl, 'popupload');\n    }\n\n    const keyListener = new BB.KeyListener({\n        onDown: function(keyStr, e, comboStr) {\n            if (isClosed) {\n                return;\n            }\n            if (clickOnEnterBtn && comboStr === 'enter' && !BB.isInputFocused()) {\n                e.stopPropagation();\n                setTimeout(function() {\n                    clickOnEnterBtn.click();\n                }, 10);\n            }\n            if (comboStr === 'esc') {\n                e.stopPropagation();\n                close('Cancel');\n            }\n        }\n    });\n    // prevent ctrl scroll -> zooming page\n    const wheelPrevent = (event) => {\n        if (keyListener.isPressed('ctrl')) {\n            event.preventDefault();\n        }\n    };\n    BB.addEventListener(rootEl, 'wheel', wheelPrevent);\n    rootEl.onclick = BB.handleClick;\n\n    let autoFocus = null;\n    if (p.autoFocus) {\n        autoFocus = p.autoFocus;\n    } else if (p.autoFocus === false) {\n        autoFocus = null;\n    } else {\n        autoFocus = 'Ok';\n    }\n\n    const buttonRowEl = p.buttons && p.buttons.length > 0 ? BB.el({\n        parent: boxEl,\n        css: {\n            display: 'flex',\n            flexWrap: 'wrap',\n            justifyContent: 'flex-end',\n            marginTop: '12px', // 8px already via buttons\n            marginLeft: '-8px',\n        }\n    }) : null;\n    let clickOnEnterBtn;\n    const btnElArr = [];\n    if (p.buttons) {\n        p.buttons.forEach(buttonName => {\n            const btnClasses = ['kl-popup__btn'];\n            if (buttonName === 'Ok' || (p.primaries && p.primaries.includes(buttonName))) {\n                btnClasses.push('kl-button-primary');\n            }\n            let iconUrl;\n            let label = buttonName;\n            if (buttonName === 'Ok') {\n                label = LANG('modal-ok');\n                iconUrl = checkImg;\n            }\n            if (buttonName === 'Cancel') {\n                label = LANG('modal-cancel');\n                iconUrl = cancelImg;\n            }\n            let iconImg = null;\n            if (iconUrl) {\n                iconImg = BB.el({\n                    tagName: 'img',\n                    custom: {\n                        src: iconUrl,\n                        height: '17',\n                    }\n                });\n            }\n            const btn = BB.el({\n                parent: buttonRowEl,\n                tagName: 'button',\n                className: btnClasses.join(' '),\n                content: [iconImg, label],\n                onClick: () => {\n                    close(buttonName);\n                },\n            });\n            btnElArr.push(btn);\n            if (autoFocus === buttonName) {\n                setTimeout(() => {\n                    btn.focus();\n                    rootEl.scrollTo(0, 0);\n                }, 10);\n                setTimeout(() => {\n                    // safari needs a separate timeout\n                    rootEl.scrollTo(0, 0);\n                }, 20);\n            }\n            if (buttonName === p.clickOnEnter) {\n                clickOnEnterBtn = btn;\n            }\n        });\n    }\n\n    function close (value: string) {\n        if (isClosed) {\n            return;\n        }\n\n        isClosed = true;\n        BB.clearSelection();\n        document.body.removeChild(rootRootEl);\n        dialogCounter.decrease();\n        BB.destroyEl(xButton);\n        BB.destroyEl(bgEl);\n        keyListener.destroy();\n        BB.removeEventListener(rootEl, 'wheel', wheelPrevent);\n        rootEl.onclick = null;\n        btnElArr.forEach(item => {\n            BB.destroyEl(item);\n        });\n        btnElArr.splice(0, btnElArr.length);\n\n        if (p.callback) {\n            p.callback(value);\n        }\n    }\n\n    if (p.closefunc) {\n        p.closefunc(function () {\n            close('Cancel');\n        });\n    }\n\n}\n\n\n/**\n * popups that fill whole height, with some padding.\n * currently only used for iframe popups.\n *\n * p = {\n *      title: DOM Element | string, // optional (todo allow string)\n *      icon: 'ok', // optional todo\n *      content: DOM Element, // optional\n *      buttonArr: [ // optional todo\n *          'Ok',\n *          'Cancel'\n *      ],\n *      autoFocus: string | false, //todo\n *      clickOnEnter: string, //todo\n *      onClose: function(result: string), // optional (todo result)\n *\n *      //size and position\n *      width: 500,\n *      isMaxHeight: boolean //todo, currently always true\n * }\n *\n * @param p\n * @constructor\n */\nexport const Popup = function(p) {\n    dialogCounter.increase();\n    const parent = document.body;\n    const div = BB.el({\n        parent: parent,\n        className: 'g-root',\n        css: {\n            position: 'fixed',\n            left: '0',\n            top: '0',\n            bottom: '0',\n            right: '0',\n            background: 'rgba(0, 0, 0, 0.45)',\n            overflow: 'auto',\n            animationName: 'consoleIn',\n            animationDuration: '0.3s',\n            animationTimingFunction: 'ease-out'\n        }\n    });\n    div.onclick = BB.handleClick;\n\n    let updateInterval;\n\n    function close() {\n        dialogCounter.decrease();\n        div.onclick = null;\n        parent.removeChild(div);\n        clearInterval(updateInterval);\n        window.removeEventListener('resize', updatePos);\n        keyListener.destroy();\n        BB.destroyEl(xButton);\n        BB.destroyEl(bgEl);\n        if (p.onClose) {\n            p.onClose();\n        }\n    }\n\n    //background element registering clicks\n    const bgEl = BB.el({\n        parent: div,\n        css: {\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            bottom: '0',\n            right: '0'\n        },\n        onClick: close\n    });\n\n    //the actual popup box\n    const popupEl = BB.el({\n        parent: div,\n        css: {\n            position: 'absolute',\n            width: (BB.isCssMinMaxSupported() ?\n                'min(calc(100% - 40px), ' + (p.width ? p.width : 400) + 'px)' :\n                (p.width ? p.width : 400) + 'px'),\n            height: 'calc(100% - 40px)',\n            background: '#eee',\n            borderRadius: '10px',\n            overflow: 'hidden',\n            boxShadow: 'rgba(0, 0, 0, 0.25) 0px 5px 60px'\n        }\n    });\n\n    //x and y position via script. flex not powerful enough imo\n    function updatePos() {\n        const elW = popupEl.offsetWidth;\n        const elH = popupEl.offsetHeight;\n\n        BB.css(popupEl, {\n            left: Math.max(0, (window.innerWidth - elW) / 2) + 'px',\n            top: Math.max(20, (window.innerHeight - elH) / 2 - (elH * 0.20)) + 'px'\n        });\n    }\n    //todo also update when popup changes size - resizeobserver and fallback\n    //updateInterval = setInterval(updatePos, 100);\n    updatePos();\n    window.addEventListener('resize', updatePos);\n\n    //title row in popup\n    const titleHeight = 40;\n    const titleEl = BB.el({\n        parent: popupEl,\n        css: {\n            height: titleHeight + 'px',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            paddingLeft: (titleHeight / 2) + 'px'\n        }\n    });\n    if (p.title) {\n        titleEl.appendChild(p.title);\n    }\n    const xButton = BB.el({\n        parent: titleEl,\n        tagName: 'button',\n        className: 'popup-x',\n        content: `<img alt=\"${LANG('modal-close')}\" height=\"20\" src=\"${cancelImg}\">`,\n        title: LANG('modal-close'),\n        onClick: close,\n        css: {\n            width: titleHeight + 'px',\n            height: titleHeight + 'px',\n            lineHeight: titleHeight + 'px',\n            background: 'none',\n            boxShadow: 'none',\n        },\n        custom: {\n            tabindex: '0',\n        }\n    });\n\n    const contentEl = BB.el({\n        parent: popupEl,\n        css: {\n            height: 'calc(100% - ' + titleHeight + 'px)'\n        }\n    });\n    if (p.content) {\n        contentEl.appendChild(p.content);\n    }\n\n    const keyListener = new BB.KeyListener({\n        onDown: function(keyStr, e) {\n            if (keyStr === 'esc') {\n                e.stopPropagation();\n                close();\n            }\n        }\n    });\n\n\n    // --- interface ---\n    this.close = function() {\n        close();\n    };\n};","import {BB} from '../../../bb/bb';\n\n/**\n * Checkbox - with label\n */\nexport class Checkbox {\n\n    private element: HTMLElement;\n    private check: HTMLInputElement;\n\n    // --- public ---\n\n    constructor (params: {\n        init?: boolean; // default false\n        label: string;\n        callback: (boolean) => void;\n        allowTab?: boolean; // default false\n        title?: string;\n        doHighlight?: boolean; // default false\n        css?: any;\n    }) {\n        this.element = BB.el({\n            className: 'kl-checkbox'\n        });\n\n        const innerEl = BB.el({\n            parent: this.element,\n            tagName: 'label',\n            className: 'kl-checkbox__inner'\n        });\n\n        this.check = BB.el({\n            parent: innerEl,\n            tagName: 'input',\n            css: {\n                marginLeft: '0',\n                display: 'inline-block'\n            },\n            custom: {\n                type: 'checkbox'\n            }\n        }) as HTMLInputElement;\n        this.check.checked = params.init;\n        if (params.doHighlight && this.check.checked) {\n            BB.addClassName(this.element, 'kl-checkbox--highlight');\n        }\n        if (!params.allowTab) {\n            this.check.tabIndex = -1;\n        }\n\n        if (params.title) {\n            innerEl.title = params.title;\n        }\n\n        const label = document.createElement('div');\n        label.style.display = 'inline-block';\n        label.innerHTML = params.label;\n        (label as any).allowClick = true;\n        innerEl.appendChild(label);\n\n        this.check.onchange = () => {\n            if (params.doHighlight) {\n                if (this.check.checked) {\n                    BB.addClassName(this.element, 'kl-checkbox--highlight');\n                } else {\n                    BB.removeClassName(this.element, 'kl-checkbox--highlight');\n                }\n            }\n            params.callback(this.check.checked);\n            setTimeout(() => {\n                this.check.blur();\n            }, 0);\n        };\n        if (params.css) {\n            BB.css(this.element, params.css);\n        }\n    }\n\n    getValue(): boolean {\n        return this.check.checked;\n    }\n\n    getElement(): HTMLElement {\n        return this.element;\n    }\n\n    destroy() {\n        this.check.onchange = null;\n    }\n\n}\n","import {BB} from '../../../bb/bb';\nimport {IKeyString} from '../../../bb/bb.types';\n\nexport const input = function (params: {\n    type?: 'button' | 'checkbox' | 'number' | 'text'; // default text\n    min?: number;\n    max?: number;\n    callback: (val: string) => void;\n    init: string | number;\n    css?: IKeyString;\n}) {\n    const result = document.createElement('input');\n    if (params.type) {\n        try {\n            result.type = params.type;\n        } catch(e) {} // ie can't deal with number\n    } else {\n        result.type = 'text';\n    }\n    if (params.min !== undefined) {\n        result.min = '' + params.min;\n    }\n    if (params.max !== undefined) {\n        result.max = '' + params.max;\n    }\n    result.value = '' + params.init;\n    if (params.callback) {\n        result.onchange = function() {\n            params.callback(result.value);\n        };\n    }\n    if (params.css) {\n        BB.css(result, params.css);\n    }\n\n    return result;\n};","import {BB} from '../../../bb/bb';\nimport {IKeyString} from '../../../bb/bb.types';\n\n/**\n * A select dropdown\n */\nexport class Select {\n\n    private selectEl: HTMLSelectElement;\n    private optionArr: ([string, string] | null)[]; // [value, label]\n    private changeListener: (event) => void;\n    private onChange: (val: string) => void;\n\n    \n    // --- public ---\n    constructor (p: {\n        isFocusable?: boolean; // default false\n        optionArr: ([string, string] | null)[], // [value, label]\n        initValue?: string; // default null\n        onChange: (val: string) => void;\n        css?: IKeyString;\n        title?: string;\n    }) {\n        this.selectEl = BB.el({\n            tagName: 'select',\n            title: p.title,\n            css: {\n                cursor: 'pointer',\n                fontSize: '15px',\n                padding: '3px',\n                background: '#fff', // makes safari pay attention to font-size\n                //webkitAppearance: 'none'\n                colorScheme: 'only light', // chrome doesn't properly invert the text color\n            }\n        }) as HTMLSelectElement;\n        if (p.css) {\n            BB.css(this.selectEl, p.css);\n        }\n\n        const isFocusable = p.isFocusable;\n        if (!isFocusable) {\n            this.selectEl.tabIndex = -1;\n        }\n        this.optionArr = p.optionArr;\n        for (let i = 0; i < this.optionArr.length; i++) {\n            if (this.optionArr[i] === null) {\n                continue;\n            }\n            const option = document.createElement('option');\n            option.value = this.optionArr[i][0];\n            option.textContent = this.optionArr[i][1];\n            this.selectEl.append(option);\n        }\n        this.onChange = p.onChange;\n        this.changeListener = (e) => {\n            if (!isFocusable) {\n                this.selectEl.blur();\n            }\n            this.onChange(this.selectEl.value);\n        };\n        this.selectEl.addEventListener('change', this.changeListener);\n        this.selectEl.value = 'initValue' in p ? p.initValue : null;\n    }\n\n    setValue (val) {\n        this.selectEl.value = val;\n    }\n\n    getValue () {\n        return this.selectEl.value;\n    }\n\n    setDeltaValue (delta) {\n        let index = 0;\n        for (let i = 0; i < this.optionArr.length; i++) {\n            if ('' + this.optionArr[i][0] === this.selectEl.value) {\n                index = i;\n                break;\n            }\n        }\n        index = Math.max(0, Math.min(this.optionArr.length -1, index + delta));\n        this.selectEl.value = this.optionArr[index][0];\n        this.onChange(this.selectEl.value);\n    }\n\n    getElement () {\n        return this.selectEl;\n    }\n\n    destroy = () => {\n        this.selectEl.removeEventListener('change', this.changeListener);\n    }\n    \n}\n","import {BB} from '../../../bb/bb';\n\n\n/**\n * Toggle button with an image\n *\n * p = {\n *     initValue: boolean,\n *     title: string,\n *     isRadio: boolean, // if true, can't click when active\n *     onChange: function(boolean)\n * }\n *\n * @param p\n * @constructor\n */\nexport const ImageToggle = function(p) {\n    let isActive = !!p.initValue;\n    const div = BB.el({\n        className: 'image-toggle',\n        title: p.title,\n        css: {\n            backgroundImage: \"url('\" + p.image + \"')\"\n        },\n        onClick: function(e) {\n            e.preventDefault();\n            if (p.isRadio && isActive) {\n                return;\n            }\n            isActive = !isActive;\n            update();\n            p.onChange(isActive);\n        },\n    });\n\n    function update() {\n        if (isActive) {\n            BB.addClassName(div, 'image-toggle-active');\n        } else {\n            BB.removeClassName(div, 'image-toggle-active');\n        }\n    }\n\n    update();\n\n    // --- interface ---\n    this.setValue = function(b) {\n        isActive = !!b;\n        update();\n    };\n    this.getElement = function() {\n        return div;\n    };\n    this.getValue = function() {\n        return isActive;\n    }\n\n};","import {BB} from '../../../bb/bb';\nimport {ImageToggle} from './image-toggle';\n\n/**\n * Radio input group. each one has an image\n *\n * p = {\n *     optionArr: {\n *         id: string,\n *         title: string,\n *         image: string,\n *     }[],\n *     initId: string,\n *     sizePx: number,\n *     onChange: function(id: string): void\n * }\n *\n * @param p\n */\nexport const ImageRadioList = function(p) {\n\n    const div = BB.el({\n        className: 'image-radio-wrapper',\n        css: {\n            display: 'flex'\n        }\n    });\n\n    let activeIndex;\n    const optionArr = [];\n\n    function select(index, id) {\n        activeIndex = index;\n        for (let i = 0; i < optionArr.length; i++) {\n            optionArr[i].setValue(i === activeIndex);\n        }\n        p.onChange(id);\n    }\n\n    function createOption(index, o) {\n        if (o.id === p.initId) {\n            activeIndex = index;\n        }\n        const radioEl = new ImageToggle({\n            image: o.image,\n            title: o.title,\n            initValue: o.id === p.initId,\n            isRadio: true,\n            onChange: function() {\n                select(index, o.id);\n            }\n        });\n        div.appendChild(radioEl.getElement());\n\n        return radioEl;\n\n    }\n\n    for (let i = 0; i < p.optionArr.length; i++) {\n        optionArr.push(createOption(i, p.optionArr[i]));\n    }\n\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n    this.getValue = function() {\n        return p.optionArr[activeIndex].id;\n    };\n};","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"5H9IS\");","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport iconImg from 'url:~/src/app/img/ui/brush-pressure.svg';\nimport {LANG} from '../../../language/language';\n\n\n/**\n * small toggle button with a pen icon - representing toggling pressure sensitivity\n * @param isChecked - boolean - initial value\n * @param changeCallback - function(isChecked boolean) - called on change\n * @returns {HTMLElement} - the toggle button\n */\nexport const penPressureToggle = function(isChecked, changeCallback) {\n\n    const toggleDiv = BB.el({\n        css: {\n            cssFloat: 'right',\n            borderRadius: '3px',\n            width: '18px',\n            height: '18px',\n            backgroundImage: 'url(\"' + iconImg + '\")',\n            backgroundSize: 'contain',\n            backgroundRepeat: 'no-repeat',\n            cursor: 'pointer',\n            boxSizing: 'border-box',\n            colorScheme: 'only light',\n        }\n    });\n\n    if (!BB.hasPointerEvents) {\n        toggleDiv.style.display = 'none';\n    }\n\n    function redraw() {\n        if (isChecked) {\n            BB.css(toggleDiv, {\n                backgroundColor: '#fff',\n                opacity: '0.9',\n                border: '1px solid var(--active-highlight-color)'\n            });\n        } else {\n            BB.css(toggleDiv, {\n                backgroundColor: 'transparent',\n                opacity: '0.5',\n                border: '1px solid #666'\n            });\n        }\n    }\n\n    toggleDiv.title = LANG('brush-toggle-pressure');\n    toggleDiv.onclick = function() {\n        isChecked = !isChecked;\n        redraw();\n        changeCallback(isChecked);\n    };\n\n    redraw();\n    changeCallback(isChecked);\n\n    return toggleDiv;\n};","\n\n/**\n * to make sliders more finegrained.\n * @param deltaY number - how far pointer moved away vertically since down\n * @returns {number} the factor 0-1. 0 -> infinite movement for change of 1. 1 -> 1px for change of 1\n */\nexport const calcSliderFalloffFactor = function(deltaY, isRightButton) {\n    let result = Math.min(10, 1 + Math.pow(Math.floor(deltaY / 50), 2));\n    if (isRightButton) {\n        result *= 2;\n    }\n    return 1 / result;\n};\n","import {BB} from '../../../bb/bb';\nimport {calcSliderFalloffFactor} from './slider-falloff';\nimport {IKlSliderConfig} from '../../kl.types';\nimport {languageStrings} from '../../../language/language';\n\n\n\n/**\n * big slider, e.g. used for brush size\n *\n * p = {\n *      label: 'Size',\n *      width: 500,\n *      height: 20,\n *      theme: 'compact-light',\n *      min: 0,\n *      max: 100,\n *      initValue: 10,\n *      resolution: 600, // if you want spline.find to use a different resolution\n *      curve: 'quadratic' | [...], // optional. array is BB.SplineInterpolator points. 0-1\n *      formatFunc: function(value) { // optional\n *          return Math.round(value);\n *      },\n *      onChange: function(value) {},\n *      isChangeOnFinal: true,\n *      eventResMs: 123,\n *      isEnabled?: boolean, // default = true\n * }\n *\n * Values can be spline interpolated\n * On change callback can be debounced\n *\n * @param p - obj\n * @constructor\n */\nexport const KlSlider = function (p) {\n    const _this = this;\n    let isEnabled = p.isEnabled !== false;\n    let useSpline = !!p.curve;\n    let splineInterpolator;\n\n    if (!p.label || !p.onChange) {\n        throw 'PcSlider missing params';\n    }\n    if (p.min != 0 && p.max != 0 && p.initValue != 0) {\n        if (!p.min || !p.max || !p.initValue) {\n            throw 'PcSlider broken params';\n        }\n    }\n    if (p.min >= p.max) {\n        throw 'PcSlider broken params';\n    }\n\n    const elementWidth = p.width;\n    const elementHeight = p.height;\n    const resolution = p.resolution ? p.resolution : elementWidth;\n    let min = p.min;\n    let max = p.max;\n    const onChange = p.onChange;\n    const isChangeOnFinal = !!p.isChangeOnFinal;\n    const formatFunc = p.formatFunc;\n    const eventResMs = p.eventResMs;\n\n    if (useSpline) {\n        const curveArr = p.curve === 'quadratic' ? BB.quadraticSplineInput(min, max, 0.1) : p.curve;\n        splineInterpolator = new BB.SplineInterpolator(curveArr);\n    }\n\n    function toLinearValue(value) {\n        if (useSpline) {\n            return splineInterpolator.findX(value, Math.floor(resolution * 1.5));\n        }\n        return (value - min) / (max - min);\n    }\n\n    function toValue(pLinearValue) {\n        let result = min + pLinearValue * (max - min);\n        if (useSpline) {\n            result = splineInterpolator.interpolate(pLinearValue);\n        }\n        return result;\n    }\n\n    const div = BB.el({\n        className: 'sliderWrapper',\n        css: {\n            overflow: 'hidden',\n            position: 'relative',\n            width: elementWidth + 'px',\n            height: elementHeight + 'px',\n            userSelect: 'none'\n        }\n    });\n    const labelCaption = p.label;\n    const label = document.createElement('div');\n    const control = document.createElement('div');\n    const controlInner = document.createElement('div');\n    let linearValue = toLinearValue(p.initValue); //0 - 1\n\n    div.appendChild(control);\n    div.appendChild(label);\n    control.appendChild(controlInner);\n    control.className = 'sliderInner';\n\n\n    div.oncontextmenu = function () {\n        return false;\n    };\n    //control.style.backgroundColor = \"#aaa\";\n    label.innerHTML = labelCaption;\n\n    control.style.position = 'absolute';\n    control.style.left = '0';\n    control.style.top = '0';\n    control.style.width = (linearValue * elementWidth) + 'px';\n    control.style.height = elementHeight + 'px';\n\n    const labelFontSize = elementHeight - 14;\n    BB.css(label, {\n        position: 'absolute',\n        left: '7px',\n        top: (elementHeight / 2 - labelFontSize / 2 + 1) + 'px',\n        lineHeight: labelFontSize + 'px',\n        fontSize: labelFontSize + 'px',\n        pointerEvents: 'none'\n    });\n\n    function updateEnable (): void {\n        if (isEnabled) {\n            BB.css(div, {\n                opacity: null,\n                pointerEvents: null,\n            });\n        } else {\n            BB.css(div, {\n                opacity: '0.5',\n                pointerEvents: 'none',\n            });\n        }\n    }\n    updateEnable();\n\n    function getOutsideVal() {\n        let result = min + linearValue * (max - min);\n        if (useSpline) {\n            result = splineInterpolator.interpolate(linearValue);\n        }\n        return result;\n    }\n\n    function updateLabel() {\n        let outVal = toValue(linearValue);\n        outVal = formatFunc ? formatFunc(outVal) : parseInt(outVal);\n        outVal = outVal.toLocaleString(languageStrings.getCode());\n        label.innerHTML = labelCaption + '&nbsp;&nbsp;<span style=\"font-weight:bold\">' + outVal + '</span>';\n        control.style.width = (linearValue * elementWidth) + 'px';\n    }\n\n    let lastCallbackTime = 0;\n    function emit(isFinal) {\n        if (!isFinal && isChangeOnFinal) {\n            return;\n        }\n        if (eventResMs && !isFinal) {\n            const now = performance.now();\n            if (now - lastCallbackTime >= eventResMs) {\n                lastCallbackTime = now;\n                onChange(getOutsideVal());\n            }\n        } else {\n            onChange(getOutsideVal());\n        }\n    }\n\n    let virtualVal;\n    function onPointer(event) {\n        event.eventPreventDefault();\n\n        if (!isEnabled) {\n            return;\n        }\n\n        if (event.type === 'pointerdown') {\n            div.className = 'sliderWrapper sliderWrapperActive';\n\n            if (event.button === 'left') {\n                linearValue = event.relX / elementWidth;\n                linearValue = Math.max(0, Math.min(1, linearValue));\n                updateLabel();\n                emit(false);\n            }\n            virtualVal = linearValue;\n        }\n\n        if (event.type === 'pointermove' && ['left', 'right'].includes(event.button)) {\n\n            let deltaX = event.dX;\n            const deltaY = Math.abs(event.pageY - event.downPageY);\n            const factor = calcSliderFalloffFactor(deltaY, event.button === 'right');\n            deltaX *= factor;\n            deltaX /= elementWidth;\n\n            virtualVal += deltaX;\n            linearValue = Math.max(0, Math.min(1, virtualVal));\n\n            updateLabel();\n            emit(false);\n        }\n\n        if (event.type === 'pointerup') {\n            div.className = 'sliderWrapper';\n            emit(true);\n        }\n\n    }\n\n    let pointerListener;\n    const pointerListenerTimeout = setTimeout(() => {\n        pointerListener = new BB.PointerListener({\n            target: div,\n            maxPointers: 1,\n            fixScribble: true,\n            onPointer: onPointer,\n            onWheel: function(event) {\n                if (useSpline) {\n                    linearValue += -event.deltaY * (splineInterpolator.getLastX() - splineInterpolator.getFirstX()) / 40;\n                    linearValue = Math.max(splineInterpolator.getFirstX(), Math.min(splineInterpolator.getLastX(), linearValue));\n                } else {\n                    linearValue += -event.deltaY / 40;\n                    linearValue = Math.max(0, Math.min(1, linearValue));\n                }\n                updateLabel();\n                onChange(getOutsideVal());\n            }\n        });\n        updateLabel();\n    }, 1);\n\n\n    // --- interface ---\n    this.increaseValue = function (f) {\n        linearValue = Math.min(1, linearValue + Math.abs(f));\n        updateLabel();\n        onChange(getOutsideVal());\n    };\n    this.decreaseValue = function (f) {\n        linearValue = Math.max(0, linearValue - Math.abs(f));\n        updateLabel();\n        onChange(getOutsideVal());\n    };\n    this.setValue = function(v) {\n        linearValue = toLinearValue(v);\n        updateLabel();\n    };\n    this.getValue = function () {\n        return getOutsideVal();\n    };\n    this.update = function(config: IKlSliderConfig): void {\n        min = config.min;\n        max = config.max;\n        useSpline = !!config.curve;\n        if (useSpline) {\n            const curveArr = config.curve === 'quadratic' ? BB.quadraticSplineInput(min, max, 0.1) : config.curve;\n            splineInterpolator = new BB.SplineInterpolator(curveArr);\n        } else {\n            splineInterpolator = null;\n        }\n        _this.setIsEnabled(!config.isDisabled);\n    };\n    this.setIsEnabled = function (e: boolean): void {\n        isEnabled = !!e;\n        updateEnable();\n    };\n\n    this.destroy = function() {\n        clearTimeout(pointerListenerTimeout);\n        if (pointerListener) {\n            pointerListener.destroy();\n        }\n    };\n\n    this.getElement = function() {\n        return div;\n    }\n\n};","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"la7yv\");","import {BB} from '../../../bb/bb';\nimport {input} from '../base-components/input';\nimport {popup} from './popup';\nimport {LANG} from '../../../language/language';\n// @ts-ignore\nimport copyImg from 'url:~/src/app/img/ui/copy.svg';\n\n/**\n * dialog for manually inputting the color\n * @param p {color: rgbObj, onClose: function(rgbObj | null)}\n * @constructor\n */\nexport const HexColorDialog = function (p) {\n\n    let lastValidRgb = new BB.RGB(p.color.r, p.color.g, p.color.b);\n\n    const div = BB.el({});\n\n    const previewEl = BB.el({\n        css: {\n            width: '20px',\n            height: '20px',\n            marginBottom: '10px',\n            boxShadow: 'inset 0 0 0 1px #fff, 0 0 0 1px #000',\n            background: '#' + BB.ColorConverter.toHexString(lastValidRgb),\n            colorScheme: 'only light',\n        }\n    });\n    div.appendChild(previewEl);\n\n\n    // --- Hex ---\n    const hexRowEl = BB.el({\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            marginBottom: '15px'\n        }\n    });\n    const hexLabel = BB.el({\n        content: LANG('mci-hex'),\n        css: {\n            width: '60px'\n        }\n    });\n    const hexInput = input({\n        init: '#' + BB.ColorConverter.toHexString(lastValidRgb),\n        css: {\n            width: '80px'\n        },\n        callback: function() {\n            let rgbObj = BB.ColorConverter.hexToRGB(hexInput.value);\n            if (rgbObj === null) {\n                rgbObj = lastValidRgb;\n                hexInput.value = '#' + BB.ColorConverter.toHexString(lastValidRgb);\n            } else {\n                lastValidRgb = rgbObj;\n            }\n            previewEl.style.background = '#' + BB.ColorConverter.toHexString(rgbObj);\n\n            for (let i = 0; i < rgbArr.length; i++) {\n                rgbArr[i].update();\n            }\n        }\n    });\n    const copyButton = BB.el({\n        tagName: 'button',\n        content: '<img src=\"' + copyImg + '\" height=\"20\"/>',\n        title: LANG('mci-copy'),\n        css: {\n            marginLeft: '10px'\n        },\n        onClick: function() {\n            hexInput.select();\n            document.execCommand('copy');\n        }\n    });\n    hexRowEl.appendChild(hexLabel);\n    hexRowEl.appendChild(hexInput);\n    hexRowEl.appendChild(copyButton);\n    div.appendChild(hexRowEl);\n    setTimeout(function () {\n        hexInput.focus();\n        hexInput.select();\n    }, 0);\n\n\n    // --- R G B ---\n    function createRgbInputRow(labelStr, attributeStr) {\n        const result: any = {};\n\n        const rowEl = BB.el({\n            css: {\n                display: 'flex',\n                alignItems: 'center',\n                marginTop: '5px',\n            }\n        });\n        const labelEl = BB.el({\n            content: labelStr,\n            css: {\n                width: '60px'\n            }\n        });\n\n        const inputEl = input({\n            init: lastValidRgb[attributeStr],\n            min: 0,\n            max: 255,\n            type: 'number',\n            css: {\n                width: '80px'\n            },\n            callback: function() {\n                if (inputEl.value === '' || parseFloat(inputEl.value) < 0 || parseFloat(inputEl.value) > 255) {\n                    result.update();\n                    return;\n                }\n                inputEl.value = '' + Math.round(parseFloat(inputEl.value));\n                lastValidRgb[attributeStr] = inputEl.value;\n                previewEl.style.background = '#' + BB.ColorConverter.toHexString(lastValidRgb);\n                hexInput.value = '#' + BB.ColorConverter.toHexString(lastValidRgb);\n            }\n        });\n\n        rowEl.appendChild(labelEl);\n        rowEl.appendChild(inputEl);\n        div.appendChild(rowEl);\n\n\n        result.update = function() {\n            inputEl.value = lastValidRgb[attributeStr];\n        };\n        return result;\n    }\n    const rgbArr = [];\n    rgbArr.push(createRgbInputRow(LANG('red'), 'r'));\n    rgbArr.push(createRgbInputRow(LANG('green'), 'g'));\n    rgbArr.push(createRgbInputRow(LANG('blue'), 'b'));\n\n\n    popup({\n        target: document.body,\n        message: `<b>${LANG('manual-color-input')}</b>`,\n        div: div,\n        autoFocus: false,\n        clickOnEnter: 'Ok',\n        buttons: ['Ok', 'Cancel'],\n        callback: function (resultStr) {\n            let rgbObj = null;\n            if (resultStr === 'Ok') {\n                rgbObj = BB.ColorConverter.hexToRGB(hexInput.value);\n            }\n            p.onClose(rgbObj);\n        }\n    });\n\n};","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"cTtMO\");","import {BB} from '../../../bb/bb';\nimport {HexColorDialog} from '../modals/color-slider-hex-dialog';\nimport {calcSliderFalloffFactor} from './slider-falloff';\n// @ts-ignore\nimport eyedropperImg from 'url:~/src/app/img/ui/tool-picker.svg';\nimport {LANG} from '../../../language/language';\n\n/**\n * big main HS+V color slider\n * 2 elements: slider, and colorpreview(output) + eyedropper\n *\n * p = {\n *     width: number,\n *     height: number, // hue slider and output height\n *     svHeight: number,\n *     startValue: rgb, // 0-255\n *     onPick: function(rgb)\n * }\n *\n * @param p\n * @constructor\n */\nexport const KlColorSlider = function (p) {\n\n    const _this = this;\n    let pickCallback = function(result?) {};\n    const div = document.createElement('div');\n    div.style.position = 'relative';\n    div.className = 'colorSlider';\n    const outputDiv = BB.el({\n        css: {\n            display: 'flex',\n            alignItems: 'center'\n        }\n    });\n    const width = p.width;\n    let svHeight = p.svHeight;\n    const height = p.height;\n    const emitColor = p.onPick;\n\n    let primaryColorRGB = {\n        r: parseInt(p.startValue.r, 10),\n        g: parseInt(p.startValue.g, 10),\n        b: parseInt(p.startValue.b, 10)\n    };\n    let primaryColorHSV = BB.ColorConverter.toHSV(p.startValue); // BB.HSV\n    let secondaryColorRGB = {r: 255, g: 255, b: 255};\n    let secondaryColorHSV = BB.ColorConverter._RGBtoHSV(secondaryColorRGB); // BB.HSV\n\n    const svWrapper = BB.el({});\n    const svSvg = new DOMParser().parseFromString('<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\"> <defs> <linearGradient id=\"value\" gradientTransform=\"rotate(90)\"> <stop offset=\"0\" stop-color=\"rgba(0,0,0,0)\"/> <stop offset=\"100%\" stop-color=\"rgba(0,0,0,1)\"/> </linearGradient> <linearGradient id=\"hue\" gradientTransform=\"rotate(0)\"> <stop offset=\"0\" stop-color=\"#fff\"/> <stop id=\"hue-stop\" offset=\"100%\" stop-color=\"#f00\"/> </linearGradient> </defs> <rect x=\"0\" y=\"0\" width=\"100\" height=\"100\" fill=\"url(\\'#hue\\')\"/> <rect x=\"0\" y=\"0\" width=\"100\" height=\"100\" fill=\"url(\\'#value\\')\"/></svg>', 'image/svg+xml').documentElement;\n    const hueStop = (svSvg as any).getElementById('hue-stop');\n    BB.setAttributes(hueStop, {\n        'stop-color': '#f0f'\n    });\n    BB.css(svSvg, {\n        width: width + 'px',\n        height: svHeight + 'px'\n    });\n    svWrapper.appendChild(svSvg);\n\n    const divH = document.createElement('div');\n    BB.css(divH, {\n        position: 'relative',\n        height: height + 'px'\n    });\n    const divPreview = document.createElement('div');\n    const controlH = document.createElement('div');\n\n    const enabled = true;\n\n    function updatePrimaryHSV(hsv) {\n        if (hsv.s === 0) {\n            primaryColorHSV = new BB.HSV(primaryColorHSV.h, hsv.s, hsv.v);\n        } else {\n            primaryColorHSV = new BB.HSV(hsv.h, hsv.s, hsv.v);\n        }\n    }\n\n    function createHueBg(targetEl) {\n        const im = new Image();\n        BB.css(im, {\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            display: 'none',\n            pointerEvents: 'none'\n        });\n        const cv = BB.canvas(width, height);\n        const ctx = cv.getContext('2d');\n        const gradH = ctx.createLinearGradient(0, 0, width, 0);\n        for (let i = 0; i < 1; i += 0.01) {\n            const col = BB.ColorConverter.toRGB(new BB.HSV(i * 360, 100, 100));\n            let ha = (parseInt('' + col.r)).toString(16);\n            let hb = (parseInt('' + col.g)).toString(16);\n            let hc = (parseInt('' + col.b)).toString(16);\n            if (ha.length === 1)\n                ha = '0' + ha;\n            if (hb.length === 1)\n                hb = '0' + hb;\n            if (hc.length === 1)\n                hc = '0' + hc;\n            gradH.addColorStop(i, '#' + ha + hb + hc);\n        }\n        ctx.fillStyle = gradH;\n        ctx.fillRect(0, 0, width, height);\n\n        targetEl.appendChild(im);\n        im.alt = 'hue';\n        im.src = cv.toDataURL('image/png');\n        im.style.display = 'block';\n    }\n\n\n    function updateSVCanvas() {\n        const rgb = BB.ColorConverter.toRGB(new BB.HSV(primaryColorHSV.h, 100, 100));\n        BB.setAttributes(hueStop, {\n            'stop-color': '#' + BB.ColorConverter.toHexString(rgb)\n        });\n    }\n\n    function updateSVPointer() {\n\n        const left = primaryColorHSV.s / 100 * width - 7;\n        const top = (1 - primaryColorHSV.v / 100) * svHeight - 6;\n        BB.css(pointerSV, {\n            left: left + 'px',\n            top: top + 'px'\n        });\n    }\n\n    function setColPreview() {\n        divPreview.style.backgroundColor = 'rgb(' + primaryColorRGB.r + ',' + primaryColorRGB.g + ',' + primaryColorRGB.b + ')';\n\n        if (BB.testIsWhiteBestContrast(primaryColorRGB)) {\n            BB.css(pickerButton, {\n                filter: 'invert(1)'\n            });\n            BB.css(hexButton, {\n                filter: 'invert(1)'\n            });\n        } else{\n            BB.css(pickerButton, {\n                filter: ''\n            });\n            BB.css(hexButton, {\n                filter: ''\n            });\n        }\n\n    }\n\n    updateSVCanvas();\n    div.style.width = width + 'px';\n    div.oncontextmenu = function () {\n        return false;\n    };\n\n    const SVContainer = document.createElement('div');\n    BB.css(SVContainer, {\n        width: width + 'px',\n        height: svHeight + 'px',\n        overflow: 'hidden',\n        display: 'block',\n        position: 'relative',\n        cursor: 'crosshair',\n        boxShadow: 'rgb(188, 188, 188) 0 0 0 1px'\n    });\n\n    const pointerSV = document.createElement('div');\n    BB.css(pointerSV, {\n        width: '12px',\n        height: '12px',\n        borderRadius: '6px',\n        position: 'absolute',\n        pointerEvents: 'none',\n        boxShadow: '0px 0px 0 1px #000, inset 0px 0px 0 1px #fff'\n    });\n\n    SVContainer.appendChild(svWrapper);\n    SVContainer.appendChild(pointerSV);\n    updateSVPointer();\n    div.appendChild(SVContainer);\n    div.appendChild(divH);\n    outputDiv.appendChild(divPreview);\n    BB.css(divPreview, {\n        display: 'flex',\n        justifyContent: 'space-between',\n        width: (height * 2.5) + 'px',\n        height: height + 'px',\n        //position: \"relative\",\n        boxShadow: 'rgb(188, 188, 188) 0 0 0 1px',\n        colorScheme: 'only light',\n    });\n\n    BB.css(divH, {\n        overflow: 'hidden',\n        position: 'relative',\n        width: width + 'px',\n        height: height + 'px',\n        cursor: 'ew-resize',\n        boxShadow: 'rgb(188, 188, 188) 0 0 0 1px',\n        marginTop: '1px',\n        marginBottom: '1px'\n    });\n\n    //divH.className = \"svSlider\";\n    BB.css(controlH, {\n        width: '1px',\n        height: height + 'px',\n        background: '#000',\n        borderLeft: '1px solid #fff',\n        position: 'absolute',\n        top: '0',\n        left: parseInt('' + (primaryColorHSV.h / 360 * width - 1)) + 'px'\n    });\n\n\n    const virtualHSV = {\n        h: 0,\n        s: 0,\n        v: 0\n    };\n    let svPointerListener;\n    let hPointerListener;\n\n\n    const pickerButton = BB.el({\n        title: LANG('eyedropper') + ' [Alt]',\n        className: 'color-picker-preview-button',\n        css: {\n            width: '30px',\n            height: '30px',\n            backgroundImage: 'url(' + eyedropperImg + ')',\n            backgroundRepeat:  'no-repeat',\n            backgroundSize: '70%',\n            backgroundPosition: 'center'\n        }\n    });\n    let isPicking = false;\n\n\n    pickerButton.onclick = function () {\n        if (isPicking === false) {\n            BB.removeClassName(pickerButton, 'color-picker-preview-button-hover');\n            BB.addClassName(pickerButton, 'color-picker-preview-button-active');\n            isPicking = true;\n            pickCallback(true);\n        } else {\n            pickCallback(false);\n            _this.pickingDone();\n        }\n    };\n    const pickerButtonPointerListener = new BB.PointerListener({\n        target: pickerButton,\n        onEnterLeave: function(isOver) {\n            if (isPicking) {\n                return;\n            }\n            if (isOver) {\n                BB.addClassName(pickerButton, 'color-picker-preview-button-hover');\n            } else {\n                BB.removeClassName(pickerButton, 'color-picker-preview-button-hover');\n            }\n        }\n    });\n    divPreview.appendChild(pickerButton);\n\n\n    const hexButton = BB.el({\n        content: '#',\n        className: 'color-picker-preview-button',\n        title: LANG('manual-color-input'),\n        css: {\n            height: '100%',\n            width: height + 'px',\n            lineHeight: height + 'px',\n            fontSize: (height * 0.65) + 'px'\n        },\n        onClick: function() {\n            HexColorDialog({\n                color: new BB.RGB(primaryColorRGB.r, primaryColorRGB.g, primaryColorRGB.b),\n                onClose: function(rgbObj) {\n                    if (!rgbObj) {\n                        return;\n                    }\n                    _this.setColor(rgbObj);\n                    emitColor(new BB.RGB(primaryColorRGB.r, primaryColorRGB.g, primaryColorRGB.b));\n                }\n            });\n        }\n    });\n    const hexButtonPointerListener = new BB.PointerListener({\n        target: hexButton,\n        onEnterLeave: function(isOver) {\n            if (isOver) {\n                BB.addClassName(hexButton, 'color-picker-preview-button-hover');\n            } else {\n                BB.removeClassName(hexButton, 'color-picker-preview-button-hover');\n            }\n        }\n    });\n    divPreview.appendChild(hexButton);\n\n    setColPreview();\n\n\n    setTimeout(function() {\n        createHueBg(divH);\n        divH.appendChild(controlH);\n        svPointerListener = new BB.PointerListener({\n            target: svWrapper,\n            maxPointers: 1,\n            fixScribble: true,\n            onPointer: function(event) {\n                if (event.type === 'pointerdown') {\n                    BB.css(SVContainer, {\n                        boxShadow: '0px 0px 0px 1px rgb(255,255,255)',\n                        zIndex: '1'\n                    });\n\n                    if (event.button === 'left') {\n\n                        virtualHSV.s = event.relX / width * 100;\n                        virtualHSV.v = 100 - event.relY / svHeight * 100;\n\n                        primaryColorHSV = new BB.HSV(primaryColorHSV.h, virtualHSV.s, virtualHSV.v);\n                        primaryColorRGB = BB.ColorConverter.toRGB(primaryColorHSV);\n\n                        updateSVPointer();\n                        setColPreview();\n                        emitColor(BB.ColorConverter.toRGB(primaryColorHSV));\n                    } else {\n                        virtualHSV.s = primaryColorHSV.s;\n                        virtualHSV.v = primaryColorHSV.v;\n                    }\n                }\n\n                if (event.type === 'pointermove' && ['left', 'right'].includes(event.button)) {\n\n                    let factor = 1;\n                    if (event.button === 'right') {\n                        factor = 0.5;\n                    }\n\n                    virtualHSV.s += event.dX / width * 100 * factor;\n                    virtualHSV.v -= event.dY / svHeight * 100 * factor;\n\n                    primaryColorHSV = new BB.HSV(primaryColorHSV.h, virtualHSV.s, virtualHSV.v);\n                    primaryColorRGB = BB.ColorConverter.toRGB(primaryColorHSV);\n                    updateSVPointer();\n                    setColPreview();\n                    emitColor(BB.ColorConverter.toRGB(primaryColorHSV));\n\n                }\n\n                if (event.type === 'pointerup') {\n                    BB.css(SVContainer, {\n                        boxShadow: '0 0 0 1px rgb(188, 188, 188)',\n                        zIndex: '0'\n                    });\n                }\n\n            }\n        });\n        hPointerListener = new BB.PointerListener({\n            target: divH,\n            maxPointers: 1,\n            fixScribble: true,\n            onPointer: function(event) {\n\n                if (event.type === 'pointerdown') {\n                    BB.css(divH, {\n                        boxShadow: '0px 0px 0px 1px rgba(255,255,255,1)'\n                    });\n\n                    if (event.button === 'left') {\n\n                        virtualHSV.h = event.relX / width * 359.99;\n\n                        primaryColorHSV = new BB.HSV(virtualHSV.h, primaryColorHSV.s, primaryColorHSV.v);\n                        primaryColorRGB = BB.ColorConverter.toRGB(primaryColorHSV);\n                        controlH.style.left = (Math.round(primaryColorHSV.h / 359.99 * width) - 1) + 'px';\n                        updateSVCanvas();\n                        setColPreview();\n                        emitColor(BB.ColorConverter.toRGB(primaryColorHSV));\n                    } else {\n                        virtualHSV.h = primaryColorHSV.h;\n                    }\n                }\n\n                if (event.type === 'pointermove' && ['left', 'right'].includes(event.button)) {\n\n                    const deltaY = Math.abs(event.pageY - event.downPageY);\n                    const factor = calcSliderFalloffFactor(deltaY, event.button === 'right');\n\n                    virtualHSV.h += event.dX / width * 359.99 * factor;\n\n                    if (event.button === 'right') {\n                        virtualHSV.h = virtualHSV.h % 359.99;\n                        if (virtualHSV.h < 0) {\n                            virtualHSV.h += 359.99;\n                        }\n                    }\n                    virtualHSV.h = Math.min(359.99, virtualHSV.h);\n                    primaryColorHSV = new BB.HSV(virtualHSV.h, primaryColorHSV.s, primaryColorHSV.v);\n                    primaryColorRGB = BB.ColorConverter.toRGB(primaryColorHSV);\n                    controlH.style.left = (Math.round(primaryColorHSV.h / 359.99 * width) - 1) + 'px';\n                    updateSVCanvas();\n                    setColPreview();\n                    emitColor(BB.ColorConverter.toRGB(primaryColorHSV));\n\n                }\n\n                if (event.type === 'pointerup') {\n                    BB.css(divH, {\n                        boxShadow: 'rgb(188, 188, 188) 0 0 0 1px'\n                    });\n                }\n            }\n        });\n    }, 1);\n\n\n    // --- second color ---\n\n    const secondaryColorBtn = BB.el({\n        parent: outputDiv,\n        title: LANG('secondary-color') + ' [X]',\n        css: {\n            cursor: 'pointer',\n            marginLeft: '5px',\n            width: '22px',\n            height: '22px',\n            boxShadow: 'rgb(188, 188, 188) 0px 0px 0px 1px',\n            colorScheme: 'only light',\n        },\n        onClick: function(e) {\n            e.preventDefault();\n            swapColors();\n        }\n    });\n    function updateSecondaryColor() {\n        secondaryColorBtn.style.backgroundColor = BB.ColorConverter.toRgbStr(secondaryColorRGB);\n    }\n    function swapColors() {\n        // swap hsv\n        let tmp: any = secondaryColorHSV;\n        secondaryColorHSV = primaryColorHSV;\n        updatePrimaryHSV(tmp);\n        // swap rgb\n        tmp = secondaryColorRGB;\n        secondaryColorRGB = primaryColorRGB;\n        primaryColorRGB = tmp;\n\n        controlH.style.left = parseInt('' + (primaryColorHSV.h / 359 * width - 1)) + 'px';\n        updateSVCanvas();\n        updateSVPointer();\n        setColPreview();\n        updateSecondaryColor();\n\n        emitColor(new BB.RGB(primaryColorRGB.r, primaryColorRGB.g, primaryColorRGB.b));\n    }\n    updateSecondaryColor();\n\n\n\n    // --- interface ---\n\n    this.setColor = function (c) {\n        primaryColorRGB = {r: parseInt(c.r, 10), g: parseInt(c.g, 10), b: parseInt(c.b, 10)};\n        updatePrimaryHSV(BB.ColorConverter.toHSV(c));\n        controlH.style.left = parseInt('' + (primaryColorHSV.h / 359 * width - 1)) + 'px';\n        updateSVCanvas();\n        updateSVPointer();\n        setColPreview();\n    };\n\n    this.getColor = function () {\n        return new BB.RGB(primaryColorRGB.r, primaryColorRGB.g, primaryColorRGB.b);\n    };\n\n    this.getSecondaryRGB = function() {\n        return new BB.RGB(secondaryColorRGB.r, secondaryColorRGB.g, secondaryColorRGB.b);\n    };\n\n    this.setPickCallback = function (func) {\n        pickCallback = func;\n    };\n\n    this.pickingDone = function () {\n        if (!isPicking) {\n            return;\n        }\n        isPicking = false;\n        BB.removeClassName(pickerButton, 'color-picker-preview-button-active');\n    };\n\n    this.enable = function (e) {\n        if (e) {\n            div.style.pointerEvents = '';\n            div.style.opacity = '1';\n            outputDiv.style.pointerEvents = '';\n            outputDiv.style.opacity = '1';\n        } else {\n            div.style.pointerEvents = 'none';\n            div.style.opacity = '0.5';\n            outputDiv.style.pointerEvents = 'none';\n            outputDiv.style.opacity = '0.5';\n        }\n    };\n\n    this.setHeight = function (h) {\n        h = parseInt('' +(h - height * 2 - 3), 10);\n        if (h === svHeight) {\n            return;\n        }\n        svHeight = h;\n        BB.css(svSvg, {\n            width: width + 'px',\n            height: svHeight + 'px'\n        });\n        SVContainer.style.height = svHeight + 'px';\n        updateSVPointer();\n    };\n\n    this.swapColors = function() {\n        swapColors();\n    };\n\n    this.getElement = function() {\n        return div;\n    };\n\n    this.getOutputElement = function() {\n        return outputDiv;\n    }\n\n};","import {BB} from '../../../bb/bb';\nimport {calcSliderFalloffFactor} from './slider-falloff';\n\n\n/**\n * a small color slider\n *\n * params {\n * \t width: 200,\n * \t heightSV: 200,\n * \t heightH: 10,\n * \t color: {r,g,b}\n * \t callback: function(c){}\n * }\n *\n * @param params\n * @constructor\n */\nexport const KlSmallColorSlider = function (params) {\n    const div = document.createElement('div');\n    div.oncontextmenu = function(e) {\n        e.preventDefault();\n    };\n    let color = BB.ColorConverter.toHSV(new BB.RGB(params.color.r, params.color.g, params.color.b));\n    BB.css(div, {\n        width: params.width + 'px',\n        position: 'relative',\n        overflow: 'hidden',\n        userSelect: 'none'\n    });\n\n    const canvasSV = BB.canvas(10, 10);\n    canvasSV.style.width = params.width + 'px';\n    canvasSV.style.height = params.heightSV + 'px';\n    canvasSV.style.cursor = 'crosshair';\n\n    function updateSV() {\n        const ctx = canvasSV.getContext('2d');\n        for (let i = 0; i < canvasSV.height; i += 1) {\n            const gradient1 = ctx.createLinearGradient(0, 0, canvasSV.width, 0);\n\n            const colleft = BB.ColorConverter.toRGB(new BB.HSV(color.h, 1, 100 - (i / canvasSV.height * 100.0)));\n            const colright = BB.ColorConverter.toRGB(new BB.HSV(color.h, 100, 100 - (i / canvasSV.height * 100.0)));\n            gradient1.addColorStop(0, '#' + BB.ColorConverter.toHexString(colleft));\n            gradient1.addColorStop(1, '#' + BB.ColorConverter.toHexString(colright));\n            ctx.fillStyle = '#ff0000'; //needed for chrome...otherwise alpha problem\n            ctx.fillStyle = gradient1;\n            ctx.fillRect(0, i, canvasSV.width, 1);\n        }\n    }\n\n    updateSV();\n\n    const canvasH = BB.canvas(params.width, params.heightH);\n    canvasH.style.cursor = 'ew-resize';\n    (function () {\n        const ctx = canvasH.getContext('2d');\n\n        const gradH = ctx.createLinearGradient(0, 0, params.width, 0);\n        for (let i = 0; i < 1; i += 0.01) {\n            const col = BB.ColorConverter.toRGB(new BB.HSV(i * 360, 100, 100));\n            gradH.addColorStop(i, 'rgba(' + parseInt('' + col.r) + ', ' + parseInt('' + col.g) + ', ' + parseInt('' + col.b) + ', 1)');\n        }\n        ctx.fillStyle = gradH;\n        ctx.fillRect(0, 0, params.width, params.heightH);\n\n    })();\n    BB.css(canvasSV, {\n        width: params.width + 'px',\n        height: params.heightSV + 'px',\n        overflow: 'hidden',\n        position: 'relative'\n    });\n    canvasSV.style.cssFloat = 'left';\n    canvasH.style.cssFloat = 'left';\n\n    div.appendChild(canvasSV);\n    div.appendChild(canvasH);\n\n    const pointerSV = document.createElement('div');\n    BB.css(pointerSV, {\n        width: '8px',\n        height: '8px',\n        borderRadius: '8px',\n        position: 'absolute',\n        pointerEvents: 'none',\n        boxShadow: '0 0 0 1px #000, inset 0 0 0 1px #fff'\n    });\n    div.appendChild(pointerSV);\n\n    const pointerH = document.createElement('div');\n    BB.css(pointerH, {\n        width: '0',\n        height: params.heightH + 'px',\n        borderLeft: '1px solid #fff',\n        borderRight: '1px solid #000',\n        position: 'absolute',\n        top: params.heightSV + 'px',\n        pointerEvents: 'none'\n    });\n    div.appendChild(pointerH);\n\n\n    function updateSVPointer() {\n        const left = color.s / 100 * params.width - 4;\n        const top = (1 - color.v / 100) * params.heightSV - 4;\n        BB.css(pointerSV, {\n            left: left + 'px',\n            top: top + 'px'\n        });\n        /*if (top < params.heightSV/3) {\n        pointerSV.style.border = \"1px solid rgba(0,0,0,1)\";\n    } else {\n        pointerSV.style.border = \"1px solid rgba(255,255,255,1)\";\n    }*/\n    }\n\n    function updateHPointer() {\n        pointerH.style.left = (color.h / 359.999 * params.width - 1) + 'px';\n    }\n\n    updateSVPointer();\n    updateHPointer();\n\n    const virtualHSV = {\n        h: 0,\n        s: 0,\n        v: 0\n    };\n\n    let svPointerId = null;\n    const svPointerListener = new BB.PointerListener({\n        target: canvasSV,\n        maxPointers: 1,\n        fixScribble: true,\n        onPointer: function(event) {\n\n            if (event.type === 'pointerdown') {\n                svPointerId = event.pointerId;\n                if (event.button === 'left') {\n\n                    virtualHSV.s = event.relX / params.width * 100;\n                    virtualHSV.v = 100 - event.relY / params.heightSV * 100;\n\n                    color = new BB.HSV(color.h, virtualHSV.s, virtualHSV.v);\n\n                    updateSVPointer();\n                    params.callback(BB.ColorConverter.toRGB(color));\n                } else {\n                    virtualHSV.s = color.s;\n                    virtualHSV.v = color.v;\n                }\n            }\n\n            if (event.type === 'pointermove' && ['left', 'right'].includes(event.button) && svPointerId === event.pointerId) {\n\n                let factor = 1;\n                if (event.button === 'right') {\n                    factor = 0.5;\n                }\n\n                virtualHSV.s += event.dX / params.width * 100 * factor;\n                virtualHSV.v -= event.dY / params.heightSV * 100 * factor;\n\n                color = new BB.HSV(color.h, virtualHSV.s, virtualHSV.v);\n                updateSVPointer();\n                params.callback(BB.ColorConverter.toRGB(color));\n\n            }\n            if (event.type === 'pointerup') {\n                svPointerId = null;\n            }\n\n        }\n    });\n\n    let hPointerId = null;\n    const hPointerListener = new BB.PointerListener({\n        target: canvasH,\n        maxPointers: 1,\n        fixScribble: true,\n        onPointer: function(event) {\n\n            if (event.type === 'pointerdown') {\n                hPointerId = event.pointerId;\n                if (event.button === 'left') {\n\n                    virtualHSV.h = event.relX / params.width * 359.99;\n\n                    color = new BB.HSV(virtualHSV.h, color.s, color.v);\n                    updateSV();\n                    updateHPointer();\n                    params.callback(BB.ColorConverter.toRGB(color));\n                } else {\n                    virtualHSV.h = color.h;\n                }\n            }\n\n            if (event.type === 'pointermove' && ['left', 'right'].includes(event.button) && hPointerId === event.pointerId) {\n\n                const deltaY = Math.abs(event.pageY - event.downPageY);\n                const factor = calcSliderFalloffFactor(deltaY, event.button === 'right');\n\n                virtualHSV.h += event.dX / params.width * 359.99 * factor;\n\n                if (event.button === 'right') {\n                    virtualHSV.h = virtualHSV.h % 359.99;\n                    if (virtualHSV.h < 0) {\n                        virtualHSV.h += 359.99;\n                    }\n                }\n                virtualHSV.h = Math.min(359.99, virtualHSV.h);\n                color = new BB.HSV(virtualHSV.h, color.s, color.v);\n                updateSV();\n                updateHPointer();\n                params.callback(BB.ColorConverter.toRGB(color));\n\n            }\n            if (event.type === 'pointerup') {\n                hPointerId = null;\n            }\n        }\n    });\n\n\n    const cleardiv = document.createElement('div');\n    cleardiv.style.clear = 'both';\n    div.appendChild(cleardiv);\n\n    // --- interface ---\n    this.setColor = function (c) {\n        color = BB.ColorConverter.toHSV(new BB.RGB(c.r, c.g, c.b));\n        updateSV();\n        updateSVPointer();\n        updateHPointer();\n    };\n    this.getColor = function () {\n        return BB.ColorConverter.toRGB(color);\n    };\n    this.getElement = function() {\n        return div;\n    };\n    this.destroy = function() {\n        svPointerListener.destroy();\n        hPointerListener.destroy();\n    };\n    this.end = function() {\n        svPointerId = null;\n        hPointerId = null;\n    };\n\n};","import {BB} from '../../../bb/bb';\n\n\n/**\n * a slider that looks like this\n * ------O----\n *\n * param: {init, width, pointSize, callback(value, isFirst, isLast)}\n *\n * @param param\n * @constructor\n */\nexport const PointSlider = function(param) {\n\n    const div = document.createElement('div');\n    div.style.position = 'relative';\n    const sliderLine = BB.el({});\n    const sliderPoint = BB.el({\n        css: {\n            colorScheme: 'only light',\n        }\n    });\n    div.appendChild(sliderLine);\n    div.appendChild(sliderPoint);\n    let sliderPos;\n    let isDragging = false;\n\n    //sliderLine\n    {\n        BB.css(sliderLine, {\n            marginTop: parseInt('' + (param.pointSize / 2 - 1)) + 'px',\n            height: '2px',\n            background: '#aaa',\n            width: param.width + 'px'\n        });\n    }\n    //sliderPoint\n    const touchAreaEl = BB.el({ // expand clickable area\n        parent: sliderPoint,\n        css: {\n            // background: 'rgba(255,0,0,0.4)',\n            margin: '-7px 0 0 -7px',\n            width: 'calc(100% + 14px)',\n            height: 'calc(100% + 7px)',\n        }\n    });\n\n    function redrawPoint() {\n        sliderPoint.style.left = sliderPos + 'px';\n        if (isDragging) {\n            sliderPoint.style.boxShadow = '0 0 6px rgba(0,0,0,1)';\n        } else {\n            sliderPoint.style.boxShadow = '0 0 3px rgba(0,0,0,0.8)';\n        }\n    }\n    function getValue() {\n        return sliderPos /  (param.width - param.pointSize);\n    }\n\n    let pointerListener;\n    {\n        let isFirst;\n        sliderPos = BB.clamp(param.init * (param.width - param.pointSize), 0, param.width - param.pointSize);\n        BB.css(sliderPoint, {\n            position: 'absolute',\n            top: '0px',\n            backgroundColor: '#eaeaea',\n            boxShadow: '0 0 3px rgba(0,0,0,0.8)',\n            width: param.pointSize + 'px',\n            height: param.pointSize + 'px',\n            borderRadius: param.pointSize + 'px',\n            cursor: 'ew-resize',\n            transition: 'box-shadow 0.2s ease-in-out'\n        });\n        redrawPoint();\n        let imaginaryPos;\n        pointerListener = new BB.PointerListener({\n            target: sliderPoint,\n            fixScribble: true,\n            onPointer: function(event) {\n                if (event.type === 'pointerdown' && event.button === 'left') {\n                    isFirst = true;\n                    isDragging = true;\n                    imaginaryPos = sliderPos;\n                    redrawPoint();\n                    event.eventStopPropagation();\n                } else if (event.type === 'pointermove' && event.button === 'left') {\n                    event.eventStopPropagation();\n                    imaginaryPos = imaginaryPos + event.dX;\n                    sliderPos = parseInt('' + BB.clamp(imaginaryPos, 0, param.width - param.pointSize));\n                    redrawPoint();\n                    param.callback(getValue(), isFirst, false);\n                    isFirst = false;\n                }\n                if (event.type === 'pointerup') {\n                    event.eventStopPropagation();\n                    isDragging = false;\n                    redrawPoint();\n                    param.callback(getValue(), false, true);\n                }\n            }\n        })\n    }\n\n    // --- interface ---\n    this.getEl = function() {\n        return div;\n    };\n    this.setActive = function(isActive) {\n        if (isActive) {\n            sliderPoint.style.backgroundColor = '#fff';\n        } else {\n            sliderPoint.style.backgroundColor = '#eaeaea';\n        }\n    };\n    this.destroy = function() {\n        pointerListener.destroy();\n    };\n};","import {BB} from '../../../bb/bb';\n\n/**\n * UI to pick between colors in colorArr. can display full transparent (checkerboard).\n * Can't deal with 0.5 alpha.\n * Rectangular buttons.\n *\n * p = {\n *     colorArr: rgba[], // duplicates are removed\n *     onChange: func(rgbaObj),\n *     label: string,\n *     initialIndex: int// optional, index before duplicates were removed\n * }\n *\n * @param p\n * @constructor\n */\nexport const ColorOptions = function(p) {\n    const div = BB.el({\n        content: p.label ? p.label : '',\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            colorScheme: 'only light',\n        }\n    });\n\n    let selectedIndex = 0;\n    const colorArr = [];\n    const buttonArr = [];\n    const buttonSize = 22;\n    const checkerUrl = BB.createCheckerDataUrl(5);\n\n    // build colorArr while removing duplicates\n    for (let i = 0; i < p.colorArr.length; i++) {\n        const item = p.colorArr[i];\n        let found = false;\n        for (let e = 0; e < colorArr.length; e++) {\n            const sItem = colorArr[e];\n            if (sItem === null || item === null) {\n                continue;\n            }\n            if (sItem.r === item.r && sItem.g === item.g && sItem.b === item.b && sItem.a === item.a) {\n                found = true;\n                break;\n            }\n        }\n        if (found) {\n            continue;\n        }\n        colorArr.push(item);\n        if ('initialIndex' in p && p.initialIndex === i) {\n            selectedIndex = colorArr.length - 1;\n        }\n    }\n\n    for (let i = 0; i < colorArr.length; i++) {\n        (function(i) {\n\n            const colorButton = BB.el({\n                content: colorArr[i] ? '' : 'X',\n                css: {\n                    width: buttonSize + 'px',\n                    height: buttonSize + 'px',\n                    backgroundColor: colorArr[i] ? BB.ColorConverter.toRgbaStr(colorArr[i]) : 'transparent',\n                    marginLeft: '7px',\n                    boxShadow: '0 0 0 1px #aaa',\n                    cursor: 'pointer',\n                    userSelect: 'none',\n                    textAlign: 'center',\n                    lineHeight: (buttonSize + 1) + 'px',\n                    color: '#aaa'\n                }\n            });\n            if (colorArr[i] && colorArr[i].a === 0) {\n                colorButton.style.backgroundImage = 'url(' + checkerUrl + ')';\n            }\n\n            colorButton.onclick = function(e) {\n                e.preventDefault();\n                selectedIndex = i;\n                update();\n                p.onChange(colorArr[i]);\n            };\n\n            (colorButton as any).setIsSelected = function(b) {\n                if (b) {\n                    BB.css(colorButton, {\n                        boxShadow: '0 0 0 2px var(--active-highlight-color), 0 0 5px 0 var(--active-highlight-color)',\n                        pointerEvents: 'none'\n                    });\n                } else {\n                    BB.css(colorButton, {\n                        boxShadow: '0 0 0 1px #aaa',\n                        pointerEvents: ''\n                    });\n                }\n            };\n\n\n            div.appendChild(colorButton);\n            buttonArr.push(colorButton);\n        })(i);\n    }\n\n\n    function update() {\n        for (let i = 0; i < buttonArr.length; i++) {\n            buttonArr[i].setIsSelected(i === selectedIndex);\n        }\n    }\n    update();\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n\n    this.destroy = () => {\n        buttonArr.forEach(item => {\n            item.onclick = null;\n        });\n        buttonArr.splice(0, buttonArr.length);\n    };\n};","import {BB} from '../../../bb/bb';\n\n/**\n * selectable options\n * p = {\n *     optionArr: {\n *          id: string,\n *          label: string | HTMLElement\n *     }[],\n *     initialId?: string,\n *     onChange: function(id string): void,\n *     changeOnInit?: boolean, // trigger change on creation\n * }\n *\n * @param p\n * @constructor\n */\nexport const Options = function(p) {\n    const div = BB.el({});\n\n    const wrapperEl = BB.el({\n        parent: div,\n        className: 'kl-option-wrapper',\n        css: {\n            display: 'flex'\n        }\n    });\n\n    const optionArr: {\n        id: string;\n        el: HTMLElement;\n    }[] = [];\n    let selectedId = 'initialId' in p ? p.initialId : p.optionArr[0].id;\n\n    function createOption(o) {\n        const optionObj = {\n            id: o.id,\n            el: null,\n        };\n\n        const classArr = ['kl-option'];\n        if (p.isSmall) {\n            classArr.push('kl-option--small');\n        }\n        if (typeof o.label !== 'string') {\n            classArr.push('kl-option--custom-el');\n            BB.css(o.label, {\n                display: 'block',\n                pointerEvents: 'none',\n            });\n        }\n\n        optionObj.el = BB.el({\n            parent: wrapperEl,\n            content: o.label,\n            className: classArr.join(' '),\n            onClick: function() {\n                if (selectedId !== optionObj.id) {\n                    selectedId = optionObj.id;\n                    update();\n                    p.onChange(selectedId);\n                }\n            }\n        });\n\n        if (o.title) {\n            optionObj.el.title = o.title;\n        }\n\n        optionArr.push(optionObj);\n    }\n\n    function update() {\n        for (let i = 0; i < optionArr.length; i++) {\n            if (optionArr[i].id === selectedId) {\n                BB.addClassName(optionArr[i].el, 'kl-option-selected');\n            } else {\n                BB.removeClassName(optionArr[i].el, 'kl-option-selected');\n            }\n        }\n    }\n\n    for (let i = 0; i < p.optionArr.length; i++) {\n        createOption(p.optionArr[i]);\n    }\n\n    update();\n\n    if (p.changeOnInit) {\n        setTimeout(function() {\n            p.onChange(selectedId);\n        }, 0);\n    }\n\n    function getIndex() {\n        for (let i = 0; i < optionArr.length; i++) {\n            if (optionArr[i].id === selectedId) {\n                return i;\n            }\n        }\n    }\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n    this.getValue = function() {\n        return selectedId;\n    }\n    this.next = function() {\n        selectedId = optionArr[(getIndex() + 1) % optionArr.length].id;\n        update();\n        p.onChange(selectedId);\n    };\n    this.previous = function() {\n        selectedId = optionArr[(optionArr.length + getIndex() - 1) % optionArr.length].id;\n        update();\n        p.onChange(selectedId);\n    };\n    this.destroy = () => {\n        optionArr.forEach(item => {\n            BB.destroyEl(item.el);\n        });\n        optionArr.splice(0, optionArr.length);\n    };\n};","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"iQ1f0\");","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport angleSvg from 'url:~/src/app/img/ui/angle.svg';\n\n\ntype TUiState = 'left' | 'right';\n\n/**\n * display little messages at the top of KlWorkspace\n */\nexport class StatusOverlay {\n\n    private el: HTMLDivElement;\n    private innerEl: HTMLDivElement;\n    private angleIm: HTMLImageElement;\n    private innerInnerEl: HTMLDivElement;\n    private isWide: boolean;\n    private uiState: TUiState;\n\n    private timeout: number;\n    private timeout2: number;\n    private timeout3: number;\n\n    private updateUiState() {\n        if (!this.el) {\n            return;\n        }\n        setTimeout(()=>{}, 100);\n        if (this.uiState === 'left') {\n            this.el.style.left = '271px';\n        } else {\n            this.el.style.removeProperty('left');\n        }\n    }\n\n    private init() {\n        this.el = BB.el({\n            className: \"top-overlay g-root\",\n            onClick: BB.handleClick,\n        }) as HTMLDivElement;\n\n        if (this.isWide) {\n            this.el.style.width = '100%';\n        }\n\n        this.updateUiState();\n\n        this.innerEl = BB.el({\n            className: 'top-overlay-inner',\n        }) as HTMLDivElement\n\n\n        this.angleIm = new Image();\n        this.angleIm.src = angleSvg;\n        BB.css(this.angleIm, {\n            verticalAlign: 'bottom',\n            width: '20px',\n            height: '20px',\n            marginLeft: '5px',\n            borderRadius: '10px'\n        });\n\n        this.innerInnerEl = document.createElement('div');\n        this.innerInnerEl.style.display = 'inline-block';\n\n        this.innerEl.appendChild(this.innerInnerEl);\n        this.innerEl.appendChild(this.angleIm);\n        this.el.appendChild(this.innerEl);\n        document.body.appendChild(this.el);\n        this.el.style.display = \"none\";\n    }\n\n\n    // --- public ---\n\n    constructor () {\n        this.init();\n    }\n\n    setWide(b: boolean) {\n        this.isWide = !!b;\n\n        if (!this.el) {\n            return;\n        }\n\n        if (this.isWide) {\n            this.el.style.width = '100%';\n            this.el.style.left = '';\n        } else {\n            this.el.style.removeProperty('width');\n            this.el.style.left = this.uiState === 'left' ? '271px' : '';\n        }\n    }\n\n    setUiState(state: TUiState) {\n        this.uiState = state;\n        this.updateUiState();\n    }\n\n    out(msg: string | {type: 'transform', angleDeg: number, scale: number}, doPulse?: boolean) {\n\n        if (msg && typeof msg === 'object') {\n\n            if (msg.type === 'transform') {\n                this.angleIm.style.display = 'inline-block';\n                this.angleIm.style.transform = 'rotate(' + msg.angleDeg + 'deg)';\n\n                if (msg.angleDeg % 90 === 0) {\n                    this.angleIm.style.boxShadow = 'inset 0 0 0 1px rgba(255, 255, 255, 0.7)';\n                } else {\n                    this.angleIm.style.boxShadow = '';\n                }\n\n                this.innerInnerEl.innerHTML = Math.round(msg.scale * 100) + \"%\";\n\n\n            } else {\n                this.angleIm.style.display = 'none';\n            }\n\n\n\n        } else if (typeof msg === 'string') {\n            this.angleIm.style.display = 'none';\n            this.innerInnerEl.innerHTML = msg;\n        }\n\n        if (doPulse) {\n            this.innerEl.style.animation = '';\n            setTimeout(\n                () => this.innerEl.style.animation = 'top-overlay-pulse 0.5s ease-out',\n                20\n            );\n            if (this.timeout3) {\n                clearTimeout(this.timeout3);\n            }\n            this.timeout3 = window.setTimeout(\n                () => this.innerEl.style.animation = '',\n                520\n            );\n        }\n\n\n\n        if (this.timeout) {\n            clearTimeout(this.timeout);\n        }\n        if (this.timeout2) {\n            clearTimeout(this.timeout2);\n        }\n        this.el.style.animationName = doPulse ? 'consoleInFast' : \"consoleIn\";\n        this.el.style.opacity = \"1\";\n        this.timeout = window.setTimeout(() => {\n            this.el.style.opacity = \"0\";\n            this.el.style.animationName = \"consoleOut\";\n            this.timeout2 = window.setTimeout(() => {\n                this.el.style.display = \"none\";\n                this.timeout2 = 0;\n            }, 450);\n            this.timeout = 0;\n        }, 1200);\n        this.el.style.display = \"flex\";\n    }\n\n\n}\n","import {BB} from '../../../bb/bb';\n\n/**\n * element that lets you crop an image and copy it via right click\n *\n * param = {\n *     width: number,\n *     height: number,\n *     canvas: image | canvas,\n *     isNotCopy: boolean,\n *     onChange: function(width, height)\n * }\n *\n * @param param object\n * @constructor\n */\nexport function CropCopy(param) {\n    const div = document.createElement('div');\n    BB.css(div, {\n        position: 'relative',\n        height: param.height + 'px',\n        width: param.width + 'px',\n        overflow: 'hidden',\n        colorScheme: 'only light',\n    });\n    div.style.position = 'relative';\n\n    let crop;\n    function resetCrop() {\n        crop = {\n            x: 0,\n            y: 0,\n            width: param.canvas.width,\n            height: param.canvas.height\n        };\n    }\n    resetCrop();\n\n\n    function updateCroppedCanvas() {\n        croppedCanvas.width = Math.round(crop.width);\n        croppedCanvas.height = Math.round(crop.height);\n        let ctx = croppedCanvas.getContext('2d');\n        ctx.drawImage(param.canvas, Math.round(-crop.x), Math.round(-crop.y));\n        if (croppedImage) {\n            croppedImage.src = croppedCanvas.toDataURL('image/png');\n        }\n\n        if (param.onChange) {\n            param.onChange(croppedCanvas.width, croppedCanvas.height);\n        }\n    }\n    function updateSelectionRect() {\n        BB.css(selectionRect, {\n            left: (thumbX + crop.x * scaleW) + 'px',\n            top: (thumbY + crop.y * scaleH) + 'px',\n            width: (crop.width * scaleW) + 'px',\n            height: (crop.height * scaleH) + 'px'\n        });\n        if (param.onChange) {\n            param.onChange(Math.round(crop.width), Math.round(crop.height));\n        }\n    }\n    function isInsideSelectionRect(p) {\n        let rect = {\n            x: Math.round(thumbX + crop.x * scaleW),\n            y: Math.round(thumbY + crop.y * scaleH),\n            width: Math.round(crop.width * scaleW),\n            height: Math.round(crop.height * scaleH)\n        };\n        return rect.x <= p.x && p.x <= rect.x + rect.width &&\n            rect.y <= p.y && p.y <= rect.y + rect.height;\n    }\n\n    const croppedCanvas = BB.canvas();\n    let eventTarget = croppedCanvas;\n    let croppedImage = null;\n    if (!param.isNotCopy) { //navigator.appName === 'Microsoft Internet Explorer') { //i would prefer not using an image\n        croppedImage = new Image();\n        eventTarget = croppedImage;\n    }\n    BB.css(eventTarget, {\n        height: param.height + 'px',\n        width: param.width + 'px'\n    });\n    div.appendChild(eventTarget);\n    updateCroppedCanvas();\n\n    const padding = 20;\n    const previewWrapper = BB.el({\n        css: {\n            width: param.width + 'px',\n            height: param.height + 'px',\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            pointerEvents: 'none'\n        }\n    });\n    div.appendChild(previewWrapper);\n    BB.createCheckerDataUrl(4, function(v) {\n        previewWrapper.style.backgroundImage = 'url('+v+')';\n    });\n\n    const thumbSize = BB.fitInto(param.canvas.width, param.canvas.height, param.width - padding * 2, param.height - padding * 2, 1);\n    const thumbCanvas = BB.canvas(Math.round(thumbSize.width), Math.round(thumbSize.height));\n    thumbCanvas.style.imageRendering = 'pixelated';\n    const scaleW = thumbCanvas.width / param.canvas.width;\n    const scaleH = thumbCanvas.height / param.canvas.height;\n    const thumbCtx = thumbCanvas.getContext('2d');\n    thumbCtx.imageSmoothingEnabled = false;\n    thumbCtx.drawImage(param.canvas, 0, 0, thumbCanvas.width, thumbCanvas.height);\n    previewWrapper.appendChild(thumbCanvas);\n    const thumbX = parseInt('' + ((param.width - thumbCanvas.width) / 2));\n    const thumbY = parseInt('' + ((param.height - thumbCanvas.height) / 2));\n    BB.css(thumbCanvas, {\n        position: 'absolute',\n        left: thumbX + \"px\",\n        top: thumbY + \"px\"\n    });\n\n    const selectionRect = BB.el({\n        css: {\n            position: 'absolute',\n            boxShadow: '0 0 0 1px #fff, 0 0 0 2px #000, 0 0 40px 1px #000',\n        }\n    });\n    previewWrapper.appendChild(selectionRect);\n    updateSelectionRect();\n\n\n    function toOriginalSpace(p) {\n        return {\n            x: BB.clamp((p.x - thumbX) / scaleW, 0, param.canvas.width),\n            y: BB.clamp((p.y - thumbY) / scaleH, 0, param.canvas.height),\n        };\n    }\n    //gen crop from thumb-space points\n    function genCrop(p1, p2) {\n        let topLeftP = {\n            x: Math.min(p1.x, p2.x),\n            y: Math.min(p1.y, p2.y)\n        };\n        let bottomRightP = {\n            x: Math.max(p1.x, p2.x),\n            y: Math.max(p1.y, p2.y)\n        };\n        let origTopLeftP = toOriginalSpace(topLeftP);\n        let origBottomRightP = toOriginalSpace(bottomRightP);\n        origTopLeftP.x = Math.floor(origTopLeftP.x);\n        origTopLeftP.y = Math.floor(origTopLeftP.y);\n        origBottomRightP.x = Math.ceil(origBottomRightP.x);\n        origBottomRightP.y = Math.ceil(origBottomRightP.y);\n        return {\n            x: origTopLeftP.x,\n            y: origTopLeftP.y,\n            width: origBottomRightP.x - origTopLeftP.x,\n            height: origBottomRightP.y - origTopLeftP.y\n        };\n    }\n\n    function isReset() {\n        return crop.x === 0 && crop.y === 0 && crop.width === param.canvas.width && crop.height === param.canvas.height;\n    }\n\n    let startP;\n    let startCrop = null;\n    let isDragging = false;\n    let didMove = false;\n    let updateCropTimeout;\n    const pointerListener = new BB.PointerListener({\n        target: eventTarget,\n        fixScribble: true,\n        onPointer: function(event) {\n            let fullPos;\n            if (event.type === 'pointerdown' && event.button === 'left') {\n                event.eventPreventDefault();\n                isDragging = true;\n                startP = {\n                    x: event.relX,\n                    y: event.relY\n                };\n                if (!isReset() && isInsideSelectionRect(startP)) {\n                    startCrop = {\n                        x: crop.x,\n                        y: crop.y,\n                        width: crop.width,\n                        height: crop.height\n                    };\n                } else {\n                    crop = genCrop(startP, startP);\n                }\n            } else if (event.type === 'pointermove' && event.button === 'left') {\n                event.eventPreventDefault();\n                didMove = true;\n                if (startCrop) {\n                    crop.x = startCrop.x + Math.round((event.relX - startP.x) / scaleW);\n                    crop.y = startCrop.y + Math.round((event.relY - startP.y) / scaleH);\n                    crop.x = BB.clamp(crop.x, 0, param.canvas.width - crop.width);\n                    crop.y = BB.clamp(crop.y, 0, param.canvas.height - crop.height);\n                } else {\n                    crop = genCrop(startP, {x: event.relX, y: event.relY});\n                }\n                updateSelectionRect();\n            } else if (event.type === 'pointerup' && startP) {\n                event.eventPreventDefault();\n                isDragging = false;\n                startCrop = null;\n                startP = null;\n                if (crop.width === 0 || crop.height === 0 || !didMove) {\n                    resetCrop();\n                    updateSelectionRect();\n                }\n                didMove = false;\n                updateCropTimeout = setTimeout(updateCroppedCanvas, 1);\n            }\n        }\n    });\n\n    const keyListener = new BB.KeyListener({\n        onDown: function(keyStr, e, comboStr) {\n            if (isDragging) {\n                return;\n            }\n            let doUpdate = false;\n\n            let stepSize = Math.max(1, 1 / scaleW);\n            let shiftIsPressed = keyListener.isPressed('shift');\n\n            if (keyStr === 'left') {\n                if (shiftIsPressed) {\n                    crop.width = BB.clamp(crop.width - stepSize, 1, param.canvas.width - crop.x);\n                } else {\n                    crop.x = BB.clamp(crop.x - stepSize, 0, param.canvas.width - crop.width);\n                }\n                doUpdate = true;\n            }\n            if (keyStr === 'right') {\n                if (shiftIsPressed) {\n                    crop.width = BB.clamp(crop.width + stepSize, 1, param.canvas.width - crop.x);\n                } else {\n                    crop.x = BB.clamp(crop.x + stepSize, 0, param.canvas.width - crop.width);\n                }\n                doUpdate = true;\n            }\n            if (keyStr === 'up') {\n                if (shiftIsPressed) {\n                    crop.height = BB.clamp(crop.height - stepSize, 1, param.canvas.height - crop.y);\n                } else {\n                    crop.y = BB.clamp(crop.y - stepSize, 0, param.canvas.height - crop.height);\n                }\n                doUpdate = true;\n            }\n            if (keyStr === 'down') {\n                if (shiftIsPressed) {\n                    crop.height = BB.clamp(crop.height + stepSize, 1, param.canvas.height - crop.y);\n                } else {\n                    crop.y = BB.clamp(crop.y + stepSize, 0, param.canvas.height - crop.height);\n                }\n                doUpdate = true;\n            }\n\n            if (doUpdate) {\n                e.preventDefault();\n                updateSelectionRect();\n                clearTimeout(updateCropTimeout);\n                updateCropTimeout = setTimeout(updateCroppedCanvas, 100);\n            }\n        }\n    });\n\n    this.getEl = function() {\n        return div;\n    };\n    this.reset = function() {\n        resetCrop();\n        updateCroppedCanvas();\n        updateSelectionRect();\n    };\n    this.destroy = function() {\n        eventTarget.style.removeProperty('width');\n        eventTarget.style.removeProperty('height');\n        keyListener.destroy();\n        pointerListener.destroy();\n    };\n    this.isReset = function() {\n        return isReset();\n    };\n    this.getRect = function() {\n        return JSON.parse(JSON.stringify(crop));\n    };\n    this.getCroppedImage = function() {\n        return croppedCanvas;\n    };\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"1mb1v\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"11KJK\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"floUo\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"kino6\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"hhQeq\");","\n/**\n * Flood fill. Tried https://github.com/binarymax/floodfill.js/ but it implemented tolerance wrong, and had bugs.\n * So, my own implementation. can handle tolerance, grow, opacity.\n * Needs to be optimized.\n */\n\n/**\n * Set values in data within rect to 254, unless they're 255\n *\n * @param data Uint8Array\n * @param width int\n * @param x0 int\n * @param y0 int\n * @param x1 int >x0\n * @param y1 int >y0\n */\nfunction fillRect(data, width, x0, y0, x1, y1) {\n    for (let x = x0; x <= x1; x++) {\n        for (let y = y0; y <= y1; y++) {\n            if (data[y * width + x] === 255) {\n                continue;\n            }\n            data[y * width + x] = 254;\n        }\n    }\n}\n\nlet mx, my;\n\n/**\n * Get index i moved by dX, dY. in array with dimensions width height.\n * Returns null if outside bounds.\n *\n * @param width int\n * @param height int\n * @param i int\n * @param dX int\n * @param dY int\n * @returns {null|*}\n */\nfunction moveIndex(width, height, i, dX, dY) {\n    mx = i % width + dX;\n    my = Math.floor(i / width) + dY;\n\n    if (mx < 0 || my < 0 || mx >= width || my >= height) {\n        return null;\n    }\n\n    return my * width + mx;\n}\n\n/**\n * If pixel can be filled (within tolerance) will be set 255 and returns true.\n * returns false if already filled, or i is null\n *\n * @param srcArr Uint8Array rgba\n * @param targetArr Uint8Array\n * @param width int\n * @param height int\n * @param initRgba rgba\n * @param tolerance int 0 - 255\n * @param i int - srcArr index\n * @returns {boolean}\n */\nfunction testAndFill(srcArr, targetArr, width, height, initRgba, tolerance, i) {\n    if (i === null || targetArr[i] === 255) {\n        return false;\n    }\n\n    if (\n        srcArr[i * 4] === initRgba[0] &&\n        srcArr[i * 4 + 1] === initRgba[1] &&\n        srcArr[i * 4 + 2] === initRgba[2] &&\n        srcArr[i * 4 + 3] === initRgba[3]\n    ) {\n        targetArr[i] = 255;\n        return true;\n    }\n\n    if (\n        tolerance > 0 &&\n        Math.abs(srcArr[i * 4] - initRgba[0]) <= tolerance &&\n        Math.abs(srcArr[i * 4 + 1] - initRgba[1]) <= tolerance &&\n        Math.abs(srcArr[i * 4 + 2] - initRgba[2]) <= tolerance &&\n        Math.abs(srcArr[i * 4 + 3] - initRgba[3]) <= tolerance\n    ) {\n        targetArr[i] = 255;\n        return true;\n    }\n\n    return false;\n}\n\n\n/**\n *\n * @param srcArr Uint8Array rgba\n * @param targetArr Uint8Array\n * @param width int\n * @param height int\n * @param px int\n * @param py int\n * @param tolerance int 0 - 255\n * @param grow int >= 0\n * @param isContiguous boolean\n */\nfunction floodFill(srcArr, targetArr, width, height, px, py, tolerance, grow, isContiguous) {\n\n    let initRgba = [\n        srcArr[(py * width + px) * 4],\n        srcArr[(py * width + px) * 4 + 1],\n        srcArr[(py * width + px) * 4 + 2],\n        srcArr[(py * width + px) * 4 + 3]\n    ];\n\n    if (isContiguous) {\n        let q = [];\n        q.push(py * width + px);\n        targetArr[py * width + px] = 255;\n\n        let i, e;\n        while (q.length) {\n            i = q.pop();\n\n            // queue up unfilled neighbors\n            e = moveIndex(width, height, i, -1, 0); // left\n            testAndFill(srcArr, targetArr, width, height, initRgba, tolerance, e) && q.push(e);\n\n            e = moveIndex(width, height, i, 1, 0); // right\n            testAndFill(srcArr, targetArr, width, height, initRgba, tolerance, e) && q.push(e);\n\n            e = moveIndex(width, height, i, 0, -1); // up\n            testAndFill(srcArr, targetArr, width, height, initRgba, tolerance, e) && q.push(e);\n\n            e = moveIndex(width, height, i, 0, 1); // bottom\n            testAndFill(srcArr, targetArr, width, height, initRgba, tolerance, e) && q.push(e);\n        }\n    } else {\n        for (let i = 0; i < width * height; i++) {\n            testAndFill(srcArr, targetArr, width, height, initRgba, tolerance, i);\n        }\n    }\n\n\n    // grow\n    if (grow === 0) {\n        return;\n    }\n\n    // how does it grow? it finds all pixel at the edge.\n    // then depending on what kind of edge it is, it draws a rectangle into target\n    // the rectangle has the value 254, or else it mess it all up.\n    // after it's all done, replaces it with 255\n    let x0, x1, y0, y1;\n    let l, tl, t, tr, r, br, b, bl; // left, top left, top, top right, etc.\n    for (let x = 0; x < width; x++) {\n        for (let y = 0; y < height; y++) {\n            if (targetArr[y * width + x] !== 255) {\n                continue;\n            }\n\n            // bounds of rectangle\n            x0 = x;\n            x1 = x;\n            y0 = y;\n            y1 = y;\n\n            l = targetArr[(y) * width + x - 1] !== 255;\n            tl = targetArr[(y - 1) * width + x - 1] !== 255;\n            t = targetArr[(y - 1) * width + x] !== 255;\n            tr = targetArr[(y - 1) * width + x + 1] !== 255;\n            r = targetArr[(y) * width + x + 1] !== 255;\n            br = targetArr[(y + 1) * width + x + 1] !== 255;\n            b = targetArr[(y + 1) * width + x] !== 255;\n            bl = targetArr[(y + 1) * width + x - 1] !== 255;\n\n            if (l) { // left\n                x0 = x - grow;\n            }\n            if (l && tl && t) { // top left\n                x0 = x - grow;\n                y0 = y - grow;\n            }\n            if (t) { // top\n                y0 = Math.min(y0, y - grow);\n            }\n            if (t && tr && r) { // top right\n                y0 = Math.min(y0, y - grow);\n                x1 = x + grow;\n            }\n            if (r) { // right\n                x1 = Math.max(x1, x + 1 * grow);\n            }\n            if (r && br && b) { // bottom right\n                x1 = Math.max(x1, x + 1 * grow);\n                y1 = Math.max(y1, y + 1 * grow);\n            }\n            if (b) { // bottom\n                y1 = Math.max(y1, y + 1 * grow);\n            }\n            if (b && bl && l) { // bottom left\n                x0 = Math.min(x0, x - 1 * grow);\n                y1 = Math.max(y1, y + 1 * grow);\n            }\n\n            if (!l && !tl && !t && !tr && !r && !br && !b && !bl) {\n                continue;\n            }\n\n            fillRect(\n                targetArr,\n                width,\n                Math.max(0, x0),\n                Math.max(0, y0),\n                Math.min(width - 1, x1),\n                Math.min(height - 1, y1)\n            );\n        }\n    }\n    for (let i = 0; i < width * height; i++) {\n        if (targetArr[i] === 254) {\n            targetArr[i] = 255;\n        }\n    }\n\n}\n\n\n/**\n * Does flood fill, and returns that. an array - 0 not filled. 255 filled\n *\n * returns {\n *     data: Uint8Array\n * }\n *\n * @param rgbaArr Uint8Array rgba\n * @param width int\n * @param height int\n * @param x int\n * @param y int\n * @param tolerance int 0 - 255\n * @param grow int >= 0\n * @param isContiguous boolean\n * @returns {{data: Uint8Array}}\n */\nexport function floodFillBits(rgbaArr, width, height, x, y, tolerance, grow, isContiguous) {\n    x = Math.round(x);\n    y = Math.round(y);\n\n    let resultArr = new Uint8Array(new ArrayBuffer(width * height));\n\n    floodFill(rgbaArr, resultArr, width, height, x, y, tolerance, grow, isContiguous);\n\n    return {\n        data: resultArr\n    }\n}\n","import {BB} from '../../bb/bb';\nimport {IShapeToolObject} from '../kl.types';\n\n\n/**\n * Input processor for shape tool.\n * Coordinates are in canvas space.\n * angleRad is the angle of the canvas.\n *\n * @param p - {onShape: func(isDone, x1, y1, x2, y2, angleRad)}\n * @constructor\n */\nexport function ShapeTool(p) {\n\n    let downX, downY, downAngleRad;\n\n    this.onDown = function(x, y, angleRad) {\n        downX = x;\n        downY = y;\n        downAngleRad = angleRad;\n    };\n\n    this.onMove = function(x, y) {\n        p.onShape(false, downX, downY, x, y, downAngleRad);\n    };\n\n    this.onUp = function(x, y) {\n        p.onShape(true, downX, downY, x, y, downAngleRad);\n    };\n}\n\n/**\n * Draw a shape (rectangle, ellipse, line)\n *\n * @param ctx\n * @param shapeObj\n */\nexport function drawShape(\n    ctx: CanvasRenderingContext2D,\n    shapeObj: IShapeToolObject,\n) {\n\n    if (['rect', 'ellipse', 'line'].includes(shapeObj.type)) {\n        const lineWidth = Math.round(shapeObj.lineWidth);\n        const angleDeg = shapeObj.angleRad * 180 / Math.PI;\n\n        // --- prep canvas ---\n        ctx.save();\n        if (shapeObj.opacity) {\n            ctx.globalAlpha = shapeObj.opacity;\n        }\n        if (shapeObj.isEraser) {\n            ctx.globalCompositeOperation = 'destination-out';\n        }\n        ctx.rotate(-shapeObj.angleRad);\n        if (shapeObj.fillRgb) {\n            ctx.fillStyle = BB.ColorConverter.toRgbStr(shapeObj.fillRgb);\n        } else if (shapeObj.strokeRgb) {\n            ctx.strokeStyle = BB.ColorConverter.toRgbStr(shapeObj.strokeRgb);\n            ctx.lineWidth = lineWidth;\n        }\n\n        let x1 = shapeObj.x1;\n        let y1 = shapeObj.y1;\n        let x2 = shapeObj.x2;\n        let y2 = shapeObj.y2;\n\n        // --- angle snapping ---\n        if (shapeObj.isAngleSnap) {\n            let r1 = BB.rotate(x1, y1, shapeObj.angleRad / Math.PI * 180);\n            let r2 = BB.rotate(x2, y2, shapeObj.angleRad / Math.PI * 180);\n\n            let pAngleDeg = BB.pointsToAngleDeg(r1, r2) + 90;\n            let pAngleDegSnapped = Math.round(pAngleDeg / 45) * 45;\n            let rotated = BB.rotateAround({x: x1, y: y1}, {x: x2, y: y2}, pAngleDegSnapped - pAngleDeg);\n            x2 = rotated.x;\n            y2 = rotated.y;\n\n            // needs to be perfect if p1->p2 aligns with canvas x- or y-axis\n            if ((angleDeg + pAngleDegSnapped) % 90 === 0) {\n                if (Math.round((angleDeg - pAngleDegSnapped) / 90) % 2 === 0) { // up or down\n                    x2 = x1;\n                } else { // left or right\n                    y2 = y1;\n                }\n            }\n        }\n\n        let x = x1;\n        let y = y1;\n        let dX = x2 - x1;\n        let dY = y2 - y1;\n\n        // --- 1:1 ratio ---\n        if (shapeObj.type !== 'line' && shapeObj.isFixedRatio) {\n            let r1 = BB.rotate(shapeObj.x1, shapeObj.y1, shapeObj.angleRad / Math.PI * 180);\n            let r2 = BB.rotate(shapeObj.x2, shapeObj.y2, shapeObj.angleRad / Math.PI * 180);\n\n            let rx = r1.x;\n            let ry = r1.y;\n            let rdX = r2.x - r1.x;\n            let rdY = r2.y - r1.y;\n\n            if (Math.abs(rdX) < Math.abs(rdY)) {\n                rdY = Math.abs(rdX) * (rdY < 0 ? -1 : 1);\n            } else {\n                rdX = Math.abs(rdY) * (rdX < 0 ? -1 : 1);\n            }\n            r2.x = rx + rdX;\n            r2.y = ry + rdY;\n\n            r1 = BB.rotate(r1.x, r1.y, -shapeObj.angleRad / Math.PI * 180);\n            r2 = BB.rotate(r2.x, r2.y, -shapeObj.angleRad / Math.PI * 180);\n\n            x1 = r1.x;\n            y1 = r1.y;\n            x2 = r2.x;\n            y2 = r2.y;\n\n            x = x1;\n            y = y1;\n            dX = x2 - x1;\n            dY = y2 - y1;\n        }\n\n        // outwards modifier\n        if (shapeObj.isOutwards) {\n            x -= dX;\n            y -= dY;\n            dX *= 2;\n            dY *= 2;\n\n            x1 = x;\n            y1 = y;\n            x2 = x + dX;\n            y2 = y + dY;\n        }\n\n        let p1;\n        let p2;\n        if (shapeObj.type === 'line') { // --- line ---\n\n            // rounded\n            const x1r = Math.round(x1);\n            const y1r = Math.round(y1);\n            const x2r = Math.round(x2);\n            const y2r = Math.round(y2);\n\n            // floored\n            const x1f = Math.floor(x1);\n            const y1f = Math.floor(y1);\n            const x2f = Math.floor(x2);\n            const y2f = Math.floor(y2);\n\n            if (lineWidth % 2 === 0) {\n\n                if (y1r === y2r) {\n                    p1 = {\n                        x: x1f,\n                        y: y1r,\n                    };\n                    p2 = {\n                        x: x2f,\n                        y: y2r,\n                    };\n\n                    if (x1f < x2f) {\n                        p2.x += 1;\n                    } else {\n                        p1.x += 1;\n                    }\n                } else if (x1r === x2r) {\n                    p1 = {\n                        x: x1r,\n                        y: y1f,\n                    };\n                    p2 = {\n                        x: x2r,\n                        y: y2f,\n                    };\n\n                    if (y1f < y2f) {\n                        p2.y += 1;\n                    } else {\n                        p1.y += 1;\n                    }\n                } else {\n                    p1 = {\n                        x: x1,\n                        y: y1,\n                    };\n                    p2 = {\n                        x: x2,\n                        y: y2,\n                    };\n                }\n\n            } else {\n                p1 = {\n                    x: x1f,\n                    y: y1f,\n                };\n                p2 = {\n                    x: x2f,\n                    y: y2f,\n                };\n                if (y1f === y2f) {\n                    if (x1f < x2f) {\n                        p2.x += 1;\n                    } else {\n                        p1.x += 1;\n                    }\n                    p1.y += 0.5;\n                    p2.y += 0.5;\n                } else if (x1f === x2f) {\n                    if (y1f < y2f) {\n                        p2.y += 1;\n                    } else {\n                        p1.y += 1;\n                    }\n                    p1.x += 0.5;\n                    p2.x += 0.5;\n                } else {\n                    p1.x = x1;\n                    p1.y = y1;\n                    p2.x = x2;\n                    p2.y = y2;\n                }\n            }\n\n            p1 = BB.rotate(p1.x, p1.y, shapeObj.angleRad / Math.PI * 180);\n            p2 = BB.rotate(p2.x, p2.y, shapeObj.angleRad / Math.PI * 180);\n\n            ctx.beginPath();\n            ctx.moveTo(p1.x, p1.y);\n            ctx.lineTo(p2.x, p2.y);\n            ctx.stroke();\n\n        } else if (shapeObj.type === 'rect') { // --- rect ---\n\n            // floored\n            const x1f = Math.floor(x1);\n            const y1f = Math.floor(y1);\n            const x2f = Math.floor(x2);\n            const y2f = Math.floor(y2);\n\n            if (angleDeg % 90 === 0) {\n                if (shapeObj.fillRgb) {\n                    if (x1 % 1 === 0) {\n                        x1 += 1;\n                    }\n                    if (y1 % 1 === 0) {\n                        y1 += 1;\n                    }\n                    if (x2 % 1 === 0) {\n                        x2 += 1;\n                    }\n                    if (y2 % 1 === 0) {\n                        y2 += 1;\n                    }\n\n                    p1 = {\n                        x: x1 < x2 ? x1f : x2f,\n                        y: y1 < y2 ? y1f : y2f,\n                    };\n                    p2 = {\n                        x: Math.ceil((x1 < x2 ? x2 : x1) - p1.x),\n                        y: Math.ceil((y1 < y2 ? y2 : y1) - p1.y),\n                    };\n                    p2.x = p1.x + p2.x;\n                    p2.y = p1.y + p2.y;\n\n                } else {\n                    if (lineWidth % 2 === 0) {\n                        p1 = {\n                            x: x1f,\n                            y: y1f,\n                        };\n                        p2 = {\n                            x: x2f,\n                            y: y2f,\n                        };\n                    } else {\n                        p1 = {\n                            x: x1f + 0.5,\n                            y: y1f + 0.5,\n                        };\n                        p2 = {\n                            x: x2f + 0.5,\n                            y: y2f + 0.5,\n                        };\n                    }\n                }\n            } else {\n                p1 = {\n                    x: x1,\n                    y: y1,\n                };\n                p2 = {\n                    x: x2,\n                    y: y2,\n                };\n            }\n\n            p1 = BB.rotate(p1.x, p1.y, shapeObj.angleRad / Math.PI * 180);\n            p2 = BB.rotate(p2.x, p2.y, shapeObj.angleRad / Math.PI * 180);\n            p2.x = p2.x - p1.x;\n            p2.y = p2.y - p1.y;\n\n            if (shapeObj.fillRgb) {\n                ctx.fillRect(p1.x, p1.y, p2.x, p2.y);\n            } else {\n                ctx.strokeRect(p1.x, p1.y, p2.x, p2.y);\n            }\n\n        } else {  // --- circle ---\n            p1 = BB.rotate(x1, y1, shapeObj.angleRad / Math.PI * 180);\n            p2 = BB.rotate(x2, y2, shapeObj.angleRad / Math.PI * 180);\n            x = p1.x;\n            y = p1.y;\n            dX = p2.x - p1.x;\n            dY = p2.y - p1.y;\n\n            ctx.beginPath();\n            ctx.ellipse(x + dX / 2, y + dY / 2, Math.abs(dX / 2), Math.abs(dY / 2), 0, 0, Math.PI * 2);\n            if (shapeObj.fillRgb) {\n                ctx.fill();\n            } else {\n                ctx.stroke();\n            }\n        }\n\n\n        ctx.restore();\n\n    } else {\n        throw new Error('unknown shape');\n    }\n}","import {BB} from '../../bb/bb';\nimport {IRect} from '../../bb/bb.types';\n\nexport interface IRenderTextParam {\n    textStr: string; // text to be drawn. can contain newlines\n    x: number;\n    y: number;\n    size: number;\n    font: 'serif' | 'monospace' | 'sans-serif' | 'cursive' | 'fantasy'; // default sans-serif\n    align: 'left' | 'center' | 'right'; // default 'left'\n    isBold: boolean; // default false\n    isItalic: boolean; // default false\n    angleRad: number; // default 0 - rotates around x y\n    lineHeight?: number; // pixels\n    color: string;\n    isDebug?: boolean;\n}\n\n\n/**\n * Draw text on a canvas.\n *\n * @param canvas\n * @param p\n * @returns - bounds. coords relative to p.x p.y\n */\nexport function renderText(canvas: HTMLCanvasElement, p: IRenderTextParam): IRect {\n\n    // always at least a space. so bounds aren't just a dot\n    let textStr = p.textStr === '' ? ' ' : p.textStr;\n\n    // --- create el ---\n    // create an actual dom element. figure out where exactly each letter is positioned.\n    // that way multiline is feasible. canvas can't do multiline or text-align\n    let outer = BB.el({\n        css: {\n            position: 'fixed',\n            left: '0',\n            top: '0',\n            width: '100000px',\n            fontSize: p.size + 'px',\n            lineHeight: p.lineHeight ? p.lineHeight + 'px' : 'default',\n        }\n    });\n    let div = BB.el({\n        parent: outer,\n        css: {\n            display: 'inline-block',\n            textAlign: p.align ? p.align : 'left',\n            fontFamily: p.font ? p.font : 'sans-serif',\n            fontSize: p.size + 'px',\n            fontWeight: p.isBold ? 'bold' : 'normal',\n            fontStyle: p.isItalic ? 'italic' : 'normal',\n            lineHeight: p.lineHeight ? p.lineHeight + 'px' : 'default',\n\n\n            opacity: '0',\n            pointerEvents: 'none'\n        }\n    });\n    let spanStr = '';\n    let replaceObj = {\n        \"\\n\": '<br>',\n        \" \": '&nbsp;',\n        \"\t\": '&nbsp;&nbsp;&nbsp;&nbsp;',\n    };\n    for (let i = 0; i < textStr.length; i++) {\n        if (textStr[i] === \"\\n\") {\n            div.appendChild(BB.el({\n                tagName: 'span',\n                textContent: spanStr,\n                css: {\n                    whiteSpace: 'pre'\n                }\n            }));\n            spanStr = '';\n            div.appendChild(BB.el({\n                tagName: 'br'\n            }));\n            continue;\n        }\n        spanStr += textStr[i].replace(\"\\t\", '    ');\n    }\n    div.appendChild(BB.el({\n        tagName: 'span',\n        textContent: spanStr,\n        css: {\n            whiteSpace: 'pre'\n        }\n    }));\n    document.body.appendChild(outer);\n\n\n    // --- determine bounds ---\n    let bounds = {\n        x0: 99999999,\n        y0: 99999999,\n        x1: 0,\n        y1: 0\n    }\n    for (let i = 0; i < div.children.length; i++) {\n        let el = div.children[i] as HTMLElement;\n        bounds.x0 = Math.min(bounds.x0, el.offsetLeft);\n        bounds.y0 = Math.min(bounds.y0, el.offsetTop);\n        bounds.x1 = Math.max(bounds.x1, el.offsetLeft + el.offsetWidth);\n        bounds.y1 = Math.max(bounds.y1, el.offsetTop + el.offsetHeight);\n    }\n\n    // --- draw ---\n    let ctx = canvas.getContext('2d');\n    ctx.save();\n\n    let font = [];\n    if (p.isItalic) {\n        font.push('italic');\n    }\n    if (p.isBold) {\n        font.push('bold');\n    }\n    font.push(p.size + 'px ' + (p.font ? p.font : 'sans-serif'));\n    ctx.font = font.join(' ');\n    ctx.fillStyle = p.color ? p.color : '#000';\n\n    let x = p.x;\n    let y = p.y;\n    if (p.align === 'right') {\n        x += -bounds.x1 + bounds.x0;\n    }\n    if (p.align === 'center') {\n        x += (-bounds.x1 + bounds.x0) / 2;\n    }\n    ctx.translate(p.x, p.y);\n    ctx.rotate(p.angleRad ? -p.angleRad : 0);\n    ctx.translate(-p.x, -p.y);\n    ctx.translate(x, y);\n\n    // fill\n    for (let i = 0; i < div.children.length; i++) {\n        let el = div.children[i] as HTMLElement;\n\n        //ctx.fillText(el.innerText, 0, 0);\n        ctx.fillText(el.innerText, el.offsetLeft, el.offsetTop);\n    }\n\n    if (p.isDebug) {\n        ctx.lineWidth = 1;\n        ctx.strokeRect(0, -p.size * 0.85, bounds.x1, bounds.y1);\n        ctx.restore();\n        ctx.fillRect(p.x - 1, p.y - 1, 2, 2);\n    } else {\n        ctx.restore();\n    }\n\n    document.body.removeChild(outer);\n\n    return {\n        x: x - p.x,\n        y: y - p.y -p.size * 0.85,\n        width: bounds.x1 - bounds.x0,\n        height: bounds.y1 - bounds.y0\n    };\n}","import {BB} from '../../bb/bb';\nimport {IKlProject} from '../kl.types';\n\nexport function drawProject(project: IKlProject, factor) {\n    let resultCanvas = BB.canvas(\n        Math.max(1, Math.round(project.width * factor)),\n        Math.max(1, Math.round(project.height * factor))\n    );\n    let ctx = resultCanvas.getContext(\"2d\");\n    ctx.save();\n    if (factor > 1) {\n        ctx.imageSmoothingEnabled = false;\n    }\n    for (let i = 0; i < project.layers.length; i++) {\n        if (project.layers[i].opacity === 0) {\n            continue;\n        }\n        ctx.globalAlpha = project.layers[i].opacity;\n        ctx.globalCompositeOperation = project.layers[i].mixModeStr ? project.layers[i].mixModeStr : 'source-over';\n        ctx.drawImage(project.layers[i].image, 0, 0, resultCanvas.width, resultCanvas.height);\n    }\n    ctx.restore();\n    return resultCanvas;\n}","import {BB} from '../../bb/bb';\nimport {floodFillBits} from '../image-operations/flood-fill';\nimport {drawShape} from '../image-operations/shape-tool';\nimport {IRenderTextParam, renderText} from '../image-operations/render-text';\nimport {IKlProject, IMixMode, IRGB, IShapeToolObject} from '../kl.types';\nimport {DecoyKlHistory, KlHistoryInterface} from '../history/kl-history';\nimport {drawProject} from './draw-project';\nimport {LANG} from '../../language/language';\n\n\nconst allowedMixModes = [\n    'source-over',\n    'darken',\n    'multiply',\n    'color-burn',\n    'lighten',\n    'screen',\n    'color-dodge',\n    'overlay',\n    'soft-light',\n    'hard-light',\n    'difference',\n    'exclusion',\n    'hue',\n    'saturation',\n    'color',\n    'luminosity',\n];\n\nexport const MAX_LAYERS = 16;\n\ninterface KlCanvasLayer extends HTMLCanvasElement {\n    name: string;\n    mixModeStr: IMixMode;\n    opacity: number;\n    compositeObj?: {\n        draw: (ctx: CanvasRenderingContext2D) => void;\n    },\n    index: number; // certain brushes need to know\n}\n\n/**\n * The image/canvas that the user paints on\n * Has layers. layers have names and opacity.\n *\n * Interacts with the history you specify (for undo/redo)\n */\nexport class KlCanvas {\n\n    // todo changeListener consistent concept\n    // todo history interaction, consistent concept - currently have to look at code to know if something pushes on history\n\n    private width: number;\n    private height: number;\n    private layerCanvasArr: KlCanvasLayer[];\n    private pickCanvas: HTMLCanvasElement; // canvas to draw into for color picker\n    private history: KlHistoryInterface;\n    private changeListenerArr:  (() => void)[]; // subscribers get notified when opacity changes\n\n\n    private init (w: number, h: number): void {\n        if (!w || !h || isNaN(w) || isNaN(h) || w < 1 || h < 1) {\n            throw new Error('init - invalid canvas size');\n        }\n        this.width = w;\n        this.height = h;\n    }\n\n    private emitChange (): void {\n        // some changes don't get captured by the history - e.g. changing opacity as the user drags the slider\n        this.changeListenerArr.forEach(item => item());\n    }\n\n    private updateIndices (): void {\n        this.layerCanvasArr.forEach((item, index) => {\n            item.index = index;\n        });\n    }\n\n    // ---- public ----\n\n    constructor (\n        params: {\n            projectObj: {\n                width: number;\n                height: number;\n                layers: {\n                    name: string;\n                    opacity: number;\n                    image: HTMLImageElement | HTMLCanvasElement; // already loaded!\n                }[];\n            }\n        } | {\n            // creates blank KlCanvas, 0 layers\n            width: number;\n            height: number;\n        } | {\n            copy: KlCanvas;\n        },\n        private layerNrOffset: number = 0,\n    ) {\n        this.layerCanvasArr = [];\n        this.pickCanvas = BB.canvas(1, 1);\n        this.history = new DecoyKlHistory();\n        if ('copy' in params) {\n            this.width = 1;\n            this.height = 1;\n        } else {\n            if ('width' in params && 'height' in params) {\n                this.width = params.width;\n                this.height = params.height;\n            } else {\n                this.width = 1;\n                this.height = 1;\n            }\n        }\n        this.init(this.width, this.height);\n\n        this.changeListenerArr = [];\n\n        if ('copy' in params) {\n            this.copy(params.copy);\n        } else if ('projectObj' in params) {\n            const origLayers = [].concat(params.projectObj.layers);\n            this.init(params.projectObj.width, params.projectObj.height);\n\n            if (!origLayers.length) {\n                throw new Error('project.layers needs at least 1 layer');\n            }\n\n            for (let i = 0; i < origLayers.length; i++) {\n                if (origLayers[i].mixModeStr && !allowedMixModes.includes(origLayers[i].mixModeStr)) {\n                    throw new Error('unknown mixModeStr ' + origLayers[i].mixModeStr);\n                }\n\n                this.addLayer();\n                this.layerOpacity(i, origLayers[i].opacity);\n                this.layerCanvasArr[i].name = origLayers[i].name;\n                this.layerCanvasArr[i].mixModeStr = origLayers[i].mixModeStr ? origLayers[i].mixModeStr : 'source-over';\n                this.layerCanvasArr[i].getContext(\"2d\").drawImage(origLayers[i].image, 0, 0);\n            }\n        }\n        this.updateIndices();\n    }\n\n    setHistory (h: KlHistoryInterface): void {\n        this.history = h;\n    }\n\n    /**\n     * Resets canvas -> 1 layer, 100% opacity,\n     * unless layers provided.\n     * @param p\n     */\n    reset (\n        p: {\n            width: number;\n            height: number;\n            color?: IRGB; // optional - fill color\n            image?: HTMLImageElement | HTMLCanvasElement; // image drawn on layer\n            layerName?: string; // if via image\n            layers?: {\n                name: string;\n                opacity: number;\n                mixModeStr: IMixMode;\n                image: HTMLCanvasElement;\n            }[];\n        }\n    ): void | number {\n        if (!p.width || !p.height || p.width < 1 || p.height < 1 || isNaN(p.width) || isNaN(p.height) ) {\n            throw new Error('invalid canvas size');\n        }\n\n        this.history.pause(true);\n\n        this.width = p.width;\n        this.height = p.height;\n\n        this.layerCanvasArr.splice(1, Math.max(0, this.layerCanvasArr.length - 1));\n\n        if (p.layers) {\n            for (let i = 0; i < p.layers.length; i++) {\n                let item = p.layers[i];\n                if (!this.layerCanvasArr[i]) {\n                    this.addLayer();\n                }\n                this.layerCanvasArr[i].name = item.name;\n                this.layerCanvasArr[i].width = this.width;\n                this.layerCanvasArr[i].height = this.height;\n                this.layerCanvasArr[i].mixModeStr = item.mixModeStr ? item.mixModeStr : 'source-over';\n                this.layerCanvasArr[i].getContext(\"2d\").drawImage(item.image, 0, 0);\n                this.layerOpacity(i, item.opacity);\n            }\n        } else {\n            this.layerCanvasArr[0].name = p.layerName ? p.layerName : LANG('layers-layer') + \" 1\";\n            this.layerCanvasArr[0].width = this.width;\n            this.layerCanvasArr[0].height = this.height;\n            this.layerCanvasArr[0].mixModeStr = 'source-over';\n            this.layerOpacity(0, 1);\n            if (p.color) {\n                this.layerFill(0, p.color);\n            } else if (p.image) {\n                this.layerCanvasArr[0].getContext(\"2d\").drawImage(p.image, 0, 0);\n            }\n        }\n        this.updateIndices();\n\n        this.history.pause(false);\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"reset\",\n            params: [p] // dont screw with p\n        });\n\n        return this.layerCanvasArr.length - 1;\n    }\n\n    isLayerLimitReached (): boolean {\n        return this.layerCanvasArr.length >= MAX_LAYERS;\n    }\n\n    getWidth (): number {\n        return this.width;\n    }\n\n    getHeight (): number {\n        return this.height;\n    }\n\n    copy (toCopyCanvas: KlCanvas): void {\n        if (\n            toCopyCanvas.getWidth() < 1 ||\n            toCopyCanvas.getHeight() < 1 ||\n            isNaN(toCopyCanvas.getWidth()) ||\n            isNaN(toCopyCanvas.getHeight())\n        ) {\n            throw new Error('invalid canvas size');\n        }\n\n        // keep existing canvases\n\n        let origLayers = toCopyCanvas.getLayers();\n\n        while (this.layerCanvasArr.length > origLayers.length) {\n            this.removeLayer(this.layerCanvasArr.length - 1);\n        }\n\n        if (toCopyCanvas.getWidth() != this.width || toCopyCanvas.getHeight() != this.height) {\n            this.init(toCopyCanvas.getWidth(), toCopyCanvas.getHeight());\n        }\n        for (let i = 0; i < origLayers.length; i++) {\n            if (i >= this.layerCanvasArr.length) {\n                this.addLayer();\n            } else {\n                this.layerCanvasArr[i].width = this.width;\n                this.layerCanvasArr[i].height = this.height;\n            }\n            this.layerOpacity(i, origLayers[i].opacity);\n            this.layerCanvasArr[i].name = origLayers[i].name;\n            this.layerCanvasArr[i].mixModeStr = origLayers[i].mixModeStr;\n            this.layerCanvasArr[i].getContext(\"2d\").drawImage(origLayers[i].context.canvas, 0, 0);\n        }\n        this.updateIndices();\n    }\n\n    getLayerCount (): number {\n        return this.layerCanvasArr.length;\n    }\n\n    resize (w: number, h: number, algorithm: 'smooth' | 'pixelated' = 'smooth'): boolean {\n        if (!w || !h || (w === this.width && h === this.height) || isNaN(w) || isNaN(h) || w < 1 || h < 1) {\n            return false;\n        }\n        w = Math.max(w, 1);\n        h = Math.max(h, 1);\n\n        let tmp1, tmp2;\n\n        if (algorithm === 'pixelated') {\n            tmp1 = BB.canvas(w, h);\n            let tmp1Ctx = tmp1.getContext('2d');\n            tmp1Ctx.imageSmoothingEnabled = false;\n            for (let i = 0; i < this.layerCanvasArr.length; i++) {\n                if (i > 0) {\n                    tmp1Ctx.clearRect(0, 0, w, h);\n                }\n                let layerCanvas = this.layerCanvasArr[i];\n                tmp1Ctx.drawImage(layerCanvas, 0, 0, w, h);\n                layerCanvas.width = w;\n                layerCanvas.height = h;\n                let layerContext = layerCanvas.getContext('2d');\n                layerContext.drawImage(tmp1, 0, 0);\n            }\n\n        } else if (algorithm === 'smooth') {\n            tmp1 = BB.canvas();\n            tmp2 = BB.canvas();\n            for (let i = 0; i < this.layerCanvasArr.length; i++) {\n                BB.resizeCanvas(this.layerCanvasArr[i], w, h, tmp1, tmp2);\n            }\n        } else {\n            throw new Error('unknown resize algorithm');\n        }\n\n        this.width = w;\n        this.height = h;\n        return true;\n    }\n\n    /**\n     * crop / extend\n     * @param p\n     */\n    resizeCanvas (p: {\n        left: number;\n        top: number;\n        right: number;\n        bottom: number;\n        fillColor?: IRGB\n    }): void {\n\n        const newW = Math.round(p.left) + this.width + Math.round(p.right);\n        const newH = Math.round(p.top) + this.height + Math.round(p.bottom);\n        const offX = Math.round(p.left);\n        const offY = Math.round(p.top);\n\n        if (isNaN(newW) || isNaN(newH) || newW < 1 || newH < 1) {\n            throw new Error('KlCanvas.resizeCanvas - invalid canvas size');\n        }\n\n        for (let i = 0; i < this.layerCanvasArr.length; i++) {\n            const ctemp = BB.canvas(this.width, this.height);\n            let layerCanvas = this.layerCanvasArr[i];\n            let layerCtx = this.layerCanvasArr[i].getContext(\"2d\");\n            ctemp.getContext(\"2d\").drawImage(layerCanvas, 0, 0);\n\n            this.layerCanvasArr[i].width = newW;\n            this.layerCanvasArr[i].height = newH;\n\n            layerCtx.save();\n            if (i === 0 && p.fillColor) {\n                layerCtx.fillStyle = BB.ColorConverter.toRgbStr(p.fillColor);\n                layerCtx.fillRect(0, 0, newW, newH);\n                layerCtx.clearRect(offX, offY, this.width, this.height);\n            }\n            layerCtx.drawImage(ctemp, offX, offY);\n            layerCtx.restore();\n        }\n        this.width = newW;\n        this.height = newH;\n    }\n\n    /**\n     * will be inserted on top of selected\n     * @param selected\n     */\n    addLayer (selected?: number): false | number {\n        if (this.isLayerLimitReached()) {\n            return false;\n        }\n        let canvas = BB.canvas(this.width, this.height);\n        (canvas as any).mixModeStr = 'source-over';\n\n        if (selected === undefined) {\n            this.layerCanvasArr[this.layerCanvasArr.length] = canvas as any;\n            selected = Math.max(0, this.layerCanvasArr.length - 1);\n        } else {\n            this.layerCanvasArr.splice(selected + 1, 0, canvas as any);\n            selected++;\n        }\n\n        (canvas as any).name = LANG('layers-layer') + \" \" + (this.layerCanvasArr.length + this.layerNrOffset);\n        this.history.pause(true);\n        this.layerOpacity(selected, 1);\n        this.history.pause(false);\n        this.updateIndices();\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"addLayer\",\n            params: [selected - 1]\n        });\n        return selected;\n    }\n\n    duplicateLayer (i: number): false | number {\n        if (!this.layerCanvasArr[i] || this.isLayerLimitReached()) {\n            return false;\n        }\n        let canvas = BB.canvas(this.width, this.height);\n        this.layerCanvasArr.splice(i + 1, 0, canvas as any);\n\n        (canvas as any).name = this.layerCanvasArr[i].name + \" \" + LANG('layers-copy');\n        (canvas as any).mixModeStr = this.layerCanvasArr[i].mixModeStr;\n        canvas.getContext(\"2d\").drawImage(this.layerCanvasArr[i], 0, 0);\n        this.history.pause(true);\n        this.layerOpacity(i + 1, this.layerCanvasArr[i].opacity);\n        this.history.pause(false);\n\n        this.updateIndices();\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"duplicateLayer\",\n            params: [i]\n        });\n        return i + 1;\n    }\n\n    getLayerContext (i: number, doReturnNull?: boolean): CanvasRenderingContext2D | null {\n        if (this.layerCanvasArr[i]) {\n            return this.layerCanvasArr[i].getContext(\"2d\");\n        }\n        if (doReturnNull) {\n            return null;\n        }\n        throw new Error(\"layer of index \" + i + \" not found (in \" + this.layerCanvasArr.length + \" layers)\");\n    }\n\n    removeLayer (i: number): false | number {\n        if (this.layerCanvasArr[i]) {\n            this.layerCanvasArr.splice(i, 1);\n            this.updateIndices();\n        } else {\n            return false;\n        }\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"removeLayer\",\n            params: [i]\n        });\n\n        return Math.max(0, i - 1);\n    }\n\n    renameLayer (i: number, name: string): boolean {\n        if (this.layerCanvasArr[i]) {\n            this.layerCanvasArr[i].name = name;\n        } else {\n            return false;\n        }\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"renameLayer\",\n            params: [i, name]\n        });\n\n        return true;\n    }\n\n    layerOpacity (i: number, o: number): void {\n        if (!this.layerCanvasArr[i]) {\n            return;\n        }\n        o = Math.max(0, Math.min(1, o));\n        this.layerCanvasArr[i].opacity = o;\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"layerOpacity\",\n            params: [i, o]\n        });\n\n        this.emitChange();\n    }\n\n    moveLayer (i: number, d: number): void | number {\n        if (d === 0) {\n            return;\n        }\n        if (this.layerCanvasArr[i]) {\n            const temp = this.layerCanvasArr[i];\n            this.layerCanvasArr.splice(i, 1);\n            const targetIndex = Math.max(0, Math.min(i + d, this.layerCanvasArr.length));\n            this.layerCanvasArr.splice(targetIndex, 0, temp);\n            this.updateIndices();\n            this.history.push({\n                tool: [\"canvas\"],\n                action: \"moveLayer\",\n                params: [i, d]\n            });\n            return targetIndex;\n        }\n    }\n\n    mergeLayers (layerBottomIndex: number, layerTopIndex: number, mixModeStr: IMixMode | 'as-alpha'): void | number {\n        if (\n            !this.layerCanvasArr[layerBottomIndex] ||\n            !this.layerCanvasArr[layerTopIndex] ||\n            layerBottomIndex === layerTopIndex\n        ) {\n            return;\n        }\n        //order messed up\n        if (layerBottomIndex > layerTopIndex) {\n            let temp = layerBottomIndex;\n            layerBottomIndex = layerTopIndex;\n            layerTopIndex = temp;\n        }\n\n        let topOpacity = this.layerCanvasArr[layerTopIndex].opacity;\n        if (topOpacity !== 0 && topOpacity) {\n            let ctx = this.layerCanvasArr[layerBottomIndex].getContext(\"2d\");\n            ctx.save();\n\n            if (mixModeStr === 'as-alpha') { // todo remove this?\n\n                BB.convertToAlphaChannelCanvas(this.layerCanvasArr[layerTopIndex]);\n                ctx.globalCompositeOperation = 'destination-in';\n                ctx.globalAlpha = topOpacity;\n                this.layerCanvasArr[layerBottomIndex].getContext(\"2d\").drawImage(this.layerCanvasArr[layerTopIndex], 0, 0);\n\n            } else {\n\n                if (mixModeStr) {\n                    ctx.globalCompositeOperation = mixModeStr;\n                }\n                ctx.globalAlpha = topOpacity;\n                this.layerCanvasArr[layerBottomIndex].getContext(\"2d\").drawImage(this.layerCanvasArr[layerTopIndex], 0, 0);\n\n            }\n\n            ctx.restore();\n\n            // workaround for chrome bug https://bugs.chromium.org/p/chromium/issues/detail?id=1281185\n            // TODO remove if chrome updated\n            if (mixModeStr) {\n                ctx.save();\n                ctx.fillStyle = \"rgba(0,0,0,0.01)\";\n                ctx.fillRect(-0.9999999, -0.9999999, 1, 1);\n                ctx.restore();\n            }\n        }\n        this.updateIndices();\n        this.history.pause(true);\n        this.removeLayer(layerTopIndex);\n        this.history.pause(false);\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"mergeLayers\",\n            params: [layerBottomIndex, layerTopIndex, mixModeStr]\n        });\n\n        return layerBottomIndex;\n    }\n\n    rotate (deg: number): void {\n        while (deg < 0) {\n            deg += 360;\n        }\n        deg %= 360;\n        if (deg % 90 != 0 || deg === 0)\n            return;\n        let temp = BB.canvas();\n        if (deg === 0 || deg === 180) {\n            temp.width = this.width;\n            temp.height = this.height;\n        } else if (deg === 90 || deg === 270) {\n            temp.width = this.height;\n            temp.height = this.width;\n        }\n        let ctx = temp.getContext(\"2d\");\n        for (let i = 0; i < this.layerCanvasArr.length; i++) {\n            ctx.clearRect(0, 0, temp.width, temp.height);\n            ctx.save();\n            ctx.translate(temp.width / 2, temp.height / 2);\n            ctx.rotate(deg * Math.PI / 180);\n            if (deg === 180) {\n                ctx.drawImage(this.layerCanvasArr[i], -temp.width / 2, -temp.height / 2);\n            } else if (deg === 90 || deg === 270) {\n                ctx.drawImage(this.layerCanvasArr[i], -temp.height / 2, -temp.width / 2);\n            }\n            this.layerCanvasArr[i].width = temp.width;\n            this.layerCanvasArr[i].height = temp.height;\n            this.layerCanvasArr[i].getContext(\"2d\").clearRect(0, 0, this.layerCanvasArr[i].width, this.layerCanvasArr[i].height);\n            this.layerCanvasArr[i].getContext(\"2d\").drawImage(temp, 0, 0);\n            ctx.restore();\n        }\n        this.width = temp.width;\n        this.height = temp.height;\n    }\n\n    flip (isHorizontal: boolean, isVertical: boolean, layerIndex: number): void {\n        if (!isHorizontal && !isVertical) {\n            return;\n        }\n\n        let temp = BB.canvas(this.width, this.height);\n        temp.width = this.width;\n        temp.height = this.height;\n        let tempCtx = temp.getContext(\"2d\");\n\n        for (let i = 0; i < this.layerCanvasArr.length; i++) {\n\n            if ( (layerIndex || layerIndex === 0) && i !== layerIndex) {\n                continue;\n            }\n\n            tempCtx.save();\n            tempCtx.clearRect(0, 0, temp.width, temp.height);\n            tempCtx.translate(temp.width / 2, temp.height / 2);\n            tempCtx.scale((isHorizontal ? -1 : 1), (isVertical ? -1 : 1));\n            tempCtx.drawImage(this.layerCanvasArr[i], -temp.width / 2, -temp.height / 2);\n            tempCtx.restore();\n\n            this.layerCanvasArr[i].getContext(\"2d\").clearRect(0, 0, this.layerCanvasArr[i].width, this.layerCanvasArr[i].height);\n            this.layerCanvasArr[i].getContext(\"2d\").drawImage(temp, 0, 0);\n        }\n    }\n\n    layerFill (layerIndex: number, colorObj: IRGB, compositeOperation?: string): void {\n        let ctx = this.layerCanvasArr[layerIndex].getContext(\"2d\");\n        ctx.save();\n        if (compositeOperation) {\n            ctx.globalCompositeOperation = compositeOperation;\n        }\n        ctx.fillStyle = \"rgba(\" + colorObj.r + \",\" + colorObj.g + \",\" + colorObj.b + \",1)\";\n        ctx.fillRect(0, 0, this.layerCanvasArr[layerIndex].width, this.layerCanvasArr[layerIndex].height);\n        ctx.restore();\n\n        // workaround for chrome bug https://bugs.chromium.org/p/chromium/issues/detail?id=1281185\n        // TODO remove if chrome updated\n        ctx.save();\n        ctx.fillStyle = \"rgba(0,0,0,0.01)\";\n        ctx.fillRect(-0.9999999, -0.9999999, 1, 1);\n        ctx.restore();\n\n        /*if (!document.getElementById('testocanvas')) {\n            layerCanvasArr[layerIndex].id = 'testocanvas';\n            document.body.appendChild(layerCanvasArr[layerIndex]);\n            BB.css(layerCanvasArr[layerIndex], {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                zIndex: '1111111',\n                transform: 'scale(0.2)',\n                border: '10px solid red',\n            });\n        }\n        if (!document.getElementById('testocanvas')) {\n            let c = document.createElement('canvas');\n            c.width = 1000;\n            c.height = 1000;\n            let ctx2 = c.getContext('2d');\n            ctx2.drawImage(layerCanvasArr[layerIndex], 0, 0);\n            c.id = 'testocanvas';\n            document.body.appendChild(c);\n            BB.css(c, {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                zIndex: '1111111',\n                transform: 'scale(0.2)',\n                border: '10px solid red',\n            });\n        }*/\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"layerFill\",\n            params: [layerIndex, colorObj, compositeOperation]\n        });\n    }\n\n    floodFill (\n        layerIndex: number, // index of layer to be filled\n        x: number, // starting point\n        y: number,\n        rgb: IRGB, // fill color\n        opacity: number,\n        tolerance: number,\n        sampleStr: 'current' | 'all' | 'above',\n        grow: number, // int >= 0 - radius around filled area that is to be filled too\n        isContiguous: boolean,\n    ): void {\n        if (x < 0 || y < 0 || x >= this.width || y >= this.height || opacity === 0) {\n            return;\n        }\n        tolerance = Math.round(tolerance);\n\n        if (!(['above', 'current', 'all'].includes(sampleStr))) {\n            throw new Error('invalid sampleStr');\n        }\n\n        let result;\n\n        let srcCtx;\n        let srcImageData;\n        let srcData;\n\n        let targetCtx;\n        let targetImageData;\n        let targetData;\n\n\n        if (sampleStr === 'all') {\n\n            let srcCanvas = this.layerCanvasArr.length === 1 ? this.layerCanvasArr[0] : this.getCompleteCanvas(1);\n            srcCtx = srcCanvas.getContext('2d');\n            srcImageData = srcCtx.getImageData(0, 0, this.width, this.height);\n            srcData = srcImageData.data;\n            result = floodFillBits(srcData, this.width, this.height, x, y, tolerance, Math.round(grow), isContiguous);\n\n            srcCanvas = null;\n            srcCtx = null;\n            srcImageData = null;\n            srcData = null;\n\n            targetCtx = this.layerCanvasArr[layerIndex].getContext('2d');\n            targetImageData = targetCtx.getImageData(0, 0, this.width, this.height);\n\n        } else {\n            let srcIndex = sampleStr === 'above' ? layerIndex + 1 : layerIndex;\n\n            if (srcIndex >= this.layerCanvasArr.length) {\n                return;\n            }\n\n            srcCtx = this.layerCanvasArr[srcIndex].getContext('2d');\n            srcImageData = srcCtx.getImageData(0, 0, this.width, this.height);\n            srcData = srcImageData.data;\n            result = floodFillBits(srcData, this.width, this.height, x, y, tolerance, Math.round(grow), isContiguous);\n\n            if (layerIndex !== srcIndex) {\n                srcCtx = null;\n                srcImageData = null;\n                srcData = null;\n            }\n\n            targetCtx = layerIndex === srcIndex ? srcCtx : this.layerCanvasArr[layerIndex].getContext('2d');\n            targetImageData = layerIndex === srcIndex ? srcImageData : targetCtx.getImageData(0, 0, this.width, this.height);\n\n        }\n\n        targetData = targetImageData.data;\n        if (opacity === 1) {\n            for (let i = 0; i < this.width * this.height; i++) {\n                if (result.data[i] === 255) {\n                    targetData[i * 4] = rgb.r;\n                    targetData[i * 4 + 1] = rgb.g;\n                    targetData[i * 4 + 2] = rgb.b;\n                    targetData[i * 4 + 3] = 255;\n                }\n            }\n        } else {\n            for (let i = 0; i < this.width * this.height; i++) {\n                if (result.data[i] === 255) {\n                    targetData[i * 4] = BB.mix(targetData[i * 4], rgb.r, opacity);\n                    targetData[i * 4 + 1] = BB.mix(targetData[i * 4 + 1], rgb.g, opacity);\n                    targetData[i * 4 + 2] = BB.mix(targetData[i * 4 + 2], rgb.b, opacity);\n                    targetData[i * 4 + 3] = BB.mix(targetData[i * 4 + 3], 255, opacity);\n                }\n            }\n        }\n        targetCtx.putImageData(targetImageData, 0, 0);\n\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"replaceLayer\",\n            params: [layerIndex, targetImageData]\n        });\n    }\n\n    /**\n     * draw shape via BB.drawShape\n     * @param layerIndex\n     * @param shapeObj\n     */\n    drawShape (layerIndex: number, shapeObj: IShapeToolObject): void {\n        drawShape(this.layerCanvasArr[layerIndex].getContext(\"2d\"), shapeObj);\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"drawShape\",\n            params: [layerIndex, BB.copyObj(shapeObj)],\n        });\n    }\n\n    text (layerIndex: number, p: IRenderTextParam): void {\n        renderText(this.layerCanvasArr[layerIndex], BB.copyObj(p));\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"text\",\n            params: [layerIndex, BB.copyObj(p)],\n        });\n    }\n\n    replaceLayer (layerIndex: number, imageData: ImageData): void {\n        let ctx = this.layerCanvasArr[layerIndex].getContext(\"2d\");\n        ctx.putImageData(imageData, 0, 0);\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"replaceLayer\",\n            params: [layerIndex, imageData],\n        });\n    }\n\n    clearLayer (layerIndex: number): void {\n        let ctx = this.layerCanvasArr[layerIndex].getContext(\"2d\");\n        ctx.save();\n        ctx.clearRect(0, 0, this.layerCanvasArr[layerIndex].width, this.layerCanvasArr[layerIndex].height);\n        ctx.restore();\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"clearLayer\",\n            params: [layerIndex]\n        });\n    }\n\n    getLayers (): {\n        context: CanvasRenderingContext2D;\n        opacity: number;\n        name: string;\n        mixModeStr: IMixMode;\n    }[] {\n        return this.layerCanvasArr.map(item => {\n            return {\n                context: item.getContext(\"2d\"),\n                opacity: item.opacity,\n                name: item.name,\n                mixModeStr: item.mixModeStr,\n            };\n        });\n    }\n\n    getLayersFast (): {\n        canvas: KlCanvasLayer;\n        opacity: number;\n        name: string;\n        mixModeStr: IMixMode;\n    }[] {\n        return this.layerCanvasArr.map(item => {\n            return {\n                canvas: item,\n                opacity: item.opacity,\n                name: item.name,\n                mixModeStr: item.mixModeStr,\n            };\n        });\n    }\n\n    getLayerIndex (canvasObj: HTMLCanvasElement, doReturnNull?: boolean): null | number {\n        for (let i = 0; i < this.layerCanvasArr.length; i++) {\n            if (this.layerCanvasArr[i] === canvasObj) {\n                return i;\n            }\n        }\n        if (!doReturnNull) {\n            throw new Error(\"layer not found (in \" + this.layerCanvasArr.length + \" layers)\");\n        }\n        return null;\n    }\n\n    getLayer (index: number, doReturnNull?: boolean): null | {\n        context: CanvasRenderingContext2D;\n        opacity: number;\n        name: string;\n        id: number;\n    } {\n        if (this.layerCanvasArr[index]) {\n            return {\n                context: this.layerCanvasArr[index].getContext(\"2d\"),\n                opacity: this.layerCanvasArr[index].opacity,\n                name: this.layerCanvasArr[index].name,\n                id: index,\n            };\n        }\n        if (!doReturnNull) {\n            throw new Error(\"layer of index \" + index + \" not found (in \" + this.layerCanvasArr.length + \" layers)\");\n        }\n        return null;\n    }\n\n    getColorAt (x: number, y: number): IRGB {\n        x = Math.floor(x);\n        y = Math.floor(y);\n        let ctx = this.pickCanvas.getContext(\"2d\");\n        ctx.save();\n        ctx.imageSmoothingEnabled = false;\n        ctx.clearRect(0, 0, 1, 1);\n        for (let i = 0; i < this.layerCanvasArr.length; i++) {\n            ctx.globalAlpha = this.layerCanvasArr[i].opacity;\n            ctx.globalCompositeOperation = this.layerCanvasArr[i].mixModeStr;\n            ctx.drawImage(this.layerCanvasArr[i], -x, -y);\n        }\n        ctx.restore();\n        let imData = ctx.getImageData(0, 0, 1, 1);\n        return new BB.RGB(imData.data[0], imData.data[1], imData.data[2]);\n    }\n\n    getCompleteCanvas (factor: number): HTMLCanvasElement {\n        return drawProject(this.getProject(), factor);\n    }\n\n    getProject (): IKlProject {\n        return {\n            width: this.width,\n            height: this.height,\n            layers: this.layerCanvasArr.map(layer => {\n                return {\n                    name: layer.name,\n                    opacity: layer.opacity,\n                    mixModeStr: layer.mixModeStr,\n                    image: layer,\n                };\n            }),\n        };\n    }\n\n    addChangeListener (func: () => void): void {\n        if (this.changeListenerArr.includes(func)) {\n            return;\n        }\n        this.changeListenerArr.push(func);\n    }\n\n    removeChangeListener (func: () => void): void {\n        for (let i = 0; i < this.changeListenerArr.length; i++) {\n            if (this.changeListenerArr[i] === func) {\n                this.changeListenerArr.splice(i, 1);\n                return;\n            }\n        }\n    }\n\n    setMixMode (layerIndex: number, mixModeStr: IMixMode): void {\n        if (!this.layerCanvasArr[layerIndex]) {\n            throw new Error('invalid layer');\n        }\n        this.layerCanvasArr[layerIndex].mixModeStr = mixModeStr;\n\n        this.history.push({\n            tool: [\"canvas\"],\n            action: \"setMixMode\",\n            params: [layerIndex, '' + mixModeStr],\n        });\n    }\n\n    /**\n     * Set composite drawing step for KlCanvasWorkspace.\n     * To apply temporary manipulations to a layer.\n     *\n     * @param layerIndex\n     * @param compositeObj\n     */\n    setComposite (\n        layerIndex: number,\n        compositeObj: null | {\n            draw: (ctx: CanvasRenderingContext2D) => void;\n        }\n    ): void {\n        if (!this.layerCanvasArr[layerIndex]) {\n            throw new Error('invalid layer');\n        }\n        this.layerCanvasArr[layerIndex].compositeObj = compositeObj;\n    }\n\n}\n","import {IMixMode} from '../kl.types';\nimport {LANG} from '../../language/language';\nimport {TTranslationCode} from '../../../languages/languages';\n\nexport function translateBlending(blendMode?: IMixMode): string {\n    if (!blendMode) {\n        return LANG('layers-blend-normal');\n    }\n\n    const codes: {\n        [key: string]: TTranslationCode\n    } = {\n        'source-over': 'layers-blend-normal',\n        'darken': 'layers-blend-darken',\n        'multiply': 'layers-blend-multiply',\n        'color-burn': 'layers-blend-color-burn',\n        'lighten': 'layers-blend-lighten',\n        'screen': 'layers-blend-screen',\n        'color-dodge': 'layers-blend-color-dodge',\n        'overlay': 'layers-blend-overlay',\n        'soft-light': 'layers-blend-soft-light',\n        'hard-light': 'layers-blend-hard-light',\n        'difference': 'layers-blend-difference',\n        'exclusion': 'layers-blend-exclusion',\n        'hue': 'layers-blend-hue',\n        'saturation': 'layers-blend-saturation',\n        'color': 'layers-blend-color',\n        'luminosity': 'layers-blend-luminosity',\n    };\n\n    if (!(blendMode in codes)) {\n        throw new Error('unknown blend mode');\n    }\n    return LANG(codes[blendMode]);\n}","import {BB} from '../../bb/bb';\nimport {IRGB} from '../kl.types';\n\n/**\n * Overlay for KlCanvasWorkspace.\n * - brush circle\n * - eyedropper circle\n * - compass needle (rotation hud)\n */\nexport class WorkspaceSvgOverlay {\n    private rootElement: SVGElement;\n    private brushCircleOuter: SVGElement;\n    private brushCircleInner: SVGElement;\n    private pickerPreviewBorder: SVGElement;\n    private pickerPreviewCol: SVGElement;\n    private readonly compassSize: number;\n    private compass: SVGElement;\n    private compassInner: SVGElement;\n    private compassBaseCircle: SVGElement;\n    private compassLineCircle: SVGElement;\n    private compassUpperTriangle: SVGElement;\n    private compassLowerTriangle: SVGElement;\n\n    // ---- public ----\n\n    constructor (\n        p: {\n            width: number;\n            height: number;\n        }\n    ) {\n        this.rootElement = BB.createSvg({\n            elementType: 'svg',\n            width: '' + p.width,\n            height: '' + p.height,\n        });\n        BB.css(this.rootElement, {\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            pointerEvents: 'none',\n            userSelect: 'none'\n        });\n\n        //brush circles\n        this.brushCircleOuter = BB.createSvg({\n            elementType: 'circle',\n            r: '10',\n            stroke: 'rgba(0,0,0,0.7)',\n            'stroke-width': '1',\n            fill: 'none',\n        });\n        this.brushCircleInner = BB.createSvg({\n            elementType: 'circle',\n            r: '9',\n            stroke: 'rgba(255,255,255,0.7)',\n            'stroke-width': '1',\n            fill: 'none',\n        });\n        this.rootElement.append(this.brushCircleOuter, this.brushCircleInner);\n\n        //color picker preview circle\n        this.pickerPreviewBorder = BB.createSvg({\n            elementType: 'circle',\n            r: '47',\n            stroke: 'black',\n            'stroke-width': '22',\n            fill: 'none',\n        });\n        this.pickerPreviewBorder.style.opacity = '0';\n        this.pickerPreviewCol = BB.createSvg({\n            elementType: 'circle',\n            r: '47',\n            stroke: 'black',\n            'stroke-width': '20',\n            fill: 'none',\n        });\n        this.pickerPreviewCol.style.opacity = '0';\n        this.rootElement.append(this.pickerPreviewBorder, this.pickerPreviewCol);\n\n\n        //rotation compass\n        this.compassSize = 30;\n        this.compass = BB.createSvg({\n            elementType: 'g',\n            transform: 'translate(' + (p.width/2) + ', ' + (p.height/2) + ')',\n        });\n        BB.css(this.compass, {\n            transition: 'opacity 0.25s ease-in-out',\n            opacity: '0',\n        });\n        this.compassInner = BB.createSvg({\n            elementType: 'g',\n            transform: 'rotate(45)',\n        });\n        this.compassBaseCircle = BB.createSvg({\n            elementType: 'circle',\n            fill: 'rgba(0,0,0,0.9)',\n            stroke: 'none',\n            cx: '0',\n            cy: '0',\n            r: '' + this.compassSize,\n        });\n        this.compassLineCircle = BB.createSvg({\n            elementType: 'circle',\n            fill: 'none',\n            stroke: 'rgba(255,255,255,0.75)',\n            'stroke-width': '1',\n            cx: '0',\n            cy: '0',\n            r: '' + (this.compassSize * 0.9),\n        });\n        this.compassUpperTriangle = BB.createSvg({\n            elementType: 'path',\n            fill: '#f00',\n            stroke: 'none',\n            d: 'M -'+(this.compassSize * 0.25)+',0 '+(this.compassSize * 0.25)+',0 0,-'+(this.compassSize * 0.9)+' z',\n        });\n        this.compassLowerTriangle = BB.createSvg({\n            elementType: 'path',\n            fill: '#fff',\n            stroke: 'none',\n            d: 'M -'+(this.compassSize * 0.25)+',0 '+(this.compassSize * 0.25)+',0 0,'+(this.compassSize * 0.9)+' z',\n        });\n\n        this.compassInner.append(\n            this.compassBaseCircle,\n            this.compassLineCircle,\n            this.compassUpperTriangle,\n            this.compassLowerTriangle\n        );\n        this.compass.append(this.compassInner);\n        this.rootElement.append(this.compass);\n    }\n\n    getElement (): SVGElement {\n        return this.rootElement;\n    }\n\n    setSize (width: number, height: number): void {\n        this.rootElement.setAttribute('width', '' + width);\n        this.rootElement.setAttribute('height', '' + height);\n        this.compass.setAttribute('transform', 'translate(' + (width/2) + ', ' + (height/2) + ')');\n    }\n\n    updateCursor (p: {\n        x?: number;\n        y?: number;\n        radius?: number;\n        isVisible?: boolean;\n    }): void {\n        if ('x' in p) {\n            this.brushCircleOuter.setAttribute('cx', '' + p.x);\n            this.brushCircleInner.setAttribute('cx', '' + p.x);\n        }\n        if ('y' in p) {\n            this.brushCircleOuter.setAttribute('cy', '' + p.y);\n            this.brushCircleInner.setAttribute('cy', '' + p.y);\n        }\n        if ('radius' in p) {\n            this.brushCircleOuter.setAttribute('r', '' + Math.max(0, p.radius));\n            this.brushCircleInner.setAttribute('r', '' + Math.max(0, p.radius - 1));\n        }\n        if ('isVisible' in p) {\n            this.brushCircleOuter.style.opacity = p.isVisible ? '1' : '0';\n            this.brushCircleInner.style.opacity = p.isVisible ? '1' : '0';\n        }\n    }\n\n    updateColorPreview (p: {\n        x?: number;\n        y?: number;\n        color?: IRGB;\n        isVisible?: boolean;\n    }): void {\n        if ('x' in p) {\n            this.pickerPreviewCol.setAttribute('cx', '' + p.x);\n            this.pickerPreviewBorder.setAttribute('cx', '' + p.x);\n        }\n        if ('y' in p) {\n            this.pickerPreviewCol.setAttribute('cy', '' + p.y);\n            this.pickerPreviewBorder.setAttribute('cy', '' + p.y);\n        }\n        if ('color' in p) {\n            this.pickerPreviewCol.setAttribute('stroke', BB.ColorConverter.toRgbStr(p.color));\n            let borderColor = BB.testIsWhiteBestContrast(p.color) ? 'rgba(255,255,255,0.5)' : 'rgba(0,0,0,0.5)'\n            this.pickerPreviewBorder.setAttribute('stroke', borderColor);\n        }\n        if ('isVisible' in p) {\n            this.pickerPreviewCol.style.opacity = p.isVisible ? '1' : '0';\n            this.pickerPreviewBorder.style.opacity = p.isVisible ? '1' : '0';\n        }\n    }\n\n    updateCompass (p: {\n        angleDeg?: number;\n        isVisible?: boolean;\n    }): void {\n        if ('angleDeg' in p) {\n            this.compassInner.setAttribute('transform', 'rotate(' + p.angleDeg + ')');\n            this.compassLineCircle.style.opacity = p.angleDeg % 90 === 0 ? '1' : '0';\n        }\n        if ('isVisible' in p) {\n            this.compass.style.opacity = p.isVisible ? '1' : '0';\n        }\n    }\n\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"1dLwT\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"9wZxU\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"hQSEH\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"916ZI\");","import {BB} from '../../bb/bb';\nimport {IRGB, ITransform} from '../kl.types';\nimport {WorkspaceSvgOverlay} from './workspace-svg-overlay';\nimport {klHistory} from '../history/kl-history';\n// @ts-ignore\nimport pickerImg from 'url:~/src/app/img/ui/cursor-picker.png';\n// @ts-ignore\nimport zoomEwImg from 'url:~/src/app/img/ui/cursor-zoom-ew.png';\n// @ts-ignore\nimport fillImg from 'url:~/src/app/img/ui/cursor-fill.png';\n// @ts-ignore\nimport textImg from 'url:~/src/app/img/ui/cursor-text.png';\nimport {IPressureInput, IVector2D} from '../../bb/bb.types';\nimport {KlCanvas} from '../canvas/kl-canvas';\nimport {KeyListener} from '../../bb/input/key-listener';\n\nexport interface IViewChangeEvent {\n    changed: ('scale' | 'angle')[];\n    angle: number;\n    scale: number;\n}\n\ntype TModeStr = 'draw' | 'pick' | 'hand' | 'shape' | 'fill' | 'text'; // | 'transform' | 'select'\n\nconst MIN_SCALE = 1 / 16;\nconst MAX_SCALE = 64;\nenum TMode {\n    Draw,\n    Hand,\n    HandGrabbing,\n    Pick,\n    Zoom,\n    Rotate,\n    Rotating,\n    Fill,\n    Text,\n    Shape,\n}\nconst ANIMATION_SPEED = 0.3; // rate of transition towards targetTransform\n\n/**\n * Work area that displays the KlCanvas.\n * - pan, zoom, rotate (also via multi-touch)\n * - input modes: drawing, hand, pick, fill, text // transform, select\n * - drawing input events\n * - view change events\n * - eyedropper input events (pick)\n * - draws cursor, eyedropper overlay\n *\n * subscribes to klCanvas changes\n * listens to kl history for changes\n * and you can manually trigger redraw\n */\nexport class KlCanvasWorkspace {\n\n    private rootEl: HTMLElement;\n    private klCanvas: KlCanvas;\n    private renderTargetCanvas: HTMLCanvasElement;\n    private renderTargetCtx: CanvasRenderingContext2D;\n    private renderWidth: number;\n    private renderHeight: number;\n    private compositeCanvas: HTMLCanvasElement; // for drawing klcanvas layer composite\n    private compositeCtx: CanvasRenderingContext2D;\n    private doResizeCanvas: boolean;\n    private oldTransformObj: ITransform;\n    private targetTransformObj: ITransform; // animation target\n    private highResTransformObj: ITransform; // animated, internal high res\n    private renderedTransformObj: ITransform; // same as highRes, but rounded - what's actually displayed\n    private cursorPos: IVector2D;\n    private usesCssCursor: boolean;\n    private bgVisible: boolean;\n    private transformIsDirty: boolean;\n    private doAnimateTranslate: boolean;\n    private svgOverlay: WorkspaceSvgOverlay;\n    private emptyCanvas: HTMLCanvasElement;\n    private keyListener: KeyListener;\n    private currentMode: TMode;\n    private globalMode: TMode;\n    private renderTime: number; // for debugging - average ms per render()\n    private lastDrawEvent: IPressureInput | null; // previous drawing input\n    private linetoolProcessor: any; // todo type - BB.EventChain.LinetoolProcessor\n    private pointer: IVector2D | null; // position of cursor\n    private isDrawing: boolean;\n    private inputProcessorObj: any; // todo type\n    private currentInputProcessor: any; // todo type\n    private angleIsExtraSticky: boolean;\n    private pinchZoomer: any; // todo type - BB.EventChain.PinchZoomer\n    private mainDoubleTapper: any; // todo type - BB.EventChain.DoubleTapper - todo docs\n    private middleDoubleTapper: any; // todo type - BB.EventChain.DoubleTapper - todo docs\n    private twoFingerTap: any; // todo type - BB.EventChain.NFingerTapper\n    private threeFingerTap: any; // todo type - BB.EventChain.NFingerTapper\n    private pointerEventChain: any; // todo type - BB.EventChain.EventChain\n    private pointerListener: any; // todo type - BB.PointerListener\n    private brushRadius: number;\n    private animationFrameRequested: boolean;\n    private lastRenderedState: number; // KlHistory state - to detect if there are changes to draw\n    private lastRenderTime: number; // ms from performance.now()\n    private hideBrushCursorTimeout: number;\n    private onViewChange: (e:  IViewChangeEvent) => void;\n\n    private getRenderedTransform (): ITransform {\n        // rounded x & y so canvas is less blurry.\n        const result = this.renderedTransformObj;\n        result.x = this.highResTransformObj.x;\n        result.y = this.highResTransformObj.y;\n        result.scale = this.highResTransformObj.scale;\n        result.angle = this.highResTransformObj.angle;\n\n        if (result.angle % (Math.PI / 2) === 0 && result.scale % 1 === 0) {\n            result.x = Math.round(result.x);\n            result.y = Math.round(result.y);\n        }\n\n        return result;\n    }\n\n    private updateChangeListener (): void {\n        this.klCanvas.addChangeListener(() => {\n            this.lastRenderedState = -1;\n            this.reqFrame();\n        });\n    }\n\n    private updateCursor (modeInt: TMode, doForce?: boolean): void {\n        if (modeInt === this.currentMode && !doForce) {\n            return;\n        }\n        const oldMode = this.currentMode;\n        this.currentMode = modeInt;\n        this.lastRenderedState = -1;\n        if (this.currentMode === TMode.Draw) {\n            this.rootEl.style.cursor = 'crosshair';\n        } else if (this.currentMode === TMode.Hand) {\n            this.rootEl.style.cursor = 'grab';\n        } else if (this.currentMode === TMode.HandGrabbing) {\n            this.rootEl.style.cursor = 'grabbing';\n        } else if (this.currentMode === TMode.Pick) {\n            this.rootEl.style.cursor = \"url('\" + pickerImg + \"') 0 15, crosshair\";\n        } else if (this.currentMode === TMode.Zoom) {\n            this.rootEl.style.cursor = \"url('\" + zoomEwImg + \"') 7 7, zoom-in\";\n        } else if (this.currentMode === TMode.Rotate) {\n            this.rootEl.style.cursor = \"grab\";\n        } else if (this.currentMode === TMode.Rotating) {\n            this.rootEl.style.cursor = \"grabbing\";\n        } else if (this.currentMode === TMode.Fill) {\n            this.rootEl.style.cursor = \"url('\" + fillImg + \"') 1 12, crosshair\";\n        } else if (this.currentMode === TMode.Text) {\n            this.rootEl.style.cursor = \"url('\" + textImg + \"') 1 12, crosshair\";\n        } else if (this.currentMode === TMode.Shape) {\n            this.rootEl.style.cursor = 'crosshair';\n        }\n\n        if ([TMode.Draw, TMode.Pick, TMode.Fill, TMode.Text, TMode.Shape].includes(this.globalMode)) {\n            const oldIsHand = [TMode.Hand, TMode.HandGrabbing].includes(oldMode);\n            const currentIsHand = [TMode.Hand, TMode.HandGrabbing].includes(this.currentMode);\n            if (!oldIsHand && currentIsHand) {\n                this.mainDoubleTapper.setAllowedPointerTypeArr(['mouse', 'pen', 'touch']);\n            }\n            if (oldIsHand && !currentIsHand) {\n                this.mainDoubleTapper.setAllowedPointerTypeArr(['touch']);\n            }\n        }\n\n        if (this.currentMode !== TMode.Pick) {\n            this.svgOverlay.updateColorPreview({isVisible: false});\n        }\n    }\n\n    /**\n     * returns false if no change of zoom\n     * @param stepNum\n     * @param centerX\n     * @param centerY\n     * @private\n     */\n    private internalZoomByStep (stepNum: number, centerX: number, centerY: number): boolean {\n        const step = Math.log2(this.targetTransformObj.scale);\n\n        let newStep = step / Math.abs(stepNum);\n        newStep += stepNum > 0 ? 1 : -1;\n        newStep = Math.round(newStep);\n        newStep *= Math.abs(stepNum);\n        const newScale = Math.max(MIN_SCALE, Math.min(MAX_SCALE, Math.pow(2, newStep)));\n\n        //has zoomed?\n        if (newScale === this.targetTransformObj.scale) {\n            return false;\n        }\n\n\n        const effectiveFactor = newScale / this.targetTransformObj.scale;\n        this.targetTransformObj.scale = newScale;\n\n        let matrix = BB.Matrix.getIdentity();\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(centerX, centerY));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(effectiveFactor));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-centerX, -centerY));\n\n        let origin = [this.targetTransformObj.x, this.targetTransformObj.y, 0, 1];\n        origin = BB.Matrix.multiplyMatrixAndPoint(matrix, origin);\n        this.targetTransformObj.x = origin[0];\n        this.targetTransformObj.y = origin[1];\n\n        this.transformIsDirty = true;\n\n        return true;\n    }\n\n    /**\n     * mixes two transform objects. modifies A\n     * @param transformA\n     * @param transformB\n     * @param blendFactor 0 -> A, 1 -> B\n     * @private\n     */\n    private mixTransformObj (transformA: ITransform, transformB: ITransform, blendFactor: number): void {\n        if (transformA.angle === transformB.angle) {\n            transformA.scale = BB.mix(transformA.scale, transformB.scale, blendFactor);\n            transformA.x = BB.mix(transformA.x, transformB.x, blendFactor);\n            transformA.y = BB.mix(transformA.y, transformB.y, blendFactor);\n            transformA.angle = BB.mix(transformA.angle, transformB.angle, blendFactor);\n            return;\n        }\n\n        const w = this.klCanvas.getWidth();\n        const h = this.klCanvas.getHeight();\n\n        // --- determine centerPosA, centerPosB ---\n        const centerPosA = this.canvasToWorkspaceCoord({\n            x: w / 2,\n            y: h / 2\n        }, transformA);\n        const centerPosB = this.canvasToWorkspaceCoord({\n            x: w / 2,\n            y: h / 2\n        }, transformB);\n\n        // --- centerPosMixed ---\n        transformA.x = BB.mix(centerPosA.x , centerPosB.x, blendFactor);\n        transformA.y = BB.mix(centerPosA.y , centerPosB.y, blendFactor);\n\n        // --- scale and angle ---\n        transformA.scale = BB.mix(transformA.scale, transformB.scale, blendFactor);\n        transformA.angle = BB.mix(transformA.angle, transformB.angle, blendFactor);\n\n        // --- x and y ---\n        const mixedPos = this.canvasToWorkspaceCoord({\n            x: -w / 2,\n            y: -h / 2\n        }, transformA);\n        transformA.x = mixedPos.x;\n        transformA.y = mixedPos.y;\n    }\n\n    private render (): void {\n        if (this.doResizeCanvas) {\n            this.doResizeCanvas = false;\n            this.renderTargetCanvas.width = this.renderWidth;\n            this.renderTargetCanvas.height = this.renderHeight;\n        }\n        this.renderContext(this.renderTargetCtx);\n    }\n\n    /**\n     * is the gray background that surrounds canvas visible?\n     * @private\n     */\n    private testBgVisible (): boolean {\n        //bring workspace points (corners of workspace) into canvas coordinate system\n        //then check if any corner point is outside of the canvas -> that means the bg is visible\n\n        const workspacePointArr = [\n            [0, 0], // top left\n            [this.renderWidth, 0], // top right\n            [this.renderWidth, this.renderHeight], // bottom right\n            [0, this.renderHeight], // bottom left\n        ];\n\n        const art = this.getRenderedTransform();\n\n        //setup transformation matrix\n        let matrix = BB.Matrix.getIdentity();\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(1/art.scale));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(-art.angle));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-art.x, -art.y));\n\n        //transform points, then test if outside of canvas\n        for (let i = 0; i < workspacePointArr.length; i++) {\n            let coords = [workspacePointArr[i][0], workspacePointArr[i][1], 0, 1];\n            coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n\n            if (\n                !(0 <= coords[0] && coords[0] <= this.klCanvas.getWidth() &&\n                    0 <= coords[1] && coords[1] <= this.klCanvas.getHeight())\n            ){\n                //if not inside -> bg visible\n                return true;\n            }\n        }\n        return false;\n    }\n\n    private renderContext (ctx: CanvasRenderingContext2D): void {\n        const w = this.klCanvas.getWidth();\n        const h = this.klCanvas.getHeight();\n\n        const art = this.getRenderedTransform();\n\n        if (art.scale >= 4 || (art.scale === 1 && art.angle === 0)) {\n            ctx.imageSmoothingEnabled = false;\n        } else {\n            ctx.imageSmoothingEnabled = true;\n            ctx.imageSmoothingQuality  = 'low'; // art.scale >= 1 ? 'low' : 'medium';\n        }\n        //ctx.imageSmoothingEnabled = false;\n        //renderTargetCtx.globalCompositeOperation  = 'multiply';\n\n\n\n        ctx.save();\n        {\n            if (this.bgVisible) {\n                ctx.fillStyle = 'rgb(158,158,158)'; // 'rgb(185,185,185)';\n                ctx.fillRect(0, 0, this.renderWidth, this.renderHeight);\n            } else {\n                ctx.clearRect(0, 0, this.renderWidth, this.renderHeight);\n            }\n\n\n\n            if (this.bgVisible) {\n                ctx.save();\n\n                ctx.translate(art.x, art.y);\n                ctx.scale(art.scale, art.scale);\n                ctx.rotate(art.angle);\n\n                ctx.imageSmoothingEnabled = false;\n\n                //outline\n                const borderSize = 1;\n                ctx.globalAlpha = 0.2;\n                ctx.drawImage(\n                    this.emptyCanvas,\n                    -borderSize / art.scale,\n                    -borderSize / art.scale,\n                    w + borderSize * 2 / art.scale,\n                    h + borderSize * 2 / art.scale\n                );\n                ctx.globalAlpha = 1;\n\n                //erase\n                ctx.globalCompositeOperation = 'destination-out';\n                ctx.drawImage(this.emptyCanvas, 0, 0, w, h);\n\n                ctx.restore();\n            }\n\n            /*const region = new Path2D();\n            region.rect(80, 10, 20, 130);\n            ctx.clip(region);*/\n\n            ctx.translate(art.x, art.y);\n            ctx.scale(art.scale, art.scale);\n            ctx.rotate(art.angle);\n\n            const layerArr = this.klCanvas.getLayersFast();\n            for (let i = 0; i < layerArr.length; i++) {\n                if (layerArr[i].opacity > 0) {\n                    ctx.globalAlpha = layerArr[i].opacity;\n                    ctx.globalCompositeOperation = layerArr[i].mixModeStr;\n\n                    if (layerArr[i].canvas.compositeObj) {\n                        if (this.compositeCanvas.width !== layerArr[i].canvas.width || this.compositeCanvas.height !== layerArr[i].canvas.height) {\n                            this.compositeCanvas.width = layerArr[i].canvas.width;\n                            this.compositeCanvas.height = layerArr[i].canvas.height;\n                        } else {\n                            this.compositeCtx.clearRect(0, 0, this.compositeCanvas.width, this.compositeCanvas.height);\n                        }\n                        this.compositeCtx.drawImage(layerArr[i].canvas, 0, 0);\n                        layerArr[i].canvas.compositeObj.draw(this.compositeCtx);\n                        ctx.drawImage(this.compositeCanvas, 0, 0, w, h);\n                    } else {\n                        ctx.drawImage(layerArr[i].canvas, 0, 0, w, h);\n                    }\n                }\n            }\n            ctx.globalAlpha = 1;\n\n\n\n        }\n        ctx.restore();\n\n        // rotation hud\n        if (TMode.Rotate === this.currentMode || TMode.Rotating === this.currentMode) {\n            this.svgOverlay.updateCompass({\n                isVisible: true,\n                angleDeg: art.angle / Math.PI * 180\n            });\n        } else {\n            this.svgOverlay.updateCompass({\n                isVisible: false\n            });\n        }\n    }\n\n    private workspaceToCanvasCoord (p: IVector2D): IVector2D {\n        const art = this.getRenderedTransform();\n        let matrix = BB.Matrix.getIdentity();\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(1/art.scale));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(-art.angle));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-art.x, -art.y));\n\n        let coords = [p.x, p.y, 0, 1];\n        coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n\n        return {\n            x: coords[0],\n            y: coords[1],\n        };\n    }\n\n    private canvasToWorkspaceCoord (p: IVector2D, transformObj: ITransform): IVector2D {\n        let matrix = BB.Matrix.getIdentity();\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(transformObj.x, transformObj.y));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(transformObj.angle));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(transformObj.scale));\n\n        let coords = [p.x, p.y, 0, 1];\n        coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n\n        return {\n            x: coords[0],\n            y: coords[1],\n        };\n    }\n\n    private snapAngleRad (angleRad: number, snapDegIncrement: number, maxDistDeg: number): number {\n        let angleDeg = angleRad * 180 / Math.PI;\n        const modDeg = Math.abs(angleDeg % snapDegIncrement);\n        const dist = Math.min(modDeg, snapDegIncrement - modDeg);\n\n        if (dist <= maxDistDeg) {\n            angleDeg = Math.round(angleDeg / snapDegIncrement) * snapDegIncrement;\n        }\n\n        return angleDeg / 180 * Math.PI;\n    }\n\n    /**\n     * angle always in range [-PI, PI]\n     * @param angleRad\n     * @private\n     */\n    private minimizeAngleRad (angleRad: number): number {\n        angleRad = angleRad % (2 * Math.PI);\n        if (angleRad > Math.PI) {\n            angleRad -= 2 * Math.PI;\n        } else if (angleRad < -Math.PI) {\n            angleRad += 2 * Math.PI;\n        }\n        return angleRad;\n    }\n\n    private resetInputProcessor (): void {\n        this.currentInputProcessor = null;\n        this.updateCursor(this.globalMode);\n        this.reqFrame(true);\n    }\n\n    private reqFrame (doRedrawCanvas?: boolean): void {\n        this.animationFrameRequested = true;\n        if (doRedrawCanvas) {\n            this.lastRenderedState = -1;\n        }\n    }\n\n    private updateLoop (): void {\n        window.requestAnimationFrame(() => this.updateLoop());\n        const newState = klHistory.getState();\n        const doRender = this.lastRenderedState < newState;\n\n        //handle variable framerate\n        const nowTime = performance.now();\n        const elapsedFrames = (nowTime - this.lastRenderTime) * 60 / 1000; //how many frames elapsed since last render if fps were 60fps\n        this.lastRenderTime = nowTime;\n\n        if (this.animationFrameRequested || doRender) {\n            this.animationFrameRequested = false;\n            this.checkChange(elapsedFrames);\n        }\n    }\n\n    private checkChange (elapsedFrames: number): void {\n\n        const newState = klHistory.getState();\n        const doRender = this.lastRenderedState < newState ||\n            this.highResTransformObj.scale !== this.targetTransformObj.scale ||\n            this.highResTransformObj.x !== this.targetTransformObj.x ||\n            this.highResTransformObj.y !== this.targetTransformObj.y;\n\n        //update transform\n        if (\n            !this.doAnimateTranslate &&\n            (\n                this.highResTransformObj.scale === this.targetTransformObj.scale ||\n                Math.abs(this.highResTransformObj.scale - this.targetTransformObj.scale) < 0.008 * this.targetTransformObj.scale\n            )\n        ) {\n            this.highResTransformObj.scale = this.targetTransformObj.scale;\n            this.highResTransformObj.x = this.targetTransformObj.x;\n            this.highResTransformObj.y = this.targetTransformObj.y;\n            this.highResTransformObj.angle = this.targetTransformObj.angle;\n            if (this.transformIsDirty) {\n                this.transformIsDirty = false;\n                this.bgVisible = this.testBgVisible();\n            }\n\n            this.svgOverlay.updateCursor({radius: this.brushRadius * this.highResTransformObj.scale});\n        } else if (\n            (this.highResTransformObj.x === this.targetTransformObj.x || Math.abs(this.highResTransformObj.x - this.targetTransformObj.x) < 0.5) &&\n            (this.highResTransformObj.y === this.targetTransformObj.y || Math.abs(this.highResTransformObj.y - this.targetTransformObj.y) < 0.5) &&\n            (\n                this.highResTransformObj.scale === this.targetTransformObj.scale ||\n                Math.abs(this.highResTransformObj.scale - this.targetTransformObj.scale) < 0.008 * this.targetTransformObj.scale\n            )\n        ) {\n            this.highResTransformObj.scale = this.targetTransformObj.scale;\n            this.highResTransformObj.x = this.targetTransformObj.x;\n            this.highResTransformObj.y = this.targetTransformObj.y;\n            this.highResTransformObj.angle = this.targetTransformObj.angle;\n            this. doAnimateTranslate = false;\n            if (this.transformIsDirty) {\n                this.transformIsDirty = false;\n                this.bgVisible = this.testBgVisible();\n            }\n\n            this.svgOverlay.updateCursor({radius: this.brushRadius * this.highResTransformObj.scale});\n        } else {\n            this.reqFrame(); //probably needs another frame\n            const blendFactor = Math.min(1, ANIMATION_SPEED * elapsedFrames);\n            this.mixTransformObj(this.highResTransformObj, this.targetTransformObj, blendFactor);\n            this.bgVisible = true; // spare yourself the calculation\n            this.svgOverlay.updateCursor({radius: this.brushRadius * this.highResTransformObj.scale});\n        }\n\n        if (this.pointer && this.currentMode == TMode.Draw && !this.usesCssCursor) {\n            this.svgOverlay.updateCursor({\n                x: this.pointer.x,\n                y: this.pointer.y,\n                isVisible: true\n            });\n        } else {\n            this.svgOverlay.updateCursor({isVisible: false});\n        }\n\n\n        if (doRender) {\n            //console.log('scale', this.renderedTransform.scale, 'x', this.renderedTransform.x, 'y', this.renderedTransform.y);\n            this.lastRenderedState = newState;\n            const start = performance.now();\n            this.render();\n            this.renderTime = BB.mix(this.renderTime, performance.now() - start, 0.05);\n        }\n        //setTimeout(this.checkChange, 100);\n\n\n\n        if (doRender) {\n\n            //console.log('rendertime ms: ', this.renderTime);\n        }\n\n    }\n\n    // ---- public ----\n\n    constructor (\n        p: {\n            klCanvas: any; // todo\n            width: number;\n            height: number;\n            onDraw: (val) => void; // todo\n            onPick: (rgb: IRGB, isPointerup: boolean) => void;\n            onFill: (canvasX: number, canvasY: number) => void;\n            onText: (canvasX: number, canvasY: number, angleRad: number) => void;\n            onShape: (type: 'down' | 'up' | 'move', canvasX: number, canvasY: number, angleRad: number) => void;\n            onViewChange: (e:  IViewChangeEvent) => void;\n            onUndo: () => void;\n            onRedo: () => void;\n        }\n    ) {\n        const _this = this;\n        this.rootEl = BB.el({\n            css: {\n                position: 'absolute',\n                left: '0',\n                right: '0',\n                top: '0',\n                bottom: '0',\n                cursor: 'crosshair',\n                userSelect: 'none',\n                colorScheme: 'only light',\n            }\n        });\n        this.klCanvas = p.klCanvas;\n        this.onViewChange = p.onViewChange;\n        this.renderTargetCanvas = BB.canvas(p.width, p.height);\n        this.renderTargetCtx = this.renderTargetCanvas.getContext('2d');\n        this.renderWidth = p.width;\n        this.renderHeight = p.height;\n        this.compositeCanvas = BB.canvas(1, 1); // for drawing klcanvas layer composite\n        this.compositeCtx = this.compositeCanvas.getContext('2d');\n        this.doResizeCanvas = false;\n        this.oldTransformObj = null;\n        this.targetTransformObj = {\n            x: 0,\n            y: 0,\n            scale: 1,\n            angle: 0\n        };\n        this.highResTransformObj = {\n            x: 0,\n            y: 0,\n            scale: 1,\n            angle: 0\n        };\n        this.renderedTransformObj = {\n            x: null,\n            y: null,\n            scale: null,\n            angle: null\n        };\n        this.cursorPos = {\n            x: 0,\n            y: 0\n        };\n        this.usesCssCursor = false;\n        this.bgVisible = true;\n        this.transformIsDirty = true;\n        this.doAnimateTranslate = true;\n\n        this.svgOverlay = new WorkspaceSvgOverlay({\n            width: p.width,\n            height: p.height\n        });\n\n        BB.css(this.renderTargetCanvas, {\n            userSelect: 'none',\n            pointerEvents: 'none',\n        });\n        BB.createCheckerDataUrl(8, (url) => {\n            this.renderTargetCanvas.style.background = \"url(\" + url + \")\";\n        });\n        this.rootEl.appendChild(this.renderTargetCanvas);\n        this.rootEl.appendChild(this.svgOverlay.getElement());\n        BB.addEventListener(this.rootEl, 'touchend', (e) => {\n            e.preventDefault();\n            return false;\n        });\n        BB.addEventListener(this.rootEl, 'contextmenu', (e) => {\n            e.preventDefault();\n            return false;\n        });\n        BB.addEventListener(this.rootEl, 'dragstart', (e) => {\n            e.preventDefault();\n            return false;\n        });\n\n        this.emptyCanvas = BB.canvas(1, 1);\n        {\n            const ctx = this.emptyCanvas.getContext('2d');\n            ctx.fillRect(0, 0, 1, 1);\n        }\n\n        this.keyListener = new BB.KeyListener({\n            onDown: (keyStr, event, comboStr, isRepeat) => {\n\n                if (keyStr === 'alt') {\n                    event.preventDefault();\n                }\n                if (isRepeat) {\n                    return;\n                }\n\n                if (this.currentInputProcessor) {\n                    this.currentInputProcessor.onKeyDown(keyStr, event, comboStr, isRepeat);\n\n                } else {\n\n                    if ([TMode.Draw, TMode.Pick, TMode.Fill, TMode.Text, TMode.Shape].includes(this.globalMode) && comboStr === 'space') {\n                        this.currentInputProcessor = this.inputProcessorObj.spaceHand;\n                        this.currentInputProcessor.onKeyDown(keyStr, event, comboStr, isRepeat);\n                        return;\n                    }\n\n                    if ([TMode.Draw, TMode.Hand, TMode.Fill, TMode.Text, TMode.Shape].includes(this.globalMode) && comboStr === 'alt') {\n                        this.currentInputProcessor = this.inputProcessorObj.altPicker;\n                        this.currentInputProcessor.onKeyDown(keyStr, event, comboStr, isRepeat);\n                        return;\n                    }\n\n                    if (['r', 'shift+r'].includes(comboStr)) {\n                        this.currentInputProcessor = this.inputProcessorObj.rotate;\n                        this.currentInputProcessor.onKeyDown(keyStr, event, comboStr, isRepeat);\n                        return;\n                    }\n\n                    if ('z' === comboStr) {\n                        this.currentInputProcessor = this.inputProcessorObj.zoom;\n                        this.currentInputProcessor.onKeyDown(keyStr, event, comboStr, isRepeat);\n                        return;\n                    }\n\n                }\n\n            },\n            onUp: (keyStr, event, oldComboStr) => {\n                if (this.currentInputProcessor) {\n                    this.currentInputProcessor.onKeyUp(keyStr, event, oldComboStr);\n                }\n            }\n        });\n\n        this.updateChangeListener();\n\n        this.currentMode = TMode.Draw;\n        this.globalMode = TMode.Draw;\n\n        this.renderTime = 0;\n\n        this.lastDrawEvent = null;\n\n        this.linetoolProcessor = new BB.EventChain.LinetoolProcessor({\n            onDraw: (event) => {\n                const getMatrix = () => {\n                    const art = this.getRenderedTransform();\n                    let matrix = BB.Matrix.getIdentity();\n                    matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(1/art.scale));\n                    matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(-art.angle));\n                    matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-art.x, -art.y));\n                    return matrix;\n                };\n\n                if (event.type === 'line' && !this.lastDrawEvent) {\n                    const matrix = getMatrix();\n                    let coords = [event.x1, event.y1, 0, 1];\n                    coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n                    this.lastDrawEvent = {\n                        x: coords[0],\n                        y: coords[1],\n                        pressure: event.pressure1\n                    };\n                    return;\n                }\n\n                if ('x' in event || 'x0' in event) {\n\n                    const matrix = getMatrix();\n\n                    if ('x' in event) { //down or move\n                        let coords = [event.x, event.y, 0, 1];\n                        coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n                        event.x = coords[0];\n                        event.y = coords[1];\n                    }\n                    if ('x0' in event) { //line\n                        event.x0 = this.lastDrawEvent.x;\n                        event.y0 = this.lastDrawEvent.y;\n                        event.pressure0 = this.lastDrawEvent.pressure;\n                        let coords = [event.x1, event.y1, 0, 1];\n                        coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n                        event.x1 = coords[0];\n                        event.y1 = coords[1];\n\n                        this.lastDrawEvent = {\n                            x: event.x1,\n                            y: event.y1,\n                            pressure: event.pressure1,\n                        };\n                    }\n                }\n\n\n                if (['down', 'move'].includes(event.type)) {\n                    this.lastDrawEvent = event;\n                }\n                p.onDraw(event);\n            }\n        });\n\n        this.pointer = null;\n        this.isDrawing = false;\n\n\n        this.inputProcessorObj = {\n            draw: {\n                onPointer: (val) => {\n\n                    this.reqFrame();\n                    this.updateCursor(TMode.Draw);\n\n                    const comboStr = this.keyListener.getComboStr();\n\n                    const event: any = {\n                        scale: this.highResTransformObj.scale\n                    };\n                    event.shiftIsPressed = comboStr === 'shift';\n                    event.pressure = val.pressure;\n                    event.isCoalesced = !!val.isCoalesced;\n\n                    if (val.type === 'pointerdown') {\n\n                        this.isDrawing = true;\n                        event.type = 'down';\n\n                    } else if (val.button) {\n                        event.type = 'move';\n\n                    } else if (val.type === 'pointerup') {\n\n                        this.isDrawing = false;\n                        event.type = 'up';\n\n                        this.linetoolProcessor.process(event);\n                        this.resetInputProcessor();\n                        return;\n                    } else {\n                        return;\n                    }\n\n                    event.x = val.relX;\n                    event.y = val.relY;\n\n                    this.linetoolProcessor.process(event);\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n\n                }\n            },\n            fill: {\n                onPointer: (event) => {\n\n                    this.reqFrame();\n                    this.updateCursor(TMode.Fill);\n\n                    if (event.type === 'pointerdown') {\n                        const coord = this.workspaceToCanvasCoord({x: event.relX, y: event.relY});\n                        p.onFill(Math.floor(coord.x), Math.floor(coord.y));\n\n                    } else if (event.type === 'pointerup') {\n                        this.resetInputProcessor();\n                        return;\n\n                    }\n\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n\n                }\n            },\n            text: {\n                onPointer: (event) => {\n\n                    this.reqFrame();\n                    this.updateCursor(TMode.Text);\n\n                    if (event.type === 'pointerdown') {\n                        const coord = this.workspaceToCanvasCoord({x: event.relX, y: event.relY});\n                        p.onText(Math.floor(coord.x), Math.floor(coord.y), this.renderedTransformObj.angle);\n\n                    } else if (event.type === 'pointerup') {\n                        this.resetInputProcessor();\n                        return;\n\n                    }\n\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n\n                }\n            },\n            shape: {\n                onPointer: (event) => {\n\n                    this.reqFrame();\n                    this.updateCursor(TMode.Shape);\n                    const coord = this.workspaceToCanvasCoord({x: event.relX, y: event.relY});\n\n                    if (event.type === 'pointerdown') {\n                        this.isDrawing = true;\n                        p.onShape('down', coord.x, coord.y, this.renderedTransformObj.angle);\n\n                    } else if (event.type === 'pointermove') {\n                        p.onShape('move', coord.x, coord.y, this.renderedTransformObj.angle);\n\n                    } else if (event.type === 'pointerup') {\n                        this.isDrawing = false;\n                        p.onShape('up', coord.x, coord.y, this.renderedTransformObj.angle);\n                        this.resetInputProcessor();\n\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n\n                }\n            },\n            hand: {\n                onPointer: (event) => {\n                    this.updateCursor(TMode.Hand);\n                    if (['left', 'middle'].includes(event.button)) {\n                        this.updateCursor(TMode.HandGrabbing);\n                        this.targetTransformObj.x += event.dX;\n                        this.targetTransformObj.y += event.dY;\n                        this.highResTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n                        this.doAnimateTranslate = false;\n                        this.transformIsDirty = true;\n                        this.reqFrame(true);\n                    } else if (event.type === 'pointerup') {\n                        this.resetInputProcessor();\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n\n                }\n            },\n            spaceHand: {\n                onPointer: (event) => {\n                    this.updateCursor(TMode.Hand);\n                    if (['left', 'middle'].includes(event.button)) {\n                        this.updateCursor(TMode.HandGrabbing);\n                        this.targetTransformObj.x += event.dX;\n                        this.targetTransformObj.y += event.dY;\n                        this.highResTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n                        this.doAnimateTranslate = false;\n                        this.transformIsDirty = true;\n                        this.reqFrame(true);\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n                    if (comboStr !== 'space') {\n                        this.resetInputProcessor();\n                    } else {\n                        this.updateCursor(TMode.Hand);\n                    }\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n                    this.resetInputProcessor();\n                }\n            },\n            zoom: {\n                onPointer: (event) => {\n                    this.updateCursor(TMode.Zoom);\n\n                    if (event.button === 'left' && !event.isCoalesced && event.dX != 0) {\n\n                        const offsetX = event.pageX - event.relX;\n                        const offsetY = event.pageY - event.relY;\n\n                        this.internalZoomByStep(event.dX / 175, event.downPageX - offsetX, event.downPageY - offsetY);\n                        this.highResTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n                        this.lastRenderedState = -1;\n                        this.reqFrame();\n\n                        this.onViewChange({\n                            changed: ['scale'],\n                            angle: this.targetTransformObj.angle,\n                            scale: this.targetTransformObj.scale\n                        });\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n                    if (comboStr !== 'z') {\n                        this.resetInputProcessor();\n                    } else {\n                        this.updateCursor(TMode.Zoom);\n                    }\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n                    this.resetInputProcessor();\n                }\n            },\n            picker: {\n                onPointer: (event) => {\n                    this.updateCursor(TMode.Pick);\n                    if (\n                        (['left', 'right'].includes(event.button) && !event.isCoalesced) ||\n                        event.type === 'pointerup'\n                    ) {\n                        const coord = this.workspaceToCanvasCoord({x: event.relX, y: event.relY});\n                        const pickedColor = this.klCanvas.getColorAt(coord.x, coord.y);\n                        p.onPick(pickedColor, event.type === 'pointerup');\n                        this.svgOverlay.updateColorPreview({\n                            x: event.relX,\n                            y: event.relY,\n                            color: pickedColor,\n                            isVisible: event.type !== 'pointerup'\n                        });\n\n                        if (event.type === 'pointerup') {\n                            this.resetInputProcessor();\n                        }\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n\n                }\n            },\n            altPicker: {\n                onPointer: (event) => {\n                    this.updateCursor(TMode.Pick);\n                    if (\n                        (['left', 'right'].includes(event.button) && !event.isCoalesced) ||\n                        event.type === 'pointerup'\n                    ) {\n                        const coord = this.workspaceToCanvasCoord({x: event.relX, y: event.relY});\n                        const pickedColor = this.klCanvas.getColorAt(coord.x, coord.y);\n                        p.onPick(pickedColor, event.type === 'pointerup');\n                        this.svgOverlay.updateColorPreview({\n                            x: event.relX,\n                            y: event.relY,\n                            color: pickedColor,\n                            isVisible: event.type !== 'pointerup'\n                        });\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n                    if (comboStr !== 'alt') {\n                        this.resetInputProcessor();\n                    } else {\n                        this.updateCursor(TMode.Pick);\n                    }\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n                    this.resetInputProcessor();\n                }\n            },\n            rotate: {\n                onPointer: (event) => {\n                    this.updateCursor(event.button === 'left' ? TMode.Rotating : TMode.Rotate);\n\n                    if (event.type === 'pointerdown' && event.button === 'left') {\n                        this.oldTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n                    } else if (event.button === 'left' && !event.isCoalesced && this.oldTransformObj) {\n\n\n                        const offsetX = event.pageX - event.relX;\n                        const offsetY = event.pageY - event.relY;\n                        //rotation done around center\n                        const centerObj = {\n                            x: this.renderWidth / 2,\n                            y: this.renderHeight / 2\n                        };\n\n                        const startAngleRad = BB.Vec2.angle(centerObj, {x: event.downPageX - offsetX, y: event.downPageY - offsetY});\n                        const angleRad = BB.Vec2.angle(centerObj, {x: event.pageX - offsetX, y: event.pageY - offsetY});\n                        let dAngleRad = angleRad - startAngleRad;\n\n                        //apply angle\n                        this.targetTransformObj = JSON.parse(JSON.stringify(this.oldTransformObj));\n                        this.targetTransformObj.angle += dAngleRad;\n\n                        if (this.keyListener.isPressed('shift')) {\n                            this.targetTransformObj.angle = Math.round(this.targetTransformObj.angle / Math.PI * 8) * Math.PI / 8; //snap the angle to 45/2 degs\n                            dAngleRad = this.targetTransformObj.angle - this.oldTransformObj.angle;\n                        }\n\n                        this.targetTransformObj.angle = this.minimizeAngleRad(this.targetTransformObj.angle);\n\n                        //rotate transform.xy\n                        let matrix = BB.Matrix.getIdentity();\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(centerObj.x, centerObj.y));\n                        //matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(effectiveFactor));\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(dAngleRad));\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-centerObj.x, -centerObj.y));\n                        //matrix = multiplyMatrices(matrix, createTranslationMatrix(val.x - val.startX, val.y - val.startY));\n\n                        let origin = [this.targetTransformObj.x, this.targetTransformObj.y, 0, 1];\n                        origin = BB.Matrix.multiplyMatrixAndPoint(matrix, origin);\n                        this.targetTransformObj.x = origin[0];\n                        this.targetTransformObj.y = origin[1];\n\n                        this.highResTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n\n                        this.transformIsDirty = true;\n                        this.lastRenderedState = -1;\n                        this.reqFrame();\n\n                        this.onViewChange({\n                            changed: ['angle'],\n                            scale: this.targetTransformObj.scale,\n                            angle: this.targetTransformObj.angle\n                        });\n\n                    }\n                },\n                onKeyDown: (keyStr, event, comboStr, isRepeat) => {\n                    if (['r', 'r+shift', 'shift+r', 'r+left', 'r+right', 'r+left+right', 'r+right+left', 'r+up'].includes(comboStr)) {\n                        this.updateCursor(TMode.Rotate);\n                    } else {\n                        this.resetInputProcessor();\n                    }\n                },\n                onKeyUp: (keyStr, event, oldComboStr) => {\n                    const comboStr = this.keyListener.getComboStr();\n                    if (['r', 'r+shift', 'shift+r', 'r+left', 'r+right', 'r+left+right', 'r+right+left', 'r+up'].includes(comboStr)) {\n                        this.updateCursor(TMode.Rotate);\n                    } else {\n                        this.resetInputProcessor();\n                    }\n                }\n            }\n        };\n        this.currentInputProcessor = null;\n\n\n        this.angleIsExtraSticky = false;\n        this.pinchZoomer = new BB.EventChain.PinchZoomer({\n            onPinch: (event) => {\n\n                if (event.type === 'move') {\n\n                    if (!this.oldTransformObj) {\n                        this.oldTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n                        this.angleIsExtraSticky = this.targetTransformObj.angle % (Math.PI / 2) === 0;\n                    }\n\n                    this.targetTransformObj = JSON.parse(JSON.stringify(this.oldTransformObj));\n\n                    event.scale = Math.max(MIN_SCALE, Math.min(MAX_SCALE, this.targetTransformObj.scale * event.scale)) / this.targetTransformObj.scale;\n\n                    this.targetTransformObj.scale *= event.scale;\n                    this.targetTransformObj.angle += event.angleRad;\n                    this.targetTransformObj.angle = this.minimizeAngleRad(\n                        this.snapAngleRad(\n                            this.targetTransformObj.angle,\n                            90,\n                            this.angleIsExtraSticky ? 12 : 4\n                        )\n                    );\n                    if (this.targetTransformObj.angle % (Math.PI / 2) !== 0) {\n                        this.angleIsExtraSticky = false;\n                    }\n                    //targetTransformObj.angle = minimizeAngleRad(snapAngleRad(targetTransformObj.angle, 90, 7));\n                    event.angleRad = this.targetTransformObj.angle - this.oldTransformObj.angle;\n\n                    //calc translation\n                    {\n                        let matrix = BB.Matrix.getIdentity();\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(event.relX, event.relY));\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createScaleMatrix(event.scale));\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(event.angleRad));\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-event.relX, -event.relY));\n                        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(event.relX - event.downRelX, event.relY - event.downRelY));\n\n\n                        let origin = [this.targetTransformObj.x, this.targetTransformObj.y, 0, 1];\n                        origin = BB.Matrix.multiplyMatrixAndPoint(matrix, origin);\n\n                        this.targetTransformObj.x = origin[0];\n                        this.targetTransformObj.y = origin[1];\n\n                    }\n\n                    this.highResTransformObj = BB.copyObj(this.targetTransformObj);\n\n                    //if (event.scale !== 1) {\n                    this.onViewChange({\n                        changed: ['scale', 'angle'],\n                        scale: this.targetTransformObj.scale,\n                        angle: this.targetTransformObj.angle\n                    });\n                    //}\n                    this.reqFrame();\n                    this.transformIsDirty = true;\n                    this.lastRenderedState = -1;\n\n\n                } else if (event.type === 'end') {\n                    this.oldTransformObj = null;\n                }\n\n\n            }\n        });\n\n        const onDoubleTap = () => {\n            let oldTransform = JSON.parse(JSON.stringify(this.targetTransformObj));\n            _this.fitView();\n            //_this.resetView(true);\n            this.lastRenderedState = -1;\n            this.reqFrame();\n\n            if (\n                oldTransform.scale !== this.targetTransformObj.scale ||\n                oldTransform.angle !== this.targetTransformObj.angle\n            ) {\n                this.onViewChange({\n                    changed: ['scale', 'angle'],\n                    angle: this.targetTransformObj.angle,\n                    scale: this.targetTransformObj.scale\n                });\n            }\n        }\n\n        this.mainDoubleTapper = new BB.EventChain.DoubleTapper({ onDoubleTap });\n        this.middleDoubleTapper = new BB.EventChain.DoubleTapper({ onDoubleTap });\n        this.middleDoubleTapper.setAllowedButtonArr(['middle']);\n\n\n        this.twoFingerTap = new BB.EventChain.NFingerTapper({\n            fingers: 2,\n            onTap: () => {\n                p.onUndo();\n            }\n        });\n        this.threeFingerTap = new BB.EventChain.NFingerTapper({\n            fingers: 3,\n            onTap: () => {\n                p.onRedo();\n            }\n        });\n\n\n        this.pointerEventChain = new BB.EventChain.EventChain({\n            chainArr: [\n                this.twoFingerTap,\n                this.threeFingerTap,\n                this.mainDoubleTapper,\n                this.middleDoubleTapper,\n                this.pinchZoomer,\n                new BB.EventChain.OnePointerLimiter(),\n                new BB.EventChain.CoalescedExploder()\n            ]\n        });\n        this.pointerEventChain.setChainOut((event) => {\n\n            this.cursorPos.x = event.relX;\n            this.cursorPos.y = event.relY;\n            if (event.type === 'pointerup' && event.pointerType === 'touch') {\n                this.pointer = null;\n                this.lastRenderedState = -1;\n                this.reqFrame();\n            } else {\n                if (!this.pointer) {\n                    this.pointer = { x: 0, y: 0 };\n                }\n                this.pointer.x = event.relX;\n                this.pointer.y = event.relY;\n            }\n\n            if (this.currentInputProcessor) {\n                this.currentInputProcessor.onPointer(event);\n\n            } else {\n\n                let comboStr = this.keyListener.getComboStr();\n\n                if (this.globalMode === TMode.Draw) {\n\n                    if (['', 'shift', 'ctrl'].includes(comboStr) && event.type === 'pointerdown' && event.button === 'left') {\n                        this.currentInputProcessor = this.inputProcessorObj.draw;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'right') {\n                        this.currentInputProcessor = this.inputProcessorObj.picker;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'middle') {\n                        this.currentInputProcessor = this.inputProcessorObj.hand;\n                        this.currentInputProcessor.onPointer(event);\n                    } else {\n                        this.updateCursor(TMode.Draw);\n                        this.reqFrame();\n                    }\n\n                } else if (this.globalMode === TMode.Hand) {\n\n                    if (event.type === 'pointerdown' && ['left', 'middle'].includes(event.button)) {\n                        this.currentInputProcessor = this.inputProcessorObj.hand;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'right') {\n                        this.currentInputProcessor = this.inputProcessorObj.picker;\n                        this.currentInputProcessor.onPointer(event);\n                    } else {\n                        this.updateCursor(TMode.Hand);\n                    }\n\n                } else if (this.globalMode === TMode.Pick) {\n\n                    if (event.type === 'pointerdown' && ['left', 'right'].includes(event.button)) {\n                        this.currentInputProcessor = this.inputProcessorObj.picker;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'middle') {\n                        this.currentInputProcessor = this.inputProcessorObj.hand;\n                        this.currentInputProcessor.onPointer(event);\n                    } else {\n                        this.updateCursor(TMode.Pick);\n                    }\n\n                } else if (this.globalMode === TMode.Fill) {\n\n                    if (event.type === 'pointerdown' && event.button === 'left') {\n                        this.currentInputProcessor = this.inputProcessorObj.fill;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'right') {\n                        this.currentInputProcessor = this.inputProcessorObj.picker;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'middle') {\n                        this.currentInputProcessor = this.inputProcessorObj.hand;\n                        this.currentInputProcessor.onPointer(event);\n                    } else {\n                        this.updateCursor(TMode.Fill);\n                        this.reqFrame();\n                    }\n\n                } else if (this.globalMode === TMode.Text) {\n\n                    if (event.type === 'pointerdown' && event.button === 'left') {\n                        this.currentInputProcessor = this.inputProcessorObj.text;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'right') {\n                        this.currentInputProcessor = this.inputProcessorObj.picker;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'middle') {\n                        this.currentInputProcessor = this.inputProcessorObj.hand;\n                        this.currentInputProcessor.onPointer(event);\n                    } else {\n                        this.updateCursor(TMode.Text);\n                        this.reqFrame();\n                    }\n\n                } else if (this.globalMode === TMode.Shape) {\n\n                    if (['', 'shift', 'ctrl'].includes(comboStr) && event.type === 'pointerdown' && event.button === 'left') {\n                        this.currentInputProcessor = this.inputProcessorObj.shape;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'right') {\n                        this.currentInputProcessor = this.inputProcessorObj.picker;\n                        this.currentInputProcessor.onPointer(event);\n                    } else if ([''].includes(comboStr) && event.type === 'pointerdown' && event.button === 'middle') {\n                        this.currentInputProcessor = this.inputProcessorObj.hand;\n                        this.currentInputProcessor.onPointer(event);\n                    } else {\n                        this.updateCursor(TMode.Shape);\n                        this.reqFrame();\n                    }\n\n                }\n\n\n            }\n\n        });\n\n        //prevent ctrl scroll -> zooming page\n        BB.addEventListener(this.rootEl, 'wheel', (event) => {\n            event.preventDefault();\n        });\n\n\n        setTimeout(() => {\n            this.pointerListener = new BB.PointerListener({\n                target: this.rootEl,\n                fixScribble: true,\n                onPointer: (e) => {\n                    if (e.type === 'pointerdown' && e.button === 'middle') {\n                        try {\n                            e.eventPreventDefault();\n                        } catch (e) {}\n                    }\n                    /*if (e.type === 'pointermove') {\n                        BB.throwOut(JSON.stringify(e));\n                    }*/\n\n                    this.pointerEventChain.chainIn(e)\n                },\n                onWheel: (wheelEvent) => {\n\n                    if (this.isDrawing) {\n                        return;\n                    }\n\n                    this.reqFrame();\n                    let didZoom = this.internalZoomByStep(\n                        -wheelEvent.deltaY / (this.keyListener.isPressed('shift') ? 8 : 2),\n                        wheelEvent.relX,\n                        wheelEvent.relY\n                    );\n                    if (didZoom) {\n                        this.onViewChange({\n                            changed: ['scale'],\n                            angle: this.targetTransformObj.angle,\n                            scale: this.targetTransformObj.scale\n                        });\n                    }\n\n                    //updateCursor(TMode.Draw, true);\n                    this.lastRenderedState = -1;\n\n\n                },\n                onEnterLeave: (isOver) => {\n                    if (!isOver) {\n                        if (!this.isDrawing) {\n                            this.pointer = null;\n                            this.lastRenderedState = -1;\n                        }\n                    }\n                },\n                maxPointers: 4\n            });\n        }, 1);\n\n        this.brushRadius = 1;\n\n        this.animationFrameRequested = false;\n\n\n\n\n        //setup rendering\n        this.lastRenderedState = -2;\n        this.lastRenderTime = performance.now();\n\n        window.requestAnimationFrame(() => this.updateLoop());\n\n        this.resetView();\n    }\n\n\n    getElement (): HTMLElement {\n        return this.rootEl;\n    }\n\n    setCanvas (klC: KlCanvas): void {\n        this.klCanvas = klC;\n        this.lastDrawEvent = null;\n        this.resetView();\n\n        this.updateChangeListener();\n\n        this.lastRenderedState = -1;\n        this.reqFrame();\n    }\n\n    /**\n     * set size of workspace area in pixels\n     * @param width\n     * @param height\n     */\n    setSize (width: number, height: number): void {\n        const oldWidth = this.renderWidth;\n        const oldHeight = this.renderHeight;\n\n        if (width === oldWidth && height === oldHeight) {\n            return;\n        }\n\n        this.doResizeCanvas = true;\n        this.renderWidth = width;\n        this.renderHeight = height;\n\n        this.svgOverlay.setSize(width, height);\n\n        this.targetTransformObj.x += (width - oldWidth) / 2;\n        this.targetTransformObj.y += (height - oldHeight) / 2;\n\n        this.highResTransformObj.x = this.targetTransformObj.x;\n        this.highResTransformObj.y = this.targetTransformObj.y;\n\n        this.bgVisible = this.testBgVisible();\n\n        this.lastRenderedState = -1;\n        this.reqFrame();\n    }\n\n    setMode (modeStr: TModeStr): void {\n        //only sets the base mode\n        if (modeStr === 'draw') {\n            this.globalMode = TMode.Draw;\n            this.mainDoubleTapper.setAllowedPointerTypeArr(['touch']);\n        }\n        if (modeStr === 'fill') {\n            this.globalMode = TMode.Fill;\n            this.mainDoubleTapper.setAllowedPointerTypeArr(['touch']);\n        }\n        if (modeStr === 'text') {\n            this.globalMode = TMode.Text;\n            this.mainDoubleTapper.setAllowedPointerTypeArr(['touch']);\n        }\n        if (modeStr === 'shape') {\n            this.globalMode = TMode.Shape;\n            this.mainDoubleTapper.setAllowedPointerTypeArr(['touch']);\n        }\n        if (modeStr === 'hand') {\n            this.globalMode = TMode.Hand;\n            this.mainDoubleTapper.setAllowedPointerTypeArr(['mouse', 'pen', 'touch']);\n        }\n        if (modeStr === 'pick') {\n            this.globalMode = TMode.Pick;\n            this.mainDoubleTapper.setAllowedPointerTypeArr(['touch']);\n        }\n    }\n\n    setEnabled (b: boolean): void {\n        // todo\n    }\n\n    setCursorSize (diameter: number): void {\n        this.brushRadius = diameter / 2;\n\n        this.svgOverlay.updateCursor({radius: this.brushRadius * this.highResTransformObj.scale});\n\n        if (this.pointer === null) {\n            clearTimeout(this.hideBrushCursorTimeout);\n\n            this.svgOverlay.updateCursor({\n                x: this.renderWidth / 2,\n                y: this.renderHeight / 2,\n                isVisible: true\n            });\n\n            // @ts-ignore\n            this.hideBrushCursorTimeout = setTimeout(() => {\n                if (this.pointer !== null) {\n                    return;\n                }\n                this.svgOverlay.updateCursor({isVisible: false});\n            }, 500);\n        }\n    }\n\n    zoomByStep (stepNum: number): void {\n        if (!this.internalZoomByStep(stepNum, this.renderWidth / 2, this.renderHeight / 2)) {\n            return;\n        }\n\n        this.lastRenderedState = -1;\n        this.reqFrame();\n\n        this.onViewChange({\n            changed: ['scale'],\n            angle: this.targetTransformObj.angle,\n            scale: this.targetTransformObj.scale\n        });\n    }\n\n    resetView (doAnimate?: boolean): void {\n        this.targetTransformObj.scale = 1;\n        this.targetTransformObj.angle = 0;\n\n        this.targetTransformObj.x = (this.renderWidth - this.klCanvas.getWidth()) / 2;\n        this.targetTransformObj.y = (this.renderHeight - this.klCanvas.getHeight()) / 2;\n\n        if (!doAnimate) {\n            this.highResTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n        } else {\n            this.doAnimateTranslate = true;\n            this.transformIsDirty = true;\n        }\n\n        this.bgVisible = this.testBgVisible();\n        this.reqFrame();\n\n        if (doAnimate) {\n            this.onViewChange({\n                changed: ['scale', 'angle'],\n                scale: this.targetTransformObj.scale,\n                angle: this.targetTransformObj.angle\n            });\n        }\n    }\n\n    fitView (): void {\n        //fit into view. center. keep angle. margin of 10px\n\n        //calc width and height of bounds\n        const canvasPointsArr = [\n            [0, 0], // top left\n            [this.klCanvas.getWidth(), 0], // top right\n            [this.klCanvas.getWidth(), this.klCanvas.getHeight()], // bottom right\n            [0, this.klCanvas.getHeight()], // bottom left\n            [this.klCanvas.getWidth() / 2, this.klCanvas.getHeight() / 2], // center\n        ];\n\n        //setup transformation matrix\n        let matrix = BB.Matrix.getIdentity();\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(this.targetTransformObj.angle));\n\n        //rotate points\n        for (let i = 0; i < canvasPointsArr.length; i++) {\n            let coords = [canvasPointsArr[i][0], canvasPointsArr[i][1], 0, 1];\n            coords = BB.Matrix.multiplyMatrixAndPoint(matrix, coords);\n            canvasPointsArr[i][0] = coords[0];\n            canvasPointsArr[i][1] = coords[1];\n        }\n\n        const boundsObj = {\n            x0: null,\n            y0: null,\n            x1: null,\n            y1: null\n        };\n        for (let i = 0; i < canvasPointsArr.length; i++) {\n            if (boundsObj.x0 === null || canvasPointsArr[i][0] < boundsObj.x0) {\n                boundsObj.x0 = canvasPointsArr[i][0];\n            }\n            if (boundsObj.y0 === null || canvasPointsArr[i][1] < boundsObj.y0) {\n                boundsObj.y0 = canvasPointsArr[i][1];\n            }\n            if (boundsObj.x1 === null || canvasPointsArr[i][0] > boundsObj.x1) {\n                boundsObj.x1 = canvasPointsArr[i][0];\n            }\n            if (boundsObj.y1 === null || canvasPointsArr[i][1] > boundsObj.y1) {\n                boundsObj.y1 = canvasPointsArr[i][1];\n            }\n        }\n        const boundsWidth = boundsObj.x1 - boundsObj.x0;\n        const boundsHeight = boundsObj.y1 - boundsObj.y0;\n\n        //fit bounds\n        const padding = 40;\n        const fit = BB.fitInto(\n            boundsWidth,\n            boundsHeight, \n            this.renderWidth - padding, \n            this.renderHeight - padding, \n            1\n        );\n\n        //determine scale\n        const factor = fit.width / boundsWidth;\n\n        //center\n        this.targetTransformObj.x = (this.renderWidth / 2) - (canvasPointsArr[4][0] - canvasPointsArr[0][0]) * factor;\n        this.targetTransformObj.y = (this.renderHeight / 2) - (canvasPointsArr[4][1] - canvasPointsArr[0][1]) * factor;\n\n        this.targetTransformObj.scale = factor;\n        this.doAnimateTranslate = true;\n        this.transformIsDirty = true;\n        this.reqFrame();\n\n        this.onViewChange({\n            changed: ['scale', 'angle'],\n            scale: this.targetTransformObj.scale,\n            angle: this.targetTransformObj.angle\n        });\n    }\n\n    setAngle (angleDeg: number, isRelative?: boolean): void {\n        //rotation done around center\n        const centerObj = {\n            x: this.renderWidth / 2,\n            y: this.renderHeight / 2\n        };\n\n        const oldAngleRad = this.targetTransformObj.angle;\n        const angleRad = angleDeg / 180 * Math.PI;\n\n        if (isRelative) {\n            this.targetTransformObj.angle += angleRad;\n        } else {\n            this.targetTransformObj.angle = angleRad;\n        }\n\n        this.targetTransformObj.angle = this.minimizeAngleRad(\n            this.snapAngleRad(\n                this.targetTransformObj.angle,\n                90,\n                4\n            )\n        );\n\n        //rotate transform.xy\n        let matrix = BB.Matrix.getIdentity();\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(centerObj.x, centerObj.y));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createRotationMatrix(this.targetTransformObj.angle - oldAngleRad));\n        matrix = BB.Matrix.multiplyMatrices(matrix, BB.Matrix.createTranslationMatrix(-centerObj.x, -centerObj.y));\n\n        let origin = [this.targetTransformObj.x, this.targetTransformObj.y, 0, 1];\n        origin = BB.Matrix.multiplyMatrixAndPoint(matrix, origin);\n        this.targetTransformObj.x = origin[0];\n        this.targetTransformObj.y = origin[1];\n\n        this.highResTransformObj = JSON.parse(JSON.stringify(this.targetTransformObj));\n        this.transformIsDirty = true;\n        this.reqFrame(true);\n    }\n\n    /**\n     * translate canvas by viewport pixels\n     * @param tx\n     * @param ty\n     */\n    translateView (tx: number, ty: number): void {\n        const scale = 40;\n\n        this.targetTransformObj.x += tx * scale;\n        this.targetTransformObj.y += ty * scale;\n\n        this.transformIsDirty = true;\n        this.doAnimateTranslate = true;\n        this.reqFrame(true);\n    }\n\n    getIsDrawing (): boolean {\n        return this.isDrawing;\n    }\n\n    getScale (): number {\n        return this.targetTransformObj.scale;\n    }\n\n    getAngleDeg (): number {\n        return this.targetTransformObj.angle * 180 / Math.PI;\n    }\n\n    getMaxScale (): number {\n        return MAX_SCALE;\n    }\n\n    getMinScale (): number {\n        return MIN_SCALE;\n    }\n\n    requestFrame (): void {\n        this.lastRenderedState = -1;\n        this.reqFrame();\n    }\n\n    setLastDrawEvent (x: number | null, y?: number, pressure?: number): void {\n        if (x === null) {\n            this.lastDrawEvent = null;\n            return;\n        }\n\n        if (!this.lastDrawEvent) {\n            this.lastDrawEvent = {x: 0, y: 0, pressure: 0};\n        }\n        this.lastDrawEvent.x = x;\n        this.lastDrawEvent.y = y;\n        this.lastDrawEvent.pressure = pressure;\n    }\n\n}\n","import {BB} from '../../bb/bb';\nimport {IKlBasicLayer} from '../kl.types';\n\n/**\n * preview of image with layers. can do mix modes and opacity.\n * creates a canvas.\n *\n * p = {\n *     width: 123,\n *     height: 123,\n *     layers: [// can be changed after the fact\n *         {\n *             image: Canvas,\n *             opacity: 1,\n *             mixModeStr: 'source-over'\n *         }\n *     ]\n * }\n *\n * @param p\n * @constructor\n */\nexport function KlCanvasPreview(\n    p: {\n        width: number;\n        height: number;\n        layers: IKlBasicLayer[];\n    }\n) {\n    const scale = p.width / p.layers[0].image.width;\n    const width = scale > 1 ? p.layers[0].image.width : p.width;\n    const height = scale > 1 ? p.layers[0].image.height : p.height;\n\n    let canvas = BB.canvas(width, height);\n    canvas.style.backgroundImage = 'url(' + BB.createCheckerDataUrl(8) + ')';\n    let ctx = canvas.getContext('2d');\n\n    BB.css(canvas, {\n        width: '100%',\n        height: '100%',\n        imageRendering: scale > 1 ? 'pixelated' : null,\n    });\n\n    function render() {\n        ctx.save();\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        for (let i = 0; i < p.layers.length; i++) {\n            ctx.globalAlpha = p.layers[i].opacity;\n            ctx.globalCompositeOperation = p.layers[i].mixModeStr;\n            if (canvas.width > p.layers[i].image.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(p.layers[i].image, 0, 0, canvas.width, canvas.height);\n        }\n        ctx.restore();\n    }\n\n    setTimeout(render, 0);\n\n    // --- interface ---\n    this.getElement = function() {\n        return canvas;\n    };\n\n    this.render = function() {\n        render();\n    };\n}","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport rotateImg from 'url:~/src/app/img/ui/cursor-rotate.png';\nimport {KeyListener} from '../../../bb/input/key-listener';\nimport {IVector2D} from '../../../bb/bb.types';\n\nexport interface ITransform {\n    x: number; // center of transform region. image space\n    y: number;\n    width: number; // size of transform region. image space\n    height: number;\n    angleDeg: number; // angle of transform region. degrees\n}\n\n\n/**\n * snap entire transform to pixel grid. changes transform\n *\n * for x y:\n * If a dimension has an even size, it be an integer.\n * If it's uneven, it's sits exactly half way between two pixels.\n *\n * @param transform\n */\nfunction snapToPixel(transform: ITransform): void {\n    if (Math.abs(transform.angleDeg) % 90 !== 0) {\n        return;\n    }\n\n    transform.width = Math.round(transform.width);\n    transform.height = Math.round(transform.height);\n    // 0° is original orientation.\n    // At 90° and 270° width and height become swapped due to different orientation.\n    const whSwapped = Math.abs(transform.angleDeg - 90) % 180 === 0;\n    transform.x = ((whSwapped ? transform.height : transform.width) % 2 === 0) ? Math.round(transform.x) : Math.round(transform.x - 0.5) + 0.5;\n    transform.y = ((whSwapped ? transform.width : transform.height) % 2 === 0)  ? Math.round(transform.y) : Math.round(transform.y - 0.5) + 0.5;\n}\n\nfunction copyTransform(transform: ITransform): ITransform {\n    return {\n        x: transform.x,\n        y: transform.y,\n        width: transform.width,\n        height: transform.height,\n        angleDeg: transform.angleDeg,\n    };\n}\n\n/**\n * image space to transform space\n * - origin of transform space is at center of transform bounds.\n * - same scale as image space. -> one unit is x: 1/width, y: 1/height\n * - up is where transform points up\n * - x goes right\n * - y goes down\n * @param x\n * @param y\n * @param transform\n */\nfunction toTransformSpace (x: number, y: number, transform: ITransform): IVector2D {\n    let px, py;\n    px = x - transform.x;\n    py = y - transform.y;\n\n    const rot = BB.rotateAround({x: 0, y: 0},\n        {x: px, y: py},\n        -transform.angleDeg);\n    px = rot.x;\n    py = rot.y;\n\n    return {\n        x: px,\n        y: py,\n    };\n}\n\n/**\n * transform space to image space\n * @param x\n * @param y\n * @param transform\n */\nfunction toImageSpace(x: number, y: number, transform: ITransform): IVector2D {\n    const rot = BB.rotateAround({x: 0, y: 0},\n        {x: x, y: y},\n        transform.angleDeg);\n    return {\n        x: rot.x + transform.x,\n        y: rot.y + transform.y,\n    };\n}\n\n\n\n/**\n * Free Transform UI\n * rotate, scale, translate\n *\n * - if rotation is multiple of 90° it will snap to pixels, to be more useful for pixel art\n * - when rotation goes from non-multiple of 90° to a multiple, it will snap position and width height to pixels\n * - transform.x, transform.y can sit between pixels (by 0.5) if width or height is odd number.\n *      - this is what complicates things\n * - if transform region small, corner grips move out of the way\n *\n * iX iY, iP.x, iP.y - i indicates image space\n * tX tY, tP.x, tP.y - t indicates transform space\n *\n * Not sure if can be used for navigable canvas. (especially if canvas rotates view)\n * Probably can't be extended for distort. Needs a different approach.\n *\n * --- DOM structure ---\n * rootEl {\n * \ttransEl [\n * \t\tboundsEl\n * \t\tedges[]\n * \t\tcorners[] - round grips in the corner of transform region\n * \t\tangleGrip\n * \t]\n * }\n *\n */\nexport class FreeTransform {\n\n    // --- private ---\n    private readonly transform: ITransform; // coordinates and dimensions of transformation\n    private isConstrained: boolean;\n    private ratio: number; // aspect ratio of transform\n    private readonly scale: number;\n    private readonly scaled = { // scaled coordinates and dimensions for screenspace\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n        corners: [{x: 0, y: 0}], // in transform space\n    };\n    private readonly minSnapDist = 7; // minimal snapping distance in px screenspace\n    private snappingEnabled: boolean;\n    private readonly snapX: number[];\n    private readonly snapY: number[];\n    private readonly callback: (transform: ITransform) => void;\n\n\n    private readonly cornerCursors = ['nw', 'n', 'ne', 'e', 'se', 's', 'sw', 'w'];\n    private readonly gripSize = 14;\n    private readonly edgeSize = 10;\n\n    private readonly rootEl: HTMLElement; // sits at origin of image\n    private readonly transEl: HTMLElement; // at middle of transform. rotates\n    private readonly boundsEl: HTMLElement; // draggable bounds rectangle with outline\n    private readonly corners: {\n        i: number; // index in corners array\n        el: HTMLElement; // draggable corner circle in DOM\n        x: number; // unscaled position (transform space)\n        y: number;\n        virtualPos: IVector2D; // unscaled temporary position (image space)\n        updateDOM: () => void; // update styling in DOM\n        pointerListener: any;\n    }[] = [];\n    private keyListener: KeyListener;\n    private boundsPointerListener: any; // BB.PointerListener\n    private anglePointerListener: any; // BB.PointerListener\n    private readonly edges: { // derive position from corners\n        el: HTMLElement;\n        updateDOM: () => void;\n        pointerListener: any;\n    }[] = [];\n    private readonly angleGrip: {\n        el: HTMLElement,\n        x: number; // transform space\n        y: number;\n        snap: boolean,\n        updateDOM: () => void,\n    };\n\n    private updateScaled(): void {\n        this.scaled.x = this.transform.x * this.scale;\n        this.scaled.y = this.transform.y * this.scale;\n        this.scaled.width = this.transform.width * this.scale;\n        this.scaled.height = this.transform.height * this.scale;\n        this.scaled.corners = this.corners.map((item) => {\n            return {x: item.x * this.scale, y: item.y * this.scale};\n        });\n    }\n\n    /**\n     * Returns snapped point, if ix, iy snaps. If no snapping, returns point unchanged.\n     * both in image space\n     *\n     * @param iX - image space\n     * @param iY - image space\n     * @private\n     */\n    private snapCorner (iX: number, iY: number): IVector2D {\n        if (!this.snappingEnabled) {\n            return {x: iX, y: iY};\n        }\n        let dist: number;\n        const snap: {\n            x: number;\n            y: number;\n            dist: {\n                x: number;\n                y: number;\n            }\n        } = {\n            x: null,\n            y: null,\n            dist: {\n                x: null,\n                y: null,\n            }\n        };\n        for (let e = 0; e < this.snapX.length; e++) {\n            dist = Math.abs(iX - this.snapX[e]);\n            if (dist < this.minSnapDist / this.scale) {\n                if (snap.x === null || dist < snap.dist.x) {\n                    snap.x = this.snapX[e];\n                    snap.dist.x = dist;\n                }\n            }\n        }\n        for (let e = 0; e < this.snapY.length; e++) {\n            dist = Math.abs(iY - this.snapY[e]);\n            if (dist < this.minSnapDist / this.scale) {\n                if (snap.y === null || dist < snap.dist.y) {\n                    snap.y = this.snapY[e];\n                    snap.dist.y = dist;\n                }\n            }\n        }\n\n        if (snap.x === null && snap.y === null) {\n            return {\n                x: iX,\n                y: iY,\n            };\n        }\n        return {\n            x: snap.x === null ? iX : snap.x,\n            y: snap.y === null ? iY : snap.y,\n        };\n    }\n\n    /**\n     * If constrained return nearest corner pos that fits aspect ratio\n     *\n     * @param cornerIndex\n     * @param iX\n     * @param iY\n     * @private\n     */\n    private constrainCorner (cornerIndex: number, iX: number, iY: number): IVector2D {\n        if (!this.isConstrained) {\n            return {\n                x: iX,\n                y: iY,\n            };\n        }\n        const flip = this.transform.width * this.transform.height < 0 ? -1 : 1;\n        return BB.projectPointOnLine(\n            {x: this.transform.x, y: this.transform.y},\n            toImageSpace(this.ratio, flip * ([0, 2].includes(cornerIndex) ? 1 : -1), this.transform),\n            {x: iX, y: iY}\n        );\n    }\n\n    /**\n     * Update corners according to width height.\n     * Not their DOM.\n     */\n    private updateCornerPositions (): void {\n        this.corners[0].x = (-this.transform.width / 2); // top left\n        this.corners[0].y = (-this.transform.height / 2);\n\n        this.corners[1].x = (this.transform.width / 2); // top right\n        this.corners[1].y = (-this.transform.height / 2);\n\n        this.corners[2].x = (this.transform.width / 2); // bottom right\n        this.corners[2].y = (this.transform.height / 2);\n\n        this.corners[3].x = (-this.transform.width / 2); // bottom left\n        this.corners[3].y = (this.transform.height / 2);\n    }\n\n    /**\n     * If constrained and dragging an edge, restore aspect ratio\n     * Updates corner positions.\n     *\n     * @param widthChanged\n     * @param heightChanged\n     * @private\n     */\n    private restoreRatio (widthChanged: boolean, heightChanged: boolean): void {\n        if (!this.isConstrained) {\n            return;\n        }\n        const angle90 = Math.abs(this.transform.angleDeg) % 90 === 0;\n        const whSwapped = Math.abs(this.transform.angleDeg - 90) % 180 === 0;\n        if (heightChanged && !widthChanged) {\n            const newHeight = Math.abs(this.corners[3].y - this.corners[0].y);\n            let newWidth = this.ratio * newHeight;\n            if (angle90) {\n                newWidth = (whSwapped ? this.transform.y % 1 : this.transform.x % 1) === 0 ?\n                    BB.roundEven(newWidth) : BB.roundUneven(newWidth);\n            }\n            if (this.corners[1].x - this.corners[0].x < 0) {\n                newWidth *= -1;\n            }\n            this.corners[0].x = -newWidth / 2;\n            this.corners[3].x = -newWidth / 2;\n            this.corners[1].x = newWidth / 2;\n            this.corners[2].x = newWidth / 2;\n        }\n        if (!heightChanged && widthChanged) {\n            const newWidth = Math.abs(this.corners[0].x - this.corners[1].x);\n            let newHeight = newWidth / this.ratio;\n            if (angle90) {\n                newHeight = (whSwapped ? this.transform.x % 1 : this.transform.y % 1) === 0  ?\n                    BB.roundEven(newHeight) : BB.roundUneven(newHeight);\n            }\n            if (this.corners[3].y - this.corners[0].y < 0) {\n                newHeight *= -1;\n            }\n            this.corners[0].y = -newHeight / 2;\n            this.corners[1].y = -newHeight / 2;\n            this.corners[2].y = newHeight / 2;\n            this.corners[3].y = newHeight / 2;\n        }\n    }\n\n\n    /**\n     * update transform based on corners\n     * @private\n     */\n    private updateTransformViaCorners (): void {\n\n        // calc transform center in image space\n        const rot = BB.rotateAround(\n            {x: 0, y: 0},\n            {\n                x: (this.corners[0].x + this.corners[1].x) / 2,\n                y: (this.corners[0].y + this.corners[3].y) / 2,\n            },\n            this.transform.angleDeg\n        );\n        this.transform.x = rot.x + this.transform.x;\n        this.transform.y = rot.y + this.transform.y;\n\n        // update size\n        this.transform.width = this.corners[1].x - this.corners[0].x;\n        this.transform.height = this.corners[3].y - this.corners[0].y;\n\n        // new center means corners changed their position\n        this.updateCornerPositions();\n\n        this.updateDOM();\n    }\n\n    /**\n     * updates DOM according to transform\n     * @param skipCallback\n     */\n    private updateDOM (skipCallback?: boolean) {\n        this.updateScaled();\n\n        BB.css(this.transEl, {\n            left: this.scaled.x + \"px\",\n            top: this.scaled.y + \"px\",\n            transformOrigin: \"0 0\",\n            transform: \"rotate(\" + this.transform.angleDeg + \"deg)\",\n        });\n\n        BB.css(this.boundsEl, {\n            width: Math.abs(this.scaled.width) + \"px\",\n            height: Math.abs(this.scaled.height) + \"px\",\n            left: Math.min(this.scaled.corners[0].x, this.scaled.corners[1].x) + \"px\",\n            top: Math.min(this.scaled.corners[0].y, this.scaled.corners[3].y) + \"px\"\n        });\n\n        this.corners[0].updateDOM();\n        this.corners[1].updateDOM();\n        this.corners[2].updateDOM();\n        this.corners[3].updateDOM();\n\n        this.edges[0].updateDOM();\n        this.edges[1].updateDOM();\n        this.edges[2].updateDOM();\n        this.edges[3].updateDOM();\n\n\n        this.angleGrip.x = 0;\n        this.angleGrip.y = (-Math.abs(this.transform.height * this.scale) / 2) - 20;\n        this.angleGrip.updateDOM();\n        if (!skipCallback) {\n            if (this.callback) { // why should updateDOM trigger the callback?\n                this.callback(copyTransform(this.transform));\n            }\n        }\n    }\n\n\n\n    // --- public ---\n    constructor (\n        params: {\n            x: number; // center of transform region. image space\n            y: number;\n            width: number; // size of transform region. image space\n            height: number;\n            angleDeg: number; // angle of transform region. degrees\n\n            isConstrained: boolean; // proportions constrained\n            snapX: number[]; // where snapping along X axis. image space\n            snapY: number[]; // where snapping along X axis. image space\n            scale: number; // ratio of screen-space / image-space\n            callback: (transform: ITransform) => void;\n        }\n    ) {\n        this.transform = { // coordinates and dimensions of transformation\n            x: params.x,\n            y: params.y,\n            width: params.width,\n            height: params.height,\n            angleDeg: params.angleDeg,\n        };\n\n        this.isConstrained = !!params.isConstrained;\n\n        this.snapX = params.snapX;\n        this.snapY = params.snapY;\n        this.callback = params.callback;\n        this.scale = params.scale;\n        this.snappingEnabled = true;\n        this.ratio = this.transform.width / this.transform.height;\n\n        this.rootEl = BB.el({\n            className: 'kl-free-transform',\n            css: {\n                userSelect: 'none',\n            }\n        });\n        this.transEl = BB.el({\n            parent: this.rootEl,\n            css: {\n                position: 'absolute',\n            }\n        });\n\n        this.boundsEl = BB.el({\n            css: {\n                position: 'absolute',\n                cursor: 'move',\n                boxShadow: 'rgba(255, 255, 255, 0.5) 0 0 0 1px inset, rgba(0, 0, 0, 0.5) 0 0 0 1px',\n            }\n        });\n\n        const pointerRemainder = {\n            x: 0,\n            y: 0,\n        };\n        function resetRemainder() {\n            pointerRemainder.x = 0;\n            pointerRemainder.y = 0;\n        }\n        this.keyListener = new BB.KeyListener({});\n\n        let boundsStartP = {\n            x: 0,\n            y: 0,\n        }\n        this.boundsPointerListener = new BB.PointerListener({\n            target: this.boundsEl,\n            fixScribble: true,\n            onPointer: (event) => {\n                event.eventPreventDefault();\n                if (event.type === 'pointerdown') {\n                    boundsStartP = {x: this.transform.x, y: this.transform.y};\n                }\n                if (event.type === 'pointermove' && event.button === 'left') {\n                    this.transform.x = boundsStartP.x + (event.pageX - event.downPageX) / this.scale;\n                    this.transform.y = boundsStartP.y + (event.pageY - event.downPageY) / this.scale;\n\n\n                    let dist;\n                    let snap: any = {};\n                    if (this.snappingEnabled) {\n                        let i;\n                        for (i = 0; i < this.snapX.length; i++) {\n                            dist = Math.abs(this.transform.x - this.snapX[i]);\n                            if (dist < this.minSnapDist / this.scale) {\n                                if (!snap.x || dist < snap.distX) {\n                                    snap.x = this.snapX[i];\n                                    snap.distX = dist;\n                                }\n                            }\n                        }\n                        for (i = 0; i < this.snapY.length; i++) {\n                            dist = Math.abs(this.transform.y - this.snapY[i]);\n                            if (dist < this.minSnapDist / this.scale) {\n                                if (!snap.y || dist < snap.distY) {\n                                    snap.y = this.snapY[i];\n                                    snap.distY = dist;\n                                }\n                            }\n                        }\n\n                        let iP;\n                        for (i = 0; i < 4; i++) {\n                            iP = toImageSpace(this.corners[i].x, this.corners[i].y, this.transform);\n                            let j;\n                            for (j = 0; j < this.snapX.length; j++) {\n                                dist = Math.abs(iP.x - this.snapX[j]);\n                                if (dist < this.minSnapDist / this.scale) {\n                                    if (!snap.x || dist < snap.distX) {\n                                        snap.x = this.snapX[j] - (iP.x - this.transform.x);\n                                        snap.distX = dist;\n                                    }\n                                }\n                            }\n                            for (j = 0; j < this.snapY.length; j++) {\n                                dist = Math.abs(iP.y - this.snapY[j]);\n                                if (dist < this.minSnapDist / this.scale) {\n                                    if (!snap.y || dist < snap.distY) {\n                                        snap.y = this.snapY[j] - (iP.y - this.transform.y);\n                                        snap.distY = dist;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    if (this.keyListener.getComboStr() === 'shift') {\n                        let projected = BB.projectPointOnLine(\n                            {x: 0, y: boundsStartP.y},\n                            {x: 10, y: boundsStartP.y},\n                            {x: this.transform.x, y: this.transform.y});\n                        let dist = BB.dist(projected.x, projected.y, this.transform.x, this.transform.y);\n                        snap = {};\n                        snap.x = projected.x;\n                        snap.y = projected.y;\n                        snap.distX = dist;\n                        snap.distY = dist;\n\n                        projected = BB.projectPointOnLine(\n                            {x: boundsStartP.x, y: 0},\n                            {x: boundsStartP.x, y: 10},\n                            {x: this.transform.x, y: this.transform.y});\n                        dist = BB.dist(projected.x, projected.y, this.transform.x, this.transform.y);\n                        if (dist < snap.distX) {\n                            snap.x = projected.x;\n                            snap.y = projected.y;\n                            snap.distX = dist;\n                            snap.distY = dist;\n                        }\n\n                        projected = BB.projectPointOnLine(\n                            {x: boundsStartP.x, y: boundsStartP.y},\n                            {x: boundsStartP.x + 1, y: boundsStartP.y + 1},\n                            {x: this.transform.x, y: this.transform.y});\n                        dist = BB.dist(projected.x, projected.y, this.transform.x, this.transform.y);\n                        if (dist < snap.distX) {\n                            snap.x = projected.x;\n                            snap.y = projected.y;\n                            snap.distX = dist;\n                            snap.distY = dist;\n                        }\n\n                        projected = BB.projectPointOnLine(\n                            {x: boundsStartP.x, y: boundsStartP.y},\n                            {x: boundsStartP.x + 1, y: boundsStartP.y - 1},\n                            {x: this.transform.x, y: this.transform.y});\n                        dist = BB.dist(projected.x, projected.y, this.transform.x, this.transform.y);\n                        if (dist < snap.distX) {\n                            snap.x = projected.x;\n                            snap.y = projected.y;\n                            snap.distX = dist;\n                            snap.distY = dist;\n                        }\n                    }\n                    if (snap.x != undefined) {\n                        this.transform.x = snap.x;\n                    }\n                    if (snap.y != undefined) {\n                        this.transform.y = snap.y;\n                    }\n\n                    // snap to pixels\n                    if (Math.abs(this.transform.angleDeg) % 90 === 0) {\n                        snapToPixel(this.transform);\n                        this.updateCornerPositions();\n                    }\n\n                    this.updateDOM();\n                }\n            }\n        })\n\n        for (let i = 0; i < 4; i++) {\n            ((i) => {\n                const g = this.corners[i] = {\n                    i: i,\n                    el: BB.el({\n                        css: {\n                            width: this.gripSize + 'px',\n                            height: this.gripSize + 'px',\n                            background: '#fff',\n                            /*background: [\n                                '#ff0000',\n                                '#00ff00',\n                                '#0000ff',\n                                '#ff00ff',\n                            ][i],*/\n                            borderRadius: this.gripSize + 'px',\n                            position: 'absolute',\n                            boxShadow: 'inset 0 0 0 2px #000'\n                        }\n                    }),\n                    x: 0,\n                    y: 0,\n                    virtualPos: {\n                        x: 0,\n                        y: 0,\n                    },\n                    updateDOM: null,\n                    pointerListener: null,\n                };\n                g.updateDOM = () => {\n\n                    // grip position\n                    // if gets small, offset grips, so easier to handle\n                    const offsetArr = [[-1, -1], [1, -1], [1, 1], [-1, 1]].map(item => {\n                        item[0] *= this.transform.width > 0 ? 1 : -1;\n                        item[1] *= this.transform.height > 0 ? 1 : -1;\n                        return item;\n                    });\n                    const tinyOffset = Math.abs(this.scaled.width) < 20 || Math.abs(this.scaled.height) < 20 ? 10 : 0;\n\n                    BB.css(g.el, {\n                        left: (this.scaled.corners[g.i].x - this.gripSize / 2 + offsetArr[i][0] * tinyOffset) + 'px',\n                        top: (this.scaled.corners[g.i].y - this.gripSize / 2 + offsetArr[i][1] * tinyOffset) + 'px'\n                    });\n\n\n                    // cursor\n                    let angle = BB.pointsToAngleDeg(\n                        {\n                            x: this.transform.x,\n                            y: this.transform.y,\n                        },\n                        toImageSpace(g.x, g.y, this.transform),\n                    ) + 135; // offset so nw is 0\n                    while (angle < 0) {\n                        angle += 360;\n                    }\n                    let index = Math.round(angle / 45) % this.cornerCursors.length;\n                    BB.css(g.el, {\n                        cursor: this.cornerCursors[index] + '-resize',\n                    });\n                };\n\n                g.pointerListener = new BB.PointerListener({\n                    target: this.corners[i].el,\n                    fixScribble: true,\n                    onPointer: (event) => {\n                        event.eventPreventDefault();\n                        if (event.type === 'pointerdown' && event.button === 'left') {\n                            this.corners[i].virtualPos = toImageSpace(this.corners[i].x, this.corners[i].y, this.transform);\n\n                        } else if (event.type === 'pointermove' && event.button === 'left') {\n                            this.corners[i].virtualPos.x += event.dX / this.scale;\n                            this.corners[i].virtualPos.y += event.dY / this.scale;\n\n                            let iP = {\n                                x: this.corners[i].virtualPos.x,\n                                y: this.corners[i].virtualPos.y,\n                            };\n                            iP = this.constrainCorner(i, iP.x, iP.y);\n                            if (!this.isConstrained) {\n                                iP = this.snapCorner(iP.x, iP.y);\n                            }\n\n                            if (Math.abs(this.transform.angleDeg) % 90 === 0) {\n                                iP.x = Math.round(iP.x);\n                                iP.y = Math.round(iP.y);\n                            }\n\n                            const tP = toTransformSpace(iP.x, iP.y, this.transform);\n\n                            const dX = tP.x - this.corners[i].x;\n                            const dY = tP.y - this.corners[i].y;\n                            this.corners[i].x = tP.x;\n                            this.corners[i].y = tP.y;\n\n                            let indexes = [];\n                            if (i === 0) { // top left\n                                indexes = [3, 1, 2];\n                            } else if (i === 1) { // top right\n                                indexes = [2, 0, 3];\n                            } else if (i === 2) { // bottom right\n                                indexes = [1, 3, 0];\n                            } else if (i === 3) { // bottom left\n                                indexes = [0, 2, 1];\n                            }\n\n                            this.corners[indexes[0]].x = this.corners[i].x;\n                            this.corners[indexes[1]].y = this.corners[i].y;\n                            if (this.keyListener.isPressed('shift')) {\n                                this.corners[indexes[2]].x -= dX;\n                                this.corners[indexes[2]].y -= dY;\n                                this.corners[indexes[1]].x = this.corners[indexes[2]].x;\n                                this.corners[indexes[0]].y = this.corners[indexes[2]].y;\n                            }\n\n                            this.updateTransformViaCorners();\n\n                        }\n                    }\n                });\n\n            })(i);\n        }\n\n        this.updateCornerPositions();\n        this.updateScaled();\n\n        let isInverted: boolean;\n        for (let i = 0; i < 4; i++) {\n            ((i) => {\n                this.edges[i] = {\n                    el: BB.el({\n                        css: {\n                            width: this.edgeSize + 'px',\n                            height: this.edgeSize + 'px',\n                            /*background: [\n                                '#ff000044',\n                                '#00ff0044',\n                                '#0000ff44',\n                                '#ff00ff44',\n                            ][i],*/\n                            position: 'absolute',\n                        },\n                    }),\n                    updateDOM: null,\n                    pointerListener: null,\n                };\n                const g = this.edges[i];\n                g.updateDOM = () => {\n                    if (i === 0) {\n                        BB.css(g.el, {\n                            left: Math.min(this.scaled.corners[0].x, this.scaled.corners[1].x) + 'px',\n                            top: (Math.min(this.scaled.corners[0].y, this.scaled.corners[3].y) - this.edgeSize) + 'px',\n                            width: Math.abs(this.scaled.width) + 'px',\n                            height: this.edgeSize + 'px',\n                        });\n                    } else if (i === 1) {\n                        BB.css(g.el, {\n                            left: Math.max(this.scaled.corners[0].x, this.scaled.corners[1].x) + 'px',\n                            top: Math.min(this.scaled.corners[1].y, this.scaled.corners[2].y) + 'px',\n                            width: this.edgeSize + 'px',\n                            height: Math.abs(this.scaled.height) + 'px',\n                        });\n                    } else if (i === 2) {\n                        BB.css(g.el, {\n                            left: Math.min(this.scaled.corners[3].x, this.scaled.corners[2].x) + 'px',\n                            top: Math.max(this.scaled.corners[0].y,this.scaled.corners[3].y) + 'px',\n                            width: Math.abs(this.scaled.width) + 'px',\n                            height: this.edgeSize + 'px',\n                        });\n                    } else if (i === 3) {\n                        BB.css(g.el, {\n                            left: (Math.min(this.scaled.corners[0].x, this.scaled.corners[1].x) - this.edgeSize) + 'px',\n                            top: Math.min(this.scaled.corners[0].y, this.scaled.corners[3].y) + 'px',\n                            width: this.edgeSize + 'px',\n                            height: Math.abs(this.scaled.height) + 'px',\n                        });\n                    }\n                    let angleOffset = Math.round(this.transform.angleDeg / 45);\n                    while (angleOffset < 0)\n                        angleOffset += 8;\n                    angleOffset = (i * 2 + 1 + angleOffset) % this.cornerCursors.length;\n                    g.el.style.cursor = this.cornerCursors[angleOffset] + '-resize';\n\n                };\n\n                const isVertical = [0, 2].includes(i);\n                g.pointerListener = new BB.PointerListener({\n                    target: this.edges[i].el,\n                    fixScribble: true,\n                    onPointer: (event) => {\n                        event.eventPreventDefault();\n                        if (event.type === 'pointerdown' && event.button === 'left') {\n                            if (isVertical) { // top bottom\n                                isInverted = this.corners[0].y >= this.corners[3].y;\n                            } else { // left right\n                                isInverted = this.corners[0].x >= this.corners[1].x;\n                            }\n                            resetRemainder();\n                        }\n                        if (event.type === 'pointermove' && event.button === 'left') {\n                            const tfD = BB.rotateAround({x: 0, y: 0},\n                                {x: event.dX / this.scale, y: event.dY / this.scale},\n                                -this.transform.angleDeg);\n                            let ti = {\n                                dX: tfD.x,\n                                dY: tfD.y,\n                            };\n                            if (Math.abs(this.transform.angleDeg) % 90 === 0) {\n                                ti = BB.intDxy(pointerRemainder, tfD.x, tfD.y);\n                            }\n\n                            let indexes = [];\n                            if (i === 0) { // top\n                                indexes = [2, 3, 0, 1];\n                            } else if (i === 1) { // right\n                                indexes = [0, 3, 1, 2];\n                            } else if (i === 2) { // bottom\n                                indexes = [0, 1, 2, 3];\n                            } else if (i === 3) { // left\n                                indexes = [1, 2, 0, 3];\n                            }\n\n                            let dimension = isVertical ? 'y' : 'x';\n                            let d = isVertical ? ti.dY : ti.dX;\n\n                            if (isInverted) {\n                                this.corners[indexes[0]][dimension] += d;\n                                this.corners[indexes[1]][dimension] += d;\n                            } else {\n                                this.corners[indexes[2]][dimension] += d;\n                                this.corners[indexes[3]][dimension] += d;\n                            }\n                            if (this.keyListener.isPressed('shift')) {\n                                if (isInverted) {\n                                    this.corners[indexes[2]][dimension] -= d;\n                                    this.corners[indexes[3]][dimension] -= d;\n                                } else {\n                                    this.corners[indexes[0]][dimension] -= d;\n                                    this.corners[indexes[1]][dimension] -= d;\n                                }\n                            }\n\n                            if (isVertical) { // top bottom\n                                this.restoreRatio(false, true);\n                            } else { // left right\n                                this.restoreRatio(true, false);\n                            }\n\n                            this.updateTransformViaCorners();\n\n                        }\n                    }\n                });\n\n            })(i);\n        }\n\n        this.angleGrip = {\n            el: BB.el({\n                css: {\n                    cursor: 'url(' + rotateImg + ') 10 10, move',\n                    width: this.gripSize + 'px',\n                    height: this.gripSize + 'px',\n                    background: '#0ff',\n                    borderRadius: this.gripSize + 'px',\n                    position: 'absolute',\n                    boxShadow: 'inset 0 0 0 2px #000',\n                },\n            }),\n            x: 0,\n            y: 0,\n            snap: false,\n            updateDOM: () => {\n                BB.css(this.angleGrip.el, {\n                    left: (this.angleGrip.x - this.gripSize / 2) + 'px',\n                    top: (this.angleGrip.y - this.gripSize / 2) + 'px',\n                });\n            },\n        };\n        BB.el({\n            parent: this.angleGrip.el,\n            css: {\n                width: '2px',\n                height: '13px',\n                left: (this.gripSize / 2 - 1) + 'px',\n                top: this.gripSize + 'px',\n                background: '#0ff',\n                position: 'absolute'\n            }\n        });\n\n        this.anglePointerListener = new BB.PointerListener({\n            target: this.angleGrip.el,\n            fixScribble: true,\n            onPointer: (event) => {\n                event.eventPreventDefault();\n                if (event.type === 'pointermove' && event.button === 'left') {\n\n                    const bounds = this.rootEl.getBoundingClientRect();\n                    const offset = {\n                        x: bounds.left - this.rootEl.scrollLeft,\n                        y: bounds.top - this.rootEl.scrollTop,\n                    };\n                    const iP = {x: (event.clientX - offset.x) / this.scale, y: (event.clientY - offset.y) / this.scale};\n\n                    const a = BB.pointsToAngleDeg({x: this.transform.x, y: this.transform.y}, iP) + 90;\n                    this.transform.angleDeg = a;\n                    const snapDeg = Math.round(a / 360 * 8) * 45;\n                    if (this.keyListener.getComboStr() === 'shift') {\n                        this.transform.angleDeg = snapDeg;\n                    } else if (this.snappingEnabled && Math.abs(snapDeg - a) < 8) {\n                        this.transform.angleDeg = snapDeg;\n                    }\n                    this.updateDOM();\n\n                }\n                if (event.type === 'pointerup') {\n                    if (Math.abs(this.transform.angleDeg) % 90 === 0) {\n                        snapToPixel(this.transform);\n                        this.updateCornerPositions();\n                        this.updateDOM();\n                    }\n                }\n            }\n        });\n\n        snapToPixel(this.transform);\n        this.updateDOM(true);\n        BB.append(this.transEl, [\n            this.boundsEl,\n            this.edges[0].el,\n            this.edges[1].el,\n            this.edges[2].el,\n            this.edges[3].el,\n            this.corners[0].el,\n            this.corners[1].el,\n            this.corners[2].el,\n            this.corners[3].el,\n            this.angleGrip.el,\n        ]);\n\n\n    }\n\n\n\n    getTransform (): ITransform {\n        return copyTransform(this.transform);\n    }\n\n    setConstrained (b: boolean): void {\n        this.isConstrained = !!b;\n        if (b && this.transform.width !== 0 && this.transform.height !== 0) {\n            this.ratio = Math.abs(this.transform.width / this.transform.height);\n        }\n    }\n\n    setSnapping (s: boolean): void {\n        this.snappingEnabled = !!s;\n    }\n\n    setPos (p: IVector2D): void {\n        this.transform.x = p.x;\n        this.transform.y = p.y;\n        this.updateDOM(true);\n    }\n\n    move (dX: number, dY: number): void {\n        this.transform.x += dX;\n        this.transform.y += dY;\n        this.updateDOM(false);\n    }\n\n    setSize (w: number, h: number): void {\n        this.transform.width = w;\n        this.transform.height = h;\n        if (Math.abs(this.transform.angleDeg) % 90 === 0) {\n            snapToPixel(this.transform);\n        }\n        this.updateCornerPositions();\n        this.updateDOM(false);\n    }\n\n    setAngleDeg (a: number): void {\n        this.transform.angleDeg = a;\n        if (Math.abs(this.transform.angleDeg) % 90 === 0) {\n            snapToPixel(this.transform);\n            this.updateCornerPositions();\n        }\n        this.updateDOM(true);\n    }\n\n    getElement (): HTMLElement {\n        return this.rootEl;\n    }\n\n    getRatio (): number {\n        return this.ratio;\n    }\n\n    destroy (): void {\n        this.keyListener.destroy();\n        this.boundsPointerListener.destroy();\n        this.corners[0].pointerListener.destroy();\n        this.corners[1].pointerListener.destroy();\n        this.corners[2].pointerListener.destroy();\n        this.corners[3].pointerListener.destroy();\n        this.edges[0].pointerListener.destroy();\n        this.edges[1].pointerListener.destroy();\n        this.edges[2].pointerListener.destroy();\n        this.edges[3].pointerListener.destroy();\n        this.anglePointerListener.destroy();\n    }\n\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"045N6\");","import {BB} from '../../../bb/bb';\nimport {KlCanvasPreview} from '../../canvas-ui/canvas-preview';\nimport {FreeTransform} from './free-transform';\nimport {IKlBasicLayer, IMixMode} from '../../kl.types';\n\n/**\n * a basic canvas where you can transform one layer(move around, rotate, scale)\n *\n * @param params\n * @returns {HTMLDivElement}\n * @constructor\n */\nexport function FreeTransformCanvas(params: {\n    elementWidth: number;\n    elementHeight: number;\n    imageWidth: number;\n    imageHeight: number;\n    layers: IKlBasicLayer[];\n    transformIndex: number;\n}) {\n    /*\n    div\n        innerWrapper\n            klCanvasPreview\n            transform.div\n    */\n\n    let previewFit = BB.fitInto(\n        params.imageWidth,\n        params.imageHeight,\n        params.elementWidth - 20,\n        params.elementHeight - 60,\n        1\n    );\n    let scale = previewFit.width / params.imageWidth;\n\n    let div = BB.el({\n        css: {\n            width: params.elementWidth + \"px\",\n            height: params.elementHeight + \"px\",\n            backgroundColor: \"#9e9e9e\",\n            boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n            overflow: \"hidden\",\n            userSelect: \"none\",\n            position: \"relative\",\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            colorScheme: 'only light',\n        }\n    });\n    div.oncontextmenu = function () {\n        return false;\n    };\n\n    let innerWrapper = BB.el({\n        css: {\n            position: 'relative',\n            boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n            width: previewFit.width + 'px',\n            height: previewFit.height + 'px'\n        }\n    });\n    div.appendChild(innerWrapper);\n\n    let previewLayerArr = params.layers.map(item => {\n        return {\n            image: item.image,\n            mixModeStr: item.mixModeStr,\n            opacity: item.opacity,\n        }\n    });\n    previewLayerArr[previewLayerArr.length - 1].image = BB.canvas(\n        scale > 1 ? params.imageWidth : previewFit.width,\n        scale > 1 ? params.imageHeight : previewFit.height,\n    );\n    let klCanvasPreview = new KlCanvasPreview({\n        width: previewFit.width,\n        height: previewFit.height,\n        layers: previewLayerArr\n    });\n    innerWrapper.appendChild(klCanvasPreview.getElement());\n\n    let freeTransform;\n    let initTransform;\n    function updatePreview() {\n        if (!freeTransform) {\n            return;\n        }\n\n        let transform = freeTransform.getTransform();\n        if (scale < 1) {\n            transform.x *= scale;\n            transform.y *= scale;\n            transform.width *= scale;\n            transform.height *= scale;\n        }\n\n        let destCanvas = previewLayerArr[params.transformIndex].image;\n        let ctx = (destCanvas as HTMLCanvasElement).getContext('2d');\n        ctx.save();\n        ctx.clearRect(0, 0, destCanvas.width, destCanvas.height);\n        BB.drawTransformedImageWithBounds(\n            ctx,\n            params.layers[params.transformIndex].image,\n            transform,\n            null,\n            BB.testShouldPixelate(transform, transform.width / initTransform.width, transform.height / initTransform.height),\n        );\n        ctx.restore();\n        klCanvasPreview.render();\n    }\n\n    {\n        let transformSize = {\n            width: params.layers[params.transformIndex].image.width * scale,\n            height: params.layers[params.transformIndex].image.height * scale\n        };\n        if (transformSize.width > previewFit.width || transformSize.height > previewFit.height) {\n            transformSize = BB.fitInto(\n                params.layers[params.transformIndex].image.width,\n                params.layers[params.transformIndex].image.height,\n                previewFit.width,\n                previewFit.height,\n                1\n            );\n        }\n        initTransform = {\n            x: params.imageWidth / 2,\n            y: params.imageHeight / 2,\n            width: params.layers[params.transformIndex].image.width,\n            height: params.layers[params.transformIndex].image.height,\n        };\n        freeTransform = new FreeTransform({\n            x: initTransform.x,\n            y: initTransform.y,\n            width: initTransform.width,\n            height: initTransform.height,\n            angleDeg: 0,\n            isConstrained: true,\n            snapX: [0, params.imageWidth],\n            snapY: [0, params.imageHeight],\n            scale: scale,\n            callback: (transform) => {\n                updatePreview();\n            },\n        });\n    }\n    BB.css(freeTransform.getElement(), {\n        position: 'absolute',\n        left: '0',\n        top: '0'\n    });\n    innerWrapper.appendChild(freeTransform.getElement());\n    setTimeout(updatePreview, 0);\n\n\n    // --- interface ---\n\n    this.move = function(dX, dY) {\n        freeTransform.move(dX, dY);\n    };\n    this.reset = function() {\n        let w = params.layers[params.transformIndex].image.width;\n        let h = params.layers[params.transformIndex].image.height;\n\n        freeTransform.setSize(w, h);\n        freeTransform.setPos({x: w / 2, y: h / 2});\n        freeTransform.setAngleDeg(0);\n        updatePreview();\n    };\n    this.setTransformFit = function() {\n\n        let fit = BB.fitInto(\n            params.layers[params.transformIndex].image.width,\n            params.layers[params.transformIndex].image.height,\n            params.imageWidth,\n            params.imageHeight,\n            1\n        );\n\n        freeTransform.setSize(fit.width, fit.height);\n        freeTransform.setPos({x: fit.width / 2, y: fit.height / 2});\n        freeTransform.setAngleDeg(0);\n        updatePreview();\n    };\n    this.setTransformCenter = function() {\n        freeTransform.setPos({x: params.imageWidth / 2, y: params.imageHeight / 2});\n        freeTransform.setAngleDeg(0);\n        updatePreview();\n    };\n    //gives you the transformation in the original scale\n    this.getTransformation = function () {\n        if (!freeTransform) {\n            return false;\n        }\n        return freeTransform.getTransform();\n    };\n    this.getIsPixelated = () => {\n        const transform = freeTransform.getTransform();\n        return BB.testShouldPixelate(transform, transform.width / initTransform.width, transform.height / initTransform.height);\n    };\n    this.getElement = function() {\n        return div;\n    };\n    this.destroy = function() {\n        freeTransform.destroy();\n    };\n}","import {BB} from '../../../bb/bb';\n\n/*\n\tCropper params\n\t{\n\t\tx: int, //pos in relation zum bild\n\t\ty: int,\n\t\tw: int,\n\t\th: int,\n\t\tscale: float, //zoom\n\t\tcallback: function //wenn sich was ändert\n\t}\n\tthe div that you append this to must be relative\n*/\nexport function Cropper (params) {\n    let x = params.x,\n        y = params.y,\n        width = params.width,\n        height = params.height,\n        scale = params.scale,\n        callback = params.callback,\n        maxW = params.maxW,\n        maxH = params.maxH;\n    let div = document.createElement(\"div\");\n    let gripCursors = ['nw', 'n', 'ne', 'e', 'se', 's', 'sw', 'w'];\n\n    let keyListener = new BB.KeyListener({});\n\n    BB.css(div, {\n        position: \"absolute\",\n        left: (x * scale) + \"px\",\n        top: (y * scale) + \"px\"\n    });\n\n    let outline = document.createElement(\"div\");\n    BB.css(outline, {\n        position: \"absolute\",\n        border: \"1px dashed #fff\",\n        cursor: \"move\"\n    });\n    (outline as any).update = function () {\n        BB.css(outline, {\n            left: (grips[0].x * scale - 1) + \"px\",\n            top: (grips[0].y * scale - 1) + \"px\",\n            width: ((grips[2].x - grips[0].x) * scale) + \"px\",\n            height: ((grips[2].y - grips[0].y) * scale) + \"px\"\n        });\n    };\n    let pointerRemainder = { // needs to be reset after dragging complete\n        x: 0,\n        y: 0,\n    };\n    let outlinePointerListener = new BB.PointerListener({\n        target: outline,\n        onPointer: function(event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n\n                grips[0].x += dX;\n                grips[0].y += dY;\n                grips[1].x += dX;\n                grips[1].y += dY;\n                grips[2].x += dX;\n                grips[2].y += dY;\n                grips[3].x += dX;\n                grips[3].y += dY;\n\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n\n    let thirdsHorizontal = document.createElement(\"div\");\n    BB.css(thirdsHorizontal, {\n        position: \"absolute\",\n        borderTop: \"1px solid #0ff\",\n        borderBottom: \"1px solid #0ff\"\n    });\n    (thirdsHorizontal as any).update = function () {\n        BB.css(thirdsHorizontal, {\n            left: (grips[0].x * scale) + \"px\",\n            top: ((grips[0].y + (grips[2].y - grips[0].y) / 3) * scale) + \"px\",\n            width: ((grips[2].x - grips[0].x) * scale) + \"px\",\n            height: ((grips[2].y - grips[0].y) / 3 * scale) + \"px\"\n\n        });\n    };\n    let thirdsVertical = document.createElement(\"div\");\n    BB.css(thirdsVertical, {\n        position: \"absolute\",\n        borderLeft: \"1px solid #0ff\",\n        borderRight: \"1px solid #0ff\"\n    });\n    (thirdsVertical as any).update = function () {\n        BB.css(thirdsVertical, {\n            left: ((grips[0].x + (grips[2].x - grips[0].x) / 3) * scale) + \"px\",\n            top: (grips[0].y * scale) + \"px\",\n            width: ((grips[2].x - grips[0].x) / 3 * scale) + \"px\",\n            height: ((grips[2].y - grips[0].y) * scale) + \"px\"\n\n        });\n    };\n\n    const gripSize = 40;\n    const gripOverlay = 10;\n\n    let grips: {\n        x: number; // int\n        y: number;\n    }[] = [ // aka corner coordinates\n        {x: 0, y: 0}, // top left\n        {x: width, y: 0}, // top right\n        {x: width, y: height}, // bottom right\n        {x: 0, y: height}, //bottom left\n    ];\n\n    function transformTop(dY) {\n        grips[0].y += dY;\n        grips[0].y = Math.max(grips[3].y - maxH, Math.min(grips[3].y - 1, grips[0].y));\n        grips[1].y = grips[0].y;\n    }\n    function transformRight(dX) {\n        grips[1].x += dX;\n        grips[1].x = Math.min(grips[0].x + maxW, Math.max(grips[0].x + 1, grips[1].x));\n        grips[2].x = grips[1].x;\n    }\n    function transformBottom(dY) {\n        grips[2].y += dY;\n        grips[2].y = Math.min(grips[1].y + maxH, Math.max(grips[1].y + 1, grips[2].y));\n        grips[3].y = grips[2].y;\n    }\n    function transformLeft(dX) {\n        grips[0].x += dX;\n        grips[0].x = Math.max(grips[1].x - maxW, Math.min(grips[1].x - 1, grips[0].x));\n        grips[3].x = grips[0].x;\n    }\n\n    function commit() {\n        pointerRemainder.x = 0;\n        pointerRemainder.y = 0;\n        callback(getTransform());\n    }\n\n\n\n\n    let edges = [];\n    for (let i = 0; i < 4; i++) {\n        (function (i) {\n            edges[i] = document.createElement(\"div\");\n            let g = edges[i];\n            g.style.width = gripSize + \"px\";\n            g.style.height = gripSize + \"px\";\n            //g.style.background = \"#0f0\";\n            g.style.position = \"absolute\";\n            g.update = function () {\n                if (i === 0) { //top\n                    g.style.left = (grips[0].x * scale + gripOverlay) + \"px\";\n                    g.style.top = (grips[0].y * scale - gripSize * 2 + gripOverlay) + \"px\";\n                    g.style.width = ((grips[1].x - grips[0].x) * scale - gripOverlay * 2) + \"px\";\n                    g.style.height = (gripSize * 2) + \"px\";\n                } else if (i === 1) { //right\n                    g.style.left = (grips[1].x * scale - gripOverlay) + \"px\";\n                    g.style.top = (grips[1].y * scale + gripOverlay) + \"px\";\n                    g.style.width = (gripSize * 2) + \"px\";\n                    g.style.height = ((grips[2].y - grips[1].y) * scale - gripOverlay * 2) + \"px\";\n                } else if (i === 2) { //bottom\n                    g.style.left = (grips[3].x * scale + gripOverlay) + \"px\";\n                    g.style.top = (grips[3].y * scale - gripOverlay) + \"px\";\n                    g.style.width = ((grips[2].x - grips[3].x) * scale - gripOverlay * 2) + \"px\";\n                    g.style.height = (gripSize * 2) + \"px\";\n                } else if (i === 3) { //left\n                    g.style.left = (grips[0].x * scale - gripSize * 2 + gripOverlay) + \"px\";\n                    g.style.top = (grips[0].y * scale + gripOverlay) + \"px\";\n                    g.style.width = (gripSize * 2) + \"px\";\n                    g.style.height = ((grips[3].y - grips[0].y) * scale - gripOverlay * 2) + \"px\";\n                }\n                let angleOffset = i * 2 + 1;\n                g.style.cursor = gripCursors[angleOffset] + \"-resize\";\n\n            };\n        })(i);\n    }\n\n    let darken = [];\n    for (let i = 0; i < 4; i++) {\n        (function (i) {\n            darken[i] = document.createElement(\"div\");\n            let g = darken[i];\n            g.style.position = \"absolute\";\n            g.style.background = \"#000\";\n            g.style.opacity = \"0.5\";\n            g.update = function () {\n                if (i === 0) {\n                    g.style.left = (grips[0].x * scale) + \"px\";\n                    g.style.top = (grips[0].y * scale - 8000) + \"px\";\n                    g.style.width = ((grips[1].x - grips[0].x) * scale) + \"px\";\n                    g.style.height = \"8000px\";\n                } else if (i === 1) {\n                    g.style.left = (grips[1].x * scale) + \"px\";\n                    g.style.top = (grips[1].y * scale - 8000) + \"px\";\n                    g.style.width = \"8000px\";\n                    g.style.height = 16000 + \"px\";\n                } else if (i === 2) {\n                    g.style.left = (grips[3].x * scale) + \"px\";\n                    g.style.top = (grips[3].y * scale) + \"px\";\n                    g.style.width = ((grips[2].x - grips[3].x) * scale) + \"px\";\n                    g.style.height = \"8000px\";\n                } else if (i === 3) {\n                    g.style.left = (grips[0].x * scale - 8000) + \"px\";\n                    g.style.top = (grips[0].y * scale - 8000) + \"px\";\n                    g.style.width = \"8000px\";\n                    g.style.height = 16000 + \"px\";\n                }\n\n            };\n        })(i);\n    }\n\n    let edge0PointerListener = new BB.PointerListener({\n        target: edges[0],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformTop(dY);\n                if (keyListener.isPressed('shift')) {\n                    transformBottom(-dY);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n    let edge1PointerListener = new BB.PointerListener({\n        target: edges[1],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformRight(dX);\n                if (keyListener.isPressed('shift')) {\n                    transformLeft(-dX);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n    let edge2PointerListener = new BB.PointerListener({\n        target: edges[2],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformBottom(dY);\n                if (keyListener.isPressed('shift')) {\n                    transformTop(-dY);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n    let edge3PointerListener = new BB.PointerListener({\n        target: edges[3],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformLeft(dX);\n                if (keyListener.isPressed('shift')) {\n                    transformRight(-dX);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n\n\n    let cornerElArr = [];\n    (function() {\n        for (let i = 0; i < 4; i++) {\n            (function (i) {\n                cornerElArr[i] = document.createElement(\"div\");\n                let g = cornerElArr[i];\n                BB.css(g, {\n                    //background: '#f00',\n                    width: (gripSize * 2) + 'px',\n                    height: (gripSize * 2) + 'px',\n                    position: 'absolute'\n                });\n                g.style.cursor = ['nwse-resize', 'nesw-resize'][i % 2];\n                g.update = function () {\n                    if (i === 0) { //top left\n                        BB.css(g, {\n                            left: (grips[0].x * scale - gripSize * 2 + gripOverlay) + \"px\",\n                            top: (grips[0].y * scale - gripSize * 2 + gripOverlay) + \"px\"\n                        });\n                    } else if (i === 1) { //top right\n                        BB.css(g, {\n                            left: (grips[1].x * scale - gripOverlay) + \"px\",\n                            top: (grips[1].y * scale - gripSize * 2 + gripOverlay) + \"px\"\n                        });\n                    } else if (i === 2) { //bottom right\n                        BB.css(g, {\n                            left: (grips[1].x * scale - gripOverlay) + \"px\",\n                            top: (grips[2].y * scale - gripOverlay) + \"px\"\n                        });\n                    } else if (i === 3) { //bottom left\n                        BB.css(g, {\n                            left: (grips[0].x * scale - gripSize * 2 + gripOverlay) + \"px\",\n                            top: (grips[2].y * scale - gripOverlay) + \"px\"\n                        });\n                    }\n                };\n            })(i);\n        }\n    })();\n    //top left\n    let corner0PointerListener = new BB.PointerListener({\n        target: cornerElArr[0],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformLeft(dX);\n                transformTop(dY);\n                if (keyListener.isPressed('shift')) {\n                    transformRight(-dX);\n                    transformBottom(-dY);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n    //top right\n    let corner1PointerListener = new BB.PointerListener({\n        target: cornerElArr[1],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformRight(dX);\n                transformTop(dY);\n                if (keyListener.isPressed('shift')) {\n                    transformLeft(-dX);\n                    transformBottom(-dY);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n    //bottom right\n    let corner2PointerListener = new BB.PointerListener({\n        target: cornerElArr[2],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformRight(dX);\n                transformBottom(dY);\n                if (keyListener.isPressed('shift')) {\n                    transformLeft(-dX);\n                    transformTop(-dY);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n    //bottom left\n    let corner3PointerListener = new BB.PointerListener({\n        target: cornerElArr[3],\n        fixScribble: true,\n        onPointer: function (event) {\n            event.eventPreventDefault();\n            if (event.type === 'pointermove' && event.button === 'left') {\n                const {dX, dY} = BB.intDxy(pointerRemainder, event.dX / scale, event.dY / scale);\n                transformLeft(dX);\n                transformBottom(dY);\n                if (keyListener.isPressed('shift')) {\n                    transformRight(-dX);\n                    transformTop(-dY);\n                }\n                update();\n            }\n            if (event.type === 'pointerup') {\n                commit();\n            }\n        }\n    });\n\n\n\n\n    function getTransform() {\n        grips[1].x -= grips[0].x;\n        grips[1].y -= grips[0].y;\n        grips[2].x -= grips[0].x;\n        grips[2].y -= grips[0].y;\n        grips[3].x -= grips[0].x;\n        grips[3].y -= grips[0].y;\n        x += grips[0].x;\n        y += grips[0].y;\n        grips[0].x = 0;\n        grips[0].y = 0;\n        return {\n            x: x,\n            y: y,\n            width: grips[1].x,\n            height: grips[2].y\n        };\n    }\n\n\n    div.append(\n        darken[1],\n        darken[0],\n        darken[2],\n        darken[3],\n        thirdsHorizontal,\n        thirdsVertical,\n        outline,\n\n        edges[1],\n        edges[0],\n        edges[2],\n        edges[3],\n\n        cornerElArr[0],\n        cornerElArr[1],\n        cornerElArr[2],\n        cornerElArr[3],\n    );\n\n\n    function update() {\n\n        edges[0].update();\n        edges[1].update();\n        edges[2].update();\n        edges[3].update();\n        cornerElArr[0].update();\n        cornerElArr[1].update();\n        cornerElArr[2].update();\n        cornerElArr[3].update();\n        darken[0].update();\n        darken[1].update();\n        darken[2].update();\n        darken[3].update();\n        (outline as any).update();\n        (thirdsHorizontal as any).update();\n        (thirdsVertical as any).update();\n    }\n\n    update();\n\n\n    // --- interface ---\n\n    this.getTransform = getTransform;\n\n    this.setTransform = function (p) {\n        x = p.x;\n        y = p.y;\n        width = p.width;\n        height = p.height;\n\n        BB.css(div, {\n            left: (x * scale) + \"px\",\n            top: (y * scale) + \"px\"\n        });\n\n        grips[0].x = 0;\n        grips[0].y = 0;\n        grips[1].x = width;\n        grips[1].y = 0;\n        grips[2].x = width;\n        grips[2].y = height;\n        grips[3].x = 0;\n        grips[3].y = height;\n\n        update();\n        commit();\n    };\n\n    this.setScale = function (s) {\n        scale = s;\n        BB.css(div, {\n            left: (x * scale) + \"px\",\n            top: (y * scale) + \"px\"\n        });\n        update();\n    };\n\n    this.showThirds = function (b) {\n        if (b) {\n            thirdsHorizontal.style.display = \"block\";\n            thirdsVertical.style.display = \"block\";\n        } else {\n            thirdsHorizontal.style.display = \"none\";\n            thirdsVertical.style.display = \"none\";\n        }\n    };\n\n    this.getElement = function() {\n        return div;\n    };\n\n    this.destroy = function() {\n        keyListener.destroy();\n        outlinePointerListener.destroy();\n        corner0PointerListener.destroy();\n        corner1PointerListener.destroy();\n        corner2PointerListener.destroy();\n        corner3PointerListener.destroy();\n        edge0PointerListener.destroy();\n        edge1PointerListener.destroy();\n        edge2PointerListener.destroy();\n        edge3PointerListener.destroy();\n    };\n\n}","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"eHdqz\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"3x5dR\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"hbDTd\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"16iGk\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"2ME3z\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"hZnSk\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"6mHrC\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"hS5Hj\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"doX4v\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"7NqHO\");","import {BB} from '../../../bb/bb';\nimport {dialogCounter} from '../modals/modal-count';\n// @ts-ignore\nimport toolPaintImg from 'url:~/src/app/img/ui/tool-paint.svg';\n// @ts-ignore\nimport toolFillImg from 'url:~/src/app/img/ui/tool-fill.svg';\n// @ts-ignore\nimport toolTextImg from 'url:~/src/app/img/ui/tool-text.svg';\n// @ts-ignore\nimport toolShapeImg from 'url:~/src/app/img/ui/tool-shape.svg';\n// @ts-ignore\nimport caretDownImg from 'url:~/src/app/img/ui/caret-down.svg';\nimport {LANG} from '../../../language/language';\n\n/**\n * Toolrow Dropdown. The button where you select: brush, fill, select, transform, etc.\n *\n * p = {\n *     onChange: func(activeStr)\n * }\n *\n * activeStr = 'draw' | 'fill' | 'text'\n *\n * @param p\n * @constructor\n */\nexport function ToolDropdown(p) {\n\n    let optionArr = ['draw', 'fill', 'text', 'shape'];\n    let imArr = [\n        toolPaintImg,\n        toolFillImg,\n        toolTextImg,\n        toolShapeImg\n    ];\n    let titleArr = [\n        `${LANG('tool-brush')} [B]`,\n        `${LANG('tool-paint-bucket')} [G]`,\n        `${LANG('tool-text')} [T]`,\n        `${LANG('tool-shape')} [U]`,\n    ];\n    let currentActiveIndex = 0;\n    let isActive = true;\n    let isOpen = false;\n\n    //preload images\n    setTimeout(function() {\n        for (let i = 1; i < imArr.length; i++) {\n            let im = new Image();\n            im.src = imArr[i];\n        }\n    }, 100);\n\n    let smallMargin = '6px 0';\n    let div = BB.el({\n        css: {\n            position: 'relative',\n            flexGrow: '1'\n        }\n    });\n\n    let openTimeout;\n    let isDragging = false;\n    let startX, startY;\n    let pointerListener;\n    if (BB.hasPointerEvents) {\n        pointerListener = new BB.PointerListener({\n            target: div,\n            maxPointers: 1,\n            onPointer: function(event) {\n                if (event.type === 'pointerdown') {\n                    if (isOpen) {\n                        return;\n                    }\n\n                    openTimeout = setTimeout(function() {\n                        showDropdown();\n                    }, 400);\n                    isDragging = true;\n                    startX = event.pageX;\n                    startY = event.pageY;\n\n                } else if (event.type === 'pointermove') {\n                    if (isDragging && !isOpen && BB.dist(startX, startY, event.pageX, event.pageY) > 5) {\n                        clearTimeout(openTimeout);\n                        showDropdown();\n                    }\n\n                } else if (event.type === 'pointerup') {\n                    clearTimeout(openTimeout);\n                    if (isOpen && isDragging) {\n                        let target = document.elementFromPoint(event.pageX, event.pageY);\n                        for (let i = 0; i < dropdownBtnArr.length; i++) {\n                            if (target === dropdownBtnArr[i].wrapper) {\n                                closeDropdown();\n                                isActive = true;\n                                currentActiveIndex = i;\n                                updateButton();\n                                p.onChange(optionArr[currentActiveIndex]);\n                                break;\n                            }\n                        }\n                    }\n                    isDragging = false;\n                }\n            }\n        });\n    }\n\n    let activeButton = BB.el({\n        parent: div,\n        className: 'toolspace-row-button nohighlight toolspace-row-button-activated',\n        title: titleArr[currentActiveIndex],\n        onClick: function(e) {\n            if (isActive && !isOpen) {\n                e.preventDefault();\n                e.stopPropagation();\n                showDropdown();\n                return;\n            }\n\n            isActive = true;\n            p.onChange(optionArr[currentActiveIndex]);\n            if (isOpen) {\n                closeDropdown();\n            }\n        },\n        css: {\n            padding: '10px 0',\n            pointerEvents: 'auto',\n            height: '100%',\n            boxSizing: 'border-box'\n        }\n    });\n\n    let activeButtonIm = BB.el({\n        parent: activeButton,\n        css: {\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'center',\n            backgroundSize: 'contain',\n            width: 'calc(100% - 7px)',\n            height: '100%',\n            pointerEvents: 'none',\n            opacity: '0.75',\n        }\n    });\n\n    let arrowButton = BB.el({\n        parent: activeButton,\n        css: {\n            position: 'absolute',\n            right: '1px',\n            bottom: '1px',\n            width: '18px',\n            height: '18px',\n            //background: '#aaa',\n            //borderRadius: '2px',\n            cursor: 'pointer',\n\n            backgroundImage: 'url(\\'' + caretDownImg + '\\')',\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'center',\n            backgroundSize: '60%'\n        },\n        title: 'More Tools',\n        onClick: function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            showDropdown();\n        }\n    });\n\n\n    let overlay = BB.el({\n        css: {\n            position: 'absolute',\n            //background: 'rgba(255,0,0,0.5)',\n            left: '0',\n            top: '0',\n            right: '0',\n            bottom: '0'\n        }\n    });\n    let overlayPointerListener = new BB.PointerListener({\n        target: overlay,\n        pointers: 1,\n        onPointer: function(e) {\n            if (e.type === 'pointerdown') {\n                e.eventPreventDefault();\n                closeDropdown();\n            }\n        }\n    });\n\n    let dropdownWrapper = BB.el({\n        className: 'tool-dropdown-wrapper',\n        css: {\n            position: 'absolute',\n            width: '100%',\n            height: (100 * (optionArr.length - 1)) + '%',\n            top: '100%',\n            left: '0',\n            zIndex: '1',\n            boxSizing: 'border-box',\n            cursor: 'pointer',\n            transition: 'height 0.1s ease-in-out, opacity 0.1s ease-in-out',\n            borderBottomLeftRadius: '5px',\n            borderBottomRightRadius: '5px',\n            overflow: 'hidden',\n        }\n    });\n\n    let dropdownBtnArr = [];\n\n    function createDropdownButton(p) {\n        let result = {};\n\n        let wrapper = BB.el({\n            parent: dropdownWrapper,\n            className: 'tool-dropdown-button',\n            title: p.title,\n            css: {\n                padding: '10px 0',\n                height: (100 / (optionArr.length - 1)) + '%',\n                boxSizing: 'border-box'\n            },\n            onClick: function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n                p.onClick(p.index, p.id);\n            }\n        });\n        (result as any).wrapper = wrapper;\n        let im = BB.el({\n            parent: wrapper,\n            css: {\n                backgroundImage: 'url(\\'' + p.image + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundPosition: 'center',\n                backgroundSize: 'contain',\n                height: '100%',\n                pointerEvents: 'none',\n                opacity: '0.75'\n            }\n        });\n\n        // --- interface ---\n        (result as any).show = function(b) {\n            wrapper.style.display = b ? 'block' : 'none';\n        };\n\n        (result as any).setIsSmall = function(b) {\n            wrapper.style.padding = b ? smallMargin : '10px 0';\n        };\n\n        return result;\n    }\n\n    function onClickDropdownBtn(index, id) {\n        closeDropdown();\n\n        isActive = true;\n        currentActiveIndex = index;\n\n        updateButton();\n\n        p.onChange(optionArr[currentActiveIndex]);\n    }\n\n    for (let i = 0; i < optionArr.length; i++) {\n        dropdownBtnArr.push(createDropdownButton({\n            index: i,\n            id: optionArr[i],\n            image: imArr[i],\n            title: titleArr[i],\n            onClick: onClickDropdownBtn\n        }));\n    }\n\n    function showDropdown() {\n        dialogCounter.increase(0.5);\n        isOpen = true;\n\n        for (let i = 0; i < optionArr.length; i++) {\n            dropdownBtnArr[i].show(currentActiveIndex !== i);\n        }\n\n        arrowButton.style.display = 'none';\n        div.style.zIndex = '1';\n        document.body.appendChild(overlay);\n        div.appendChild(dropdownWrapper);\n    }\n\n    function closeDropdown() {\n        dialogCounter.decrease(0.5);\n        isOpen = false;\n        arrowButton.style.removeProperty('display');\n        div.style.removeProperty('z-index');\n        document.body.removeChild(overlay);\n\n        div.removeChild(dropdownWrapper);\n    }\n\n    function updateButton() {\n        activeButton.title = titleArr[currentActiveIndex];\n        activeButtonIm.style.backgroundImage = 'url(\\'' + imArr[currentActiveIndex] + '\\')';\n    }\n    updateButton();\n\n\n    // --- interface ---\n\n    this.setIsSmall = function(b) {\n        activeButton.style.padding = b ? smallMargin : '10px 0';\n        for (let i = 0; i < optionArr.length; i++) {\n            dropdownBtnArr[i].setIsSmall(b);\n        }\n        if (b) {\n            arrowButton.style.width = '14px';\n            arrowButton.style.height = '14px';\n        } else {\n            arrowButton.style.width = '18px';\n            arrowButton.style.height = '18px';\n        }\n    };\n\n    this.setActive = function(activeStr) {\n        if (optionArr.includes(activeStr)) {\n            isActive = true;\n            for (let i = 0; i < optionArr.length; i++) {\n                if (optionArr[i] === activeStr) {\n                    currentActiveIndex = i;\n                    break;\n                }\n            }\n            BB.addClassName(activeButton, 'toolspace-row-button-activated');\n            updateButton();\n        } else {\n            isActive = false;\n            BB.removeClassName(activeButton, 'toolspace-row-button-activated');\n        }\n    };\n\n    this.getActive = function() {\n        return optionArr[currentActiveIndex];\n    };\n\n    this.getElement = function() {\n        return div;\n    };\n}","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"dz3mY\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"2gZH2\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"04ZZm\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"j9xio\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"AnO0a\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"nTvP2\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"6toXQ\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"b1UMP\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"lvwQ5\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"imAvm\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"dC0sF\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"h3hPo\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"1pAeY\");","import {createCanvas} from '../../bb/base/create-canvas';\nimport {Psd} from 'ag-psd/dist/psd';\nimport {IKlProject, IKlPsd, IMixMode} from '../kl.types';\nimport {LANG} from '../../language/language';\nimport {MAX_LAYERS} from '../canvas/kl-canvas';\n\nlet kl2PsdMap;\nlet psd2KlMap;\n\nfunction init() {\n    if (kl2PsdMap) {\n        return;\n    }\n\n    kl2PsdMap = {\n        'source-over': 'normal',\n\n        'darken': 'darken',\n        'multiply': 'multiply',\n        'color-burn': 'color burn',\n\n        'lighten': 'lighten',\n        'screen': 'screen',\n        'color-dodge': 'color dodge',\n\n        'overlay': 'overlay',\n        'soft-light': 'soft light',\n        'hard-light': 'hard light',\n\n        'difference': 'difference',\n        'exclusion': 'exclusion',\n\n        'hue': 'hue',\n        'saturation': 'saturation',\n        'color': 'color',\n        'luminosity': 'luminosity',\n    };\n\n    psd2KlMap = {};\n    let keys = Object.keys(kl2PsdMap);\n    for (let i = 0; i < keys.length; i++) {\n        psd2KlMap[kl2PsdMap[keys[i]]] = keys[i];\n    }\n}\n\nexport function blendPsdToKl(str: string): IMixMode {\n    init();\n    return psd2KlMap[str];\n}\n\nexport function blendKlToPsd(str: string): string {\n    init();\n    return kl2PsdMap[str];\n}\n\n\n/**\n * Converts ag-psd object into something that KlCanvas can represent\n * @param psdObj\n */\nexport function readPsd(psdObj: Psd): IKlPsd {\n    let result: IKlPsd = {\n        type: 'psd',\n        canvas: psdObj.canvas,\n        width: psdObj.width,\n        height: psdObj.height\n    };\n\n    function addWarning(warningStr) {\n        if (!result.warningArr) {\n            result.warningArr = [];\n        }\n        if (result.warningArr.includes(warningStr)) {\n            return;\n        }\n        result.warningArr.push(warningStr);\n    }\n\n    function getMixModeStr(blendMode): IMixMode {\n        let mixModeStr: IMixMode = blendPsdToKl(blendMode);\n        if (!mixModeStr) {\n            addWarning('blend-mode');\n            mixModeStr = 'source-over';\n        }\n        return mixModeStr;\n    }\n\n    if (psdObj.bitsPerChannel !== 8) {\n        addWarning('bits-per-channel');\n    }\n\n    if (!psdObj.children) {\n        result.error = true;\n        return result;\n    }\n\n    // count resulting layers\n    let maxLayers = MAX_LAYERS;\n    let layerCount = 0;\n    function countWithinGroup(groupObj) {\n        let result = 0;\n        if (groupObj.blendMode) {\n            let mixModeStr = blendPsdToKl(groupObj.blendMode);\n            if (mixModeStr && mixModeStr !== 'source-over') {\n                return 1;\n            }\n        }\n        for (let i = 0; i < groupObj.children.length; i++) {\n            let item = groupObj.children[i];\n            if (item.clipping || item.adjustment) {\n                continue;\n            }\n\n            if (item.children) {\n                addWarning('group');\n                result += countWithinGroup(item);\n            } else {\n                result++;\n            }\n        }\n        return result;\n    }\n    layerCount += countWithinGroup(psdObj);\n    if (layerCount > maxLayers) {\n        result.error = true;\n        return result;\n    }\n\n    result.layers = [];\n\n    function prepareMask(maskCanvas, defaultColor) {\n        const groupMaskCtx = maskCanvas.getContext('2d');\n        let imData = groupMaskCtx.getImageData(0, 0, maskCanvas.width, maskCanvas.height);\n        if (defaultColor === 0) {\n            for (let i = 0; i < imData.data.length; i += 4) {\n                imData.data[i + 3] = imData.data[i];\n            }\n        } else {\n            for (let i = 0; i < imData.data.length; i += 4) {\n                imData.data[i + 3] = 255 - imData.data[i];\n            }\n        }\n        groupMaskCtx.putImageData(imData, 0, 0);\n    }\n\n    function convertGroup(psdGroupObj): {\n        name: string;\n        mixModeStr: IMixMode;\n        opacity: number;\n        image: HTMLCanvasElement;\n    }[] {\n\n        let resultArr: {\n            name: string;\n            mixModeStr: IMixMode;\n            opacity: number;\n            image: HTMLCanvasElement;\n        }[] = [];\n        let groupOpacity = psdGroupObj.hidden ? 0 : psdGroupObj.opacity;\n        let groupMixModeStr = getMixModeStr(psdGroupObj.blendMode);\n        let groupCanvas;\n        let groupCtx;\n        if (groupMixModeStr !== 'source-over') {\n            groupCanvas = createCanvas(result.width, result.height);\n            groupCtx = groupCanvas.getContext('2d');\n        }\n\n\n        // prepare group mask\n        if (psdGroupObj.mask) {\n            addWarning('mask');\n            prepareMask(psdGroupObj.mask.canvas, psdGroupObj.mask.defaultColor);\n        }\n\n\n        for (let i = 0; i < psdGroupObj.children.length; i++) {\n            let item = psdGroupObj.children[i];\n            if (item.clipping) {\n                continue;\n            }\n            if (item.adjustment) {\n                addWarning('adjustment');\n                continue;\n            }\n\n            let hasClipping = (item.children || item.canvas) && psdGroupObj.children[i + 1] && psdGroupObj.children[i + 1].clipping;\n            if (hasClipping) {\n                addWarning('clipping');\n            }\n\n            if (item.children) {\n                let innerArr = convertGroup(item);\n\n                for (let e = 0; e < innerArr.length; e++) {\n                    let innerItem = innerArr[e];\n                    let innerCtx = innerItem.image.getContext('2d');\n\n                    // clipping\n                    if (hasClipping) {\n                        let clippingCanvas = createCanvas(result.width, result.height);\n                        let clippingCtx = clippingCanvas.getContext('2d');\n                        clippingCtx.drawImage(innerItem.image, 0, 0);\n\n                        for (let f = i + 1; f < psdGroupObj.children.length && psdGroupObj.children[f].clipping; f++) {\n                            let clippingItem = psdGroupObj.children[f];\n                            if (clippingItem.opacity === 0 || clippingItem.hidden) {\n                                continue;\n                            }\n                            clippingCtx.globalCompositeOperation = getMixModeStr(clippingItem.blendMode);\n                            clippingCtx.globalAlpha = clippingItem.opacity;\n                            clippingCtx.drawImage(clippingItem.canvas, clippingItem.left, clippingItem.top);\n                        }\n\n                        innerCtx.globalCompositeOperation = 'source-atop';\n                        innerCtx.drawImage(clippingCanvas, 0, 0);\n                    }\n\n\n\n                    // group mask\n                    if (psdGroupObj.mask) {\n                        innerCtx.globalCompositeOperation = psdGroupObj.mask.defaultColor === 0 ? 'destination-in' : 'destination-out';\n                        innerCtx.drawImage(psdGroupObj.mask.canvas, psdGroupObj.mask.left, psdGroupObj.mask.top);\n                    }\n\n                    if (groupCanvas) {\n                        groupCtx.globalCompositeOperation = innerItem.mixModeStr;\n                        groupCtx.globalAlpha = innerItem.opacity;\n                        groupCtx.drawImage(innerItem.image, 0, 0);\n\n                    } else {\n                        innerItem.opacity = innerItem.opacity * groupOpacity;\n                        resultArr.push(innerItem);\n                    }\n                }\n\n                continue;\n            }\n\n            let canvas = createCanvas(result.width, result.height);\n            let ctx = canvas.getContext('2d');\n            if (item.canvas) { // if a layer is empty it has no canvas\n                ctx.drawImage(item.canvas, item.left, item.top);\n            }\n\n            // effects\n            if (item.effects) {\n                addWarning('layer-effect');\n            }\n\n            // mask\n            if (item.mask) {\n                addWarning('mask');\n                prepareMask(item.mask.canvas, item.mask.defaultColor);\n\n                ctx.globalCompositeOperation = item.mask.defaultColor === 0 ? 'destination-in' : 'destination-out';\n                ctx.drawImage(item.mask.canvas, item.mask.left, item.mask.top);\n            }\n\n            // clipping\n            if (hasClipping) {\n                let clippingCanvas = createCanvas(item.right - item.left, item.bottom - item.top);\n                let clippingCtx = clippingCanvas.getContext('2d');\n                clippingCtx.drawImage(item.canvas, 0, 0);\n\n                for (let e = i + 1; e < psdGroupObj.children.length && psdGroupObj.children[e].clipping; e++) {\n                    let clippingItem = psdGroupObj.children[e];\n                    if (clippingItem.opacity === 0 || clippingItem.hidden) {\n                        continue;\n                    }\n                    clippingCtx.globalCompositeOperation = getMixModeStr(clippingItem.blendMode);\n                    clippingCtx.globalAlpha = clippingItem.opacity;\n                    clippingCtx.drawImage(clippingItem.canvas, clippingItem.left - item.left, clippingItem.top - item.top);\n                }\n\n                ctx.globalCompositeOperation = 'source-atop';\n                ctx.drawImage(clippingCanvas, item.left, item.top);\n            }\n\n            // group mask\n            if (psdGroupObj.mask) {\n                ctx.globalCompositeOperation = psdGroupObj.mask.defaultColor === 0 ? 'destination-in' : 'destination-out';\n                ctx.drawImage(psdGroupObj.mask.canvas, psdGroupObj.mask.left, psdGroupObj.mask.top);\n            }\n\n            if (groupCanvas) {\n                if (groupOpacity > 0) {\n                    groupCtx.globalCompositeOperation = getMixModeStr(item.blendMode);\n                    groupCtx.globalAlpha = item.hidden ? 0 : item.opacity;\n                    groupCtx.drawImage(canvas, 0, 0);\n                }\n\n            } else {\n                resultArr.push({\n                    name: item.name,\n                    opacity: (item.hidden ? 0 : item.opacity) * groupOpacity,\n                    mixModeStr: getMixModeStr(item.blendMode),\n                    image: canvas,\n                });\n            }\n        }\n\n        if (groupCanvas) {\n            resultArr = [\n                {\n                    name: psdGroupObj.name,\n                    opacity: groupOpacity,\n                    mixModeStr: groupMixModeStr,\n                    image: groupCanvas,\n                }\n            ];\n        }\n\n        return resultArr;\n    }\n\n    result.layers = convertGroup({\n        name: 'root',\n        opacity: 1,\n        blendMode: 'normal',\n        children: psdObj.children\n    });\n\n    return result;\n}\n\nexport function klPsdToKlProject(klPsd: IKlPsd): IKlProject {\n    // only share references to Canvas elements\n    const result: IKlProject = {\n        width: klPsd.width,\n        height: klPsd.height,\n        layers: [],\n    };\n    if (klPsd.layers) {\n        result.layers = result.layers.concat(klPsd.layers.map(item => {\n            return {\n                name: item.name,\n                opacity: item.opacity,\n                mixModeStr: item.mixModeStr,\n                image: item.image,\n            };\n        }));\n    } else {\n        // flattened\n        result.layers.push({\n            name: LANG('background'),\n            opacity: 1,\n            mixModeStr: 'source-over',\n            image: klPsd.canvas,\n        });\n    }\n    return result;\n}","//browser storage indexedDB\n\n\nimport {IKlStorageProject} from '../kl.types';\n\nconst indexedDbIsSupported = !!window.indexedDB;\nlet dbNameStr = 'Klecks';\nconst storageNameStr = 'ProjectStore';\n\nexport function setDbName(name: string) {\n    dbNameStr = '' + name;\n}\n\n/**\n * connects to db dbNameStr, then executes transaction on storageNameStr storage\n * with index 'id'\n *\n * @param actionFunction function(storeObj) - what you want to execute during transaction\n * @param successCallback function() - on succesful transaction\n * @param errorCallback function(errorStr) - on error\n */\nfunction execIndexedDBTransaction(actionFunction, successCallback, errorCallback) {\n\n    let hasFinished = false;\n\n    function onSuccess() {\n        if (hasFinished) {\n            return;\n        }\n        hasFinished = true;\n        successCallback();\n    }\n\n    function onError(errorStr) {\n        if (hasFinished) {\n            return;\n        }\n        hasFinished = true;\n        errorCallback(errorStr);\n    }\n\n    if (!indexedDbIsSupported) {\n        setTimeout(function () {\n            onError('no indexed db available');\n        }, 0);\n        return;\n    }\n    let requestObj;\n\n    try {\n        requestObj = window.indexedDB.open(dbNameStr, 1);\n    } catch (e) {\n        onError(e.message);\n        return;\n    }\n\n    requestObj.onupgradeneeded = function (e) {\n        try {\n            let db = requestObj.result;\n            let store = db.createObjectStore(storageNameStr, {keyPath: 'id'});\n            store.createIndex('id', 'id', {unique: true});\n        } catch (e) {\n            onError(e.message);\n        }\n    };\n    requestObj.onerror = function (e) {\n        onError('indexedDB.open failed, ' + requestObj.error);\n    };\n    requestObj.onsuccess = function (e) {\n        let databaseObj;\n        let transactionObj;\n        let storeObj;\n\n        try {\n            databaseObj = requestObj.result;\n            if (!databaseObj.objectStoreNames.contains(storageNameStr)) {\n                //someone maybe messed with the db, or creation failed earlier\n                //it's broken -> destroy\n                window.indexedDB.deleteDatabase(dbNameStr);\n                onError('object store ' + storageNameStr + ' missing. destroying db');\n                return;\n            }\n            transactionObj = databaseObj.transaction(storageNameStr, 'readwrite');\n            storeObj = transactionObj.objectStore(storageNameStr);\n            storeObj.index('id');\n        } catch (e) {\n            onError(e.message);\n            return;\n        }\n\n        databaseObj.onerror = function (e) {\n            onError('database error, ' + databaseObj.error);\n        };\n\n        try {\n            actionFunction(storeObj);\n        } catch (e) {\n            onError(e.message);\n            return;\n        }\n\n        transactionObj.oncomplete = function () {\n            onSuccess();\n            databaseObj.close();\n        };\n        transactionObj.onerror = function () {\n            onError('transaction error, ' + transactionObj.error);\n        };\n    };\n}\n\n/**\n * getKlProjectObj {\n *     width: int,\n *     height: int,\n *     layers: {\n *        name: string,\n *        opacity: float (0 - 1),\n *        mixModeStr: string,\n *        image: image object                <--------- image already loaded!\n *     }[]\n * }\n *\n * @param successCallback function - called when succesfully queried. passes KlProjectObj\n * @param errorCallback - function(errorStr) - called when error during query\n */\nexport function getKlProjectObj(successCallback, errorCallback) {\n    if (indexedDbIsSupported) {\n        let query;\n        execIndexedDBTransaction(function (storeObj) {\n            query = storeObj.get(1);\n        }, function () {\n            successCallback(query.result);\n        }, function (errorStr) {\n            errorCallback('execIndexedDBTransaction error, ' + errorStr);\n        });\n    } else {\n        successCallback(null);\n    }\n}\n\n/**\n * stores a klProjectObj into id = 1 in database:dbNameStr > storage: storageNameStr\n *\n * KlProjectObj {\n *     width: int,\n *     height: int,\n *     layers: {\n *        name: string,\n *        opacity: float (0 - 1),\n *        mixModeStr: string,\n *        blob: blob object                 <--------- blob!\n *     }[]\n * }\n *\n * @param storageProject IKlStorageProject - project to be stored\n * @param successCallback function() - on successful transaction\n * @param errorCallback function(errorStr) - on error\n */\nexport function storeKlProjectObj(storageProject: IKlStorageProject, successCallback, errorCallback) {\n    execIndexedDBTransaction(function (storeObj) {\n        storeObj.put(storageProject);\n    }, function () {\n        successCallback();\n    }, function (errorStr) {\n        errorCallback(errorStr);\n    });\n\n}\n\n/**\n * removes id = 1 from database:dbNameStr > storage: storageNameStr\n *\n * @param successCallback function() - on successful transaction\n * @param errorCallback function(error) - on error\n */\nexport function clear(successCallback, errorCallback) {\n    execIndexedDBTransaction(function (storeObj) {\n        storeObj.delete(1);\n    }, function () {\n        successCallback();\n    }, function (error) {\n        errorCallback(error);\n    });\n\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"5tPq3\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"cazOx\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"245NA\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"1hkCG\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"k2eFf\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"krKGd\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"ehfxY\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"beOjS\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"Gk9bV\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"csed7\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"equSE\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"h1dN3\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"LfAXI\");","import {IFilter} from '../kl.types';\n// @ts-ignore\nimport glBrightnessContrastImg from 'url:~/src/app/img/ui/edit-brightness-contrast.svg';\n// @ts-ignore\nimport cropExtendImg from 'url:~/src/app/img/ui/edit-crop.svg';\n// @ts-ignore\nimport glCurvesImg from 'url:~/src/app/img/ui/edit-curves.svg';\n// @ts-ignore\nimport flipImg from 'url:~/src/app/img/ui/edit-flip.svg';\n// @ts-ignore\nimport glHueSaturationImg from 'url:~/src/app/img/ui/edit-hue-saturation.svg';\n// @ts-ignore\nimport invertImg from 'url:~/src/app/img/ui/edit-invert.png';\n// @ts-ignore\nimport glPerspectiveImg from 'url:~/src/app/img/ui/edit-perspective.svg';\n// @ts-ignore\nimport resizeImg from 'url:~/src/app/img/ui/edit-resize.svg';\n// @ts-ignore\nimport rotateImg from 'url:~/src/app/img/ui/edit-rotate.svg';\n// @ts-ignore\nimport glTiltShiftImg from 'url:~/src/app/img/ui/edit-tilt-shift.png';\n// @ts-ignore\nimport toAlphaImg from 'url:~/src/app/img/ui/edit-to-alpha.svg';\n// @ts-ignore\nimport transformImg from 'url:~/src/app/img/ui/edit-transform.svg';\n// @ts-ignore\nimport glBlurImg from 'url:~/src/app/img/ui/edit-triangle-blur.png';\n// @ts-ignore\nimport glUnsharpMaskImg from 'url:~/src/app/img/ui/edit-unsharp-mask.png';\n// @ts-ignore\nimport aImg from 'url:~/src/app/img/ui/';\nimport {LANG, languageStrings} from '../../language/language';\n\n\nexport const filterLibStatus = {\n    isLoaded: false,\n};\nexport const filterLib: {\n    [key:string]: IFilter;\n} = {\n    glBrightnessContrast: {\n        lang: {name: 'filter-bright-contrast-title', button: 'filter-bright-contrast'},\n        name: '',\n        buttonLabel: '',\n        webgl: true,\n        updateContext: true,\n        icon: glBrightnessContrastImg,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    cropExtend: {\n        lang: {name: 'filter-crop-title', button: 'filter-crop-extend'},\n        name: '',\n        buttonLabel: '',\n        icon: cropExtendImg,\n        webgl: false,\n        neededWithWebGL: true,\n        updateContext: true,\n        updatePos: true,\n        getDialog: null,\n        apply: null,\n        inEmbed: false,\n    },\n    glCurves: {\n        lang: {name: 'filter-curves-title', button: 'filter-curves'},\n        name: '',\n        buttonLabel: '',\n        icon: glCurvesImg,\n        webgl: true,\n        updateContext: true,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    flip: {\n        lang: {name: 'filter-flip-title', button: 'filter-flip'},\n        name: '',\n        buttonLabel: '',\n        icon: flipImg,\n        webgl: false,\n        neededWithWebGL: true,\n        updateContext: true,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    glHueSaturation: {\n        lang: {name: 'filter-hue-sat-title', button: 'filter-hue-sat'},\n        name: '',\n        buttonLabel: '',\n        icon: glHueSaturationImg,\n        webgl: true,\n        updateContext: true,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    invert: {\n        lang: {name: 'filter-invert', button: 'filter-invert'},\n        name: '',\n        icon: invertImg,\n        webgl: true,\n        updateContext: true,\n        updatePos: false,\n        isInstant: true,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    glPerspective: {\n        lang: {name: 'filter-perspective-title', button: 'filter-perspective'},\n        name: '',\n        buttonLabel: '',\n        icon: glPerspectiveImg,\n        webgl: true,\n        updateContext: true,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    resize: {\n        lang: {name: 'filter-resize-title', button: 'filter-resize'},\n        name: '',\n        buttonLabel: '',\n        icon: resizeImg,\n        webgl: false,\n        neededWithWebGL: true,\n        updateContext: true,\n        updatePos: true,\n        getDialog: null,\n        apply: null,\n        inEmbed: false,\n    },\n    rotate: {\n        lang: {name: 'filter-rotate-title', button: 'filter-rotate'},\n        name: '',\n        buttonLabel: '',\n        icon: rotateImg,\n        webgl: false,\n        neededWithWebGL: true,\n        updateContext: true,\n        updatePos: true,\n        getDialog: null,\n        apply: null,\n        inEmbed: false,\n    },\n    glTiltShift: {\n        lang: {name: 'filter-tilt-shift-title', button: 'filter-tilt-shift'},\n        name: '',\n        buttonLabel: '',\n        icon: glTiltShiftImg,\n        webgl: true,\n        updateContext: true,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    toAlpha: {\n        lang: {name: 'filter-to-alpha-title', button: 'filter-to-alpha'},\n        name: '',\n        buttonLabel: '',\n        icon: toAlphaImg,\n        webgl: true,\n        updateContext: false,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    transform: {\n        lang: {name: 'filter-transform-title', button: 'filter-transform'},\n        name: '',\n        buttonLabel: '',\n        icon: transformImg,\n        webgl: false,\n        neededWithWebGL: true,\n        updateContext: true,\n        updatePos: false,\n        ieFails: true,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    glBlur: {\n        lang: {name: 'filter-triangle-blur-title', button: 'filter-triangle-blur'},\n        name: '',\n        buttonLabel: '',\n        icon: glBlurImg,\n        webgl: true,\n        updateContext: true,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    },\n    glUnsharpMask: {\n        lang: {name: 'filter-unsharp-mask-title', button: 'filter-unsharp-mask'},\n        name: '',\n        buttonLabel: '',\n        icon: glUnsharpMaskImg,\n        webgl: true,\n        updateContext: true,\n        updatePos: false,\n        getDialog: null,\n        apply: null,\n        inEmbed: true,\n    }\n};\n\nfunction updateNames() {\n    const keys = Object.keys(filterLib);\n    keys.forEach(item => {\n        filterLib[item].name = LANG(filterLib[item].lang.name);\n        filterLib[item].buttonLabel = LANG(filterLib[item].lang.button);\n    });\n}\nupdateNames();\n\nlanguageStrings.subscribe(() => {\n    updateNames();\n});","/*\n * A speed-improved perlin and simplex noise algorithms for 2D.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n * Converted to Javascript by Joseph Gentle.\n *\n * Version 2012-03-09\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n *\n */\n\nconst myModule = {} as any;\n\n\nfunction Grad(x, y, z) {\n    this.x = x; this.y = y; this.z = z;\n}\n\nGrad.prototype.dot2 = function(x, y) {\n    return this.x*x + this.y*y;\n};\n/*\nGrad.prototype.dot3 = function(x, y, z) {\n    return this.x*x + this.y*y + this.z*z;\n};*/\n\nlet grad3 = [new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),\n    new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),\n    new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)];\n\nlet p = [151,160,137,91,90,15,\n    131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,\n    190, 6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,\n    88,237,149,56,87,174,20,125,136,171,168, 68,175,74,165,71,134,139,48,27,166,\n    77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,\n    102,143,54, 65,25,63,161, 1,216,80,73,209,76,132,187,208, 89,18,169,200,196,\n    135,130,116,188,159,86,164,100,109,198,173,186, 3,64,52,217,226,250,124,123,\n    5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,\n    223,183,170,213,119,248,152, 2,44,154,163, 70,221,153,101,155,167, 43,172,9,\n    129,22,39,253, 19,98,108,110,79,113,224,232,178,185, 112,104,218,246,97,228,\n    251,34,242,193,238,210,144,12,191,179,162,241, 81,51,145,235,249,14,239,107,\n    49,192,214, 31,181,199,106,157,184, 84,204,176,115,121,50,45,127, 4,150,254,\n    138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];\n// To remove the need for index wrapping, double the permutation table length\nlet perm = new Array(512);\nlet gradP = new Array(512);\n\n// This isn't a very good seeding function, but it works ok. It supports 2^16\n// different seed values. Write something better if you need more seeds.\nmyModule.seed = function(seed) {\n    if (seed > 0 && seed < 1) {\n        // Scale the seed out\n        seed *= 65536;\n    }\n\n    seed = Math.floor(seed);\n    if (seed < 256) {\n        seed |= seed << 8;\n    }\n\n    for (let i = 0; i < 256; i++) {\n        let v;\n        if (i & 1) {\n            v = p[i] ^ (seed & 255);\n        } else {\n            v = p[i] ^ ((seed>>8) & 255);\n        }\n\n        perm[i] = perm[i + 256] = v;\n        gradP[i] = gradP[i + 256] = grad3[v % 12];\n    }\n};\n\nmyModule.seed(0);\n\n/*\nfor (let i=0; i<256; i++) {\n  perm[i] = perm[i + 256] = p[i];\n  gradP[i] = gradP[i + 256] = grad3[perm[i] % 12];\n}*/\n\n// Skewing and unskewing factors for 2, 3, and 4 dimensions\nlet F2 = 0.5*(Math.sqrt(3)-1);\nlet G2 = (3-Math.sqrt(3))/6;\n\n/*let F3 = 1/3;\nlet G3 = 1/6;*/\n\n// 2D simplex noise\nmyModule.simplex2 = function(xin, yin) {\n    let n0, n1, n2; // Noise contributions from the three corners\n    // Skew the input space to determine which simplex cell we're in\n    let s = (xin+yin)*F2; // Hairy factor for 2D\n    let i = Math.floor(xin+s);\n    let j = Math.floor(yin+s);\n    let t = (i+j)*G2;\n    let x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    let y0 = yin-j+t;\n    // For the 2D case, the simplex shape is an equilateral triangle.\n    // Determine which simplex we are in.\n    let i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n    if (x0>y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n        i1=1; j1=0;\n    } else {    // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n        i1=0; j1=1;\n    }\n    // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n    // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n    // c = (3-sqrt(3))/6\n    let x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n    let y1 = y0 - j1 + G2;\n    let x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n    let y2 = y0 - 1 + 2 * G2;\n    // Work out the hashed gradient indices of the three simplex corners\n    i &= 255;\n    j &= 255;\n    let gi0 = gradP[i+perm[j]];\n    let gi1 = gradP[i+i1+perm[j+j1]];\n    let gi2 = gradP[i+1+perm[j+1]];\n    // Calculate the contribution from the three corners\n    let t0 = 0.5 - x0*x0-y0*y0;\n    if (t0<0) {\n        n0 = 0;\n    } else {\n        t0 *= t0;\n        n0 = t0 * t0 * gi0.dot2(x0, y0);  // (x,y) of grad3 used for 2D gradient\n    }\n    let t1 = 0.5 - x1*x1-y1*y1;\n    if (t1<0) {\n        n1 = 0;\n    } else {\n        t1 *= t1;\n        n1 = t1 * t1 * gi1.dot2(x1, y1);\n    }\n    let t2 = 0.5 - x2*x2-y2*y2;\n    if (t2<0) {\n        n2 = 0;\n    } else {\n        t2 *= t2;\n        n2 = t2 * t2 * gi2.dot2(x2, y2);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 70 * (n0 + n1 + n2);\n};\n/*\n// 3D simplex noise\nmyModule.simplex3 = function(xin, yin, zin) {\n    let n0, n1, n2, n3; // Noise contributions from the four corners\n\n    // Skew the input space to determine which simplex cell we're in\n    let s = (xin+yin+zin)*F3; // Hairy factor for 2D\n    let i = Math.floor(xin+s);\n    let j = Math.floor(yin+s);\n    let k = Math.floor(zin+s);\n\n    let t = (i+j+k)*G3;\n    let x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    let y0 = yin-j+t;\n    let z0 = zin-k+t;\n\n    // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n    // Determine which simplex we are in.\n    let i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n    let i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n    if (x0 >= y0) {\n        if (y0 >= z0)      { i1=1; j1=0; k1=0; i2=1; j2=1; k2=0; }\n        else if (x0 >= z0) { i1=1; j1=0; k1=0; i2=1; j2=0; k2=1; }\n        else              { i1=0; j1=0; k1=1; i2=1; j2=0; k2=1; }\n    } else {\n        if (y0 < z0)      { i1=0; j1=0; k1=1; i2=0; j2=1; k2=1; }\n        else if (x0 < z0) { i1=0; j1=1; k1=0; i2=0; j2=1; k2=1; }\n        else             { i1=0; j1=1; k1=0; i2=1; j2=1; k2=0; }\n    }\n    // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n    // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n    // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n    // c = 1/6.\n    let x1 = x0 - i1 + G3; // Offsets for second corner\n    let y1 = y0 - j1 + G3;\n    let z1 = z0 - k1 + G3;\n\n    let x2 = x0 - i2 + 2 * G3; // Offsets for third corner\n    let y2 = y0 - j2 + 2 * G3;\n    let z2 = z0 - k2 + 2 * G3;\n\n    let x3 = x0 - 1 + 3 * G3; // Offsets for fourth corner\n    let y3 = y0 - 1 + 3 * G3;\n    let z3 = z0 - 1 + 3 * G3;\n\n    // Work out the hashed gradient indices of the four simplex corners\n    i &= 255;\n    j &= 255;\n    k &= 255;\n    let gi0 = gradP[i+   perm[j+   perm[k   ]]];\n    let gi1 = gradP[i+i1+perm[j+j1+perm[k+k1]]];\n    let gi2 = gradP[i+i2+perm[j+j2+perm[k+k2]]];\n    let gi3 = gradP[i+ 1+perm[j+ 1+perm[k+ 1]]];\n\n    // Calculate the contribution from the four corners\n    let t0 = 0.6 - x0*x0 - y0*y0 - z0*z0;\n    if (t0<0) {\n        n0 = 0;\n    } else {\n        t0 *= t0;\n        n0 = t0 * t0 * gi0.dot3(x0, y0, z0);  // (x,y) of grad3 used for 2D gradient\n    }\n    let t1 = 0.6 - x1*x1 - y1*y1 - z1*z1;\n    if (t1<0) {\n        n1 = 0;\n    } else {\n        t1 *= t1;\n        n1 = t1 * t1 * gi1.dot3(x1, y1, z1);\n    }\n    let t2 = 0.6 - x2*x2 - y2*y2 - z2*z2;\n    if (t2<0) {\n        n2 = 0;\n    } else {\n        t2 *= t2;\n        n2 = t2 * t2 * gi2.dot3(x2, y2, z2);\n    }\n    let t3 = 0.6 - x3*x3 - y3*y3 - z3*z3;\n    if (t3<0) {\n        n3 = 0;\n    } else {\n        t3 *= t3;\n        n3 = t3 * t3 * gi3.dot3(x3, y3, z3);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 32 * (n0 + n1 + n2 + n3);\n\n};\n*/\n// ##### Perlin noise stuff\n/*\nfunction fade(t) {\n    return t*t*t*(t*(t*6-15)+10);\n}\n\nfunction lerp(a, b, t) {\n    return (1-t)*a + t*b;\n}\n\n// 2D Perlin Noise\nmyModule.perlin2 = function(x, y) {\n    // Find unit grid cell containing point\n    let X = Math.floor(x), Y = Math.floor(y);\n    // Get relative xy coordinates of point within that cell\n    x = x - X; y = y - Y;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255;\n\n    // Calculate noise contributions from each of the four corners\n    let n00 = gradP[X+perm[Y]].dot2(x, y);\n    let n01 = gradP[X+perm[Y+1]].dot2(x, y-1);\n    let n10 = gradP[X+1+perm[Y]].dot2(x-1, y);\n    let n11 = gradP[X+1+perm[Y+1]].dot2(x-1, y-1);\n\n    // Compute the fade curve value for x\n    let u = fade(x);\n\n    // Interpolate the four results\n    return lerp(\n        lerp(n00, n10, u),\n        lerp(n01, n11, u),\n        fade(y));\n};*/\n/*\n// 3D Perlin Noise\nmyModule.perlin3 = function(x, y, z) {\n    // Find unit grid cell containing point\n    let X = Math.floor(x), Y = Math.floor(y), Z = Math.floor(z);\n    // Get relative xyz coordinates of point within that cell\n    x = x - X; y = y - Y; z = z - Z;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255; Z = Z & 255;\n\n    // Calculate noise contributions from each of the eight corners\n    let n000 = gradP[X+  perm[Y+  perm[Z  ]]].dot3(x,   y,     z);\n    let n001 = gradP[X+  perm[Y+  perm[Z+1]]].dot3(x,   y,   z-1);\n    let n010 = gradP[X+  perm[Y+1+perm[Z  ]]].dot3(x,   y-1,   z);\n    let n011 = gradP[X+  perm[Y+1+perm[Z+1]]].dot3(x,   y-1, z-1);\n    let n100 = gradP[X+1+perm[Y+  perm[Z  ]]].dot3(x-1,   y,   z);\n    let n101 = gradP[X+1+perm[Y+  perm[Z+1]]].dot3(x-1,   y, z-1);\n    let n110 = gradP[X+1+perm[Y+1+perm[Z  ]]].dot3(x-1, y-1,   z);\n    let n111 = gradP[X+1+perm[Y+1+perm[Z+1]]].dot3(x-1, y-1, z-1);\n\n    // Compute the fade curve value for x, y, z\n    let u = fade(x);\n    let v = fade(y);\n    let w = fade(z);\n\n    // Interpolate\n    return lerp(\n        lerp(\n            lerp(n000, n100, u),\n            lerp(n001, n101, u), w),\n        lerp(\n            lerp(n010, n110, u),\n            lerp(n011, n111, u), w),\n        v);\n};*/\n\nexport const noise = myModule;","import {BB} from '../../../bb/bb';\nimport {noise} from '../../../bb/math/perlin';\nimport {IVector2D} from '../../../bb/bb.types';\n\n// chalk\nexport function genBrushAlpha01(w: number): HTMLCanvasElement {\n\n    const scaleFac = w / 500;\n    const h = w;\n    const canvas = BB.canvas(w, h);\n    const ctx = canvas.getContext('2d');\n    const imData = ctx.createImageData(w, h);\n    for (let x = 0; x < w; x++) {\n        for (let y = 0; y < h; y++) {\n            let i = (y * w + x) * 4;\n\n            // base noise\n            const sFac2 = scaleFac + noise.simplex2(x / 50 / scaleFac, y / 50 / scaleFac) * 0.04;\n            let noisePattern = 100 + (noise.simplex2(x / 50 / sFac2, y / 50 / sFac2) + 1) / 2 * 100;\n            noisePattern -= (noise.simplex2(x / 10 / scaleFac, y / 10 / scaleFac) + 1) / 2 * 100;\n\n            // fade out in circular shape\n            const centerDist = BB.dist(w / 2, h / 2, x, y);\n            let falloff = BB.clamp(\n                1 - ((centerDist - (w / 2.5)) / (w / 14) + noise.simplex2(x / 22 / sFac2, y / 22 / sFac2)),\n                0,\n                1);\n            noisePattern = noisePattern * falloff;\n\n            // make the middle darker\n            const falloff2 = BB.clamp(1 - centerDist / w, 0, 1) * 2;\n            noisePattern = noisePattern * falloff2;\n\n            imData.data[i] = 0;\n            imData.data[i + 1] = 0;\n            imData.data[i + 2] = 0;\n            imData.data[i + 3] = BB.clamp(noisePattern, 0, 255);\n        }\n    }\n\n    ctx.putImageData(imData, 0, 0);\n    return canvas;\n}\n\n// https://www.shadertoy.com/view/3tdSDj\nfunction udSegment( p: IVector2D, a: IVector2D, b: IVector2D ) {\n    let ba = BB.Vec2.sub(b, a);\n    let pa = BB.Vec2.sub(p, a);\n    let h = BB.clamp( BB.Vec2.dot(pa,ba) / BB.Vec2.dot(ba,ba), 0.0, 1.0 );\n    return BB.Vec2.len(BB.Vec2.sub(pa, BB.Vec2.mul(ba, h)));\n}\n\n// calligraphy\nexport function genBrushAlpha02(w: number): HTMLCanvasElement {\n\n    const pDist = 1 / 4;\n    let centerSize = 2 / 3;\n    let transitionSize = 1 / 3;\n    centerSize *= pDist;\n    transitionSize *= pDist;\n    const p1 = {x: pDist * w, y: w - (w * pDist)};\n    const p2 = {x: w - (w * pDist), y: pDist * w};\n\n    const h = w;\n    const canvas = BB.canvas(w, h);\n    let ctx = canvas.getContext('2d');\n    const imData = ctx.createImageData(w, h);\n    for (let x = 0; x < w; x++) {\n        for (let y = 0; y < h; y++) {\n            const i = (y * w + x) * 4;\n\n            let col = udSegment({x: x, y: y}, p1, p2);\n\n            col = BB.clamp(\n                255 - ((col - (w * centerSize)) / (w * transitionSize) * 255),\n                0,\n                255\n            );\n\n            imData.data[i] = 0;\n            imData.data[i + 1] = 0;\n            imData.data[i + 2] = 0;\n            imData.data[i + 3] = col;\n        }\n    }\n\n    ctx.putImageData(imData, 0, 0);\n    return canvas;\n}","import {genBrushAlpha01, genBrushAlpha02} from './alphas/brush-alphas';\n\nexport const alphaImArr = []; //used by default brush\nalphaImArr[1] = genBrushAlpha01(128);\nalphaImArr[2] = genBrushAlpha02(128);","import {BB} from '../../bb/bb';\nimport {IRGB, IRGBA} from '../kl.types';\nimport {IBounds, IPressureInput} from '../../bb/bb.types';\nimport {IHistoryEntry, KlHistoryInterface} from '../history/kl-history';\n\nconst cellSize = 256;\n\ninterface IDrawBufferItem {\n    x: number;\n    y: number;\n    size: number;\n    opacity: number;\n    x1: number;\n    y1: number;\n    x2: number;\n    y2: number;\n    r: number;\n    g: number;\n    b: number;\n}\n\n// faster than using BB.clamp somehow (in chrome)\nfunction clamp(num, min, max) {\n    return num <= min\n        ? min\n        : num >= max\n            ? max\n            : num\n}\n\nexport class BlendBrush {\n\n    private isTesting: boolean = false; // testing mode - context only gets updated when line is finished\n\n    private context: CanvasRenderingContext2D;\n    private color: IRGB;\n    private size: number = 29; // radius - 0.5 - 99999\n    private opacity: number = 0.6; // 0-1\n    private blending: number = 0.65; // 0-1\n\n    private settingLockLayerAlpha: boolean = false;\n    private settingSizePressure: boolean = true;\n    private settingOpacityPressure: boolean = false;\n\n    private blendCol: IRGBA = {r: 0, g: 0, b: 0, a: 1}; // todo docs\n    private blendMix: number = 0.45; // todo docs\n    private mixr: number; // todo docs\n    private mixg: number; // todo docs\n    private mixb: number; // todo docs\n    private localColOld: IRGBA; // todo docs\n\n    private isDrawing: boolean = false;\n    private lastInput: IPressureInput = {x: 0, y: 0, pressure: 0}; // todo docs\n    private lastInput2: IPressureInput = {x: 0, y: 0, pressure: 0}; // todo docs\n    private bezierLine: any; // todo type\n\n    private history: KlHistoryInterface | null;\n    private historyEntry: IHistoryEntry;\n    private redrawBounds: IBounds;\n    private cells: (ImageData | null)[];\n    private drawBuffer: IDrawBufferItem[];\n\n    private updateRedrawBounds (bounds: IBounds): void {\n        this.redrawBounds = BB.updateBounds(this.redrawBounds, bounds);\n    }\n\n    private getCellsWidth(): number {\n        return Math.ceil(this.context.canvas.width / cellSize);\n    }\n\n    /**\n     * draw changed cells (changed by brushstroke) onto context\n     * @private\n     */\n    private drawChangedCells(): void {\n        const cells = this.cells.map(item => null);\n        const touchedCells = this.getTouchedCells(this.redrawBounds);\n        touchedCells.forEach((isTouched, index) => {\n            if (isTouched) {\n                cells[index] = this.cells[index];\n            }\n        });\n        this.drawCells(cells);\n        this.redrawBounds = null;\n    }\n\n    private getTouchedCells(bounds: IBounds): boolean[] {\n        const touchedCells = this.cells.map(item => false);\n        const cellsW = this.getCellsWidth();\n        bounds = {\n            x1: Math.floor(bounds.x1 / cellSize),\n            y1: Math.floor(bounds.y1 / cellSize),\n            x2: Math.floor(bounds.x2 / cellSize),\n            y2: Math.floor(bounds.y2 / cellSize),\n        };\n        for (let i = bounds.x1; i <= bounds.x2; i++) {\n            for (let e = bounds.y1; e <= bounds.y2; e++) {\n                touchedCells[e * cellsW + i] = true;\n            }\n        }\n        return touchedCells;\n    }\n\n    /**\n     * Slice up bounds accordings to cells\n     * @param bounds\n     * @private\n     */\n    private sliceBounds(bounds: IBounds): {index: number; bounds: IBounds}[] {\n        const cellsW = this.getCellsWidth();\n        const result: {index: number; bounds: IBounds}[] = [];\n        const touchedCells = this.getTouchedCells(bounds);\n\n        touchedCells.forEach((cell, i) => {\n            if (!cell) {\n                return;\n            }\n\n            const cellOffsetX = (i % cellsW) * cellSize;\n            const cellOffsetY = Math.floor(i / cellsW) * cellSize;\n            const cellWidth = this.cells[i].width;\n            const cellHeight = this.cells[i].height;\n\n            const inCellBounds = {\n                x1: Math.max(0, bounds.x1 - cellOffsetX),\n                y1: Math.max(0, bounds.y1 - cellOffsetY),\n                x2: Math.min(cellWidth - 1, bounds.x2 - cellOffsetX),\n                y2: Math.min(cellHeight - 1, bounds.y2 - cellOffsetY),\n            }\n            if (inCellBounds.x1 > inCellBounds.x2 || inCellBounds.y1 > inCellBounds.y2) {\n                return;\n            }\n            result.push({\n                index: i,\n                bounds: inCellBounds,\n            });\n        });\n\n        return result;\n    }\n\n    /**\n     * update copyImageData. copy over new regions if needed\n     */\n    private copyFromCanvas(bounds: IBounds) {\n        if (!bounds) {\n            return;\n        }\n\n        const touchedCells = this.getTouchedCells(bounds);\n        const cellsW = this.getCellsWidth();\n\n        touchedCells.forEach((item, i) => {\n            if (!item || this.cells[i]) {\n                // not touched, or already copied\n                return;\n            }\n            const x = i % cellsW;\n            const y = Math.floor(i / cellsW);\n            const w = (Math.min(x * cellSize + cellSize, this.context.canvas.width) - 1) % cellSize + 1;\n            const h = (Math.min(y * cellSize + cellSize, this.context.canvas.height) - 1) % cellSize + 1;\n\n            // temp canvas to prevent main canvas from getting slowed down in chrome\n            const tmpCanvas = BB.canvas(w, h);\n            const tmpCtx = tmpCanvas.getContext('2d');\n            tmpCtx.drawImage(this.context.canvas, -x * cellSize, -y * cellSize);\n\n            this.cells[i] = tmpCtx.getImageData(0, 0, w, h);\n        });\n    }\n\n    private getAverage (x, y, size): IRGBA {\n\n        size = Math.max(0.5, size * 0.75);\n        const x1 = Math.max(0, Math.floor(x - size));\n        const y1 = Math.max(0, Math.floor(y - size));\n        const x2 = Math.min(this.context.canvas.width - 1, Math.ceil(x + size));\n        const y2 = Math.min(this.context.canvas.height - 1, Math.ceil(y + size));\n        if (x1 > x2 || y1 > y2) {\n            return {\n                r: 0,\n                g: 0,\n                b: 0,\n                a: 0,\n            };\n        }\n\n        let ar = 0, ag = 0, ab = 0, aa = 0, alpha;\n\n        const slicedBounds = this.sliceBounds({ x1, y1, x2, y2 });\n        slicedBounds.forEach(slice => {\n            const width = this.cells[slice.index].width;\n            const data = this.cells[slice.index].data;\n            const bounds = slice.bounds;\n\n            for (let i = bounds.y1; i <= bounds.y2; i += 4) {\n                for (let e = bounds.x1, e2 = i * width * 4 + bounds.x1 * 4; e <= bounds.x2; e += 4, e2 += 4 * 4) {\n                    alpha = data[e2 + 3];\n                    ar += data[e2] * alpha;\n                    ag += data[e2 + 1] * alpha;\n                    ab += data[e2 + 2] * alpha;\n                    aa += alpha;\n                }\n            }\n        });\n\n        if (aa !== 0) {\n            ar /= aa;\n            ag /= aa;\n            ab /= aa;\n            aa = Math.min(1, aa);\n        }\n        return {\n            r: ar,\n            g: ag,\n            b: ab,\n            a: aa\n        };\n    }\n\n    private prepDot (x: number, y: number, size: number): IBounds {\n        size = Math.max(0.5, size);\n        let x1 = Math.max(0, Math.floor(x - size));\n        let y1 = Math.max(0, Math.floor(y - size));\n        let x2 = Math.min(this.context.canvas.width - 1, Math.ceil(x + size));\n        let y2 = Math.min(this.context.canvas.height - 1, Math.ceil(y + size));\n        if (x1 > x2 || y1 > y2) {\n            return null;\n        }\n        return { x1, y1, x2, y2 };\n    }\n\n    private drawDot (params: IDrawBufferItem): void {\n        // array with random numbers. faster than Math.random()\n        let randI = 0;\n        const randLen = params.size > 30 ? 1024 : 512; // lower lengths lead to noticeable patterns\n        const randArr = [];\n        for (let i = 0; i < randLen; i++) {\n            randArr[i] = (Math.random() - 0.5) / 1.001 + 0.5;\n        }\n\n        // thin lines take more than just 1 sample\n        const sampleArr = [8,4,4,4,2,2,2,2,2,2]; // <0.5, 0.5, 1, 1.5, etc.\n        const samples = sampleArr[Math.floor(params.size * 2)];\n        const samplesSquared: number = samples ? samples * samples : 0;\n        const sampleOffsets = [];\n        if (samples) {\n            let i = 0;\n            for (let n = 0; n < samples; n++) {\n                for (let m = 0; m < samples; m++, i += 2) {\n                    sampleOffsets[i] = (n + 1) / samples; // x offset\n                    sampleOffsets[i + 1] = (m + 1) / samples; // y offset\n                }\n            }\n        }\n\n        const sharpness = Math.pow(params.opacity, 2) * 0.8;\n        // to optimize calculations\n        const invSharpness = 1 - sharpness;\n        const sharpnessSubtrahend = sharpness / invSharpness;\n        const sizeSquared = params.size * params.size;\n        const distDivisor = sizeSquared * invSharpness / params.opacity;\n        const alphaMinuend = (1 + sharpnessSubtrahend) * params.opacity;\n\n\n        const slicedBounds = this.sliceBounds({\n            x1: params.x1,\n            y1: params.y1,\n            x2: params.x2,\n            y2: params.y2,\n        });\n\n        const cellsW = this.getCellsWidth();\n        slicedBounds.forEach(slice => {\n            const cellOffsetX = (slice.index % cellsW) * cellSize;\n            const cellOffsetY = Math.floor(slice.index / cellsW) * cellSize;\n            const cellWidth = this.cells[slice.index].width;\n            const data = this.cells[slice.index].data;\n\n            // i - y index within cell\n            // e - x index within cell\n\n            // e2 - index in image data\n\n            // ri - y index within image relative to dot-center\n            // re - x index within image relative to dot-center\n\n            for (let i = slice.bounds.y1, ri = i + cellOffsetY - params.y; i <= slice.bounds.y2; i++, ri++) {\n                for (\n                    let e = slice.bounds.x1,\n                        e2 = i * cellWidth * 4 + slice.bounds.x1 * 4,\n                        re = e + cellOffsetX - params.x;\n                    e <= slice.bounds.x2;\n                    e++,\n                        e2 += 4,\n                        re++\n                ) {\n                    // O = over -> brush-dot\n                    // U = under -> image\n\n                    let alphaO = 0;\n                    if (samplesSquared) {\n                        for (let f = 0; f < sampleOffsets.length; f += 2) {\n                            const dist = BB.lenSquared(re + sampleOffsets[f], ri + sampleOffsets[f + 1]);\n                            if (dist >= sizeSquared) {\n                                continue;\n                            }\n                            alphaO += clamp(alphaMinuend - dist / distDivisor, 0, params.opacity);\n                        }\n                        if (!alphaO) {\n                            continue;\n                        }\n                        alphaO /= samplesSquared;\n                    } else {\n                        // technically needs + 0.5 offset, but not noticeable with large brush\n                        const dist = Math.pow(re, 2) + Math.pow(ri, 2);\n                        if (dist >= sizeSquared) {\n                            continue;\n                        }\n                        alphaO = clamp(alphaMinuend - dist / distDivisor, 0, params.opacity);\n                    }\n\n                    const invAlphaO = 1 - alphaO;\n                    const alphaU =data[e2 + 3] / 255;\n\n                    if (this.settingLockLayerAlpha) {\n                        const underR = (params.r * alphaO) + ((data[e2]) * invAlphaO);\n                        const underG = (params.g * alphaO) + ((data[e2 + 1]) * invAlphaO);\n                        const underB = (params.b * alphaO) + ((data[e2 + 2]) * invAlphaO);\n                        if (alphaU) {\n                            data[e2] = Math.floor(underR + randArr[randI]);\n                            data[e2 + 1] = Math.floor(underG + randArr[randI]);\n                            data[e2 + 2] = Math.floor(underB + randArr[randI]);\n                        }\n                    } else {\n                        const underR = (params.r * alphaO) + ((data[e2] * alphaU) * invAlphaO);\n                        const underG = (params.g * alphaO) + ((data[e2 + 1] * alphaU) * invAlphaO);\n                        const underB = (params.b * alphaO) + ((data[e2 + 2] * alphaU) * invAlphaO);\n\n                        let newAlpha = 1 - invAlphaO * (1 - alphaU);\n                        data[e2 + 3] = Math.floor(Math.min(255, newAlpha * 255) + 0.5);\n                        if (newAlpha) {\n                            data[e2] = Math.floor(underR / (newAlpha) + randArr[randI]);\n                            data[e2 + 1] = Math.floor(underG / (newAlpha) + randArr[randI]);\n                            data[e2 + 2] = Math.floor(underB / (newAlpha) + randArr[randI]);\n                        }\n                    }\n                    randI = (randI + 1) % randLen;\n\n                }\n            }\n\n        });\n    }\n\n    private calcSpacing (size: number): number {\n        return BB.mix(\n            (size * 2) / 2, // until size 5.3\n            (size * 2) / 9, // at size 24\n            BB.clamp((size - 2.7) / (12 - 2.7), 0, 1)\n        );\n    }\n\n    private continueLine (x: number, y: number, p: number, isCoalesced: boolean): void {\n\n        this.drawBuffer = [];\n\n        let localPressure;\n        let localOpacity;\n        let localSize = (this.settingSizePressure) ? Math.max(1, p * this.size) : Math.max(1, this.size);\n\n        let bdist = this.calcSpacing(localSize);\n\n        let avgX = x;\n        let avgY = y;\n        if (x === null) {\n            avgX = this.lastInput.x;\n            avgY = this.lastInput.y;\n        }\n\n        let localColNew;\n\n        if (this.blending === 0) {\n            this.mixr = this.color.r;\n            this.mixg = this.color.g;\n            this.mixb = this.color.b;\n        } else {\n            let average;\n            if (isCoalesced) {\n                average = {r: this.localColOld.r, g: this.localColOld.g, b: this.localColOld.b, a: 0};\n            } else {\n                const avgParams = [avgX, avgY, ((this.settingSizePressure) ? Math.max(0.5, p * this.size) : Math.max(0.5, this.size))];\n                const bounds = this.prepDot(avgParams[0], avgParams[1], avgParams[2]);\n                this.copyFromCanvas(bounds);\n                average = this.getAverage(avgParams[0], avgParams[1], avgParams[2]);\n            }\n            localColNew = {r: 0, g: 0, b: 0, a: 0};\n\n            if (average.a > 0 && this.blendCol.a === 0) {\n                this.blendCol.r = average.r;\n                this.blendCol.g = average.g;\n                this.blendCol.b = average.b;\n                this.blendCol.a = average.a;\n                localColNew.r = this.blendCol.r;\n                localColNew.g = this.blendCol.g;\n                localColNew.b = this.blendCol.b;\n                localColNew.a = this.blendCol.a;\n\n            } else {\n                if (average.a === 0) {\n                    average.r = this.color.r;\n                    average.g = this.color.g;\n                    average.b = this.color.b;\n                    average.a = 1 - this.blending;\n                }\n\n                this.blendCol.r = BB.mix(this.blendCol.r, BB.mix(this.blendCol.r, average.r, this.blendMix), average.a);\n                this.blendCol.g = BB.mix(this.blendCol.g, BB.mix(this.blendCol.g, average.g, this.blendMix), average.a);\n                this.blendCol.b = BB.mix(this.blendCol.b, BB.mix(this.blendCol.b, average.b, this.blendMix), average.a);\n                this.blendCol.a = Math.min(1, this.blendCol.a + average.a);\n                localColNew.r = this.blendCol.r;\n                localColNew.g = this.blendCol.g;\n                localColNew.b = this.blendCol.b;\n                localColNew.a = this.blendCol.a;\n            }\n\n        }\n\n\n        const bezierCallback = (val) => {\n            if (this.blending >= 1 && this.blendCol.a <= 0) {\n                return;\n            }\n            let factor = val.t;\n            localPressure = this.lastInput2.pressure * (1 - factor) + p * factor;\n            localOpacity = (this.settingOpacityPressure) ? (this.opacity * localPressure * localPressure) : this.opacity;\n            localSize = (this.settingSizePressure) ? Math.max(0.1, localPressure * this.size) : Math.max(0.1, this.size);\n            if (this.blending != 0) {\n                this.mixr = BB.mix(this.localColOld.r, localColNew.r, factor);\n                this.mixg = BB.mix(this.localColOld.g, localColNew.g, factor);\n                this.mixb = BB.mix(this.localColOld.b, localColNew.b, factor);\n            }\n            if (this.blending === 1 && this.localColOld.a === 0) {\n                this.mixr = localColNew.r;\n                this.mixg = localColNew.g;\n                this.mixb = localColNew.b;\n            }\n            const bounds = this.prepDot(val.x, val.y, localSize);\n            if (bounds) {\n                this.updateRedrawBounds(bounds);\n                this.drawBuffer.push({\n                    x: val.x,\n                    y: val.y,\n                    size: localSize,\n                    opacity: localOpacity,\n                    x1: bounds.x1,\n                    y1: bounds.y1,\n                    x2: bounds.x2,\n                    y2: bounds.y2,\n                    r: BB.mix(this.color.r, this.mixr, this.blending),\n                    g: BB.mix(this.color.g, this.mixg, this.blending),\n                    b: BB.mix(this.color.b, this.mixb, this.blending),\n                })\n            }\n        };\n\n        if (x === null) {\n            this.bezierLine.addFinal(bdist, bezierCallback);\n        } else {\n            this.bezierLine.add(x, y, bdist, bezierCallback);\n        }\n\n        this.copyFromCanvas(this.redrawBounds);\n        this.drawBuffer.forEach(item => {\n            this.drawDot(item);\n        });\n        this.drawBuffer = [];\n\n        this.localColOld = localColNew;\n    }\n\n\n\n\n\n    // --- public ----\n    constructor () {\n    }\n\n    setHistory (h: KlHistoryInterface): void {\n        this.history = h;\n    }\n\n    getSize (): number {\n        return this.size;\n    }\n\n    setSize (s: number): void {\n        this.size = s;\n    }\n\n    getOpacity (): number {\n        return this.opacity;\n    }\n\n    setOpacity (o: number): void {\n        this.opacity = o;\n    }\n\n    getBlending (): number {\n        return this.blending;\n    }\n\n    setBlending (b: number) {\n        this.blending = b;\n    }\n\n    setColor (c: IRGB): void {\n        this.color = BB.copyObj(c);\n    }\n\n    setContext (c: CanvasRenderingContext2D) {\n        this.context = c;\n    }\n\n    setSizePressure (b: boolean): void {\n        this.settingSizePressure = !!b;\n    }\n\n    setOpacityPressure (b: boolean): void {\n        this.settingOpacityPressure = !!b;\n    }\n\n    getLockAlpha (): boolean {\n        return this.settingLockLayerAlpha;\n    }\n\n    setLockAlpha (b: boolean): void {\n        this.settingLockLayerAlpha = !!b;\n    }\n\n    getIsDrawing (): boolean {\n        return this.isDrawing;\n    }\n\n    setIsTesting (b: boolean): void {\n        this.isTesting = !!b;\n    }\n\n    startLine (x: number, y: number, p: number): void {\n        this.historyEntry = {\n            tool: [\"brush\", \"BlendBrush\"],\n            actions: []\n        };\n\n\n        const totalCells = Math.ceil(this.context.canvas.width / cellSize) * Math.ceil(this.context.canvas.height / cellSize);\n        this.cells = '0'.repeat(totalCells).split('').map(item => null);\n\n        this.isDrawing = true;\n\n        p = Math.max(0, Math.min(1, p));\n        let localOpacity = (this.settingOpacityPressure) ? (this.opacity * p * p) : this.opacity;\n        let localSize = (this.settingSizePressure) ? Math.max(0.1, p * this.size) : Math.max(0.1, this.size);\n        if (this.blending === 0) {\n            this.mixr = this.color.r;\n            this.mixg = this.color.g;\n            this.mixb = this.color.b;\n        } else {\n            this.copyFromCanvas(this.prepDot(x, y, localSize));\n\n            let average = this.getAverage(\n                x,\n                y,\n                ((this.settingSizePressure) ? Math.max(0.1, p * this.size) : Math.max(0.1, this.size))\n            );\n            if (average.a === 0) {\n                this.blendCol = {\n                    r: this.color.r,\n                    g: this.color.g,\n                    b: this.color.b,\n                    a: 1 - this.blending,\n                };\n            } else {\n                this.blendCol = {\n                    r: average.r,\n                    g: average.g,\n                    b: average.b,\n                    a: average.a,\n                };\n            }\n\n            this.mixr = this.blendCol.r;\n            this.mixg = this.blendCol.g;\n            this.mixb = this.blendCol.b;\n        }\n\n        this.localColOld = {r: this.mixr, g: this.mixg, b: this.mixb, a: this.blendCol.a};\n\n        this.redrawBounds = null;\n        this.drawBuffer = [];\n\n        if (this.blending < 1 || this.blendCol.a > 0) {\n            const bounds = this.prepDot(x, y, localSize);\n            if (bounds) {\n                this.updateRedrawBounds(bounds);\n                this.drawBuffer.push({\n                    x: x,\n                    y: y,\n                    size: localSize,\n                    opacity: localOpacity,\n                    x1: bounds.x1,\n                    y1: bounds.y1,\n                    x2: bounds.x2,\n                    y2: bounds.y2,\n                    r: BB.mix(this.color.r, this.mixr, this.blending),\n                    g: BB.mix(this.color.g, this.mixg, this.blending),\n                    b: BB.mix(this.color.b, this.mixb, this.blending),\n                })\n            }\n        }\n\n        this.copyFromCanvas(this.redrawBounds);\n        this.drawBuffer.forEach(item => {\n            this.drawDot(item);\n        });\n        this.drawBuffer = [];\n\n        this.bezierLine = new BB.BezierLine();\n        this.bezierLine.add(x, y, 0, function () {\n        });\n\n        this.lastInput.x = x;\n        this.lastInput.y = y;\n        this.lastInput.pressure = p;\n        this.lastInput2 = BB.copyObj(this.lastInput);\n\n        if (this.redrawBounds && !this.isTesting) {\n            this.drawChangedCells();\n        }\n    }\n\n    goLine (x: number, y: number, p: number, isCoalesced: boolean): void {\n        if (!this.isDrawing) {\n            return;\n        }\n        this.continueLine(x, y, this.lastInput.pressure, isCoalesced);\n\n        this.lastInput2 = BB.copyObj(this.lastInput);\n        this.lastInput.x = x;\n        this.lastInput.y = y;\n        this.lastInput.pressure = p;\n\n        if (this.redrawBounds && !this.isTesting) {\n            this.drawChangedCells();\n        }\n    }\n\n    endLine (): void {\n        if (this.bezierLine) {\n            this.continueLine(null, null, this.lastInput.pressure, false);\n        }\n\n        this.isDrawing = false;\n        this.bezierLine = null;\n\n        if (this.redrawBounds) {\n            this.drawChangedCells();\n        }\n\n        if (this.historyEntry && this.history && this.cells.find(item => !!item)) {\n            this.historyEntry.actions.push({\n                action: \"drawCells\",\n                params: [this.cells],\n            });\n            this.history.push(this.historyEntry);\n            this.historyEntry = null;\n        }\n        this.cells = null;\n    }\n\n    /**\n     * draw cells onto context\n     * @param cells\n     */\n    drawCells (cells: (ImageData | null)[]): void {\n        const cellsW = this.getCellsWidth();\n        cells.forEach((imageData, index) => {\n            if (!imageData) {\n                return;\n            }\n            const cellOffsetX = (index % cellsW) * cellSize;\n            const cellOffsetY = Math.floor(index / cellsW) * cellSize;\n            this.context.putImageData(imageData, cellOffsetX, cellOffsetY);\n        });\n    }\n\n    drawLineSegment (x1: number, y1: number, x2: number, y2: number): void {\n        this.lastInput.x = x2;\n        this.lastInput.y = y2;\n\n        if (this.isDrawing || x1 === undefined) {\n            return;\n        }\n\n        const totalCells = Math.ceil(this.context.canvas.width / cellSize) * Math.ceil(this.context.canvas.height / cellSize);\n        this.cells = '0'.repeat(totalCells).split('').map(item => null);\n        this.redrawBounds = null;\n        this.drawBuffer = [];\n\n        this.copyFromCanvas(this.prepDot(x1, y1, Math.max(0.1, this.size)));\n        let average = this.getAverage(x1, y1, Math.max(0.1, this.size));\n\n        if (average.a === 0) {\n            this.blendCol = {\n                r: this.color.r,\n                g: this.color.g,\n                b: this.color.b,\n                a: 1 - this.blending,\n            };\n        } else {\n            this.blendCol = {\n                r: average.r,\n                g: average.g,\n                b: average.b,\n                a: average.a,\n            };\n        }\n\n        this.mixr = this.color.r * (1 - this.blendCol.a) + (this.blending * this.blendCol.r + this.color.r * (1 - this.blending)) * this.blendCol.a;\n        this.mixg = this.color.g * (1 - this.blendCol.a) + (this.blending * this.blendCol.g + this.color.g * (1 - this.blending)) * this.blendCol.a;\n        this.mixb = this.color.b * (1 - this.blendCol.a) + (this.blending * this.blendCol.b + this.color.b * (1 - this.blending)) * this.blendCol.a;\n\n\n        const p = 1;\n        const localOpacity = (this.settingOpacityPressure) ? (this.opacity * p * p) : this.opacity;\n        const localSize = (this.settingSizePressure) ? Math.max(0.1, p * this.size) : Math.max(0.1, this.size);\n\n\n        const mouseDist = Math.sqrt(Math.pow(x2 - x1, 2.0) + Math.pow(y2 - y1, 2.0));\n        const eX = (x2 - x1) / mouseDist;\n        const eY = (y2 - y1) / mouseDist;\n        const bdist = this.calcSpacing(localSize);\n        for (let loopDist = 0; loopDist <= mouseDist; loopDist += bdist) {\n            const bounds = this.prepDot(x1 + eX * loopDist, y1 + eY * loopDist, localSize);\n            if (bounds) {\n                this.copyFromCanvas(bounds);\n                this.drawBuffer.push({\n                    x: x1 + eX * loopDist,\n                    y: y1 + eY * loopDist,\n                    size: localSize,\n                    opacity: localOpacity,\n                    x1: bounds.x1,\n                    y1: bounds.y1,\n                    x2: bounds.x2,\n                    y2: bounds.y2,\n                    r: BB.mix(this.color.r, this.mixr, this.blending),\n                    g: BB.mix(this.color.g, this.mixg, this.blending),\n                    b: BB.mix(this.color.b, this.mixb, this.blending),\n                })\n            }\n        }\n        this.drawBuffer.forEach(item => {\n            this.drawDot(item);\n        });\n        this.drawBuffer = [];\n\n        if (this.history && this.cells.find(item => !!item)) {\n            this.drawCells(this.cells);\n            this.historyEntry = {\n                tool: [\"brush\", \"BlendBrush\"],\n                actions: [{\n                    action: \"drawCells\",\n                    params: [this.cells],\n                }],\n            };\n            this.history.push(this.historyEntry);\n            this.historyEntry = null;\n        }\n        this.cells = null;\n    }\n}\n","import {BB} from '../../bb/bb';\nimport {IHistoryEntry, KlHistoryInterface} from '../history/kl-history';\nimport {KL} from '../kl';\n\nconst sampleCanvas = BB.canvas(32, 32);\nconst sampleCtx = sampleCanvas.getContext('2d');\n\nexport function SketchyBrush() {\n    let context;\n    let settingColor;\n\n    let settingSize = 1, settingOpacity = 0.2;\n    let settingBlending = 0.5;\n    let settingScale = 1;\n\n    let lastX, lastY;\n    let isDrawing = false;\n    let lastInput = {x: 0, y: 0, pressure: 0};\n    let history: KlHistoryInterface = new KL.DecoyKlHistory();\n    let historyEntry: IHistoryEntry;\n    let sketchySeed = 0;\n    this.setHistory = function (l: KlHistoryInterface) {\n        history = l;\n    };\n    this.setSeed = function (s) {\n        sketchySeed = parseInt(s);\n    };\n    this.getSeed = function () {\n        return parseInt('' + sketchySeed);\n    };\n\n    function rand() {\n        sketchySeed++;\n        return Math.sin(6324634.2345 * Math.cos(sketchySeed * 5342.3423)) * 0.5 + 0.5;\n    }\n\n    let points = [];\n    let count = 0;\n    let mixmode = [\n        function (c1, c2) {\n            return c1;\n        },\n        function (c1, c2) {\n            let result = new BB.RGB(c1.r, c1.g, c1.b);\n            result.r *= c2.r / 255;\n            result.g *= c2.g / 255;\n            result.b *= c2.b / 255;\n            return result;\n        },\n        function (c1, c2) {\n            let result = new BB.RGB(c1.r, c1.g, c1.b);\n            result.r *= c2.r / 255;\n            result.g *= c2.g / 255;\n            result.b *= c2.b / 255;\n            return result;\n        }\n    ];\n\n    this.getSize = function () {\n        return settingSize / 2;\n    };\n    this.setColor = function (c) {\n        settingColor = c;\n    };\n    this.getOpacity = function () {\n        return settingOpacity;\n    };\n    this.setOpacity = function (o) {\n        settingOpacity = o;\n    };\n    this.getBlending = function () {\n        return settingBlending;\n    };\n    this.setBlending = function (b) {\n        settingBlending = b;\n    };\n    this.setSize = function (s) {\n        settingSize = s * 2;\n    };\n    this.getScale = function () {\n        return settingScale;\n    };\n    this.setScale = function (s) {\n        settingScale = s;\n    };\n    this.setContext = function (c) {\n        context = c;\n    };\n    this.startLine = function (x, y, pressure, shift) {\n        if (shift && lastInput.x) {\n            let lx = lastInput.x, ly = lastInput.y;\n            isDrawing = true;\n            //this.goLine(x,y,pressure);\n            this.endLine();\n        } else {\n            isDrawing = true;\n            lastX = x;\n            lastY = y;\n            lastInput.x = x;\n            lastInput.y = y;\n            historyEntry = {\n                tool: [\"brush\", \"SketchyBrush\"],\n                actions: []\n            };\n            historyEntry.actions.push({\n                action: \"setScale\",\n                params: [settingScale]\n            });\n            historyEntry.actions.push({\n                action: \"setSize\",\n                params: [settingSize / 2]\n            });\n            historyEntry.actions.push({\n                action: \"setOpacity\",\n                params: [settingOpacity]\n            });\n            historyEntry.actions.push({\n                action: \"setColor\",\n                params: [settingColor]\n            });\n            historyEntry.actions.push({\n                action: \"setBlending\",\n                params: [settingBlending]\n            });\n            historyEntry.actions.push({\n                action: \"startLine\",\n                params: [x, y, pressure]\n            });\n        }\n\n    };\n    this.goLine = function (p_x, p_y, pressure, preMixedColor) {\n        if (!isDrawing || (p_x === lastInput.x && p_y === lastInput.y)) {\n            return;\n        }\n\n        let e, b, a, g;\n        let x = parseInt(p_x);\n        let y = parseInt(p_y);\n        points.push([x, y]);\n\n        let mixr = settingColor.r;\n        let mixg = settingColor.g;\n        let mixb = settingColor.b;\n\n        if (preMixedColor !== null) {\n            mixr = preMixedColor.r;\n            mixg = preMixedColor.g;\n            mixb = preMixedColor.b;\n        } else {\n            if (settingBlending !== 0) {\n                if (x + 5 >= 0 && y + 5 >= 0 && x - 5 < context.canvas.width - 1 && y - 5 < context.canvas.height - 1) {\n                    mixr = 0;\n                    mixg = 0;\n                    mixb = 0;\n                    let mixx = Math.min(context.canvas.width - 1, Math.max(0, x - 5));\n                    let mixy = Math.min(context.canvas.height - 1, Math.max(0, y - 5));\n                    let mixw = Math.min(context.canvas.width - 1, Math.max(0, x + 5));\n                    let mixh = Math.min(context.canvas.height - 1, Math.max(0, y + 5));\n                    mixw -= mixx;\n                    mixh -= mixy;\n\n                    if (mixw > 0 && mixh > 0) {\n                        let imdat = context.getImageData(mixx, mixy, mixw, mixh);\n                        let countmix = 0;\n                        for (let i = 0; i < imdat.data.length; i += 4) {\n                            mixr += imdat.data[i + 0];\n                            mixg += imdat.data[i + 1];\n                            mixb += imdat.data[i + 2];\n                            countmix++;\n                        }\n                        mixr /= countmix;\n                        mixg /= countmix;\n                        mixb /= countmix;\n                    }\n\n                    let mixed = mixmode[0](new BB.RGB(mixr, mixg, mixb), settingColor);\n                    mixr = parseInt('' + BB.mix(settingColor.r, mixed.r, settingBlending));\n                    mixg = parseInt('' + BB.mix(settingColor.g, mixed.g, settingBlending));\n                    mixb = parseInt('' + BB.mix(settingColor.b, mixed.b, settingBlending));\n                }\n            }\n        }\n\n        context.save();\n        context.strokeStyle = \"rgba(\" + mixr + \", \" + mixg + \", \" + mixb + \", \" + settingOpacity + \")\";\n        context.lineWidth = settingSize;\n\n        context.beginPath();\n        context.moveTo(lastX, lastY);\n        context.lineTo(x, y);\n\n        for (e = 0; e < points.length; e++) {\n            b = points[e][0] - points[count][0];\n            a = points[e][1] - points[count][1];\n            g = b * b + a * a;\n            if (g < 4000 * settingScale * settingScale && rand() > g / 2000 / settingScale / settingScale) {\n                context.moveTo(points[count][0] + (b * 0.3), points[count][1] + (a * 0.3));\n                context.lineTo(points[e][0] - (b * 0.3), points[e][1] - (a * 0.3));\n            }\n        }\n\n        context.stroke();\n        context.restore();\n\n\n        count++;\n        lastX = x;\n        lastY = y;\n        lastInput.x = x;\n        lastInput.y = y;\n        historyEntry.actions.push({\n            action: \"goLine\",\n            params: [p_x, p_y, pressure, {r: mixr, g: mixg, b: mixb}]\n        });\n    };\n    this.endLine = function () {\n        isDrawing = false;\n        count = 0;\n        points = [];\n        if (historyEntry) {\n            historyEntry.actions.push({\n                action: \"endLine\",\n                params: []\n            });\n            history.push(historyEntry);\n            historyEntry = undefined;\n        }\n    };\n    //cheap n' ugly\n    this.drawLineSegment = function (x1, y1, x2, y2) {\n        lastInput.x = x2;\n        lastInput.y = y2;\n\n        if (isDrawing || x1 === undefined) {\n            return;\n        }\n\n\n        context.save();\n        context.lineWidth = settingSize;\n\n        let mixr = settingColor.r, mixg = settingColor.g, mixb = settingColor.b;\n        if (x1 + 5 >= 0 && y1 + 5 >= 0 && x1 - 5 < context.canvas.width - 1 && y1 - 5 < context.canvas.height - 1) {\n            mixr = 0;\n            mixg = 0;\n            mixb = 0;\n            let mixx = Math.min(context.canvas.width - 1, Math.max(0, x1 - 5));\n            let mixy = Math.min(context.canvas.height - 1, Math.max(0, y1 - 5));\n            let mixw = Math.min(context.canvas.width - 1, Math.max(0, x1 + 5));\n            let mixh = Math.min(context.canvas.height - 1, Math.max(0, y1 + 5));\n            mixw -= mixx;\n            mixh -= mixy;\n            if (mixw > 0 && mixh > 0) {\n                let w = Math.min(sampleCanvas.width, mixw);\n                let h = Math.min(sampleCanvas.height, mixh);\n                sampleCtx.save();\n                sampleCtx.globalCompositeOperation = 'copy';\n                sampleCtx.drawImage(context.canvas, mixx, mixy, mixw, mixh, 0, 0, w, h);\n                sampleCtx.restore();\n\n                let imdat = sampleCtx.getImageData(mixx, mixy, mixw, mixh);\n                let countmix = 0;\n                for (let i = 0; i < imdat.data.length; i += 4) {\n                    mixr += imdat.data[i + 0];\n                    mixg += imdat.data[i + 1];\n                    mixb += imdat.data[i + 2];\n                    countmix++;\n                }\n                mixr /= countmix;\n                mixg /= countmix;\n                mixb /= countmix;\n            }\n        }\n        let mixed = mixmode[0](new BB.RGB(mixr, mixg, mixb), settingColor);\n        mixr = parseInt('' + (settingBlending * mixed.r + settingColor.r * (1 - settingBlending)));\n        mixg = parseInt('' + (settingBlending * mixed.g + settingColor.g * (1 - settingBlending)));\n        mixb = parseInt('' + (settingBlending * mixed.b + settingColor.b * (1 - settingBlending)));\n        context.strokeStyle = \"rgba(\" + mixr + \", \" + mixg + \", \" + mixb + \", \" + settingOpacity + \")\";\n        context.beginPath();\n        context.moveTo(x1, y1);\n        context.lineTo(x2, y2);\n        context.stroke();\n        context.strokeStyle = \"rgba(\" + mixr + \", \" + mixg + \", \" + mixb + \", \" + settingOpacity + \")\";\n        context.restore();\n\n\n        let historyEntry = {\n            tool: [\"brush\", \"SketchyBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"setScale\",\n            params: [settingScale]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [settingSize / 2]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [settingOpacity]\n        });\n        historyEntry.actions.push({\n            action: \"setColor\",\n            params: [settingColor]\n        });\n        historyEntry.actions.push({\n            action: \"setBlending\",\n            params: [settingBlending]\n        });\n\n        historyEntry.actions.push({\n            action: \"drawLineSegment\",\n            params: [x1, y1, x2, y2]\n        });\n        history.push(historyEntry);\n    };\n\n    this.isDrawing = function () {\n        return isDrawing;\n    };\n}","import {BB} from '../../bb/bb';\nimport {IBounds, IPressureInput, IVector2D} from '../../bb/bb.types';\nimport {IHistoryEntry, KlHistoryInterface} from '../history/kl-history';\nimport {KL} from '../kl';\nimport {IRGB} from '../kl.types';\n\n// let statCount = 1;\n// let statAcc = 0;\n// stats on win10, chrome, size 100, opacity 80, smudge()\n// unoptimized: 1 ms\n// minimal: 0.09 ms\n// minimal + circle: 0.5ms\n// minimal + circle + ix, iy: 0.23ms\n// unoptimized + ix, iy: 0.64 ms\n// unoptimized + ix, iy + sans rounding: 0.61 ms\n// ix, iy + sans rounding + sans random: 0.32ms\n// ix, iy + sans rounding + fast random: 0.46 ms\n// ix, iy + sans rounding + fast random + offset const: 0.48 ms\n\nconst CELL_SIZE = 256;\n\ninterface ISmudgeParams {\n    aP: IVector2D;\n    bP: IVector2D;\n    size: {\n        w: number;\n        h: number;\n    };\n    brush: {\n        center: IVector2D,\n        size: number;\n        opacity: number;\n        alphaLock: boolean;\n    };\n}\n\n\n/**\n * determine bounds of smudge\n * @param imWidth\n * @param imHeight\n * @param aP\n * @param bP\n * @param size\n */\nfunction prepSmudge(\n    imWidth: number,\n    imHeight: number,\n    aP: IVector2D, // top left of source, integers\n    bP: IVector2D, // top left of dest, integers\n    size: {w: number; h: number}, // size of both rectangles, integers\n): {\n    aP: IVector2D,\n    bP: IVector2D,\n    size: {w: number; h: number},\n} {\n\n    if (aP.x === bP.x && aP.y === bP.y) {\n        return null;\n    }\n\n    aP = BB.copyObj(aP);\n    bP = BB.copyObj(bP);\n    size = BB.copyObj(size);\n\n    // corner behavior\n    // cut down rectangles, if a or b go outside\n    // i.e. if user drags partially or fully outside the canvas\n    {\n        let top = 0;\n        let right = 0;\n        let bottom = 0;\n        let left = 0;\n\n        if (aP.x < 0) {\n            left = -aP.x;\n        }\n        if (aP.y < 0) {\n            top = -aP.y;\n        }\n        if (bP.x < 0) {\n            left = Math.max(left, -bP.x);\n        }\n        if (bP.y < 0) {\n            top = Math.max(top, -bP.y);\n        }\n        if (aP.x + size.w > imWidth) {\n            right = aP.x + size.w - imWidth;\n        }\n        if (aP.y + size.h > imHeight) {\n            bottom = aP.y + size.h - imHeight;\n        }\n        if (bP.x + size.w > imWidth) {\n            right = Math.max(right, bP.x + size.w - imWidth);\n        }\n        if (bP.y + size.h > imHeight) {\n            bottom = Math.max(bottom, bP.y + size.h - imHeight);\n        }\n\n        aP.x += left;\n        bP.x += left;\n        aP.y += top;\n        bP.y += top;\n\n        size.w = size.w - left - right;\n        size.h = size.h - top - bottom;\n        if (size.w <= 0 || size.h <= 0) {\n            return null;\n        }\n    }\n\n    return {\n        aP: {\n            x: aP.x,\n            y: aP.y,\n        },\n        bP: {\n            x: bP.x,\n            y: bP.y,\n        },\n        size: {\n            w: size.w,\n            h: size.h,\n        }\n    };\n}\n\n// faster than using BB.clamp somehow (in chrome)\nfunction clamp(num, min, max) {\n    return num <= min\n        ? min\n        : num >= max\n            ? max\n            : num\n}\n\n/**\n * Pixel operations that do the smudging via ImageData\n * @param imageData\n * @param p\n */\nfunction smudge(imageData: ImageData, p : ISmudgeParams): void {\n\n    p = BB.copyObj(p);\n\n    const cSize = p.brush.size;\n    const cX = p.brush.center.x;\n    const cY = p.brush.center.y;\n\n    /*if (statCount % 1000 === 0) {\n        console.log(statAcc / 1000);\n        statAcc = 0;\n    }\n    let start = performance.now();*/\n\n\n    // determine offset\n    let aIndex = p.aP.y * imageData.width + p.aP.x;\n    let bIndex = p.bP.y * imageData.width + p.bP.x;\n    const offset = (bIndex - aIndex) * 4;\n\n    // array with random numbers. faster than Math.random()\n    let randI = 0;\n    const randLen = cSize > 30 ? 1024 : 512; // lower lengths lead to noticeable patterns\n    const randArr = [];\n    for (let i = 0; i < randLen; i++) {\n        randArr[i] = (Math.random() - 0.5) / 1.001 + 0.5;\n    }\n\n    const softnessPx = Math.max(3, Math.min(8, p.brush.size - 8));\n\n    const pixel = (ai, bi, ix, iy) => {\n\n        const dist = BB.dist(cX, cY, ix, iy);\n        const fac = 1 - p.brush.opacity * (1 - clamp((dist - (cSize - softnessPx)) / softnessPx, 0, 1));\n\n        if (fac === 1) {\n            return;\n        }\n\n        if (!imageData.data[ai + 3]) {\n\n        } else if (!imageData.data[bi + 3]) { // don't mix if target fully transparent. pixel might have a strange color.\n            imageData.data[bi] = imageData.data[ai + 0];\n            imageData.data[bi + 1] = imageData.data[ai + 1];\n            imageData.data[bi + 2] = imageData.data[ai + 2];\n        } else {\n\n            // consider alpha ratio. If a has lower alpha than b, then b should be stronger, and vice versa\n            // not totally accurate. TODO same compositing as blend brush\n            let fac2;\n            if (imageData.data[ai + 3] < imageData.data[bi + 3]) {\n                fac2 = 1 - imageData.data[ai + 3] / imageData.data[bi + 3] * (1 - fac);\n            } else {\n                fac2 = imageData.data[bi + 3] / imageData.data[ai + 3] * fac;\n            }\n\n            // ImageData's Uint8ClampedArray rounds -> 0.5 becomes 1. But not in Safari, so needs to be done manually\n            // Offset mixed color by random number noise (-0.5, 0.5), so it doesn't get stuck while mixing.\n            // No +0.5, because it cancels out with rand.\n            imageData.data[bi] = Math.floor(BB.mix(imageData.data[ai], imageData.data[bi + 0], fac2) + randArr[randI]);\n            imageData.data[bi + 1] = Math.floor(BB.mix(imageData.data[ai + 1], imageData.data[bi + 1], fac2) + randArr[randI]);\n            imageData.data[bi + 2] = Math.floor(BB.mix(imageData.data[ai + 2], imageData.data[bi + 2], fac2) + randArr[randI]);\n\n            randI = (randI + 1) % randLen;\n        }\n        // Always mix alpha. unless alpha lock\n        if (!p.brush.alphaLock) {\n            imageData.data[bi + 3] = Math.floor(BB.mix(imageData.data[ai + 3], imageData.data[bi + 3], fac) + 0.5);\n        }\n\n    };\n\n    const bx1 = p.bP.x * 4;\n    const bx2 = bx1 + (p.size.w - 1) * 4;\n\n    // transfer of pixels depends on direction of smudging if there is overlap\n    if (p.aP.y < p.bP.y) {\n        for (let y = p.size.h - 1, iy = p.bP.y + p.size.h - 1; y >= 0; y--, iy--) {\n            const yStart = (y + p.bP.y) * imageData.width * 4;\n            for (let x = bx2 + yStart, x2 = bx2 + yStart - offset, ix = p.bP.x + p.size.w - 1; x >= bx1 + yStart; x -= 4, x2 -= 4, ix--) {\n                pixel(x2, x, ix, iy);\n            }\n        }\n    } else if (p.aP.y > p.bP.y) {\n        for (let y = 0, iy = p.bP.y; y < p.size.h; y++, iy++) {\n            const yStart = (y + p.bP.y) * imageData.width * 4;\n            for (let x = bx2 + yStart, x2 = bx2 + yStart - offset, ix = p.bP.x + p.size.w - 1; x >= bx1 + yStart; x -= 4, x2 -= 4, ix--) {\n                pixel(x2, x, ix, iy);\n            }\n        }\n    } else {\n        if (p.aP.x < p.bP.x) {\n            for (let y = p.size.h - 1, iy = p.bP.y + p.size.h - 1; y >= 0; y--, iy--) {\n                const yStart = (y + p.bP.y) * imageData.width * 4;\n                for (let x = bx2 + yStart, x2 = bx2 + yStart - offset, ix = p.bP.x + p.size.w - 1; x >= bx1 + yStart; x -= 4, x2 -= 4, ix--) {\n                    pixel(x2, x, ix, iy);\n                }\n            }\n        } else {\n            for (let y = 0, iy = p.bP.y; y < p.size.h; y++, iy++) {\n                const yStart = (y + p.bP.y) * imageData.width * 4;\n                for (let x = bx1 + yStart, x2 = bx1 + yStart - offset, ix = p.bP.x; x < bx2 + yStart; x += 4, x2 += 4, ix++) {\n                    pixel(x2, x, ix, iy);\n                }\n            }\n        }\n    }\n\n    //statCount++;\n    //statAcc += performance.now() - start;\n}\n\nexport class SmudgeBrush {\n\n    private context: CanvasRenderingContext2D;\n    private history: KlHistoryInterface = new KL.DecoyKlHistory();\n    private historyEntry: IHistoryEntry;\n\n    private settingColor: IRGB = {r: 0, g: 0, b: 0};\n    private settingSize: number = 35;\n    private settingSpacing: number = 0.20446882736951905;\n    private settingOpacity: number = 0.8;\n    private settingColorStr: string;\n    private settingHasSizePressure: boolean = false;\n    private settingHasOpacityPressure: boolean = false;\n    private settingLockLayerAlpha: boolean = false;\n\n    private lineToolLastDot: number;\n    private lastInput: IPressureInput = {x: 0, y: 0, pressure: 0};\n    private lastInput2: IPressureInput = {x: 0, y: 0, pressure: 0};\n    private lastDot: IVector2D;\n\n    private isDrawing: boolean = false;\n\n    private bezierLine: any = null; // todo type BezierLine\n\n    private redrawBounds: IBounds;\n    private completeRedrawBounds: IBounds;\n\n    private copyImageData: ImageData;\n\n    private drawBuffer: ISmudgeParams[] = [];\n\n    private copiedCells: boolean[];\n\n    updateRedrawBounds(bounds: IBounds): void {\n        this.redrawBounds = BB.updateBounds(this.redrawBounds, bounds);\n    }\n\n    updateCompleteRedrawBounds (x1, y1, x2, y2): void {\n        this.completeRedrawBounds = BB.updateBounds(\n            this.completeRedrawBounds,\n            { x1, y1, x2, y2 }\n        );\n    }\n\n    /**\n     * update copyImageData. copy over new regions if needed\n     */\n    copyFromCanvas(): void {\n\n        const touchedCells = this.copiedCells.map(item => false);\n\n        const bounds: IBounds[] = [];\n        const cellsW = Math.ceil(this.copyImageData.width / CELL_SIZE);\n\n        if (!this.redrawBounds) {\n            return;\n        }\n        bounds.push({\n            x1: Math.floor(this.redrawBounds.x1 / CELL_SIZE),\n            y1: Math.floor(this.redrawBounds.y1 / CELL_SIZE),\n            x2: Math.floor(this.redrawBounds.x2 / CELL_SIZE),\n            y2: Math.floor(this.redrawBounds.y2 / CELL_SIZE),\n        });\n        bounds.forEach(item => {\n            for (let i = item.x1; i <= item.x2; i++) {\n                for (let e = item.y1; e <= item.y2; e++) {\n                    touchedCells[e * cellsW + i] = true;\n                }\n            }\n        });\n\n        touchedCells.forEach((item, i) => {\n            if (!item || this.copiedCells[i]) {\n                // not touched, or already copied\n                return;\n            }\n            this.copiedCells[i] = true;\n            const x = i % cellsW;\n            const y = Math.floor(i / cellsW);\n            const w = (Math.min(x * CELL_SIZE + CELL_SIZE, this.copyImageData.width) - 1) % CELL_SIZE + 1;\n            const h = (Math.min(y * CELL_SIZE + CELL_SIZE, this.copyImageData.height) - 1) % CELL_SIZE + 1;\n\n            // temp canvas to prevent main canvas from getting slowed down in chrome\n            const tmpCanvas = BB.canvas(w, h);\n            const tmpCtx = tmpCanvas.getContext('2d');\n            tmpCtx.drawImage(this.context.canvas, -x * CELL_SIZE, -y * CELL_SIZE);\n\n            const data = tmpCtx.getImageData(0, 0, w, h);\n\n            for (let i = 0; i < h; i++) {\n                for (let e = 0, e2 = i * w * 4, e3 = ((y * CELL_SIZE + i) * this.copyImageData.width + x * CELL_SIZE) * 4; e < w; e++, e2 += 4, e3 += 4) {\n                    this.copyImageData.data[e3] = data.data[e2];\n                    this.copyImageData.data[e3 + 1] = data.data[e2 + 1];\n                    this.copyImageData.data[e3 + 2] = data.data[e2 + 2];\n                    this.copyImageData.data[e3 + 3] = data.data[e2 + 3];\n                }\n            }\n        });\n    }\n\n\n    /**\n     * fill drawBuffer with params about to be drawn\n     * @param x\n     * @param y\n     * @param size\n     * @param opacity\n     */\n    prepDot (x: number, y: number, size: number, opacity: number): void {\n        if (!this.lastDot) {\n            this.lastDot = {\n                x: x,\n                y: y,\n            };\n            return;\n        }\n\n        size = Math.round(size);\n\n\n        const w = Math.round(size * 2);\n        const h = Math.round(size * 2);\n\n        const bounds = prepSmudge(\n            this.copyImageData.width,\n            this.copyImageData.height,\n            {\n                x: Math.round(this.lastDot.x - size),\n                y: Math.round(this.lastDot.y - size),\n            },\n            {\n                x: Math.round(x - size),\n                y: Math.round(y - size),\n            },\n            {\n                w,\n                h,\n            },\n        );\n\n        if (bounds) {\n            const params: ISmudgeParams = {\n                aP: bounds.aP,\n                bP: bounds.bP,\n                size: bounds.size,\n                brush: {\n                    center: { x, y },\n                    size,\n                    opacity,\n                    alphaLock: this.settingLockLayerAlpha,\n                }\n            };\n            this.updateRedrawBounds({\n                x1: params.bP.x,\n                y1: params.bP.y,\n                x2: params.bP.x + params.brush.size * 2,\n                y2: params.bP.y + params.brush.size * 2,\n            });\n            this.drawBuffer.push(params);\n        }\n\n        this.lastDot = {\n            x: x,\n            y: y,\n        };\n    }\n\n    continueLine (x: number, y: number, size: number, pressure: number): void {\n        this.drawBuffer = [];\n\n        if (this.bezierLine === null) {\n            this.bezierLine = new BB.BezierLine();\n            this.bezierLine.add(this.lastInput.x, this.lastInput.y, 0, function(){});\n        }\n\n        const drawArr = []; //draw instructions. will be all drawn at once\n\n        const dotCallback = (val): void => {\n            const localPressure = BB.mix(this.lastInput2.pressure, pressure, val.t);\n            const localOpacity = this.settingOpacity * (this.settingHasOpacityPressure ? (localPressure * localPressure) : 1);\n            const localSize = Math.max(0.1, this.settingSize * (this.settingHasSizePressure ? localPressure : 1));\n            drawArr.push([val.x, val.y, localSize, localOpacity, val.angle]);\n        };\n\n        const localSpacing = size * this.settingSpacing / 3;\n        if (x === null) {\n            this.bezierLine.addFinal(localSpacing, dotCallback);\n        } else {\n            this.bezierLine.add(x, y, localSpacing, dotCallback);\n        }\n\n        // execute draw instructions\n        let before;\n        for (let i = 0; i < drawArr.length; i++) {\n            const item = drawArr[i];\n            this.prepDot(item[0], item[1], item[2], item[3]);\n            before = item;\n        }\n\n        this.copyFromCanvas();\n\n        for (let i = 0; i < this.drawBuffer.length; i++) {\n            smudge(this.copyImageData, this.drawBuffer[i]);\n        }\n    }\n\n\n\n    // ---- public ----\n\n    constructor () { }\n\n    startLine (x: number, y: number, p: number): void {\n        this.historyEntry = {\n            tool: [\"brush\", \"SmudgeBrush\"],\n            actions: []\n        };\n\n        p = BB.clamp(p, 0, 1);\n        const localOpacity = this.settingHasOpacityPressure ? (this.settingOpacity * p * p) : this.settingOpacity;\n        const localSize = this.settingHasSizePressure ? Math.max(0.1, p * this.settingSize) : Math.max(0.1, this.settingSize);\n\n        this.lastDot = null;\n        this.isDrawing = true;\n\n        this.copyImageData = new ImageData(this.context.canvas.width, this.context.canvas.height);\n        const totalCells = Math.ceil(this.context.canvas.width / CELL_SIZE) * Math.ceil(this.context.canvas.height / CELL_SIZE);\n        this.copiedCells = '0'.repeat(totalCells).split('').map(item => false);\n\n        this.prepDot(x, y, localSize, localOpacity);\n\n        this.lineToolLastDot = localSize * this.settingSpacing;\n        this.lastInput.x = x;\n        this.lastInput.y = y;\n        this.lastInput.pressure = p;\n        this.lastInput2.pressure = p;\n\n        this.completeRedrawBounds = null;\n    }\n\n    goLine (x: number, y: number, p: number): void {\n        if (!this.isDrawing) {\n            return;\n        }\n\n        this.redrawBounds = null;\n        const pressure = BB.clamp(p, 0, 1);\n        const localSize = this.settingHasSizePressure ?\n            Math.max(0.1, this.lastInput.pressure * this.settingSize) : Math.max(0.1, this.settingSize);\n\n        this.continueLine(x, y, localSize, this.lastInput.pressure);\n\n\n        if (this.redrawBounds) {\n            this.context.putImageData(\n                this.copyImageData,\n                0,\n                0,\n                this.redrawBounds.x1,\n                this.redrawBounds.y1,\n                this.redrawBounds.x2 - this.redrawBounds.x1 - 1,\n                this.redrawBounds.y2 - this.redrawBounds.y1 - 1\n            );\n            this.updateCompleteRedrawBounds(\n                this.redrawBounds.x1,\n                this.redrawBounds.y1,\n                this.redrawBounds.x2,\n                this.redrawBounds.y2\n            );\n        }\n\n        this.lastInput.x = x;\n        this.lastInput.y = y;\n        this.lastInput2.pressure = this.lastInput.pressure;\n        this.lastInput.pressure = pressure;\n    }\n\n    endLine (): void {\n        this.redrawBounds = null;\n        const localSize = this.settingHasSizePressure ?\n            Math.max(0.1, this.lastInput.pressure * this.settingSize) : Math.max(0.1, this.settingSize);\n        this.context.save();\n        this.continueLine(null, null, localSize, this.lastInput.pressure);\n        this.context.restore();\n\n        this.isDrawing = false;\n        this.bezierLine = null;\n\n        if (this.redrawBounds) {\n            this.context.putImageData(\n                this.copyImageData,\n                0,\n                0,\n                this.redrawBounds.x1,\n                this.redrawBounds.y1,\n                this.redrawBounds.x2 - this.redrawBounds.x1 - 1,\n                this.redrawBounds.y2 - this.redrawBounds.y1 - 1\n            );\n            this.updateCompleteRedrawBounds(\n                this.redrawBounds.x1,\n                this.redrawBounds.y1,\n                this.redrawBounds.x2,\n                this.redrawBounds.y2\n            );\n        }\n\n        if (this.historyEntry && this.completeRedrawBounds) {\n            let historyIm: ImageData | HTMLCanvasElement = this.copyImageData;\n            if (!(\n                this.completeRedrawBounds.x1 === 0 &&\n                this.completeRedrawBounds.y1 === 0 &&\n                this.completeRedrawBounds.x2 >= this.context.canvas.width - 1 &&\n                this.completeRedrawBounds.y2 >= this.context.canvas.height - 1\n            )) {\n\n                // temp canvas to prevent main canvas from getting slowed down in chrome\n                const tmpCanvas = BB.canvas(\n                    this.completeRedrawBounds.x2 - this.completeRedrawBounds.x1 + 1,\n                    this.completeRedrawBounds.y2 - this.completeRedrawBounds.y1 + 1\n                );\n                const tmpCtx = tmpCanvas.getContext('2d');\n                tmpCtx.drawImage(this.context.canvas, -this.completeRedrawBounds.x1, -this.completeRedrawBounds.y1);\n\n                historyIm = tmpCanvas; // faster than getting image data (measured on 2018 lenovo chromebook)\n            }\n            this.historyEntry.actions.push({\n                action: \"drawImage\",\n                params: [\n                    historyIm,\n                    this.completeRedrawBounds.x1,\n                    this.completeRedrawBounds.y1,\n                ],\n            });\n            this.history.push(this.historyEntry);\n            this.historyEntry = undefined;\n        }\n        this.copyImageData = null;\n    }\n\n    drawImage (im: ImageData | HTMLCanvasElement, x: number, y: number): void {\n        if (im instanceof ImageData) {\n            this.context.putImageData(im, x, y);\n        } else {\n            this.context.clearRect(x, y, im.width, im.height);\n            this.context.drawImage(im, x, y);\n        }\n    }\n\n    drawLineSegment (x1: number, y1: number, x2: number, y2: number): void {\n        return;\n        /*\n        // todo\n        lastInput.x = x2;\n        lastInput.y = y2;\n        lastInput.pressure = 1;\n\n        if (isDrawing || x1 === undefined) {\n            return;\n        }\n\n        let angle = BB.pointsToAngleDeg({x:x1, y:y1}, {x:x2, y:y2});\n        let mouseDist = Math.sqrt(Math.pow(x2 - x1, 2.0) + Math.pow(y2 - y1, 2.0));\n        let eX = (x2 - x1) / mouseDist;\n        let eY = (y2 - y1) / mouseDist;\n        let loopDist;\n        let bdist = settingSize * settingSpacing;\n        lineToolLastDot = settingSize * settingSpacing;\n        for (loopDist = lineToolLastDot; loopDist <= mouseDist; loopDist += bdist) {\n            drawDot(x1 + eX * loopDist, y1 + eY * loopDist, settingSize, settingOpacity);\n        }\n\n\n        let historyEntry = {\n            tool: [\"brush\", \"SmudgeBrush\"],\n            actions: []\n        };\n        // todo\n        history.add(historyEntry);*/\n    }\n\n    getIsDrawing (): boolean {\n        return this.isDrawing;\n    }\n\n    setColor (c: IRGB): void {\n        if (this.settingColor.r === c.r && this.settingColor.g === c.g && this.settingColor.b === c.b) {\n            return;\n        }\n        this.settingColor = {r: c.r, g: c.g, b: c.b};\n        this.settingColorStr = BB.ColorConverter.toRgbStr(this.settingColor);\n    }\n\n    setContext (c: CanvasRenderingContext2D): void {\n        this.context = c;\n    }\n\n    setHistory (h: KlHistoryInterface): void {\n        this.history = h;\n    }\n\n    setSize (s: number): void {\n        this.settingSize = s;\n    }\n\n    setOpacity (o: number): void {\n        this.settingOpacity = o;\n    }\n\n    setSpacing (s: number): void {\n        this.settingSpacing = s;\n    }\n\n    sizePressure (b: boolean): void {\n        this.settingHasSizePressure = !!b;\n    }\n\n    opacityPressure (b: boolean): void {\n        this.settingHasOpacityPressure = !!b;\n    }\n\n    setLockAlpha (b: boolean): void {\n        this.settingLockLayerAlpha = !!b;\n    }\n\n    getSpacing (): number {\n        return this.settingSpacing;\n    }\n\n    getSize (): number {\n        return this.settingSize;\n    }\n\n    getOpacity (): number {\n        return this.settingOpacity;\n    }\n\n    getLockAlpha (): boolean {\n        return this.settingLockLayerAlpha;\n    }\n\n}\n","import {BB} from '../../bb/bb';\nimport {IRGB} from '../kl.types';\nimport {IBounds} from '../../bb/bb.types';\nimport {KlHistoryInterface} from '../history/kl-history';\n\ntype TChemyMode = 'fill' | 'stroke';\n\nexport class ChemyBrush {\n\n    private context: CanvasRenderingContext2D;\n    private settingColor: IRGB;\n    private settingSize: number = 0.25; // radius - 0.5 - 99999\n    private settingOpacity: number = 1; // 0-1\n    private settingLockLayerAlpha: boolean = false;\n    private settingIsEraser: boolean = false;\n    private settingMode: TChemyMode = 'fill';\n    private settingDistort: number = 0; // 0 - 1\n    private settingXSymmetry: boolean = false;\n    private settingYSymmetry: boolean = false;\n    private settingGradient: boolean = false;\n\n    private isDrawing: boolean = false;\n\n    private history: KlHistoryInterface;\n\n    private copyCanvas: HTMLCanvasElement;\n    private path: {x: number, y: number}[];\n    private minY: number;\n    private maxY: number;\n    private completeRedrawBounds: IBounds;\n\n    updateCompleteRedrawBounds (x, y): void {\n        let bounds = { x1: x, y1: y, x2: x, y2: y};\n        if (this.settingXSymmetry) {\n            bounds = BB.updateBounds(\n                bounds,\n                {\n                    x1: -x + this.copyCanvas.width,\n                    y1: y,\n                    x2: -x + this.copyCanvas.width,\n                    y2: y,\n                }\n                );\n        }\n        if (this.settingYSymmetry) {\n            bounds = BB.updateBounds(\n                bounds,\n                {\n                    x1: x,\n                    y1: -y + this.copyCanvas.height,\n                    x2: x,\n                    y2: -y + this.copyCanvas.height,\n                }\n            );\n        }\n        const buffer = this.settingMode === 'stroke' ? this.settingSize + 1 : 1;\n        bounds.x1 = Math.floor(bounds.x1 - buffer);\n        bounds.y1 = Math.floor(bounds.y1 - buffer);\n        bounds.x2 = Math.ceil(bounds.x2 + buffer);\n        bounds.y2 = Math.ceil(bounds.y2 + buffer);\n\n        this.completeRedrawBounds = BB.updateBounds(this.completeRedrawBounds, bounds);\n    }\n\n    private drawShape (): void {\n        this.context.save();\n        this.context.clearRect(0, 0, this.context.canvas.width, this.context.canvas.height);\n        this.context.drawImage(this.copyCanvas, 0, 0);\n\n        let color = {...this.settingColor};\n        if (this.settingIsEraser) {\n            color.r = 255;\n            color.g = 255;\n            color.b = 255;\n            if (this.settingLockLayerAlpha) {\n                this.context.globalCompositeOperation = \"source-atop\";\n            } else {\n                this.context.globalCompositeOperation = \"destination-out\";\n            }\n        } else {\n            if (this.settingLockLayerAlpha) {\n                this.context.globalCompositeOperation = \"source-atop\";\n            }\n        }\n\n        if (this.path) {\n\n            // path\n            const path = new Path2D();\n            this.path.forEach((item, index) => {\n                if (index === 0) {\n                    path.moveTo(item.x, item.y);\n                } else {\n                    path.lineTo(item.x, item.y);\n                }\n            });\n\n            let style: string | CanvasGradient = BB.ColorConverter.toRgbaStr({\n                r: color.r,\n                g: color.g,\n                b: color.b,\n                a: this.settingOpacity,\n            });\n            if (this.settingGradient) {\n                const startAtTop = this.path[0].x > this.path[this.path.length - 1].x;\n                const gradient = this.context.createLinearGradient(\n                    0, startAtTop ? this.minY : this.maxY,\n                    0, startAtTop ? this.maxY : this.minY,\n                );\n                gradient.addColorStop(\n                    0,\n                    BB.ColorConverter.toRgbaStr({\n                        r: color.r,\n                        g: color.g,\n                        b: color.b,\n                        a: this.settingOpacity,\n                    })\n                );\n                gradient.addColorStop(\n                    1,\n                    BB.ColorConverter.toRgbaStr({\n                        r: color.r,\n                        g: color.g,\n                        b: color.b,\n                        a: 0,\n                    })\n                );\n                style = gradient;\n            }\n\n            // setup params\n            if (this.settingMode === 'fill') {\n                this.context.fillStyle = style;\n\n            } else {\n                this.context.lineWidth = this.settingSize * 2;\n                this.context.lineJoin = 'bevel';\n                this.context.strokeStyle = style;\n            }\n\n            // draw\n            const draw = () => {\n                if (this.settingMode === 'fill') {\n                    this.context.fill(path);\n                } else {\n                    this.context.stroke(path);\n                }\n            };\n\n            draw();\n            if (this.settingXSymmetry) {\n                this.context.save();\n                this.context.translate(this.context.canvas.width / 2, 0);\n                this.context.scale(-1, 1);\n                this.context.translate(-this.context.canvas.width / 2, 0);\n                draw();\n                this.context.restore();\n            }\n            if (this.settingYSymmetry) {\n                this.context.save();\n                this.context.translate(0, this.context.canvas.height / 2);\n                this.context.scale(1, -1);\n                this.context.translate(0, -this.context.canvas.height / 2);\n                draw();\n                this.context.restore();\n                if (this.settingXSymmetry) {\n                    this.context.save();\n                    this.context.translate(this.context.canvas.width / 2, this.context.canvas.height / 2);\n                    this.context.scale(-1, -1);\n                    this.context.translate(-this.context.canvas.width / 2, -this.context.canvas.height / 2);\n                    draw();\n                    this.context.restore();\n                }\n            }\n        }\n\n        this.context.restore();\n    }\n\n    // --- public ----\n    constructor () {\n    }\n\n    setHistory (h: KlHistoryInterface): void {\n        this.history = h;\n    }\n\n    getSize (): number {\n        return this.settingMode === 'stroke' ? this.settingSize : 0;\n    }\n\n    setSize (s: number): void {\n        this.settingSize = s;\n    }\n\n    getOpacity (): number {\n        return this.settingOpacity;\n    }\n\n    setOpacity (o: number): void {\n        this.settingOpacity = o;\n    }\n\n    setColor (c: IRGB): void {\n        this.settingColor = BB.copyObj(c);\n    }\n\n    setContext (c: CanvasRenderingContext2D) {\n        this.context = c;\n    }\n\n    setMode (mode: TChemyMode): void {\n        this.settingMode = mode;\n    }\n\n    getMode (): TChemyMode {\n        return this.settingMode;\n    }\n\n    setDistort (distort: number): void {\n        this.settingDistort = BB.clamp(distort, 0, 1);\n    }\n\n    getDistort (): number {\n        return this.settingDistort;\n    }\n\n    setXSymmetry (b: boolean): void {\n        this.settingXSymmetry = !!b;\n    }\n\n    getXSymmetry (): boolean {\n        return this.settingXSymmetry;\n    }\n\n    setYSymmetry (b: boolean): void {\n        this.settingYSymmetry = !!b;\n    }\n\n    getYSymmetry (): boolean {\n        return this.settingYSymmetry;\n    }\n\n    setGradient (b: boolean): void {\n        this.settingGradient = !!b;\n    }\n\n    getGradient (): boolean {\n        return this.settingGradient;\n    }\n\n    getLockAlpha (): boolean {\n        return this.settingLockLayerAlpha;\n    }\n\n    setLockAlpha (b: boolean): void {\n        this.settingLockLayerAlpha = !!b;\n    }\n\n    getIsEraser (): boolean {\n        return this.settingIsEraser;\n    }\n\n    setIsEraser (b: boolean): void {\n        this.settingIsEraser = !!b;\n    }\n\n    getIsDrawing (): boolean {\n        return this.isDrawing;\n    }\n\n    startLine (x: number, y: number): void {\n        this.isDrawing = true;\n        this.path = [{x, y}];\n        this.minY = y;\n        this.maxY = y;\n        this.copyCanvas = BB.canvas(this.context.canvas.width, this.context.canvas.height);\n        this.copyCanvas.getContext('2d').drawImage(this.context.canvas, 0, 0);\n        this.completeRedrawBounds = null;\n        this.updateCompleteRedrawBounds(x, y);\n    }\n\n    goLine (x: number, y: number): void {\n        if (!this.isDrawing) {\n            return;\n        }\n\n        let pos = { x, y };\n        if (this.settingDistort > 0) {\n            pos.x += (Math.random() - 0.5) * this.settingDistort * 80;\n            pos.y += (Math.random() - 0.5) * this.settingDistort * 80;\n        }\n\n        this.minY = Math.min(this.minY, pos.y);\n        this.maxY = Math.max(this.maxY, pos.y);\n        this.path.push(pos);\n        this.updateCompleteRedrawBounds(x, y);\n        this.drawShape();\n    }\n\n    endLine (): void {\n        this.isDrawing = false;\n        this.completeRedrawBounds = BB.boundsInArea(this.completeRedrawBounds, this.copyCanvas.width, this.copyCanvas.height);\n        if (this.path.length > 1 && this.completeRedrawBounds) {\n            const historyCanvas = BB.canvas(\n                this.completeRedrawBounds.x2 - this.completeRedrawBounds.x1 + 1,\n                this.completeRedrawBounds.y2 - this.completeRedrawBounds.y1 + 1\n            );\n            const historyCtx = historyCanvas.getContext('2d');\n            historyCtx.drawImage(this.context.canvas, -this.completeRedrawBounds.x1, -this.completeRedrawBounds.y1);\n\n            this.history.push({\n                tool: [\"brush\", \"ChemyBrush\"],\n                actions: [\n                    {\n                        action: \"drawImage\",\n                        params: [\n                            historyCanvas, // faster than getting image data (measured on 2018 lenovo chromebook)\n                            this.completeRedrawBounds.x1,\n                            this.completeRedrawBounds.y1,\n                        ],\n                    }\n                ]\n            });\n        }\n        this.path = null;\n        this.copyCanvas = null;\n    }\n\n    drawImage (im: HTMLCanvasElement, x: number, y: number): void {\n        this.context.save();\n        this.context.clearRect(x, y, im.width, im.height);\n        this.context.drawImage(im, x, y);\n        this.context.restore();\n    }\n\n    drawLineSegment (x1, y1, x2, y2): void {\n        // might make sense for stroke\n    }\n}\n","import {PenBrush} from './pen-brush';\nimport {BlendBrush} from './blend-brush';\nimport {SketchyBrush} from './sketchy-brush';\nimport {PixelBrush} from './pixel-brush';\nimport {EraserBrush} from './eraser-brush';\nimport {SmudgeBrush} from './smudge-brush';\nimport {ChemyBrush} from './chemy-brush';\n\nexport const brushes = {\n    PenBrush,\n    BlendBrush,\n    SketchyBrush,\n    PixelBrush,\n    ChemyBrush,\n    SmudgeBrush,\n    EraserBrush,\n}","import {BB} from '../../bb/bb';\nimport {alphaImArr} from './brushes-common';\nimport {IHistoryEntry, KlHistoryInterface} from '../history/kl-history';\nimport {KL} from '../kl';\n\n\nexport function PenBrush() {\n\n    let context;\n    let history: KlHistoryInterface = new KL.DecoyKlHistory();\n    let historyEntry: IHistoryEntry;\n\n    let settingColor, settingSize = 2, settingSpacing = 0.8489, settingOpacity = 1;\n    let settingColorStr;\n    let settingHasSizePressure = true, settingHasOpacityPressure = false;\n    let settingLockLayerAlpha = false;\n    let ALPHA_CIRCLE = 0, ALPHA_CHALK = 1, ALPHA_CAL = 2, ALPHA_SQUARE = 3;\n    let settingAlphaId = ALPHA_CIRCLE;\n\n    let lineToolLastDot;\n    let lastInput = {x: 0, y: 0, pressure: 0};\n    let lastInput2 = {x: 0, y: 0, pressure: 0};\n\n    let isDrawing = false;\n    let alphaOpacityArr = [1, 0.9, 1, 1];\n\n    //mipmapping\n    let alphaCanvas128 = document.createElement(\"canvas\");\n    alphaCanvas128.width = 128;\n    alphaCanvas128.height = 128;\n    let alphaCanvas64 = document.createElement(\"canvas\");\n    alphaCanvas64.width = 64;\n    alphaCanvas64.height = 64;\n    let alphaCanvas32 = document.createElement(\"canvas\");\n    alphaCanvas32.width = 32;\n    alphaCanvas32.height = 32;\n\n    let bezierLine = null;\n\n    let twoPI = Math.PI * 2;\n\n    function updateAlphaCanvas() {\n        if (settingAlphaId === ALPHA_CIRCLE || settingAlphaId === ALPHA_SQUARE) {\n            return;\n        }\n\n        let instructionArr = [\n            [alphaCanvas128, 128],\n            [alphaCanvas64, 64],\n            [alphaCanvas32, 32]\n        ];\n\n        let ctx;\n\n        for (let i = 0; i < instructionArr.length; i++) {\n            ctx = (instructionArr[i][0] as any).getContext(\"2d\");\n\n            ctx.save();\n            ctx.clearRect(0, 0, instructionArr[i][1], instructionArr[i][1]);\n\n            ctx.fillStyle = \"rgba(\" + settingColor.r + \", \" + settingColor.g + \", \" + settingColor.b + \", \" + alphaOpacityArr[settingAlphaId] + \")\";\n            ctx.fillRect(0, 0, instructionArr[i][1], instructionArr[i][1]);\n\n            ctx.globalCompositeOperation = \"destination-in\";\n            ctx.imageSmoothingQuality = 'high';\n            ctx.drawImage(alphaImArr[settingAlphaId], 0, 0, instructionArr[i][1], instructionArr[i][1]);\n\n            ctx.restore();\n        }\n    }\n\n    /**\n     *\n     *\n     * @param x\n     * @param y\n     * @param size\n     * @param opacity\n     * @param angle\n     * @param before - [x, y, size, opacity, angle] the drawDot call before\n     */\n    function drawDot(x, y, size, opacity, angle?, before?) {\n        if (size <= 0) {\n            return;\n        }\n\n        if (settingLockLayerAlpha) {\n            context.globalCompositeOperation = \"source-atop\";\n        }\n\n        if (!before || before[3] !== opacity) {\n            context.globalAlpha = opacity;\n        }\n\n        if (!before && (settingAlphaId === ALPHA_CIRCLE || settingAlphaId === ALPHA_SQUARE)) {\n            context.fillStyle = settingColorStr;\n        }\n\n        if (settingAlphaId === ALPHA_CIRCLE) {\n            context.beginPath();\n            context.arc(x, y, size, 0, twoPI);\n            context.closePath();\n            context.fill();\n\n        } else if (settingAlphaId === ALPHA_SQUARE) {\n            if (angle !== undefined) {\n                context.save();\n                context.translate(x, y);\n                context.rotate(angle / 180 * Math.PI);\n                context.fillRect(-size, -size, size * 2, size * 2);\n                context.restore();\n            }\n\n        } else { // other brush alphas\n            context.save();\n            context.translate(x, y);\n            let targetMipmap = alphaCanvas128;\n            if (size <= 32 && size > 16) {\n                targetMipmap = alphaCanvas64;\n            } else if (size <= 16) {\n                targetMipmap = alphaCanvas32;\n            }\n            context.scale(size, size);\n            if (settingAlphaId === ALPHA_CHALK) {\n                context.rotate(((x + y) * 53123) % twoPI); // without mod it sometimes looks different\n            }\n            context.drawImage(targetMipmap, -1, -1, 2, 2);\n\n            context.restore();\n        }\n    }\n\n    function continueLine(x, y, size, pressure) {\n        if (bezierLine === null) {\n            bezierLine = new BB.BezierLine();\n            bezierLine.add(lastInput.x, lastInput.y, 0, function(){});\n        }\n\n        let drawArr = []; //draw instructions. will be all drawn at once\n\n        function dotCallback(val) {\n            let localPressure = BB.mix(lastInput2.pressure, pressure, val.t);\n            let localOpacity = settingOpacity * (settingHasOpacityPressure ? (localPressure * localPressure) : 1);\n            let localSize = Math.max(0.1, settingSize * (settingHasSizePressure ? localPressure : 1));\n            drawArr.push([val.x, val.y, localSize, localOpacity, val.angle]);\n        }\n\n        let localSpacing = size * settingSpacing;\n        if (x === null) {\n            bezierLine.addFinal(localSpacing, dotCallback);\n        } else {\n            bezierLine.add(x, y, localSpacing, dotCallback);\n        }\n\n        // execute draw instructions\n        context.save();\n        let before;\n        for (let i = 0; i < drawArr.length; i++) {\n            let item = drawArr[i];\n            drawDot(item[0], item[1], item[2], item[3], item[4], before);\n            before = item;\n        }\n        context.restore();\n    }\n\n    //------------------ interface ---------------------------------------------------\n\n\n    this.startLine = function (x, y, p) {\n        historyEntry = {\n            tool: [\"brush\", \"PenBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"opacityPressure\",\n            params: [settingHasOpacityPressure]\n        });\n        historyEntry.actions.push({\n            action: \"sizePressure\",\n            params: [settingHasSizePressure]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [settingSize]\n        });\n        historyEntry.actions.push({\n            action: \"setSpacing\",\n            params: [settingSpacing]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [settingOpacity]\n        });\n        historyEntry.actions.push({\n            action: \"setColor\",\n            params: [settingColor]\n        });\n        historyEntry.actions.push({\n            action: \"setAlpha\",\n            params: [settingAlphaId]\n        });\n        historyEntry.actions.push({\n            action: \"setLockAlpha\",\n            params: [settingLockLayerAlpha]\n        });\n\n        p = BB.clamp(p, 0, 1);\n        let localOpacity = settingHasOpacityPressure ? (settingOpacity * p * p) : settingOpacity;\n        let localSize = settingHasSizePressure ? Math.max(0.1, p * settingSize) : Math.max(0.1, settingSize);\n\n        isDrawing = true;\n        context.save();\n        drawDot(x, y, localSize, localOpacity);\n        context.restore();\n\n        lineToolLastDot = localSize * settingSpacing;\n        lastInput.x = x;\n        lastInput.y = y;\n        lastInput.pressure = p;\n        lastInput2.pressure = p;\n\n        historyEntry.actions.push({\n            action: \"startLine\",\n            params: [x, y, p]\n        });\n    };\n\n    this.goLine = function (x, y, p) {\n        if (!isDrawing) {\n            return;\n        }\n        historyEntry.actions.push({\n            action: \"goLine\",\n            params: [x, y, p]\n        });\n\n        let pressure = BB.clamp(p, 0, 1);\n        let localSize = settingHasSizePressure ? Math.max(0.1, lastInput.pressure * settingSize) : Math.max(0.1, settingSize);\n\n        context.save();\n        continueLine(x, y, localSize, lastInput.pressure);\n\n        /*context.fillStyle = 'red';\n        context.fillRect(Math.floor(x), Math.floor(y - 10), 1, 20);\n        context.fillRect(Math.floor(x - 10), Math.floor(y), 20, 1);*/\n\n        context.restore();\n\n        lastInput.x = x;\n        lastInput.y = y;\n        lastInput2.pressure = lastInput.pressure;\n        lastInput.pressure = pressure;\n    };\n\n    this.endLine = function (x, y) {\n\n        let localSize = settingHasSizePressure ? Math.max(0.1, lastInput.pressure * settingSize) : Math.max(0.1, settingSize);\n        context.save();\n        continueLine(null, null, localSize, lastInput.pressure);\n        context.restore();\n\n        isDrawing = false;\n\n        bezierLine = null;\n\n        if (historyEntry) {\n            historyEntry.actions.push({\n                action: \"endLine\",\n                params: [x, y]\n            });\n            history.push(historyEntry);\n            historyEntry = undefined;\n        }\n    };\n    //cheap n' ugly\n    this.drawLineSegment = function (x1, y1, x2, y2) {\n        lastInput.x = x2;\n        lastInput.y = y2;\n        lastInput.pressure = 1;\n\n        if (isDrawing || x1 === undefined) {\n            return;\n        }\n\n        let angle = BB.pointsToAngleDeg({x:x1, y:y1}, {x:x2, y:y2});\n        let mouseDist = Math.sqrt(Math.pow(x2 - x1, 2.0) + Math.pow(y2 - y1, 2.0));\n        let eX = (x2 - x1) / mouseDist;\n        let eY = (y2 - y1) / mouseDist;\n        let loopDist;\n        let bdist = settingSize * settingSpacing;\n        lineToolLastDot = settingSize * settingSpacing;\n        for (loopDist = lineToolLastDot; loopDist <= mouseDist; loopDist += bdist) {\n            drawDot(x1 + eX * loopDist, y1 + eY * loopDist, settingSize, settingOpacity, angle);\n        }\n\n\n        let historyEntry = {\n            tool: [\"brush\", \"PenBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"opacityPressure\",\n            params: [settingHasOpacityPressure]\n        });\n        historyEntry.actions.push({\n            action: \"sizePressure\",\n            params: [settingHasSizePressure]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [settingSize]\n        });\n        historyEntry.actions.push({\n            action: \"setSpacing\",\n            params: [settingSpacing]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [settingOpacity]\n        });\n        historyEntry.actions.push({\n            action: \"setColor\",\n            params: [settingColor]\n        });\n        historyEntry.actions.push({\n            action: \"setAlpha\",\n            params: [settingAlphaId]\n        });\n        historyEntry.actions.push({\n            action: \"setLockAlpha\",\n            params: [settingLockLayerAlpha]\n        });\n\n        historyEntry.actions.push({\n            action: \"drawLineSegment\",\n            params: [x1, y1, x2, y2]\n        });\n        history.push(historyEntry);\n    };\n\n    //IS\n    this.isDrawing = function () {\n        return isDrawing;\n    };\n    //SET\n    this.setAlpha = function (a) {\n        if (settingAlphaId === a) {\n            return;\n        }\n        settingAlphaId = a;\n        updateAlphaCanvas();\n    };\n    this.setColor = function (c) {\n        if (settingColor === c) {\n            return;\n        }\n        settingColor = {r: c.r, g: c.g, b: c.b};\n        settingColorStr = \"rgb(\" + settingColor.r + \",\" + settingColor.g + \",\" + settingColor.b + \")\";\n        updateAlphaCanvas();\n    };\n    this.setContext = function (c) {\n        context = c;\n    };\n    this.setHistory = function (l: KlHistoryInterface) {\n        history = l;\n    };\n    this.setSize = function (s) {\n        settingSize = s;\n    };\n    this.setOpacity = function (o) {\n        settingOpacity = o;\n    };\n    this.setSpacing = function (s) {\n        settingSpacing = s;\n    };\n    this.sizePressure = function (b) {\n        settingHasSizePressure = b;\n    };\n    this.opacityPressure = function (b) {\n        settingHasOpacityPressure = b;\n    };\n    this.setLockAlpha = function (b) {\n        settingLockLayerAlpha = b;\n    };\n    //GET\n    this.getSpacing = function () {\n        return settingSpacing;\n    };\n    this.getSize = function () {\n        return settingSize;\n    };\n    this.getOpacity = function () {\n        return settingOpacity;\n    };\n    this.getLockAlpha = function (b) {\n        return settingLockLayerAlpha;\n    };\n}","import {BB} from '../../bb/bb';\nimport {IHistoryEntry, KlHistoryInterface} from '../history/kl-history';\nimport {KL} from '../kl';\n\nexport function PixelBrush() {\n\n    let context;\n    let history: KlHistoryInterface = new KL.DecoyKlHistory();\n    let historyEntry: IHistoryEntry;\n\n    let settingColor, settingSize = 0.5, settingSpacing = 0.9, settingOpacity = 1;\n    let settingColorStr;\n    let settingHasSizePressure = true, settingHasOpacityPressure = false;\n    let settingLockLayerAlpha = false;\n    let settingIsEraser = false;\n    let settingUseDither = true;\n\n    let lineToolLastDot;\n    let lastInput = {x: 0, y: 0, pressure: 0};\n    let lastInput2 = {x: 0, y: 0, pressure: 0};\n\n    let isDrawing = false;\n    let bezierLine = null;\n    let twoPI = Math.PI * 2;\n\n\n    let ditherCanvas = BB.canvas(4, 4);\n    let ditherCtx = ditherCanvas.getContext('2d');\n    let ditherPattern;\n    let ditherArr = [\n        [3, 2],\n        [1, 0],\n        [3, 0],\n        [1, 2],\n        [2, 1],\n        [0, 3],\n        [0, 1],\n        [2, 3],\n\n        [2, 0],\n        [0, 2],\n        [0, 0],\n        [2, 2],\n        [1, 1],\n        [3, 3],\n        [3, 1],\n        [1, 3]\n    ];\n\n    function updateDither() {\n        ditherCtx.clearRect(0, 0, 4, 4);\n        ditherCtx.fillStyle = settingIsEraser ? '#fff' : settingColorStr;\n        for (let i = 0; i < Math.max(1, Math.round(settingOpacity * ditherArr.length)); i++) {\n            ditherCtx.fillRect(ditherArr[i][0], ditherArr[i][1], 1, 1);\n        }\n        ditherPattern = context.createPattern(ditherCanvas, 'repeat');\n    }\n\n\n    /**\n     * Tests p1->p2 or p3->p4 deviate in their direction more than max, compared to p1->p4\n     * @param p1\n     * @param p2\n     * @param p3\n     * @param p4\n     * @param maxAngleRad\n     */\n    function cubicCurveOverThreshold(p1, p2, p3, p4, max) {\n        let d = BB.Vec2.nor({\n            x: p4.x - p1.x,\n            y: p4.y - p1.y\n        });\n        let d2 = BB.Vec2.nor({\n            x: p2.x - p1.x,\n            y: p2.y - p1.y\n        });\n        let d3 = BB.Vec2.nor({\n            x: p4.x - p3.x,\n            y: p4.y - p3.y\n        });\n        let a2 = Math.abs(BB.Vec2.angle(d, d2) % Math.PI) / Math.PI * 180;\n        let a3 = Math.abs(BB.Vec2.angle(d, d3) % Math.PI) / Math.PI * 180;\n\n        return Math.max(BB.Vec2.dist(d, d2), BB.Vec2.dist(d, d3)) > max;\n    }\n\n    //bresenheim line drawing\n    function plotLine(x0, y0, x1, y1, skipFirst) {\n        context.save();\n\n        if (settingIsEraser) {\n            context.fillStyle = settingUseDither ? ditherPattern : '#fff';\n            if (settingLockLayerAlpha) {\n                context.globalCompositeOperation = \"source-atop\";\n            } else {\n                context.globalCompositeOperation = \"destination-out\";\n            }\n        } else {\n            context.fillStyle = settingUseDither ? ditherPattern : settingColorStr;\n            if (settingLockLayerAlpha) {\n                context.globalCompositeOperation = \"source-atop\";\n            }\n        }\n        context.globalAlpha = settingUseDither ? 1 : settingOpacity;\n\n        x0 = Math.floor(x0);\n        y0 = Math.floor(y0);\n        x1 = Math.floor(x1);\n        y1 = Math.floor(y1);\n\n        let dX = Math.abs(x1 - x0);\n        let sX = x0 < x1 ? 1 : -1;\n        let dY = -Math.abs(y1 - y0);\n        let sY = y0 < y1 ? 1 : -1;\n        let err = dX + dY;\n        while (true) {\n            if (skipFirst) {\n                skipFirst = false;\n            } else {\n                context.fillRect(x0, y0, 1, 1);\n            }\n            if (x0 === x1 && y0 === y1) {\n                break;\n            }\n            let e2 = 2 * err;\n            if (e2 >= dY) {\n                err += dY;\n                x0 += sX;\n            }\n            if (e2 <= dX) {\n                err += dX;\n                y0 += sY;\n            }\n        }\n\n        context.restore();\n    }\n\n    function plotCubicBezierLine(p1, p2, p3, p4) {\n\n        let isOverThreshold = cubicCurveOverThreshold(p1, p2, p3, p4, 0.1);\n\n        p1.x = Math.floor(p1.x);\n        p1.y = Math.floor(p1.y);\n        p4.x = Math.floor(p4.x);\n        p4.y = Math.floor(p4.y);\n\n        let dist = BB.dist(p1.x, p1.y, p4.x, p4.y);\n        if (!isOverThreshold || dist < 7) {\n            plotLine(p1.x, p1.y, p4.x, p4.y, true);\n            return;\n        }\n\n        let n = Math.max(2, Math.round(dist / 4));\n        let pointArr = [];\n        for (let i = 0; i <= n; i++) {\n            let t = i / n;\n            let a = Math.pow(1 - t, 3);\n            let b = 3 * t * Math.pow(1 - t, 2);\n            let c = 3 * Math.pow(t, 2) * (1 - t);\n            let d = Math.pow(t, 3);\n            pointArr.push({\n                x: a * p1.x + b * p2.x + c * p3.x + d * p4.x,\n                y: a * p1.y + b * p2.y + c * p3.y + d * p4.y\n            });\n        }\n\n        for (let i = 0; i < n; i++) {\n            plotLine(\n                Math.round(pointArr[i].x),\n                Math.round(pointArr[i].y),\n                Math.round(pointArr[i + 1].x),\n                Math.round(pointArr[i + 1].y),\n                true\n            );\n        }\n    }\n\n    function drawDot(x, y, size, opacity, angle?) {\n        context.save();\n        if (settingIsEraser) {\n            context.fillStyle = settingUseDither ? ditherPattern : '#fff';\n            if (settingLockLayerAlpha) {\n                context.globalCompositeOperation = \"source-atop\";\n            } else {\n                context.globalCompositeOperation = \"destination-out\";\n            }\n        } else {\n            context.fillStyle = settingUseDither ? ditherPattern : settingColorStr;\n            if (settingLockLayerAlpha) {\n                context.globalCompositeOperation = \"source-atop\";\n            }\n        }\n        context.globalAlpha = settingUseDither ? 1 : opacity;\n        context.fillRect(\n            Math.round(x + -size),\n            Math.round(y + -size),\n            Math.round(size * 2),\n            Math.round(size * 2)\n        );\n        context.restore();\n    }\n\n\n    function continueLine(x, y, size, pressure) {\n        if (bezierLine === null) {\n            bezierLine = new BB.BezierLine();\n            bezierLine.add(lastInput.x, lastInput.y, 0, function () {\n            });\n        }\n\n        context.save();\n\n        function dotCallback(val) {\n            let localPressure = BB.mix(lastInput2.pressure, pressure, val.t);\n            let localOpacity = settingOpacity * (settingHasOpacityPressure ? (localPressure * localPressure) : 1);\n            let localSize = Math.max(0.5, settingSize * (settingHasSizePressure ? localPressure : 1));\n            drawDot(val.x, val.y, localSize, localOpacity, val.angle);\n        }\n\n        function controlCallback(controlObj) {\n            plotCubicBezierLine(controlObj.p1, controlObj.p2, controlObj.p3, controlObj.p4);\n        }\n\n        if (Math.round(settingSize * 2) === 1) {\n            if (x === null) {\n                bezierLine.addFinal(4, null, controlCallback);\n            } else {\n                bezierLine.add(x, y, 4, null, controlCallback);\n            }\n\n        } else {\n            let localSpacing = size * settingSpacing;\n\n            if (x === null) {\n                bezierLine.addFinal(localSpacing, dotCallback);\n            } else {\n                bezierLine.add(x, y, localSpacing, dotCallback);\n            }\n        }\n\n        context.restore();\n    }\n\n    //------------------ interface ---------------------------------------------------\n\n\n    this.startLine = function (x, y, p) {\n        historyEntry = {\n            tool: [\"brush\", \"PixelBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"sizePressure\",\n            params: [settingHasSizePressure]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [settingSize]\n        });\n        historyEntry.actions.push({\n            action: \"setSpacing\",\n            params: [settingSpacing]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [settingOpacity]\n        });\n        historyEntry.actions.push({\n            action: \"setColor\",\n            params: [settingColor]\n        });\n        historyEntry.actions.push({\n            action: \"setLockAlpha\",\n            params: [settingLockLayerAlpha]\n        });\n        historyEntry.actions.push({\n            action: \"setIsEraser\",\n            params: [settingIsEraser]\n        });\n        historyEntry.actions.push({\n            action: \"setUseDither\",\n            params: [settingUseDither]\n        });\n\n        if (settingUseDither) {\n            updateDither();\n        }\n\n        p = Math.max(0, Math.min(1, p));\n        let localOpacity = settingHasOpacityPressure ? (settingOpacity * p * p) : settingOpacity;\n        let localSize = settingHasSizePressure ? Math.max(0.5, p * settingSize) : Math.max(0.5, settingSize);\n\n        isDrawing = true;\n        drawDot(x, y, localSize, localOpacity);\n        lineToolLastDot = localSize * settingSpacing;\n        lastInput.x = x;\n        lastInput.y = y;\n        lastInput.pressure = p;\n        lastInput2 = BB.copyObj(lastInput);\n\n        historyEntry.actions.push({\n            action: \"startLine\",\n            params: [x, y, p]\n        });\n    };\n\n    this.goLine = function (x, y, p) {\n        if (!isDrawing) {\n            return;\n        }\n        historyEntry.actions.push({\n            action: \"goLine\",\n            params: [x, y, p]\n        });\n\n        //debug\n        //drawDot(x, y, 1, 0.5);\n\n        let pressure = BB.clamp(p, 0, 1);\n        let localSize = settingHasSizePressure ? Math.max(0.1, lastInput.pressure * settingSize) : Math.max(0.1, settingSize);\n\n        continueLine(x, y, localSize, lastInput.pressure);\n\n        lastInput2 = BB.copyObj(lastInput);\n        lastInput.x = x;\n        lastInput.y = y;\n        lastInput.pressure = pressure;\n    };\n\n    this.endLine = function (x, y) {\n\n        let localSize = settingHasSizePressure ? Math.max(0.1, lastInput.pressure * settingSize) : Math.max(0.1, settingSize);\n        continueLine(null, null, localSize, lastInput.pressure);\n\n        //debug\n        //drawDot(lastInput.x, lastInput.y, 3, 1);\n        //drawDot(x, y, 10, 0.1);\n\n        isDrawing = false;\n\n        bezierLine = null;\n\n        if (historyEntry) {\n            historyEntry.actions.push({\n                action: \"endLine\",\n                params: [x, y]\n            });\n            history.push(historyEntry);\n            historyEntry = undefined;\n        }\n    };\n    //cheap n' ugly\n    this.drawLineSegment = function (x1, y1, x2, y2) {\n        lastInput.x = x2;\n        lastInput.y = y2;\n        lastInput.pressure = 1;\n\n        if (isDrawing || x1 === undefined) {\n            return;\n        }\n\n        if (settingUseDither) {\n            updateDither();\n        }\n\n        if (Math.round(settingSize * 2) === 1) {\n            plotLine(x1, y1, x2, y2, true);\n        } else {\n            let angle = BB.pointsToAngleDeg({x: x1, y: y1}, {x: x2, y: y2});\n            let mouseDist = Math.sqrt(Math.pow(x2 - x1, 2.0) + Math.pow(y2 - y1, 2.0));\n            let eX = (x2 - x1) / mouseDist;\n            let eY = (y2 - y1) / mouseDist;\n            let loopDist;\n            let bdist = settingSize * settingSpacing;\n            lineToolLastDot = settingSize * settingSpacing;\n            for (loopDist = lineToolLastDot; loopDist <= mouseDist; loopDist += bdist) {\n                drawDot(x1 + eX * loopDist, y1 + eY * loopDist, settingSize, settingOpacity, angle);\n            }\n        }\n\n        let historyEntry = {\n            tool: [\"brush\", \"PixelBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"sizePressure\",\n            params: [settingHasSizePressure]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [settingSize]\n        });\n        historyEntry.actions.push({\n            action: \"setSpacing\",\n            params: [settingSpacing]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [settingOpacity]\n        });\n        historyEntry.actions.push({\n            action: \"setColor\",\n            params: [settingColor]\n        });\n        historyEntry.actions.push({\n            action: \"setLockAlpha\",\n            params: [settingLockLayerAlpha]\n        });\n        historyEntry.actions.push({\n            action: \"setIsEraser\",\n            params: [settingIsEraser]\n        });\n        historyEntry.actions.push({\n            action: \"setUseDither\",\n            params: [settingUseDither]\n        });\n\n        historyEntry.actions.push({\n            action: \"drawLineSegment\",\n            params: [x1, y1, x2, y2]\n        });\n        history.push(historyEntry);\n    };\n\n    //IS\n    this.isDrawing = function () {\n        return isDrawing;\n    };\n    //SET\n    this.setColor = function (c) {\n        if (settingColor === c) {\n            return;\n        }\n        settingColor = c;\n        settingColorStr = \"rgb(\" + settingColor.r + \",\" + settingColor.g + \",\" + settingColor.b + \")\";\n    };\n    this.setContext = function (c) {\n        context = c;\n    };\n    this.setHistory = function (l: KlHistoryInterface) {\n        history = l;\n    };\n    this.setSize = function (s) {\n        settingSize = s;\n    };\n    this.setOpacity = function (o) {\n        settingOpacity = o;\n    };\n    this.setSpacing = function (s) {\n        settingSpacing = s;\n    };\n    this.sizePressure = function (b) {\n        settingHasSizePressure = b;\n    };\n    this.opacityPressure = function (b) {\n        settingHasOpacityPressure = b;\n    };\n    this.setLockAlpha = function (b) {\n        settingLockLayerAlpha = b;\n    };\n    this.setIsEraser = function (b) {\n        settingIsEraser = !!b;\n    };\n    this.setUseDither = function (b) {\n        settingUseDither = !!b;\n    };\n    //GET\n    this.getSpacing = function () {\n        return settingSpacing;\n    };\n    this.getSize = function () {\n        return settingSize;\n    };\n    this.getOpacity = function () {\n        return settingOpacity;\n    };\n    this.getLockAlpha = function () {\n        return settingLockLayerAlpha;\n    };\n    this.getIsEraser = function () {\n        return settingIsEraser;\n    };\n    this.getUseDither = function () {\n        return settingUseDither;\n    };\n}","import {BB} from '../../bb/bb';\nimport {IHistoryEntry, KlHistoryInterface} from '../history/kl-history';\nimport {KL} from '../kl';\n\nexport function EraserBrush() {\n    let context;\n    let history: KlHistoryInterface = new KL.DecoyKlHistory();\n    let historyEntry: IHistoryEntry;\n\n    let size = 30, spacing = 0.4, opacity = 1;\n    let sizePressure = true, opacityPressure = false;\n    let lastDot, lastInput = {x: 0, y: 0, pressure: 0};\n    let lastInput2 = {x: 0, y: 0, pressure: 0};\n    let started = false;\n\n    let bezierLine;\n    let isBaseLayer = false;\n    let isTransparentBG = false;\n\n    function drawDot(x, y, size, opacity) {\n\n        context.save();\n        if (isBaseLayer) {\n            if (isTransparentBG) {\n                context.globalCompositeOperation = \"destination-out\";\n            } else {\n                context.globalCompositeOperation = \"source-atop\";\n            }\n        } else {\n            context.globalCompositeOperation = \"destination-out\";\n        }\n        let radgrad = context.createRadialGradient(size, size, 0, size, size, size);\n        let sharpness = Math.pow(opacity, 2);\n        sharpness = Math.max(0, Math.min((size - 1) / size, sharpness));\n        let oFac = Math.max(0, Math.min(1, opacity));\n        let localOpacity = 2 * oFac - oFac * oFac;\n        radgrad.addColorStop(sharpness, \"rgba(255, 255, 255, \" + localOpacity + \")\");\n        radgrad.addColorStop(1, \"rgba(255, 255, 255, 0)\");\n        context.fillStyle = radgrad;\n        context.translate(x - size, y - size);\n        context.fillRect(0, 0, size * 2, size * 2);\n        context.restore();\n    }\n\n    function continueLine(x, y, p) {\n        p = Math.max(0, Math.min(1, p));\n        let localPressure;\n        let localOpacity;\n        let localSize = (sizePressure) ? Math.max(0.1, p * size) : Math.max(0.1, size);\n\n        let bdist = Math.max(1, Math.max(0.5, 1 - opacity) * localSize * spacing);\n\n        function bezierCallback(val) {\n            let factor = val.t;\n            localPressure = lastInput2.pressure * (1 - factor) + p * factor;\n            localOpacity = (opacityPressure) ? (opacity * localPressure * localPressure) : opacity;\n            localSize = (sizePressure) ? Math.max(0.1, localPressure * size) : Math.max(0.1, size);\n\n            drawDot(val.x, val.y, localSize, localOpacity);\n        }\n\n        if (x === null) {\n            bezierLine.addFinal(bdist, bezierCallback);\n        } else {\n            bezierLine.add(x, y, bdist, bezierCallback);\n        }\n    }\n\n\n    this.startLine = function (x, y, p) {\n        historyEntry = {\n            tool: [\"brush\", \"EraserBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"opacityPressure\",\n            params: [opacityPressure]\n        });\n        historyEntry.actions.push({\n            action: \"sizePressure\",\n            params: [sizePressure]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [size]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [opacity]\n        });\n        historyEntry.actions.push({\n            action: \"setTransparentBG\",\n            params: [isTransparentBG]\n        });\n\n        isBaseLayer = 0 === context.canvas.index;\n\n        p = Math.max(0, Math.min(1, p));\n        let localOpacity = (opacityPressure) ? (opacity * p * p) : opacity;\n        let localSize = (sizePressure) ? Math.max(0.1, p * size) : Math.max(0.1, size);\n\n        started = true;\n        if (localSize > 1) {\n            drawDot(x, y, localSize, localOpacity);\n        }\n        lastDot = localSize * spacing;\n        lastInput.x = x;\n        lastInput.y = y;\n        lastInput.pressure = p;\n        lastInput2 = BB.copyObj(lastInput);\n\n        bezierLine = new BB.BezierLine();\n        bezierLine.add(x, y, 0, function () {\n        });\n\n        historyEntry.actions.push({\n            action: \"startLine\",\n            params: [x, y, p]\n        });\n    };\n    this.goLine = function (x, y, p) {\n        if (!started) {\n            return;\n        }\n        historyEntry.actions.push({\n            action: \"goLine\",\n            params: [x, y, p]\n        });\n\n        continueLine(x, y, lastInput.pressure);\n\n        lastInput2 = BB.copyObj(lastInput);\n        lastInput.x = x;\n        lastInput.y = y;\n        lastInput.pressure = p;\n    };\n    this.endLine = function () {\n\n        if (bezierLine) {\n            continueLine(null, null, lastInput.pressure);\n        }\n\n        started = false;\n        bezierLine = undefined;\n\n        if (historyEntry) {\n            historyEntry.actions.push({\n                action: \"endLine\",\n                params: []\n            });\n            history.push(historyEntry);\n            historyEntry = undefined;\n        }\n    };\n    //cheap n' ugly\n    this.drawLineSegment = function (x1, y1, x2, y2) {\n\n        isBaseLayer = 0 === context.canvas.index;\n\n        lastInput.x = x2;\n        lastInput.y = y2;\n\n        if (started || x1 === undefined) {\n            return;\n        }\n\n        let mouseDist = Math.sqrt(Math.pow(x2 - x1, 2.0) + Math.pow(y2 - y1, 2.0));\n        let eX = (x2 - x1) / mouseDist;\n        let eY = (y2 - y1) / mouseDist;\n        let loopDist;\n        let bdist = Math.max(1, Math.max(0.5, 1 - opacity) * size * spacing);\n        lastDot = 0;\n        for (loopDist = lastDot; loopDist <= mouseDist; loopDist += bdist) {\n            drawDot(x1 + eX * loopDist, y1 + eY * loopDist, size, opacity);\n        }\n\n\n        let historyEntry = {\n            tool: [\"brush\", \"EraserBrush\"],\n            actions: []\n        };\n        historyEntry.actions.push({\n            action: \"opacityPressure\",\n            params: [opacityPressure]\n        });\n        historyEntry.actions.push({\n            action: \"sizePressure\",\n            params: [sizePressure]\n        });\n        historyEntry.actions.push({\n            action: \"setSize\",\n            params: [size]\n        });\n        historyEntry.actions.push({\n            action: \"setOpacity\",\n            params: [opacity]\n        });\n        historyEntry.actions.push({\n            action: \"setTransparentBG\",\n            params: [isTransparentBG]\n        });\n\n        historyEntry.actions.push({\n            action: \"drawLineSegment\",\n            params: [x1, y1, x2, y2]\n        });\n        history.push(historyEntry);\n    };\n\n    //IS\n    this.isDrawing = function () {\n        return started;\n    };\n    //SET\n    /*this.setAlpha = function(a) {\n        lastInput = {};\n        alpha = a;\n        updateAlphaCanvas();\n    };*/\n    this.setContext = function (c) {\n        context = c;\n    };\n    this.setHistory = function (l: KlHistoryInterface) {\n        history = l;\n    };\n    this.setSize = function (s) {\n        size = s;\n    };\n    this.setOpacity = function (o) {\n        opacity = o;\n    };\n    this.sizePressure = function (b) {\n        sizePressure = b;\n    };\n    this.opacityPressure = function (b) {\n        opacityPressure = b;\n    };\n    this.setTransparentBG = function (b) {\n        isTransparentBG = b == true;\n    };\n    //GET\n    this.getSize = function () {\n        return size;\n    };\n    this.getOpacity = function () {\n        return opacity;\n    };\n}","\nexport const eventResMs = 20;","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"iiCd6\");","import {BB} from '../../bb/bb';\nimport {brushes} from '../brushes/brushes';\nimport {eventResMs} from './brushes-consts';\nimport {klHistory} from '../history/kl-history';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {penPressureToggle} from '../ui/base-components/pen-pressure-toggle';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-pen.svg';\nimport {genBrushAlpha01, genBrushAlpha02} from '../brushes/alphas/brush-alphas';\nimport {IBrushUi} from '../kl.types';\nimport {LANG, languageStrings} from '../../language/language';\n\nexport const penBrushUi = (function () {\n    let brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('brush-pen'),\n        sizeSlider: {\n            min: 0.5,\n            max: 100,\n            curve: BB.quadraticSplineInput(0.5, 100, 0.1)\n        },\n        opacitySlider: {\n            min: 0,\n            max: 1,\n            curve: [[0, 1 / 100], [0.5, 0.3], [1, 1]]\n        },\n        Ui: null,\n    };\n\n    let alphaNames = [\n        LANG('brush-pen-circle'),\n        LANG('brush-pen-chalk'),\n        LANG('brush-pen-calligraphy'),\n        LANG('brush-pen-square'),\n    ];\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('brush-pen');\n        alphaNames = [\n            LANG('brush-pen-circle'),\n            LANG('brush-pen-chalk'),\n            LANG('brush-pen-calligraphy'),\n            LANG('brush-pen-square'),\n        ];\n    });\n\n    brushInterface.Ui = function (p) {\n        let div = document.createElement(\"div\"); // the gui\n        let brush = new brushes.PenBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n        let sizeSlider;\n        let opacitySlider;\n\n        let alphas = [];\n        let currentAlpha = 0;\n        for (let i = 0; i < 4; i++) {\n            (function (i) {\n                let alpha = BB.el({\n                    title: alphaNames[i],\n                    onClick: () => {\n                        alphaClick(i);\n                    }\n                });\n                let canvas = BB.canvas(70, 70);\n                let ctx = canvas.getContext('2d');\n                if (i === 0 || i === 3) {\n                    if (i === 0) {\n                        ctx.beginPath();\n                        ctx.arc(35, 35, 30, 0, 2 * Math.PI);\n                        ctx.closePath();\n                        ctx.fill();\n                    } else {\n                        ctx.fillRect(5, 5, 60, 60);\n                    }\n                } else if (i === 1) {\n                    ctx.drawImage(genBrushAlpha01(60), 5, 5);\n                } else if (i === 2) {\n                    ctx.drawImage(genBrushAlpha02(60), 5, 5);\n                }\n                alpha.style.backgroundImage = 'url(' + canvas.toDataURL('image/png') + ')';\n\n                alphas.push(alpha);\n            }(i));\n        }\n\n        function updateAlphas() {\n            for (let i = 0; i < alphas.length; i++) {\n                if (i === currentAlpha) {\n                    alphas[i].className = 'brush-alpha-selected';\n                } else {\n                    alphas[i].className = 'brush-alpha';\n                }\n            }\n        }\n\n        updateAlphas();\n\n        function alphaClick(id) {\n            currentAlpha = id;\n            brush.setAlpha(id);\n            updateAlphas();\n        }\n\n        let lockAlphaToggle = new Checkbox({\n            init: brush.getLockAlpha(),\n            label: LANG('brush-lock-alpha'),\n            callback: function (b) {\n                brush.setLockAlpha(b);\n            },\n            doHighlight: true,\n            title: LANG('brush-lock-alpha-title'),\n            css: {\n                cssFloat: 'right',\n                textAlign: 'right',\n            }\n        });\n\n        let spacingSpline = new BB.SplineInterpolator([[0, 15], [8, 7], [14, 4], [30, 3], [50, 2.7], [100, 2]]);\n\n        function setSize(size) {\n            brush.setSize(size);\n            brush.setSpacing(Math.max(2, spacingSpline.interpolate(size)) / 15);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 225,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                initValue: brush.getSize(),\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    setSize(val);\n                    p.onSizeChange(val);\n                },\n                curve: brushInterface.sizeSlider.curve,\n                formatFunc: function (v) {\n                    v *= 2;\n                    if (v < 10) {\n                        return Math.round(v * 10) / 10;\n                    } else {\n                        return Math.round(v);\n                    }\n                }\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 225,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                initValue: brushInterface.opacitySlider.max,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n                curve: brushInterface.opacitySlider.curve,\n                formatFunc: function(v) {\n                    return Math.round(v * 100);\n                }\n            });\n\n            let pressureSizeToggle = penPressureToggle(false, function (b) {\n                brush.sizePressure(b);\n            });\n            let pressureOpacityToggle = penPressureToggle(false, function (b) {\n                brush.opacityPressure(b);\n            });\n\n            div.append(\n                BB.el({\n                    content: [\n                        sizeSlider.getElement(),\n                        pressureSizeToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                        marginBottom: '10px',\n                    }\n                }),\n                BB.el({\n                    content: [\n                        opacitySlider.getElement(),\n                        pressureOpacityToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                    }\n                })\n            );\n\n            let alphaWrapper = document.createElement(\"div\");\n            for (let i = 0; i < alphas.length; i++) {\n                alphaWrapper.appendChild(alphas[i]);\n            }\n            alphaWrapper.style.marginTop = \"10px\";\n            div.appendChild(alphaWrapper);\n            alphaWrapper.appendChild(lockAlphaToggle.getElement());\n\n        }\n\n        init();\n\n        this.increaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.increaseValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.decreaseValue(f);\n            }\n        };\n\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity);\n        };\n\n        this.setColor = function (c) {\n            brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, p) {\n            brush.startLine(x, y, p);\n        };\n        this.goLine = function (x, y, p) {\n            brush.goLine(x, y, p);\n        };\n        this.endLine = function (x, y) {\n            brush.endLine(x, y);\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.isDrawing = function () {\n            return brush.isDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        };\n    };\n    return brushInterface;\n})();","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"6fRlX\");","import {BB} from '../../bb/bb';\nimport {penPressureToggle} from '../ui/base-components/pen-pressure-toggle';\nimport {eventResMs} from './brushes-consts';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {brushes} from '../brushes/brushes';\nimport {klHistory} from '../history/kl-history';\nimport {KlSlider} from '../ui/base-components/kl-slider';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-blend.svg';\nimport {IBrushUi} from '../kl.types';\nimport {LANG, languageStrings} from '../../language/language';\n\nexport const blendBrushUi = (function () {\n    let brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('brush-blend'),\n        sizeSlider: {\n            min: 0.5,\n            max: 100,\n            curve: BB.quadraticSplineInput(0.5, 100, 0.1)\n        },\n        opacitySlider: {\n            min: 1 / 100,\n            max: 1\n        },\n        Ui: null,\n    };\n\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('brush-blend');\n    });\n\n    brushInterface.Ui = function (p) {\n        let div = document.createElement(\"div\"); // the gui\n        let brush = new brushes.BlendBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n\n        let sizeSlider;\n        let opacitySlider;\n\n        function setSize(size) {\n            brush.setSize(size);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 225,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                initValue: 58 / 2,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    setSize(val);\n                    p.onSizeChange(val);\n                },\n                curve: brushInterface.sizeSlider.curve,\n                formatFunc: function (v) {\n                    v *= 2;\n                    return Math.round(v);\n                }\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 225,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                initValue: brush.getOpacity(),\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n                formatFunc: function(v) {\n                    return Math.round(v * 100);\n                }\n            });\n            let blendingSlider = new KlSlider({\n                label: LANG('brush-blending'),\n                width: 225,\n                height: 30,\n                min: 0,\n                max: 100,\n                initValue: brush.getBlending() * 100,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brush.setBlending(val / 100);\n                }\n            });\n            blendingSlider.getElement().style.marginTop = \"10px\";\n\n            let pressureSizeToggle = penPressureToggle(true, function (b) {\n                brush.setSizePressure(b);\n            });\n            let pressureOpacityToggle = penPressureToggle(false, function (b) {\n                brush.setOpacityPressure(b);\n            });\n\n            let lockAlphaToggle = new Checkbox({\n                init: brush.getLockAlpha(),\n                label: LANG('brush-lock-alpha'),\n                callback: function (b) {\n                    brush.setLockAlpha(b);\n                },\n                doHighlight: true,\n                title: LANG('brush-lock-alpha-title'),\n                css: {\n                    marginTop: '10px',\n                    display: 'inline-block',\n                }\n            });\n\n\n            div.append(\n                BB.el({\n                    content: [\n                        sizeSlider.getElement(),\n                        pressureSizeToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                        marginBottom: '10px',\n                    }\n                }),\n                BB.el({\n                    content: [\n                        opacitySlider.getElement(),\n                        pressureOpacityToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                    }\n                }),\n                blendingSlider.getElement(),\n                lockAlphaToggle.getElement()\n            );\n        }\n\n        init();\n\n        this.increaseSize = function (f) {\n            if (!brush.getIsDrawing()) {\n                sizeSlider.increaseValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.getIsDrawing()) {\n                sizeSlider.decreaseValue(f);\n            }\n        };\n\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity);\n        };\n\n        this.setColor = function (c) {\n            brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, p) {\n            brush.startLine(x, y, p);\n        };\n        this.goLine = function (x, y, p, isCoalesced) {\n            brush.goLine(x, y, p, isCoalesced);\n        };\n        this.endLine = function () {\n            brush.endLine();\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.isDrawing = function () {\n            return brush.getIsDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        };\n    };\n\n    return brushInterface;\n})();","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"hC7PC\");","import {brushes} from '../brushes/brushes';\nimport {eventResMs} from './brushes-consts';\nimport {klHistory} from '../history/kl-history';\nimport {KlSlider} from '../ui/base-components/kl-slider';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-sketchy.png';\nimport {IBrushUi} from '../kl.types';\nimport {LANG, languageStrings} from '../../language/language';\n\nexport const sketchyBrushUi = (function () {\n    let brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('brush-sketchy'),\n        sizeSlider: {\n            min: 0.5,\n            max: 10\n        },\n        opacitySlider: {\n            min: 1 / 100,\n            max: 1\n        },\n        Ui: null,\n    };\n\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('brush-sketchy');\n    });\n\n    brushInterface.Ui = function (p) {\n        let div = document.createElement(\"div\"); // the gui\n        let brush = new brushes.SketchyBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n        let sizeSlider;\n        let opacitySlider;\n\n        function setSize(size) {\n            brush.setSize(size);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 250,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                initValue: brush.getSize(),\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brush.setSize(val);\n                    p.onSizeChange(brush.getSize());\n                },\n                formatFunc: function (v) {\n                    v *= 2;\n                    if (v < 10) {\n                        return Math.round(v * 10) / 10;\n                    } else {\n                        return Math.round(v);\n                    }\n                }\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 250,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                initValue: brush.getOpacity(),\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n                formatFunc: function(v) {\n                    return Math.round(v * 100);\n                }\n            });\n            let blendSlider = new KlSlider({\n                label: LANG('brush-blending'),\n                width: 250,\n                height: 30,\n                min: 0,\n                max: 100,\n                initValue: brush.getBlending() * 100,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brush.setBlending(val / 100);\n                }\n            });\n            let scaleSlider = new KlSlider({\n                label: LANG('brush-sketchy-scale'),\n                width: 250,\n                height: 30,\n                min: 1,\n                max: 20,\n                initValue: brush.getScale(),\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brush.setScale(val);\n                }\n            });\n            opacitySlider.getElement().style.marginTop = \"10px\";\n            blendSlider.getElement().style.marginTop = \"10px\";\n            scaleSlider.getElement().style.marginTop = \"10px\";\n            div.appendChild(sizeSlider.getElement());\n            div.appendChild(opacitySlider.getElement());\n            div.appendChild(blendSlider.getElement());\n            div.appendChild(scaleSlider.getElement());\n        }\n\n        init();\n\n        this.increaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.increaseValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.decreaseValue(f);\n            }\n        };\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity);\n        };\n        this.setColor = function (c) {\n            brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, pressure) {\n            brush.startLine(x, y, pressure);\n        };\n        this.goLine = function (x, y, pressure) {\n            brush.goLine(x, y, pressure, null);\n        };\n        this.endLine = function () {\n            brush.endLine();\n        };\n        this.getSeed = function () {\n            return parseInt(brush.getSeed());\n        };\n        this.setSeed = function (s) {\n            brush.setSeed(parseInt(s));\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.isDrawing = function () {\n            return brush.isDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        };\n    };\n\n    return brushInterface;\n})();","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"eZgVv\");","import {BB} from '../../bb/bb';\nimport {brushes} from '../brushes/brushes';\nimport {eventResMs} from './brushes-consts';\nimport {klHistory} from '../history/kl-history';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {penPressureToggle} from '../ui/base-components/pen-pressure-toggle';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-pixel.svg';\nimport {IBrushUi} from '../kl.types';\nimport {LANG, languageStrings} from '../../language/language';\n\nexport const pixelBrushUi = (function () {\n    let brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('brush-pixel'),\n        sizeSlider: {\n            min: 0.5,\n            max: 100,\n            curve: BB.quadraticSplineInput(0.5, 100, 0.1)\n        },\n        opacitySlider: {\n            min: 0,\n            max: 1,\n            curve: [[0, 1 / 100], [0.5, 0.3], [1, 1]]\n        },\n        Ui: null,\n    };\n\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('brush-pixel');\n    });\n\n    brushInterface.Ui = function (p) {\n        let div = document.createElement(\"div\"); // the gui\n        let brush = new brushes.PixelBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n        let sizeSlider;\n        let opacitySlider;\n\n        let lockAlphaToggle = new Checkbox({\n            init: brush.getLockAlpha(),\n            label: LANG('brush-lock-alpha'),\n            callback: function (b) {\n                brush.setLockAlpha(b);\n            },\n            doHighlight: true,\n            title: LANG('brush-lock-alpha-title'),\n            css: {\n                marginRight: '10px',\n            }\n        });\n\n        let eraserToggle = new Checkbox({\n            init: brush.getIsEraser(),\n            label: LANG('eraser'),\n            callback: function (b) {\n                brush.setIsEraser(b);\n            },\n            css: {\n                marginRight: '10px',\n            }\n        });\n\n        let ditherToggle = new Checkbox({\n            init: brush.getUseDither(),\n            label: LANG('brush-pixel-dither'),\n            callback: function (b) {\n                brush.setUseDither(b);\n            }\n        });\n\n        let spacingSpline = new BB.SplineInterpolator([[0.5, 0.45], [100, 4]]);\n\n        function setSize(size) {\n            brush.setSize(size);\n            brush.setSpacing(spacingSpline.interpolate(size) / size);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 225,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                initValue: brush.getSize(),\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    val = Math.round(val * 2) / 2;\n                    setSize(val);\n                    p.onSizeChange(val);\n                },\n                curve: brushInterface.sizeSlider.curve,\n                formatFunc: function (v) {\n                    v *= 2;\n                    return Math.round(v);\n                }\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 225,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                initValue: brushInterface.opacitySlider.max,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n                curve: brushInterface.opacitySlider.curve,\n                formatFunc: function(v) {\n                    return Math.round(v * 100);\n                }\n            });\n\n            let pressureSizeToggle = penPressureToggle(false, function (b) {\n                brush.sizePressure(b);\n            });\n\n            div.append(\n                BB.el({\n                    content: [\n                        sizeSlider.getElement(),\n                        pressureSizeToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                        marginBottom: '10px',\n                    }\n                }),\n                opacitySlider.getElement()\n            );\n\n            let toggleRow = BB.el({\n                parent: div,\n                css: {\n                    display: 'flex',\n                    marginTop: '10px'\n                }\n            });\n\n            toggleRow.appendChild(lockAlphaToggle.getElement());\n            toggleRow.appendChild(eraserToggle.getElement());\n            toggleRow.appendChild(ditherToggle.getElement());\n        }\n\n        init();\n\n        this.increaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.increaseValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.decreaseValue(f);\n            }\n        };\n\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity);\n        };\n\n        this.setColor = function (c) {\n            brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, p) {\n            brush.startLine(x, y, p);\n        };\n        this.goLine = function (x, y, p) {\n            brush.goLine(x, y, p);\n        };\n        this.endLine = function (x, y) {\n            brush.endLine(x, y);\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.isDrawing = function () {\n            return brush.isDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        };\n    };\n    return brushInterface;\n})();","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"fPZin\");","import {BB} from '../../bb/bb';\nimport {brushes} from '../brushes/brushes';\nimport {eventResMs} from './brushes-consts';\nimport {klHistory} from '../history/kl-history';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {penPressureToggle} from '../ui/base-components/pen-pressure-toggle';\nimport {Checkbox} from '../ui/base-components/checkbox';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-eraser.svg';\nimport {IBrushUi} from '../kl.types';\nimport {LANG, languageStrings} from '../../language/language';\n\nexport const eraserBrushUi = (function () {\n    let brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('eraser') + ' [E]',\n        sizeSlider: {\n            min: 0.5,\n            max: 200,\n            curve: BB.quadraticSplineInput(0.5, 200, 0.1)\n        },\n        opacitySlider: {\n            min: 1 / 100,\n            max: 1\n        },\n        Ui: null,\n    };\n\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('eraser') + ' [E]';\n    });\n\n    brushInterface.Ui = function (p) {\n        let div = document.createElement(\"div\"); // the gui\n        let brush = new brushes.EraserBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n\n        let sizeSlider;\n        let opacitySlider;\n        let isTransparentBg = false;\n\n        function setSize(size) {\n            brush.setSize(size);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 225,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                initValue: 30,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    setSize(val);\n                    p.onSizeChange(val);\n                },\n                curve: brushInterface.sizeSlider.curve,\n                formatFunc: function (v) {\n                    v *= 2;\n                    if (v < 10) {\n                        return Math.round(v * 10) / 10;\n                    } else {\n                        return Math.round(v);\n                    }\n                }\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 225,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                initValue: 1,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n                formatFunc: function(v) {\n                    return Math.round(v * 100);\n                }\n            });\n\n            let pressureSizeToggle = penPressureToggle(false, function (b) {\n                brush.sizePressure(b);\n            });\n            let pressureOpacityToggle = penPressureToggle(false, function (b) {\n                brush.opacityPressure(b);\n            });\n\n            div.append(\n                BB.el({\n                    content: [\n                        sizeSlider.getElement(),\n                        pressureSizeToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                        marginBottom: '10px',\n                    }\n                }),\n                BB.el({\n                    content: [\n                        opacitySlider.getElement(),\n                        pressureOpacityToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                    }\n                })\n            );\n\n            let transparencyToggle = new Checkbox({\n                init: false,\n                label: LANG('brush-eraser-transparent-bg'),\n                callback: function (b) {\n                    isTransparentBg = b;\n                    brush.setTransparentBG(b);\n                },\n                css: {\n                    marginTop: \"10px\",\n                }\n            });\n            div.appendChild(transparencyToggle.getElement());\n        }\n\n        init();\n\n        function drawDot(x, y) {\n            brush.drawDot(x, y);\n        }\n\n        this.increaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.increaseValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.isDrawing()) {\n                sizeSlider.decreaseValue(f);\n            }\n        };\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity);\n        };\n        this.setColor = function (c) {\n            //brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, p) {\n            brush.startLine(x, y, p);\n        };\n        this.goLine = function (x, y, p) {\n            brush.goLine(x, y, p);\n        };\n        this.endLine = function () {\n            brush.endLine();\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.getIsTransparentBg = function () {\n            return isTransparentBg;\n        };\n        this.isDrawing = function () {\n            return brush.isDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        }\n    };\n\n    return brushInterface;\n})();","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"fp7H1\");","import {BB} from '../../bb/bb';\nimport {brushes} from '../brushes/brushes';\nimport {eventResMs} from './brushes-consts';\nimport {klHistory} from '../history/kl-history';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {penPressureToggle} from '../ui/base-components/pen-pressure-toggle';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-smudge.svg';\nimport {IBrushUi} from '../kl.types';\nimport {LANG, languageStrings} from '../../language/language';\n\nexport const smudgeBrushUi = (function () {\n    let brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('brush-smudge'),\n        sizeSlider: {\n            min: 0.5,\n            max: 100,\n            curve: BB.quadraticSplineInput(0.5, 100, 0.1)\n        },\n        opacitySlider: {\n            min: 0,\n            max: 1,\n            curve: [[0, 1 / 100], [0.5, 0.3], [1, 1]]\n        },\n        Ui: null,\n    };\n\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('brush-smudge');\n    });\n\n    brushInterface.Ui = function (p) {\n        let div = document.createElement(\"div\"); // the gui\n        let brush = new brushes.SmudgeBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n        let sizeSlider;\n        let opacitySlider;\n\n        let lockAlphaToggle = new Checkbox({\n            init: brush.getLockAlpha(),\n            label: LANG('brush-lock-alpha'),\n            callback: function (b) {\n                brush.setLockAlpha(b);\n            },\n            doHighlight: true,\n            title: LANG('brush-lock-alpha-title'),\n        });\n\n        let spacingSpline = new BB.SplineInterpolator([[0, 15], [8, 7], [14, 4], [30, 3], [50, 2.7], [100, 2]]);\n\n        function setSize(size) {\n            brush.setSize(size);\n            brush.setSpacing(Math.max(2, spacingSpline.interpolate(size)) / 15);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 225,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                initValue: brush.getSize(),\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    setSize(val);\n                    p.onSizeChange(val);\n                },\n                curve: brushInterface.sizeSlider.curve,\n                formatFunc: function (v) {\n                    v *= 2;\n                    if (v < 10) {\n                        return Math.round(v * 10) / 10;\n                    } else {\n                        return Math.round(v);\n                    }\n                }\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 225,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                initValue: brush.getOpacity(),\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n                curve: brushInterface.opacitySlider.curve,\n                formatFunc: function(v) {\n                    return Math.round(v * 100);\n                }\n            });\n\n            let pressureSizeToggle = penPressureToggle(false, function (b) {\n                brush.sizePressure(b);\n            });\n            let pressureOpacityToggle = penPressureToggle(false, function (b) {\n                brush.opacityPressure(b);\n            });\n\n            div.append(\n                BB.el({\n                    content: [\n                        sizeSlider.getElement(),\n                        pressureSizeToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                        marginBottom: '10px',\n                    }\n                }),\n                BB.el({\n                    content: [\n                        opacitySlider.getElement(),\n                        pressureOpacityToggle\n                    ],\n                    css: {\n                        display: 'flex',\n                        justifyContent: 'space-between',\n                        alignItems: 'center',\n                    }\n                })\n            );\n\n            let bottomRow = BB.el({\n                parent: div,\n                css: {\n                    marginTop: '10px',\n                }\n            });\n            bottomRow.append(lockAlphaToggle.getElement());\n\n        }\n\n        init();\n\n        this.increaseSize = function (f) {\n            if (!brush.getIsDrawing()) {\n                sizeSlider.increaseValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.getIsDrawing()) {\n                sizeSlider.decreaseValue(f);\n            }\n        };\n\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity);\n        };\n\n        this.setColor = function (c) {\n            brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, p) {\n            brush.startLine(x, y, p);\n        };\n        this.goLine = function (x, y, p) {\n            brush.goLine(x, y, p);\n        };\n        this.endLine = function (x, y) {\n            brush.endLine();\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.isDrawing = function () {\n            return brush.getIsDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        };\n    };\n    return brushInterface;\n})();","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"eX098\");","import {BB} from '../../../bb/bb';\n\nexport class BoxToggle {\n    el: HTMLElement;\n    value: boolean;\n\n    update (): void {\n        if (this.value) {\n            BB.addClassName(this.el, 'kl-box-toggle--active');\n        } else {\n            BB.removeClassName(this.el, 'kl-box-toggle--active');\n        }\n    }\n\n    // --- public ---\n    constructor (\n        p: {\n            label: string | HTMLElement | SVGElement;\n            title?: string;\n            init?: boolean;\n            onChange: (b: boolean) => void;\n        }\n    ) {\n        this.value = !!p.init;\n        this.el = BB.el({\n            content: p.label,\n            title: p.title,\n            className: (typeof p.label === 'string') ? 'kl-box-toggle' : 'kl-box-toggle kl-box-toggle--custom-el',\n            onClick: () => {\n                this.value = !this.value;\n                this.update();\n                p.onChange(this.value);\n            },\n            css: {\n                cursor: 'pointer',\n            }\n        });\n        if (typeof p.label !== 'string') {\n            BB.css(p.label, {\n                display: 'block',\n                pointerEvents: 'none',\n            });\n        }\n        this.update();\n    }\n\n    getValue (): boolean {\n        return this.value;\n    }\n\n    setValue (b: boolean): void {\n        this.value = !!b;\n        this.update();\n    }\n\n    getElement (): HTMLElement {\n        return this.el;\n    }\n\n    destroy (): void {\n        BB.destroyEl(this.el);\n    }\n}","import {BB} from '../../bb/bb';\nimport {eventResMs} from './brushes-consts';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {brushes} from '../brushes/brushes';\nimport {klHistory} from '../history/kl-history';\nimport {KlSlider} from '../ui/base-components/kl-slider';\n// @ts-ignore\nimport brushIconImg from 'url:~/src/app/img/ui/brush-chemy.svg';\nimport {IBrushUi} from '../kl.types';\nimport {Options} from '../ui/base-components/options';\nimport {BoxToggle} from '../ui/base-components/box-toggle';\nimport {LANG, languageStrings} from '../../language/language';\n\nexport const chemyBrushUi = (function () {\n    const brushInterface: IBrushUi = {\n        image: brushIconImg,\n        tooltip: LANG('brush-chemy'),\n        sizeSlider: {\n            min: 0.25,\n            max: 25,\n            curve: BB.quadraticSplineInput(0.25, 25, 0.1),\n            isDisabled: true,\n        },\n        opacitySlider: {\n            min: 1 / 100,\n            max: 1\n        },\n        Ui: null,\n    };\n\n    languageStrings.subscribe(() => {\n        brushInterface.tooltip = LANG('brush-chemy');\n    });\n\n    brushInterface.Ui = function (p) {\n        const div = document.createElement(\"div\"); // the gui\n        const brush = new brushes.ChemyBrush();\n        brush.setHistory(klHistory);\n        p.onSizeChange(brush.getSize());\n\n        let sizeSlider;\n        let opacitySlider;\n\n        function setSize(size) {\n            brush.setSize(size);\n        }\n\n        function init() {\n            sizeSlider = new KlSlider({\n                label: LANG('brush-size'),\n                width: 250,\n                height: 30,\n                min: brushInterface.sizeSlider.min,\n                max: brushInterface.sizeSlider.max,\n                initValue: brush.getSize(),\n                eventResMs: eventResMs,\n                isEnabled: brush.getMode() === 'stroke',\n                onChange: function (val) {\n                    setSize(val);\n                    p.onSizeChange(brush.getSize());\n                },\n                curve: brushInterface.sizeSlider.curve,\n                formatFunc: function (v) {\n                    v *= 2;\n                    return v < 5 ? (Math.round(v * 10) / 10) : Math.round(v);\n                }\n            });\n            opacitySlider = new KlSlider({\n                label: LANG('opacity'),\n                width: 250,\n                height: 30,\n                min: brushInterface.opacitySlider.min,\n                max: brushInterface.opacitySlider.max,\n                initValue: brush.getOpacity(),\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brush.setOpacity(val);\n                    p.onOpacityChange(val);\n                },\n                formatFunc: function(v) {\n                    return Math.round(v * 100);\n                }\n            });\n\n            BB.css(opacitySlider.getElement(), {\n                marginTop: '10px',\n            });\n\n            let eraserToggle = new Checkbox({\n                init: brush.getIsEraser(),\n                label: LANG('eraser'),\n                callback: function (b) {\n                    brush.setIsEraser(b);\n                },\n                css: {\n                    marginTop: '10px',\n                    marginLeft: '10px',\n                }\n            });\n\n            const lockAlphaToggle = new Checkbox({\n                init: brush.getLockAlpha(),\n                label: LANG('brush-lock-alpha'),\n                callback: function (b) {\n                    brush.setLockAlpha(b);\n                },\n                doHighlight: true,\n                title: LANG('brush-lock-alpha-title'),\n                css: {\n                    marginTop: '10px',\n                }\n            });\n\n            const toggleRow = BB.el({\n                css: {\n                    display: 'flex',\n                    marginTop: '10px',\n                }\n            });\n\n            const iconSize = 35;\n            const padding = 8;\n            const actualIconSize = iconSize - padding * 2;\n            const halfSize = actualIconSize / 2;\n\n            const modeOptions = new Options({\n                optionArr: [\n                    {\n                        id: 'fill',\n                        label: BB.createSvg({\n                            elementType: 'svg',\n                            width: iconSize + '',\n                            height: iconSize + '',\n                            childrenArr: [\n                                {\n                                    elementType: 'path',\n                                    fill: '#000',\n                                    style: `transform-origin: 0 0; transform: translate(-0.5px, -0.5px) scale(${actualIconSize}, ${actualIconSize}) translate(0.5px, 0.5px)`,\n                                    d: 'M 0,0 C 1.5,0 -0.5,1 1,1',\n                                },\n                            ],\n                        }),\n                        title: LANG('brush-chemy-fill'),\n                    },\n                    {\n                        id: 'stroke',\n                        label: BB.createSvg({\n                            elementType: 'svg',\n                            width: iconSize + '',\n                            height: iconSize + '',\n                            childrenArr: [\n                                {\n                                    elementType: 'path',\n                                    fill: 'none',\n                                    stroke: '#000',\n                                    style: `stroke-width: 0.12px; transform-origin: 0 0; transform: translate(-0.5px, -0.5px) scale(${actualIconSize}, ${actualIconSize}) translate(0.5px, 0.5px)`,\n                                    d: 'M 0,0 C 1.5,0 -0.5,1 1,1',\n                                },\n                            ],\n                        }),\n                        title: LANG('brush-chemy-stroke'),\n                    }\n                ],\n                initId: brush.getMode(),\n                onChange: (id: string): void => {\n                    brush.setMode(id as 'stroke' | 'fill');\n                    brushInterface.sizeSlider.isDisabled = brush.getMode() === 'fill';\n                    sizeSlider.setIsEnabled(!brushInterface.sizeSlider.isDisabled);\n                    sizeSlider.setValue(brush.getSize());\n                    p.onSizeChange(brush.getSize());\n                    p.onConfigChange();\n                }\n            });\n\n            const mirrorXToggle = new BoxToggle({\n                label: BB.createSvg({\n                    elementType: 'svg',\n                    width: iconSize + '',\n                    height: iconSize + '',\n                    childrenArr: [\n                        {\n                            elementType: 'path',\n                            fill: 'none',\n                            stroke: '#000',\n                            style: 'stroke-width: 1px',\n                            d: `M ${halfSize + padding},${padding} ${halfSize + padding},${actualIconSize + padding}`,\n                        },\n                    ]\n                }),\n                title: LANG('brush-chemy-mirror-x'),\n                init: brush.getXSymmetry(),\n                onChange: (b) => {\n                    brush.setXSymmetry(b);\n                },\n            });\n\n            const mirrorYToggle = new BoxToggle({\n                label: BB.createSvg({\n                    elementType: 'svg',\n                    width: iconSize + '',\n                    height: iconSize + '',\n                    childrenArr: [\n                        {\n                            elementType: 'path',\n                            fill: 'none',\n                            stroke: '#000',\n                            style: 'stroke-width: 1px',\n                            d: `M ${padding},${halfSize + padding} ${actualIconSize + padding},${halfSize + padding}`,\n                        },\n                    ]\n                }),\n                title: LANG('brush-chemy-mirror-y'),\n                init: brush.getYSymmetry(),\n                onChange: (b) => {\n                    brush.setYSymmetry(b);\n                },\n            });\n\n            const gradientToggle = new BoxToggle({\n                label: BB.createSvg({\n                    elementType: 'svg',\n                    width: iconSize + '',\n                    height: iconSize + '',\n                    childrenArr: [\n                        {\n                            elementType: 'defs',\n                            childrenArr: [\n                                {\n                                    elementType: 'linearGradient',\n                                    id: 'gradient',\n                                    x1: '0',\n                                    y1: '0',\n                                    x2: '0',\n                                    y2: '1',\n                                    childrenArr: [\n                                        {\n                                            elementType: 'stop',\n                                            offset: '0%',\n                                            'stop-color': 'rgba(0,0,0,0)',\n                                        },\n                                        {\n                                            elementType: 'stop',\n                                            offset: '100%',\n                                            'stop-color': 'rgba(0,0,0,1)',\n                                        }\n                                    ]\n                                }\n                            ]\n                        },\n                        {\n                            elementType: 'rect',\n                            fill: \"url('#gradient')\",\n                            x: '' + padding,\n                            y: '' + padding,\n                            width: '' + actualIconSize,\n                            height: '' + actualIconSize,\n                        },\n                    ]\n                }),\n                title: LANG('brush-chemy-gradient'),\n                init: brush.getGradient(),\n                onChange: (b) => {\n                    brush.setGradient(b);\n                },\n            });\n\n            BB.css(mirrorXToggle.getElement(), {\n                marginLeft: '10px',\n            });\n            {\n                const margin = {\n                    marginLeft: '4px',\n                };\n                BB.css(mirrorYToggle.getElement(), margin);\n                BB.css(gradientToggle.getElement(), margin);\n            }\n\n            toggleRow.append(\n                modeOptions.getElement(),\n                mirrorXToggle.getElement(),\n                mirrorYToggle.getElement(),\n                gradientToggle.getElement(),\n            );\n\n            div.append(\n                sizeSlider.getElement(),\n                opacitySlider.getElement(),\n                toggleRow,\n                BB.el({\n                    content: [\n                        lockAlphaToggle.getElement(),\n                        eraserToggle.getElement(),\n                    ],\n                    css: {\n                        display: 'flex',\n                    }\n                })\n            );\n        }\n\n        init();\n\n        this.increaseSize = function (f) {\n            if (!brush.getIsDrawing() && brush.getMode() === 'stroke') {\n                sizeSlider.increaseValue(f);\n            }\n        };\n        this.decreaseSize = function (f) {\n            if (!brush.getIsDrawing() && brush.getMode() === 'stroke') {\n                sizeSlider.decreaseValue(f);\n            }\n        };\n\n        this.getSize = function () {\n            return brush.getSize();\n        };\n        this.setSize = function(size) {\n            setSize(size);\n            sizeSlider.setValue(size);\n        };\n        this.getOpacity = function () {\n            return brush.getOpacity();\n        };\n        this.setOpacity = function(opacity) {\n            brush.setOpacity(opacity);\n            opacitySlider.setValue(opacity);\n        };\n\n        this.setColor = function (c) {\n            brush.setColor(c);\n        };\n        this.setContext = function (c) {\n            brush.setContext(c);\n        };\n        this.startLine = function (x, y, p) {\n            brush.startLine(x, y);\n        };\n        this.goLine = function (x, y, p, isCoalesced) {\n            brush.goLine(x, y);\n        };\n        this.endLine = function () {\n            brush.endLine();\n        };\n        this.getBrush = function () {\n            return brush;\n        };\n        this.isDrawing = function () {\n            return brush.getIsDrawing();\n        };\n        this.getElement = function () {\n            return div;\n        };\n    };\n\n    return brushInterface;\n})();","import {penBrushUi} from './pen-brush-ui';\nimport {blendBrushUi} from './blend-brush-ui';\nimport {sketchyBrushUi} from './sketchy-brush-ui';\nimport {pixelBrushUi} from './pixel-brush-ui';\nimport {eraserBrushUi} from './eraser-brush-ui';\nimport {smudgeBrushUi} from './smudge-brush-ui';\nimport {chemyBrushUi} from './chemy-brush-ui';\nimport {IBrushUi} from '../kl.types';\n\n/**\n * UI for brushes.\n * Each brush ui carries the brush with it.\n * So if you want to draw, you do it through the UI. should be changed sometime.\n */\n\nexport const brushesUI: {\n    [key: string]: IBrushUi;\n} = {\n    penBrush: penBrushUi,\n    blendBrush: blendBrushUi,\n    sketchyBrush: sketchyBrushUi,\n    pixelBrush: pixelBrushUi,\n    chemyBrush: chemyBrushUi,\n    smudgeBrush: smudgeBrushUi,\n    eraserBrush: eraserBrushUi,\n};\n","import {BB} from '../../../bb/bb';\nimport {Popup} from './popup';\nimport {LANG} from '../../../language/language';\n\nexport function showIframePopup(url, isEmbed) {\n    if (!isEmbed && (window.innerHeight < 500 || window.innerWidth < 700)) {\n        window.open(url);\n        return;\n    }\n\n    let iframe = BB.el({\n        tagName: 'iframe',\n        custom: {\n            src: url,\n        },\n        css: {\n            width: '100%',\n            height: '100%'\n        }\n    }) as HTMLIFrameElement;\n    let titleEl = BB.el({});\n\n    let linkEl;\n    if (!isEmbed) {\n        linkEl = BB.el({\n            tagName: 'a',\n            parent: titleEl,\n            content: LANG('modal-new-tab'),\n            custom: {\n                href: 'help',\n                target: '_blank',\n            },\n            onClick: function() {\n                popup.close();\n            }\n        }) as HTMLAnchorElement;\n        iframe.onload = function() {\n            BB.setAttributes(linkEl, {\n                href: '' + iframe.contentWindow.location,\n            });\n        };\n    }\n\n\n    let popup = new Popup({\n        title: titleEl,\n        content: iframe,\n        width: 880,\n        isMaxHeight: true,\n        onClose: () => {\n            if (linkEl) {\n                BB.destroyEl(linkEl);\n            }\n        }\n    });\n\n}","import {BB} from '../../../bb/bb';\n\nexport class RadioList {\n\n    el: HTMLDivElement;\n    inputs: HTMLInputElement[] = [];\n\n    constructor(p: {\n        name: string;\n        init?: string;\n        items: {\n            label: string;\n            value: string;\n        }[],\n        ignoreFocus?: boolean; // default false\n    }) {\n        this.el = BB.el({\n            className: 'kl-radio'\n        }) as HTMLDivElement;\n\n        p.items.forEach(item => {\n            let label = BB.el({\n                tagName: 'label'\n            });\n            let input = BB.el({\n                tagName: 'input',\n                parent: label,\n                custom: {\n                    name: p.name,\n                    value: item.value,\n                    type: 'radio',\n                }\n            }) as HTMLInputElement;\n            if (p.ignoreFocus) {\n                input.setAttribute('data-ignore-focus', 'true');\n            }\n            if (p.init === item.value) {\n                input.checked = true;\n            }\n            label.append(item.label);\n            this.el.append(label);\n            this.inputs.push(input);\n        });\n    }\n\n\n    getValue(): string {\n        for (let i = 0; i < this.inputs.length; i++) {\n            if (this.inputs[i].checked) {\n                return this.inputs[i].value;\n            }\n        }\n        return null;\n    }\n\n    getElement() {\n        return this.el;\n    }\n\n}","import {BB} from '../../../bb/bb';\n\n// @ts-ignore\nimport removeLayerImg from 'url:~/src/app/img/ui/remove-layer.svg';\nimport {IKlProject} from '../../kl.types';\nimport {showIframePopup} from '../modals/show-iframe-popup';\nimport {SaveReminder} from './save-reminder';\nimport {ProjectStore} from '../../storage/project-store';\nimport {KL} from '../../kl';\nimport {LANG} from '../../../language/language';\n\nexport class BrowserStorageUi {\n\n    private previewEl: HTMLDivElement;\n    private ageEl: HTMLDivElement;\n    private storeEl: HTMLButtonElement;\n    private clearEl: HTMLButtonElement;\n\n    private timestamp: number;\n\n    private updateAge() {\n        if (!this.timestamp) {\n            return;\n        }\n        let age = new Date().getTime() - this.timestamp;\n        let ageStr;\n        age = Math.floor(age / 1000 / 60);\n        ageStr = LANG('file-storage-min-ago').replace('{x}', '' + age);\n        if (age > 60) {\n            age = Math.floor(age / 60);\n            ageStr = LANG('file-storage-hours-ago').replace('{x}', '' + age);\n            if (age > 24) {\n                age = Math.floor(age / 24);\n                ageStr = LANG('file-storage-days-ago').replace('{x}', '' + age);\n                if (age > 31) {\n                    ageStr = LANG('file-storage-month-ago');\n                }\n            }\n        }\n        this.ageEl.textContent = ageStr;\n    }\n\n    private resetButtons() {\n        if (this.timestamp) {\n            this.storeEl.textContent = LANG('file-storage-overwrite');\n            this.storeEl.disabled = false;\n            this.clearEl.disabled = false;\n        } else {\n            this.storeEl.textContent = LANG('file-storage-store');\n            this.storeEl.disabled = false;\n            this.clearEl.disabled = true;\n        }\n    }\n\n    private updateThumb(timestamp?: number, thumbnail?: HTMLImageElement | HTMLCanvasElement) {\n        this.timestamp = timestamp;\n        if (this.timestamp) {\n            BB.css(thumbnail, {\n                display: 'block',\n                maxWidth: 'calc(100% - 2px)',\n                maxHeight: 'calc(100% - 2px)',\n                margin: '0 auto',\n                background: \"url('\" + BB.createCheckerCanvas(4).toDataURL('image/png') + \"')\",\n                boxShadow: '0 0 0 1px #aaa',\n                pointerEvents: 'none',\n            });\n            this.previewEl.innerHTML = '';\n            this.updateAge();\n            this.previewEl.append(thumbnail, this.ageEl);\n        } else {\n            this.previewEl.innerHTML = LANG('file-storage-empty');\n        }\n        this.resetButtons();\n    }\n\n    private async store() {\n        this.storeEl.textContent = LANG('file-storage-storing');\n        this.storeEl.disabled = true;\n        this.clearEl.disabled = true;\n        await new Promise((resolve) => {\n            setTimeout(() => resolve(null), 20);\n        });\n        try {\n            await this.projectStore.store(this.getProject());\n            this.saveReminder.reset();\n        } catch (e) {\n            this.resetButtons();\n            KL.popup({\n                target: this.klRootEl,\n                type: 'error',\n                message: [\n                    `${LANG('file-storage-failed-1')}<ul>`,\n                    `<li>${LANG('file-storage-failed-2')}</li>`,\n                    `<li>${LANG('file-storage-failed-3')}</li>`,\n                    `<li>${LANG('file-storage-failed-4')}</li>`,\n                    `</ul>`,\n                ].join(''),\n                buttons: ['Ok'],\n            });\n            setTimeout(() => {\n                throw new Error('storage-ui: failed to store browser storage, ' + e);\n            }, 0);\n        }\n    }\n\n    private async clear() {\n        this.storeEl.disabled = true;\n        this.clearEl.disabled = true;\n        try {\n            await this.projectStore.clear();\n        } catch (e) {\n            this.resetButtons();\n            KL.popup({\n                target: this.klRootEl,\n                type: 'error',\n                message: LANG('file-storage-failed-clear'),\n                buttons: ['Ok'],\n            });\n            setTimeout(() => {\n                throw new Error('storage-ui: failed to clear browser storage, ' + e);\n            }, 0);\n        }\n    }\n\n    element: HTMLDivElement;\n\n    constructor (\n        private projectStore: ProjectStore,\n        private getProject: () => IKlProject,\n        private saveReminder: SaveReminder,\n        private klRootEl: HTMLDivElement,\n    ) {\n        this.element = BB.el({\n            css: {\n                display: 'grid',\n                gridTemplateColumns: '1fr 0fr',\n                gridTemplateRows: '0fr 0fr 0fr',\n                gap: '0 0',\n                gridTemplateAreas: '\"title title\" \"preview store\" \"preview clear\"',\n            }\n        }) as HTMLDivElement;\n\n\n        const title = BB.el({\n            parent: this.element,\n            content: LANG('file-storage'),\n            css: {\n                gridArea: 'title',\n                display: 'flex',\n                margin: '-5px 0',\n                //background: '#f00',\n            }\n        });\n\n        const infoEl = BB.el({\n            parent: title,\n            content: '?',\n            title: LANG('file-storage-about'),\n            css: {\n                cursor: 'pointer',\n                marginLeft: '5px',\n                width: '19px',\n                height: '19px',\n                borderRadius: '100%',\n                textAlign: 'center',\n                lineHeight: '19px',\n                fontWeight: 'bold',\n                boxShadow: 'inset 0 0 0 1px #000',\n            },\n            onClick: () => {\n                showIframePopup('./help/#help-browser-storage', false);\n            }\n        });\n\n        if (this.projectStore.isBroken()) {\n            BB.el({\n                parent: this.element,\n                content: \"🔴 \" + LANG('file-storage-cant-access'),\n                css: {\n                    marginTop: '10px',\n                }\n            });\n            return;\n        }\n\n        this.previewEl = BB.el({\n            parent: this.element,\n            title: LANG('file-storage-thumb-title'),\n            css: {\n                gridArea: 'preview',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                marginTop: '10px',\n                position: 'relative',\n                boxShadow: 'inset 0 0 0 1px #aaa',\n                background: '#cdcdcd',\n                color: '#545454',\n                colorScheme: 'only light',\n            }\n        }) as HTMLDivElement;\n        this.ageEl = BB.el({\n            css: {\n                position: 'absolute',\n                right: '0',\n                bottom: '0',\n                width: '100%',\n                textAlign: 'center',\n                background: 'rgba(0,0,0,0.7)',\n                color: '#fff',\n                textSize: '13px',\n            }\n        }) as HTMLDivElement;\n        this.storeEl = BB.el({\n            parent: this.element,\n            tagName: 'button',\n            className: 'gridButton',\n            content: LANG('file-storage-store'),\n            css: {\n                gridArea: 'store',\n                //background: '#00f',\n            },\n            custom: {\n                tabIndex: -1,\n            },\n            onClick: () => this.store(),\n        }) as HTMLButtonElement;\n        this.storeEl.tabIndex = -1;\n        this.clearEl = BB.el({\n            parent: this.element,\n            tagName: 'button',\n            className: 'gridButton',\n            content: '<img src=\"' + removeLayerImg + '\" height=\"20\"/> ' + LANG('file-storage-clear'),\n            css: {\n                gridArea: 'clear',\n                //background: '#ff0',\n            },\n            custom: {\n                tabIndex: -1,\n            },\n            onClick: () => this.clear(),\n        }) as HTMLButtonElement;\n\n        this.projectStore.subscribe({\n            onUpdate: (timestamp, thumbnail) => {\n                this.updateThumb(timestamp, thumbnail);\n            },\n        });\n\n        setInterval(() => this.updateAge(), 1000 * 60);\n\n        (async () => {\n            try {\n                const readResult = await this.projectStore.read();\n                if (readResult) {\n                    this.updateThumb(readResult.timestamp, readResult.thumbnail);\n                } else {\n                    this.updateThumb();\n                }\n            } catch (e) {\n                setTimeout(() => {\n                    throw new Error('storage-ui: failed initial read browser storage, ' + e);\n                }, 0);\n            }\n        })();\n    }\n\n\n    getElement() {\n        return this.element;\n    }\n\n    show () {\n        // todo\n    }\n\n    hide () {\n        // todo\n    }\n}","\nexport function base64ToBlob(base64Str: string): Blob {\n    let parts = base64Str.match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/);\n    let binStr = atob(parts[3]);\n    let buf = new ArrayBuffer(binStr.length);\n    let view = new Uint8Array(buf);\n    for (let i = 0; i < view.length; i++) {\n        view[i] = binStr.charCodeAt(i);\n    }\n    return new Blob([view], {'type': parts[1]});\n}","import {IKlProject, IKlStorageProject} from '../kl.types';\nimport {BB} from '../../bb/bb';\nimport {drawProject} from '../canvas/draw-project';\nimport {base64ToBlob} from './base-64-to-blob';\n\n\nconst thumbSize = 240;\n\nfunction loadImage(blob: Blob): Promise<HTMLImageElement> {\n    return new Promise<HTMLImageElement>((resolve, reject) => {\n        const im = new Image();\n        try {\n            im.src = BB.imageBlobToUrl(blob);\n        } catch (e) {\n            reject('imageBlobToUrl, ' + e.message);\n            return;\n        }\n        im.onload = () => {\n            resolve(im);\n        }\n        im.onabort = function () {\n            reject('layer image failed loading');\n        };\n        im.onerror = function () {\n            reject('layer image failed loading');\n        };\n    });\n}\n\n/**\n * for:\n * - preparing project to be stored in ProjectStore\n * - reading a project that came out of the ProjectStore\n */\nexport class ProjectConverter {\n\n    private static createThumbnail(project): HTMLCanvasElement {\n        const size = BB.fitInto(project.width, project.height, thumbSize, thumbSize);\n        const factor = size.width / project.width;\n        return drawProject(project, factor);\n    }\n\n    static createStorageProject(project: IKlProject): IKlStorageProject {\n        return {\n            id: 1,\n            timestamp: new Date().getTime(),\n            thumbnail: base64ToBlob(ProjectConverter.createThumbnail(project).toDataURL('image/png')),\n            width: project.width,\n            height: project.height,\n            layers: project.layers.map(item => {\n                let blob;\n                if (item.image instanceof HTMLCanvasElement) {\n                    blob = base64ToBlob((item.image as HTMLCanvasElement).toDataURL('image/png'));\n                } else {\n                    // todo image\n                    throw new Error('Not implemented');\n                }\n                return {\n                    name: item.name,\n                    opacity: item.opacity,\n                    mixModeStr: item.mixModeStr,\n                    blob,\n                }\n            }),\n        };\n    }\n\n    static async readStorageProject(storageProject: IKlStorageProject): Promise<{\n        project: IKlProject,\n        timestamp: number,\n        thumbnail: HTMLImageElement | HTMLCanvasElement\n    }> {\n        const project: IKlProject = {\n            width: storageProject.width,\n            height: storageProject.height,\n            layers: (await Promise.all(storageProject.layers.map(layer => loadImage(layer.blob))))\n                .map((image, i) => {\n                    return {\n                        name: storageProject.layers[i].name,\n                        opacity: storageProject.layers[i].opacity,\n                        mixModeStr: storageProject.layers[i].mixModeStr,\n                        image,\n                    };\n                }),\n        };\n\n        let thumbnail;\n        if (storageProject.thumbnail) {\n            thumbnail = await loadImage(storageProject.thumbnail);\n        } else {\n            thumbnail = ProjectConverter.createThumbnail(project);\n        }\n\n        return {\n            project: project,\n            timestamp: storageProject.timestamp,\n            thumbnail: thumbnail,\n        };\n    }\n\n}","import {IKlProject, IKlStorageProject} from '../kl.types';\nimport {ProjectConverter} from './project-converter';\nimport {clear, getKlProjectObj, storeKlProjectObj} from './indexed-db';\nimport {LocalStorage} from '../../bb/base/local-storage';\n\n\nexport interface IProjectStoreListener {\n    onUpdate: (timestamp?: number, thumbnail?: HTMLImageElement | HTMLCanvasElement) => void,\n}\n\nfunction makeAsync(func): Promise<any> {\n    return new Promise((resolve, reject) => {\n        func(resolve, reject);\n    });\n}\n\n/**\n * simplified interface for storing projects into browser storage\n */\nexport class ProjectStore {\n\n    private listeners: IProjectStoreListener[] = [];\n    private accessHasFailed: boolean = false;\n\n    async lowLevelStore (project: IKlStorageProject): Promise<any> {\n        await new Promise((resolve, reject) => {\n            storeKlProjectObj(project, resolve, reject);\n        });\n    }\n\n    async lowLevelRead (): Promise<IKlStorageProject> {\n        return await makeAsync(getKlProjectObj) as IKlStorageProject;\n    }\n\n    async lowLevelClear (): Promise<any> {\n        await makeAsync(clear);\n    }\n\n\n\n    private emit(timestamp?: number, thumbnail?: HTMLImageElement | HTMLCanvasElement) {\n        this.listeners.forEach(item => {\n            item.onUpdate(timestamp, thumbnail);\n        });\n    }\n\n    private updateTimestamp() {\n        LocalStorage.setItem('indexedDbUpdatedAt', '' + new Date().getTime());\n    }\n\n    // --- public ---\n\n    constructor () {\n        window.addEventListener('storage', (e) => {\n            if (e.key !== 'indexedDbUpdatedAt' || this.listeners.length === 0) {\n                return;\n            }\n            try {\n                ( async () => {\n                    const readResult = await this.read();\n                    if (readResult) {\n                        this.emit(readResult.timestamp, readResult.thumbnail);\n                    } else {\n                        this.emit();\n                    }\n                })();\n            } catch (e) {\n                if (e.message === 'db-error') {\n                    this.accessHasFailed = true;\n                }\n            }\n\n        });\n    }\n\n    async read(): Promise<{\n        project: IKlProject,\n        timestamp: number,\n        thumbnail: HTMLImageElement | HTMLCanvasElement\n    } | null> {\n        let storageProject;\n        try {\n            storageProject = await this.lowLevelRead();\n        } catch (e) {\n            this.accessHasFailed = true;\n            throw new Error('db-error');\n        }\n        if (!storageProject) {\n            return null;\n        }\n        let result;\n        try {\n            result = await ProjectConverter.readStorageProject(storageProject);\n        } catch (e) {\n            throw new Error('format-error');\n        }\n        return result;\n    }\n\n    async store(project: IKlProject): Promise<void> {\n        try {\n            const storageProject = ProjectConverter.createStorageProject(project);\n            await this.lowLevelStore(storageProject);\n        } catch (e) {\n            this.accessHasFailed = true;\n            throw new Error('db-error');\n        }\n        {\n            // immediately test if it can be read\n            const storageProject = await this.lowLevelRead();\n            let readResult = null;\n            try {\n                readResult = await ProjectConverter.readStorageProject(storageProject);\n            } catch (e) {\n                await this.lowLevelClear();\n                this.updateTimestamp();\n                setTimeout(() => this.emit(), 0);\n                throw new Error('format-error');\n            }\n            this.updateTimestamp();\n            setTimeout(() => this.emit(readResult.timestamp, readResult.thumbnail), 0);\n        }\n    }\n\n    async clear(): Promise<void> {\n        await this.lowLevelClear();\n        this.updateTimestamp();\n        setTimeout(() => this.emit(), 0);\n    }\n\n    subscribe(listener: IProjectStoreListener) {\n        if (this.listeners.includes(listener)) {\n            return;\n        }\n        this.listeners.push(listener);\n    }\n\n    unsubscribe(listener: IProjectStoreListener) {\n        for (let i = 0; i < this.listeners.length; i++) {\n            if (listener === this.listeners[i]) {\n                this.listeners.splice(i, 1);\n                return;\n            }\n        }\n    }\n\n    isBroken() {\n        return this.accessHasFailed;\n    }\n\n}","import {BB} from '../../../bb/bb';\nimport {KL} from '../../kl';\n// @ts-ignore\nimport newImageImg from 'url:~/src/app/img/ui/new-image.svg';\n// @ts-ignore\nimport exportImg from 'url:~/src/app/img/ui/export.svg';\n// @ts-ignore\nimport shareImg from 'url:~/src/app/img/ui/share.svg';\n// @ts-ignore\nimport uploadImg from 'url:~/src/app/img/ui/upload.svg';\n// @ts-ignore\nimport importImg from 'url:~/src/app/img/ui/import.svg';\n// @ts-ignore\nimport copyImg from 'url:~/src/app/img/ui/copy.svg';\nimport {BrowserStorageUi} from '../components/browser-storage-ui';\nimport {IKlProject} from '../../kl.types';\nimport {SaveReminder} from '../components/save-reminder';\nimport {ProjectStore} from '../../storage/project-store';\nimport {LANG} from '../../../language/language';\n\nexport type exportType = 'png' | 'layers' | 'psd';\n\n\n\n\n\n\n\n\nexport class FileTab {\n\n    private readonly div: HTMLDivElement;\n    private importButton: HTMLInputElement;\n    private fileBrowserStorage: BrowserStorageUi;\n\n    constructor(\n        klRootEl,\n        projectStore: ProjectStore,\n        getProject: () => IKlProject,\n        private exportType,\n        onExportTypeChange,\n        onFileSelect,\n        onSaveImageToComputer,\n        onNewImage,\n        onShareImage,\n        onUpload,\n        onCopyToClipboard,\n        saveReminder: SaveReminder,\n    ) {\n        const _this = this;\n        this.div = document.createElement(\"div\");\n\n        const asyncCreation = () => {\n            let filemenu = document.createElement(\"div\");\n            let newButton = document.createElement(\"button\");\n            let saveButton = document.createElement(\"button\");\n          \n         \n\n            newButton.style.cssFloat = 'left';\n            BB.css(saveButton, {\n                \n                cssFloat: 'left',\n                clear: 'both',\n            });\n          \n\n            newButton.tabIndex = -1;\n            saveButton.tabIndex = -1;\n    \n\n            newButton.innerHTML = `<img src='${newImageImg}' alt='icon' height='20'/>${LANG('file-new')}`;\n            saveButton.innerHTML = `<img src='${exportImg}' alt='icon' height='20'/>${LANG('file-save')}`;\n            newButton.className = \"gridButton\";\n            saveButton.className = \"gridButton\";\n\n\n            this.importButton = document.createElement(\"input\");\n            this.importButton.tabIndex = -1;\n            this.importButton.type = \"file\";\n            this.importButton.multiple = true;\n            this.importButton.accept = \"image\";\n            (this.importButton as any).size = \"71\";\n            this.importButton.textContent = \"Import\";\n            let importWrapper: any = this.importButton;\n\n            function createImportButton() {\n                importWrapper = document.createElement(\"div\");\n                importWrapper.className = \"gridButton\";\n                importWrapper.style.position = \"relative\";\n                importWrapper.style.cursor = \"pointer\";\n                importWrapper.style.cssFloat = \"left\";\n\n                let innerMask = document.createElement(\"div\");\n                innerMask.style.width = \"120px\";\n                innerMask.style.height = \"28px\";\n                innerMask.style.overflow = \"hidden\";\n                innerMask.style.cursor = \"pointer\";\n                innerMask.style.position = \"relative\";\n\n                importWrapper.appendChild(innerMask);\n                innerMask.appendChild(_this.importButton);\n\n                let importFakeButton = document.createElement(\"button\");\n                importFakeButton.innerHTML = \"<img style='float:left' height='20' src='\" + importImg + \"' alt='icon'/>\" + LANG('file-import');\n                importFakeButton.tabIndex = -1;\n\n                BB.css(importFakeButton, {\n               \n                    width: \"120px\",\n                    display: \"box\",\n                    position: \"absolute\",\n                    left: '0',\n                    top: '0',\n                    cursor: \"pointer\"\n                });\n                BB.css(_this.importButton, {\n                    display: 'none'\n                });\n                importWrapper.appendChild(importFakeButton);\n\n                importFakeButton.onclick = function() {\n                    _this.importButton.click();\n                }\n            }\n\n            createImportButton();\n\n            this.importButton.onchange = function (e) {\n                onFileSelect(_this.importButton.files, 'default');\n                _this.importButton.value = \"\";\n\n            };\n\n\n            // --- export filetype dropdown ---\n            let exportTypeWrapper;\n            let exportTypeSelect;\n            {\n                exportTypeWrapper = BB.el({\n                    css: {\n                        display:'none',\n                        fontSize: '15px',\n                        marginLeft: '10px',\n                        marginTop: '10px',\n                        cssFloat: 'left',\n                        width: 'calc(50% - 15px)',\n                        height: '30px'\n                    }\n                });\n                exportTypeSelect = new KL.Select({\n                    optionArr: [\n                        ['png', LANG('file-save-png')],\n                        ['psd', LANG('file-save-psd')],\n                        ['layers', LANG('file-save-layers')],\n                    ],\n                    initValue: exportType,\n                    onChange: function(val) {\n                        exportType = val;\n                        onExportTypeChange(exportType);\n                        onSaveImageToComputer();\n                    }\n                });\n                BB.css(exportTypeSelect.getElement(), {\n                    width: '120px',\n                    height: '30px'\n                });\n                exportTypeWrapper.appendChild(exportTypeSelect.getElement());\n\n            }\n\n\n\n            newButton.onclick = onNewImage;\n            saveButton.onclick = function () {\n                onSaveImageToComputer();\n            };\n       \n       \n\n            let saveNote = document.createElement(\"div\");\n            saveNote.textContent = \"⚠️ \" + LANG('file-no-autosave');\n            BB.css(saveNote, {\n                textAlign: \"center\",\n                marginTop: \"10px\",\n                background: \"rgb(243, 243, 161)\",\n                padding: \"5px 0px\",\n                color: 'rgba(0,0,0,0.65)',\n                fontSize: '15px',\n            });\n\n            function createSpacer() {\n                let el = document.createElement(\"div\");\n                let clearer = document.createElement(\"div\");\n                let line = document.createElement(\"div\");\n                el.appendChild(clearer);\n                el.appendChild(line);\n                BB.css(clearer, {\n                    clear: 'both'\n                });\n                BB.css(line, {\n                    display:'none',\n                    marginLeft: \"10px\",\n                    marginRight: \"10px\",\n                    marginTop: \"10px\",\n                    borderBottom: \"1px solid rgba(0,0,0,0.2)\",\n                    clear: 'both'\n                });\n                return el;\n            }\n\n            _this.fileBrowserStorage = new BrowserStorageUi(projectStore, getProject, saveReminder, klRootEl);\n            BB.css(_this.fileBrowserStorage.getElement(), {\n                //background: 'red',\n                display:'none',\n                margin: '10px',\n            });\n\n\n            //actual structure\n            BB.append(filemenu, [\n                saveNote,\n                newButton,\n                importWrapper,\n                BB.el({css: {clear: 'both'}}),\n\n                saveButton,\n                exportTypeWrapper,\n                BB.el({css: {clear: 'both'}}),\n\n              \n                BB.el({css: {clear: 'both'}}),\n\n                createSpacer(),\n                _this.fileBrowserStorage.getElement(),\n                createSpacer(),\n             \n            ]);\n\n            this.div.appendChild(filemenu);\n        };\n\n        setTimeout(asyncCreation, 1);\n    }\n\n    refresh() {\n    }\n\n    getElement() {\n        return this.div;\n    }\n\n    setIsVisible(isVisible: boolean) {\n        if (isVisible) {\n            this.refresh();\n        }\n    }\n\n    triggerImport() {\n        this.importButton.click();\n    }\n}\n","import {BB} from '../../../bb/bb';\nimport {KL} from '../../kl';\nimport {klHistory} from '../../history/kl-history';\nimport {IKeyString} from '../../../bb/bb.types';\nimport {StatusOverlay} from '../components/status-overlay';\nimport {KlCanvasWorkspace} from '../../canvas-ui/kl-canvas-workspace';\nimport {KlCanvas} from '../../canvas/kl-canvas';\nimport {LANG} from '../../../language/language';\n\n\nexport class FilterTab {\n\n    private readonly div: HTMLDivElement;\n    private isInit = false;\n\n    constructor (\n        private klRootEl,\n        private klColorSlider,\n        private layerManager,\n        private setCurrentLayer,\n        private klCanvasWorkspace: KlCanvasWorkspace,\n        private handUi,\n        private getCurrentColor,\n        private getKlMaxCanvasSize,\n        private getKlCanvas: () => KlCanvas,\n        private getCurrentLayerCtx,\n        private isEmbed: boolean,\n        private statusOverlay: StatusOverlay,\n    ) {\n        this.div = document.createElement(\"div\");\n    }\n\n    private init() {\n        const _this = this;\n        let hasWebGl = BB.hasWebGl();\n        let filters = KL.filterLib;\n        let buttons = [];\n\n        BB.BbLog.emit({\n            type: 'init-filters',\n        });\n\n        if (!KL.filterLibStatus.isLoaded) {\n            throw new Error('filters not loaded');\n        }\n\n        function createButton(filterKey, filterArr) {\n            let button = document.createElement(\"button\");\n            let buttonLabel = filterArr[filterKey].buttonLabel ? filterArr[filterKey].buttonLabel : filterArr[filterKey].name;\n            let im = '<img height=\"20\" width=\"18\" src=\"' + filterArr[filterKey].icon + '\" alt=\"icon\" />';\n            button.innerHTML = im + buttonLabel;\n            button.className = \"gridButton\";\n            BB.css(button, {\n                lineHeight: '20px',\n                fontSize: '12px',\n            });\n            button.tabIndex = -1;\n            button.onclick = function () {\n\n                function finishedDialog(result, filterDialog) {\n                    if (result == \"Cancel\") {\n                        if (filterDialog.destroy) {\n                            filterDialog.destroy();\n                        }\n                        return;\n                    }\n                    let input;\n                    try {\n                        input = filterDialog.getInput(); // also destroys\n                    } catch (e) {\n                        if (e.message.indexOf('.getInput is not a function') !== -1) {\n                            throw 'filterDialog.getInput is not a function, filter: ' + filterArr[filterKey].name;\n                        } else {\n                            throw e;\n                        }\n                    }\n                    applyFilter(input);\n                }\n\n                if (!('apply' in filterArr[filterKey])) {\n                    alert('Application not fully loaded');\n                    return;\n                }\n\n                function applyFilter(input) {\n                    let filterResult = filterArr[filterKey].apply({\n                        context: _this.getCurrentLayerCtx(),\n                        canvas: _this.getKlCanvas(),\n                        history: klHistory,\n                        input: input\n                    });\n                    if (filterResult === false) {\n                        alert(\"Couldn't apply the edit action\");\n                    }\n                    if (filterArr[filterKey].updateContext === true) {\n                        _this.setCurrentLayer(_this.getKlCanvas().getLayer(_this.layerManager.getSelected()));\n                    }\n                    if (filterArr[filterKey].updatePos === true) {\n                        _this.klCanvasWorkspace.resetView();\n                        _this.handUi.update(_this.klCanvasWorkspace.getScale(), _this.klCanvasWorkspace.getAngleDeg());\n                    }\n                    _this.layerManager.update();\n                }\n\n                if (filterArr[filterKey].isInstant){\n                    button.blur();\n                    applyFilter(null);\n                    _this.statusOverlay.out('\"' + filterArr[filterKey].name + '\" ' + LANG('filter-applied'), true);\n                } else {\n                    let secondaryColorRGB = _this.klColorSlider.getSecondaryRGB();\n                    let filterDialog = filterArr[filterKey].getDialog({\n                        context: _this.getCurrentLayerCtx(),\n                        canvas: _this.getKlCanvas(),\n                        maxWidth: _this.getKlMaxCanvasSize(),\n                        maxHeight: _this.getKlMaxCanvasSize(),\n                        currentColorRgb: {r: _this.getCurrentColor().r, g: _this.getCurrentColor().g, b: _this.getCurrentColor().b},\n                        secondaryColorRgb: {r: secondaryColorRGB.r, g: secondaryColorRGB.g, b: secondaryColorRGB.b}\n                    });\n\n                    if (!filterDialog) {\n                        return;\n                        //alert('Error: could not perform action');\n                        //throw('filter['+filterKey+'].getDialog returned '+filterDialog+'. ctx:' + currentLayerCtx + ' klCanvas:' + klCanvas);\n                    }\n\n                    let closefunc;\n                    filterDialog.errorCallback = function(e) {\n                        setTimeout(function() {\n                            alert('Error: could not perform action');\n                            throw e;\n                        }, 0);\n                        closefunc();\n                    };\n\n\n                    let style: IKeyString = {};\n                    if ('width' in filterDialog) {\n                        style.width = filterDialog.width + 'px'\n                    }\n\n                    KL.popup({\n                        target: _this.klRootEl,\n                        message: \"<b>\" + filterArr[filterKey].name + \"</b>\",\n                        div: filterDialog.element,\n                        style: style,\n                        buttons: [\"Ok\", \"Cancel\"],\n                        clickOnEnter: 'Ok',\n                        callback: function(result) {\n                            finishedDialog(result, filterDialog);\n                        },\n                        closefunc: function (func) {\n                            closefunc = func;\n                        }\n                    });\n                }\n            }\n            buttons[buttons.length] = button;\n            return button;\n        }\n\n        function createDisabledButton(filterKey, filterArr) {\n            if (!filterArr[filterKey].webgl && !filterArr[filterKey].ieFails) {\n                return;\n            }\n            if (filterArr[filterKey].ieFails && navigator.appName !== 'Microsoft Internet Explorer') {\n                return;\n            }\n            let buttonLabel = filterArr[filterKey].buttonLabel ? filterArr[filterKey].buttonLabel : filterArr[filterKey].name;\n            let button = document.createElement(\"button\");\n            let im = '<img style=\"opacity: 0.5\" src=\"img/' + filterArr[filterKey].icon + '\" />';\n            let name = filterArr[filterKey].name;\n            if (name.length > 11) {\n                name = \"<span style='font-size: 12px'>\" + buttonLabel + \"</span>\";\n            }\n            button.innerHTML = im + name;\n            button.className = \"gridButton\";\n            button.disabled = true;\n            return button;\n        }\n\n        function addGroup(groupArr, filterArr, targetEl) {\n            for (let filterKey in filterArr) {\n                if (filterArr.hasOwnProperty[filterKey] || !groupArr.includes(filterKey)) {\n                    continue;\n                }\n                if (_this.isEmbed && !filterArr[filterKey].inEmbed) {\n                    continue;\n                }\n                if ((filterArr[filterKey].webgl && hasWebGl)\n                    || (filterArr[filterKey].neededWithWebGL)\n                    || (!filterArr[filterKey].webgl && !hasWebGl)\n                    && !(filterArr[filterKey].ieFails && navigator.appName == 'Microsoft Internet Explorer')) {\n\n                    targetEl.appendChild(createButton(filterKey, filterArr));\n\n                } else {\n                    targetEl.appendChild(createDisabledButton(filterKey, filterArr));\n                    filterArr[filterKey] = undefined;\n                }\n            }\n        }\n\n        let groupA = [\n            'cropExtend',\n            'flip',\n            'glPerspective',\n            'resize',\n            'rotate',\n            'transform'\n        ];\n        let groupB = [];\n        for (let filterKey in filters) {\n            if (filters.hasOwnProperty[filterKey] || groupA.includes(filterKey)) {\n                continue;\n            }\n            groupB.push(filterKey);\n        }\n\n        addGroup(groupA, filters, _this.div);\n        let hrEl = document.createElement(\"div\");\n        hrEl.className = \"gridHr\";\n        _this.div.appendChild(hrEl);\n        addGroup(groupB, filters, _this.div);\n\n\n        if (!hasWebGl) {\n            let webglnote = BB.appendTextDiv(_this.div, \"Some actions are disabled because WebGL isn't working.\");\n            webglnote.style.margin = \"10px\";\n            BB.css(webglnote, {\n                fontSize: \"11px\",\n                color: \"#555\",\n                background: \"#ffe\",\n                padding: \"10px\",\n                borderRadius: \"10px\",\n                textAlign: \"center\"\n            });\n        }\n\n        this.isInit = true;\n    }\n\n    getElement() {\n        return this.div;\n    }\n\n    show() {\n        if (!this.isInit) {\n            this.init();\n        }\n        this.div.style.display = 'block';\n    }\n\n    hide() {\n        this.div.style.display = 'none';\n    }\n\n}","import {BB} from '../../../bb/bb';\nimport {KL} from '../../kl';\n// @ts-ignore\nimport loadingImg from 'url:~/src/app/img/ui/loading.gif';\nimport {SaveReminder} from '../components/save-reminder';\nimport {base64ToBlob} from '../../storage/base-64-to-blob';\nimport {KlCanvas} from '../../canvas/kl-canvas';\nimport {LANG} from '../../../language/language';\n\n\nasync function upload(canvas, title, description, type: 'png' | 'jpeg', imgurKey: string): Promise<{deletehash: string}> {\n    let img = base64ToBlob(canvas.toDataURL(\"image/\" + type));\n\n    let w = window.open();\n    let label = w.document.createElement(\"div\");\n    let gif = w.document.createElement(\"img\");\n    gif.src = loadingImg;\n    label.appendChild(gif);\n    BB.css(gif, {\n        filter: \"invert(1)\"\n    });\n    w.document.body.style.backgroundColor = \"#121211\";\n    w.document.body.style.backgroundImage = \"linear-gradient(#2b2b2b 0%, #121211 50%)\";\n    w.document.body.style.backgroundRepeat = \"no-repeat\";\n    let labelText = w.document.createElement(\"div\");\n    labelText.style.marginTop = \"10px\";\n    label.appendChild(labelText);\n    labelText.textContent = LANG('upload-uploading');\n\n    w.document.body.appendChild(label);\n    BB.css(label, {\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        marginTop: \"100px\",\n        fontFamily: \"Arial, sans-serif\",\n        fontSize: \"20px\",\n        textAlign: \"center\",\n        transition: \"opacity 0.3s ease-in-out\",\n        opacity: '0',\n        color: \"#ccc\"\n    });\n    setTimeout(function () {\n        label.style.opacity = '1';\n    }, 20);\n\n    let response;\n    try {\n        const formData = new FormData();\n        formData.append('title', title);\n        formData.append('description', description);\n        formData.append('image', img);\n        response = await fetch('https://api.imgur.com/3/image',  {\n            method: 'POST',\n            headers: {\n                Authorization: 'Client-ID ' + imgurKey,\n            },\n            body: formData\n        });\n\n    } catch (e) {\n        w.close();\n        throw new Error(e);\n    }\n    if (!response.ok) {\n        w.close();\n        throw new Error();\n    }\n    let data = (await response.json()).data;\n\n    w.location.href = (data as any).link.replace(/\\.(jpg|png)/, '');\n\n    return data;\n}\n\n\nexport function imgurUpload(klCanvas: KlCanvas, klRootEl, saveReminder: SaveReminder, imgurKey: string) {\n    if (!imgurKey) {\n        throw new Error('imgur key missing');\n    }\n\n    let inputTitle = document.createElement(\"input\");\n    inputTitle.type = \"text\";\n    inputTitle.value = LANG('upload-title-untitled');\n    let inputDescription = BB.el({\n        tagName: 'textarea',\n        custom: {\n            rows: 2,\n        },\n        css: {\n            width: '100%',\n            maxWidth: '100%',\n        },\n    }) as HTMLTextAreaElement;\n\n    let labelTitle = document.createElement(\"div\");\n    labelTitle.textContent = LANG('upload-name') + \":\";\n    let labelDescription = BB.el({\n        content: LANG('upload-caption') + ':',\n        css: {\n            marginTop: '10px',\n        }\n    });\n\n    let tos = document.createElement(\"div\");\n    tos.innerHTML = `<br/><a href=\"https://imgur.com/tos\" target=\"_blank\" rel=\"noopener noreferrer\">${LANG('upload-tos')}</a> ${LANG('upload-tos-2')}`;\n\n    const typeRadio = new KL.RadioList({\n        name: 'filetype',\n        init: 'jpeg',\n        items: [\n            { label: 'JPG', value: 'jpeg' },\n            { label: 'PNG', value: 'png' },\n        ],\n        ignoreFocus: true,\n    });\n    BB.css(typeRadio.getElement(), {\n        marginBottom: '10px',\n    });\n\n\n    let outDiv = document.createElement(\"div\");\n    let infoHint = document.createElement(\"div\");\n    infoHint.className = \"info-hint\";\n    infoHint.textContent = LANG('upload-link-notice');\n    outDiv.append(\n        infoHint,\n        typeRadio.getElement(),\n        labelTitle,\n        inputTitle,\n        labelDescription,\n        inputDescription,\n        tos\n    );\n    KL.popup({\n        target: klRootEl,\n        message: `<b>${LANG('upload-title')}</b>`,\n        type: \"upload\",\n        div: outDiv,\n        buttons: [LANG('upload-submit'), \"Cancel\"],\n        clickOnEnter: LANG('upload-submit'),\n        primaries: [LANG('upload-submit')],\n        autoFocus: LANG('upload-submit'),\n        callback: async function (val) {\n            if (val === LANG('upload-submit') || val === \"Yes\" || val === \"Ok\") {\n                try {\n                    const result = await upload(\n                        klCanvas.getCompleteCanvas(1),\n                        inputTitle.value,\n                        inputDescription.value,\n                        typeRadio.getValue() as 'png' | 'jpeg',\n                        imgurKey,\n                    );\n\n                    KL.popup({\n                        target: klRootEl,\n                        type: \"ok\",\n                        message: `<h3>${LANG('upload-success')}</h3><br>${LANG('upload-delete')}<br><a target='_blank' rel=\"noopener noreferrer\" href='https://imgur.com/delete/${result.deletehash}'>imgur.com/<b>delete</b>/${result.deletehash}</a><br><br>`,\n                        buttons: [\"Ok\"]\n                    });\n                    saveReminder.reset();\n\n                } catch(e) {\n                    KL.popup({\n                        target: klRootEl,\n                        type: \"error\",\n                        message: LANG('upload-failed'),\n                        buttons: [\"Ok\"]\n                    });\n                }\n            }\n        }\n    });\n}","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"iGeXe\");","import {BB} from '../../bb/bb';\n\nlet agPsdLazy;\nexport async function loadAgPsd() {\n    if (!agPsdLazy) {\n        agPsdLazy = await import('ag-psd');\n        BB.BbLog.emit({\n            type: 'loaded-agpsd',\n        });\n    }\n    return agPsdLazy;\n}","import {KL} from '../../kl';\nimport {BB} from '../../../bb/bb';\nimport {KlHistoryInterface} from '../../history/kl-history';\nimport {LANG} from '../../../language/language';\n\n/**\n * remind user of saving, keep user aware of save state\n */\nexport class SaveReminder {\n    private oldActionNumber: number = null;\n    private remindersShowed: number = 0;\n    private unsavedInterval;\n    private lastReminderResetAt: number;\n\n    constructor (\n        private history: KlHistoryInterface,\n        private showReminder: boolean,\n        private changeTitle: boolean,\n        private title: string = 'Klecks'\n    ) { }\n\n    init (): void {\n        if (this.oldActionNumber !== null) { // already initialized\n            return;\n        }\n        this.oldActionNumber = this.history.getActionNumber();\n\n        if (this.showReminder) {\n            setInterval(() => {\n                if (document.visibilityState !== 'visible') {\n                    return;\n                }\n\n                let reminderTimelimitMs = 1000 * 60 * 20; // 20 minutes\n\n                let actionNumber = this.history.getActionNumber();\n                //number of actions that were done since last reminder\n                let historyDist = Math.abs(actionNumber - this.oldActionNumber);\n\n                if (this.lastReminderResetAt + reminderTimelimitMs < (performance.now()) && historyDist >= 30) {\n                    this.reset(true);\n                    KL.showSaveReminderToast(this.remindersShowed++);\n                }\n            }, 1000 * 60);\n        }\n\n        // confirmation dialog when closing tab\n        function onBeforeUnload(e) {\n            e.preventDefault();\n            e.returnValue = '';\n        }\n\n        this.history.addListener(() => {\n            let actionNumber = this.history.getActionNumber();\n            if (this.oldActionNumber !== actionNumber) {\n                BB.setEventListener(window, 'onbeforeunload', onBeforeUnload);\n            } else {\n                BB.setEventListener(window, 'onbeforeunload', null);\n            }\n        });\n\n        if (this.changeTitle) {\n            document.addEventListener(\"visibilitychange\", () => {\n                if (document.visibilityState === 'visible') {\n                    document.title = this.title;\n                    clearInterval(this.unsavedInterval);\n                } else {\n                    let actionNumber = this.history.getActionNumber();\n                    if (this.oldActionNumber !== actionNumber) {\n                        document.title = LANG('unsaved') + ' - ' + this.title;\n                        let state = 0;\n                        this.unsavedInterval = setInterval(() => {\n                            state = (state + 1) % 2;\n                            if (state === 1) {\n                                document.title = LANG('unsaved') + ' · ' + this.title;\n                            } else {\n                                document.title = LANG('unsaved') + ' - ' + this.title;\n                            }\n                        }, 1000 * 60 * 3);\n                    }\n                }\n            });\n        }\n    }\n\n    reset (isSoft?: boolean): void {\n        if (this.oldActionNumber === null) { // not initialized\n            return;\n        }\n        if (!isSoft) {\n            this.remindersShowed = 0;\n        }\n        this.lastReminderResetAt = performance.now();\n        this.oldActionNumber = this.history.getActionNumber();\n        BB.setEventListener(window, 'onbeforeunload', null);\n    }\n}\n","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","import {BB} from '../../bb/bb';\nimport {KL} from '../kl';\nimport {saveAs} from 'file-saver';\nimport {KlCanvas} from '../canvas/kl-canvas';\n\nexport class SaveToComputer {\n\n    constructor(\n        private saveReminder,\n        private klRootEl,\n        private getExportType,\n        private getKlCanvas: () => KlCanvas,\n        private filenameBase: string,\n    ) {}\n\n    save() {\n        const _this = this;\n\n        _this.saveReminder.reset();\n\n\n        function saveImage(canvas, filename, mimeType) {\n            let parts = canvas.toDataURL(mimeType).match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/);\n            console.log(parts[3]);\n           taixuong(parts[3]);\n           download();\n        }\n\n        if (_this.getExportType() === 'png') {\n            let extension = 'png';\n            let mimeType = 'image/png';\n            let filename = BB.getDate() + this.filenameBase + \".\" + extension;\n            let fullCanvas = _this.getKlCanvas().getCompleteCanvas(1);\n\n            /*fullCanvas.toBlob(function(blob) {\n                if (blob === null) {\n                    throw 'save image error, blob is null';\n                }\n                saveAs(blob, filename);\n            }, mimetype);*/\n\n            //using old code, because saving somehow doesn't work for ipad before ios 13\n            //and it doesn't even throw an exception\n            try {\n                saveImage(fullCanvas, filename, mimeType);\n            } catch (error) { //fallback for old browsers\n                let im = new Image();\n                im.width = _this.getKlCanvas().getWidth();\n                im.height = _this.getKlCanvas().getHeight();\n                im.src = fullCanvas.toDataURL(mimeType);\n                KL.exportDialog(_this.klRootEl, im);\n            }\n        } else if (_this.getExportType() === 'layers') {\n            let extension = 'png';\n            let mimeType = 'image/png';\n            let fileBase = BB.getDate() + this.filenameBase;\n            let layerArr = _this.getKlCanvas().getLayersFast();\n            for (let i = 0; i < layerArr.length; i++) {\n                let item = layerArr[i];\n                let fnameArr = [\n                    fileBase,\n                    '_',\n                    ('' + (i + 1)).padStart(2, '0'),\n                    '_',\n                    item.name,\n                    '.',\n                    extension\n                ];\n                saveImage(item.canvas, fnameArr.join(''), mimeType);\n            }\n        } else if (_this.getExportType() === 'psd') {\n\n            let layerArr = _this.getKlCanvas().getLayersFast();\n\n            let psdConfig = {\n                width: _this.getKlCanvas().getWidth(),\n                height: _this.getKlCanvas().getHeight(),\n                children: [],\n                canvas: _this.getKlCanvas().getCompleteCanvas(1)\n            };\n            for (let i = 0; i < layerArr.length; i++) {\n                let item = layerArr[i];\n                psdConfig.children.push({\n                    name: item.name,\n                    opacity: item.opacity,\n                    canvas: item.canvas,\n                    blendMode: KL.PSD.blendKlToPsd(item.mixModeStr),\n                    left: 0,\n                    top: 0\n                });\n            }\n\n            KL.loadAgPsd().then((agPsdLazy) => {\n                let buffer = agPsdLazy.writePsdBuffer(psdConfig);\n                let blob = new Blob([buffer], { type: 'application/octet-stream' });\n                saveAs(blob, BB.getDate() + this.filenameBase + '.psd');\n            }).catch(() => {\n                alert('Error: failed to load PSD library');\n            });\n\n        }\n\n    }\n\n}","import {KL} from '../kl';\nimport {IHistoryBroadcast, IHistoryEntry, klHistory} from './kl-history';\nimport {KlCanvasWorkspace} from '../canvas-ui/kl-canvas-workspace';\nimport {IFilterApply, IInitState} from '../kl.types';\nimport {KlCanvas} from '../canvas/kl-canvas';\n\nexport class UndoRedoCatchup {\n\n    private doIgnore = false;\n\n    /**\n     * Prevent multiple undo / redo getting triggered at once.\n     * Might be confusing if main thread is choking.\n     */\n    private ignoreTest (): boolean {\n        if (this.doIgnore) {\n            return false;\n        }\n        this.doIgnore = true;\n        setTimeout(() => {\n            this.doIgnore = false;\n        }, 0);\n        return true;\n    }\n\n    // ---- public ----\n\n    constructor (\n        private brushUiObj,\n        private layerPreview,\n        private layerManager,\n        private handUi,\n        private klCanvasWorkspace: KlCanvasWorkspace,\n        private getInitState: () => IInitState,\n        private getKlCanvas: () => KlCanvas,\n        private getCurrentLayerCtx,\n        private setCurrentLayerCtx,\n        private getCurrentBrush,\n    ) { }\n\n    undo (): boolean {\n        if (!this.ignoreTest()) {\n            return false;\n        }\n\n        if (!klHistory.canUndo()) { // || workspace.isPainting()) {\n            return false;\n        }\n        const actions: IHistoryEntry[] = klHistory.undo();\n        klHistory.pause(true);\n        const initState: IInitState = this.getInitState();\n        const oldSize = {w: this.getKlCanvas().getWidth(), h: this.getKlCanvas().getHeight()};\n        this.getKlCanvas().copy(initState.canvas);\n        let layerIndex = initState.focus;\n        this.setCurrentLayerCtx(this.getKlCanvas().getLayerContext(layerIndex));\n        const brushes: any = {};\n        for (let b in KL.brushes) {\n            if (KL.brushes.hasOwnProperty(b)) {\n                brushes[b] = new KL.brushes[b]();\n                brushes[b].setContext(this.getCurrentLayerCtx());\n            }\n        }\n        brushes.SketchyBrush.setSeed(initState.brushes.SketchyBrush.getSeed());\n        for (let i = 0; i < actions.length; i++) {\n            ((i) => {\n                if (actions[i].tool[0] === \"brush\") {\n                    const b = brushes[actions[i].tool[1]];\n                    if (actions[i].actions) {\n                        for (let e = 0; e < actions[i].actions.length; e++) {\n                            const p = actions[i].actions[e].params;\n                            b[actions[i].actions[e].action].apply(b, p);\n                        }\n                    } else {\n                        const p = actions[i].params;\n                        b[actions[i].action].apply(b, p);\n                    }\n                } else if (actions[i].tool[0] === \"canvas\") {\n                    const p = actions[i].params;\n                    const id = this.getKlCanvas()[actions[i].action].apply(this.getKlCanvas(), p);\n                    if (typeof id === 'number') {\n                        layerIndex = id;\n                        this.setCurrentLayerCtx(this.getKlCanvas().getLayerContext(layerIndex));\n                        for (let b in brushes) {\n                            if (brushes.hasOwnProperty(b)) {\n                                brushes[b].setContext(this.getCurrentLayerCtx());\n                            }\n                        }\n                    }\n                } else if (actions[i].tool[0] === \"filter\") {\n                    const p = [{\n                        context: this.getCurrentLayerCtx(),\n                        canvas: this.getKlCanvas(),\n                        input: actions[i].params[0].input,\n                        history: new KL.DecoyKlHistory(),\n                    } as IFilterApply];\n                    KL.filterLib[actions[i].tool[1]][actions[i].action].apply(null, p);\n\n                } else if (actions[i].tool[0] === \"misc\" && actions[i].action === \"focusLayer\") {\n                    layerIndex = actions[i].params[0];\n                    this.setCurrentLayerCtx(this.getKlCanvas().getLayerContext(actions[i].params[0]));\n                    for (let b in brushes) {\n                        if (brushes.hasOwnProperty(b)) {\n                            brushes[b].setContext(this.getCurrentLayerCtx());\n                        }\n                    }\n                } else if (actions[i].tool[0] === \"misc\" && actions[i].action === \"importImage\") {\n                    const id = this.getKlCanvas().addLayer();\n                    if (typeof id === 'number') {\n                        layerIndex = id;\n                        if (actions[i].params[1]) {\n                            this.getKlCanvas().renameLayer(layerIndex, actions[i].params[1]);\n                        }\n                        this.setCurrentLayerCtx(this.getKlCanvas().getLayerContext(layerIndex));\n                        for (let b in brushes) {\n                            if (brushes.hasOwnProperty(b)) {\n                                brushes[b].setContext(this.getCurrentLayerCtx());\n                            }\n                        }\n                    }\n                    this.getCurrentLayerCtx().drawImage(actions[i].params[0], 0, 0);\n                }\n            })(i);\n        }\n        if (oldSize.w !== this.getKlCanvas().getWidth() || oldSize.h !== this.getKlCanvas().getHeight()) {\n            this.klCanvasWorkspace.resetView();\n            this.handUi.update(this.klCanvasWorkspace.getScale(), this.klCanvasWorkspace.getAngleDeg());\n        }\n        this.layerManager.update(layerIndex);\n        this.layerPreview.setLayer(this.getKlCanvas().getLayer(layerIndex));\n        this.brushUiObj.sketchyBrush.setSeed(brushes.SketchyBrush.getSeed());\n        this.getCurrentBrush().setContext(this.getCurrentLayerCtx());\n        this.klCanvasWorkspace.setLastDrawEvent(null);\n\n        klHistory.pause(false);\n        return true;\n    }\n\n    redo (): boolean {\n        if (!this.ignoreTest()) {\n            return false;\n        }\n\n        if (!klHistory.canRedo()) {\n            return false;\n        }\n        const actions = klHistory.redo();\n        klHistory.pause(true);\n        const oldSize = {w: this.getKlCanvas().getWidth(), h: this.getKlCanvas().getHeight()};\n        let layerIndex;\n        const brushes: any = {};\n        for (let b in KL.brushes) {\n            if (KL.brushes.hasOwnProperty(b)) {\n                brushes[b] = new KL.brushes[b]();\n                brushes[b].setContext(this.getCurrentLayerCtx());\n            }\n        }\n        brushes.SketchyBrush.setSeed(this.brushUiObj.sketchyBrush.getSeed());\n        for (let i = 0; i < actions.length; i++) {\n            ((i) => {\n                if (actions[i].tool[0] === \"brush\") {\n                    const b = brushes[actions[i].tool[1]];\n                    if (actions[i].actions) {\n                        for (let e = 0; e < actions[i].actions.length; e++) {\n                            const p = actions[i].actions[e].params;\n                            b[actions[i].actions[e].action].apply(b, p);\n                        }\n                    } else {\n                        const p = actions[i].params;\n                        b[actions[i].action].apply(b, p);\n                    }\n                } else if (actions[i].tool[0] === \"canvas\") {\n                    const p = actions[i].params;\n                    const id = this.getKlCanvas()[actions[i].action].apply(this.getKlCanvas(), p);\n                    if (typeof id === 'number') {\n                        layerIndex = id;\n                        this.setCurrentLayerCtx(this.getKlCanvas().getLayerContext(layerIndex));\n                        for (let b in brushes) {\n                            if (brushes.hasOwnProperty(b)) {\n                                brushes[b].setContext(this.getCurrentLayerCtx());\n                            }\n                        }\n                    }\n                } else if (actions[i].tool[0] === \"filter\") {\n                    const p = [{\n                        context: this.getCurrentLayerCtx(),\n                        canvas: this.getKlCanvas(),\n                        input: actions[i].params[0].input,\n                        history: new KL.DecoyKlHistory(),\n                    } as IFilterApply];\n                    KL.filterLib[actions[i].tool[1]][actions[i].action].apply(null, p);\n\n                } else if (actions[i].tool[0] === \"misc\" && actions[i].action === \"focusLayer\") {\n                    layerIndex = actions[i].params[0];\n                    this.setCurrentLayerCtx(this.getKlCanvas().getLayerContext(actions[i].params[0]));\n                    for (let b in brushes) {\n                        if (brushes.hasOwnProperty(b)) {\n                            brushes[b].setContext(this.getCurrentLayerCtx());\n                        }\n                    }\n                } else if (actions[i].tool[0] === \"misc\" && actions[i].action === \"importImage\") {\n                    const id = this.getKlCanvas().addLayer();\n                    if (typeof id === 'number') {\n                        layerIndex = id;\n                        if (actions[i].params[1]) {\n                            this.getKlCanvas().renameLayer(layerIndex, actions[i].params[1]);\n                        }\n                        this.setCurrentLayerCtx(this.getKlCanvas().getLayerContext(layerIndex));\n                        for (let b in brushes) {\n                            if (brushes.hasOwnProperty(b)) {\n                                brushes[b].setContext(this.getCurrentLayerCtx());\n                            }\n                        }\n                    }\n                    this.getCurrentLayerCtx().drawImage(actions[i].params[0], 0, 0);\n                }\n            })(i);\n        }\n\n        if (oldSize.w !== this.getKlCanvas().getWidth() || oldSize.h !== this.getKlCanvas().getHeight()) {\n            this.klCanvasWorkspace.resetView();\n            this.handUi.update(this.klCanvasWorkspace.getScale(), this.klCanvasWorkspace.getAngleDeg());\n        }\n        const currentLayerIndex = this.getKlCanvas().getLayerIndex(this.getCurrentLayerCtx().canvas);\n        this.layerManager.update(currentLayerIndex);\n        this.layerPreview.setLayer(this.getKlCanvas().getLayer(currentLayerIndex));\n        this.brushUiObj.sketchyBrush.setSeed(brushes.SketchyBrush.getSeed());\n        this.getCurrentBrush().setContext(this.getCurrentLayerCtx());\n        this.klCanvasWorkspace.setLastDrawEvent(null);\n        klHistory.pause(false);\n\n        return true;\n    }\n\n    catchup (logParam: IHistoryBroadcast | null): void {\n        // const start = performance.now();\n        //play catch up (the version that is a few steps behind)\n        if (logParam && logParam.bufferUpdate) {\n            const initState: IInitState = this.getInitState();\n\n            const brushes = initState.brushes;\n            const actions = [logParam.bufferUpdate];\n            let localCurrentLayerCtx = initState.canvas.getLayerContext(initState.focus);\n            const canvas = initState.canvas;\n            let layerIndex = initState.focus;\n            ((i) => {\n                if (actions[i].tool[0] === \"brush\") {\n                    let b = brushes[actions[i].tool[1]];\n                    if (actions[i].actions) {\n                        for (let e = 0; e < actions[i].actions.length; e++) {\n                            const p = actions[i].actions[e].params;\n                            b[actions[i].actions[e].action].apply(b, p);\n                        }\n                    } else {\n                        const p = actions[i].params;\n                        b[actions[i].action].apply(b, p);\n                    }\n                } else if (actions[i].tool[0] === \"canvas\") {\n                    const p = actions[i].params;\n                    const id = canvas[actions[i].action].apply(canvas, p);\n                    if (typeof id === 'number') {\n                        layerIndex = id;\n                        localCurrentLayerCtx = canvas.getLayerContext(layerIndex);\n                        for (let b in brushes) {\n                            if (brushes.hasOwnProperty(b)) {\n                                brushes[b].setContext(localCurrentLayerCtx);\n                            }\n                        }\n                    }\n                } else if (actions[i].tool[0] === \"filter\") {\n                    const p = [{\n                        context: localCurrentLayerCtx,\n                        canvas: canvas,\n                        input: actions[i].params[0].input,\n                        history: new KL.DecoyKlHistory(),\n                    } as IFilterApply];\n                    KL.filterLib[actions[i].tool[1]][actions[i].action].apply(null, p);\n\n                } else if (actions[i].tool[0] === \"misc\" && actions[i].action === \"focusLayer\") {\n                    layerIndex = actions[i].params[0];\n                    localCurrentLayerCtx = canvas.getLayerContext(actions[i].params[0]);\n                    for (let b in brushes) {\n                        if (brushes.hasOwnProperty(b)) {\n                            brushes[b].setContext(localCurrentLayerCtx);\n                        }\n                    }\n                } else if (actions[i].tool[0] === \"misc\" && actions[i].action === \"importImage\") {\n                    const id = canvas.addLayer();\n                    if (typeof id === 'number') {\n                        layerIndex = id;\n                        if (actions[i].params[1]) {\n                            this.getKlCanvas().renameLayer(layerIndex, actions[i].params[1]);\n                        }\n                        localCurrentLayerCtx = canvas.getLayerContext(layerIndex);\n                        for (let b in brushes) {\n                            if (brushes.hasOwnProperty(b)) {\n                                brushes[b].setContext(localCurrentLayerCtx);\n                            }\n                        }\n                    }\n                    localCurrentLayerCtx.drawImage(actions[i].params[0], 0, 0);\n                }\n            })(0);\n            initState.focus = layerIndex;\n        }\n        // console.log('catchup', performance.now() - start);\n    }\n\n\n}","import {IRGB, ISliderConfig} from '../kl.types';\n\nexport type TBrushSettingEmit = { type: 'color'; value: IRGB } |\n    { type: 'opacity'; value: number } |\n    { type: 'size'; value: number } |\n    { type: 'sliderConfig'; value: ISliderConfig };\n\nexport type TBrushSettingSubscriber = (p : TBrushSettingEmit) => void;\n\n/**\n * Central place to update brush settings, and to subscribe to changes.\n */\nexport class BrushSettingService {\n\n    private static instance: BrushSettingService;\n    subscriberArr: TBrushSettingSubscriber[] = [];\n\n    private emit (obj: TBrushSettingEmit, skipSubscriber?: TBrushSettingSubscriber): void {\n        for (let i = 0; i < this.subscriberArr.length; i++) {\n            if (this.subscriberArr[i] === skipSubscriber) {\n                continue;\n            }\n            this.subscriberArr[i](obj);\n        }\n    }\n\n    // --- public ---\n\n    constructor (\n        private onSetColor: (rgb: IRGB) => void,\n        private onSetSize: (size: number) => void,\n        private onSetOpacity: (opacity: number) => void,\n        private onGetColor: () => IRGB,\n        private onGetSize: () => number,\n        private onGetOpacity: () => number,\n        private onGetSliderConfig: () => ISliderConfig,\n    ) {\n        if (BrushSettingService.instance) {\n            throw new Error('BrushSettingService already instantiated');\n        }\n        BrushSettingService.instance = this;\n    }\n\n    emitColor (color: IRGB, skipSubscriber?: TBrushSettingSubscriber): void {\n        this.emit(\n            {\n                type: 'color',\n                value: color\n            },\n            skipSubscriber\n        );\n    }\n\n    emitSize (size: number, skipSubscriber?: TBrushSettingSubscriber): void {\n        this.emit(\n            {\n                type: 'size',\n                value: size\n            },\n            skipSubscriber\n        );\n    }\n\n    emitOpacity (opacity: number, skipSubscriber?: TBrushSettingSubscriber): void {\n        this.emit(\n            {\n                type: 'opacity',\n                value: opacity\n            },\n            skipSubscriber\n        );\n    }\n\n    emitSliderConfig (sliderConfig: ISliderConfig, skipSubscriber?: TBrushSettingSubscriber) {\n        this.emit(\n            {\n                type: 'sliderConfig',\n                value: sliderConfig\n            },\n            skipSubscriber\n        );\n    }\n\n    /**\n     * set current brush color\n     * @param color\n     * @param skipSubscriber\n     */\n    setColor (color: IRGB, skipSubscriber?: TBrushSettingSubscriber) {\n        this.onSetColor(color);\n        this.emitColor(color, skipSubscriber);\n    }\n\n    /**\n     * set current brush size\n     * @param size\n     * @param skipSubscriber\n     */\n    setSize (size: number, skipSubscriber?: TBrushSettingSubscriber) {\n        this.onSetSize(size);\n        // why not emitting?\n    }\n\n    /**\n     * set current opacity\n     * @param opacity\n     * @param skipSubscriber\n     */\n    setOpacity (opacity: number, skipSubscriber?: TBrushSettingSubscriber) {\n        this.onSetOpacity(opacity);\n        // why not emitting?\n    }\n\n    /**\n     * get current brush color\n     */\n    getColor (): IRGB {\n        return this.onGetColor();\n    }\n\n    getSize (): number {\n        return this.onGetSize();\n    }\n\n    getOpacity (): number {\n        return this.onGetOpacity();\n    }\n\n    getSliderConfig (): ISliderConfig {\n        return this.onGetSliderConfig();\n    }\n\n    /**\n     * subscribe to changes\n     * @param func\n     */\n    subscribe (func: TBrushSettingSubscriber): void {\n        if (this.subscriberArr.includes(func)) {\n            return;\n        }\n        this.subscriberArr.push(func);\n    }\n\n    unsubscribe (func: TBrushSettingSubscriber): void {\n        for (let i = 0; i < this.subscriberArr.length; i++) {\n            if (func === this.subscriberArr[i]) {\n                this.subscriberArr.splice(i, 1);\n                i--;\n            }\n        }\n    }\n}\n\n","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"kSWIa\");","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"4FMUg\");","import {BB} from '../../../bb/bb';\nimport {LANG, languageStrings, LS_LANGUAGE_KEY} from '../../../language/language';\nimport {KL} from '../../kl';\nimport {languages} from '../../../../languages/languages';\nimport {Popup} from '../modals/popup';\n// @ts-ignore\nimport bitbofLogoImg from 'url:~/src/app/img/bitbof-logo.svg';\n// @ts-ignore\nimport klecksLogoImg from 'url:~/src/app/img/klecks-logo.png';\n// @ts-ignore\nimport uiSwapImg from 'url:~/src/app/img/ui/ui-swap-lr.svg';\nimport {LocalStorage} from '../../../bb/base/local-storage';\n\nexport class SettingsTab {\n\n    private el: HTMLElement;\n\n    // --- public ---\n    constructor (\n        onLeftRight: () => void,\n        customAbout?: HTMLElement,\n    ) {\n\n\n\n\n        // ---- language ----\n        const language = languageStrings.getLanguage();\n\n        this.el = BB.el({\n            content: `\n${LANG('settings-language')}: ${language.name} (${language.code})\n            `,\n            css: {\n                margin: '10px',\n            }\n        });\n\n        const preferredLanguageRow = BB.el({\n            content: LANG('settings-preferred-language') + ':<br>',\n            css: {\n                marginTop: '10px',\n            }\n        });\n        const options: [string, string][] = [\n            ['auto', LANG('auto')] as [string, string]\n        ].concat(\n            languages.map(item => {\n                return [item.code, item.name + ` (${item.code})`];\n            })\n        );\n        const languageSelect = new KL.Select({\n            initValue: LocalStorage.getItem(LS_LANGUAGE_KEY) ? LocalStorage.getItem(LS_LANGUAGE_KEY) : 'auto',\n            optionArr: options,\n            onChange: (val) => {\n                if (val === 'auto') {\n                    LocalStorage.removeItem(LS_LANGUAGE_KEY);\n                } else {\n                    LocalStorage.setItem(LS_LANGUAGE_KEY, val);\n                }\n                languageHint.style.display = 'block';\n            },\n        });\n        const languageHint = BB.el({\n            content: LANG('settings-language-reload'),\n            css: {\n                display: 'none',\n                marginTop: '5px',\n            }\n        });\n\n        preferredLanguageRow.append(\n            languageSelect.getElement(),\n            languageHint,\n        );\n\n        this.el.append(preferredLanguageRow);\n\n        // ---- flip ui ----\n        BB.el({\n            tagName: 'button',\n            parent: this.el,\n            content: '<img height=\"20\" width=\"18\" src=\"' + uiSwapImg + '\" alt=\"icon\" style=\"margin-right: 5px\"/>' + LANG('switch-ui-left-right'),\n            onClick: () => onLeftRight(),\n            css: {\n                marginTop: '20px',\n            },\n            custom: {\n                tabIndex: '-1',\n            }\n        });\n\n\n        // ---- about ----\n        this.el.append(BB.el({className: 'gridHr', css: {margin: '10px 0'}}));\n\n        function makeLicenses() {\n            return BB.el({\n                tagName: 'a',\n                content: LANG('licenses'),\n                onClick: () => {\n                    import('./licenses').then(result => {\n                        new Popup({\n                            title: BB.el({\n                                content: LANG('licenses'),\n                            }),\n                            content: BB.el({\n                                content: BB.el({\n                                    content: result.licenses.replace(/\\n/g, '<br>'),\n                                    css: {\n                                        padding: '20px',\n                                    }\n                                }),\n                                css: {\n                                    height: '100%',\n                                    overflowY: 'scroll',\n                                }\n                            }),\n                            width: 800,\n                            isMaxHeight: true,\n                        });\n                    });\n                },\n            });\n        }\n\n        if (customAbout) {\n            this.el.append(customAbout);\n            if (!customAbout.innerHTML) {\n                const minimalAbout = BB.el({\n                    parent: customAbout,\n                    css: {\n                       textAlign: 'center',\n                   }\n                });\n                minimalAbout.append(\n                    BB.el({\n                        content: `<img alt=\"icon\" height=\"20\" style=\"vertical-align:middle\" src=\"${bitbofLogoImg}\"> <a href=\"https://bitbof.com\" target=\"_blank\" tabIndex=\"-1\">bitbof</a> © 2022<br>`,\n                    }),\n                    makeLicenses(),\n                );\n            }\n        } \n\n        window.addEventListener('storage', (e) => {\n            if (e.key !== LS_LANGUAGE_KEY) {\n                return;\n            }\n            languageSelect.setValue(\n                LocalStorage.getItem(LS_LANGUAGE_KEY) ? LocalStorage.getItem(LS_LANGUAGE_KEY) : 'auto'\n            );\n        });\n\n    }\n\n    getElement (): HTMLElement {\n        return this.el;\n    }\n\n}","import {DecoyKlHistory, klHistory} from './history/kl-history';\nimport {Popup, popup} from './ui/modals/popup';\nimport {dialogCounter} from './ui/modals/modal-count';\nimport {Checkbox} from './ui/base-components/checkbox';\nimport {input} from './ui/base-components/input';\nimport {Select} from './ui/base-components/select';\nimport {ImageToggle} from './ui/base-components/image-toggle';\nimport {ImageRadioList} from './ui/base-components/image-radio-list';\nimport {penPressureToggle} from './ui/base-components/pen-pressure-toggle';\nimport {KlSlider} from './ui/base-components/kl-slider';\nimport {calcSliderFalloffFactor} from './ui/base-components/slider-falloff';\nimport {HexColorDialog} from './ui/modals/color-slider-hex-dialog';\nimport {KlColorSlider} from './ui/base-components/kl-color-slider';\nimport {KlSmallColorSlider} from './ui/base-components/kl-color-slider-small';\nimport {PointSlider} from './ui/base-components/point-slider';\nimport {ColorOptions} from './ui/base-components/color-options';\nimport {Options} from './ui/base-components/options';\nimport {StatusOverlay} from './ui/components/status-overlay';\nimport {exportDialog} from './ui/modals/export-dialog-deprecated';\nimport {CropCopy} from './ui/components/crop-copy';\nimport {clipboardDialog} from './ui/modals/clipboard-dialog';\nimport {klLayerManager} from './ui/tool-tabs/kl-layer-manager';\nimport {WorkspaceSvgOverlay} from './canvas-ui/workspace-svg-overlay';\nimport {KlCanvasWorkspace} from './canvas-ui/kl-canvas-workspace';\nimport {KlCanvasPreview} from './canvas-ui/canvas-preview';\nimport {FreeTransform} from './ui/components/free-transform';\nimport {FreeTransformCanvas} from './ui/components/free-transform-canvas';\nimport {Cropper} from './ui/components/cropper';\nimport {LayerPreview} from './ui/components/layer-preview';\nimport {showSaveReminderToast} from './ui/components/show-reminder-toast';\nimport {FittedImage} from './ui/components/fitted-image';\nimport {showImportAsLayerDialog} from './ui/modals/show-import-as-layer-dialog';\nimport {KlImageDropper} from './ui/components/kl-image-dropper';\nimport {OverlayToolspace} from './ui/components/overlay-toolspace';\nimport {ToolspaceTopRow} from './ui/components/toolspace-top-row';\nimport {ToolDropdown} from './ui/components/tool-dropdown';\nimport {ToolspaceToolRow} from './ui/components/toolspace-tool-row';\nimport {ToolspaceStabilizerRow} from './ui/components/toolspace-stabilizer-row';\nimport {TabRow} from './ui/components/tab-row';\nimport {HandUi} from './ui/tool-tabs/hand-ui';\nimport {FillUi} from './ui/tool-tabs/fill-ui';\nimport {TextUi} from './ui/tool-tabs/text-ui';\nimport {ShapeUi} from './ui/tool-tabs/shape-ui';\nimport {newImageDialog} from './ui/modals/new-image-dialog';\nimport {ToolspaceCollapser} from './ui/components/toolspace-collapser';\nimport {renderText} from './image-operations/render-text';\nimport {textToolDialog} from './ui/modals/text-tool-dialog';\nimport {showImportImageDialog} from './ui/modals/show-import-image-dialog';\nimport {floodFillBits} from './image-operations/flood-fill';\nimport * as PSD from './storage/psd';\nimport {drawShape, ShapeTool} from './image-operations/shape-tool';\nimport {KlCanvas} from './canvas/kl-canvas';\nimport * as indexedDb from './storage/indexed-db';\nimport {filterLib, filterLibStatus} from './filters/filters';\nimport {brushes} from './brushes/brushes';\nimport {brushesUI} from './brushes-ui/brushes-ui';\nimport {showIframePopup} from './ui/modals/show-iframe-popup';\nimport {RadioList} from './ui/base-components/radio-list';\nimport {BrowserStorageUi} from './ui/components/browser-storage-ui';\nimport {drawProject} from './canvas/draw-project';\nimport {ProjectStore} from './storage/project-store';\nimport {FileTab} from \"./ui/tool-tabs/file-tab\";\nimport {FilterTab} from \"./ui/tool-tabs/filter-tab\";\nimport {imgurUpload} from \"./ui/modals/imgur-upload\";\nimport {loadAgPsd} from \"./storage/ag-psd-wrapper\";\nimport {SaveReminder} from \"./ui/components/save-reminder\";\nimport {SaveToComputer} from \"./storage/save-to-computer\";\nimport {UndoRedoCatchup} from \"./history/undo-redo-catchup\";\nimport {setDbName} from './storage/indexed-db';\nimport {BrushSettingService} from './brushes-ui/brush-setting-service';\nimport {BoxToggle} from './ui/base-components/box-toggle';\nimport {SettingsTab} from './ui/tool-tabs/settings-tab';\nimport {ToolspaceScroller} from './ui/components/toolspace-scroller';\n\n/**\n * paint tool functionality\n */\nexport const KL = {\n\n    // --- brushes ---\n    brushes,\n    brushesUI,\n    BrushSettingService,\n\n    // --- canvas ---\n    KlCanvas,\n    drawProject,\n\n    // --- canvas ui ---\n    WorkspaceSvgOverlay,\n    KlCanvasWorkspace,\n    KlCanvasPreview,\n\n    // --- filters ---\n    filterLibStatus,\n    filterLib,\n\n    // --- history ---\n    UndoRedoCatchup,\n\n    // --- image operations ---\n    renderText,\n    floodFillBits,\n    ShapeTool,\n    drawShape,\n\n    // --- storage ---\n    PSD,\n    setDbName,\n    indexedDb,\n    ProjectStore,\n    loadAgPsd,\n    SaveToComputer,\n\n    // --- ui - base components ---\n    calcSliderFalloffFactor,\n    Checkbox,\n    input,\n    Select,\n    ImageToggle,\n    ImageRadioList,\n    RadioList,\n    penPressureToggle,\n    KlSlider,\n    HexColorDialog,\n    KlColorSlider,\n    KlSmallColorSlider,\n    PointSlider,\n    ColorOptions,\n    Options,\n    BoxToggle,\n\n    // --- ui - components ---\n    StatusOverlay,\n    CropCopy,\n    FreeTransform,\n    FreeTransformCanvas,\n    Cropper,\n    LayerPreview,\n    showSaveReminderToast,\n    FittedImage,\n    KlImageDropper,\n    OverlayToolspace,\n    ToolspaceTopRow,\n    ToolDropdown,\n    ToolspaceToolRow,\n    ToolspaceStabilizerRow,\n    TabRow,\n    ToolspaceCollapser,\n    BrowserStorageUi,\n    SaveReminder,\n    ToolspaceScroller,\n\n    // --- ui - modals ---\n    dialogCounter,\n    popup,\n    Popup,\n    exportDialog,\n    clipboardDialog,\n    showImportAsLayerDialog,\n    newImageDialog,\n    textToolDialog,\n    showImportImageDialog,\n    showIframePopup,\n    imgurUpload,\n\n    // --- ui - tool tabs ---\n    HandUi,\n    FillUi,\n    TextUi,\n    ShapeUi,\n    FileTab,\n    FilterTab,\n    SettingsTab,\n    klLayerManager,\n\n\n    klHistory,\n    DecoyKlHistory,\n};","import {BB} from '../../../bb/bb';\nimport {klHistory} from '../../history/kl-history';\nimport {LANG} from '../../../language/language';\n\n/**\n * Previews currently active layer\n * thumbnail (hover shows bigger preview), layername, opacity\n *\n * internally listens to kl history. updates when there's a change.\n * but you need to update it when the active layer changed. (different canvas object)\n *\n * update visibility for performance\n *\n * p = {\n *     onClick: function() // when clicking on layer name\n *     klRootEl: klRootEl,\n * }\n *\n * @param p\n * @constructor\n */\nexport function LayerPreview(p) {\n\n    // internally redraws with in an interval. checks history is something changed\n    // this update will be animated\n    // it will not be animated if the resolution changed\n    // also redraws when you call updateLayer - not animated\n\n    // syncs via updateLayer, and internally updates layer opacity via a hack\n\n    let div = BB.el({});\n    let layerObj;\n    let isVisible = true;\n    const height = 40;\n    const canvasSize = height - 10;\n    const largeCanvasSize = 300;\n    let lastDrawnState = -2;\n    let lastDrawnSize = {\n        width: 0,\n        height: 0\n    };\n    let animationCanvas = BB.canvas(); // to help animate the transition\n    let animationCanvasCtx = animationCanvas.getContext('2d');\n    const animationLength = 30;\n    let animationCount = 0; // >0 means it's animating\n    let largeCanvasIsVisible = false;\n    let largeCanvasAnimationTimeout;\n    const largeCanvasAnimationDurationMs = 300;\n    let uiState = 'right'; // 'left' | 'right'\n\n\n    // --- setup dom ---\n    let contentWrapperEl = BB.el({\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            height: height + 'px',\n            color: '#666',\n        }\n    });\n    let canvasWrapperEl = BB.el({\n        css: {\n            //background: '#f00',\n            minWidth: height + 'px',\n            height: height + 'px',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center'\n        }\n    });\n    let canvas = BB.canvas(canvasSize, canvasSize);\n    let canvasCtx = canvas.getContext('2d');\n    canvas.title = LANG('layers-active-layer');\n    BB.css(canvas, {\n        boxShadow: '0 0 0 1px #9e9e9e',\n        colorScheme: 'only light',\n    });\n    let nameWrapper = BB.el({\n        css: {\n            //background: '#ff0',\n            flexGrow: '1',\n            paddingLeft: '10px',\n            fontSize: '13px',\n            overflow: 'hidden',\n            position: 'relative'\n        }\n    });\n    let nameLabelEl = BB.el({\n        content: '',\n        css: {\n            cssFloat: 'left',\n            whiteSpace: 'nowrap'\n        }\n    });\n    let nameFadeEl = BB.el({\n        css: {\n            backgroundImage: 'linear-gradient(to right, rgba(221,221,221,0) 0%, rgba(221,221,221,0.8) 100%)',\n            position: 'absolute',\n            right: \"0\",\n            top: \"0\",\n            width: \"50px\",\n            height: '100%'\n        }\n    });\n    let clickableEl = BB.el({\n        css: {\n            //background: 'rgba(0,255,0,0.6)',\n            position: 'absolute',\n            left: \"10px\",\n            top: \"0\",\n            width: \"90px\",\n            height: '100%'\n        }\n    });\n    if (p.onClick) {\n        BB.addEventListener(clickableEl,'click', function() {\n            p.onClick();\n        });\n        BB.addEventListener(canvas,'click', function() {\n            p.onClick();\n        });\n    }\n    let opacityEl = BB.el({\n        content: LANG('opacity') + '<br>100%',\n        css: {\n            minWidth: '60px',\n            fontSize: '12px',\n            textAlign: 'center',\n            background: '#dddddd',\n            color: '#555'\n        }\n    });\n\n    const largeCanvasWrapper = BB.el({\n        onClick: BB.handleClick,\n        css: {\n            pointerEvents: 'none',\n            background: '#fff',\n            position: 'absolute',\n            right: '280px',\n            top: '10px',\n            border: '1px solid #aaa',\n            boxShadow: '1px 1px 3px rgba(0,0,0,0.3)',\n            transition: 'opacity '+largeCanvasAnimationDurationMs+'ms ease-in-out',\n            userSelect: 'none',\n            display: 'block',\n            webkitTouchCallout: 'none',\n            colorScheme: 'only light',\n        }\n    });\n    let largeCanvas = BB.canvas(largeCanvasSize, largeCanvasSize);\n    largeCanvasWrapper.append(largeCanvas);\n    let largeCanvasCtx = largeCanvas.getContext('2d');\n    BB.css(largeCanvas, {\n        display: 'block',\n    });\n\n    div.appendChild(contentWrapperEl);\n    contentWrapperEl.appendChild(canvasWrapperEl);\n    canvasWrapperEl.appendChild(canvas);\n    contentWrapperEl.appendChild(nameWrapper);\n    nameWrapper.appendChild(nameLabelEl);\n    nameWrapper.appendChild(nameFadeEl);\n    nameWrapper.appendChild(clickableEl);\n    contentWrapperEl.appendChild(opacityEl);\n\n\n    let animationCanvasCheckerPattern = animationCanvasCtx.createPattern(BB.createCheckerCanvas(4), 'repeat');\n    let largeCanvasCheckerPattern = canvasCtx.createPattern(BB.createCheckerCanvas(4), 'repeat');\n\n\n\n    // --- update logic ---\n\n    function animate() {\n        if (animationCount === 0) {\n            return;\n        }\n\n        animationCount--;\n\n        canvasCtx.save();\n        canvasCtx.globalAlpha = Math.pow((animationLength - animationCount) / animationLength, 2);\n        canvasCtx.drawImage(animationCanvas, 0, 0);\n        canvasCtx.restore();\n\n        if (animationCount > 0) {\n            requestAnimationFrame(animate);\n        }\n    }\n\n    function draw(isInstant) {\n\n        if (!isVisible) {\n            return;\n        }\n\n        nameLabelEl.textContent = layerObj.name;\n        opacityEl.innerHTML = LANG('opacity') + '<br>' + Math.round(layerObj.opacity * 100) + '%';\n\n        let layerCanvas = layerObj.context.canvas;\n\n        if (layerCanvas.width !== lastDrawnSize.width || layerCanvas.height !== lastDrawnSize.height) {\n            let canvasDimensions = BB.fitInto(layerCanvas.width, layerCanvas.height, canvasSize, canvasSize, 1);\n            canvas.width = Math.round(canvasDimensions.width);\n            canvas.height = Math.round(canvasDimensions.height);\n\n            isInstant = true;\n        }\n\n        animationCanvas.width = canvas.width;\n        animationCanvas.height = canvas.height;\n\n        animationCanvasCtx.save();\n        animationCanvasCtx.imageSmoothingEnabled = false;\n        animationCanvasCtx.fillStyle = animationCanvasCheckerPattern;\n        animationCanvasCtx.fillRect(0, 0, animationCanvas.width, animationCanvas.height);\n        animationCanvasCtx.drawImage(layerCanvas, 0, 0, animationCanvas.width, animationCanvas.height);\n        animationCanvasCtx.restore();\n\n        if (isInstant) {\n            animationCount = 0;\n            canvasCtx.save();\n            canvasCtx.drawImage(animationCanvas, 0, 0);\n            canvasCtx.restore();\n\n        } else {\n            animationCount = animationLength;\n            animate();\n\n        }\n\n        drawLargeCanvas();\n\n        lastDrawnState = klHistory.getState();\n        lastDrawnSize.width = layerCanvas.width;\n        lastDrawnSize.height = layerCanvas.height;\n    }\n\n    function update() {\n        draw(true);\n    }\n\n    setInterval(function() {\n\n        if (!layerObj) {\n            return;\n        }\n\n        let currentState = klHistory.getState();\n        if (currentState === lastDrawnState) {\n            return;\n        }\n\n        //update opacity w hack\n        layerObj.opacity = layerObj.context.canvas.opacity;\n\n        draw(false);\n\n    }, 2000);\n\n\n    //is always instant\n    function drawLargeCanvas() {\n\n        if (!largeCanvasIsVisible || !layerObj) {\n            return;\n        }\n\n        let layerCanvas = layerObj.context.canvas;\n\n        let canvasDimensions = BB.fitInto(layerCanvas.width, layerCanvas.height, largeCanvasSize, largeCanvasSize, 1);\n        largeCanvas.width = Math.round(canvasDimensions.width);\n        largeCanvas.height = Math.round(canvasDimensions.height);\n        largeCanvasCtx.save();\n        if (largeCanvas.width > layerCanvas.width) {\n            largeCanvasCtx.imageSmoothingEnabled = false;\n        } else {\n            largeCanvasCtx.imageSmoothingEnabled = true;\n            largeCanvasCtx.imageSmoothingQuality = 'high';\n        }\n        largeCanvasCtx.fillStyle = largeCanvasCheckerPattern;\n        largeCanvasCtx.fillRect(0, 0, largeCanvas.width, largeCanvas.height);\n        largeCanvasCtx.drawImage(layerCanvas, 0, 0, largeCanvas.width, largeCanvas.height);\n        largeCanvasCtx.restore();\n\n        const bounds = div.getBoundingClientRect();\n        BB.css(largeCanvasWrapper, {\n            top: Math.max(10, (bounds.top + height / 2 - largeCanvas.height / 2)) + \"px\"\n        });\n\n    }\n\n    function removeLargeCanvas() {\n        try {\n            p.klRootEl.removeChild(largeCanvasWrapper);\n        } catch(e) {\n\n        }\n    }\n\n    function showLargeCanvas(b) {\n        if (largeCanvasIsVisible === b) {\n            return;\n        }\n\n        clearTimeout(largeCanvasAnimationTimeout);\n        largeCanvasIsVisible = b;\n\n        if (b) {\n            largeCanvasAnimationTimeout = setTimeout(function() {\n                drawLargeCanvas();\n                largeCanvasWrapper.style.opacity = '0';\n                p.klRootEl.appendChild(largeCanvasWrapper);\n                setTimeout(function() {\n                    largeCanvasWrapper.style.opacity = '1';\n                }, 20);\n            }, 250);\n\n        } else {\n            largeCanvasWrapper.style.opacity = '0';\n            largeCanvasAnimationTimeout = setTimeout(removeLargeCanvas, largeCanvasAnimationDurationMs + 20);\n        }\n\n    }\n\n    let pointerListener = new BB.PointerListener({\n        target: canvas,\n        onEnterLeave: function(b) {\n            showLargeCanvas(b);\n        }\n    });\n\n\n\n    // --- interface ---\n\n    this.getElement = function() {\n        return div;\n    };\n\n    this.setIsVisible = function(b) {\n        if (isVisible === b) {\n            return;\n        }\n        isVisible = b;\n        contentWrapperEl.style.display = isVisible ? 'flex' : 'none';\n        div.style.marginBottom = isVisible ? '' : '10px';\n\n        let currentState = klHistory.getState();\n        if (b && lastDrawnState !== currentState) {\n            update();\n        }\n    };\n\n    //when the layer might have changed\n    this.setLayer = function(klCanvasLayerObj) {\n        layerObj = klCanvasLayerObj;\n        update();\n    };\n\n    this.setUiState = function(stateStr) {\n        uiState = '' + stateStr;\n\n        if (uiState === 'left') {\n            BB.css(largeCanvasWrapper, {\n                left: '280px',\n                right: ''\n            });\n        } else {\n            BB.css(largeCanvasWrapper, {\n                left: '',\n                right: '280px'\n            });\n        }\n    };\n\n}","import {BB} from '../../../bb/bb';\nimport {LANG} from '../../../language/language';\n\n/**\n * fades in a little message that reminds user to save their draw\n * goes away by itself. stays a few seconds\n */\nexport function showSaveReminderToast(remindersShowed) {\n    let inner = BB.el({\n        content: LANG('save-reminder-title') + '<br>' + LANG('save-reminder-text'),\n    });\n    let div = BB.el({\n        content: inner,\n        className: \"reminder-toast g-root\",\n        css: {\n            opacity: '0',\n            top: '-20px'\n        }\n    });\n\n    let transitionMs = 300;\n    let durationMs = 2500;\n\n    let mix = Math.min(1, remindersShowed / 5);\n    let colA = [0,0,0];\n    let colB = [50,0,0];\n    let col = [\n        Math.round(BB.mix(colA[0], colB[0], mix)),\n        Math.round(BB.mix(colA[1], colB[1], mix)),\n        Math.round(BB.mix(colA[2], colB[2], mix))\n    ];\n    inner.style.background = 'rgba(' + col[0] + ',' + col[1] + ',' + col[2] + ', 0.5)';\n\n    document.body.appendChild(div);\n    setTimeout(function() {\n        div.style.opacity = '1';\n        div.style.top = '10px';\n    }, 22);\n    setTimeout(function() {\n        div.style.opacity = '0';\n    }, durationMs + transitionMs);\n    setTimeout(function() {\n        document.body.removeChild(div);\n    }, durationMs + 2 * transitionMs);\n}","import {BB} from '../../../bb/bb';\n\n/**\n * fits image into a size\n * params: {\n *    image: image,\n *    width: int,\n *    height: int\n * }\n *\n * methods:\n * getDiv()\n *\n * @param params\n * @constructor\n */\nexport function FittedImage(params) {\n    let fit = BB.fitInto(params.image.width, params.image.height, params.width, params.height, 1);\n    let w = parseInt('' + fit.width);\n    let h = parseInt('' + fit.height);\n\n    let canvas = BB.canvas(w, h);\n\n    canvas.getContext(\"2d\").drawImage(params.image, 0, 0, w, h);\n    BB.css(canvas, {\n        display: \"block\",\n        boxShadow: \"0 0 0 1px #aaa\"\n    });\n\n    this.getElement = function() {\n        return canvas;\n    };\n}","import {BB} from '../../../bb/bb';\n\n/**\n * Not really generalized. UI when you drag/drop an image into window.\n * The moment you create it, it will listen.\n *\n * @param p object {onDrop: func(files, optionStr), target: DOM Element, enabledTest: func -> bool} - optionStr: 'default'|'layer'|'image'\n * @constructor\n */\nexport function KlImageDropper(p) {\n\n    //set up DOM\n    let rootEl = BB.el({\n        content: 'Drop to import',\n        css: {\n            paddingTop: '100px',\n            position: 'fixed',\n            left: '0',\n            top: '0',\n            width: '100%',\n            height: '100%',\n            background: 'rgba(50, 50, 50, 0.7)',\n            color: '#fff',\n            textShadow: '2px 2px #000',\n            textAlign: 'center',\n            fontSize: '25px'\n        }\n    });\n    let wrapperEl = BB.el({\n        css: {\n            'marginTop': '50px',\n            'display': 'flex',\n            'justifyContent': 'center'\n        }\n    });\n    let optionStyle = {\n        width: '200px',\n        padding: '50px',\n        margin: '10px',\n        //opacity: 0.5,\n        borderRadius: '20px',\n        border: '1px dashed #fff',\n        background: '#00aefe',\n        fontWeight: 'bold'\n    };\n    let optionLayerEl = BB.el({\n        content: 'As Layer',\n        css: optionStyle\n    });\n    let optionImageEl = BB.el({\n        content: 'As New Image',\n        css: optionStyle\n    });\n\n    rootEl.appendChild(wrapperEl);\n    wrapperEl.appendChild(optionLayerEl);\n    wrapperEl.appendChild(optionImageEl);\n\n\n    let rootCounter = 0;\n    let optionLayerCounter = 0;\n    let optionImageCounter = 0;\n\n    function destroy() {\n        rootCounter = 0;\n        optionLayerCounter = 0;\n        optionImageCounter = 0;\n        try {\n            p.target.removeChild(rootEl);\n        } catch (e) { }\n    }\n\n    function testAcceptType(event) {\n        try {\n            return !event.dataTransfer.types.includes('text/plain');\n        } catch(e) {\n\n        }\n        return false;\n    }\n\n    function updateOptions() {\n        let boxShadow = '0 0 20px 4px #fff';\n        if (optionLayerCounter > 0) {\n            optionLayerEl.style.boxShadow = boxShadow;\n            optionImageEl.style.boxShadow = '';\n        } else if (optionImageCounter > 0) {\n            optionLayerEl.style.boxShadow = '';\n            optionImageEl.style.boxShadow = boxShadow;\n        } else {\n            optionLayerEl.style.boxShadow = '';\n            optionImageEl.style.boxShadow = '';\n        }\n    }\n\n    BB.addEventListener(optionLayerEl,'dragenter', function() {\n        optionLayerCounter++;\n        updateOptions();\n    });\n    BB.addEventListener(optionLayerEl,'dragleave', function() {\n        optionLayerCounter--;\n        updateOptions();\n    });\n    BB.addEventListener(optionImageEl,'dragenter', function() {\n        optionImageCounter++;\n        updateOptions();\n    });\n    BB.addEventListener(optionImageEl,'dragleave', function() {\n        optionImageCounter--;\n        updateOptions();\n    });\n\n\n    function rootDragOver(event) {\n        if (!testAcceptType(event)) {\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n    }\n    function rootDragEnter(event) {\n        if (!p.enabledTest() || !testAcceptType(event)) {\n            return;\n        }\n        if (rootCounter === 0) {\n            p.target.appendChild(rootEl);\n        }\n        rootCounter++;\n\n    }\n    function rootDragLeave(event) {\n        if (!testAcceptType(event) || rootCounter === 0) {\n            return;\n        }\n        rootCounter = Math.max(0, rootCounter - 1);\n        if (rootCounter === 0) {\n            p.target.removeChild(rootEl);\n        }\n\n    }\n    function rootDrop(event) {\n        if (!testAcceptType(event) || event.dataTransfer.files.length === 0) {\n            destroy();\n            return;\n        }\n        event.stopPropagation();\n        event.preventDefault();\n\n        let optionStr = 'default';\n        if (optionLayerCounter > 0) {\n            optionStr = 'layer';\n        } else if (optionImageCounter > 0) {\n            optionStr = 'image';\n        }\n\n        p.onDrop(event.dataTransfer.files, optionStr);\n\n\n        if (rootCounter > 0) {\n            p.target.removeChild(rootEl);\n        }\n        rootCounter = 0;\n        optionLayerCounter = 0;\n        optionImageCounter = 0;\n        updateOptions();\n    }\n\n    BB.addEventListener(window,'dragover', rootDragOver, false);\n    BB.addEventListener(window,'dragenter', rootDragEnter, false);\n    BB.addEventListener(window,'dragleave', rootDragLeave, false);\n    BB.addEventListener(window,'drop', rootDrop, false);\n\n    // if something goes wrong and you're stuck with overlay\n    BB.addEventListener(rootEl, 'pointerdown', function() {\n        destroy();\n    });\n    let keyListener = new BB.KeyListener({\n        onDown: function(keyStr) {\n            if (rootCounter > 0 && keyStr === 'esc') {\n                destroy();\n            }\n        }\n    });\n\n}","import {BB} from '../../../bb/bb';\nimport {KlSmallColorSlider} from '../base-components/kl-color-slider-small';\nimport {KlSlider} from '../base-components/kl-slider';\nimport {BrushSettingService} from '../../brushes-ui/brush-setting-service';\nimport {LANG} from '../../../language/language';\n\n/**\n * Compressed HUD toolspace. When you hold ctrl+alt.\n * small color picker, brush settings\n *\n * @param p\n * @constructor\n */\nexport function OverlayToolspace(\n    p: {\n        brushSettingService: BrushSettingService; // to sync with outside\n        enabledTest: () => boolean; // calls to see if it's allowed to show\n    }\n) {\n\n    const sizeObj = {\n        width: 150,\n        svHeight: 90,\n        hHeight: 20,\n        sliderHeight: 25\n    };\n\n    let isVisible = false;\n    const div = BB.el({\n        css: {\n            position: 'absolute',\n            left: '500px',\n            top: '500px',\n            background: 'rgb(221, 221, 221)',\n            display: 'none',\n            border: '1px solid #fff',\n            boxShadow: '0 0 10px rgba(0,0,0,0.5)',\n            colorScheme: 'only light',\n        }\n    });\n    const queuedObj = {\n        color: null,\n        size: null,\n        opacity: null\n    };\n\n\n    // --- inputs ---\n\n    //color selection\n    const colorSlider = new KlSmallColorSlider({\n        width: sizeObj.width,\n        heightSV: sizeObj.svHeight,\n        heightH: sizeObj.hHeight,\n        color: p.brushSettingService.getColor(),\n        callback: function (rgbObj) {\n            selectedColorEl.style.backgroundColor = \"rgb(\" + rgbObj.r + \",\" + rgbObj.g + \",\" + rgbObj.b + \")\";\n            p.brushSettingService.setColor(rgbObj, subscriptionFunc);\n        }\n    });\n    const selectedColorEl = BB.el({\n        css: {\n            width: sizeObj.width + 'px',\n            height: sizeObj.hHeight + 'px',\n            pointerEvents: 'none'\n        }\n    });\n    {\n        const initialColor = p.brushSettingService.getColor();\n        selectedColorEl.style.backgroundColor = \"rgb(\" + initialColor.r + \",\" + initialColor.g + \",\" + initialColor.b + \")\";\n    }\n\n    div.appendChild(selectedColorEl);\n    div.appendChild(colorSlider.getElement());\n\n\n    function updateColor(rgbObj) {\n        colorSlider.setColor(rgbObj);\n        selectedColorEl.style.backgroundColor = \"rgb(\" + rgbObj.r + \",\" + rgbObj.g + \",\" + rgbObj.b + \")\";\n    }\n\n\n\n\n\n    //brushsize slider\n\n    const sizeSlider = new KlSlider({\n        label: LANG('brush-size'),\n        width: sizeObj.width,\n        height: sizeObj.sliderHeight,\n        min: 0,\n        max: 500,\n        initValue: 50,\n        resolution: 225,\n        eventResMs: 1000 / 30,\n        onChange: function(v) {\n            p.brushSettingService.setSize(v);\n        },\n        formatFunc: function(v) {\n            if (v * 2 < 10) {\n                return Math.round(v * 2 * 10) / 10;\n            }\n            return Math.round(v * 2);\n        }\n    });\n    BB.css(sizeSlider.getElement(), {\n        marginTop: '2px'\n    });\n    div.appendChild(sizeSlider.getElement());\n\n    const opacitySlider = new KlSlider({\n        label: LANG('opacity'),\n        width: sizeObj.width,\n        height: sizeObj.sliderHeight,\n        min: 0,\n        max: 1,\n        initValue: 1,\n        resolution: 225,\n        eventResMs: 1000 / 30,\n        onChange: function(v) {\n            p.brushSettingService.setOpacity(v);\n        },\n        formatFunc: function(v) {\n            return Math.round(v * 100);\n        }\n    });\n    BB.css(opacitySlider.getElement(), {\n        margin: '2px 0'\n    });\n    div.appendChild(opacitySlider.getElement());\n\n\n\n    // --- general setup ---\n\n    const subscriptionFunc = function(event) {\n        if (event.type === 'color') {\n            if (!isVisible) {\n                queuedObj.color = event.value;\n            } else {\n                updateColor(event.value);\n            }\n        }\n        if (event.type === 'size') {\n            if (!isVisible) {\n                queuedObj.size = event.value;\n            } else {\n                sizeSlider.setValue(event.value);\n            }\n        }\n        if (event.type === 'opacity') {\n            if (!isVisible) {\n                queuedObj.opacity = event.value;\n            } else {\n                opacitySlider.setValue(event.value);\n            }\n        }\n        if (event.type === 'sliderConfig') {\n            sizeSlider.update(event.value.sizeSlider);\n            opacitySlider.update(event.value.opacitySlider);\n        }\n    };\n    p.brushSettingService.subscribe(subscriptionFunc);\n    {\n        const sliderConfig = p.brushSettingService.getSliderConfig();\n        sizeSlider.update(sliderConfig.sizeSlider);\n        opacitySlider.update(sliderConfig.opacitySlider);\n        sizeSlider.setValue(p.brushSettingService.getSize());\n        opacitySlider.setValue(p.brushSettingService.getOpacity());\n    }\n\n    function updateUI() {\n        div.style.display = isVisible ? 'block' : 'none';\n        if (isVisible && mousePos) {\n            div.style.left = (mousePos.x - Math.round(sizeObj.width / 2)) + 'px';\n            div.style.top = (mousePos.y - Math.round(sizeObj.svHeight + sizeObj.hHeight * 3 / 2)) + 'px';\n        }\n    }\n\n    let mousePos = null;\n    BB.addEventListener(document, 'pointermove', function(event) {\n        mousePos = {\n            x: event.pageX,\n            y: event.pageY,\n        };\n    });\n\n    const keyListener = new BB.KeyListener({\n        onDown: function(keyStr, event, comboStr, isRepeat) {\n            if (isRepeat) {\n                return;\n            }\n            if (isVisible) {\n                isVisible = false;\n                updateUI();\n                return;\n            }\n\n            if (!p.enabledTest() || !mousePos) {\n                return;\n            }\n\n            if (['ctrl+alt', 'cmd+alt', 'alt+ctrl', 'alt+cmd'].includes(comboStr)) {\n                event.preventDefault();\n                isVisible = true;\n\n                if (queuedObj.color !== null) {\n                    updateColor(queuedObj.color);\n                    queuedObj.color = null;\n                }\n                if (queuedObj.size !== null) {\n                    sizeSlider.setValue(queuedObj.size);\n                    queuedObj.size = null;\n                }\n                if (queuedObj.opacity !== null) {\n                    opacitySlider.setValue(queuedObj.opacity);\n                    queuedObj.opacity = null;\n                }\n\n                updateUI();\n            }\n\n        },\n        onUp: function(keyStr, event, oldComboStr) {\n            if (['ctrl+alt', 'cmd+alt', 'alt+ctrl', 'alt+cmd'].includes(oldComboStr) && isVisible) {\n                isVisible = false;\n                colorSlider.end();\n                updateUI();\n            }\n        },\n        onBlur: function() {\n            if (isVisible) {\n                isVisible = false;\n                colorSlider.end();\n                updateUI();\n            }\n        }\n    });\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n\n}","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport klecksLogoImg from 'url:~/src/app/img/klecks-logo.png';\n// @ts-ignore\nimport newImageImg from 'url:~/src/app/img/ui/new-image.svg';\n// @ts-ignore\nimport importImg from 'url:~/src/app/img/ui/import.svg';\n// @ts-ignore\nimport exportImg from 'url:~/src/app/img/ui/export.svg';\n// @ts-ignore\nimport shareImg from 'url:~/src/app/img/ui/share.svg';\n// @ts-ignore\nimport helpImg from 'url:~/src/app/img/ui/help.svg';\nimport {LANG} from '../../../language/language';\n\n\n/**\n * Topmost row of buttons in toolspace (with the app logo)\n *\n * p = { // button click callbacks\n *      logoImg: img,\n *     onLogo: function(),\n *     onNew: function(),\n *     onImport: function(),\n *     onSave: function(),\n *     onShare: function(),\n *     onHelp: function()\n * }\n *\n * @param p\n * @constructor\n */\nexport function ToolspaceTopRow(p) {\n    let div = document.createElement('div');\n    BB.css(div, {\n        height: '36px',\n        //background: '#f00',\n        display: 'flex',\n        backgroundImage: 'linear-gradient(to top, rgba(255, 255, 255, 0) 20%, rgba(255, 255, 255, 0.6) 100%)'\n    });\n\n    function createButton(p) {\n        let padding = 6 + (p.extraPadding ? p.extraPadding : 0);\n        let result = BB.el({\n            className: 'toolspace-row-button nohighlight',\n            title: p.title,\n            onClick: p.onClick,\n            css: {\n                padding: p.contain ? padding + 'px 0' : ''\n            }\n        });\n        let im = BB.el({\n            css: {\n                backgroundImage: 'url(\\'' + p.image + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundPosition: 'center',\n                backgroundSize: p.contain ? 'contain' : '',\n                //filter: 'grayscale(1)',\n                height: '100%'\n            }\n        });\n        im.style.pointerEvents = 'none';\n        result.appendChild(im);\n        (result as any).pointerListener = new BB.PointerListener({ // because :hover causes problems w touch\n            target: result,\n            onEnterLeave: function(isOver) {\n                if (isOver) {\n                    BB.addClassName(result, 'toolspace-row-button-hover');\n                } else {\n                    BB.removeClassName(result, 'toolspace-row-button-hover');\n                }\n            }\n        });\n        return result;\n    }\n\n    let logoButton = createButton({\n        title: LANG('home'),\n        image: p.logoImg ? p.logoImg : klecksLogoImg,\n        contain: true\n    });\n    logoButton.style.width = '45px';\n    logoButton.style.borderRight = '1px solid rgb(212, 212, 212)';\n    let newButton = createButton({\n        onClick: p.onNew,\n        title: LANG('file-new'),\n        image: newImageImg,\n        extraPadding: 1,\n        contain: true\n    });\n    let importButton = createButton({\n        onClick: p.onImport,\n        title: LANG('file-import'),\n        image: importImg,\n        extraPadding: 1,\n        contain: true\n    });\n    let saveButton = createButton({\n        onClick: p.onSave,\n        title: LANG('file-save'),\n        image: exportImg,\n        extraPadding: 1,\n        contain: true\n    });\n\n    let shareButton = null;\n    if (BB.canShareFiles()) {\n        shareButton = createButton({\n            onClick: p.onShare,\n            title: LANG('file-share'),\n            image: shareImg,\n            contain: true\n        });\n    }\n    let helpButton = createButton({\n        onClick: p.onHelp,\n        title: LANG('help'),\n        image: helpImg,\n        contain: true\n    });\n\n    div.appendChild(logoButton);\n    div.appendChild(newButton);\n    div.appendChild(importButton);\n    div.appendChild(saveButton);\n   \n\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    }\n}","import {BB} from '../../../bb/bb';\nimport {ToolDropdown} from './tool-dropdown';\n// @ts-ignore\nimport toolHandImg from 'url:~/src/app/img/ui/tool-hand.svg';\n// @ts-ignore\nimport toolZoomInImg from 'url:~/src/app/img/ui/tool-zoom-in.svg';\n// @ts-ignore\nimport toolZoomOutImg from 'url:~/src/app/img/ui/tool-zoom-out.svg';\n// @ts-ignore\nimport toolUndoImg from 'url:~/src/app/img/ui/tool-undo.svg';\nimport {LANG} from '../../../language/language';\n\n\n/**\n * Row of buttons in toolspace. image-operations (draw, hand), zoom, undo/redo\n * Need to do syncing. So tool is correct, and zoom/undo/redo buttons are properly enabled/disabled\n * heights: 54px tall, 36px small -> via setIsSmall\n *\n * p = {\n *     onActivate: function(activeStr), // clicking on tool button - activating it\n *     onZoomIn: function(),\n *     onZoomOut: function(),\n *     onUndo: function(),\n *     onRedo: function(),\n * }\n *\n * activeStr = 'draw' | 'hand' | 'fill' | 'text'\n *\n * @param p\n * @constructor\n */\nexport function ToolspaceToolRow(p) {\n    let div = document.createElement('div');\n    BB.css(div, {\n        height: '54px',\n        //height: '36px',\n        display: 'flex',\n        backgroundImage: 'linear-gradient(to top, rgba(255, 255, 255, 0) 20%, rgba(255, 255, 255, 0.6) 100%)'\n    });\n\n    let currentActiveStr = 'draw'; // 'draw' | 'hand' | 'fill'\n\n    function setActive(activeStr, doEmit?) {\n        if (currentActiveStr === activeStr) {\n            return;\n        }\n\n        currentActiveStr = activeStr;\n\n        toolDropdown.setActive(currentActiveStr);\n        if (currentActiveStr === 'hand') {\n            BB.addClassName(handButton, 'toolspace-row-button-activated');\n        } else {\n            BB.removeClassName(handButton, 'toolspace-row-button-activated');\n        }\n\n        if (doEmit) {\n            p.onActivate(currentActiveStr);\n        }\n    }\n\n    function createButton(p) {\n\n        let smallMargin = p.doLighten ? '6px 0' : '8px 0';\n\n        let result = BB.el({\n            className: 'toolspace-row-button nohighlight',\n            //title: p.title,\n            onClick: p.onClick,\n            css: {\n                padding: p.contain ? '10px 0' : ''\n            }\n        });\n        let im = BB.el({\n            css: {\n                backgroundImage: 'url(\\'' + p.image + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundPosition: 'center',\n                backgroundSize: p.contain ? 'contain' : '',\n                //filter: 'grayscale(1)',\n                height: '100%',\n                transform: p.doMirror ? 'scale(-1, 1)' : '',\n                pointerEvents: 'none',\n                opacity: p.doLighten ? '0.75' : '1'\n            }\n        });\n        result.appendChild(im);\n        (result as any).pointerListener = new BB.PointerListener({ // because :hover causes problems w touch\n            target: result,\n            onEnterLeave: function(isOver) {\n                if (isOver) {\n                    BB.addClassName(result, 'toolspace-row-button-hover');\n                } else {\n                    BB.removeClassName(result, 'toolspace-row-button-hover');\n                }\n            }\n        });\n        (result as any).setIsSmall = function(b) {\n            result.style.padding = p.contain ? (b ? smallMargin : '10px 0') : '';\n        }\n        return result;\n    }\n\n\n    function createTriangleButton(p) { // because IE and Edge don't support clip path\n\n        let result = document.createElement('div');\n        BB.css(result, {\n            flexGrow: '1',\n            position: 'relative'\n        });\n\n        let svg = BB.createSvg({\n            elementType: 'svg',\n            width: '67px', // can't think of a way doing with percentage\n            height: '54px',\n            viewBox: '0 0 100 100',\n            preserveAspectRatio: 'none'\n        });\n        BB.css(svg, {\n            position: 'absolute',\n            left: '0',\n            top: '0'\n        });\n\n        let blurRadius = 10;\n        let blurOffsetX = 2;\n        let blurOffsetY = 2;\n\n        let defs = BB.createSvg( { // inset shadow via svg\n            elementType: 'defs',\n            childrenArr: [\n                {\n                    elementType: 'filter',\n                    id: 'innershadow',\n                    x0: '-50%',\n                    y0: '-50%',\n                    width: '200%',\n                    height: '200%',\n                    childrenArr: [\n                        {\n                            elementType: 'feGaussianBlur',\n                            in: 'SourceAlpha',\n                            stdDeviation: '' + blurRadius,\n                            result: 'blur'\n                        }, {\n                            elementType: 'feOffset',\n                            dx: '' + blurOffsetX,\n                            dy: '' + blurOffsetY\n                        }, {\n                            elementType: 'feComposite',\n                            in2: 'SourceAlpha',\n                            operator: 'arithmetic',\n                            k2: '-1',\n                            k3: '1',\n                            result: 'shadowDiff'\n                        },\n\n                        {\n                            elementType: 'feFlood',\n                            'flood-color': '#000',\n                            'flood-opacity': '0.2'\n                        }, {\n                            elementType: 'feComposite',\n                            in2: 'shadowDiff',\n                            operator: 'in'\n                        }, {\n                            elementType: 'feComposite',\n                            in2: 'SourceGraphic',\n                            operator: 'over',\n                            result: 'firstfilter'\n                        },\n\n                        {\n                            elementType: 'feGaussianBlur',\n                            in: 'firstfilter',\n                            stdDeviation: '' + blurRadius,\n                            result: 'blur2'\n                        }, {\n                            elementType: 'feOffset',\n                            dx: '' + blurOffsetX,\n                            dy: '' + blurOffsetY\n                        }, {\n                            elementType: 'feComposite',\n                            in2: 'firstfilter',\n                            operator: 'arithmetic',\n                            k2: '-1',\n                            k3: '1',\n                            result: 'shadowDiff'\n                        },\n\n                        {\n                            elementType: 'feFlood',\n                            'flood-color': '#000',\n                            'flood-opacity': '0.2'\n                        }, {\n                            elementType: 'feComposite',\n                            in2: 'shadowDiff',\n                            operator: 'in'\n                        }, {\n                            elementType: 'feComposite',\n                            in2: 'firstfilter',\n                            operator: 'over'\n                        }\n                    ]\n                }\n            ]\n        });\n\n\n        let svgTriangleLeft = BB.createSvg({\n            elementType: 'path',\n            'vector-effect': 'non-scaling-stroke',\n            d: 'M0,0 L 100,0 0,100 z',\n            fill: 'rgba(0,0,0,0)',\n            class: 'toolspace-svg-triangle-button'\n        });\n        svgTriangleLeft.onclick = function() {\n            p.onLeft();\n            BB.removeClassName(svgTriangleLeft, 'toolspace-svg-triangle-button-hover');\n        };\n\n        let svgTriangleRight = BB.createSvg({\n            elementType: 'path',\n            'vector-effect': 'non-scaling-stroke',\n            d: 'M100,100 L 100,0 0,100 z',\n            fill: 'rgba(0,0,0,0)',\n            class: 'toolspace-svg-triangle-button'\n        });\n        svgTriangleRight.onclick = function() {\n            p.onRight();\n            BB.removeClassName(svgTriangleRight, 'toolspace-svg-triangle-button-hover');\n        };\n\n        // because :hover causes problems w touch\n        (result as any).leftPointerListener = new BB.PointerListener({\n            target: svgTriangleLeft,\n            onEnterLeave: function(isOver) {\n                if (isOver) {\n                    BB.addClassName(svgTriangleLeft, 'toolspace-svg-triangle-button-hover');\n                } else {\n                    BB.removeClassName(svgTriangleLeft, 'toolspace-svg-triangle-button-hover');\n                }\n            }\n        });\n        (result as any).rightPointerListener = new BB.PointerListener({\n            target: svgTriangleRight,\n            onEnterLeave: function(isOver) {\n                if (isOver) {\n                    BB.addClassName(svgTriangleRight, 'toolspace-svg-triangle-button-hover');\n                } else {\n                    BB.removeClassName(svgTriangleRight, 'toolspace-svg-triangle-button-hover');\n                }\n            }\n        });\n\n\n        svg.appendChild(defs);\n        svg.appendChild(svgTriangleLeft);\n        svg.appendChild(svgTriangleRight);\n        result.appendChild(svg);\n\n\n        let leftIm = BB.el({\n            css: {\n                backgroundImage: 'url(\\'' + p.leftImage + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundSize: 'contain',\n                width: '20px',\n                height: '20px',\n                position: 'absolute',\n                left: '10px',\n                top: '8px',\n                //transform: p.doMirror ? 'scale(-1, 1)' : '',\n                pointerEvents: 'none'\n            }\n        });\n        result.appendChild(leftIm);\n\n\n        let rightIm = BB.el({\n            css: {\n                backgroundImage: 'url(\\'' + (p.rightImage ? p.rightImage : p.leftImage) + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundSize: 'contain',\n                width: '20px',\n                height: '20px',\n                position: 'absolute',\n                right: '10px',\n                bottom: '8px',\n                transform: p.rightImage ? '' : 'scale(-1, 1)',\n                pointerEvents: 'none'\n            }\n        });\n        result.appendChild(rightIm);\n\n\n\n\n\n        (result as any).setIsEnabledLeft = function(b) {\n            if (b) {\n                BB.removeClassName(svgTriangleLeft, 'toolspace-row-button-disabled');\n                BB.removeClassName(leftIm, 'toolspace-row-button-disabled');\n            } else {\n                BB.addClassName(svgTriangleLeft, 'toolspace-row-button-disabled');\n                BB.addClassName(leftIm, 'toolspace-row-button-disabled');\n            }\n        };\n        (result as any).setIsEnabledRight = function(b) {\n            if (b) {\n                BB.removeClassName(svgTriangleRight, 'toolspace-row-button-disabled');\n                BB.removeClassName(rightIm, 'toolspace-row-button-disabled');\n            } else {\n                BB.addClassName(svgTriangleRight, 'toolspace-row-button-disabled');\n                BB.addClassName(rightIm, 'toolspace-row-button-disabled');\n            }\n        };\n\n        return result;\n    }\n\n    function createTriangleButtonViaClipPath(p) {\n        let result = document.createElement('div');\n        BB.css(result, {\n            flexGrow: '1',\n            position: 'relative'\n        });\n\n\n        let leftButton = BB.el({\n            className: 'toolspace-triangle-button',\n            onClick: p.onLeft,\n            css: {\n                clipPath: 'polygon(0% 0%, 100% 0%, 100% 0%, 0% 100%)'\n            }\n        });\n\n        let leftIm = BB.el({\n            css: {\n                backgroundImage: 'url(\\'' + p.leftImage + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundSize: 'contain',\n                width: '20px',\n                height: '20px',\n                position: 'absolute',\n                left: '10px',\n                top: '8px',\n                //transform: p.doMirror ? 'scale(-1, 1)' : '',\n                pointerEvents: 'none'\n            }\n        });\n        leftButton.appendChild(leftIm);\n\n\n\n        let rightButton = BB.el({\n            className: 'toolspace-triangle-button',\n            onClick: p.onRight,\n            css: {\n                clipPath: 'polygon(0% 100%, 100% 0%, 100% 100%, 0% 100%)'\n            }\n        });\n\n        let rightIm = BB.el({\n            css: {\n                backgroundImage: 'url(\\'' + (p.rightImage ? p.rightImage : p.leftImage) + '\\')',\n                backgroundRepeat: 'no-repeat',\n                backgroundSize: 'contain',\n                width: '20px',\n                height: '20px',\n                position: 'absolute',\n                right: '10px',\n                bottom: '8px',\n                transform: p.rightImage ? '' : 'scale(-1, 1)',\n                pointerEvents: 'none'\n            }\n        });\n        rightButton.appendChild(rightIm);\n\n\n\n        result.appendChild(leftButton);\n        result.appendChild(rightButton);\n\n\n        // because :hover causes problems w touch\n        (result as any).leftPointerListener = new BB.PointerListener({\n            target: leftButton,\n            onEnterLeave: function(isOver) {\n                if (isOver) {\n                    BB.addClassName(leftButton, 'toolspace-row-button-hover');\n                } else {\n                    BB.removeClassName(leftButton, 'toolspace-row-button-hover');\n                }\n            }\n        });\n        (result as any).rightPointerListener = new BB.PointerListener({\n            target: rightButton,\n            onEnterLeave: function(isOver) {\n                if (isOver) {\n                    BB.addClassName(rightButton, 'toolspace-row-button-hover');\n                } else {\n                    BB.removeClassName(rightButton, 'toolspace-row-button-hover');\n                }\n            }\n        });\n\n\n\n        (result as any).setIsEnabledLeft = function(b) {\n            if (b) {\n                BB.removeClassName(leftButton, 'toolspace-row-button-disabled');\n            } else {\n                BB.addClassName(leftButton, 'toolspace-row-button-disabled');\n            }\n        };\n        (result as any).setIsEnabledRight = function(b) {\n            if (b) {\n                BB.removeClassName(rightButton, 'toolspace-row-button-disabled');\n            } else {\n                BB.addClassName(rightButton, 'toolspace-row-button-disabled');\n            }\n        };\n        return result;\n    }\n\n    /*let brushButton = createButton({\n        onClick: function() {\n            setActive('draw', true);\n        },\n        image: 'app/img/ui/paint.png',\n        contain: true,\n        doLighten: true\n    });\n    BB.addClassName(brushButton, 'toolspace-row-button-activated');\n    div.appendChild(brushButton);*/\n\n    let toolDropdown = new ToolDropdown({\n        onChange: function(activeStr) {\n            setActive(activeStr, true);\n        }\n    });\n    div.appendChild(toolDropdown.getElement());\n\n    let handButton = createButton({\n        onClick: function() {\n            setActive('hand', true);\n        },\n        image: toolHandImg,\n        contain: true,\n        doLighten: true\n    });\n    handButton.style.borderRight = '1px solid rgb(212, 212, 212)';\n    handButton.title = LANG('tool-hand');\n    div.appendChild(handButton);\n\n    let zoomInNOutButton = createTriangleButton({\n        onLeft: p.onZoomIn,\n        onRight: p.onZoomOut,\n        leftImage: toolZoomInImg,\n        rightImage: toolZoomOutImg,\n    });\n    zoomInNOutButton.title = LANG('tool-zoom');\n    div.appendChild(zoomInNOutButton);\n\n    let zoomInButton = createButton({\n        onClick: p.onZoomIn,\n        image: toolZoomInImg,\n        contain: true\n    });\n    zoomInButton.title = LANG('zoom-in');\n    div.appendChild(zoomInButton);\n\n    let zoomOutButton = createButton({\n        onClick: p.onZoomOut,\n        image: toolZoomOutImg,\n        contain: true\n    });\n    zoomOutButton.title = LANG('zoom-out');\n    div.appendChild(zoomOutButton);\n\n    let undoNRedoButton = createTriangleButton({\n        onLeft: p.onUndo,\n        onRight: p.onRedo,\n        leftImage: toolUndoImg,\n        rightImage: null,\n    });\n    undoNRedoButton.title = LANG('tool-undo-redo');\n    (undoNRedoButton as any).setIsEnabledLeft(false);\n    (undoNRedoButton as any).setIsEnabledRight(false);\n    div.appendChild(undoNRedoButton);\n\n    let undoButton = createButton({\n        onClick: p.onUndo,\n        image: toolUndoImg,\n        contain: true\n    });\n    undoButton.title = LANG('undo');\n    BB.addClassName(undoButton, 'toolspace-row-button-disabled');\n    div.appendChild(undoButton);\n\n    let redoButton = createButton({\n        onClick: p.onRedo,\n        image: toolUndoImg,\n        contain: true,\n        doMirror: true\n    });\n    redoButton.title = LANG('redo');\n    BB.addClassName(redoButton, 'toolspace-row-button-disabled');\n    div.appendChild(redoButton);\n\n    zoomInButton.style.display = 'none';\n    zoomOutButton.style.display = 'none';\n    undoButton.style.display = 'none';\n    redoButton.style.display = 'none';\n\n\n\n\n\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n    this.setIsSmall = function(b) {\n        BB.css(div, {\n            height: b ? '36px' : '54px'\n        });\n\n        toolDropdown.setIsSmall(b);\n        (handButton as any).setIsSmall(b);\n        (zoomInButton as any).setIsSmall(b);\n        (zoomOutButton as any).setIsSmall(b);\n        (undoButton as any).setIsSmall(b);\n        (redoButton as any).setIsSmall(b);\n\n        if (b) {\n            zoomInNOutButton.style.display = 'none';\n            undoNRedoButton.style.display = 'none';\n            zoomInButton.style.display = 'block';\n            zoomOutButton.style.display = 'block';\n            undoButton.style.display = 'block';\n            redoButton.style.display = 'block';\n        } else {\n            zoomInNOutButton.style.display = 'block';\n            undoNRedoButton.style.display = 'block';\n            zoomInButton.style.display = 'none';\n            zoomOutButton.style.display = 'none';\n            undoButton.style.display = 'none';\n            redoButton.style.display = 'none';\n        }\n\n    };\n\n    this.setEnableZoomIn = function(b) {\n        if (b) {\n            BB.removeClassName(zoomInButton, 'toolspace-row-button-disabled');\n        } else {\n            BB.addClassName(zoomInButton, 'toolspace-row-button-disabled');\n        }\n        (zoomInNOutButton as any).setIsEnabledLeft(b);\n    };\n    this.setEnableZoomOut = function(b) {\n        if (b) {\n            BB.removeClassName(zoomOutButton, 'toolspace-row-button-disabled');\n        } else {\n            BB.addClassName(zoomOutButton, 'toolspace-row-button-disabled');\n        }\n        (zoomInNOutButton as any).setIsEnabledRight(b);\n    };\n    this.setEnableUndo = function(b) {\n        if (b) {\n            BB.removeClassName(undoButton, 'toolspace-row-button-disabled');\n        } else {\n            BB.addClassName(undoButton, 'toolspace-row-button-disabled');\n        }\n        (undoNRedoButton as any).setIsEnabledLeft(b);\n    };\n    this.setEnableRedo = function(b) {\n        if (b) {\n            BB.removeClassName(redoButton, 'toolspace-row-button-disabled');\n        } else {\n            BB.addClassName(redoButton, 'toolspace-row-button-disabled');\n        }\n        (undoNRedoButton as any).setIsEnabledRight(b);\n    };\n    this.setActive = function(activeStr) {\n        setActive(activeStr);\n    };\n    this.getActive = function() {\n        return currentActiveStr;\n    };\n\n}","import {BB} from '../../../bb/bb';\nimport {Select} from '../base-components/select';\nimport {LANG} from '../../../language/language';\n\n/**\n * Ui to select stabilizer level. 4 options. returned as 0-3\n *\n * p = {\n *     smoothing: number, // initial level 0-3\n *     onSelect: function(level number) // 0-3, when level changes\n * }\n *\n * @param p\n * @constructor\n */\nexport function ToolspaceStabilizerRow(p) {\n\n    let div = BB.el({\n        tagName: 'label',\n        content: LANG('stabilizer') + '&nbsp;',\n        title: LANG('stabilizer-title'),\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            fontSize: '13px',\n            color: 'rgba(0,0,0,0.6)'\n        }\n    });\n\n    let strengthSelect = new Select({\n        optionArr: [\n            ['0', '0'],\n            ['1', '1'],\n            ['2', '2'],\n            ['3', '3'],\n            ['4', '4'],\n            ['5', '5']\n        ],\n        initValue: p.smoothing,\n        onChange: function(val) {\n            p.onSelect(parseInt(val));\n        }\n    });\n    div.appendChild(strengthSelect.getElement());\n\n    let pointerListener = new BB.PointerListener({\n        target: div,\n        onWheel: function(e) {\n            strengthSelect.setDeltaValue(e.deltaY);\n        }\n    });\n\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n}","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport invertedBorderImg from 'url:~/src/app/img/ui/inverted-border.svg';\n\n/**\n * row of tabs. uses css class .tabrow-tab\n *\n * p = {\n *     initialId: string, // e.g. 'draw'\n *     useAccent: boolean,\n *     tabArr: [\n *         {\n *             id: string, // e.g. 'draw',\n *             label: string, // optional\n *             image: string, // optional background image\n *             title: string, // optional\n *             isVisible: boolean, // optional - default is true\n *             onOpen: function(),\n *             onClose: function(),\n *             css: {...},\n *         }\n *     ]\n * }\n *\n * @param p\n * @constructor\n */\nexport function TabRow(p) {\n    let _this = this;\n    let height = 35;\n    let div = BB.el({\n        className: 'tabrow',\n        css: {\n            height: height + 'px'\n        }\n    });\n\n    let tabArr = []; //creates its own internal arr\n    let openedTabObj = null;\n\n    const roundSize = 10;\n    const roundRight = BB.el({\n        css: {\n            width: roundSize + 'px',\n            height: roundSize + 'px',\n            backgroundImage: `url('${invertedBorderImg}')`,\n            backgroundSize: 'cover',\n            position: 'absolute',\n            right: -roundSize + 'px',\n            bottom: '0',\n            pointerEvents: 'none',\n        }\n    });\n    const roundLeft = BB.el({\n        css: {\n            width: roundSize + 'px',\n            height: roundSize + 'px',\n            backgroundImage: `url('${invertedBorderImg}')`,\n            backgroundSize: 'cover',\n            position: 'absolute',\n            left: -roundSize + 'px',\n            bottom: '0',\n            transform: 'scale(-1,1)',\n            pointerEvents: 'none',\n        }\n    });\n\n    function createTab(pTabObj, initialId, useAccent) {\n        let result: any = {\n            id: pTabObj.id,\n            isVisible: 'isVisible' in pTabObj ? pTabObj.isVisible : true,\n            onOpen: pTabObj.onOpen,\n            onClose: pTabObj.onClose,\n            update: function(openedTabObj) {\n                tabDiv.className = openedTabObj === result ? (useAccent ? 'tabrow-tab tabrow-tab-opened-accented' : 'tabrow-tab tabrow-tab-opened') : 'tabrow-tab';\n                tabDiv.style.display = result.isVisible ? 'block' : 'none';\n            }\n        };\n        let tabDiv = BB.el({\n            content: 'label' in pTabObj ? pTabObj.label : '',\n            title: 'title' in pTabObj ? pTabObj.title : undefined,\n            className: initialId === result.id ? (useAccent ? 'tabrow-tab tabrow-tab-opened-accented' : 'tabrow-tab tabrow-tab-opened') : 'tabrow-tab',\n            css: {\n                lineHeight: height + 'px',\n                display: result.isVisible ? 'block' : 'none',\n                zIndex: '0',\n            },\n            onClick: function() {\n                if (openedTabObj === result) {\n                    return;\n                }\n                _this.open(result.id);\n            }\n        });\n        result.div = tabDiv;\n        if ('image' in pTabObj) {\n            BB.css(tabDiv, {\n                backgroundImage: 'url(\\'' + pTabObj.image + '\\')',\n                backgroundSize: (height - 7) + 'px'\n            });\n        }\n        if ('css' in pTabObj) {\n            BB.css(tabDiv, pTabObj.css);\n        }\n        div.appendChild(tabDiv);\n\n        let pointerListener = new BB.PointerListener({ // because :hover causes problems w touch\n            target: tabDiv,\n            onEnterLeave: function(isOver) {\n                if (isOver) {\n                    BB.addClassName(tabDiv, 'tabrow-tab-hover');\n                } else {\n                    BB.removeClassName(tabDiv, 'tabrow-tab-hover');\n                }\n            }\n        });\n\n        if (initialId === result.id) {\n            result.onOpen();\n            result.div.appendChild(roundRight);\n            result.div.appendChild(roundLeft);\n        } else {\n            result.onClose();\n        }\n\n        return result;\n    }\n\n    for (let i = 0; i < p.tabArr.length; i++) {\n        tabArr.push(createTab(p.tabArr[i], p.initialId, p.useAccent));\n    }\n\n    for (let i = 0; i < tabArr.length; i++) {\n        if (tabArr[i].id === p.initialId) {\n            openedTabObj = tabArr[i];\n        }\n    }\n    if (openedTabObj === null) {\n        throw 'invalid initialId';\n    }\n\n    function update() {\n        for (let i = 0; i < tabArr.length; i++) {\n            tabArr[i].update(openedTabObj);\n        }\n    }\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n\n    this.open = function(tabId) {\n        for (let i = 0; i < tabArr.length; i++) {\n            if (tabArr[i].id === tabId) {\n                if (openedTabObj === tabArr[i]) { // already open\n                    return;\n                }\n                openedTabObj.onClose();\n                openedTabObj = tabArr[i];\n                openedTabObj.onOpen();\n                openedTabObj.div.appendChild(roundRight);\n                openedTabObj.div.appendChild(roundLeft);\n                update();\n                return;\n            }\n        }\n        throw 'TabRow.open - invalid tabId';\n    };\n\n    this.getOpenedTabId = function() {\n        return '' + openedTabObj.id;\n    };\n\n    this.setIsVisible = function(tabId, isVisible) {\n        for (let i = 0; i < tabArr.length; i++) {\n            if (tabArr[i].id === tabId) {\n                tabArr[i].isVisible = !!isVisible;\n                update();\n                return;\n            }\n        }\n        throw 'TabRow.setIsVisible - invalid tabId';\n    };\n}","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport collapseImg from 'url:~/src/app/img/ui/ui-collapse.svg';\nimport {LANG} from \"../../../language/language\";\n\n/**\n * button that allows to collapse toolspace (for mobile)\n *\n * p = {\n *     onChange: function()\n * }\n *\n * @param p\n * @constructor\n */\nexport function ToolspaceCollapser(p) {\n    let isOpen = true;\n    let directionStr = 'right'; // 'left' | 'right'\n\n    function update() {\n        if (directionStr === 'left') {\n            icon.style.transform = isOpen ? 'rotate(180deg)' : '';\n        } else {\n            icon.style.transform = isOpen ? '' : 'rotate(180deg)';\n        }\n    }\n\n    let div = BB.el({\n        css: {\n            width: '36px',\n            height: '36px',\n            background: 'rgba(100, 100, 100, 0.9)',\n            color: '#fff',\n            position: 'absolute',\n            top: '0',\n            textAlign: 'center',\n            lineHeight: '36px',\n            cursor: 'pointer',\n            userSelect: 'none',\n            padding: '6px',\n            boxSizing: 'border-box'\n        },\n        title: LANG('toggle-show-tools'),\n        onClick: function(e) {\n            e.preventDefault();\n            isOpen = !isOpen;\n            update();\n            p.onChange();\n        },\n        id:\"ngungu\"\n    });\n\n    let icon = BB.el({\n        parent: div,\n        css: {\n            backgroundImage: `url(${collapseImg})`,\n            width: '100%',\n            height: '100%',\n            backgroundSize: 'contain',\n            backgroundRepeat: 'no-repeat',\n            backgroundPosition: 'center',\n            userSelect: 'none'\n        }\n    });\n    div.oncontextmenu = function () {\n        return false;\n    };\n\n    // --- interface ---\n    this.isOpen = function() {\n        return isOpen;\n    };\n\n    /**\n     *\n     * @param dirStr\n     */\n    this.setDirection = function(dirStr) {\n        directionStr = dirStr;\n        update();\n    };\n\n    this.getElement = function() {\n        return div;\n    };\n}","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport caretImg from 'url:~/src/app/img/ui/caret-down.svg';\nimport {IKeyString} from '../../../bb/bb.types';\nimport {LANG} from '../../../language/language';\nimport {dialogCounter} from '../modals/modal-count';\n\n/**\n * Scroll buttons at the top and bottom of toolspace\n * Show up when window is very small.\n * Allow user to scroll up and down toolspace.\n */\nexport class ToolspaceScroller {\n\n    private toolspace: HTMLElement;\n    private upBtn: HTMLElement;\n    private downBtn: HTMLElement;\n    private downInterval: any;\n    private upInterval: any;\n\n    private update(): void {\n        if (this.toolspace.scrollHeight > this.toolspace.offsetHeight + 3) { // small buffer where it's not worth it\n            if (!this.upInterval) {\n                this.upBtn.style.display = this.toolspace.scrollTop === 0 ? 'none' : 'block';\n            }\n            if (!this.downInterval) {\n                this.downBtn.style.display = (\n                    this.toolspace.scrollTop + this.toolspace.offsetHeight + 1 >= this.toolspace.scrollHeight ?\n                        'none' : 'block'\n                );\n            }\n        } else {\n            this.upBtn.style.display = 'none';\n            this.downBtn.style.display = 'none';\n        }\n    }\n\n    // --- public ---\n    constructor(p: {toolspace: HTMLElement, uiState: 'left' | 'right'}) {\n        this.toolspace = p.toolspace;\n        this.upBtn = BB.el({\n            parent: this.toolspace,\n            title: LANG('scroll'),\n            className: 'kl-scroller',\n            css: {\n                top: '0',\n                transform: 'rotate(180deg)',\n            }\n        });\n        this.downBtn = BB.el({\n            parent: this.toolspace,\n            title: LANG('scroll'),\n            className: 'kl-scroller',\n            css: {\n                bottom: '0',\n            }\n        });\n        this.updateUiState(p.uiState);\n\n        const upListener = new BB.PointerListener({\n            target: this.upBtn,\n            onPointer: (e) => {\n                if (e.type === 'pointerdown') {\n                    this.upInterval = setInterval(() => {\n                        this.toolspace.scrollBy(0, -10);\n                        this.update();\n                    }, 20);\n                }\n                if (e.type === 'pointerup') {\n                    clearInterval(this.upInterval);\n                    setTimeout(() => { // prevent ff pressing anything underneath\n                        this.upInterval = null;\n                        this.update()\n                    }, 50);\n                }\n            },\n            onWheel: (e) => {\n                this.toolspace.scrollBy(0, 20 * e.deltaY);\n                this.update();\n            },\n        });\n        const downListener = new BB.PointerListener({\n            target: this.downBtn,\n            onPointer: (e) => {\n                if (e.type === 'pointerdown') {\n                    this.downInterval = setInterval(() => {\n                        this.toolspace.scrollBy(0, 10);\n                        this.update();\n                    }, 20);\n                }\n                if (e.type === 'pointerup') {\n                    clearInterval(this.downInterval);\n                    setTimeout(() => { // prevent ff pressing anything underneath\n                        this.downInterval = null;\n                        this.update()\n                    }, 50);\n                }\n            },\n            onWheel: (e) => {\n                this.toolspace.scrollBy(0, 20 * e.deltaY);\n                this.update();\n            },\n        });\n\n        this.update();\n\n        const observer = new MutationObserver(() => this.update());\n        observer.observe(\n            this.toolspace,\n            {\n                attributes: true,\n                childList: true,\n                subtree: true,\n            }\n        );\n        window.addEventListener('resize', () => this.update());\n\n        // hide if in dialog because that can have its own scrollbar\n        dialogCounter.subscribe((v) => {\n            // ignores the 0.5 by tool dropdown\n            this.upBtn.style.opacity = v >= 1 ? '0' : '';\n            this.downBtn.style.opacity = v >= 1 ? '0' : '';\n        });\n    }\n\n    updateUiState (uiState: 'left' | 'right'): void {\n        BB.css(this.upBtn, {\n            left: uiState === 'left' ? '0' : null,\n            right: uiState === 'right' ? '0' : null,\n        });\n        BB.css(this.downBtn, {\n            left: uiState === 'left' ? '0' : null,\n            right: uiState === 'right' ? '0' : null,\n        });\n    }\n}","import {BB} from '../../../bb/bb';\nimport {popup} from './popup';\n\nexport function exportDialog(parent, image) {\n    let boxSize, aboutCloseFunc, aboutDiv, closed, aniToggle, imageContainer, coverImage, coverSize,\n        text, holding, aniTimeout, halfBoxSize;\n    boxSize = 22 * 2;\n    halfBoxSize = 22;\n    aboutCloseFunc = function () {\n    };\n    closed = false;\n    aniToggle = false;\n    aboutDiv = document.createElement(\"div\");\n    BB.css(aboutDiv, {\n        width: (7 * boxSize) + \"px\"\n    });\n\n    imageContainer = document.createElement(\"div\");\n    coverImage = new Image();\n    coverImage.src = image.src;\n\n    imageContainer.appendChild(coverImage);\n    imageContainer.appendChild(image);\n\n    BB.css(imageContainer, {\n        width: (6 * boxSize) + \"px\",\n        height: (4 * boxSize) + \"px\",\n        marginTop: (boxSize / 2 - 1) + \"px\",\n        marginLeft: (boxSize / 2 - 1) + \"px\",\n        position: \"relative\",\n        overflow: \"hidden\",\n        boxShadow: \"0 0 10px 4px rgba(255,255,255, 0)\",\n        border: \"1px solid rgba(255, 255, 255, 1)\",\n        transition: \"box-shadow 0.7s linear\"\n    });\n    BB.css(image, {\n        position: \"absolute\",\n        left: '0',\n        top: '0',\n        width: (6 * boxSize) + \"px\",\n        height: (4 * boxSize) + \"px\",\n        opacity: '0'\n    });\n    coverSize = {\n        width: (6 * boxSize),\n        height: (6 * boxSize / image.width) * image.height\n    };\n    if (coverSize.height < (4 * boxSize)) {\n        coverSize.height = (4 * boxSize);\n        coverSize.width = (coverSize.height / image.height) * image.width;\n    }\n    BB.css(coverImage, {\n        position: \"absolute\",\n        top: (2 * boxSize) + \"px\",\n        left: (3 * boxSize) + \"px\",\n        width: coverSize.width + \"px\",\n        height: coverSize.height + \"px\",\n        marginLeft: (-coverSize.width / 2) + \"px\",\n        marginTop: (-coverSize.height / 2) + \"px\"\n    });\n\n    function animation() {\n        if (closed) {\n            return;\n        }\n        aniToggle = !aniToggle;\n        if (aniToggle) {\n            BB.css(imageContainer, {\n                border: \"1px solid rgba(0, 0, 0, 1)\"\n            });\n        } else {\n            BB.css(imageContainer, {\n                border: \"1px solid rgba(200, 200, 200, 1)\"\n            });\n        }\n        setTimeout(animation, 510);\n    }\n\n    animation();\n\n    text = document.createElement(\"div\");\n    text.innerHTML = \"Right-Click or Press-Hold on the image, then save.\";\n    text.ontouchstart = function () {\n        return false;\n    };\n    BB.css(text, {\n        fontSize: (boxSize / 2.5) + \"px\",\n        color: \"#666\",\n        padding: \"10px\",\n        textAlign: \"center\"\n    });\n\n    aboutDiv.appendChild(imageContainer);\n    aboutDiv.appendChild(text);\n\n    holding = false;\n    image.ontouchstart = function () {\n        BB.css(imageContainer, {\n            boxShadow: \"0 0 10px 8px rgba(0,255,255, 1)\"\n        });\n        holding = true;\n        aniTimeout = setTimeout(function () {\n            holding = false;\n            BB.css(imageContainer, {\n                boxShadow: \"0 0 10px 4px rgba(0,255,255, 0)\"\n            });\n        }, 1500);\n    };\n    image.ontouchmove = function () {\n        BB.css(imageContainer, {\n            boxShadow: \"0 0 10px 4px rgba(0,255,255, 0)\"\n        });\n        holding = false;\n        clearTimeout(aniTimeout);\n    };\n    image.ontouchend = function () {\n        BB.css(imageContainer, {\n            boxShadow: \"0 0 10px 4px rgba(0,255,255, 0)\"\n        });\n        holding = false;\n        clearTimeout(aniTimeout);\n    };\n\n    popup({\n        target: parent,\n        message: \"<b>Save Image</b>\",\n        div: aboutDiv,\n        buttons: [\"Close\"],\n        callback: function (result) {\n            closed = true;\n        }\n    });\n}","import {BB} from '../../../bb/bb';\nimport {popup} from './popup';\nimport {CropCopy} from '../components/crop-copy';\nimport {LANG} from '../../../language/language';\n\n/// <reference path=\"./types.d.ts\" />\n\n/**\n *\n * @param parent\n * @param fullCanvas\n * @param cropCallback\n * @param output - BB.Output\n * @param showCrop - boolean - show crop button\n */\nexport function clipboardDialog(parent, fullCanvas, cropCallback, output, showCrop) {\n    const div = document.createElement(\"div\");\n    const isSmall = window.innerWidth < 550 || window.innerHeight < 550;\n\n    let topWrapper = BB.el({\n        content: LANG('crop-drag-to-crop'),\n        css: {\n            textAlign: 'center'\n        }\n    });\n    div.appendChild(topWrapper);\n\n\n    let cropCopy = new CropCopy({\n        width: isSmall ? 340 : 540,\n        height: isSmall ? 300 : 350,\n        canvas: fullCanvas\n    });\n    BB.css(cropCopy.getEl(), {\n        marginTop: '10px',\n        marginLeft: '-20px',\n        borderTop: '1px solid #bbb',\n        borderBottom: '1px solid #bbb'\n    });\n    div.appendChild(cropCopy.getEl());\n\n    function toClipboard() {\n        const imgURL = cropCopy.getCroppedImage().toDataURL('image/png');\n        setTimeout(async function() {\n            try {\n                const data = await fetch(imgURL);\n                const blob = await data.blob();\n                await (navigator.clipboard as any).write([\n                    new ClipboardItem({\n                        [blob.type]: blob\n                    } as any) // todo check is possible?\n                ]);\n                setTimeout(function() {\n                    output.out(LANG('cropcopy-copied'), true);\n                }, 200);\n            } catch (err) {\n                console.error(err.name, err.message);\n            }\n        }, 0);\n    }\n\n    let keyListener = new BB.KeyListener({\n        onDown: function(keyStr, KeyEvent, comboStr) {\n            if (comboStr === 'ctrl+c') {\n                toClipboard();\n                closefunc();\n            }\n        }\n    });\n\n    let closefunc;\n    function blur() {\n        closefunc();\n    }\n    BB.addEventListener(window, \"blur\", blur);\n    popup({\n        target: parent,\n        message: '<b>' + (showCrop ? `${LANG('cropcopy-title-copy')} / ${LANG('cropcopy-title-crop')}` : `${LANG('cropcopy-title-copy')}`) + '</b>',\n        div: div,\n        style: isSmall ? {} : {\n            width: \"500px\"\n        },\n        buttons: showCrop ? [LANG('cropcopy-btn-copy'), LANG('cropcopy-btn-crop'), 'Cancel'] : [LANG('cropcopy-btn-copy'), 'Cancel'],\n        primaries: [LANG('cropcopy-btn-copy')],\n        callback: function (result) {\n            if (result === LANG('cropcopy-btn-copy')) {\n                toClipboard();\n            } else if (result === LANG('cropcopy-btn-crop')) {\n                let rectObj = cropCopy.getRect();\n                cropCallback({\n                    left: Math.round(-rectObj.x),\n                    right: Math.round(rectObj.x + rectObj.width - fullCanvas.width),\n                    top: Math.round(-rectObj.y),\n                    bottom: Math.round(rectObj.y + rectObj.height - fullCanvas.height)\n                });\n            }\n            BB.removeEventListener(window, \"blur\", blur);\n            cropCopy.destroy();\n            keyListener.destroy();\n        },\n        clickOnEnter: LANG('cropcopy-btn-copy'),\n        closefunc: function (func) {\n            closefunc = func;\n        }\n    });\n}","import {BB} from '../../../bb/bb';\nimport {FreeTransformCanvas} from '../components/free-transform-canvas';\nimport {popup} from './popup';\nimport {KlCanvas} from '../../canvas/kl-canvas';\nimport {IKlBasicLayer} from '../../kl.types';\nimport {LANG} from '../../../language/language';\n\nexport function showImportAsLayerDialog(\n    params: {\n        target: HTMLElement;\n        klCanvas: KlCanvas;\n        importImage: HTMLImageElement | HTMLCanvasElement;\n        callback: (\n            p?: {x: number, y: number, width:number, height: number, angleDeg: number},\n            isPixelated?: boolean\n        ) => void;\n    }\n): void {\n\n    let div = document.createElement(\"div\");\n    BB.appendTextDiv(div, LANG('import-as-layer-description'));\n    if (params.klCanvas.isLayerLimitReached()) {\n        let noteEl = BB.el({\n            content: LANG('import-as-layer-limit-reached'),\n            css: {\n                background: '#ff0',\n                padding: '10px',\n                marginTop: '5px',\n                marginBottom: '5px',\n                border: '1px solid #e7d321',\n                borderRadius: '5px'\n            }\n        });\n        div.appendChild(noteEl);\n    }\n    let isSmall = window.innerWidth < 550;\n\n    let buttonRowEl = BB.el({\n        css: {\n            display: 'flex'\n        }\n    });\n    let originalSizeBtn = BB.el({\n        tagName: 'button',\n        content: '1:1',\n        css: {\n            marginRight: '10px'\n        },\n        onClick: function() {\n            freeTransformCanvas.reset();\n        }\n    });\n    let fitSizeBtn = BB.el({\n        tagName: 'button',\n        content: LANG('import-as-layer-fit'),\n        css: {\n            marginRight: '10px'\n        },\n        onClick: function() {\n            freeTransformCanvas.setTransformFit();\n        }\n    });\n    let centerBtn = BB.el({\n        tagName: 'button',\n        content: LANG('center'),\n        css: {\n            marginRight: '10px'\n        },\n        onClick: function() {\n            freeTransformCanvas.setTransformCenter();\n        }\n    });\n    buttonRowEl.appendChild(originalSizeBtn);\n    buttonRowEl.appendChild(fitSizeBtn);\n    buttonRowEl.appendChild(centerBtn);\n    div.appendChild(buttonRowEl);\n\n\n\n    let layers: IKlBasicLayer[] = [];\n    {\n        let klCanvasLayerArr = params.klCanvas.getLayers();\n        for (let i = 0; i < klCanvasLayerArr.length; i++) {\n            layers.push({\n                image: klCanvasLayerArr[i].context.canvas,\n                opacity: klCanvasLayerArr[i].opacity,\n                mixModeStr: klCanvasLayerArr[i].mixModeStr\n            });\n        }\n    }\n    layers.push({\n        image: params.importImage,\n        opacity: 1,\n        mixModeStr: 'source-over'\n    });\n\n\n    let freeTransformCanvas = new FreeTransformCanvas({\n        elementWidth: isSmall ? 340 : 540,\n        elementHeight: isSmall ? 280 : 350,\n        imageWidth: params.klCanvas.getLayerContext(0).canvas.width,\n        imageHeight: params.klCanvas.getLayerContext(0).canvas.height,\n        layers: layers,\n        transformIndex: layers.length - 1,\n    });\n    BB.css(freeTransformCanvas.getElement(), {\n        marginTop: '10px',\n        marginLeft: '-20px',\n    });\n    div.appendChild(freeTransformCanvas.getElement());\n\n    function move(x, y) {\n        freeTransformCanvas.move(x, y);\n    }\n\n    let keyListener = new BB.KeyListener({\n        onDown: function(keyStr) {\n            if (keyStr === 'left') {\n                move(-1, 0);\n            }\n            if (keyStr === 'right') {\n                move(1, 0);\n            }\n            if (keyStr === 'up') {\n                move(0, -1);\n            }\n            if (keyStr === 'down') {\n                move(0, 1);\n            }\n        }\n    });\n\n    popup({\n        target: params.target,\n        message: `<b>${LANG('import-as-layer-title')}</b>`,\n        div: div,\n        style: isSmall ? null : {\n            width: '500px'\n        },\n        buttons: [\"Ok\", \"Cancel\"],\n        clickOnEnter: 'Ok',\n        callback: function(buttonStr) {\n            keyListener.destroy();\n            freeTransformCanvas.destroy();\n            BB.destroyEl(originalSizeBtn);\n            BB.destroyEl(fitSizeBtn);\n            BB.destroyEl(centerBtn);\n            if (buttonStr === 'Ok') {\n                params.callback(freeTransformCanvas.getTransformation(), freeTransformCanvas.getIsPixelated());\n            } else {\n                params.callback();\n            }\n        }\n    });\n\n}","import {BB} from '../../../bb/bb';\nimport {Select} from '../base-components/select';\nimport {ColorOptions} from '../base-components/color-options';\nimport {popup} from './popup';\nimport {LANG} from '../../../language/language';\n\n/**\n * P = {\n *     currentColor: RGB, // current color\n *     secondaryColor: RGB,\n *     maxCanvasSize: number,\n *     canvasWidth: number, // current canvas size\n *     canvasHeight: number, // current canvas size\n *     workspaceWidth: number,\n *     workspaceHeight: number,\n *     onConfirm: function(width number, height number, color RGBA),\n *     onCancel: function()\n * }\n *\n * @param p\n */\nexport function newImageDialog(p) {\n\n    let currentColor = p.currentColor;\n    let secondaryColor = p.secondaryColor;\n    let maxCanvasSize = p.maxCanvasSize;\n    let canvasWidth = p.canvasWidth;\n    let canvasHeight = p.canvasHeight;\n    let workspaceWidth = p.workspaceWidth;\n    let workspaceHeight = p.workspaceHeight;\n    let onConfirm = p.onConfirm;\n    let onCancel = p.onCancel;\n\n\n    function createRatioSize(ratioX, ratioY, width, height, padding) {\n        return BB.fitInto(ratioX, ratioY, Math.min(maxCanvasSize, width - padding), Math.min(maxCanvasSize, height - padding), 1);\n    }\n\n    let newImDiv = document.createElement(\"div\");\n    let widthWrapper = document.createElement(\"div\");\n    let heightWrapper = document.createElement(\"div\");\n    let widthInput = document.createElement(\"input\");\n    let widthUnit = document.createElement(\"div\");\n    let heightInput = document.createElement(\"input\");\n    let heightUnit = document.createElement(\"div\");\n    widthWrapper.style.position = \"relative\";\n    widthWrapper.style.width = \"145px\";\n    widthWrapper.style.height = \"35px\";\n    widthWrapper.style.lineHeight = \"30px\";\n    heightWrapper.style.width = \"145px\";\n    heightWrapper.style.height = \"35px\";\n    heightWrapper.style.lineHeight = \"30px\";\n\n    widthUnit.innerText = LANG('new-px');\n    widthUnit.style.color = '#888';\n    widthUnit.style.fontSize = \"12px\";\n    widthUnit.style.marginLeft = \"5px\";\n    widthUnit.style.cssFloat = \"right\";\n\n    heightUnit.innerText = LANG('new-px');\n    heightUnit.style.color = '#888';\n    heightUnit.style.fontSize = \"12px\";\n    heightUnit.style.marginLeft = \"5px\";\n    heightUnit.style.cssFloat = \"right\";\n\n    widthInput.setAttribute('data-ignore-focus', 'true');\n    heightInput.setAttribute('data-ignore-focus', 'true');\n\n    widthInput.type = 'number';\n    widthInput.min = '1';\n    widthInput.max = maxCanvasSize;\n    widthInput.style.cssFloat = \"right\";\n    widthInput.style.width = \"70px\";\n\n    heightInput.type = 'number';\n    heightInput.min = '1';\n    heightInput.max = maxCanvasSize;\n    heightInput.style.cssFloat = \"right\";\n    heightInput.style.width = \"70px\";\n    widthInput.value = canvasWidth;\n    heightInput.value = canvasHeight;\n    widthInput.onclick = function () {\n        (this as any).focus();\n        updateRatio();\n    };\n    heightInput.onclick = function () {\n        (this as any).focus();\n        updateRatio();\n    };\n    widthWrapper.appendChild(widthUnit);\n    widthWrapper.appendChild(widthInput);\n    BB.appendTextDiv(widthWrapper, LANG('width') + \": \");\n    heightWrapper.appendChild(heightUnit);\n    heightWrapper.appendChild(heightInput);\n    BB.appendTextDiv(heightWrapper, LANG('height') + \": \");\n    let ratioWrapper = document.createElement(\"div\");\n    ratioWrapper.style.marginTop = '5px';\n    ratioWrapper.style.color = '#888';\n\n    let templateWrapper = document.createElement(\"div\");\n    //BB.appendTextDiv(templateWrapper, \"Preset Resolutions: <br />\");\n    let presetFitBtn = document.createElement(\"button\");\n    templateWrapper.style.marginBottom = \"10px\";\n    let presetCurrentBtn = document.createElement(\"button\");\n    let presetSquareBtn = document.createElement(\"button\");\n    let presetLandscapeBtn = document.createElement(\"button\");\n    let presetPortraitBtn = document.createElement(\"button\");\n    let presetOversizeBtn = document.createElement(\"button\");\n\n    presetCurrentBtn.textContent = LANG('new-current');\n    presetFitBtn.textContent = LANG('new-fit');\n    presetOversizeBtn.textContent = LANG('new-oversize');\n    presetLandscapeBtn.textContent = LANG('new-landscape');\n    presetPortraitBtn.textContent = LANG('new-portrait');\n    presetSquareBtn.textContent = LANG('new-square');\n\n    presetCurrentBtn.style.marginRight = \"5px\";\n    presetFitBtn.style.marginRight = \"5px\";\n    presetOversizeBtn.style.marginRight = \"5px\";\n    presetLandscapeBtn.style.marginTop = \"5px\";\n    presetLandscapeBtn.style.marginRight = \"5px\";\n    presetPortraitBtn.style.marginTop = \"5px\";\n    presetPortraitBtn.style.marginRight = \"5px\";\n\n    templateWrapper.appendChild(presetCurrentBtn);\n    templateWrapper.appendChild(presetFitBtn);\n    templateWrapper.appendChild(presetOversizeBtn);\n    templateWrapper.appendChild(presetSquareBtn);\n    templateWrapper.appendChild(presetLandscapeBtn);\n    templateWrapper.appendChild(presetPortraitBtn);\n\n    let templatePadding = 50;\n\n    presetCurrentBtn.onclick = function () {\n        widthInput.value = canvasWidth;\n        heightInput.value = canvasHeight;\n        updateRatio();\n    };\n    presetFitBtn.onclick = function () {\n        widthInput.value = workspaceWidth;\n        heightInput.value = workspaceHeight;\n        updateRatio();\n    };\n    presetOversizeBtn.onclick = function () {\n        widthInput.value = workspaceWidth + 500;\n        heightInput.value = workspaceHeight + 500;\n        updateRatio();\n    };\n    presetSquareBtn.onclick = function () {\n        let sizeObj = createRatioSize(1, 1, workspaceWidth, workspaceHeight, templatePadding);\n        widthInput.value = '' + Math.round(sizeObj.width);\n        heightInput.value = '' + Math.round(sizeObj.height);\n        updateRatio();\n    };\n    presetLandscapeBtn.onclick = function () {\n        let sizeObj = createRatioSize(4, 3, workspaceWidth, workspaceHeight, templatePadding);\n        widthInput.value = '' + Math.round(sizeObj.width);\n        heightInput.value = '' + Math.round(sizeObj.height);\n        updateRatio();\n    };\n    presetPortraitBtn.onclick = function () {\n        let sizeObj = createRatioSize(3, 4, workspaceWidth, workspaceHeight, templatePadding);\n        widthInput.value = '' + Math.round(sizeObj.width);\n        heightInput.value = '' + Math.round(sizeObj.height);\n        updateRatio();\n    };\n\n    let select = new Select({\n        isFocusable: true,\n        optionArr: [\n            ['screen', LANG('new-screen')],\n            ['16 9', LANG('new-video') + ' 16:9'],\n            ['3 2', '3:2'],\n            ['5 3', '5:3'],\n            ['2 1', '2:1'],\n            ['paper', LANG('new-din-paper') + ' √2:1'],\n            ['9 16', '9:16'],\n            ['2 3', '2:3'],\n            ['3 5', '3:5'],\n            ['1 2', '1:2'],\n            ['1 1.4142135623730951', '1:√2']\n        ],\n        onChange: function(val) {\n            if (val === 'screen') {\n                widthInput.value = '' + window.screen.width;\n                heightInput.value = '' + window.screen.height;\n            } else if (val === 'paper') {\n                let sizeObj = createRatioSize(Math.sqrt(2), 1, workspaceWidth, workspaceHeight, templatePadding);\n                widthInput.value = '' + Math.round(sizeObj.width);\n                heightInput.value = '' + Math.round(sizeObj.height);\n            } else {\n                let split = val.split(' ');\n                let sizeObj = createRatioSize(parseFloat(split[0]), parseFloat(split[1]), workspaceWidth, workspaceHeight, templatePadding);\n                widthInput.value = '' + Math.round(sizeObj.width);\n                heightInput.value = '' + Math.round(sizeObj.height);\n            }\n            updateRatio();\n            select.setValue(null);\n        }\n    });\n    setTimeout(() => {\n        // safari: not empty without also setting it to null via timeout\n        select.setValue(null);\n    }, 0);\n    BB.css(select.getElement(), {\n        width: '80px',\n    });\n    templateWrapper.appendChild(select.getElement());\n\n\n\n    let backgroundRGBA = {r: 255, g: 255, b: 255, a: 1};\n\n    let colorOptionsArr = [\n        {r: 255, g: 255, b: 255, a: 1},\n        {r: 0, g: 0, b: 0, a: 1},\n        {r: 0, g: 0, b: 0, a: 0}\n    ];\n    colorOptionsArr.push({\n        r: currentColor.r,\n        g: currentColor.g,\n        b: currentColor.b,\n        a: 1\n    });\n    colorOptionsArr.push({\n        r: secondaryColor.r,\n        g: secondaryColor.g,\n        b: secondaryColor.b,\n        a: 1\n    });\n\n    let colorOptions = new ColorOptions({\n        colorArr: colorOptionsArr,\n        onChange: function(rgbaObj) {\n            backgroundRGBA = rgbaObj;\n            preview.style.backgroundColor = \"rgba(\" + rgbaObj.r + \",\" + rgbaObj.g + \",\" + rgbaObj.b + \", \" + rgbaObj.a + \")\";\n        }\n    });\n\n    let previewWrapper = document.createElement(\"div\");\n    BB.css(previewWrapper, {\n        boxSizing: 'border-box',\n        width: '340px',\n        height: '140px',\n        display: 'table',\n        backgroundColor: '#9e9e9e',\n        padding: '10px',\n        marginTop: '10px',\n        boxShadow: 'rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset',\n        marginLeft: '-20px',\n        colorScheme: 'only light',\n    });\n    let preview = document.createElement(\"div\");\n    BB.css(preview, {\n        width: 200 + \"px\",\n        height: 100 + \"px\",\n        backgroundColor: \"#fff\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        color: \"#aaa\",\n        fontSize: \"16px\",\n        fontWeight: \"bold\",\n        textAlign: \"center\",\n        verticalAlign: \"center\",\n        display: \"table\",\n        overflow: \"hidden\",\n        boxShadow: \"0px 0px 3px rgba(0,0,0,0.5)\"\n    });\n    let previewcell = document.createElement(\"div\");\n    previewcell.style.display = \"table-cell\";\n    previewcell.style.verticalAlign = \"middle\";\n    previewcell.appendChild(preview);\n    previewWrapper.appendChild(previewcell);\n    let cell = BB.appendTextDiv(preview, \"\");\n    //let ratio = BB.appendTextDiv(cell, \"1:2\");\n    cell.style.display = \"table-cell\";\n    cell.style.verticalAlign = \"middle\";\n    let prevW = parseInt(widthInput.value);\n    let prevH = parseInt(heightInput.value);\n\n    function updateRatio() {\n        widthInput.value = '' + Math.min(maxCanvasSize, parseInt(widthInput.value));\n        heightInput.value = '' + Math.min(maxCanvasSize, parseInt(heightInput.value));\n\n        function HCF(u, v) {\n            let U = u, V = v;\n            while (true) {\n                if (!(U %= V))\n                    return V;\n                if (!(V %= U))\n                    return U;\n            }\n        }\n\n        let w = parseInt(widthInput.value);\n        let h = parseInt(heightInput.value);\n        if (w < 1 || w > maxCanvasSize || h < 1 || h > maxCanvasSize) {\n            if (w > maxCanvasSize)\n                w = maxCanvasSize;\n            else if (h > maxCanvasSize)\n                h = maxCanvasSize;\n\n            widthInput.value = '' + w;\n            heightInput.value = '' + h;\n        }\n\n        //generated canvas size doesn't always match ratio. so check if a common ratio is very close\n        let commonRatios = [\n            [1, 2], [2, 1],\n            [2, 3], [3, 2],\n            [3, 4], [4, 3],\n            [4, 5], [5, 4],\n            [16, 9], [9, 16],\n            [3, 2], [2, 3],\n            [5, 3], [3, 5],\n            [2, 1], [1, 2],\n            [1.414, 1], [1, 1.414],\n        ];\n        let reducedArr = BB.reduce(w, h);\n        let closestRatio = null;\n        let closestDistance = null;\n        for (let i = 0; i < commonRatios.length; i++) {\n            if (i === 0 || Math.abs(commonRatios[i][0] / commonRatios[i][1] - reducedArr[0] / reducedArr[1]) < closestDistance) {\n                closestRatio = commonRatios[i];\n                closestDistance = Math.abs(commonRatios[i][0] / commonRatios[i][1] - reducedArr[0] / reducedArr[1]);\n            }\n        }\n        //display ratio\n        if (closestDistance > 0 && closestDistance < 0.005) {\n            ratioWrapper.innerText = LANG('new-ratio') + ': ~' + closestRatio[0] + ':' + closestRatio[1];\n        } else {\n            ratioWrapper.innerText = LANG('new-ratio') + ': ' + reducedArr[0] + ':' + reducedArr[1];\n        }\n\n        prevW = w;\n        prevH = h;\n        let realw = w;\n        let T = HCF(w, h);\n        w /= T;\n        h /= T;\n        w *= 260;\n        h *= 260;\n        if (w > 260) {\n            h = 260 / w * h;\n            w = 260;\n        }\n        if (h > 100) {\n            w = 100 / h * w;\n            h = 100;\n\n        }\n\n        preview.style.width = w + \"px\";\n        preview.style.height = h + \"px\";\n        BB.createCheckerDataUrl(parseInt('' + (30 * (w / realw))), function (url) {\n            previewWrapper.style.background = \"url(\" + url + \")\";\n        });\n    }\n\n    widthInput.onchange = function () {\n        if (widthInput.value === '' || parseInt(widthInput.value) < 0) {\n            widthInput.value = '1';\n        }\n        updateRatio();\n    };\n    widthInput.onkeyup = function () {\n        updateRatio();\n    };\n    heightInput.onchange = function () {\n        if (heightInput.value === '' || parseFloat(heightInput.value) < 0) {\n            heightInput.value = '1';\n        }\n        updateRatio();\n    };\n    heightInput.onkeyup = function () {\n        updateRatio();\n    };\n    updateRatio();\n\n    newImDiv.appendChild(templateWrapper);\n    let secondRow = BB.el({\n        parent: newImDiv,\n        css: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'flex-end'\n        }\n    });\n    let secondRowLeft = BB.el({\n        parent: secondRow\n    });\n    secondRowLeft.appendChild(widthWrapper);\n    secondRowLeft.appendChild(heightWrapper);\n    secondRowLeft.appendChild(ratioWrapper);\n    secondRow.appendChild(colorOptions.getElement());\n\n    newImDiv.appendChild(previewWrapper);\n\n    popup({\n        target: document.body,\n        message: `<b>${LANG('new-title')}</b>`,\n        div: newImDiv,\n        buttons: ['Ok', 'Cancel'],\n        callback: function (result) {\n            widthInput.onclick = null;\n            heightInput.onclick = null;\n            presetCurrentBtn.onclick = null;\n            presetFitBtn.onclick = null;\n            presetOversizeBtn.onclick = null;\n            presetSquareBtn.onclick = null;\n            presetLandscapeBtn.onclick = null;\n            presetPortraitBtn.onclick = null;\n            widthInput.onchange = null;\n            widthInput.onkeyup = null;\n            heightInput.onchange = null;\n            heightInput.onkeyup = null;\n            select.destroy();\n            colorOptions.destroy();\n\n            if (result === \"Cancel\" || parseInt(widthInput.value) <= 0 || parseInt(heightInput.value) <= 0 || isNaN(parseInt(widthInput.value)) || isNaN(parseInt(heightInput.value))) {\n                onCancel();\n                return;\n            }\n            onConfirm(parseInt(widthInput.value), parseInt(heightInput.value), backgroundRGBA);\n        },\n        clickOnEnter: 'Ok'\n    });\n\n}","import {BB} from '../../../bb/bb';\nimport {renderText} from '../../image-operations/render-text';\nimport {ColorOptions} from '../base-components/color-options';\nimport {Select} from '../base-components/select';\nimport {ImageRadioList} from '../base-components/image-radio-list';\nimport {ImageToggle} from '../base-components/image-toggle';\nimport {KlSlider} from '../base-components/kl-slider';\nimport {popup} from './popup';\n// @ts-ignore\nimport alignLeftImg from 'url:~/src/app/img/ui/align-left.svg';\n// @ts-ignore\nimport alignCenterImg from 'url:~/src/app/img/ui/align-center.svg';\n// @ts-ignore\nimport alignRightImg from 'url:~/src/app/img/ui/align-right.svg';\n// @ts-ignore\nimport typoItalicImg from 'url:~/src/app/img/ui/typo-italic.svg';\n// @ts-ignore\nimport typoBoldImg from 'url:~/src/app/img/ui/typo-bold.svg';\n// @ts-ignore\nimport toolZoomInImg from 'url:~/src/app/img/ui/tool-zoom-in.svg';\n// @ts-ignore\nimport toolZoomOutImg from 'url:~/src/app/img/ui/tool-zoom-out.svg';\nimport {IRGB} from '../../kl.types';\nimport {KlCanvas} from '../../canvas/kl-canvas';\nimport {LANG} from '../../../language/language';\n\n/**\n * Text Tool dialog\n *\n * confirmP = {\n *     x: number,\n *     y: number,\n *     textStr: string,\n *     align: 'left' | 'center' | 'right',\n *     isItalic: boolean,\n *     isBold: boolean,\n *     color: rgb,\n *     size: number, // px\n *     font: 'serif' | 'monospace' | 'sans-serif' | 'cursive' | 'fantasy',\n *     opacity: number, // 0 - 1\n * }\n *\n * @param p\n */\nexport function textToolDialog(\n    p: {\n        klCanvas: KlCanvas;\n        layerIndex: number;\n        x: number;\n        y: number;\n        angleRad: number;\n        color: IRGB;\n        secondaryColor: IRGB;\n        size: number; // px\n        align: 'left' | 'center' | 'right'; // default 'left'\n        isBold: boolean; // default false\n        isItalic: boolean; // default false\n        font: 'serif' | 'monospace' | 'sans-serif' | 'cursive' | 'fantasy'; // default sans-serif\n        opacity: number; // 0 - 1; default 1\n        onConfirm: (confirmP) => void;\n    }\n) {\n\n    let div = BB.el({});\n\n    let isSmallWidth = window.innerWidth < 550;\n    let isSmallHeight = window.innerHeight < 630;\n\n    // --- preview ---\n    // Text drawn on klCanvas-sized canvas: textCanvas\n    // LayerArr[target].canvas & textCanvas then drawn on targetCanvas\n    //      they are transformed. canvas size of final preview\n    // All layers and targetCanvas drawn on layersCanvas. transformed and size of final preview\n    // Checkerboard, layersCanvas, and outline then drawn on previewCanvas\n\n    let width = isSmallWidth ? 340 : 540;\n    let height = isSmallWidth ? (isSmallHeight ? 210 : 260) : (isSmallHeight ? 230 : 350);\n    let scale = 1;\n\n    let layerArr = p.klCanvas.getLayersFast();\n    let textCanvas = BB.canvas(p.klCanvas.getWidth(), p.klCanvas.getHeight());\n    let textCtx = textCanvas.getContext('2d');\n    let targetCanvas = BB.canvas(width, height);\n    let targetCtx = targetCanvas.getContext('2d');\n    let layersCanvas = BB.canvas(width, height);\n    let layersCtx = layersCanvas.getContext('2d');\n    let previewCanvas = BB.canvas(width, height); // the one that is visible\n    let previewCtx = previewCanvas.getContext('2d');\n    BB.css(previewCanvas, {\n        display: 'block'\n    });\n    let previewWrapper = BB.el({\n        parent: div,\n        css: {\n            position: 'relative',\n            width: width + 'px',\n            marginLeft: '-20px',\n            cursor: 'move',\n            colorScheme: 'only light',\n            touchAction: 'none',\n        },\n        onClick: function() {\n            textInput.focus();\n        }\n    });\n    BB.el({ // inset shadow on preview\n        parent: previewWrapper,\n        css: {\n            position: 'absolute',\n            left: '0',\n            top: '0',\n            right: '0',\n            bottom: '0',\n            boxShadow: 'rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset',\n            pointerEvents: 'none',\n        }\n    });\n    previewWrapper.appendChild(previewCanvas);\n    let checkerPattern = previewCtx.createPattern(BB.createCheckerCanvas(8), 'repeat');\n    let emptyCanvas = BB.canvas(1, 1);\n    {\n        let ctx = emptyCanvas.getContext('2d');\n        ctx.fillRect(0, 0, 1, 1);\n    }\n\n    function updatePreview() {\n\n        // try to draw very much like klCanvasWorkspace\n\n        // --- draw text ---\n        textCtx.clearRect(0, 0, textCanvas.width, textCanvas.height);\n        let colorRGBA = {\n            ...p.color,\n            a: opacitySlider.getValue(),\n        };\n        let bounds = renderText(textCanvas, {\n            x: p.x,\n            y: p.y,\n            textStr: textInput.value,\n            align: alignRadioList.getValue(),\n            isItalic: italicToggle.getValue(),\n            isBold: boldToggle.getValue(),\n            size: parseFloat(sizeInput.value),\n            font: fontSelect.getValue(),\n            color: BB.ColorConverter.toRgbaStr(colorRGBA),\n            angleRad: p.angleRad\n        });\n\n\n        // --- determine transformation of viewport ---\n        // text should always be visible\n        bounds.width = Math.max(bounds.width, 1);\n        bounds.height = Math.max(bounds.height, 1);\n        let rotatedXY = BB.rotate(bounds.x, bounds.y, -p.angleRad / Math.PI * 180);\n        let rotatedWH = BB.rotate(bounds.width, bounds.height, -p.angleRad / Math.PI * 180);\n        let centerX = p.x + rotatedXY.x + rotatedWH.x / 2;\n        let centerY = p.y + rotatedXY.y + rotatedWH.y / 2;\n\n        let padding = 100;\n        let fitBounds = BB.fitInto(bounds.width, bounds.height, width - padding, height - padding);\n        scale = Math.min(1, fitBounds.width / bounds.width);\n        scale = Math.min(4, scale * Math.pow(2, zoomFac));\n\n\n        // --- compose text and target layer ---\n        targetCtx.save();\n\n        if (scale >= 4) {\n            targetCtx.imageSmoothingEnabled = false;\n        } else {\n            targetCtx.imageSmoothingEnabled = true;\n            targetCtx.imageSmoothingQuality  = scale >= 1 ? 'low' : 'medium';\n        }\n\n        targetCtx.clearRect(0, 0, previewCanvas.width, previewCanvas.height);\n        targetCtx.translate(width / 2, height / 2);\n        targetCtx.scale(scale, scale);\n        targetCtx.rotate(p.angleRad);\n        targetCtx.drawImage(layerArr[p.layerIndex].canvas, -centerX, -centerY);\n        targetCtx.drawImage(textCanvas, -centerX, -centerY);\n        targetCtx.restore();\n\n\n        // --- layers ---\n        layersCtx.save();\n\n        layersCtx.fillStyle = 'rgb(158,158,158)';\n        layersCtx.fillRect(0, 0, width, height);\n\n        { // bg\n            layersCtx.save();\n\n            layersCtx.translate(width / 2, height / 2);\n            layersCtx.scale(scale, scale);\n            layersCtx.rotate(p.angleRad);\n\n            layersCtx.imageSmoothingEnabled = false;\n\n            //outline\n            let borderSize = 1 / scale;\n            layersCtx.globalAlpha = 0.2;\n            layersCtx.drawImage(emptyCanvas, -centerX - borderSize, -centerY - borderSize, textCanvas.width + borderSize * 2, textCanvas.height + borderSize * 2);\n            layersCtx.globalAlpha = 1;\n\n            //erase\n            layersCtx.globalCompositeOperation = 'destination-out';\n            layersCtx.drawImage(emptyCanvas, -centerX, -centerY, textCanvas.width, textCanvas.height);\n\n            layersCtx.restore();\n        }\n\n        { // individual layers\n\n            if (scale >= 4) {\n                layersCtx.imageSmoothingEnabled = false;\n            } else {\n                layersCtx.imageSmoothingEnabled = true;\n                layersCtx.imageSmoothingQuality  = scale >= 1 ? 'low' : 'medium';\n            }\n\n            // layers below\n            layersCtx.save();\n            layersCtx.translate(width / 2, height / 2);\n            layersCtx.scale(scale, scale);\n            layersCtx.rotate(p.angleRad);\n            for (var i = 0; i < p.layerIndex; i++) {\n                if (layerArr[i].opacity > 0) {\n                    layersCtx.globalAlpha = layerArr[i].opacity;\n                    layersCtx.globalCompositeOperation = layerArr[i].mixModeStr;\n                    layersCtx.drawImage(layerArr[i].canvas, -centerX, -centerY);\n                }\n            }\n            layersCtx.restore();\n\n            // target layer\n            layersCtx.globalAlpha = layerArr[p.layerIndex].opacity;\n            layersCtx.globalCompositeOperation = layerArr[p.layerIndex].mixModeStr;\n            layersCtx.drawImage(targetCanvas, 0, 0);\n\n            // layers above\n            layersCtx.save();\n            layersCtx.translate(width / 2, height / 2);\n            layersCtx.scale(scale, scale);\n            layersCtx.rotate(p.angleRad);\n            for (let i = p.layerIndex + 1; i < layerArr.length; i++) {\n                if (layerArr[i].opacity > 0) {\n                    layersCtx.globalAlpha = layerArr[i].opacity;\n                    layersCtx.globalCompositeOperation = layerArr[i].mixModeStr;\n                    layersCtx.drawImage(layerArr[i].canvas, -centerX, -centerY);\n                }\n            }\n            layersCtx.restore();\n\n        }\n\n        layersCtx.restore();\n\n\n\n        // --- final composite ---\n        previewCtx.save();\n        previewCtx.fillStyle = checkerPattern;\n        previewCtx.fillRect(0, 0, previewCanvas.width, previewCanvas.height);\n        previewCtx.drawImage(layersCanvas, 0, 0);\n        previewCtx.restore();\n\n        // bounds\n        previewCtx.save();\n        previewCtx.globalCompositeOperation = 'difference';\n        previewCtx.strokeStyle = '#fff';\n        previewCtx.lineWidth = 1;\n        // centerX = p.x + bounds.x + bounds.width / 2;\n        // centerY = p.y + bounds.y + bounds.height / 2;\n        previewCtx.strokeRect(\n            Math.round(width / 2 - (bounds.width / 2) * scale),\n            Math.round(height / 2 - (bounds.height / 2) * scale),\n            Math.round(bounds.width * scale),\n            Math.round(bounds.height * scale)\n        );\n        previewCtx.restore();\n\n    }\n\n    function move(x, y) {\n        let rotated = BB.rotate(x, y, -p.angleRad / Math.PI * 180);\n        p.x += rotated.x / scale;\n        p.y += rotated.y / scale;\n        updatePreview();\n    }\n\n    let previewPointerListener = new BB.PointerListener({\n        target: previewCanvas,\n        pointers: 1,\n        onPointer: function(e) {\n            if (e.type === 'pointermove' && e.button) {\n                e.eventPreventDefault();\n                move(-e.dX, -e.dY);\n            }\n        },\n        onWheel: function(e) {\n            changeZoomFac(-e.deltaY);\n        }\n    });\n\n    const wheelPrevent = (event) => {\n        event.preventDefault();\n    }\n    BB.addEventListener(previewCanvas, 'wheel', wheelPrevent);\n\n\n\n    let row1 = BB.el({\n        parent: div,\n        css: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            marginTop: '10px'\n        }\n    });\n    let row2n3Wrapper = BB.el({\n        parent: div,\n        css: isSmallWidth ? {} : {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between'\n        }\n    });\n    let row2 = BB.el({\n        parent: row2n3Wrapper,\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            marginTop: '5px'\n        }\n    });\n    let row3 = BB.el({\n        parent: row2n3Wrapper,\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            marginTop: '5px',\n            width: isSmallWidth ? '' : '300px'\n        }\n    });\n\n    // --- row 1 ---\n\n    // color\n    let selectedRgbaObj = {r: 0, g: 0, b: 0, a: 1};\n    let colorOptionsArr = [\n        {r: 0, g: 0, b: 0, a: 1},\n        {r: 255, g: 255, b: 255, a: 1}\n    ];\n    colorOptionsArr.unshift({\n        r: p.secondaryColor.r,\n        g: p.secondaryColor.g,\n        b: p.secondaryColor.b,\n        a: 1,\n    });\n    colorOptionsArr.unshift({\n        r: p.color.r,\n        g: p.color.g,\n        b: p.color.b,\n        a: 1,\n    });\n\n    let colorOptions = new ColorOptions({\n        colorArr: colorOptionsArr,\n        initialIndex: 0,\n        onChange: function(rgbaObj) {\n            p.color = rgbaObj;\n            updatePreview();\n        }\n    });\n    colorOptions.getElement().title = LANG('text-color');\n    colorOptions.getElement().style.marginLeft = '-5px';\n    row1.appendChild(colorOptions.getElement());\n\n\n    let zoomFac = 0;\n    function changeZoomFac(d) {\n        zoomFac = Math.min(2, Math.max(-2, zoomFac + d));\n        updatePreview();\n        zoomInBtn.disabled = !canZoom(1);\n        zoomOutBtn.disabled = !canZoom(-1);\n    }\n    function canZoom(d) {\n        return zoomFac !== Math.min(2, Math.max(-2, zoomFac + d));\n    }\n\n    let zoomWrapper = BB.el({\n        parent: row1,\n        css: {\n\n        }\n    })\n\n    let zoomInBtn = BB.el({\n        parent: zoomWrapper,\n        content: `<img height=\"20\" src=\"${toolZoomInImg}\">`,\n        title: LANG('zoom-in'),\n        tagName: 'button',\n        onClick: function() {\n            changeZoomFac(1);\n        },\n        css: {\n            fontWeight: 'bold'\n        }\n    }) as HTMLButtonElement;\n    let zoomOutBtn = BB.el({\n        parent: zoomWrapper,\n        content: `<img height=\"20\" src=\"${toolZoomOutImg}\">`,\n        title: LANG('zoom-out'),\n        tagName: 'button',\n        onClick: function() {\n            changeZoomFac(-1);\n        },\n        css: {\n            fontWeight: 'bold',\n            marginLeft: '5px'\n        }\n    }) as HTMLButtonElement;\n\n\n\n    // --- row 2 ---\n    let sizeInput = BB.el({\n        parent: row2,\n        tagName: 'input',\n        title: LANG('text-size'),\n        custom: {\n            type: 'number',\n            min: 1,\n            max: 10000,\n            value: p.size\n        },\n        css: {\n            width: '60px'\n        },\n        onChange: function() {\n            sizeInput.value = '' + Math.max(1, Math.min(10000, parseInt(sizeInput.value)));\n            updatePreview();\n        }\n    }) as HTMLInputElement;\n    let sizePointerListener = new BB.PointerListener({\n        target: sizeInput,\n        onWheel: function(e) {\n            sizeInput.value = '' + Math.max(1, Math.min(1000, parseInt(sizeInput.value) - e.deltaY));\n            updatePreview();\n        }\n    });\n\n    let modeWrapper;\n    let fontSelect;\n    let fontPointerListener;\n    {\n        modeWrapper = BB.el({\n            css: {\n                fontSize: '15px',\n                marginLeft: '10px'\n            }\n        });\n        fontSelect = new Select({\n            isFocusable: true,\n            optionArr: [\n                ['sans-serif', 'Sans-serif'],\n                ['serif', 'Serif'],\n                ['monospace', 'Monospace'],\n                ['cursive', 'Cursive'],\n                ['fantasy', 'Fantasy'],\n            ],\n            initValue: p.font,\n            onChange: function(val) {\n                updatePreview();\n            },\n        });\n\n        modeWrapper.appendChild(fontSelect.getElement());\n        row2.appendChild(modeWrapper);\n\n        fontPointerListener = new BB.PointerListener({\n            target: fontSelect.getElement(),\n            onWheel: function(e) {\n                fontSelect.setDeltaValue(e.deltaY);\n            }\n        });\n\n    }\n\n\n    // --- row 3 ---\n\n    let alignRadioList = new ImageRadioList({\n        optionArr: [\n            {\n                id: 'left',\n                title: LANG('text-left'),\n                image: alignLeftImg,\n            },\n            {\n                id: 'center',\n                title: LANG('text-center'),\n                image: alignCenterImg,\n            },\n            {\n                id: 'right',\n                title: LANG('text-right'),\n                image: alignRightImg,\n            }\n        ],\n        initId: p.align,\n        onChange: function(id) {\n            updatePreview();\n        }\n    });\n    row3.appendChild(alignRadioList.getElement());\n\n    let italicToggle = new ImageToggle({\n        image: typoItalicImg,\n        title: LANG('text-italic'),\n        initValue: p.isItalic,\n        onChange: function(b) {\n            updatePreview();\n        }\n    });\n    row3.appendChild(italicToggle.getElement());\n\n    let boldToggle = new ImageToggle({\n        image: typoBoldImg,\n        title: LANG('text-bold'),\n        initValue: p.isBold,\n        onChange: function(b) {\n            updatePreview();\n        }\n    });\n    row3.appendChild(boldToggle.getElement());\n\n\n\n    let opacitySlider = new KlSlider({\n        label: LANG('opacity'),\n        width: 150,\n        height: 30,\n        min: 0,\n        max: 1,\n        initValue: p.opacity,\n        resolution: 225,\n        eventResMs: 1000 / 30,\n        onChange: function(v) {\n            updatePreview();\n        },\n        formatFunc: function(v) {\n            return Math.round(v * 100);\n        }\n    });\n    row3.appendChild(opacitySlider.getElement());\n\n\n\n    let textInput = BB.el({\n        parent: div,\n        tagName: 'textarea',\n        custom: {\n            placeholder: LANG('text-placeholder'),\n            'data-ignore-focus': 'true',\n        },\n        css: {\n            whiteSpace: 'nowrap',\n            overflow: 'auto',\n            width: '100%',\n            height: '70px',\n            resize: 'vertical',\n            marginTop: '10px'\n        },\n        onChange: function() {\n            updatePreview();\n        }\n    }) as HTMLTextAreaElement;\n    textInput.addEventListener('input', updatePreview);\n    setTimeout(function() {\n        textInput.focus();\n        textInput.select();\n    });\n    let closefunc;\n    let keyListener = new BB.KeyListener({\n        onDown: function(keyStr, e, comboStr) {\n            if (BB.isInputFocused(true)) {\n                return;\n            }\n            if (keyStr === 'left') {\n                move(-1, 0);\n            }\n            if (keyStr === 'right') {\n                move(1, 0);\n            }\n            if (keyStr === 'up') {\n                move(0, -1);\n            }\n            if (keyStr === 'down') {\n                move(0, 1);\n            }\n        }\n    });\n\n    // prevent mobile keyboards scrolling page\n    function onScroll() {\n        window.scrollTo(0, 0);\n    }\n    window.addEventListener('scroll', onScroll);\n\n\n    popup({\n        target: document.body,\n        message: `<b>${LANG('text-title')}</b>`,\n        div: div,\n        buttons: [\"Ok\", \"Cancel\"],\n        style: isSmallWidth ? {} : {\n            width: '500px'\n        },\n        callback: function(val) {\n            window.removeEventListener('scroll', onScroll);\n            previewPointerListener.destroy();\n            sizePointerListener.destroy();\n            fontPointerListener.destroy();\n            BB.removeEventListener(previewCanvas, 'wheel', wheelPrevent);\n            keyListener.destroy();\n            if (val === 'Ok') {\n                p.onConfirm({\n                    x: p.x,\n                    y: p.y,\n                    textStr: textInput.value,\n                    align: alignRadioList.getValue(),\n                    isItalic: italicToggle.getValue(),\n                    isBold: boldToggle.getValue(),\n                    color: p.color,\n                    size: sizeInput.value,\n                    font: fontSelect.getValue(),\n                    opacity: opacitySlider.getValue()\n                });\n            }\n        },\n        autoFocus: false,\n        clickOnEnter: 'Ok',\n        ignoreBackground: true,\n        closefunc: function (func) {\n            closefunc = func;\n        },\n    });\n\n    updatePreview();\n\n}","import {BB} from '../../../bb/bb';\nimport {CropCopy} from '../components/crop-copy';\nimport {Checkbox} from '../base-components/checkbox';\nimport {popup} from './popup';\nimport {LANG} from '../../../language/language';\n\n/**\n *\n * p = {\n *     image: convertedPsd | {type: 'image', width: number, height: number, canvas: image | canvas},\n *     maxSize: number,\n *     target: htmlElement,\n *     callback: func(\n *         {\n *             type: 'as-image',\n *             image: image | canvas,\n *         } | {\n *             type: 'as-image-psd',\n *             image: convertedPsd,\n *             cropObj: {x: number, y: number, width: number, height: number}\n *         } | {\n *             type: 'as-layer',\n *             image: image | canvas,\n *         } | {\n *             type: 'cancel',\n *         }\n *     )\n * }\n *\n * @param p {}\n */\nexport function showImportImageDialog(p) {\n    const div = BB.el({});\n\n    const isSmall = window.innerWidth < 550 || window.innerHeight < 550;\n    const style = isSmall ? {} : { width: '500px' };\n    let resolutionEl;\n    const cropCopy = new CropCopy({\n        width: isSmall ? 340 : 540,\n        height: isSmall ? 300 : 400,\n        canvas: p.image.canvas,\n        isNotCopy: true,\n        onChange: function(width, height) {\n            if (!resolutionEl) {\n                return;\n            }\n            updateResolution(width, height);\n        }\n    });\n    BB.css(cropCopy.getEl(), {\n        marginLeft: '-20px',\n        borderTop: '1px solid #bbb',\n        borderBottom: '1px solid #bbb'\n    });\n    cropCopy.getEl().title = LANG('crop-drag-to-crop');\n    div.appendChild(cropCopy.getEl());\n\n\n    resolutionEl = BB.el({\n        parent: div,\n        css: {\n            marginTop: '10px',\n            textAlign: 'center',\n            color: '#888',\n            lineHeight: '20px',\n        }\n    });\n    function updateResolution(w: number, h: number) {\n        const fit = BB.fitInto(w, h, p.maxSize, p.maxSize);\n\n        if (fit.width < w) {\n            resolutionEl.innerHTML = `<span style=\"color:#f00\">${w} X ${h}</span> ⟶ ${Math.round(fit.width)} X ${Math.round(fit.height)}`;\n            resolutionEl.title = LANG('import-too-large');\n        } else {\n            resolutionEl.innerHTML = `${w} X ${h}`;\n            resolutionEl.title = '';\n        }\n    }\n    updateResolution(p.image.width, p.image.height);\n\n\n    let doFlatten = false;\n    function showWarnings(psdWarningArr) {\n        let contentArr = [];\n        let warningMap = {\n            'mask': 'Masks not supported. Mask was applied.',\n            'clipping': 'Clipping not supported. Clipping layers were merged.',\n            'group': 'Groups not supported. Layers were ungrouped.',\n            'adjustment': 'Adjustment layers not supported.',\n            'layer-effect': 'Layer effects not supported.',\n            'smart-object': 'Smart objects not supported.',\n            'blend-mode': 'Unsupported layer blend mode.',\n            'bits-per-channel': 'Unsupported color depth. Only 8bit per channel supported.',\n        };\n        for (let i = 0; i < psdWarningArr.length; i++) {\n            contentArr.push('- ' + warningMap[psdWarningArr[i]]);\n        }\n        alert(contentArr.join(\"\\n\"));\n    }\n\n    let flattenCheckbox;\n    if (p.image.type === 'psd') {\n        const noteStyle = {\n            background: 'rgba(255,255,0,0.5)',\n            padding: '10px',\n            marginTop: '5px',\n            marginBottom: '5px',\n            border: '1px solid #e7d321',\n            borderRadius: '5px'\n        };\n        if (p.image.layers) {\n            flattenCheckbox = new Checkbox({\n                init: doFlatten,\n                label: LANG('import-flatten'),\n                callback: function(b) {\n                    doFlatten = b;\n                }\n            });\n            div.appendChild(flattenCheckbox.getElement());\n\n            if (p.image.warningArr) {\n                const noteEl = BB.el({\n                    content: LANG('import-psd-limited-support'),\n                    css: noteStyle\n                });\n                noteEl.appendChild(BB.el({\n                    tagName: 'a',\n                    content: 'Details',\n                    onClick: function() {\n                        showWarnings(p.image.warningArr);\n                    }\n                }));\n                div.appendChild(noteEl);\n            }\n        } else {\n            const noteEl = BB.el({\n                content: LANG('import-psd-unsupported'),\n                css: noteStyle\n            });\n            div.appendChild(noteEl);\n        }\n    }\n\n    function callback(result) {\n        const croppedImage = cropCopy.getCroppedImage();\n        const cropRect = cropCopy.getRect();\n        cropCopy.destroy();\n        if (flattenCheckbox) {\n            flattenCheckbox.destroy();\n        }\n\n        if (result === LANG('import-btn-as-layer')) {\n            p.callback({\n                type: 'as-layer',\n                image: croppedImage\n            });\n\n        } else if (result === LANG('import-btn-as-image')) {\n            if (p.image.type === 'psd') {\n                if (doFlatten) {\n                    p.image.layers = null;\n                }\n                p.callback({\n                    type: 'as-image-psd',\n                    image: p.image,\n                    cropObj: cropRect\n                });\n            } else if (p.image.type === 'image') {\n                p.callback({\n                    type: 'as-image',\n                    image: croppedImage\n                });\n            }\n        } else {\n            p.callback({\n                type: 'cancel'\n            });\n        }\n    }\n    popup({\n        target: p.target,\n        message: `<b>${LANG('import-title')}</b>`,\n        div: div,\n        style,\n        buttons: [LANG('import-btn-as-layer'), LANG('import-btn-as-image'), \"Cancel\"],\n        callback: callback,\n        autoFocus: 'As Image'\n    });\n}","import {BB} from '../../../bb/bb';\n// @ts-ignore\nimport angleImg from 'url:~/src/app/img/ui/angle.svg';\n// @ts-ignore\nimport rotateImg from 'url:~/src/app/img/ui/edit-rotate.svg';\nimport {LANG} from '../../../language/language';\n\n/**\n * Ui, when hand tool tab is open.\n *\n * p = {\n *     scale: number, // initial value\n *     angleDeg: number, // initial value\n *     onReset: function(),\n *     onFit: function(),\n *     onAngleChange: function(angleDeg number, isRelative number)\n * }\n *\n * @param p\n * @constructor\n */\nexport function HandUi(p) {\n    let div = BB.el({\n        css: {\n            margin: '10px'\n        }\n    });\n    let isVisible = true;\n    let scale = p.scale;\n    let angleDeg = p.angleDeg;\n\n    let row1 = BB.el({\n        css: {\n            marginBottom: '10px',\n            display: 'flex'\n        }\n    });\n    let row2 = BB.el({\n        css: {\n            display: 'flex',\n            marginBottom: '10px',\n        }\n    });\n    let row3 = BB.el({\n        css: {\n            display: 'flex'\n        }\n    });\n    div.append(row1, row2, row3);\n\n\n    let scaleEl = BB.el({\n        css: {\n            width: '55px',\n            userSelect: 'none'\n        }\n    });\n    row1.appendChild(scaleEl);\n\n    let angleIm = new Image();\n    angleIm.src = angleImg;\n    BB.css(angleIm, {\n        verticalAlign: 'bottom',\n        width: '20px',\n        height: '20px',\n        marginRight: '5px',\n        borderRadius: '10px',\n        background: 'rgba(0,0,0,0.2)',\n        userSelect: 'none'\n    });\n    row1.appendChild(angleIm);\n\n    let angleEl = BB.el({\n        css: {\n            userSelect: 'none'\n        }\n    });\n    row1.appendChild(angleEl);\n\n\n    function update() {\n        scaleEl.innerHTML = Math.round(scale * 100) + '%';\n        angleEl.innerHTML =  Math.round(angleDeg) + '°';\n\n\n        angleIm.style.transform = 'rotate(' + angleDeg + 'deg)';\n        if (angleDeg % 90 === 0) {\n            angleIm.style.boxShadow = 'inset 0 0 0 1px rgba(255,255,255, 1), 0 0 0 1px rgba(0, 0, 0, 0.3)';\n        } else {\n            angleIm.style.boxShadow = '';\n        }\n    }\n    update();\n\n\n    let resetButton = BB.el({\n        tagName: 'button',\n        content: LANG('hand-reset'),\n        onClick: p.onReset\n    });\n    BB.makeUnfocusable(resetButton);\n\n    let fitButton = BB.el({\n        tagName: 'button',\n        content: LANG('hand-fit'),\n        css: {\n            marginLeft: '10px'\n        },\n        onClick: p.onFit\n    });\n    BB.makeUnfocusable(fitButton);\n    row2.append(resetButton, fitButton);\n\n    let leftRotateButton = BB.el({\n        tagName: 'button',\n        content: '<img height=\"20\" src=\"' + rotateImg + '\" alt=\"Rotate\" style=\"transform: scale(-1, 1)\"/>',\n        onClick: function() {\n            p.onAngleChange(-15, true);\n        }\n    });\n    BB.makeUnfocusable(leftRotateButton);\n\n    let resetAngleButton = BB.el({\n        tagName: 'button',\n        content: '0°',\n        css: {\n            marginLeft: '10px'\n        },\n        onClick: function() {\n            p.onAngleChange(0);\n        }\n    });\n    BB.makeUnfocusable(resetAngleButton);\n\n    let rightRotateButton = BB.el({\n        tagName: 'button',\n        content: '<img height=\"20\" src=\"' + rotateImg + '\" alt=\"Rotate\"/>',\n        css: {\n            marginLeft: '10px'\n        },\n        onClick: function() {\n            p.onAngleChange(15, true);\n        }\n    });\n    BB.makeUnfocusable(rightRotateButton);\n    row3.append(leftRotateButton, resetAngleButton, rightRotateButton);\n\n\n\n    // --- interface ---\n    this.getElement = function() {\n        return div;\n    };\n    this.setIsVisible = function(pIsVisible) {\n        isVisible = !!pIsVisible;\n        div.style.display = isVisible ? 'block' : 'none';\n        if (isVisible) {\n            update();\n        }\n    };\n    this.update = function(pScale, pAngleDeg) {\n        scale = pScale;\n        angleDeg = pAngleDeg;\n        if (isVisible) {\n            update();\n        }\n    };\n}","import {BB} from '../../../bb/bb';\nimport {KlSlider} from '../base-components/kl-slider';\nimport {Select} from '../base-components/select';\nimport {Checkbox} from '../base-components/checkbox';\nimport {LANG} from '../../../language/language';\n\n/**\n * Paint Bucket tab contents (color slider, opacity slider, etc)\n *\n * p = {\n *     colorSlider: KlColorSlider// when opening tab, inserts it (snatches it from where else it was)\n * }\n *\n * @param p\n * @constructor\n */\nexport function FillUi(p) {\n    let div = BB.el({\n        css: {\n            margin: '10px'\n        }\n    });\n    let isVisible = true;\n\n    let colorDiv = BB.el({\n        parent: div,\n        css: {\n            marginBottom: '10px'\n        }\n    });\n\n    let opacitySlider = new KlSlider({\n        label: LANG('opacity'),\n        width: 250,\n        height: 30,\n        min: 0,\n        max: 1,\n        initValue: 1,\n        onChange: function (val) {\n        },\n        formatFunc: function(v) {\n            return Math.round(v * 100);\n        }\n    });\n    div.appendChild(opacitySlider.getElement());\n\n    let toleranceSlider = new KlSlider({\n        label: LANG('bucket-tolerance'),\n        width: 250,\n        height: 30,\n        min: 0,\n        max: 255,\n        initValue: 255 / 100 * 20,\n        onChange: function (val) {\n        },\n        formatFunc: function(v) {\n            return Math.round(v / 255 * 100);\n        }\n    });\n    BB.css(toleranceSlider.getElement(), {\n        marginTop: '10px'\n    });\n    div.appendChild(toleranceSlider.getElement());\n\n    let selectRow = BB.el({\n        parent: div,\n        css: {\n            display: 'flex',\n            marginTop: '10px'\n        }\n    });\n\n    let modeWrapper;\n    let modeSelect;\n    modeWrapper = BB.el({\n        content: LANG('bucket-sample') + '&nbsp;',\n        title: LANG('bucket-sample-title'),\n        css: {\n            fontSize: '15px'\n        }\n    });\n    modeSelect = new Select({\n        optionArr: [\n            ['all', LANG('bucket-sample-all')],\n            ['current', LANG('bucket-sample-active')],\n            ['above', LANG('bucket-sample-above')]\n        ],\n        initValue: 'all',\n        onChange: function(val) {}\n    });\n    let modePointerListener = new BB.PointerListener({\n        target: modeSelect.getElement(),\n        onWheel: function(e) {\n            modeSelect.setDeltaValue(e.deltaY);\n        }\n    });\n    modeWrapper.appendChild(modeSelect.getElement());\n    selectRow.appendChild(modeWrapper);\n\n    let growWrapper;\n    let growSelect;\n    growWrapper = BB.el({\n        content: LANG('bucket-grow') + '&nbsp;',\n        title: LANG('bucket-grow-title'),\n        css: {\n            fontSize: '15px',\n            marginLeft: '10px'\n        }\n    });\n    growSelect = new Select({\n        optionArr: [\n            ['0', '0'],\n            ['1', '1'],\n            ['2', '2'],\n            ['3', '3'],\n            ['4', '4'],\n            ['5', '5'],\n            ['6', '6'],\n            ['7', '7'],\n        ],\n        initValue: '0',\n        onChange: function(val) {}\n    });\n    let growPointerListener = new BB.PointerListener({\n        target: growSelect.getElement(),\n        onWheel: function(e) {\n            growSelect.setDeltaValue(e.deltaY);\n        }\n    });\n    growWrapper.appendChild(growSelect.getElement());\n    selectRow.appendChild(growWrapper);\n\n\n    let isContiguous = true;\n    let contiguousToggle = new Checkbox({\n        init: true,\n        label: LANG('bucket-contiguous'),\n        title: LANG('bucket-contiguous-title'),\n        callback: function (b) {\n            isContiguous = b;\n        },\n        css: {\n            marginTop: '10px',\n            paddingRight: '5px',\n            display: 'inline-block',\n        }\n    });\n    div.appendChild(contiguousToggle.getElement());\n\n\n\n\n    // --- interface ---\n\n    this.getElement = function() {\n        return div;\n    };\n\n    this.setIsVisible = function(pIsVisible) {\n        isVisible = !!pIsVisible;\n        div.style.display = isVisible ? 'block' : 'none';\n        if (isVisible) {\n            colorDiv.appendChild(p.colorSlider.getElement());\n            colorDiv.appendChild(p.colorSlider.getOutputElement());\n        }\n    };\n\n    this.getTolerance = function() {\n        return toleranceSlider.getValue();\n    };\n\n    this.getOpacity = function() {\n        return opacitySlider.getValue();\n    };\n\n    /**\n     * returns string 'current' | 'all' | 'above'\n     */\n    this.getSample = function() {\n        return modeSelect.getValue();\n    };\n\n    this.getGrow = function() {\n        return parseInt(growSelect.getValue(), 10);\n    }\n\n    this.getContiguous = function() {\n        return isContiguous;\n    };\n\n}","import {BB} from '../../../bb/bb';\nimport {LANG} from '../../../language/language';\n\n/**\n * Text Tool tab contents (color slider)\n *\n * p = {\n *     colorSlider: KlColorSlider// when opening tab, inserts it (snatches it from where else it was)\n * }\n *\n * @param p\n * @constructor\n */\nexport function TextUi(p) {\n    let div = BB.el({\n        css: {\n            margin: '10px'\n        }\n    });\n    let isVisible = true;\n\n    let colorDiv = BB.el({\n        parent: div,\n        css: {\n            marginBottom: '10px'\n        }\n    });\n\n    let hint = BB.el({\n        parent: div,\n        content: LANG('text-instruction'),\n    });\n\n\n    // --- interface ---\n\n    this.getElement = function() {\n        return div;\n    };\n\n    this.setIsVisible = function(pIsVisible) {\n        isVisible = !!pIsVisible;\n        div.style.display = isVisible ? 'block' : 'none';\n        if (isVisible) {\n            colorDiv.appendChild(p.colorSlider.getElement());\n            colorDiv.appendChild(p.colorSlider.getOutputElement());\n            //update();\n        }\n    };\n\n}","import {BB} from '../../../bb/bb';\nimport {Options} from '../base-components/options';\nimport {Checkbox} from '../base-components/checkbox';\nimport {KlSlider} from '../base-components/kl-slider';\nimport {LANG} from '../../../language/language';\n\n/**\n * Shape Tool tab contents\n *\n * p = {\n *     colorSlider: KlColorSlider// when opening tab, inserts it (snatches it from where else it was)\n * }\n *\n * @param p\n * @constructor\n */\nexport function ShapeUi(p) {\n    let div = BB.el({\n        css: {\n            margin: '10px'\n        }\n    });\n    let isVisible = true;\n\n    let colorDiv = BB.el({\n        parent: div,\n        css: {\n            marginBottom: '10px'\n        }\n    });\n\n    let previewSize = 35;\n    let previewPadding = 8;\n    let shape; // 'rect'|'ellipse'|'line'\n    let mode; // 'stroke'|'fill'\n\n\n    let rectStrokeSvgRect = BB.createSvg({\n        elementType: 'rect',\n        x: '' + previewPadding,\n        width: '' + (previewSize - previewPadding * 2)\n    });\n    let rectStrokeSvg = BB.createSvg({\n        elementType: 'svg',\n        width: '' + previewSize,\n        height: '' + previewSize\n    });\n    rectStrokeSvg.appendChild(rectStrokeSvgRect);\n    BB.css(rectStrokeSvg, {\n        display: 'block'\n    });\n\n    let rectFilledSvgRect = BB.createSvg({\n        elementType: 'rect',\n        x: '' + previewPadding,\n        width: '' + (previewSize - previewPadding * 2)\n    });\n    let rectFilledSvg = BB.createSvg({\n        elementType: 'svg',\n        width: '' + previewSize,\n        height: '' + previewSize\n    });\n    rectFilledSvg.appendChild(rectFilledSvgRect);\n    BB.css(rectFilledSvg, {\n        display: 'block'\n    });\n\n\n    let ellipseStrokeSvgEllipse = BB.createSvg({\n        elementType: 'ellipse',\n        cx: '' + (previewSize / 2),\n        cy: '' + (previewSize / 2),\n        rx: '' + (previewSize / 2 - previewPadding)\n    });\n    let ellipseStrokeSvg = BB.createSvg({\n        elementType: 'svg',\n        width: '' + previewSize,\n        height: '' + previewSize,\n    });\n    ellipseStrokeSvg.appendChild(ellipseStrokeSvgEllipse);\n    BB.css(ellipseStrokeSvg, {\n        display: 'block'\n    });\n\n    let ellipseFilledSvgEllipse = BB.createSvg({\n        elementType: 'ellipse',\n        cx: '' + (previewSize / 2),\n        cy: '' + (previewSize / 2),\n        rx: '' + (previewSize / 2 - previewPadding)\n    });\n    let ellipseFilledSvg = BB.createSvg({\n        elementType: 'svg',\n        width: '' + previewSize,\n        height: '' + previewSize,\n    });\n    ellipseFilledSvg.appendChild(ellipseFilledSvgEllipse);\n    BB.css(ellipseFilledSvg, {\n        display: 'block'\n    });\n\n\n    let lineSvgLine = BB.createSvg({\n        elementType: 'line',\n        x1: '' + previewPadding,\n        x2: '' + (previewSize - previewPadding)\n    });\n    let lineSvg = BB.createSvg({\n        elementType: 'svg',\n        width: '' + previewSize,\n        height: '' + previewSize\n    });\n    lineSvg.appendChild(lineSvgLine);\n    BB.css(lineSvg, {\n        display: 'block'\n    });\n\n    function updatePreviews() {\n        let strokeWidth = BB.clamp(Math.round(lineWidthSlider.getValue() / 10), 1, 10) + 'px';\n\n        let squish = 1.35;\n\n        BB.css(rectStrokeSvgRect, { fill: 'none', stroke: 'black', strokeWidth: strokeWidth });\n        BB.css(rectFilledSvgRect, { fill: 'black', stroke: 'none' });\n\n        BB.css(ellipseStrokeSvgEllipse, { fill: 'none', stroke: 'black', strokeWidth: strokeWidth });\n        BB.css(ellipseFilledSvgEllipse, { fill: 'black', stroke: 'none' });\n\n        BB.css(\n            lineSvgLine,\n            { fill: 'none', stroke: 'black', strokeWidth: strokeWidth }\n        );\n\n        if ((fixedToggle as any).getValue()) {\n            rectStrokeSvgRect.setAttribute('y', '' + previewPadding);\n            rectStrokeSvgRect.setAttribute('height', '' + (previewSize - previewPadding * 2));\n            rectFilledSvgRect.setAttribute('y', '' + previewPadding);\n            rectFilledSvgRect.setAttribute('height', '' + (previewSize - previewPadding * 2));\n\n            ellipseStrokeSvgEllipse.setAttribute('ry', '' + (previewSize / 2 - previewPadding));\n            ellipseFilledSvgEllipse.setAttribute('ry', '' + (previewSize / 2 - previewPadding));\n        } else {\n            rectStrokeSvgRect.setAttribute('y', '' + (previewPadding * squish));\n            rectStrokeSvgRect.setAttribute('height', '' + (previewSize - previewPadding * squish * 2));\n            rectFilledSvgRect.setAttribute('y', '' + (previewPadding * squish));\n            rectFilledSvgRect.setAttribute('height', '' + (previewSize - previewPadding * squish * 2));\n\n            ellipseStrokeSvgEllipse.setAttribute('ry', '' + (previewSize / 2 - previewPadding * squish));\n            ellipseFilledSvgEllipse.setAttribute('ry', '' + (previewSize / 2 - previewPadding * squish));\n        }\n\n        if ((snapToggle as any).getValue()) {\n            lineSvgLine.setAttribute('y1', '' + (previewSize - previewPadding));\n            lineSvgLine.setAttribute('y2', '' + previewPadding);\n        } else {\n            lineSvgLine.setAttribute('y1', '' + (previewSize - previewPadding * squish));\n            lineSvgLine.setAttribute('y2', '' + (previewPadding * squish));\n        }\n    }\n\n    let row1 = BB.el({\n        parent: div,\n        css: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'start'\n        }\n    });\n\n    let shapeOptions = new Options({\n        optionArr: [\n            {\n                id: 'rect-stroke',\n                label: rectStrokeSvg,\n                title: LANG('shape-rect') + ' ' + LANG('shape-stroke'),\n            },\n            {\n                id: 'ellipse-stroke',\n                label: ellipseStrokeSvg,\n                title: LANG('shape-ellipse') + ' ' + LANG('shape-stroke'),\n            },\n            {\n                id: 'line',\n                label: lineSvg,\n                title: LANG('shape-line'),\n            },\n            {\n                id: 'rect-fill',\n                label: rectFilledSvg,\n                title: LANG('shape-rect') + ' ' + LANG('shape-fill'),\n            },\n            {\n                id: 'ellipse-fill',\n                label: ellipseFilledSvg,\n                title: LANG('shape-ellipse') + ' ' + LANG('shape-fill'),\n            },\n        ],\n        initId: 'rect',\n        onChange: function(id) {\n            let split = id.split('-');\n            shape = split[0];\n            mode = split[1];\n\n            BB.css(fixedToggle.getElement(), {\n                display: shape === 'line' ? 'none' : null\n            });\n            BB.css(snapToggle.getElement(), {\n                display: shape === 'line' ? null : 'none'\n            });\n            BB.css(lineWidthSlider.getElement(), {\n                display: (shape !== 'line' && mode === 'fill') ? 'none' : null\n            });\n        },\n        changeOnInit: true\n    });\n    shapeOptions.getElement().style.width = '120px';\n    row1.appendChild(shapeOptions.getElement());\n\n    let eraserToggle = new Checkbox({\n        init: false,\n        label: LANG('eraser'),\n        callback: function(b) {\n            updatePreviews();\n        }\n    });\n    row1.appendChild(eraserToggle.getElement());\n\n    let lineWidthSlider = new KlSlider({\n        label: LANG('shape-line-width'),\n        width: 250,\n        height: 30,\n        min: 1,\n        max: 200,\n        initValue: 4,\n        curve: 'quadratic',\n        onChange: function (val) {\n            updatePreviews();\n        },\n        formatFunc: function (v) {\n            return Math.round(v);\n        }\n    });\n    BB.css(lineWidthSlider.getElement(), {\n        marginTop: '10px'\n    });\n    div.appendChild(lineWidthSlider.getElement());\n\n    let opacitySlider = new KlSlider({\n        label: LANG('opacity'),\n        width: 250,\n        height: 30,\n        min: 0,\n        max: 1,\n        initValue: 1,\n        onChange: function (val) {\n        },\n        formatFunc: function (v) {\n            return Math.round(v * 100);\n        }\n    });\n    BB.css(opacitySlider.getElement(), {\n        marginTop: '10px'\n    });\n    div.appendChild(opacitySlider.getElement());\n\n    let row2 = BB.el({\n        parent: div,\n        css: {\n            display: 'flex',\n            alignItems: 'center',\n            marginTop: '10px'\n        }\n    });\n\n    let outwardsToggle = new Checkbox({\n        init: false,\n        label: LANG('shape-outwards'),\n        callback: function(b) {},\n        css: {\n            width: '50%',\n            marginRight: '10px',\n        }\n    });\n    row2.appendChild(outwardsToggle.getElement());\n\n    let fixedToggle = new Checkbox({\n        init: false,\n        label: LANG('shape-fixed'),\n        callback: function(b) {\n            updatePreviews();\n        },\n        css: {\n            flexGrow: '1',\n        }\n    });\n    row2.appendChild(fixedToggle.getElement());\n\n    let snapToggle = new Checkbox({\n        init: false,\n        label: LANG('shape-snap'),\n        title: LANG('shape-snap-title'),\n        callback: function(b) {\n            updatePreviews();\n        },\n        css: {\n            flexGrow: '1',\n        }\n    });\n    row2.appendChild(snapToggle.getElement());\n\n\n\n    updatePreviews();\n\n    // --- interface ---\n\n    this.getElement = function() {\n        return div;\n    };\n\n    this.setIsVisible = function(pIsVisible) {\n        isVisible = !!pIsVisible;\n        div.style.display = isVisible ? 'block' : 'none';\n        if (isVisible) {\n            colorDiv.appendChild(p.colorSlider.getElement());\n            colorDiv.appendChild(p.colorSlider.getOutputElement());\n            //update();\n        }\n    };\n\n    this.getShape = function() {\n        return shape;\n    };\n\n    this.getMode = function() {\n        return mode;\n    };\n\n    this.getIsEraser = function() {\n        return (eraserToggle as any).getValue();\n    };\n\n    this.getOpacity = function() {\n        return opacitySlider.getValue();\n    };\n\n    this.getLineWidth = function() {\n        return lineWidthSlider.getValue();\n    };\n\n    this.getIsOutwards = function() {\n        return (outwardsToggle as any).getValue();\n    };\n\n    this.getIsFixed = function() {\n        return (fixedToggle as any).getValue();\n    };\n\n    this.getIsSnap = function() {\n        return (snapToggle as any).getValue();\n    };\n\n}","import {BB} from '../../../bb/bb';\nimport {popup} from '../modals/popup';\nimport {klHistory} from '../../history/kl-history';\nimport {Options} from '../base-components/options';\nimport {Select} from '../base-components/select';\nimport {PointSlider} from '../base-components/point-slider';\n// @ts-ignore\nimport addLayerImg from 'url:~/src/app/img/ui/add-layer.svg';\n// @ts-ignore\nimport duplicateLayerImg from 'url:~/src/app/img/ui/duplicate-layer.svg';\n// @ts-ignore\nimport mergeLayerImg from 'url:~/src/app/img/ui/merge-layers.svg';\n// @ts-ignore\nimport removeLayerImg from 'url:~/src/app/img/ui/remove-layer.svg';\n// @ts-ignore\nimport renameLayerImg from 'url:~/src/app/img/ui/rename-layer.svg';\nimport {KlCanvas, MAX_LAYERS} from '../../canvas/kl-canvas';\nimport {IMixMode} from '../../kl.types';\nimport {LANG} from '../../../language/language';\nimport {translateBlending} from '../../canvas/translate-blending';\n\n\nexport function klLayerManager(p_canvas: KlCanvas, p_func, p_rootDiv) {\n    let klCanvas: KlCanvas = p_canvas;\n    let layerElArr = [];\n    let layerHeight = 35;\n    let layerSpacing = 0;\n    let width = 250;\n    let oldHistoryState;\n    let updatefunc = p_func;\n    let uiState = 'right'; // 'left | 'right'\n\n\n    let largeThumbDiv = BB.el({\n        onClick: BB.handleClick,\n        css: {\n            position: \"absolute\",\n            right: \"280px\",\n            top: \"500px\",\n            background: \"#aaa\",\n            boxShadow: \"1px 1px 3px rgba(0,0,0,0.3)\",\n            pointerEvents: \"none\",\n            padding: '0',\n            border: \"1px solid #aaa\",\n            transition: \"opacity 0.3s ease-out\",\n            userSelect: 'none',\n            colorScheme: 'only light',\n        }\n    });\n    BB.createCheckerDataUrl(4, function(url) {\n        largeThumbDiv.style.backgroundImage = \"url(\" + url + \")\";\n    });\n    let largeThumbCanvas = document.createElement(\"canvas\");\n    largeThumbCanvas.style.display = \"block\";\n    largeThumbCanvas.width = 200;\n    largeThumbCanvas.height = 200;\n    largeThumbDiv.appendChild(largeThumbCanvas);\n    let largeThumbTimeout, largeThumbInTimeout;\n    let largeThumbInDocument = false;\n\n\n    let klCanvasLayerArr = klCanvas.getLayers();\n    let selectedSpotIndex = klCanvasLayerArr.length - 1;\n    let div = document.createElement(\"div\");\n    div.style.marginRight = \"10px\";\n    div.style.marginBottom = \"10px\";\n    div.style.marginLeft = \"10px\";\n    div.style.marginTop = \"10px\";\n    div.style.cursor = \"default\";\n\n    let listdiv = document.createElement(\"div\");\n    BB.css(listdiv, {\n        width: width + \"px\",\n        position: \"relative\"\n\n    });\n\n\n    function renameLayer(layer) {\n        let div = document.createElement('div');\n\n        let label = BB.el({\n            content: LANG('layers-rename-name') + ':',\n            css: {\n                marginRight: '5px'\n            }\n        });\n\n        const row = BB.el({\n            css: {\n                display: 'flex',\n            }\n        });\n        let input = document.createElement('input');\n        input.value = klCanvas.getLayer(layer).name;\n        input.setAttribute('data-ignore-focus', 'true');\n        const clearBtn = BB.el({\n            tagName: 'Button',\n            content: '<img src=\"' + removeLayerImg + '\" height=\"20\"/>',\n            title: LANG('layers-rename-clear'),\n            css: {\n                marginLeft: '10px',\n            },\n            onClick: () => {\n                input.value = '';\n                input.focus();\n            }\n        });\n        const suggestions = [\n            LANG('layers-rename-sketch'),\n            LANG('layers-rename-colors'),\n            LANG('layers-rename-lines'),\n            LANG('background'),\n            LANG('layers-rename-foreground'),\n        ];\n        const suggestionBtns = [];\n        const row2 = BB.el({\n            css: {\n                display: 'flex',\n                flexWrap: 'wrap',\n                marginTop: '5px',\n                marginLeft: '-5px',\n            }\n        }) as HTMLDivElement;\n        suggestions.forEach(item => {\n            const btn = BB.el({\n                parent: row2,\n                tagName: 'Button',\n                content: item,\n                onClick: () => {\n                    input.value = btn.textContent;\n                },\n                css: {\n                    margin: '5px 0 0 5px',\n                }\n            });\n            suggestionBtns.push(btn);\n        });\n\n        div.appendChild(label);\n        label.append(row, row2);\n        row.append(input, clearBtn);\n\n        setTimeout(function() {\n            input.focus();\n            input.select();\n        }, 10);\n\n        popup({\n            target: p_rootDiv,\n            message: `<b>${LANG('layers-rename-title')}</b>`,\n            div: div,\n            buttons: [LANG('layers-rename'), 'Cancel'],\n            primaries: [LANG('layers-rename')],\n            callback: function (val) {\n                BB.destroyEl(clearBtn);\n                suggestionBtns.forEach(item => {\n                    BB.destroyEl(item);\n                });\n                suggestionBtns.splice(0, suggestionBtns.length);\n                if (val === LANG('layers-rename')) {\n                    if (input.value === klCanvas.getLayer(layer).name) {\n                        return;\n                    }\n                    klCanvas.renameLayer(layer, input.value);\n                    createLayerList();\n                    klHistory.pause(true);\n                    updatefunc(layer);\n                    klHistory.pause(false);\n                }\n            },\n            clickOnEnter: LANG('layers-rename')\n        });\n    }\n\n\n    let layerListEl = BB.el({});\n\n    (div as any).disableButtons = function(){}; //probably remove\n    (div as any).enableButtons = function(){}; //probably remove\n    let addnewBtn = document.createElement(\"button\");\n    let duplicateBtn = document.createElement(\"button\");\n    let mergeBtn = document.createElement(\"button\");\n    let removeBtn = document.createElement(\"button\");\n    let renameBtn = document.createElement(\"button\");\n\n    function createButtons() {\n        let div = document.createElement(\"div\");\n        function async() {\n            BB.makeUnfocusable(addnewBtn);\n            BB.makeUnfocusable(duplicateBtn);\n            BB.makeUnfocusable(mergeBtn);\n            BB.makeUnfocusable(removeBtn);\n            BB.makeUnfocusable(renameBtn);\n\n            addnewBtn.style.cssFloat = 'left';\n            duplicateBtn.style.cssFloat = 'left';\n            mergeBtn.style.cssFloat = 'left';\n            removeBtn.style.cssFloat = 'left';\n            renameBtn.style.cssFloat = 'left';\n\n            addnewBtn.title = LANG('layers-new');\n            duplicateBtn.title = LANG('layers-duplicate');\n            removeBtn.title = LANG('layers-remove');\n            mergeBtn.title = LANG('layers-merge');\n            renameBtn.title = LANG('layers-rename-title');\n\n            addnewBtn.style.paddingLeft = \"5px\";\n            addnewBtn.style.paddingRight = \"3px\";\n\n            removeBtn.style.paddingLeft = \"5px\";\n            removeBtn.style.paddingRight = \"3px\";\n\n            duplicateBtn.style.paddingLeft = \"5px\";\n            duplicateBtn.style.paddingRight = \"3px\";\n\n            mergeBtn.style.paddingLeft = \"5px\";\n            mergeBtn.style.paddingRight = \"3px\";\n\n            renameBtn.style.height = \"30px\";\n            renameBtn.style.lineHeight = \"20px\";\n\n            addnewBtn.innerHTML = \"<img src='\" + addLayerImg + \"' height='20'/>\";\n            duplicateBtn.innerHTML = \"<img src='\" + duplicateLayerImg + \"' height='20'/>\";\n            mergeBtn.innerHTML = \"<img src='\" + mergeLayerImg + \"' height='20'/>\";\n            removeBtn.innerHTML = \"<img src='\" + removeLayerImg + \"' height='20'/>\";\n            renameBtn.innerHTML = \"<img src='\" + renameLayerImg + \"' height='20'/>\";\n            addnewBtn.style.marginRight = \"5px\";\n            removeBtn.style.marginRight = \"5px\";\n            duplicateBtn.style.marginRight = \"5px\";\n            mergeBtn.style.marginRight = \"5px\";\n            div.appendChild(addnewBtn);\n            div.appendChild(removeBtn);\n            div.appendChild(duplicateBtn);\n            div.appendChild(mergeBtn);\n            div.appendChild(renameBtn);\n            div.appendChild(BB.el({\n                css: {\n                    clear: 'both'\n                }\n            }));\n\n            let clearboth = document.createElement(\"div\");\n            clearboth.style.clear = \"both\";\n            clearboth.style.height = \"10px\";\n            div.appendChild(clearboth);\n\n\n            addnewBtn.onclick = function () {\n                if (klCanvas.addLayer(selectedSpotIndex) === false) {\n                    return;\n                }\n                klCanvasLayerArr = klCanvas.getLayers();\n\n                if (klCanvasLayerArr.length === MAX_LAYERS) {\n                    addnewBtn.disabled = true;\n                    duplicateBtn.disabled = true;\n                }\n                removeBtn.disabled = false;\n                selectedSpotIndex = selectedSpotIndex + 1;\n                createLayerList();\n                klHistory.pause(true);\n                updatefunc(selectedSpotIndex);\n                klHistory.pause(false);\n            };\n            duplicateBtn.onclick = function () {\n                if (klCanvas.duplicateLayer(selectedSpotIndex) === false) {\n                    return;\n                }\n                klCanvasLayerArr = klCanvas.getLayers();\n                if (klCanvasLayerArr.length === MAX_LAYERS) {\n                    addnewBtn.disabled = true;\n                    duplicateBtn.disabled = true;\n                }\n                removeBtn.disabled = false;\n                selectedSpotIndex++;\n                createLayerList();\n                klHistory.pause(true);\n                updatefunc(selectedSpotIndex);\n                klHistory.pause(false);\n            };\n            removeBtn.onclick = function () {\n                if (layerElArr.length <= 1) {\n                    return;\n                }\n\n                klCanvas.removeLayer(selectedSpotIndex);\n                if (selectedSpotIndex > 0) {\n                    selectedSpotIndex--;\n                }\n                klCanvasLayerArr = klCanvas.getLayers();\n                createLayerList();\n                klHistory.pause(true);\n                updatefunc(selectedSpotIndex);\n                klHistory.pause(false);\n                if (klCanvasLayerArr.length === 1) {\n                    removeBtn.disabled = true;\n                }\n                if (klCanvasLayerArr.length < MAX_LAYERS) {\n                    addnewBtn.disabled = false;\n                    duplicateBtn.disabled = false;\n                }\n            };\n            mergeBtn.onclick = function () {\n                if (selectedSpotIndex <= 0) {\n                    return;\n                }\n\n                function mergeDialog(p) {\n                    let div = document.createElement(\"div\");\n                    div.innerHTML = LANG('layers-merge-description');\n\n                    let options = new Options({\n                        optionArr: [\n                            {id: p.mixModeStr, label: translateBlending(p.mixModeStr)},\n                            {id: 'source-in', label: 'source-in'},\n                            {id: 'source-out', label: 'source-out'},\n                            {id: 'source-atop', label: 'source-atop'},\n                            {id: 'destination-in', label: 'destination-in'},\n                            {id: 'destination-out', label: 'destination-out'},\n                            {id: 'destination-atop', label: 'destination-atop'},\n                            {id: 'xor', label: 'xor'}\n                        ],\n                        initId: p.mixModeStr,\n                        onChange: function(id) {\n                            update();\n                        },\n                        isSmall: true\n                    });\n                    options.getElement().style.marginTop = '5px';\n                    div.appendChild(options.getElement());\n\n                    let preview = document.createElement(\"canvas\");\n                    preview.title = LANG('preview');\n                    let spacer = document.createElement(\"div\");\n                    spacer.innerHTML = \"<br/>\";\n                    spacer.style.clear = \"both\";\n                    div.appendChild(spacer);\n                    div.appendChild(preview);\n                    let thumbDimensions = BB.fitInto(p.topCanvas.width, p.topCanvas.height, 200, 200, 1);\n                    preview.width = thumbDimensions.width;\n                    preview.height = thumbDimensions.height;\n                    BB.css(preview, {\n                        display: \"block\",\n                        marginLeft: \"auto\",\n                        marginRight: \"auto\",\n                        colorScheme: 'only light',\n                    });\n                    preview.style.boxShadow = \"0 0 3px rgba(0,0,0,0.5)\";\n                    BB.createCheckerDataUrl(4, function(url) {\n                        preview.style.backgroundImage = \"url(\" + url + \")\";\n                    });\n\n                    let alphaCanvas = BB.copyCanvas(preview);\n                    alphaCanvas.getContext(\"2d\").drawImage(p.topCanvas, 0, 0, alphaCanvas.width, alphaCanvas.height);\n                    BB.convertToAlphaChannelCanvas(alphaCanvas);\n\n                    function update() {\n                        let ctx = preview.getContext(\"2d\");\n                        ctx.save();\n                        ctx.clearRect(0, 0, preview.width, preview.height);\n                        if (preview.width > p.topCanvas.width) {\n                            ctx.imageSmoothingEnabled = false;\n                        }\n                        ctx.drawImage(p.bottomCanvas, 0, 0, preview.width, preview.height);\n\n                        if (options.getValue() === 'as-alpha') {\n                            ctx.globalCompositeOperation = 'destination-in';\n                            ctx.globalAlpha = p.topOpacity;\n                            ctx.drawImage(alphaCanvas, 0, 0, preview.width, preview.height);\n                        } else {\n                            ctx.globalCompositeOperation = options.getValue();\n                            ctx.globalAlpha = p.topOpacity;\n                            ctx.drawImage(p.topCanvas, 0, 0, preview.width, preview.height);\n                        }\n                        ctx.restore();\n                    }\n\n                    update();\n\n\n                    let keyListener = new BB.KeyListener({\n                        onDown: function(keyStr) {\n                            if (keyStr === 'right') {\n                                options.next();\n                            }\n                            if (keyStr === 'left') {\n                                options.previous();\n                            }\n                        }\n                    });\n\n                    popup({\n                        target: p_rootDiv,\n                        message: `<b>${LANG('layers-merge-modal-title')}</b>`,\n                        div: div,\n                        buttons: [\"Ok\", \"Cancel\"],\n                        clickOnEnter: 'Ok',\n                        callback: function (val) {\n                            keyListener.destroy();\n                            options.destroy();\n                            if (val === \"Ok\") {\n                                p.callback(options.getValue());\n                            }\n                        }\n                    });\n                }\n                mergeDialog({\n                    topCanvas: klCanvasLayerArr[selectedSpotIndex].context.canvas,\n                    bottomCanvas: klCanvasLayerArr[selectedSpotIndex - 1].context.canvas,\n                    topOpacity: klCanvas.getLayer(selectedSpotIndex).opacity,\n                    mixModeStr: klCanvasLayerArr[selectedSpotIndex].mixModeStr,\n                    callback: function (mode) {\n                        klCanvas.mergeLayers(selectedSpotIndex, selectedSpotIndex - 1, mode);\n                        klCanvasLayerArr = klCanvas.getLayers();\n                        selectedSpotIndex--;\n                        if (klCanvasLayerArr.length === 1) {\n                            removeBtn.disabled = true;\n                        }\n                        if (klCanvasLayerArr.length < MAX_LAYERS) {\n                            addnewBtn.disabled = false;\n                            duplicateBtn.disabled = false;\n                        }\n                        createLayerList();\n                        klHistory.pause(true);\n                        updatefunc(selectedSpotIndex);\n                        klHistory.pause(false);\n                    }\n                });\n            };\n\n            renameBtn.onclick = function () {\n                renameLayer(selectedSpotIndex);\n            };\n        }\n        setTimeout(async, 1);\n        return div;\n    }\n    div.appendChild(createButtons());\n\n    let modeWrapper;\n    let modeSelect;\n    {\n        modeWrapper = BB.el({\n            content: LANG('layers-blending') + '&nbsp;',\n            css: {\n                fontSize: '15px'\n            }\n        });\n\n        modeSelect = new Select({\n            optionArr: [\n                'source-over',\n                null,\n                'darken',\n                'multiply',\n                'color-burn',\n                null,\n                'lighten',\n                'screen',\n                'color-dodge',\n                null,\n                'overlay',\n                'soft-light',\n                'hard-light',\n                null,\n                'difference',\n                'exclusion',\n                null,\n                'hue',\n                'saturation',\n                'color',\n                'luminosity',\n            ].map((item: IMixMode) => {\n                return item ? [item, translateBlending(item)] : null;\n            }),\n            onChange: function(val) {\n                klCanvas.setMixMode(selectedSpotIndex, val as IMixMode);\n                (div as any).update(selectedSpotIndex);\n            },\n            css: {\n                marginBottom: '10px'\n            }\n        });\n\n        modeWrapper.appendChild(modeSelect.getElement());\n        div.appendChild(modeWrapper);\n\n    }\n\n\n    function createLayerList() {\n        oldHistoryState = klHistory.getState();\n        function createLayerEntry(index) {\n            let layerName = klCanvas.getLayer(index).name;\n            let opacity = klCanvasLayerArr[index].opacity;\n            let layercanvas = klCanvasLayerArr[index].context.canvas;\n\n            let layer = document.createElement(\"div\");\n            layer.className = \"layerBox\";\n            layerElArr[index] = layer;\n            (layer as any).posY = ((klCanvasLayerArr.length - 1) * 35 - index * 35);\n            BB.css(layer, {\n                width: \"250px\",\n                height: \"34px\",\n                backgroundColor: \"rgb( 220, 220, 220)\",\n                border: \"1px solid #aaa\",\n                position: \"absolute\",\n                left: \"0 px\",\n                top: (layer as any).posY + \"px\",\n                transition: \"all 0.1s linear\",\n                borderRadius: \"5px\",\n                boxSizing: 'border-box'\n            });\n            let innerLayer = document.createElement(\"div\");\n            BB.css(innerLayer, {\n                position: \"relative\"\n            });\n\n            let container1 = document.createElement(\"div\");\n            BB.css(container1, {\n                width: \"250px\",\n                height: \"34px\"\n            });\n            let container2 = document.createElement(\"div\");\n            layer.appendChild(innerLayer);\n            innerLayer.appendChild(container1);\n            innerLayer.appendChild(container2);\n\n            (layer as any).spot = index;\n\n            //thumb\n            {\n                let thumbDimensions = BB.fitInto(layercanvas.width, layercanvas.height, 30, 30, 1);\n                let thumb = (layer as any).thumb = BB.canvas(thumbDimensions.width, thumbDimensions.height);\n\n                let thc = thumb.getContext(\"2d\");\n                thc.save();\n                if (thumb.width > layercanvas.width) {\n                    thc.imageSmoothingEnabled = false;\n                }\n                thc.drawImage(layercanvas, 0, 0, thumb.width, thumb.height);\n                thc.restore();\n                BB.css((layer as any).thumb, {\n                    position: \"absolute\",\n                    left: ((32 - (layer as any).thumb.width) / 2) + \"px\",\n                    top: ((32 - (layer as any).thumb.height) / 2) + \"px\",\n                    colorScheme: 'only light',\n                });\n                BB.createCheckerDataUrl(4, function(url) {\n                    thumb.style.backgroundImage = \"url(\" + url + \")\";\n                });\n            }\n\n            //layerlabel\n            {\n                (layer as any).label = document.createElement(\"div\");\n                (layer as any).lname = layerName;\n                (layer as any).label.append((layer as any).lname);\n\n                BB.css((layer as any).label, {\n                    position: \"absolute\",\n                    left: (1 + 32 + 5) + \"px\",\n                    top: 1 + \"px\",\n                    fontSize: \"13px\",\n                    width: \"170px\",\n                    height: \"20px\",\n                    overflow: \"hidden\",\n                    color: \"#666\",\n                    whiteSpace: 'nowrap'\n                });\n\n                (layer as any).label.ondblclick = function() {\n                    renameLayer((layer as any).spot);\n                };\n            }\n            //layerlabel\n            {\n                (layer as any).opacityLabel = document.createElement(\"div\");\n                (layer as any).opacity = opacity;\n                (layer as any).opacityLabel.append(parseInt('' + ((layer as any).opacity * 100)) + \"%\");\n\n                BB.css((layer as any).opacityLabel, {\n                    position: \"absolute\",\n                    left: (250 - 1 - 5 - 50) + \"px\",\n                    top: 1 + \"px\",\n                    fontSize: \"13px\",\n                    textAlign: \"right\",\n                    width: \"50px\",\n                    color: \"#666\",\n                    transition: \"color 0.2s ease-in-out\"\n                });\n            }\n\n            let oldOpacity;\n            let opacitySlider = new PointSlider({\n                init: (layer as any).opacity,\n                width: 204,\n                pointSize: 14,\n                callback: function(sliderValue, isFirst, isLast) {\n                    if (isFirst) {\n                        oldOpacity = klCanvas.getLayer((layer as any).spot).opacity;\n                        klHistory.pause(true);\n                        return;\n                    }\n                    if (isLast) {\n                        klHistory.pause(false);\n                        if (oldOpacity !== sliderValue) {\n                            klCanvas.layerOpacity((layer as any).spot, sliderValue);\n                        }\n                        return;\n                    }\n                    (layer as any).opacityLabel.innerHTML = Math.round(sliderValue * 100) + \"%\";\n                    klCanvas.layerOpacity((layer as any).spot, sliderValue);\n                }\n            });\n            BB.css(opacitySlider.getEl(), {\n                position: 'absolute',\n                left: '39px',\n                top: '17px'\n            });\n            (layer as any).opacitySlider = opacitySlider;\n\n            //larger layer preview - hover\n            BB.setEventListener((layer as any).thumb, 'onpointerover', function (e) {\n                if (e.buttons !== 0 && (!e.pointerType || e.pointerType !== 'touch')) { //shouldn't show while dragging\n                    return;\n                }\n\n                let thumbDimensions = BB.fitInto(layercanvas.width, layercanvas.height, 250, 250, 1);\n\n                if (largeThumbCanvas.width !== thumbDimensions.width || largeThumbCanvas.height !== thumbDimensions.height) {\n                    largeThumbCanvas.width = thumbDimensions.width;\n                    largeThumbCanvas.height = thumbDimensions.height;\n                }\n                let ctx = largeThumbCanvas.getContext(\"2d\");\n                ctx.save();\n                if (largeThumbCanvas.width > layercanvas.width) {\n                    ctx.imageSmoothingEnabled = false;\n                }\n                ctx.imageSmoothingQuality = 'high';\n                ctx.clearRect(0, 0, largeThumbCanvas.width, largeThumbCanvas.height);\n                ctx.drawImage(layercanvas, 0, 0, largeThumbCanvas.width, largeThumbCanvas.height);\n                ctx.restore();\n                BB.css(largeThumbDiv, {\n                    top: (e.clientY - largeThumbCanvas.height / 2) + \"px\",\n                    opacity: '0'\n                });\n                if (largeThumbInDocument === false) {\n                    document.body.appendChild(largeThumbDiv);\n                    largeThumbInDocument = true;\n                }\n                clearTimeout(largeThumbInTimeout);\n                largeThumbInTimeout = setTimeout(function () {\n                    BB.css(largeThumbDiv, {\n                        opacity: '1'\n                    });\n                }, 20);\n                clearTimeout(largeThumbTimeout);\n            });\n            BB.setEventListener((layer as any).thumb, 'onpointerout', function () {\n                clearTimeout(largeThumbInTimeout);\n                BB.css(largeThumbDiv, {\n                    opacity: '0'\n                });\n                clearTimeout(largeThumbTimeout);\n                largeThumbTimeout = setTimeout(function () {\n                    if (!largeThumbInDocument) {\n                        return;\n                    }\n                    document.body.removeChild(largeThumbDiv);\n                    largeThumbInDocument = false;\n                }, 300);\n            });\n\n            container1.appendChild((layer as any).thumb);\n            container1.appendChild((layer as any).label);\n            container1.appendChild((layer as any).opacityLabel);\n            container1.appendChild(opacitySlider.getEl());\n            let dragstart = false;\n            let freshSelection = false;\n\n            //events for moving layers up and down\n            function dragEventHandler(event) {\n                if (event.type === 'pointerdown' && event.button === 'left') {\n                    BB.css(layer, {\n                        transition: \"box-shadow 0.3s ease-in-out\"\n                    });\n                    //dragContainer.appendChild(layer);\n                    layer.style.zIndex = '1';\n                    lastpos = (layer as any).spot;\n                    freshSelection = false;\n                    if (!(layer as any).isSelected) {\n                        freshSelection = true;\n                        (div as any).activateLayer((layer as any).spot);\n                    }\n                    dragstart = true;\n\n                } else if (event.type === 'pointermove' && event.button === 'left') {\n\n                    if (dragstart) {\n                        dragstart = false;\n                        BB.css(layer, {\n                            boxShadow: \"1px 3px 5px rgba(0,0,0,0.4)\"\n                        });\n                    }\n                    (layer as any).posY += event.dY;\n                    let corrected = Math.max(0, Math.min((klCanvasLayerArr.length - 1) * (35), (layer as any).posY));\n                    layer.style.top = corrected + \"px\";\n                    updateLayersVerticalPosition((layer as any).spot, posToSpot((layer as any).posY));\n\n                }\n                if (event.type === 'pointerup') {\n                    BB.css(layer, {\n                        transition: \"all 0.1s linear\"\n                    });\n                    setTimeout(function () {\n                        BB.css(layer, {\n                            boxShadow: \"\"\n                        });\n                    }, 20);\n                    (layer as any).posY = Math.max(0, Math.min((klCanvasLayerArr.length - 1) * (35), (layer as any).posY));\n                    //regularContainer.appendChild(layer);\n                    layer.style.zIndex = \"\";\n                    let newSpot = posToSpot((layer as any).posY);\n                    let oldSpot = (layer as any).spot;\n                    move((layer as any).spot, newSpot);\n                    if (oldSpot != newSpot) {\n                        klHistory.pause(true);\n                        updatefunc(selectedSpotIndex);\n                        klHistory.pause(false);\n                    }\n                    if (oldSpot === newSpot && freshSelection) {\n                        updatefunc(selectedSpotIndex);\n                    }\n                    freshSelection = false;\n                }\n            }\n\n            (layer as any).pointerListener = new BB.PointerListener({\n                target: container1,\n                maxPointers: 1,\n                onPointer: dragEventHandler\n            });\n\n            layerListEl.appendChild(layer);\n        }\n        layerElArr = [];\n        while (layerListEl.firstChild) {\n            let child = layerListEl.firstChild;\n            (child as any).pointerListener.destroy();\n            (child as any).opacitySlider.destroy();\n            layerListEl.removeChild(child);\n        }\n        for (let i = 0; i < klCanvasLayerArr.length; i++) {\n            createLayerEntry(i);\n        }\n        (div as any).activateLayer(selectedSpotIndex);\n        updateHeight();\n    }\n\n\n    listdiv.appendChild(layerListEl);\n    div.appendChild(listdiv);\n\n\n    function posToSpot(p) {\n        let result = parseInt('' + ((p) / (layerHeight + layerSpacing) + 0.5));\n        result = Math.min(klCanvasLayerArr.length - 1, Math.max(0, result));\n        result = klCanvasLayerArr.length - result - 1;\n        return result;\n    }\n\n    let lastpos = 0;\n\n    //update css position of all layers that are not being dragged, while dragging\n    function updateLayersVerticalPosition(id, newspot) {\n        newspot = Math.min(klCanvasLayerArr.length - 1, Math.max(0, newspot));\n        if (newspot === lastpos) {\n            return;\n        }\n        for (let i = 0; i < klCanvasLayerArr.length; i++) {\n            if (layerElArr[i].spot === id) { // <- here\n                continue;\n            }\n            let posy = layerElArr[i].spot;\n            if (layerElArr[i].spot > id) {\n                posy--;\n            }\n            if (posy >= newspot) {\n                posy++;\n            }\n            layerElArr[i].posY = (layerHeight + layerSpacing) * (klCanvasLayerArr.length - posy - 1);\n            layerElArr[i].style.top = layerElArr[i].posY + \"px\";\n        }\n        lastpos = newspot;\n    }\n\n    function move(oldSpotIndex, newSpotIndex) {\n        if (isNaN(oldSpotIndex) || isNaN(newSpotIndex)) {\n            throw 'layermanager - invalid move';\n        }\n        for (let i = 0; i < klCanvasLayerArr.length; i++) {\n            (function (i) {\n                let posy = layerElArr[i].spot; // <- here\n                if (layerElArr[i].spot === oldSpotIndex) {\n                    posy = newSpotIndex;\n                } else {\n                    if (layerElArr[i].spot > oldSpotIndex)\n                        posy--;\n                    if (posy >= newSpotIndex)\n                        posy++;\n                }\n                layerElArr[i].spot = posy;\n                layerElArr[i].posY = (layerHeight + layerSpacing) * (klCanvasLayerArr.length - posy - 1);\n                layerElArr[i].style.top = layerElArr[i].posY + \"px\";\n            }(i));\n        }\n        if (oldSpotIndex === newSpotIndex) {\n            return;\n        }\n        klCanvas.moveLayer(selectedSpotIndex, newSpotIndex - oldSpotIndex);\n        klCanvasLayerArr = klCanvas.getLayers();\n        selectedSpotIndex = newSpotIndex;\n        mergeBtn.disabled = selectedSpotIndex === 0;\n    }\n\n\n    //updating the thumbs in interval\n    //don't update when: manager not visible || layer didn't change || is drawing\n    let updateThumbsInterval = setInterval(function() {\n        if (div.style.display !== \"block\") {\n            return;\n        }\n\n        let historyState = klHistory.getState();\n        if (historyState === oldHistoryState) {\n            return;\n        }\n        oldHistoryState = historyState;\n\n        for (let i = 0; i < layerElArr.length; i++) {\n            if (selectedSpotIndex === layerElArr[i].spot && klCanvasLayerArr[layerElArr[i].spot]) { // second check, because might be out of date\n                let ctx = layerElArr[i].thumb.getContext(\"2d\");\n                ctx.save();\n                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n                if (klCanvasLayerArr[layerElArr[i].spot].context.canvas.width < layerElArr[i].thumb.width) {\n                    ctx.imageSmoothingEnabled = false;\n                }\n                ctx.drawImage(klCanvasLayerArr[layerElArr[i].spot].context.canvas, 0, 0, layerElArr[i].thumb.width, layerElArr[i].thumb.height);\n                ctx.restore();\n            }\n        }\n\n    }, 1);\n\n    function updateHeight() {\n        layerListEl.style.height = (layerElArr.length * 35) + 'px';\n    }\n\n    // ---- interface ----\n\n    (div as any).update = function (activeLayerSpotIndex) {\n        klCanvasLayerArr = klCanvas.getLayers();\n        if (activeLayerSpotIndex || activeLayerSpotIndex === 0) {\n            selectedSpotIndex = activeLayerSpotIndex;\n        }\n        removeBtn.disabled = klCanvasLayerArr.length === 1;\n        if (klCanvasLayerArr.length === MAX_LAYERS) {\n            addnewBtn.disabled = true;\n            duplicateBtn.disabled = true;\n        } else {\n            addnewBtn.disabled = false;\n            duplicateBtn.disabled = false;\n        }\n        setTimeout(function() {\n            createLayerList();\n        }, 1);\n    };\n    (div as any).getSelected = function () {\n        return selectedSpotIndex;\n    };\n    (div as any).activateLayer = function (spotIndex) {\n        if (spotIndex < 0 || spotIndex > layerElArr.length - 1) {\n            throw 'invalid spotIndex ' + spotIndex + ', layerElArr.length ' + layerElArr.length;\n        }\n        selectedSpotIndex = spotIndex;\n        modeSelect.setValue(klCanvasLayerArr[selectedSpotIndex].mixModeStr);\n        for (let i = 0; i < layerElArr.length; i++) {\n            if (selectedSpotIndex === layerElArr[i].spot) {\n                layerElArr[i].style.backgroundColor = \"rgb( 250, 250, 250)\";\n                layerElArr[i].label.style.color = \"#000\";\n                layerElArr[i].style.boxShadow = \"\";\n                layerElArr[i].style.border = \"1px solid var(--active-highlight-color)\";\n                layerElArr[i].opacitySlider.setActive(true);\n                layerElArr[i].isSelected = true;\n            } else {\n                layerElArr[i].style.backgroundColor = \"rgb( 220, 220, 220)\";\n                layerElArr[i].label.style.color = \"#666\";\n                layerElArr[i].style.boxShadow = \"\";\n                layerElArr[i].style.border = \"1px solid rgb(158, 158, 158)\";\n                layerElArr[i].opacitySlider.setActive(false);\n                layerElArr[i].isSelected = false;\n            }\n        }\n        mergeBtn.disabled = selectedSpotIndex === 0;\n    };\n    (div as any).setUiState = function(stateStr) {\n        uiState = '' + stateStr;\n\n        if (uiState === 'left') {\n            BB.css(largeThumbDiv, {\n                left: '280px',\n                right: ''\n            });\n        } else {\n            BB.css(largeThumbDiv, {\n                left: '',\n                right: '280px'\n            });\n        }\n    };\n\n    createLayerList();\n\n    return div;\n}\n","/**\n * Topmost row of buttons in toolspace\n *\n * p = { // button click callbacks\n *     onSubmit: function(),\n *     onLeftRight: function(),\n *     onHelp: function()\n * }\n *\n * @param p\n * @constructor\n */\nimport {BB} from \"../bb/bb\";\n// @ts-ignore\nimport uiSwapImg from 'url:~/src/app/img/ui/ui-swap-lr.svg';\n// @ts-ignore\nimport helpImg from 'url:~/src/app/img/ui/help.svg';\nimport {LANG} from '../language/language';\n\nexport class ToolspaceTopRow {\n    el: HTMLDivElement;\n\n    constructor(p: {onSubmit: () => void, onLeftRight: () => void, onHelp: () => void}) {\n        let div = document.createElement('div');\n        this.el = div;\n        BB.css(div, {\n            height: '36px',\n            //background: '#f00',\n            display: 'flex',\n            backgroundImage: 'linear-gradient(to top, rgba(255, 255, 255, 0) 20%, rgba(255, 255, 255, 0.6) 100%)'\n        });\n\n        function createButton(p) {\n            let padding = 6 + (p.extraPadding ? p.extraPadding : 0);\n            let result = BB.el({\n                className: 'toolspace-row-button nohighlight',\n                title: p.title,\n                onClick: p.onClick,\n                css: {\n                    padding: p.content ? '' : (p.contain ? padding + 'px 0' : ''),\n                }\n            });\n            if (p.content) {\n                result.appendChild(p.content);\n            } else {\n                let im = BB.el({\n                    css: {\n                        backgroundImage: 'url(\\'' + p.image + '\\')',\n                        backgroundRepeat: 'no-repeat',\n                        backgroundPosition: 'center',\n                        backgroundSize: p.contain ? 'contain' : '',\n                        //filter: 'grayscale(1)',\n                        height: '100%'\n                    }\n                });\n                im.style.pointerEvents = 'none';\n                result.appendChild(im);\n            }\n            (result as any).pointerListener = new BB.PointerListener({ // because :hover causes problems w touch\n                target: result,\n                onEnterLeave: function(isOver) {\n                    if (isOver) {\n                        BB.addClassName(result, 'toolspace-row-button-hover');\n                    } else {\n                        BB.removeClassName(result, 'toolspace-row-button-hover');\n                    }\n                }\n            });\n            return result;\n        }\n\n        let submitButton = createButton({\n            onClick: p.onSubmit,\n            title: LANG('submit-title'),\n            content: BB.el({\n                content: LANG('submit'),\n                className: 'toolspace-row-button__submit',\n                css: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    width: '100%',\n                    height: '100%'\n                }\n            }),\n            contain: true\n        });\n        submitButton.style.width = '45px';\n\n        let helpButton = createButton({\n            onClick: p.onHelp,\n            title: LANG('help'),\n            image: helpImg,\n            contain: true\n        });\n\n        let leftRightButton = createButton({\n            onClick: p.onLeftRight,\n            title: LANG('switch-ui-left-right'),\n            image: uiSwapImg,\n            contain: true\n        });\n\n        div.appendChild(submitButton);\n        div.appendChild(leftRightButton);\n        div.appendChild(helpButton);\n    }\n\n    getElement() {\n        return this.el;\n    }\n}\n","\nexport const eventResMs = 60;","/*\n * glfx.script\n * http://evanw.github.com/glfx.js/\n *\n * Copyright 2011 Evan Wallace\n * Released under the MIT license\n *\n * modifications by bitbof\n */\nexport const fx = (function() {\nlet exports: any = {};\n\n// src/OES_texture_float_linear-polyfill.script\n// From: https://github.com/evanw/OES_texture_float_linear-polyfill\n(function() {\n  // Uploads a 2x2 floating-point texture where one pixel is 2 and the other\n  // three pixels are 0. Linear filtering is only supported if a sample taken\n  // from the center of that texture is (2 + 0 + 0 + 0) / 4 = 0.5.\n  function supportsOESTextureFloatLinear(gl) {\n    // Need floating point textures in the first place\n    if (!gl.getExtension('OES_texture_float')) {\n      return false;\n    }\n\n    // Create a render target\n    let framebuffer = gl.createFramebuffer();\n    let byteTexture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, byteTexture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, byteTexture, 0);\n\n    // Create a simple floating-point texture with value of 0.5 in the center\n    let rgba = [\n      2, 0, 0, 0,\n      0, 0, 0, 0,\n      0, 0, 0, 0,\n      0, 0, 0, 0\n    ];\n    let floatTexture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, floatTexture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.FLOAT, new Float32Array(rgba));\n\n    // Create the test shader\n    let program = gl.createProgram();\n    let vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    let fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(vertexShader, '\\\n      attribute vec2 vertex;\\\n      void main() {\\\n        gl_Position = vec4(vertex, 0.0, 1.0);\\\n      }\\\n    ');\n    gl.shaderSource(fragmentShader, '\\\n      uniform sampler2D texture;\\\n      void main() {\\\n        gl_FragColor = texture2D(texture, vec2(0.5));\\\n      }\\\n    ');\n    gl.compileShader(vertexShader);\n    gl.compileShader(fragmentShader);\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n\n    // Create a buffer containing a single point\n    let buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0]), gl.STREAM_DRAW);\n    gl.enableVertexAttribArray(0);\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n\n    // Render the point and read back the rendered pixel\n    let pixel = new Uint8Array(4);\n    gl.useProgram(program);\n    gl.viewport(0, 0, 1, 1);\n    gl.bindTexture(gl.TEXTURE_2D, floatTexture);\n    gl.drawArrays(gl.POINTS, 0, 1);\n    gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n\n    // The center sample will only have a value of 0.5 if linear filtering works\n    return pixel[0] === 127 || pixel[0] === 128;\n  }\n\n  // The constructor for the returned extension object\n  function OESTextureFloatLinear() {\n  }\n\n  // Cache the extension so it's specific to each context like extensions should be\n  function getOESTextureFloatLinear(gl) {\n    if (gl.$OES_texture_float_linear$ === void 0) {\n      Object.defineProperty(gl, '$OES_texture_float_linear$', {\n        enumerable: false,\n        configurable: false,\n        writable: false,\n        value: new OESTextureFloatLinear()\n      });\n    }\n    return gl.$OES_texture_float_linear$;\n  }\n\n  // This replaces the real getExtension()\n  function getExtension(name) {\n    return name === 'OES_texture_float_linear'\n      ? getOESTextureFloatLinear(this)\n      : oldGetExtension.call(this, name);\n  }\n\n  // This replaces the real getSupportedExtensions()\n  function getSupportedExtensions() {\n    let extensions = oldGetSupportedExtensions.call(this);\n    if (extensions.indexOf('OES_texture_float_linear') === -1) {\n      extensions.push('OES_texture_float_linear');\n    }\n    return extensions;\n  }\n\n  // Get a WebGL context\n  try {\n    let gl = document.createElement('canvas').getContext('experimental-webgl');\n  } catch (e) {\n  }\n\n  // Don't install the polyfill if the browser already supports it or doesn't have WebGL\n  if (!gl || (gl as any).getSupportedExtensions().indexOf('OES_texture_float_linear') !== -1) {\n    return;\n  }\n\n  // Install the polyfill if linear filtering works with floating-point textures\n  let oldGetExtension;\n  let oldGetSupportedExtensions;\n  if (supportsOESTextureFloatLinear(gl)) {\n    oldGetExtension = WebGLRenderingContext.prototype.getExtension;\n    oldGetSupportedExtensions = WebGLRenderingContext.prototype.getSupportedExtensions;\n    WebGLRenderingContext.prototype.getExtension = getExtension;\n    WebGLRenderingContext.prototype.getSupportedExtensions = getSupportedExtensions;\n  }\n}());\n\n// src/core\\canvas.script\nvar gl;\n\nfunction clamp(lo, value, hi) {\n    return Math.max(lo, Math.min(value, hi));\n}\n\nfunction wrapTexture(texture) {\n    return {\n        _: texture,\n        loadContentsOf: function(element) {\n            // Make sure that we're using the correct global WebGL context\n            gl = this._.gl;\n            this._.loadContentsOf(element);\n        },\n        destroy: function() {\n            // Make sure that we're using the correct global WebGL context\n            gl = this._.gl;\n            this._.destroy();\n        }\n    };\n}\n\nfunction texture(element) {\n    return wrapTexture(Texture.fromElement(element));\n}\n\nfunction initialize(width, height) {\n    let type = gl.UNSIGNED_BYTE;\n\n    // Go for floating point buffer textures if we can, it'll make the bokeh\n    // filter look a lot better. Note that on Windows, ANGLE does not let you\n    // render to a floating-point texture when linear filtering is enabled.\n    // See http://crbug.com/172278 for more information.\n    if (gl.getExtension('OES_texture_float') && gl.getExtension('OES_texture_float_linear')) {\n        let testTexture = new Texture(100, 100, gl.RGBA, gl.FLOAT);\n        try {\n            // Only use gl.FLOAT if we can render to it\n            testTexture.drawTo(function() { type = gl.FLOAT; });\n        } catch (e) {\n        }\n        testTexture.destroy();\n    }\n\n    if (this._.texture) this._.texture.destroy();\n    if (this._.spareTexture) this._.spareTexture.destroy();\n    this.width = width;\n    this.height = height;\n    this._.texture = new Texture(width, height, gl.RGBA, type);\n    this._.spareTexture = new Texture(width, height, gl.RGBA, type);\n    this._.extraTexture = this._.extraTexture || new Texture(0, 0, gl.RGBA, type);\n    this._.flippedShader = this._.flippedShader || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            gl_FragColor = texture2D(texture, vec2(texCoord.x, 1.0 - texCoord.y));\\\n        }\\\n    ', 'flippedShader');\n    this._.isInitialized = true;\n}\n\n/*\n   Draw a texture to the canvas, with an optional width and height to scale to.\n   If no width and height are given then the original texture width and height\n   are used.\n*/\nfunction draw(texture, width, height) {\n    if (!this._.isInitialized || texture._.width != this.width || texture._.height != this.height) {\n        initialize.call(this, width ? width : texture._.width, height ? height : texture._.height);\n    }\n\n    texture._.use();\n    this._.texture.drawTo(function() {\n        Shader.getDefaultShader().drawRect();\n    });\n\n    return this;\n}\n\nfunction update() {\n    this._.texture.use();\n    this._.flippedShader.drawRect();\n    return this;\n}\n\nfunction simpleShader(shader, uniforms, textureIn, textureOut) {\n    (textureIn || this._.texture).use();\n    this._.spareTexture.drawTo(function() {\n        shader.uniforms(uniforms).drawRect();\n    });\n    this._.spareTexture.swapWith(textureOut || this._.texture);\n}\n\nfunction replace(node) {\n    node.parentNode.insertBefore(this, node);\n    node.parentNode.removeChild(node);\n    return this;\n}\n\nfunction contents() {\n    let texture = new Texture(this._.texture.width, this._.texture.height, gl.RGBA, gl.UNSIGNED_BYTE);\n    this._.texture.use();\n    texture.drawTo(function() {\n        Shader.getDefaultShader().drawRect();\n    });\n    return wrapTexture(texture);\n}\n\n/*\n   Get a Uint8 array of pixel values: [r, g, b, a, r, g, b, a, ...]\n   Length of the array will be width * height * 4.\n*/\nfunction getPixelArray() {\n    let w = this._.texture.width;\n    let h = this._.texture.height;\n    let array = new Uint8Array(w * h * 4);\n    this._.texture.drawTo(function() {\n        gl.readPixels(0, 0, w, h, gl.RGBA, gl.UNSIGNED_BYTE, array);\n    });\n    return array;\n}\n\nfunction wrap(func) {\n    return function() {\n        // Make sure that we're using the correct global WebGL context\n        gl = this._.gl;\n\n        // Now that the context has been switched, we can call the wrapped function\n        return func.apply(this, arguments);\n    };\n}\n\nexports.canvas = function() {\n    let canvas: any = document.createElement('canvas');\n    try {\n        gl = canvas.getContext('experimental-webgl', { premultipliedAlpha: false });\n    } catch (e) {\n        gl = null;\n    }\n    if (!gl) {\n        throw 'This browser does not support WebGL';\n    }\n    canvas._ = {\n        gl: gl,\n        isInitialized: false,\n        texture: null,\n        spareTexture: null,\n        flippedShader: null\n    };\n\n    // Core methods\n    canvas.texture = wrap(texture);\n    canvas.draw = wrap(draw);\n    canvas.update = wrap(update);\n    canvas.replace = wrap(replace);\n    canvas.contents = wrap(contents);\n    canvas.getPixelArray = wrap(getPixelArray);\n\n    // Filter methods\n    canvas.brightnessContrast = wrap(brightnessContrast);\n    canvas.hexagonalPixelate = wrap(hexagonalPixelate);\n    canvas.hueSaturation = wrap(hueSaturation);\n    canvas.colorHalftone = wrap(colorHalftone);\n    canvas.triangleBlur = wrap(triangleBlur);\n    canvas.unsharpMask = wrap(unsharpMask);\n    canvas.perspective = wrap(perspective);\n    canvas.matrixWarp = wrap(matrixWarp);\n    canvas.bulgePinch = wrap(bulgePinch);\n    canvas.tiltShift = wrap(tiltShift);\n    canvas.dotScreen = wrap(dotScreen);\n    canvas.edgeWork = wrap(edgeWork);\n    canvas.lensBlur = wrap(lensBlur);\n    canvas.zoomBlur = wrap(zoomBlur);\n    canvas.noise = wrap(noise);\n    canvas.denoise = wrap(denoise);\n    canvas.curves = wrap(curves);\n    canvas.swirl = wrap(swirl);\n    canvas.ink = wrap(ink);\n    canvas.vignette = wrap(vignette);\n    canvas.vibrance = wrap(vibrance);\n    canvas.sepia = wrap(sepia);\n    canvas.invert = wrap(invert);\n    canvas.toAlpha = wrap(toAlpha);\n\n    return canvas;\n};\nexports.splineInterpolate = splineInterpolate;\n\n// src/core\\matrix.script\n// from javax.media.jai.PerspectiveTransform\n\nfunction getSquareToQuad(x0, y0, x1, y1, x2, y2, x3, y3) {\n    let dx1 = x1 - x2;\n    let dy1 = y1 - y2;\n    let dx2 = x3 - x2;\n    let dy2 = y3 - y2;\n    let dx3 = x0 - x1 + x2 - x3;\n    let dy3 = y0 - y1 + y2 - y3;\n    let det = dx1*dy2 - dx2*dy1;\n    let a = (dx3*dy2 - dx2*dy3) / det;\n    let b = (dx1*dy3 - dx3*dy1) / det;\n    return [\n        x1 - x0 + a*x1, y1 - y0 + a*y1, a,\n        x3 - x0 + b*x3, y3 - y0 + b*y3, b,\n        x0, y0, 1\n    ];\n}\n\nfunction getInverse(m) {\n    let a = m[0], b = m[1], c = m[2];\n    let d = m[3], e = m[4], f = m[5];\n    let g = m[6], h = m[7], i = m[8];\n    let det = a*e*i - a*f*h - b*d*i + b*f*g + c*d*h - c*e*g;\n    return [\n        (e*i - f*h) / det, (c*h - b*i) / det, (b*f - c*e) / det,\n        (f*g - d*i) / det, (a*i - c*g) / det, (c*d - a*f) / det,\n        (d*h - e*g) / det, (b*g - a*h) / det, (a*e - b*d) / det\n    ];\n}\n\nfunction multiply(a, b) {\n    return [\n        a[0]*b[0] + a[1]*b[3] + a[2]*b[6],\n        a[0]*b[1] + a[1]*b[4] + a[2]*b[7],\n        a[0]*b[2] + a[1]*b[5] + a[2]*b[8],\n        a[3]*b[0] + a[4]*b[3] + a[5]*b[6],\n        a[3]*b[1] + a[4]*b[4] + a[5]*b[7],\n        a[3]*b[2] + a[4]*b[5] + a[5]*b[8],\n        a[6]*b[0] + a[7]*b[3] + a[8]*b[6],\n        a[6]*b[1] + a[7]*b[4] + a[8]*b[7],\n        a[6]*b[2] + a[7]*b[5] + a[8]*b[8]\n    ];\n}\n\n// src/core\\shader.script\nvar Shader = (function() {\n    function isArray(obj) {\n        return Object.prototype.toString.call(obj) == '[object Array]';\n    }\n\n    function isNumber(obj) {\n        return Object.prototype.toString.call(obj) == '[object Number]';\n    }\n\n    function compileSource(type, source, nameStr) {\n        let shader = gl.createShader(type);\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n            throw 'compile error: ' + nameStr + ' - ' + gl.getShaderInfoLog(shader);\n        }\n        return shader;\n    }\n\n    let defaultVertexSource = '\\\n    attribute vec2 vertex;\\\n    attribute vec2 _texCoord;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n        texCoord = _texCoord;\\\n        gl_Position = vec4(vertex * 2.0 - 1.0, 0.0, 1.0);\\\n    }';\n\n    let defaultFragmentSource = '\\\n    uniform sampler2D texture;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n        gl_FragColor = texture2D(texture, texCoord);\\\n    }';\n\n    // added test 2020-04-27 bitbof\n    let floatPrecision = null;\n    function testPrecisionSupport(precisionType) {\n        let format = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, precisionType);\n        return format !== null && format.precision !== 0;\n    }\n\n    function Shader(vertexSource?, fragmentSource?, nameStr?) {\n        this.vertexAttribute = null;\n        this.texCoordAttribute = null;\n        this.program = gl.createProgram();\n        vertexSource = vertexSource || defaultVertexSource;\n        fragmentSource = fragmentSource || defaultFragmentSource;\n        if (floatPrecision === null) {\n            floatPrecision = testPrecisionSupport(gl.HIGH_FLOAT) ? 'highp' : (testPrecisionSupport(gl.MEDIUM_FLOAT) ? 'mediump' : 'lowp');\n        }\n        fragmentSource = 'precision ' + floatPrecision + ' float;' + fragmentSource; // annoying requirement is annoying\n        gl.attachShader(this.program, compileSource(gl.VERTEX_SHADER, vertexSource, nameStr + '(vertex)'));\n        gl.attachShader(this.program, compileSource(gl.FRAGMENT_SHADER, fragmentSource, nameStr + '(fragment)'));\n        gl.linkProgram(this.program);\n        if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n            throw 'link error: ' + gl.getProgramInfoLog(this.program);\n        }\n    }\n\n    Shader.prototype.destroy = function() {\n        gl.deleteProgram(this.program);\n        this.program = null;\n    };\n\n    Shader.prototype.uniforms = function(uniforms) {\n        gl.useProgram(this.program);\n        for (var name in uniforms) {\n            if (!uniforms.hasOwnProperty(name)) continue;\n            let location = gl.getUniformLocation(this.program, name);\n            if (location === null) continue; // will be null if the uniform isn't used in the shader\n            let value = uniforms[name];\n            if (isArray(value)) {\n                switch (value.length) {\n                    case 1: gl.uniform1fv(location, new Float32Array(value)); break;\n                    case 2: gl.uniform2fv(location, new Float32Array(value)); break;\n                    case 3: gl.uniform3fv(location, new Float32Array(value)); break;\n                    case 4: gl.uniform4fv(location, new Float32Array(value)); break;\n                    case 9: gl.uniformMatrix3fv(location, false, new Float32Array(value)); break;\n                    case 16: gl.uniformMatrix4fv(location, false, new Float32Array(value)); break;\n                    default: throw 'dont\\'t know how to load uniform \"' + name + '\" of length ' + value.length;\n                }\n            } else if (isNumber(value)) {\n                gl.uniform1f(location, value);\n            } else {\n                throw 'attempted to set uniform \"' + name + '\" to invalid value ' + (value || 'undefined').toString();\n            }\n        }\n        // allow chaining\n        return this;\n    };\n\n    // textures are uniforms too but for some reason can't be specified by gl.uniform1f,\n    // even though floating point numbers represent the integers 0 through 7 exactly\n    Shader.prototype.textures = function(textures) {\n        gl.useProgram(this.program);\n        for (var name in textures) {\n            if (!textures.hasOwnProperty(name)) continue;\n            gl.uniform1i(gl.getUniformLocation(this.program, name), textures[name]);\n        }\n        // allow chaining\n        return this;\n    };\n\n    Shader.prototype.drawRect = function(left, top, right, bottom) {\n        let undefined;\n        let viewport = gl.getParameter(gl.VIEWPORT);\n        top = top !== undefined ? (top - viewport[1]) / viewport[3] : 0;\n        left = left !== undefined ? (left - viewport[0]) / viewport[2] : 0;\n        right = right !== undefined ? (right - viewport[0]) / viewport[2] : 1;\n        bottom = bottom !== undefined ? (bottom - viewport[1]) / viewport[3] : 1;\n        if (gl.vertexBuffer == null) {\n            gl.vertexBuffer = gl.createBuffer();\n        }\n        gl.bindBuffer(gl.ARRAY_BUFFER, gl.vertexBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([ left, top, left, bottom, right, top, right, bottom ]), gl.STATIC_DRAW);\n        if (gl.texCoordBuffer == null) {\n            gl.texCoordBuffer = gl.createBuffer();\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([ 0, 0, 0, 1, 1, 0, 1, 1 ]), gl.STATIC_DRAW);\n        }\n        if (this.vertexAttribute == null) {\n            this.vertexAttribute = gl.getAttribLocation(this.program, 'vertex');\n            gl.enableVertexAttribArray(this.vertexAttribute);\n        }\n        if (this.texCoordAttribute == null) {\n            this.texCoordAttribute = gl.getAttribLocation(this.program, '_texCoord');\n            gl.enableVertexAttribArray(this.texCoordAttribute);\n        }\n        gl.useProgram(this.program);\n        gl.bindBuffer(gl.ARRAY_BUFFER, gl.vertexBuffer);\n        gl.vertexAttribPointer(this.vertexAttribute, 2, gl.FLOAT, false, 0, 0);\n        gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer);\n        gl.vertexAttribPointer(this.texCoordAttribute, 2, gl.FLOAT, false, 0, 0);\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    };\n\n    Shader.getDefaultShader = function() {\n        gl.defaultShader = gl.defaultShader || new Shader();\n        return gl.defaultShader;\n    };\n\n    return Shader;\n})();\n\n// src/core\\spline.script\n// from SplineInterpolator.cs in the Paint.NET source code\n\nfunction SplineInterpolator(points) {\n    let n = points.length;\n    this.xa = [];\n    this.ya = [];\n    this.u = [];\n    this.y2 = [];\n\n    points.sort(function(a, b) {\n        return a[0] - b[0];\n    });\n    for (var i = 0; i < n; i++) {\n        this.xa.push(points[i][0]);\n        this.ya.push(points[i][1]);\n    }\n\n    this.u[0] = 0;\n    this.y2[0] = 0;\n\n    for (var i = 1; i < n - 1; ++i) {\n        // This is the decomposition loop of the tridiagonal algorithm. \n        // y2 and u are used for temporary storage of the decomposed factors.\n        let wx = this.xa[i + 1] - this.xa[i - 1];\n        let sig = (this.xa[i] - this.xa[i - 1]) / wx;\n        let p = sig * this.y2[i - 1] + 2.0;\n\n        this.y2[i] = (sig - 1.0) / p;\n\n        let ddydx = \n            (this.ya[i + 1] - this.ya[i]) / (this.xa[i + 1] - this.xa[i]) - \n            (this.ya[i] - this.ya[i - 1]) / (this.xa[i] - this.xa[i - 1]);\n\n        this.u[i] = (6.0 * ddydx / wx - sig * this.u[i - 1]) / p;\n    }\n\n    this.y2[n - 1] = 0;\n\n    // This is the backsubstitution loop of the tridiagonal algorithm\n    for (var i = n - 2; i >= 0; --i) {\n        this.y2[i] = this.y2[i] * this.y2[i + 1] + this.u[i];\n    }\n}\n\nSplineInterpolator.prototype.interpolate = function(x) {\n    let n = this.ya.length;\n    let klo = 0;\n    let khi = n - 1;\n\n    // We will find the right place in the table by means of\n    // bisection. This is optimal if sequential calls to this\n    // routine are at random values of x. If sequential calls\n    // are in order, and closely spaced, one would do better\n    // to store previous values of klo and khi.\n    while (khi - klo > 1) {\n        let k = (khi + klo) >> 1;\n\n        if (this.xa[k] > x) {\n            khi = k; \n        } else {\n            klo = k;\n        }\n    }\n\n    let h = this.xa[khi] - this.xa[klo];\n    let a = (this.xa[khi] - x) / h;\n    let b = (x - this.xa[klo]) / h;\n\n    // Cubic spline polynomial is now evaluated.\n    return a * this.ya[klo] + b * this.ya[khi] + \n        ((a * a * a - a) * this.y2[klo] + (b * b * b - b) * this.y2[khi]) * (h * h) / 6.0;\n};\n\n// src/core\\texture.script\nvar Texture = (function() {\n    Texture.fromElement = function(element) {\n        let texture = new Texture(0, 0, gl.RGBA, gl.UNSIGNED_BYTE);\n        texture.loadContentsOf(element);\n        return texture;\n    };\n\n    function Texture(width, height, format, type) {\n        this.gl = gl;\n        this.id = gl.createTexture();\n        this.width = width;\n        this.height = height;\n        this.format = format;\n        this.type = type;\n\n        gl.bindTexture(gl.TEXTURE_2D, this.id);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        if (width && height) gl.texImage2D(gl.TEXTURE_2D, 0, this.format, width, height, 0, this.format, this.type, null);\n    }\n\n    Texture.prototype.loadContentsOf = function(element) {\n        this.width = element.width || element.videoWidth;\n        this.height = element.height || element.videoHeight;\n        gl.bindTexture(gl.TEXTURE_2D, this.id);\n        gl.texImage2D(gl.TEXTURE_2D, 0, this.format, this.format, this.type, element);\n    };\n\n    Texture.prototype.initFromBytes = function(width, height, data) {\n        this.width = width;\n        this.height = height;\n        this.format = gl.RGBA;\n        this.type = gl.UNSIGNED_BYTE;\n        gl.bindTexture(gl.TEXTURE_2D, this.id);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, this.type, new Uint8Array(data));\n    };\n\n    Texture.prototype.destroy = function() {\n        gl.deleteTexture(this.id);\n        this.id = null;\n    };\n\n    Texture.prototype.use = function(unit) {\n        gl.activeTexture(gl.TEXTURE0 + (unit || 0));\n        gl.bindTexture(gl.TEXTURE_2D, this.id);\n    };\n\n    Texture.prototype.unuse = function(unit) {\n        gl.activeTexture(gl.TEXTURE0 + (unit || 0));\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    };\n\n    Texture.prototype.ensureFormat = function(width, height, format, type) {\n        // allow passing an existing texture instead of individual arguments\n        if (arguments.length == 1) {\n            let texture = arguments[0];\n            width = texture.width;\n            height = texture.height;\n            format = texture.format;\n            type = texture.type;\n        }\n\n        // change the format only if required\n        if (width != this.width || height != this.height || format != this.format || type != this.type) {\n            this.width = width;\n            this.height = height;\n            this.format = format;\n            this.type = type;\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n            gl.texImage2D(gl.TEXTURE_2D, 0, this.format, width, height, 0, this.format, this.type, null);\n        }\n    };\n\n    Texture.prototype.drawTo = function(callback) {\n        // start rendering to this texture\n        gl.framebuffer = gl.framebuffer || gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, gl.framebuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.id, 0);\n        if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) !== gl.FRAMEBUFFER_COMPLETE) {\n            throw new Error('incomplete framebuffer');\n        }\n        gl.viewport(0, 0, this.width, this.height);\n\n        // do the drawing\n        callback();\n\n        // stop rendering to this texture\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    };\n\n    let canvas = null;\n\n    function getCanvas(texture) {\n        if (canvas == null) canvas = document.createElement('canvas');\n        canvas.width = texture.width;\n        canvas.height = texture.height;\n        let c = canvas.getContext('2d');\n        c.clearRect(0, 0, canvas.width, canvas.height);\n        return c;\n    }\n\n    Texture.prototype.fillUsingCanvas = function(callback) {\n        callback(getCanvas(this));\n        this.format = gl.RGBA;\n        this.type = gl.UNSIGNED_BYTE;\n        gl.bindTexture(gl.TEXTURE_2D, this.id);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas);\n        return this;\n    };\n\n    Texture.prototype.toImage = function(image) {\n        this.use();\n        Shader.getDefaultShader().drawRect();\n        let size = this.width * this.height * 4;\n        let pixels = new Uint8Array(size);\n        let c = getCanvas(this);\n        let data = c.createImageData(this.width, this.height);\n        gl.readPixels(0, 0, this.width, this.height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n        for (var i = 0; i < size; i++) {\n            data.data[i] = pixels[i];\n        }\n        c.putImageData(data, 0, 0);\n        image.src = canvas.toDataURL();\n    };\n\n    Texture.prototype.swapWith = function(other) {\n        let temp;\n        temp = other.id; other.id = this.id; this.id = temp;\n        temp = other.width; other.width = this.width; this.width = temp;\n        temp = other.height; other.height = this.height; this.height = temp;\n        temp = other.format; other.format = this.format; this.format = temp;\n    };\n\n    return Texture;\n})();\n\n// src/filters\\common.script\nfunction warpShader(uniforms, warp) {\n    return new Shader(null, uniforms + '\\\n    uniform sampler2D texture;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    void main() {\\\n        vec2 coord = texCoord * texSize;\\\n        ' + warp + '\\\n        gl_FragColor = texture2D(texture, coord / texSize);\\\n        vec2 clampedCoord = clamp(coord, vec2(0.0), texSize);\\\n        if (coord != clampedCoord) {\\\n            /* fade to transparent if we are outside the image */\\\n            gl_FragColor.a *= max(0.0, 1.0 - length(coord - clampedCoord));\\\n        }\\\n    }', 'warp');\n}\n\n// returns a random number between 0 and 1\nvar randomShaderFunc = '\\\n    float random(vec3 scale, float seed) {\\\n        /* use the fragment position for a different seed per-pixel */\\\n        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\\\n    }\\\n';\n\n// src/filters\\adjust\\brightnesscontrast.script\n/**\n * @filter           Brightness / Contrast\n * @description      Provides additive brightness and multiplicative contrast control.\n * @param brightness -1 to 1 (-1 is solid black, 0 is no change, and 1 is solid white)\n * @param contrast   -1 to 1 (-1 is solid gray, 0 is no change, and 1 is maximum contrast)\n */\nfunction brightnessContrast(brightness, contrast) {\n    gl.brightnessContrast = gl.brightnessContrast || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float brightness;\\\n        uniform float contrast;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            color.rgb += brightness;\\\n            if (contrast > 0.0) {\\\n                color.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;\\\n            } else {\\\n                color.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;\\\n            }\\\n            gl_FragColor = color;\\\n        }\\\n    ', 'brightnessContrast');\n\n    simpleShader.call(this, gl.brightnessContrast, {\n        brightness: clamp(-1, brightness, 1),\n        contrast: clamp(-1, contrast, 1)\n    });\n\n    return this;\n}\n\n// src/filters\\adjust\\curves.script\nfunction splineInterpolate(points) {\n    let interpolator = new SplineInterpolator(points);\n    let array = [];\n    for (var i = 0; i < 256; i++) {\n        array.push(clamp(0, Math.floor(interpolator.interpolate(i / 255) * 256), 255));\n    }\n    return array;\n}\n\n/**\n * @filter      Curves\n * @description A powerful mapping tool that transforms the colors in the image\n *              by an arbitrary function. The function is interpolated between\n *              a set of 2D points using splines. The curves filter can take\n *              either one or three arguments which will apply the mapping to\n *              either luminance or RGB values, respectively.\n * @param red   A list of points that define the function for the red channel.\n *              Each point is a list of two values: the value before the mapping\n *              and the value after the mapping, both in the range 0 to 1. For\n *              example, [[0,1], [1,0]] would invert the red channel while\n *              [[0,0], [1,1]] would leave the red channel unchanged. If green\n *              and blue are omitted then this argument also applies to the\n *              green and blue channels.\n * @param green (optional) A list of points that define the function for the green\n *              channel (just like for red).\n * @param blue  (optional) A list of points that define the function for the blue\n *              channel (just like for red).\n */\nfunction curves(red, green, blue) {\n    // Create the ramp texture\n    red = splineInterpolate(red);\n    if (arguments.length == 1) {\n        green = blue = red;\n    } else {\n        green = splineInterpolate(green);\n        blue = splineInterpolate(blue);\n    }\n    let array = [];\n    for (var i = 0; i < 256; i++) {\n        array.splice(array.length, 0, red[i], green[i], blue[i], 255);\n    }\n    this._.extraTexture.initFromBytes(256, 1, array);\n    this._.extraTexture.use(1);\n\n    gl.curves = gl.curves || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform sampler2D map;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            color.r = texture2D(map, vec2(color.r)).r;\\\n            color.g = texture2D(map, vec2(color.g)).g;\\\n            color.b = texture2D(map, vec2(color.b)).b;\\\n            gl_FragColor = color;\\\n        }\\\n    ', 'curves');\n\n    gl.curves.textures({\n        map: 1\n    });\n    simpleShader.call(this, gl.curves, {});\n\n    return this;\n}\n\n// src/filters\\adjust\\denoise.script\n/**\n * @filter         Denoise\n * @description    Smooths over grainy noise in dark images using an 9x9 box filter\n *                 weighted by color intensity, similar to a bilateral filter.\n * @param exponent The exponent of the color intensity difference, should be greater\n *                 than zero. A value of zero just gives an 9x9 box blur and high values\n *                 give the original image, but ideal values are usually around 10-20.\n */\nfunction denoise(exponent) {\n    // Do a 9x9 bilateral box filter\n    gl.denoise = gl.denoise || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float exponent;\\\n        uniform float strength;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 center = texture2D(texture, texCoord);\\\n            vec4 color = vec4(0.0);\\\n            float total = 0.0;\\\n            for (float x = -4.0; x <= 4.0; x += 1.0) {\\\n                for (float y = -4.0; y <= 4.0; y += 1.0) {\\\n                    vec4 sample = texture2D(texture, texCoord + vec2(x, y) / texSize);\\\n                    float weight = 1.0 - abs(dot(sample.rgb - center.rgb, vec3(0.25)));\\\n                    weight = pow(weight, exponent);\\\n                    color += sample * weight;\\\n                    total += weight;\\\n                }\\\n            }\\\n            gl_FragColor = color / total;\\\n        }\\\n    ', 'denoise');\n\n    // Perform two iterations for stronger results\n    for (var i = 0; i < 2; i++) {\n        simpleShader.call(this, gl.denoise, {\n            exponent: Math.max(0, exponent),\n            texSize: [this.width, this.height]\n        });\n    }\n\n    return this;\n}\n\n// src/filters\\adjust\\huesaturation.script\n/**\n * @filter           Hue / Saturation\n * @description      Provides rotational hue and multiplicative saturation control. RGB color space\n *                   can be imagined as a cube where the axes are the red, green, and blue color\n *                   values. Hue changing works by rotating the color vector around the grayscale\n *                   line, which is the straight line from black (0, 0, 0) to white (1, 1, 1).\n *                   Saturation is implemented by scaling all color channel values either toward\n *                   or away from the average color channel value.\n * @param hue        -1 to 1 (-1 is 180 degree rotation in the negative direction, 0 is no change,\n *                   and 1 is 180 degree rotation in the positive direction)\n * @param saturation -1 to 1 (-1 is solid gray, 0 is no change, and 1 is maximum contrast)\n */\nfunction hueSaturation(hue, saturation) {\n    gl.hueSaturation = gl.hueSaturation || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float hue;\\\n        uniform float saturation;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            \\\n            /* hue adjustment, wolfram alpha: RotationTransform[angle, {1, 1, 1}][{x, y, z}] */\\\n            float angle = hue * 3.14159265;\\\n            float s = sin(angle), c = cos(angle);\\\n            vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\\\n            float len = length(color.rgb);\\\n            color.rgb = vec3(\\\n                dot(color.rgb, weights.xyz),\\\n                dot(color.rgb, weights.zxy),\\\n                dot(color.rgb, weights.yzx)\\\n            );\\\n            \\\n            /* saturation adjustment */\\\n            float average = (color.r + color.g + color.b) / 3.0;\\\n            if (saturation > 0.0) {\\\n                color.rgb += (average - color.rgb) * (1.0 - 1.0 / (1.001 - saturation));\\\n            } else {\\\n                color.rgb += (average - color.rgb) * (-saturation);\\\n            }\\\n            \\\n            gl_FragColor = color;\\\n        }\\\n    ', 'hueSaturation');\n\n    simpleShader.call(this, gl.hueSaturation, {\n        hue: clamp(-1, hue, 1),\n        saturation: clamp(-1, saturation, 1)\n    });\n\n    return this;\n}\n\n// src/filters\\adjust\\noise.script\n/**\n * @filter         Noise\n * @description    Adds black and white noise to the image.\n * @param amount   0 to 1 (0 for no effect, 1 for maximum noise)\n */\nfunction noise(amount) {\n    gl.noise = gl.noise || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float amount;\\\n        varying vec2 texCoord;\\\n        float rand(vec2 co) {\\\n            return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\\\n        }\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            \\\n            float diff = (rand(texCoord) - 0.5) * amount;\\\n            color.r += diff;\\\n            color.g += diff;\\\n            color.b += diff;\\\n            \\\n            gl_FragColor = color;\\\n        }\\\n    ', 'noise');\n\n    simpleShader.call(this, gl.noise, {\n        amount: clamp(0, amount, 1)\n    });\n\n    return this;\n}\n\n// src/filters\\adjust\\sepia.script\n/**\n * @filter         Sepia\n * @description    Gives the image a reddish-brown monochrome tint that imitates an old photograph.\n * @param amount   0 to 1 (0 for no effect, 1 for full sepia coloring)\n */\nfunction sepia(amount) {\n    gl.sepia = gl.sepia || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float amount;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            float r = color.r;\\\n            float g = color.g;\\\n            float b = color.b;\\\n            \\\n            color.r = min(1.0, (r * (1.0 - (0.607 * amount))) + (g * (0.769 * amount)) + (b * (0.189 * amount)));\\\n            color.g = min(1.0, (r * 0.349 * amount) + (g * (1.0 - (0.314 * amount))) + (b * 0.168 * amount));\\\n            color.b = min(1.0, (r * 0.272 * amount) + (g * 0.534 * amount) + (b * (1.0 - (0.869 * amount))));\\\n            \\\n            gl_FragColor = color;\\\n        }\\\n    ', 'sepia');\n\n    simpleShader.call(this, gl.sepia, {\n        amount: clamp(0, amount, 1)\n    });\n\n    return this;\n}\n\n// src/filters\\adjust\\unsharpmask.script\n/**\n * @filter         Unsharp Mask\n * @description    A form of image sharpening that amplifies high-frequencies in the image. It\n *                 is implemented by scaling pixels away from the average of their neighbors.\n * @param radius   The blur radius that calculates the average of the neighboring pixels.\n * @param strength A scale factor where 0 is no effect and higher values cause a stronger effect.\n */\nfunction unsharpMask(radius, strength) {\n    gl.unsharpMask = gl.unsharpMask || new Shader(null, '\\\n        uniform sampler2D blurredTexture;\\\n        uniform sampler2D originalTexture;\\\n        uniform float strength;\\\n        uniform float threshold;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 blurred = texture2D(blurredTexture, texCoord);\\\n            vec4 original = texture2D(originalTexture, texCoord);\\\n            gl_FragColor = mix(blurred, original, 1.0 + strength);\\\n        }\\\n    ', 'unsharpMask');\n\n    // Store a copy of the current texture in the second texture unit\n    this._.extraTexture.ensureFormat(this._.texture);\n    this._.texture.use();\n    this._.extraTexture.drawTo(function() {\n        Shader.getDefaultShader().drawRect();\n    });\n\n    // Blur the current texture, then use the stored texture to detect edges\n    this._.extraTexture.use(1);\n    this.triangleBlur(radius);\n    gl.unsharpMask.textures({\n        originalTexture: 1\n    });\n    simpleShader.call(this, gl.unsharpMask, {\n        strength: strength\n    });\n    this._.extraTexture.unuse(1);\n\n    return this;\n}\n\n// src/filters\\adjust\\vibrance.script\n/**\n * @filter       Vibrance\n * @description  Modifies the saturation of desaturated colors, leaving saturated colors unmodified.\n * @param amount -1 to 1 (-1 is minimum vibrance, 0 is no change, and 1 is maximum vibrance)\n */\nfunction vibrance(amount) {\n    gl.vibrance = gl.vibrance || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float amount;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            float average = (color.r + color.g + color.b) / 3.0;\\\n            float mx = max(color.r, max(color.g, color.b));\\\n            float amt = (mx - average) * (-amount * 3.0);\\\n            color.rgb = mix(color.rgb, vec3(mx), amt);\\\n            gl_FragColor = color;\\\n        }\\\n    ', 'vibrance');\n\n    simpleShader.call(this, gl.vibrance, {\n        amount: clamp(-1, amount, 1)\n    });\n\n    return this;\n}\n\n// src/filters\\adjust\\vignette.script\n/**\n * @filter         Vignette\n * @description    Adds a simulated lens edge darkening effect.\n * @param size     0 to 1 (0 for center of frame, 1 for edge of frame)\n * @param amount   0 to 1 (0 for no effect, 1 for maximum lens darkening)\n */\nfunction vignette(size, amount) {\n    gl.vignette = gl.vignette || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float size;\\\n        uniform float amount;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            \\\n            float dist = distance(texCoord, vec2(0.5, 0.5));\\\n            color.rgb *= smoothstep(0.8, size * 0.799, dist * (amount + size));\\\n            \\\n            gl_FragColor = color;\\\n        }\\\n    ', 'vignette');\n\n    simpleShader.call(this, gl.vignette, {\n        size: clamp(0, size, 1),\n        amount: clamp(0, amount, 1)\n    });\n\n    return this;\n}\n\n// src/filters\\blur\\lensblur.script\n/**\n * @filter           Lens Blur\n * @description      Imitates a camera capturing the image out of focus by using a blur that generates\n *                   the large shapes known as bokeh. The polygonal shape of real bokeh is due to the\n *                   blades of the aperture diaphragm when it isn't fully open. This blur renders\n *                   bokeh from a 6-bladed diaphragm because the computation is more efficient. It\n *                   can be separated into three rhombi, each of which is just a skewed box blur.\n *                   This filter makes use of the floating point texture WebGL extension to implement\n *                   the brightness parameter, so there will be severe visual artifacts if brightness\n *                   is non-zero and the floating point texture extension is not available. The\n *                   idea was from John White's SIGGRAPH 2011 talk but this effect has an additional\n *                   brightness parameter that fakes what would otherwise come from a HDR source.\n * @param radius     the radius of the hexagonal disk convolved with the image\n * @param brightness -1 to 1 (the brightness of the bokeh, negative values will create dark bokeh)\n * @param angle      the rotation of the bokeh in radians\n */\nfunction lensBlur(radius, brightness, angle) {\n    // All averaging is done on values raised to a power to make more obvious bokeh\n    // (we will raise the average to the inverse power at the end to compensate).\n    // Without this the image looks almost like a normal blurred image. This hack is\n    // obviously not realistic, but to accurately simulate this we would need a high\n    // dynamic range source photograph which we don't have.\n    gl.lensBlurPrePass = gl.lensBlurPrePass || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float power;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            color = pow(color, vec4(power));\\\n            gl_FragColor = vec4(color);\\\n        }\\\n    ', 'lensBlurPrePass');\n\n    let common = '\\\n        uniform sampler2D texture0;\\\n        uniform sampler2D texture1;\\\n        uniform vec2 delta0;\\\n        uniform vec2 delta1;\\\n        uniform float power;\\\n        varying vec2 texCoord;\\\n        ' + randomShaderFunc + '\\\n        vec4 sample(vec2 delta) {\\\n            /* randomize the lookup values to hide the fixed number of samples */\\\n            float offset = random(vec3(delta, 151.7182), 0.0);\\\n            \\\n            vec4 color = vec4(0.0);\\\n            float total = 0.0;\\\n            for (float t = 0.0; t <= 30.0; t++) {\\\n                float percent = (t + offset) / 30.0;\\\n                color += texture2D(texture0, texCoord + delta * percent);\\\n                total += 1.0;\\\n            }\\\n            return color / total;\\\n        }\\\n    ';\n\n    gl.lensBlur0 = gl.lensBlur0 || new Shader(null, common + '\\\n        void main() {\\\n            gl_FragColor = sample(delta0);\\\n        }\\\n    ', 'lensBlur0');\n    gl.lensBlur1 = gl.lensBlur1 || new Shader(null, common + '\\\n        void main() {\\\n            gl_FragColor = (sample(delta0) + sample(delta1)) * 0.5;\\\n        }\\\n    ', 'lensBlur1');\n    gl.lensBlur2 = gl.lensBlur2 || new Shader(null, common + '\\\n        void main() {\\\n            vec4 color = (sample(delta0) + 2.0 * texture2D(texture1, texCoord)) / 3.0;\\\n            gl_FragColor = pow(color, vec4(power));\\\n        }\\\n    ', 'lensBlur2').textures({ texture1: 1 });\n\n    // Generate\n    let dir = [];\n    for (var i = 0; i < 3; i++) {\n        let a = angle + i * Math.PI * 2 / 3;\n        dir.push([radius * Math.sin(a) / this.width, radius * Math.cos(a) / this.height]);\n    }\n    let power = Math.pow(10, clamp(-1, brightness, 1));\n\n    // Remap the texture values, which will help make the bokeh effect\n    simpleShader.call(this, gl.lensBlurPrePass, {\n        power: power\n    });\n\n    // Blur two rhombi in parallel into extraTexture\n    this._.extraTexture.ensureFormat(this._.texture);\n    simpleShader.call(this, gl.lensBlur0, {\n        delta0: dir[0]\n    }, this._.texture, this._.extraTexture);\n    simpleShader.call(this, gl.lensBlur1, {\n        delta0: dir[1],\n        delta1: dir[2]\n    }, this._.extraTexture, this._.extraTexture);\n\n    // Blur the last rhombus and combine with extraTexture\n    simpleShader.call(this, gl.lensBlur0, {\n        delta0: dir[1]\n    });\n    this._.extraTexture.use(1);\n    simpleShader.call(this, gl.lensBlur2, {\n        power: 1 / power,\n        delta0: dir[2]\n    });\n\n    return this;\n}\n\n// src/filters\\blur\\tiltshift.script\n/**\n * @filter               Tilt Shift\n * @description          Simulates the shallow depth of field normally encountered in close-up\n *                       photography, which makes the scene seem much smaller than it actually\n *                       is. This filter assumes the scene is relatively planar, in which case\n *                       the part of the scene that is completely in focus can be described by\n *                       a line (the intersection of the focal plane and the scene). An example\n *                       of a planar scene might be looking at a road from above at a downward\n *                       angle. The image is then blurred with a blur radius that starts at zero\n *                       on the line and increases further from the line.\n * @param startX         The x coordinate of the start of the line segment.\n * @param startY         The y coordinate of the start of the line segment.\n * @param endX           The x coordinate of the end of the line segment.\n * @param endY           The y coordinate of the end of the line segment.\n * @param blurRadius     The maximum radius of the pyramid blur.\n * @param gradientRadius The distance from the line at which the maximum blur radius is reached.\n */\nfunction tiltShift(startX, startY, endX, endY, blurRadius, gradientRadius) {\n    gl.tiltShift = gl.tiltShift || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float blurRadius;\\\n        uniform float gradientRadius;\\\n        uniform vec2 start;\\\n        uniform vec2 end;\\\n        uniform vec2 delta;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        ' + randomShaderFunc + '\\\n        void main() {\\\n            vec4 color = vec4(0.0);\\\n            float total = 0.0;\\\n            \\\n            /* randomize the lookup values to hide the fixed number of samples */\\\n            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n            \\\n            vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\\\n            float radius = smoothstep(0.0, 1.0, abs(dot(texCoord * texSize - start, normal)) / gradientRadius) * blurRadius;\\\n            for (float t = -30.0; t <= 30.0; t++) {\\\n                float percent = (t + offset - 0.5) / 30.0;\\\n                float weight = 1.0 - abs(percent);\\\n                vec4 sample = texture2D(texture, texCoord + delta / texSize * percent * radius);\\\n                \\\n                /* switch to pre-multiplied alpha to correctly blur transparent images */\\\n                sample.rgb *= sample.a;\\\n                \\\n                color += sample * weight;\\\n                total += weight;\\\n            }\\\n            \\\n            gl_FragColor = color / total;\\\n            \\\n            /* switch back from pre-multiplied alpha */\\\n            gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\\\n        }\\\n    ', 'tiltShift');\n\n    let dx = endX - startX;\n    let dy = endY - startY;\n    let d = Math.sqrt(dx * dx + dy * dy);\n    simpleShader.call(this, gl.tiltShift, {\n        blurRadius: blurRadius,\n        gradientRadius: gradientRadius,\n        start: [startX, startY],\n        end: [endX, endY],\n        delta: [dx / d, dy / d],\n        texSize: [this.width, this.height]\n    });\n    simpleShader.call(this, gl.tiltShift, {\n        blurRadius: blurRadius,\n        gradientRadius: gradientRadius,\n        start: [startX, startY],\n        end: [endX, endY],\n        delta: [-dy / d, dx / d],\n        texSize: [this.width, this.height]\n    });\n\n    return this;\n}\n\n// src/filters\\blur\\triangleblur.script\n/**\n * @filter       Triangle Blur\n * @description  This is the most basic blur filter, which convolves the image with a\n *               pyramid filter. The pyramid filter is separable and is applied as two\n *               perpendicular triangle filters.\n * @param radius The radius of the pyramid convolved with the image.\n */\nfunction triangleBlur(radius) {\n    gl.triangleBlur = gl.triangleBlur || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 delta;\\\n        varying vec2 texCoord;\\\n        ' + randomShaderFunc + '\\\n        void main() {\\\n            vec4 color = vec4(0.0);\\\n            float total = 0.0;\\\n            \\\n            /* randomize the lookup values to hide the fixed number of samples */\\\n            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n            \\\n            for (float t = -30.0; t <= 30.0; t++) {\\\n                float percent = (t + offset - 0.5) / 30.0;\\\n                float weight = 1.0 - abs(percent);\\\n                vec4 sample = texture2D(texture, texCoord + delta * percent);\\\n                \\\n                /* switch to pre-multiplied alpha to correctly blur transparent images */\\\n                sample.rgb *= sample.a;\\\n                \\\n                color += sample * weight;\\\n                total += weight;\\\n            }\\\n            \\\n            gl_FragColor = color / total;\\\n            \\\n            /* switch back from pre-multiplied alpha */\\\n            gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\\\n        }\\\n    ', 'triangleBlur');\n\n    simpleShader.call(this, gl.triangleBlur, {\n        delta: [radius / this.width, 0]\n    });\n    simpleShader.call(this, gl.triangleBlur, {\n        delta: [0, radius / this.height]\n    });\n\n    return this;\n}\n\n// src/filters\\blur\\zoomblur.script\n/**\n * @filter         Zoom Blur\n * @description    Blurs the image away from a certain point, which looks like radial motion blur.\n * @param centerX  The x coordinate of the blur origin.\n * @param centerY  The y coordinate of the blur origin.\n * @param strength The strength of the blur. Values in the range 0 to 1 are usually sufficient,\n *                 where 0 doesn't change the image and 1 creates a highly blurred image.\n */\nfunction zoomBlur(centerX, centerY, strength) {\n    gl.zoomBlur = gl.zoomBlur || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 center;\\\n        uniform float strength;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        ' + randomShaderFunc + '\\\n        void main() {\\\n            vec4 color = vec4(0.0);\\\n            float total = 0.0;\\\n            vec2 toCenter = center - texCoord * texSize;\\\n            \\\n            /* randomize the lookup values to hide the fixed number of samples */\\\n            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n            \\\n            for (float t = 0.0; t <= 40.0; t++) {\\\n                float percent = (t + offset) / 40.0;\\\n                float weight = 4.0 * (percent - percent * percent);\\\n                vec4 sample = texture2D(texture, texCoord + toCenter * percent * strength / texSize);\\\n                \\\n                /* switch to pre-multiplied alpha to correctly blur transparent images */\\\n                sample.rgb *= sample.a;\\\n                \\\n                color += sample * weight;\\\n                total += weight;\\\n            }\\\n            \\\n            gl_FragColor = color / total;\\\n            \\\n            /* switch back from pre-multiplied alpha */\\\n            gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\\\n        }\\\n    ', 'zoomBlur');\n\n    simpleShader.call(this, gl.zoomBlur, {\n        center: [centerX, centerY],\n        strength: strength,\n        texSize: [this.width, this.height]\n    });\n\n    return this;\n}\n\n// src/filters\\fun\\colorhalftone.script\n/**\n * @filter        Color Halftone\n * @description   Simulates a CMYK halftone rendering of the image by multiplying pixel values\n *                with a four rotated 2D sine wave patterns, one each for cyan, magenta, yellow,\n *                and black.\n * @param centerX The x coordinate of the pattern origin.\n * @param centerY The y coordinate of the pattern origin.\n * @param angle   The rotation of the pattern in radians.\n * @param size    The diameter of a dot in pixels.\n */\nfunction colorHalftone(centerX, centerY, angle, size) {\n    gl.colorHalftone = gl.colorHalftone || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 center;\\\n        uniform float angle;\\\n        uniform float scale;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        \\\n        float pattern(float angle) {\\\n            float s = sin(angle), c = cos(angle);\\\n            vec2 tex = texCoord * texSize - center;\\\n            vec2 point = vec2(\\\n                c * tex.x - s * tex.y,\\\n                s * tex.x + c * tex.y\\\n            ) * scale;\\\n            return (sin(point.x) * sin(point.y)) * 4.0;\\\n        }\\\n        \\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            vec3 cmy = 1.0 - color.rgb;\\\n            float k = min(cmy.x, min(cmy.y, cmy.z));\\\n            cmy = (cmy - k) / (1.0 - k);\\\n            cmy = clamp(cmy * 10.0 - 3.0 + vec3(pattern(angle + 0.26179), pattern(angle + 1.30899), pattern(angle)), 0.0, 1.0);\\\n            k = clamp(k * 10.0 - 5.0 + pattern(angle + 0.78539), 0.0, 1.0);\\\n            gl_FragColor = vec4(1.0 - cmy - k, color.a);\\\n        }\\\n    ', 'colorHalftone');\n\n    simpleShader.call(this, gl.colorHalftone, {\n        center: [centerX, centerY],\n        angle: angle,\n        scale: Math.PI / size,\n        texSize: [this.width, this.height]\n    });\n\n    return this;\n}\n\n// src/filters\\fun\\dotscreen.script\n/**\n * @filter        Dot Screen\n * @description   Simulates a black and white halftone rendering of the image by multiplying\n *                pixel values with a rotated 2D sine wave pattern.\n * @param centerX The x coordinate of the pattern origin.\n * @param centerY The y coordinate of the pattern origin.\n * @param angle   The rotation of the pattern in radians.\n * @param size    The diameter of a dot in pixels.\n */\nfunction dotScreen(centerX, centerY, angle, size) {\n    gl.dotScreen = gl.dotScreen || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 center;\\\n        uniform float angle;\\\n        uniform float scale;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        \\\n        float pattern() {\\\n            float s = sin(angle), c = cos(angle);\\\n            vec2 tex = texCoord * texSize - center;\\\n            vec2 point = vec2(\\\n                c * tex.x - s * tex.y,\\\n                s * tex.x + c * tex.y\\\n            ) * scale;\\\n            return (sin(point.x) * sin(point.y)) * 4.0;\\\n        }\\\n        \\\n        void main() {\\\n            vec4 color = texture2D(texture, texCoord);\\\n            float average = (color.r + color.g + color.b) / 3.0;\\\n            gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\\\n        }\\\n    ', 'dotScreen');\n\n    simpleShader.call(this, gl.dotScreen, {\n        center: [centerX, centerY],\n        angle: angle,\n        scale: Math.PI / size,\n        texSize: [this.width, this.height]\n    });\n\n    return this;\n}\n\n// src/filters\\fun\\edgework.script\n/**\n * @filter       Edge Work\n * @description  Picks out different frequencies in the image by subtracting two\n *               copies of the image blurred with different radii.\n * @param radius The radius of the effect in pixels.\n */\nfunction edgeWork(radius) {\n    gl.edgeWork1 = gl.edgeWork1 || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 delta;\\\n        varying vec2 texCoord;\\\n        ' + randomShaderFunc + '\\\n        void main() {\\\n            vec2 color = vec2(0.0);\\\n            vec2 total = vec2(0.0);\\\n            \\\n            /* randomize the lookup values to hide the fixed number of samples */\\\n            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n            \\\n            for (float t = -30.0; t <= 30.0; t++) {\\\n                float percent = (t + offset - 0.5) / 30.0;\\\n                float weight = 1.0 - abs(percent);\\\n                vec3 sample = texture2D(texture, texCoord + delta * percent).rgb;\\\n                float average = (sample.r + sample.g + sample.b) / 3.0;\\\n                color.x += average * weight;\\\n                total.x += weight;\\\n                if (abs(t) < 15.0) {\\\n                    weight = weight * 2.0 - 1.0;\\\n                    color.y += average * weight;\\\n                    total.y += weight;\\\n                }\\\n            }\\\n            gl_FragColor = vec4(color / total, 0.0, 1.0);\\\n        }\\\n    ', 'edgeWork1');\n    gl.edgeWork2 = gl.edgeWork2 || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 delta;\\\n        varying vec2 texCoord;\\\n        ' + randomShaderFunc + '\\\n        void main() {\\\n            vec2 color = vec2(0.0);\\\n            vec2 total = vec2(0.0);\\\n            \\\n            /* randomize the lookup values to hide the fixed number of samples */\\\n            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n            \\\n            for (float t = -30.0; t <= 30.0; t++) {\\\n                float percent = (t + offset - 0.5) / 30.0;\\\n                float weight = 1.0 - abs(percent);\\\n                vec2 sample = texture2D(texture, texCoord + delta * percent).xy;\\\n                color.x += sample.x * weight;\\\n                total.x += weight;\\\n                if (abs(t) < 15.0) {\\\n                    weight = weight * 2.0 - 1.0;\\\n                    color.y += sample.y * weight;\\\n                    total.y += weight;\\\n                }\\\n            }\\\n            float c = clamp(10000.0 * (color.y / total.y - color.x / total.x) + 0.5, 0.0, 1.0);\\\n            gl_FragColor = vec4(c, c, c, 1.0);\\\n        }\\\n    ', 'edgeWork2');\n\n    simpleShader.call(this, gl.edgeWork1, {\n        delta: [radius / this.width, 0]\n    });\n    simpleShader.call(this, gl.edgeWork2, {\n        delta: [0, radius / this.height]\n    });\n\n    return this;\n}\n\n// src/filters\\fun\\hexagonalpixelate.script\n/**\n * @filter        Hexagonal Pixelate\n * @description   Renders the image using a pattern of hexagonal tiles. Tile colors\n *                are nearest-neighbor sampled from the centers of the tiles.\n * @param centerX The x coordinate of the pattern center.\n * @param centerY The y coordinate of the pattern center.\n * @param scale   The width of an individual tile, in pixels.\n */\nfunction hexagonalPixelate(centerX, centerY, scale) {\n    gl.hexagonalPixelate = gl.hexagonalPixelate || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform vec2 center;\\\n        uniform float scale;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec2 tex = (texCoord * texSize - center) / scale;\\\n            tex.y /= 0.866025404;\\\n            tex.x -= tex.y * 0.5;\\\n            \\\n            vec2 a;\\\n            if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) a = vec2(floor(tex.x), floor(tex.y));\\\n            else a = vec2(ceil(tex.x), ceil(tex.y));\\\n            vec2 b = vec2(ceil(tex.x), floor(tex.y));\\\n            vec2 c = vec2(floor(tex.x), ceil(tex.y));\\\n            \\\n            vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\\\n            vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\\\n            vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\\\n            vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\\\n            \\\n            float alen = length(TEX - A);\\\n            float blen = length(TEX - B);\\\n            float clen = length(TEX - C);\\\n            \\\n            vec2 choice;\\\n            if (alen < blen) {\\\n                if (alen < clen) choice = a;\\\n                else choice = c;\\\n            } else {\\\n                if (blen < clen) choice = b;\\\n                else choice = c;\\\n            }\\\n            \\\n            choice.x += choice.y * 0.5;\\\n            choice.y *= 0.866025404;\\\n            choice *= scale / texSize;\\\n            gl_FragColor = texture2D(texture, choice + center / texSize);\\\n        }\\\n    ', 'hexagonalPixelate');\n\n    simpleShader.call(this, gl.hexagonalPixelate, {\n        center: [centerX, centerY],\n        scale: scale,\n        texSize: [this.width, this.height]\n    });\n\n    return this;\n}\n\n// src/filters\\fun\\ink.script\n/**\n * @filter         Ink\n * @description    Simulates outlining the image in ink by darkening edges stronger than a\n *                 certain threshold. The edge detection value is the difference of two\n *                 copies of the image, each blurred using a blur of a different radius.\n * @param strength The multiplicative scale of the ink edges. Values in the range 0 to 1\n *                 are usually sufficient, where 0 doesn't change the image and 1 adds lots\n *                 of black edges. Negative strength values will create white ink edges\n *                 instead of black ones.\n */\nfunction ink(strength) {\n    gl.ink = gl.ink || new Shader(null, '\\\n        uniform sampler2D texture;\\\n        uniform float strength;\\\n        uniform vec2 texSize;\\\n        varying vec2 texCoord;\\\n        void main() {\\\n            vec2 dx = vec2(1.0 / texSize.x, 0.0);\\\n            vec2 dy = vec2(0.0, 1.0 / texSize.y);\\\n            vec4 color = texture2D(texture, texCoord);\\\n            float bigTotal = 0.0;\\\n            float smallTotal = 0.0;\\\n            vec3 bigAverage = vec3(0.0);\\\n            vec3 smallAverage = vec3(0.0);\\\n            for (float x = -2.0; x <= 2.0; x += 1.0) {\\\n                for (float y = -2.0; y <= 2.0; y += 1.0) {\\\n                    vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\\\n                    bigAverage += sample;\\\n                    bigTotal += 1.0;\\\n                    if (abs(x) + abs(y) < 2.0) {\\\n                        smallAverage += sample;\\\n                        smallTotal += 1.0;\\\n                    }\\\n                }\\\n            }\\\n            vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\\\n            gl_FragColor = vec4(color.rgb - dot(edge, edge) * strength * 100000.0, color.a);\\\n        }\\\n    ', 'ink');\n\n    simpleShader.call(this, gl.ink, {\n        strength: strength * strength * strength * strength * strength,\n        texSize: [this.width, this.height]\n    });\n\n    return this;\n}\n\n// src/filters\\warp\\bulgepinch.script\n/**\n * @filter         Bulge / Pinch\n * @description    Bulges or pinches the image in a circle.\n * @param centerX  The x coordinate of the center of the circle of effect.\n * @param centerY  The y coordinate of the center of the circle of effect.\n * @param radius   The radius of the circle of effect.\n * @param strength -1 to 1 (-1 is strong pinch, 0 is no effect, 1 is strong bulge)\n */\nfunction bulgePinch(centerX, centerY, radius, strength) {\n    gl.bulgePinch = gl.bulgePinch || warpShader('\\\n        uniform float radius;\\\n        uniform float strength;\\\n        uniform vec2 center;\\\n    ', '\\\n        coord -= center;\\\n        float distance = length(coord);\\\n        if (distance < radius) {\\\n            float percent = distance / radius;\\\n            if (strength > 0.0) {\\\n                coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\\\n            } else {\\\n                coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\\\n            }\\\n        }\\\n        coord += center;\\\n    ');\n\n    simpleShader.call(this, gl.bulgePinch, {\n        radius: radius,\n        strength: clamp(-1, strength, 1),\n        center: [centerX, centerY],\n        texSize: [this.width, this.height]\n    });\n\n    return this;\n}\n\n// src/filters\\warp\\matrixwarp.script\n/**\n * @filter                Matrix Warp\n * @description           Transforms an image by a 2x2 or 3x3 matrix. The coordinates used in\n *                        the transformation are (x, y) for a 2x2 matrix or (x, y, 1) for a\n *                        3x3 matrix, where x and y are in units of pixels.\n * @param matrix          A 2x2 or 3x3 matrix represented as either a list or a list of lists.\n *                        For example, the 3x3 matrix [[2,0,0],[0,3,0],[0,0,1]] can also be\n *                        represented as [2,0,0,0,3,0,0,0,1] or just [2,0,0,3].\n * @param inverse         A boolean value that, when true, applies the inverse transformation\n *                        instead. (optional, defaults to false)\n * @param useTextureSpace A boolean value that, when true, uses texture-space coordinates\n *                        instead of screen-space coordinates. Texture-space coordinates range\n *                        from -1 to 1 instead of 0 to width - 1 or height - 1, and are easier\n *                        to use for simple operations like flipping and rotating.\n */\nfunction matrixWarp(matrix, inverse, useTextureSpace) {\n    gl.matrixWarp = gl.matrixWarp || warpShader('\\\n        uniform mat3 matrix;\\\n        uniform bool useTextureSpace;\\\n    ', '\\\n        if (useTextureSpace) coord = coord / texSize * 2.0 - 1.0;\\\n        vec3 warp = matrix * vec3(coord, 1.0);\\\n        coord = warp.xy / warp.z;\\\n        if (useTextureSpace) coord = (coord * 0.5 + 0.5) * texSize;\\\n    ');\n\n    // Flatten all members of matrix into one big list\n    matrix = Array.prototype.concat.apply([], matrix);\n\n    // Extract a 3x3 matrix out of the arguments\n    if (matrix.length == 4) {\n        matrix = [\n            matrix[0], matrix[1], 0,\n            matrix[2], matrix[3], 0,\n            0, 0, 1\n        ];\n    } else if (matrix.length != 9) {\n        throw 'can only warp with 2x2 or 3x3 matrix';\n    }\n\n    simpleShader.call(this, gl.matrixWarp, {\n        matrix: inverse ? getInverse(matrix) : matrix,\n        texSize: [this.width, this.height],\n        useTextureSpace: useTextureSpace | 0\n    });\n\n    return this;\n}\n\n// src/filters\\warp\\perspective.script\n/**\n * @filter       Perspective\n * @description  Warps one quadrangle to another with a perspective transform. This can be used to\n *               make a 2D image look 3D or to recover a 2D image captured in a 3D environment.\n * @param before The x and y coordinates of four points before the transform in a flat list. This\n *               would look like [ax, ay, bx, by, cx, cy, dx, dy] for four points (ax, ay), (bx, by),\n *               (cx, cy), and (dx, dy).\n * @param after  The x and y coordinates of four points after the transform in a flat list, just\n *               like the other argument.\n */\nfunction perspective(before, after) {\n    let a = getSquareToQuad.apply(null, after);\n    let b = getSquareToQuad.apply(null, before);\n    let c = multiply(getInverse(a), b);\n    return this.matrixWarp(c);\n}\n\n// src/filters\\warp\\swirl.script\n/**\n * @filter        Swirl\n * @description   Warps a circular region of the image in a swirl.\n * @param centerX The x coordinate of the center of the circular region.\n * @param centerY The y coordinate of the center of the circular region.\n * @param radius  The radius of the circular region.\n * @param angle   The angle in radians that the pixels in the center of\n *                the circular region will be rotated by.\n */\nfunction swirl(centerX, centerY, radius, angle) {\n    gl.swirl = gl.swirl || warpShader('\\\n        uniform float radius;\\\n        uniform float angle;\\\n        uniform vec2 center;\\\n    ', '\\\n        coord -= center;\\\n        float distance = length(coord);\\\n        if (distance < radius) {\\\n            float percent = (radius - distance) / radius;\\\n            float theta = percent * percent * angle;\\\n            float s = sin(theta);\\\n            float c = cos(theta);\\\n            coord = vec2(\\\n                coord.x * c - coord.y * s,\\\n                coord.x * s + coord.y * c\\\n            );\\\n        }\\\n        coord += center;\\\n    ');\n\n    simpleShader.call(this, gl.swirl, {\n        radius: radius,\n        center: [centerX, centerY],\n        angle: angle,\n        texSize: [this.width, this.height]\n    });\n\n    return this;\n}\n\n/**\n * @filter        Invert\n * @description   Inverts color of each pixel\n */\nfunction invert() {\n    gl.invert = gl.invert || new Shader(null, '\\\n    uniform sampler2D texture;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    \\\n    void main() {\\\n        vec4 color = texture2D(texture, texCoord);\\\n        gl_FragColor = vec4(1.0 - color.r, 1.0 - color.g, 1.0 - color.b, color.a);\\\n    }\\\n', 'invert');\n\n    simpleShader.call(this, gl.invert, {\n        texSize: [this.width, this.height]\n    });\n\n    return this;\n}\n\n/**\n * @filter        To Alpha\n * @description   Generates alpha channel from luminance (r+g+b)\n * @param isInverted    boolean - invert luminance\n * @param replaceRGBA    rgba - color to replace rgb with. if a = 0 -> keep orig color\n */\nfunction toAlpha(isInverted, replaceRGBA) {\n    gl.toAlpha = gl.toAlpha || new Shader(null, '\\\n    uniform bool isInverted;\\\n    uniform vec4 replace;\\\n    uniform sampler2D texture;\\\n    uniform vec2 texSize;\\\n    varying vec2 texCoord;\\\n    \\\n    void main() {\\\n        vec4 color = texture2D(texture, texCoord);\\\n        float alpha = (color.r + color.g + color.b) / 3.0;\\\n        if (isInverted) alpha = 1.0 - alpha;\\\n        alpha = min(color.a, alpha);\\\n        if (replace.a > 0.0) color = replace;\\\n        gl_FragColor = vec4(color.r, color.g, color.b, alpha);\\\n    }\\\n', 'toAlpha');\n\n    simpleShader.call(this, gl.toAlpha, {\n        isInverted: isInverted ? 1 : 0,\n        replace: replaceRGBA ? [replaceRGBA.r / 255, replaceRGBA.g / 255, replaceRGBA.b / 255, replaceRGBA.a] : [0,0,0,0],\n        texSize: [this.width, this.height]\n    });\n\n    return this;\n}\n\n\nreturn exports;\n})();\n","import {fx} from '../../../script-vendor/glfx';\n\nlet fxCanvas = null\ntry {\n    fxCanvas = fx.canvas();\n} catch (e) {\n}\n\nexport function getSharedFx() {\n    if (!fxCanvas || fxCanvas._.gl.isContextLost()) {\n        try {\n            fxCanvas = fx.canvas();\n        } catch (e) {\n        }\n    }\n    return fxCanvas;\n}","import {BB} from '../../bb/bb';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {eventResMs} from './filters-consts';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const glBrightnessContrast = {\n    getDialog(params: IFilterGetDialogParam) {\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n\n\n        let context = params.context; //2d context of canvas\n        let canvas = params.canvas; //the klCanvas and dom element\n        if (!context || !canvas) {\n            return false;\n        }\n\n        let layers = canvas.getLayers();\n        let selectedLayerIndex = canvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (tempCanvas.width > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n\n\n        function finishInit() {\n\n            let brightness = 0, contrast = 0;\n            div.innerHTML = LANG('filter-bright-contrast-description') + \"<br/><br/>\";\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n\n            let brightnessSlider = new KlSlider({\n                label: LANG('filter-bright-contrast-brightness'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 100,\n                initValue: (brightness + 1) * 50,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    brightness = val / 50 - 1;\n                    glCanvas.draw(texture).brightnessContrast(brightness, contrast).update();\n                    klCanvasPreview.render();\n                }\n            });\n            let contrastSlider = new KlSlider({\n                label: LANG('filter-bright-contrast-contrast'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 100,\n                initValue: (contrast + 1) * 50,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    contrast = val / 50 - 1;\n                    glCanvas.draw(texture).brightnessContrast(brightness, contrast).update();\n                    klCanvasPreview.render();\n                }\n            });\n            brightnessSlider.getElement().style.marginBottom = \"10px\";\n            div.appendChild(brightnessSlider.getElement());\n            div.appendChild(contrastSlider.getElement());\n\n\n\n            let previewWrapper = document.createElement(\"div\");\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + w),\n                height: parseInt('' + h),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + w) + 'px',\n                    height: parseInt('' + h) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n            div.appendChild(previewWrapper);\n\n            try {\n                glCanvas.draw(texture).brightnessContrast(brightness, contrast).update();\n                klCanvasPreview.render();\n            } catch(e) {\n                (div as any).errorCallback(e);\n            }\n\n            result.destroy = () => {\n                brightnessSlider.destroy();\n                contrastSlider.destroy();\n                texture.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    brightness: brightness,\n                    contrast: contrast\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1); // the canvas isn't ready for some reason\n\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let brightness = params.input.brightness;\n        let contrast = params.input.contrast;\n        let history = params.history;\n        if (!context || brightness === null || contrast === null || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).brightnessContrast(brightness, contrast).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"glBrightnessContrast\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n\n        return true;\n    }\n}","import {BB} from '../../bb/bb';\nimport {input} from '../ui/base-components/input';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {ColorOptions} from '../ui/base-components/color-options';\nimport {Cropper} from '../ui/components/cropper';\nimport {IFilterApply, IFilterGetDialogParam} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const cropExtend = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        const canvas = params.canvas;\n        if (!canvas)\n            return false;\n        const tempCanvas = BB.canvas();\n        {\n            let fit = BB.fitInto(canvas.getWidth(), canvas.getHeight(), 560, 400, 1);\n            let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n            let previewFactor = w / canvas.getWidth();\n            tempCanvas.width = w;\n            tempCanvas.height = h;\n            tempCanvas.style.display = 'block';\n            tempCanvas.getContext(\"2d\").drawImage(canvas.getCompleteCanvas(previewFactor), 0, 0, w, h);\n        }\n\n        const div = document.createElement(\"div\");\n        const result: any = {\n            element: div\n        };\n        div.innerHTML = LANG('filter-crop-description') + \"<br/><br/>\";\n        let left = 0, right = 0, top = 0, bottom = 0;\n        let leftChanged = false, rightChanged = false, topChanged = false, bottomChanged = false;\n        const maxWidth = params.maxWidth, maxHeight = params.maxHeight;\n        let scale;\n\n\n\n        // --- input elements ---\n\n        const lrWrapper = BB.el({\n            css: {lineHeight: '30px', height: '35px'}\n        });\n        const tbWrapper = BB.el({\n            css: {lineHeight: '30px', height: '35px'}\n        });\n        div.appendChild(lrWrapper);\n        div.appendChild(tbWrapper);\n\n        const leftInput = input({\n            init: 0,\n            type: 'number',\n            min: -canvas.getWidth(),\n            max: maxWidth,\n            css: {width: '75px', marginRight: '20px'},\n            callback: function(v) {\n                leftChanged = true;\n                updateInput();\n            }\n        });\n        const rightInput = input({\n            init: 0,\n            type: 'number',\n            min: -canvas.getWidth(),\n            max: maxWidth,\n            css: {width: '75px'},\n            callback: function(v) {\n                rightChanged = true;\n                updateInput();\n            }\n        });\n        const topInput = input({\n            init: 0,\n            type: 'number',\n            min: -canvas.getHeight(),\n            max: maxHeight,\n            css: {width: '75px', marginRight: '20px'},\n            callback: function(v) {\n                topChanged = true;\n                updateInput();\n            }\n        });\n        const bottomInput = input({\n            init: 0,\n            type: 'number',\n            min: -canvas.getHeight(),\n            max: maxHeight,\n            css: {width: '75px'},\n            callback: function(v) {\n                bottomChanged = true;\n                updateInput();\n            }\n        });\n\n        const labelStyle = {\n            display: 'inline-block',\n            width: '60px'\n        };\n        lrWrapper.append(\n            BB.el({content: LANG('filter-crop-left') + ':', css: labelStyle}),\n            leftInput,\n            BB.el({content: LANG('filter-crop-right') + ':', css: labelStyle}),\n            rightInput\n        );\n        tbWrapper.append(\n            BB.el({content: LANG('filter-crop-top') + ':', css: labelStyle}),\n            topInput,\n            BB.el({content: LANG('filter-crop-bottom') + ':', css: labelStyle}),\n            bottomInput\n        );\n\n        function updateInput() {\n            left = parseInt(leftInput.value);\n            right = parseInt(rightInput.value);\n            top = parseInt(topInput.value);\n            bottom = parseInt(bottomInput.value);\n            let newWidth = canvas.getWidth() + left + right;\n            let newHeight = canvas.getHeight() + top + bottom;\n\n            if (newWidth <= 0) {\n                if (leftChanged) {\n                    left = -canvas.getWidth() - right + 1;\n                    leftInput.value = '' + left;\n                }\n                if (rightChanged) {\n                    right = -canvas.getWidth() - left + 1;\n                    rightInput.value = '' + right;\n                }\n                newWidth = 1;\n            }\n            if (newWidth > maxWidth) {\n                if (leftChanged) {\n                    left = -canvas.getWidth() - right + maxWidth;\n                    leftInput.value = '' + left;\n                }\n                if (rightChanged) {\n                    right = -canvas.getWidth() - left + maxWidth;\n                    rightInput.value = '' + right;\n                }\n                newWidth = maxWidth;\n            }\n            if (newHeight <= 0) {\n                if (topChanged) {\n                    top = -canvas.getHeight() - bottom + 1;\n                    topInput.value = '' + top;\n                }\n                if (bottomChanged) {\n                    bottom = -canvas.getHeight() - top + 1;\n                    bottomInput.value = '' + bottom;\n                }\n                newHeight = 1;\n            }\n            if (newHeight > maxHeight) {\n                if (topChanged) {\n                    top = -canvas.getHeight() - bottom + maxHeight;\n                    topInput.value = '' + top;\n                }\n                if (bottomChanged) {\n                    bottom = -canvas.getHeight() - top + maxHeight;\n                    bottomInput.value = '' + bottom;\n                }\n                newHeight = maxHeight;\n            }\n            cropper.setTransform({\n                x: -left,\n                y: -top,\n                width: newWidth,\n                height: newHeight\n            });\n\n\n            leftChanged = false;\n            rightChanged = false;\n            topChanged = false;\n            bottomChanged = false;\n        }\n\n        let useRuleOfThirds = true;\n        let ruleOThirdsCheckbox = new Checkbox({\n            init: true,\n            label: LANG('filter-crop-rule-thirds'),\n            allowTab: true,\n            callback: function(b) {\n                useRuleOfThirds = b;\n                cropper.showThirds(useRuleOfThirds);\n            }\n        });\n        div.appendChild(BB.el({\n            css: {\n                clear: 'both'\n            }\n        }));\n\n        let selectedRgbaObj = {r: 0, g: 0, b: 0, a: 0};\n        const colorOptionsArr = [\n            {r: 0, g: 0, b: 0, a: 0},\n            {r: 255, g: 255, b: 255, a: 1},\n            {r: 0, g: 0, b: 0, a: 1}\n        ];\n        colorOptionsArr.push({\n            r: params.currentColorRgb.r,\n            g: params.currentColorRgb.g,\n            b: params.currentColorRgb.b,\n            a: 1,\n        });\n        colorOptionsArr.push({\n            r: params.secondaryColorRgb.r,\n            g: params.secondaryColorRgb.g,\n            b: params.secondaryColorRgb.b,\n            a: 1,\n        });\n\n        const colorOptions = new ColorOptions({\n            label: LANG('filter-crop-fill'),\n            colorArr: colorOptionsArr,\n            onChange: function(rgbaObj) {\n                selectedRgbaObj = rgbaObj;\n                updateBg(rgbaObj);\n            }\n        });\n\n\n        const flexRow = BB.el({\n            css: {\n                display: 'flex',\n                justifyContent: 'space-between'\n            }\n        });\n        div.appendChild(flexRow);\n        flexRow.appendChild(ruleOThirdsCheckbox.getElement());\n        flexRow.appendChild(colorOptions.getElement());\n\n\n        // when input field changed, or dragging in preview finished\n        // adjusts the zoom\n        function update(transform) {\n            const fit = BB.fitInto(transform.width, transform.height, 260, 180, 1);\n            scale = fit.width / transform.width;\n\n            const offset = BB.centerWithin(340, 220, fit.width, fit.height);\n\n            tempCanvas.style.width = canvas.getWidth() * scale + \"px\";\n            tempCanvas.style.height = canvas.getHeight() * scale + \"px\";\n\n            offsetWrapper.style.left = (offset.x - transform.x * scale) + \"px\";\n            offsetWrapper.style.top = (offset.y - transform.y * scale) + \"px\";\n\n            left = parseInt('' + -transform.x);\n            top = parseInt('' + -transform.y);\n            right = parseInt('' + (transform.x + transform.width - canvas.getWidth()));\n            bottom = parseInt('' + (transform.y + transform.height - canvas.getHeight()));\n            leftInput.value = '' + left;\n            topInput.value = '' + top;\n            rightInput.value = '' + right;\n            bottomInput.value = '' + bottom;\n\n            BB.createCheckerDataUrl(parseInt('' + (50 * scale)), function (url) {\n                previewWrapper.style.background = \"url(\" + url + \")\";\n                if (selectedRgbaObj.a !== 0) {\n                    tempCanvas.style.background = \"url(\" + url + \")\";\n                }\n            });\n            previewWrapper.style.backgroundPosition = (offset.x) + \"px \" + (offset.y) + \"px\";\n\n            cropper.setScale(scale);\n        }\n\n        const previewWrapper = BB.el({\n            css: {\n                width: \"340px\",\n                marginTop: '10px',\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                position: \"relative\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                userSelect: 'none',\n                colorScheme: 'only light',\n                touchAction: 'none',\n            }\n        });\n        previewWrapper.oncontextmenu = function () {\n            return false;\n        };\n        const bgColorOverlay = BB.el({\n            css: {\n                position: 'absolute',\n                left: '0',\n                top: '0',\n                bottom: '0',\n                right: '0'\n            }\n        });\n        previewWrapper.appendChild(bgColorOverlay);\n\n        const offsetWrapper = document.createElement(\"div\");\n        offsetWrapper.style.position = \"absolute\";\n        offsetWrapper.style.left = \"0px\";\n        offsetWrapper.style.top = \"0px\";\n        previewWrapper.appendChild(offsetWrapper);\n\n\n        const canvasWrapper = BB.appendTextDiv(offsetWrapper, \"\");\n        canvasWrapper.appendChild(tempCanvas);\n        //tempCanvas.style.width = w + \"px\";\n        //tempCanvas.style.height = h + \"px\";\n        tempCanvas.style.boxShadow = \"0 0 3px 1px rgba(0,0,0,0.5)\";\n        tempCanvas.style.position = \"absolute\";\n        tempCanvas.style.left = \"0px\";\n        tempCanvas.style.top = \"0px\";\n\n        div.appendChild(previewWrapper);\n        const cropper = new Cropper({\n            x: 0,\n            y: 0,\n            width: canvas.getWidth(),\n            height: canvas.getHeight(),\n            scale: scale,\n            callback: update,\n            maxW: maxWidth,\n            maxH: maxHeight\n        });\n        update(cropper.getTransform());\n        offsetWrapper.appendChild(cropper.getElement());\n\n        function updateBg(rgbaObj) {\n\n            let borderColor;\n            if (rgbaObj.a === 0) {\n                borderColor = 'rgba(0,0,0,0.5)';\n                bgColorOverlay.style.background = '';\n                tempCanvas.style.background = '';\n            } else {\n                borderColor = (rgbaObj.r + rgbaObj.g + rgbaObj.b < 255 * 3 / 2) ? 'rgba(255,255,255,0.5)' : 'rgba(0,0,0,0.5)'\n                bgColorOverlay.style.background = BB.ColorConverter.toRgbStr(rgbaObj);\n\n                BB.createCheckerDataUrl(parseInt('' + (50 * scale)), function (url) {\n                    tempCanvas.style.background = \"url(\" + url + \")\";\n                });\n            }\n            tempCanvas.style.boxShadow = \"0 0 3px 1px \" + borderColor;\n        }\n\n        result.destroy = () => {\n            cropper.destroy();\n            ruleOThirdsCheckbox.destroy();\n        };\n        result.getInput = function () {\n            result.destroy();\n            return {\n                left: left,\n                right: right,\n                top: top,\n                bottom: bottom,\n                fillColor: selectedRgbaObj.a === 0 ? null : selectedRgbaObj\n            };\n        };\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        const canvas = params.canvas;\n        const history = params.history;\n        if (!canvas || !history || isNaN(params.input.left) || isNaN(params.input.right) || isNaN(params.input.top) || isNaN(params.input.bottom)) {\n            return false;\n        }\n        history.pause(true);\n        canvas.resizeCanvas(params.input);\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"cropExtend\"],\n            action: \"apply\",\n            params: [{\n                input: JSON.parse(JSON.stringify(params.input))\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {Options} from '../ui/base-components/options';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const glCurves = {\n\n    getDialog(params: IFilterGetDialogParam) {\n\n        let context = params.context;\n        let canvas = params.canvas;\n        if (!context || !canvas) {\n            return false;\n        }\n\n        let layers = canvas.getLayers();\n        let selectedLayerIndex = canvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (tempCanvas.width > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div,\n        };\n        let klCanvasPreview;\n\n        function finishInit() {\n\n            let previewFactor = w / context.canvas.width;\n            let brightness = 0, contrast = 0;\n\n            div.innerHTML = LANG('filter-curves-description') + \"<br/><br/>\";\n\n            let curves = {\n                r: [[0, 0], [1 / 3, 1 / 3], [2 / 3, 2 / 3], [1, 1]],\n                g: [[0, 0], [1 / 3, 1 / 3], [2 / 3, 2 / 3], [1, 1]],\n                b: [[0, 0], [1 / 3, 1 / 3], [2 / 3, 2 / 3], [1, 1]],\n            };\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n\n            function update() {\n                try {\n                    glCanvas.draw(texture).curves(curves.r, curves.g, curves.b).update();\n                    if (klCanvasPreview) {\n                        klCanvasPreview.render();\n                    }\n                } catch(e) {\n                    (div as any).errorCallback(e);\n                }\n            }\n\n            let modeButtons;\n\n            function CurvesInput(p) {\n                let div = document.createElement(\"div\");\n                div.oncontextmenu = function () {\n                    return false;\n                };\n                div.style.position = \"relative\";\n                div.style.marginBottom = \"10px\";\n                let mode = \"All\";\n                let curves = p.curves;\n                modeButtons = new Options( {\n                    optionArr: [\n                        {\n                            id: 'All',\n                            label: LANG('filter-curves-all')\n                        },\n                        {\n                            id: 'Red',\n                            label: LANG('red')\n                        },\n                        {\n                            id: 'Green',\n                            label: LANG('green')\n                        },\n                        {\n                            id: 'Blue',\n                            label: LANG('blue')\n                        },\n                    ],\n                    initialId: 'All',\n                    onChange: function(id) {\n                        mode = id;\n                        if (mode === \"All\") {\n                            curves = {\n                                r: [[0, 0], [1 / 3, 1 / 3], [2 / 3, 2 / 3], [1, 1]],\n                                g: [[0, 0], [1 / 3, 1 / 3], [2 / 3, 2 / 3], [1, 1]],\n                                b: [[0, 0], [1 / 3, 1 / 3], [2 / 3, 2 / 3], [1, 1]],\n                            };\n                        }\n                        let curve = curves.r;\n                        if (mode === \"Green\") {\n                            curve = curves.g;\n                        }\n                        if (mode === \"Blue\") {\n                            curve = curves.b;\n                        }\n                        (p0 as any).setPos(0, areah - curve[0][1] * areah);\n                        (p1 as any).setPos(curve[1][0] * areaw, areah - curve[1][1] * areah);\n                        (p2 as any).setPos(curve[2][0] * areaw, areah - curve[2][1] * areah);\n                        (p3 as any).setPos(areaw, areah - curve[3][1] * areah);\n\n                        update();\n                    }\n                });\n                div.appendChild(modeButtons.getElement());\n\n                let curveArea = document.createElement(\"div\");\n                BB.css(curveArea, {\n                    position: 'relative',\n                    marginTop: '10px',\n                    colorScheme: 'only light',\n                })\n                div.appendChild(curveArea);\n\n                let areaw = 300, areah = 100;\n                let canvas = document.createElement(\"canvas\");\n                canvas.width = areaw;\n                canvas.height = areah;\n                BB.css(canvas, {\n                    background: \"#c6c6c6\",\n                    boxShadow: \"0 0 0 1px rgba(0,0,0,0.3)\"\n                });\n                let ctx = canvas.getContext(\"2d\");\n                curveArea.appendChild(canvas);\n\n                let points = {\n                    r: [],\n                    g: [],\n                    b: []\n                };\n\n                function fit(v) {\n                    return Math.max(0, Math.min(1, v));\n                }\n\n                function createPoint(x, y, callback, lock?) {\n                    let gripSize = 14;\n                    let internalY = y, internalX = x;\n                    let point = document.createElement(\"div\");\n                    BB.css(point, {\n                        position: \"absolute\",\n                        left: (x - gripSize / 2) + \"px\",\n                        top: (y - gripSize / 2) + \"px\",\n                        width: gripSize + \"px\",\n                        height: gripSize + \"px\",\n                        background: \"#fff\",\n                        cursor: \"move\",\n                        borderRadius: gripSize + \"px\",\n                        boxShadow: \"inset 0 0 0 2px #000\",\n                        userSelect: 'none',\n                        touchAction: 'none',\n                    });\n\n                    function update() {\n                        BB.css(point, {\n                            left: (x - gripSize / 2) + \"px\",\n                            top: (y - gripSize / 2) + \"px\"\n                        });\n                    }\n\n                    (point as any).pointerListener = new BB.PointerListener({\n                        target: point,\n                        maxPointers: 1,\n                        onPointer: function(event) {\n                            event.eventPreventDefault();\n                            if (event.type === 'pointerdown') {\n                                internalX = x;\n                                internalY = y;\n                            }\n                            if (event.button === 'left' && event.type === 'pointermove') {\n                                if (!lock) {\n                                    internalX += event.dX;\n                                }\n                                x = Math.max(0, Math.min(areaw, internalX));\n                                internalY += event.dY;\n                                y = Math.max(0, Math.min(areah, internalY));\n                                update();\n                                callback({\n                                    x: x,\n                                    y: y\n                                });\n                            }\n                        }\n                    });\n\n                    curveArea.appendChild(point);\n\n                    (point as any).setPos = function (newX, newY) {\n                        x = newX;\n                        y = newY;\n                        internalY = y;\n                        internalX = x;\n                        BB.css(point, {\n                            left: (x - gripSize / 2) + \"px\",\n                            top: (y - gripSize / 2) + \"px\"\n                        });\n                    };\n\n                    return point;\n                }\n\n                function updateControl(i, x, y) {\n                    if (mode === \"All\") {\n                        curves.r[i] = [fit(x / areaw), fit(1 - y / areah)];\n                        curves.g[i] = [fit(x / areaw), fit(1 - y / areah)];\n                        curves.b[i] = [fit(x / areaw), fit(1 - y / areah)];\n                    }\n                    if (mode === \"Red\") {\n                        curves.r[i] = [fit(x / areaw), fit(1 - y / areah)];\n                    }\n                    if (mode === \"Green\") {\n                        curves.g[i] = [fit(x / areaw), fit(1 - y / areah)];\n                    }\n                    if (mode === \"Blue\") {\n                        curves.b[i] = [fit(x / areaw), fit(1 - y / areah)];\n                    }\n                }\n\n                let p0 = createPoint(0, areah, function (val) {\n                    updateControl(0, val.x, val.y);\n                    update();\n                }, true);\n                let p1 = createPoint(areaw / 3, areah / 3 * 2, function (val) {\n                    updateControl(1, val.x, val.y);\n                    update();\n                });\n                let p2 = createPoint(areaw / 3 * 2, areah / 3, function (val) {\n                    updateControl(2, val.x, val.y);\n                    update();\n                });\n                let p3 = createPoint(areaw, 0, function (val) {\n                    updateControl(3, val.x, val.y);\n                    update();\n                }, true);\n\n\n                function update() {\n                    canvas.width = canvas.width;\n                    ctx = canvas.getContext(\"2d\");\n\n                    let outCurves = {\n                        r: [],\n                        g: [],\n                        b: []\n                    };\n                    for (let i = 0; i < curves.r.length; i++) {\n                        outCurves.r.push(curves.r[i]);\n                        outCurves.g.push(curves.g[i]);\n                        outCurves.b.push(curves.b[i]);\n                    }\n\n                    function drawCurve(curve) {\n                        ctx.beginPath();\n                        let spline = new BB.SplineInterpolator(curve);\n                        for (let i = 0; i < 100; i++) {\n                            let y = spline.interpolate(i / 100);\n                            y = Math.max(0, Math.min(1, y));\n\n                            if (i === 0) {\n                                ctx.moveTo(i / 100 * areaw, areah - y * areah);\n                            } else {\n                                ctx.lineTo(i / 100 * areaw, areah - y * areah);\n                            }\n                        }\n                        ctx.stroke();\n                    }\n\n                    ctx.save();\n                    if (mode === \"All\") {\n                        ctx.strokeStyle = \"black\";\n                        drawCurve(outCurves.r);\n                    } else {\n                        ctx.globalAlpha = 0.5;\n                        ctx.strokeStyle = \"red\";\n                        drawCurve(outCurves.r);\n                        ctx.strokeStyle = \"green\";\n                        drawCurve(outCurves.g);\n                        ctx.strokeStyle = \"blue\";\n                        drawCurve(outCurves.b);\n                    }\n                    ctx.restore();\n                    p.callback(outCurves);\n                }\n\n                update();\n\n\n                this.getDiv = function () {\n                    return div;\n                };\n                this.destroy = function() {\n                    (p0 as any).pointerListener.destroy();\n                    (p1 as any).pointerListener.destroy();\n                    (p2 as any).pointerListener.destroy();\n                    (p3 as any).pointerListener.destroy();\n                };\n            }\n\n            let input = new CurvesInput({\n                curves: curves,\n                callback: function (val) {\n                    curves = val;\n                    update();\n                }\n            });\n\n\n            div.appendChild(input.getDiv());\n\n\n\n            let previewWrapper = document.createElement(\"div\");\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + w),\n                height: parseInt('' + h),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + w) + 'px',\n                    height: parseInt('' + h) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n\n            div.appendChild(previewWrapper);\n\n            result.destroy = () => {\n                input.destroy();\n                texture.destroy();\n                modeButtons.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    curves: curves\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let curves = params.input.curves;\n        let history = params.history;\n        if (!context || curves === null || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).curves(curves.r, curves.g, curves.b).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"glCurves\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n\n        return true;\n    }\n\n\n};","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"eFiVD\");","import {BB} from '../../bb/bb';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\n// @ts-ignore\nimport checkmarkImg from 'url:~/src/app/img/ui/checkmark.svg';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer, IMixMode} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const flip = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let canvas = params.canvas;\n        if (!context || !canvas) {\n            return false;\n        }\n\n        let layers = canvas.getLayers();\n        let selectedLayerIndex = canvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n        let isHorizontal = true;\n        let isVertical = false;\n        let doFlipCanvas = true;\n        div.innerHTML = LANG('filter-flip-description') + \"<br/><br/>\";\n\n\n        let horizontalCheckbox = new Checkbox({\n            init: isHorizontal,\n            label: LANG('filter-flip-horizontal') + ' ⟷',\n            allowTab: true,\n            callback: function(v) {\n                isHorizontal = v;\n                updatePreview();\n            },\n            css: {\n                marginBottom: '10px'\n            }\n        });\n        let verticalCheckbox = new Checkbox({\n            init: isVertical,\n            label: LANG('filter-flip-vertical') + ' ↕',\n            allowTab: true,\n            callback: function(v) {\n                isVertical = v;\n                updatePreview();\n            },\n            css: {\n                marginBottom: '10px'\n            }\n        });\n        div.appendChild(horizontalCheckbox.getElement());\n        div.appendChild(verticalCheckbox.getElement());\n\n\n\n\n\n        let fcOption = document.createElement(\"div\");\n        BB.setEventListener(fcOption, 'onpointerdown', function () {\n            return false;\n        });\n        fcOption.textContent = LANG('filter-flip-image');\n        fcOption.style.width = \"150px\";\n        fcOption.style.height = \"30px\";\n        fcOption.style.paddingTop = \"10px\";\n        fcOption.style.textAlign = \"center\";\n        fcOption.style.cssFloat = \"left\";\n        fcOption.style.paddingBottom = \"0px\";\n        fcOption.style.borderTopLeftRadius = \"10px\";\n        fcOption.style.boxShadow = \"inset 0px 5px 10px rgba(0,0,0,0.5)\";\n        fcOption.style.background = \"url(\" + checkmarkImg + \") no-repeat 12px 16px\";\n        fcOption.style.backgroundSize = '8%';\n        fcOption.style.backgroundColor = \"#9e9e9e\";\n\n        let flOption = document.createElement(\"div\");\n        BB.setEventListener(flOption, 'onpointerdown', function () {\n            return false;\n        });\n        flOption.textContent = LANG('filter-flip-layer');\n        flOption.style.width = \"150px\";\n        flOption.style.height = \"30px\";\n        flOption.style.paddingTop = \"10px\";\n        flOption.style.textAlign = \"center\";\n        flOption.style.cssFloat = \"left\";\n        flOption.style.paddingBottom = \"0px\";\n        flOption.style.borderTopRightRadius = \"10px\";\n        flOption.style.cursor = \"pointer\";\n        flOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n        flOption.style.backgroundSize = '8%';\n\n        BB.setEventListener(fcOption, 'onpointerover', function () {\n            if (doFlipCanvas === false)\n                fcOption.style.backgroundColor = \"#ccc\";\n        });\n        BB.setEventListener(fcOption, 'onpointerout', function () {\n            if (doFlipCanvas === false)\n                fcOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n        });\n        BB.setEventListener(flOption, 'onpointerover', function () {\n            if (doFlipCanvas === true)\n                flOption.style.backgroundColor = \"#ccc\";\n        });\n        BB.setEventListener(flOption, 'onpointerout', function () {\n            if (doFlipCanvas === true)\n                flOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n        });\n\n        fcOption.onclick = function () {\n            doFlipCanvas = true;\n\n            flOption.style.background = \"\";\n            flOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n            flOption.style.boxShadow = \"\";\n            flOption.style.cursor = \"pointer\";\n\n            fcOption.style.background = \"url(\" + checkmarkImg + \") no-repeat 12px 16px\";\n            fcOption.style.backgroundSize = '8%';\n            fcOption.style.backgroundColor = \"#9e9e9e\";\n            fcOption.style.cursor = \"default\";\n            fcOption.style.boxShadow = \"inset 0px 5px 10px rgba(0,0,0,0.5)\";\n\n            updatePreview();\n        };\n        flOption.onclick = function () {\n            doFlipCanvas = false;\n\n            fcOption.style.background = \"\";\n            fcOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n            fcOption.style.boxShadow = \"\";\n            fcOption.style.cursor = \"pointer\";\n\n            flOption.style.background = \"url(\" + checkmarkImg + \") no-repeat 12px 16px\";\n            flOption.style.backgroundSize = '8%';\n            flOption.style.backgroundColor = \"#9e9e9e\";\n            flOption.style.cursor = \"default\";\n            flOption.style.boxShadow = \"inset 0px 5px 10px rgba(0,0,0,0.5)\";\n\n            updatePreview();\n        };\n\n        let optionWrapper = document.createElement(\"div\");\n        optionWrapper.appendChild(fcOption);\n        optionWrapper.appendChild(flOption);\n        div.appendChild(optionWrapper);\n\n\n        let previewWrapper = document.createElement(\"div\");\n        BB.css(previewWrapper, {\n            width: \"340px\",\n            marginLeft: \"-20px\",\n            height: \"220px\",\n            backgroundColor: \"#9e9e9e\",\n            marginTop: \"10px\",\n            boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n            overflow: \"hidden\",\n            position: \"relative\",\n            userSelect: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            colorScheme: 'only light',\n        });\n\n        let previewLayer: IKlBasicLayer = {\n            image: BB.canvas(Math.round(w), Math.round(h)),\n            opacity: 1,\n            mixModeStr: 'source-over' as IMixMode,\n        };\n        let klCanvasPreview = new KlCanvasPreview({\n            width: Math.round(w),\n            height: Math.round(h),\n            layers: [previewLayer]\n        });\n\n        let previewInnerWrapper = BB.el({\n            css: {\n                position: 'relative',\n                boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                width: parseInt('' + w) + 'px',\n                height: parseInt('' + h) + 'px'\n            }\n        });\n        previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n        previewWrapper.appendChild(previewInnerWrapper);\n\n        function updatePreview() {\n            let ctx = (previewLayer.image as HTMLCanvasElement).getContext('2d');\n            ctx.save();\n            ctx.clearRect(0, 0, previewLayer.image.width, previewLayer.image.height);\n\n            if (doFlipCanvas) {\n                if (isHorizontal) {\n                    ctx.translate(previewLayer.image.width, 0);\n                    ctx.scale(-1, 1);\n                }\n                if (isVertical) {\n                    ctx.translate(0, previewLayer.image.height);\n                    ctx.scale(1, -1);\n                }\n            }\n\n            for (let i = 0; i < layers.length; i++) {\n                ctx.save();\n                if (!doFlipCanvas && selectedLayerIndex === i) {\n                    if (isHorizontal) {\n                        ctx.translate(previewLayer.image.width, 0);\n                        ctx.scale(-1, 1);\n                    }\n                    if (isVertical) {\n                        ctx.translate(0, previewLayer.image.height);\n                        ctx.scale(1, -1);\n                    }\n                }\n                if (ctx.canvas.width > layers[i].context.canvas.width) {\n                    ctx.imageSmoothingEnabled = false;\n                }\n                ctx.globalAlpha = layers[i].opacity;\n                ctx.globalCompositeOperation = layers[i].mixModeStr;\n                ctx.drawImage(layers[i].context.canvas, 0, 0, previewLayer.image.width, previewLayer.image.height);\n                ctx.restore();\n            }\n            klCanvasPreview.render();\n            ctx.restore();\n        }\n        setTimeout(updatePreview, 0);\n\n\n        div.appendChild(previewWrapper);\n        result.destroy = () => {\n            horizontalCheckbox.destroy();\n            verticalCheckbox.destroy();\n        };\n        result.getInput = function () {\n            result.destroy();\n            return {\n                horizontal: isHorizontal,\n                vertical: isVertical,\n                flipCanvas: doFlipCanvas\n            };\n        };\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let canvas = params.canvas;\n        let history = params.history;\n        let horizontal = params.input.horizontal;\n        let vertical = params.input.vertical;\n        let flipCanvas = params.input.flipCanvas;\n        if (!context || !canvas || !history) {\n            return false;\n        }\n\n        history.pause(true);\n        canvas.flip(horizontal, vertical, flipCanvas ? null : canvas.getLayerIndex(context.canvas));\n        history.pause(false);\n\n        history.push({\n            tool: [\"filter\", \"flip\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    },\n\n};","import {BB} from '../../bb/bb';\nimport {eventResMs} from './filters-consts';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const glHueSaturation = {\n\n    getDialog(params: IFilterGetDialogParam) {\n\n        let context = params.context;\n        let canvas = params.canvas;\n        if (!context || !canvas) {\n            return false;\n        }\n\n        let layers = canvas.getLayers();\n        let selectedLayerIndex = canvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height,280, 200,  1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (tempCanvas.width > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n\n        function finishInit() {\n            let hue = 0, Saturation = 0;\n            div.innerHTML = LANG('filter-hue-sat-description') + \"<br/><br/>\";\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n\n            let hueSlider = new KlSlider({\n                label: LANG('filter-hue-sat-hue'),\n                width: 300,\n                height: 30,\n                min: -100,\n                max: 100,\n                initValue: hue * 100,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    hue = val / 100;\n                    glCanvas.draw(texture).hueSaturation(hue, Saturation).update();\n                    klCanvasPreview.render();\n                }\n            });\n            let saturationSlider = new KlSlider({\n                label: LANG('filter-hue-sat-saturation'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 100,\n                initValue: (Saturation + 1) * 50,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    Saturation = val / 50 - 1;\n                    glCanvas.draw(texture).hueSaturation(hue, Saturation).update();\n                    klCanvasPreview.render();\n                }\n            });\n            hueSlider.getElement().style.marginBottom = \"10px\";\n            div.appendChild(hueSlider.getElement());\n            div.appendChild(saturationSlider.getElement());\n\n\n            let previewWrapper = document.createElement(\"div\");\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + w),\n                height: parseInt('' + h),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + w) + 'px',\n                    height: parseInt('' + h) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n\n            div.appendChild(previewWrapper);\n\n            try {\n                glCanvas.draw(texture).hueSaturation(hue, Saturation).update();\n                klCanvasPreview.render();\n            } catch(e) {\n                (div as any).errorCallback(e);\n            }\n\n            result.destroy = () => {\n                hueSlider.destroy();\n                saturationSlider.destroy();\n                texture.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    hue: hue,\n                    Saturation: Saturation\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let hue = params.input.hue;\n        let history = params.history;\n        let Saturation = params.input.Saturation;\n        if (!context || hue === null || Saturation === null || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).hueSaturation(hue, Saturation).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"glHueSaturation\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply} from '../kl.types';\n\nexport const invert = {\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let history = params.history;\n        if (!context || !history) {\n            return false;\n        }\n        history.pause(true);\n\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false;\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).invert().update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"invert\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\n// @ts-ignore\nimport checkmarkImg from 'url:~/src/app/img/ui/checkmark.svg';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const glPerspective = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let canvas = params.canvas;\n        if (!context || !canvas) {\n            return false;\n        }\n\n        let isSmall = window.innerWidth < 550;\n        let layers = canvas.getLayers();\n        let selectedLayerIndex = canvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, isSmall ? 280 : 490, isSmall ? 200 : 240, 1);\n        let displayW = parseInt('' + fit.width), displayH = parseInt('' + fit.height);\n        let w = Math.min(displayW, context.canvas.width);\n        let h = Math.min(displayH, context.canvas.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (w > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n        let displayPreviewFactor = displayW / context.canvas.width;\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n        if (!isSmall) {\n            result.width = 500;\n        }\n\n        let pointerListenerArr = [];\n\n        function finishInit() {\n            div.innerHTML = LANG('filter-perspective-description') + \"<br/><br/>\";\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n            let ba, bb, bc, bd; //before\n            let aa, ab, ac, ad; //after\n            function update() {\n                try {\n                    glCanvas.draw(texture).perspective(\n                        [ba.x, ba.y, bb.x, bb.y, bc.x, bc.y, bd.x, bd.y].map((item, i) => {\n                            if (i % 2 === 0) {\n                                return item / displayW * w;\n                            } else {\n                                return item / displayH * h;\n                            }\n                        }),\n                        [aa.x, aa.y, ab.x, ab.y, ac.x, ac.y, ad.x, ad.y].map((item, i) => {\n                            if (i % 2 === 0) {\n                                return item / displayW * w;\n                            } else {\n                                return item / displayH * h;\n                            }\n                        })\n                    ).update();\n                    klCanvasPreview.render();\n                } catch(e) {\n                    (div as any).errorCallback(e);\n                }\n            }\n\n            function nob(x, y, callback?) {\n                let nobSize = 14;\n                let div = document.createElement(\"div\");\n                (div as any).x = x;\n                (div as any).y = y;\n                BB.css(div, {\n                    width: nobSize + \"px\",\n                    height: nobSize + \"px\",\n                    backgroundColor: \"#fff\",\n                    boxShadow: \"inset 0 0 0 2px #000\",\n                    borderRadius: nobSize + \"px\",\n                    position: \"absolute\",\n                    cursor: \"move\",\n                    left: ((div as any).x - nobSize / 2) + \"px\",\n                    top: ((div as any).y - nobSize / 2) + \"px\",\n                    userSelect: 'none',\n                    touchAction: 'none',\n                });\n\n                let pointerListener = new BB.PointerListener({\n                    target: div,\n                    maxPointers: 1,\n                    onPointer: function(event) {\n                        event.eventPreventDefault();\n                        if (event.button === 'left' && event.type === 'pointermove') {\n                            (div as any).x += event.dX;\n                            (div as any).y += event.dY;\n                            div.style.left = ((div as any).x - nobSize / 2) + \"px\";\n                            div.style.top = ((div as any).y - nobSize / 2) + \"px\";\n                            if (callback) {\n                                callback();\n                            }\n                            update();\n                        }\n                    }\n                });\n                (div as any).copy = function (p) {\n                    (div as any).x = p.x;\n                    (div as any).y = p.y;\n                    div.style.left = ((div as any).x - nobSize / 2) + \"px\";\n                    div.style.top = ((div as any).y - nobSize / 2) + \"px\";\n                };\n                pointerListenerArr.push(pointerListener);\n                return div;\n            }\n\n            function updateAfter() {\n                aa.copy(ba);\n                ab.copy(bb);\n                ac.copy(bc);\n                ad.copy(bd);\n            }\n\n            ba = nob(0, 0, updateAfter);\n            bb = nob(displayW, 0, updateAfter);\n            bc = nob(displayW, displayH, updateAfter);\n            bd = nob(0, displayH, updateAfter);\n            aa = nob(0, 0);\n            ab = nob(displayW, 0);\n            ac = nob(displayW, displayH);\n            ad = nob(0, displayH);\n\n            let before = false;\n            let beforeOption = document.createElement(\"div\");\n            BB.setEventListener(beforeOption, 'onpointerdown', function () {\n                return false;\n            });\n            beforeOption.textContent = LANG('filter-perspective-before');\n            beforeOption.style.width = \"150px\";\n            beforeOption.style.height = \"30px\";\n            beforeOption.style.marginLeft = isSmall ? '0' : \"100px\";\n            beforeOption.style.paddingTop = \"10px\";\n            beforeOption.style.textAlign = \"center\";\n            beforeOption.style.cssFloat = \"left\";\n            beforeOption.style.paddingBottom = \"0px\";\n            beforeOption.style.borderTopLeftRadius = \"10px\";\n            beforeOption.style.cursor = \"pointer\";\n            beforeOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n            beforeOption.style.backgroundSize = '8%';\n\n            let afterOption = document.createElement(\"div\");\n            BB.setEventListener(afterOption, 'onpointerdown', function () {\n                return false;\n            });\n            afterOption.textContent = LANG('filter-perspective-after');\n            afterOption.style.width = \"150px\";\n            afterOption.style.height = \"30px\";\n            afterOption.style.paddingTop = \"10px\";\n            afterOption.style.textAlign = \"center\";\n            afterOption.style.cssFloat = \"left\";\n            afterOption.style.paddingBottom = \"0px\";\n            afterOption.style.borderTopRightRadius = \"10px\";\n            afterOption.style.boxShadow = \"inset 0px 5px 10px rgba(0,0,0,0.5)\";\n            afterOption.style.background = \"url(\" + checkmarkImg + \") no-repeat 12px 16px\";\n            afterOption.style.backgroundSize = '8%';\n            afterOption.style.backgroundColor = \"#9e9e9e\";\n\n\n            BB.setEventListener(beforeOption, 'onpointerover', function () {\n                if (before === false)\n                    beforeOption.style.backgroundColor = \"#ccc\";\n            });\n            BB.setEventListener(beforeOption, 'onpointerout', function () {\n                if (before === false)\n                    beforeOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n            });\n            BB.setEventListener(afterOption, 'onpointerover', function () {\n                if (before === true)\n                    afterOption.style.backgroundColor = \"#ccc\";\n            });\n            BB.setEventListener(afterOption, 'onpointerout', function () {\n                if (before === true)\n                    afterOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n            });\n\n            beforeOption.onclick = function () {\n\n                beforeOption.style.background = \"url(\" + checkmarkImg + \") no-repeat 12px 16px\";\n                beforeOption.style.backgroundSize = '8%';\n                beforeOption.style.backgroundColor = \"#9e9e9e\";\n                beforeOption.style.boxShadow = \"inset 0px 5px 10px rgba(0,0,0,0.5)\";\n                beforeOption.style.cursor = \"default\";\n\n                afterOption.style.background = \"\";\n                afterOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n                afterOption.style.boxShadow = \"\";\n                afterOption.style.cursor = \"pointer\";\n\n                aa.style.display = \"none\";\n                ab.style.display = \"none\";\n                ac.style.display = \"none\";\n                ad.style.display = \"none\";\n\n                ba.style.display = \"block\";\n                bb.style.display = \"block\";\n                bc.style.display = \"block\";\n                bd.style.display = \"block\";\n                ba.copy(aa);\n                bb.copy(ab);\n                bc.copy(ac);\n                bd.copy(ad);\n                before = true;\n                update();\n            };\n            afterOption.onclick = function () {\n                before = false;\n\n                afterOption.style.background = \"url(\" + checkmarkImg + \") no-repeat 12px 16px\";\n                afterOption.style.backgroundSize = '8%';\n                afterOption.style.backgroundColor = \"#9e9e9e\";\n                afterOption.style.boxShadow = \"inset 0px 5px 10px rgba(0,0,0,0.5)\";\n                afterOption.style.cursor = \"default\";\n\n                beforeOption.style.background = \"\";\n                beforeOption.style.backgroundColor = \"rgba(0, 0, 0, 0.1)\";\n                beforeOption.style.boxShadow = \"\";\n                beforeOption.style.cursor = \"pointer\";\n\n                ba.style.display = \"none\";\n                bb.style.display = \"none\";\n                bc.style.display = \"none\";\n                bd.style.display = \"none\";\n\n                aa.style.display = \"block\";\n                ab.style.display = \"block\";\n                ac.style.display = \"block\";\n                ad.style.display = \"block\";\n                aa.copy(ba);\n                ab.copy(bb);\n                ac.copy(bc);\n                ad.copy(bd);\n            };\n\n            let optionWrapper = document.createElement(\"div\");\n            optionWrapper.appendChild(beforeOption);\n            optionWrapper.appendChild(afterOption);\n            div.appendChild(optionWrapper);\n\n\n            let previewWrapper = document.createElement(\"div\");\n            previewWrapper.oncontextmenu = function () {\n                return false;\n            };\n            BB.css(previewWrapper, {\n                width: isSmall ? '340px' : '540px',\n                marginLeft: \"-20px\",\n                height: isSmall ? '260px' : '300px',\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    let canvas = i === selectedLayerIndex ? glCanvas : layers[i].context.canvas;\n                    previewLayerArr.push({\n                        image: canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + displayW),\n                height: parseInt('' + displayH),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + displayW) + 'px',\n                    height: parseInt('' + displayH) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n            previewInnerWrapper.appendChild(aa);\n            previewInnerWrapper.appendChild(ab);\n            previewInnerWrapper.appendChild(ac);\n            previewInnerWrapper.appendChild(ad);\n\n            ba.style.display = \"none\";\n            bb.style.display = \"none\";\n            bc.style.display = \"none\";\n            bd.style.display = \"none\";\n            previewInnerWrapper.appendChild(ba);\n            previewInnerWrapper.appendChild(bb);\n            previewInnerWrapper.appendChild(bc);\n            previewInnerWrapper.appendChild(bd);\n\n\n            div.appendChild(previewWrapper);\n            update();\n            result.destroy = () => {\n                for (let i = 0; i < pointerListenerArr.length; i++) {\n                    pointerListenerArr[i].destroy();\n                }\n                texture.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    before: [\n                        ba.x / displayPreviewFactor,\n                        ba.y / displayPreviewFactor,\n\n                        bb.x / displayPreviewFactor,\n                        bb.y / displayPreviewFactor,\n\n                        bc.x / displayPreviewFactor,\n                        bc.y / displayPreviewFactor,\n\n                        bd.x / displayPreviewFactor,\n                        bd.y / displayPreviewFactor,\n                    ],\n                    after: [\n                        aa.x / displayPreviewFactor,\n                        aa.y / displayPreviewFactor,\n\n                        ab.x / displayPreviewFactor,\n                        ab.y / displayPreviewFactor,\n\n                        ac.x / displayPreviewFactor,\n                        ac.y / displayPreviewFactor,\n\n                        ad.x / displayPreviewFactor,\n                        ad.y / displayPreviewFactor,\n                    ]\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let history = params.history;\n        let before = params.input.before;\n        let after = params.input.after;\n        if (!context || !before || !after || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        let w = context.canvas.width;\n        let h = context.canvas.height;\n        glCanvas.draw(texture).perspective(before, after).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"glPerspective\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"2BZYe\");","import {BB} from '../../bb/bb';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {Select} from '../ui/base-components/select';\n// @ts-ignore\nimport constrainImg from 'url:~/src/app/img/ui/constrain.svg';\nimport {IFilterApply, IFilterGetDialogParam} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const resize = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        //BB.centerWithin\n        let canvas = params.canvas;\n        if (!canvas)\n            return false;\n\n        let fit = BB.fitInto( canvas.getWidth(), canvas.getHeight(), 280, 200,1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let previewFactor = w / canvas.getWidth();\n        let tempCanvas = canvas.getCompleteCanvas(1);\n\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n        let newWidth = canvas.getWidth(), newHeight = canvas.getHeight();\n\n        div.innerHTML = LANG('filter-resize-description') + \"<br/><br/>\";\n\n\n        let maxWidth = params.maxWidth, maxHeight = params.maxHeight;\n\n        let widthWrapper = BB.el({\n            css: {\n                width: '150px',\n                height: '35px',\n                lineHeight: '30px',\n            }\n        });\n        let heightWrapper = BB.el({\n            css: {\n                width: '150px',\n                height: '35px',\n                lineHeight: '30px',\n            }\n        });\n        let widthInput = BB.el({\n            tagName: 'input',\n            css: {\n                cssFloat: 'right',\n                width: '90px',\n            },\n            custom: {\n                type: 'number',\n                min: '1',\n                max: '' + maxWidth,\n                value: '' + canvas.getWidth(),\n            }\n        }) as HTMLInputElement;\n        let heightInput = BB.el({\n            tagName: 'input',\n            css: {\n                cssFloat: 'right',\n                width: '90px',\n            },\n            custom: {\n                type: 'number',\n                min: '1',\n                max: '' + maxHeight,\n                value: '' + canvas.getHeight(),\n            }\n        }) as HTMLInputElement;\n        widthInput.onclick = function () {\n            (this as any).focus();\n            widthChanged = true;\n            update();\n        };\n        heightInput.onclick = function () {\n            (this as any).focus();\n            heightChanged = true;\n            update();\n        };\n        widthInput.onchange = function () {\n            widthChanged = true;\n            update();\n        };\n        heightInput.onchange = function () {\n            heightChanged = true;\n            update();\n        };\n        widthWrapper.append(LANG('width') + \": \", widthInput);\n        heightWrapper.append(LANG('height') + \": \", heightInput);\n        let inputWrapper = BB.el({\n            css: {\n                background: \"url(\" + constrainImg + \") no-repeat 140px 5px\",\n                backgroundSize: '50px 52px',\n            }\n        });\n        inputWrapper.append(widthWrapper, heightWrapper);\n        div.appendChild(inputWrapper);\n\n        //contrain checkbox\n        let heightChanged = false, widthChanged = false;\n        let ratio = canvas.getWidth() / canvas.getHeight();\n\n        function updateConstrain() {\n            if (isConstrained) {\n                widthInput.value = '' + canvas.getWidth();\n                heightInput.value = '' + canvas.getHeight();\n                inputWrapper.style.background = \"url(\" + constrainImg + \") no-repeat 140px 5px\";\n                inputWrapper.style.backgroundSize = '50px 52px';\n                update();\n            } else {\n                inputWrapper.style.background = \"\";\n            }\n        }\n\n        let isConstrained = true;\n        let constrainCheckbox = new Checkbox({\n            init: true,\n            label: LANG('constrain-proportions'),\n            allowTab: true,\n            callback: function(b) {\n                isConstrained = b;\n                updateConstrain();\n            }\n        });\n        div.appendChild(BB.el({\n            css: {\n                clear: 'both'\n            }\n        }));\n\n\n        let algorithmSelect = new Select({\n            isFocusable: true,\n            optionArr: [\n                ['smooth', LANG('algorithm-smooth')],\n                ['pixelated', LANG('algorithm-pixelated')]\n            ],\n            title: LANG('scaling-algorithm'),\n            initValue: 'smooth',\n            onChange: function() {\n                update();\n            },\n        });\n\n        let secondRowElement = BB.el({\n            parent: div,\n            css: {\n                display: 'flex',\n                justifyContent: 'space-between'\n            }\n        });\n        secondRowElement.appendChild(constrainCheckbox.getElement());\n        secondRowElement.appendChild(algorithmSelect.getElement());\n\n        let previewCanvas = BB.canvas(w, h);\n        previewCanvas.style.imageRendering = 'pixelated';\n\n\n        let previewCtx = previewCanvas.getContext('2d');\n\n\n        function draw() {\n            if (algorithmSelect.getValue() === 'smooth') {\n                previewCanvas.style.imageRendering = previewFactor > 1 ? 'pixelated' : '';\n\n                previewCanvas.width = canvas.getWidth();\n                previewCanvas.height = canvas.getHeight();\n\n                previewCtx.save();\n                previewCtx.imageSmoothingQuality = 'high';\n                previewCtx.drawImage(tempCanvas, 0, 0);\n                BB.resizeCanvas(previewCanvas, newWidth, newHeight);\n                previewCtx.restore();\n\n            } else {\n                previewCanvas.style.imageRendering = 'pixelated';\n\n                previewCanvas.width = newWidth;\n                previewCanvas.height = newHeight;\n                previewCtx.save();\n                previewCtx.imageSmoothingEnabled = false;\n                previewCtx.drawImage(tempCanvas, 0, 0, previewCanvas.width, previewCanvas.height);\n                previewCtx.restore();\n            }\n\n        }\n\n        function update() {\n            if ((widthInput.value.length === 0 && widthChanged) || (heightInput.value.length === 0 && heightChanged)) {\n                heightChanged = false;\n                widthChanged = false;\n                return;\n            }\n            widthInput.value = '' + Math.max(1, parseInt(widthInput.value));\n            heightInput.value = '' + Math.max(1, parseInt(heightInput.value));\n            if (isConstrained) {\n                if (heightChanged) {\n                    widthInput.value = '' + parseInt('' + (parseInt(heightInput.value) * ratio));\n                }\n                if (widthChanged) {\n                    heightInput.value = '' + parseInt('' + (parseInt(widthInput.value) / ratio));\n                }\n\n                if (parseInt(widthInput.value) > maxWidth || parseInt(heightInput.value) > maxHeight) {\n                    let fit = BB.fitInto(parseInt(widthInput.value), parseInt(heightInput.value), maxWidth, maxHeight, 1);\n                    widthInput.value = '' + parseInt('' + fit.width);\n                    heightInput.value = '' + parseInt('' + fit.height);\n                }\n            }\n\n            if (parseInt(widthInput.value) > maxWidth) {\n                widthInput.value = '' + maxWidth;\n            }\n            if (parseInt(heightInput.value) > maxHeight) {\n                heightInput.value = '' + maxHeight;\n            }\n\n            heightChanged = false;\n            widthChanged = false;\n\n            newWidth = parseInt(widthInput.value);\n            newHeight = parseInt(heightInput.value);\n\n            let preview = BB.fitInto(newWidth, newHeight, 280, 200, 1);\n            let previewW = parseInt('' + preview.width), previewH = parseInt('' + preview.height);\n            previewFactor = previewW / newWidth;\n\n            let offset = BB.centerWithin(340, 220, previewW, previewH);\n\n            draw();\n\n            previewCanvas.style.width = Math.max(1, previewW) + \"px\";\n            previewCanvas.style.height = Math.max(1, previewH) + \"px\";\n            canvasWrapper.style.left = offset.x + \"px\";\n            canvasWrapper.style.top = offset.y + \"px\";\n            canvasWrapper.style.width = Math.max(1, previewW) + \"px\";\n            canvasWrapper.style.height = Math.max(1, previewH) + \"px\";\n        }\n\n        let previewWrapper = document.createElement(\"div\");\n        BB.css(previewWrapper, {\n            width: \"340px\",\n            marginLeft: \"-20px\",\n            height: \"220px\",\n            display: \"table\",\n            backgroundColor: \"#9e9e9e\",\n            marginTop: \"10px\",\n            boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n            position: \"relative\",\n            userSelect: 'none',\n            colorScheme: 'only light',\n        });\n\n\n        let canvasWrapper = BB.appendTextDiv(previewWrapper, \"\");\n        canvasWrapper.appendChild(previewCanvas);\n        canvasWrapper.style.width = w + \"px\";\n        canvasWrapper.style.height = h + \"px\";\n        canvasWrapper.style.position = \"absolute\";\n        canvasWrapper.style.overflow = \"hidden\";\n        canvasWrapper.style.boxShadow = \"0 0 5px rgba(0,0,0,0.8)\";\n        canvasWrapper.style.overflow = \"hidden\";\n        BB.createCheckerDataUrl(8, function (url) {\n            previewWrapper.style.background = \"url(\" + url + \")\";\n        });\n\n        div.appendChild(previewWrapper);\n        update();\n\n        result.destroy = () => {\n            constrainCheckbox.destroy();\n        };\n        result.getInput = function () {\n            result.destroy();\n            return {\n                width: newWidth,\n                height: newHeight,\n                algorithm: algorithmSelect.getValue()\n            };\n        };\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let canvas = params.canvas;\n        let history = params.history;\n        let width = params.input.width;\n        let height = params.input.height;\n        let algorithm = params.input.algorithm;\n        if (!canvas || !history) {\n            return false;\n        }\n        history.pause(true);\n        canvas.resize(width, height, algorithm);\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"resize\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {IFilterApply, IFilterGetDialogParam} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const rotate = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let canvas = params.canvas;\n        if (!canvas)\n            return false;\n\n        let fit = BB.fitInto(canvas.getWidth(), canvas.getHeight(), 280, 200, 1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let previewFactor = w / canvas.getWidth();\n        let tempCanvas = BB.canvas(w, h);\n        tempCanvas.style.display = 'block';\n        tempCanvas.getContext(\"2d\").drawImage(canvas.getCompleteCanvas(previewFactor), 0, 0, w, h);\n\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n        let deg = 0;\n        div.innerHTML = LANG('filter-rotate-description') + \"<br/><br/>\";\n\n        let first = true;\n\n        function update() {\n            (canvasWrapper.style as any).WebkitTransform = \"rotate(\" + deg + \"deg)\";\n            (canvasWrapper.style as any).MozTransform = \"rotate(\" + deg + \"deg)\";\n            (canvasWrapper.style as any).OTransform = \"rotate(\" + deg + \"deg)\";\n            (canvasWrapper.style as any).msTransform = \"rotate(\" + deg + \"deg)\";\n            if (Math.abs(deg % 180) === 90) {\n                //height has to fit width because of rotation\n                let fit = BB.fitInto(h, w, 280, 200, 1);\n                let scale = parseInt('' + fit.height) / w;\n                (canvasWrapper.style as any).WebkitTransform = \"rotate(\" + deg + \"deg) scale(\" + scale + \")\";\n                (canvasWrapper.style as any).MozTransform = \"rotate(\" + deg + \"deg) scale(\" + scale + \")\";\n                (canvasWrapper.style as any).OTransform = \"rotate(\" + deg + \"deg) scale(\" + scale + \")\";\n                (canvasWrapper.style as any).msTransform = \"rotate(\" + deg + \"deg) scale(\" + scale + \")\";\n            }\n        }\n\n        let btnPlus = document.createElement(\"button\");\n        btnPlus.innerHTML = \"<span style='font-size: 1.3em'>⟳</span> 90°\";\n        let btnMinus = document.createElement(\"button\");\n        btnMinus.innerHTML = \"<span style='font-size: 1.3em'>⟲</span> 90°\";\n        btnMinus.style.marginRight = '5px';\n\n\n        btnPlus.onclick = function () {\n            deg += 90;\n            update();\n        };\n        btnMinus.onclick = function () {\n            deg -= 90;\n            update();\n        };\n\n        div.appendChild(btnMinus);\n        div.appendChild(btnPlus);\n\n        let previewWrapper = document.createElement(\"div\");\n        BB.css(previewWrapper, {\n            width: \"340px\",\n            marginLeft: \"-20px\",\n            height: \"220px\",\n            display: \"table\",\n            backgroundColor: \"#9e9e9e\",\n            marginTop: \"10px\",\n            boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n            overflow: \"hidden\",\n            position: \"relative\",\n            userSelect: 'none',\n            colorScheme: 'only light',\n        });\n\n        let previewcell = document.createElement(\"div\");\n        previewcell.style.display = \"table-cell\";\n        previewcell.style.verticalAlign = \"middle\";\n        let canvasWrapper = BB.appendTextDiv(previewcell, \"\");\n        canvasWrapper.appendChild(tempCanvas);\n        previewWrapper.appendChild(previewcell);\n        canvasWrapper.style.width = w + \"px\";\n        canvasWrapper.style.height = h + \"px\";\n        canvasWrapper.style.marginLeft = \"auto\";\n        canvasWrapper.style.marginRight = \"auto\";\n        canvasWrapper.style.boxShadow = \"0 0 5px rgba(0,0,0,0.8)\";\n        canvasWrapper.style.overflow = \"hidden\";\n        BB.createCheckerDataUrl(4, function (url) {\n            canvasWrapper.style.background = \"url(\" + url + \")\";\n        });\n        canvasWrapper.style.transition = \"all 0.2s ease-out\";\n\n        div.appendChild(previewWrapper);\n        update();\n\n        result.getInput = function () {\n            return {\n                deg: deg\n            };\n        };\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let canvas = params.canvas;\n        let history = params.history;\n        let deg = params.input.deg;\n        if (!canvas || !history)\n            return false;\n        history.pause(true);\n        canvas.rotate(deg);\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"rotate\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {eventResMs} from './filters-consts';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const glTiltShift = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let canvas = params.canvas;\n        if (!context || !canvas) {\n            return false;\n        }\n\n        let layers = canvas.getLayers();\n        let selectedLayerIndex = canvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let displayW = parseInt('' + fit.width), displayH = parseInt('' + fit.height);\n        let w = Math.min(displayW, context.canvas.width);\n        let h = Math.min(displayH, context.canvas.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (w > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n        let previewFactor = w / context.canvas.width;\n        let displayPreviewFactor = displayW / context.canvas.width;\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n\n        let pointerListenerArr = [];\n\n        function finishInit() {\n            let blur = 20, gradient = 200;\n            div.innerHTML = LANG('filter-tilt-shift-description') + \"<br/><br/>\";\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n            let fa, fb; // focus line\n            function update() {\n                try {\n                    glCanvas.draw(texture).tiltShift(\n                        fa.x / displayPreviewFactor * previewFactor,\n                        fa.y / displayPreviewFactor * previewFactor,\n                        fb.x / displayPreviewFactor * previewFactor,\n                        fb.y / displayPreviewFactor * previewFactor,\n                        blur * previewFactor,\n                        gradient * previewFactor\n                    ).update();\n                    klCanvasPreview.render();\n                } catch(e) {\n                    (div as any).errorCallback(e);\n                }\n            }\n\n            function nob(x, y) {\n                let nobSize = 14;\n                let div = BB.el({\n                    css: {\n                        width: nobSize + \"px\",\n                        height: nobSize + \"px\",\n                        backgroundColor: '#fff',\n                        boxShadow: \"inset 0 0 0 2px #000\",\n                        borderRadius: nobSize + \"px\",\n                        position: \"absolute\",\n                        cursor: 'move',\n                        left: (x - nobSize / 2) + \"px\",\n                        top: (y - nobSize / 2) + \"px\",\n                        userSelect: 'none',\n                        touchAction: 'none',\n                    }\n                });\n                (div as any).x = x;\n                (div as any).y = y;\n                let pointerListener = new BB.PointerListener({\n                    target: div,\n                    maxPointers: 1,\n                    onPointer: function(event) {\n                        event.eventPreventDefault();\n                        if (event.button === 'left' && event.type === 'pointermove') {\n                            (div as any).x += event.dX;\n                            (div as any).y += event.dY;\n                            div.style.left = ((div as any).x - nobSize / 2) + \"px\";\n                            div.style.top = ((div as any).y - nobSize / 2) + \"px\";\n                            update();\n                        }\n                    }\n                });\n                pointerListenerArr.push(pointerListener);\n                return div;\n            }\n\n            fa = nob(parseInt('' + (displayW / 6)), parseInt('' + (displayH / 2)));\n            fb = nob(parseInt('' + (displayW - displayW / 6)), parseInt('' + (displayH - displayH / 3)));\n\n            let blurSlider = new KlSlider({\n                label: LANG('filter-tilt-shift-blur'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 200,\n                initValue: blur,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    blur = val;\n                    update();\n                }\n            });\n            blurSlider.getElement().style.marginBottom = \"10px\";\n            div.appendChild(blurSlider.getElement());\n            let gradientSlider = new KlSlider({\n                label: LANG('filter-tilt-shift-gradient'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 1000,\n                initValue: gradient,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    gradient = val;\n                    update();\n                }\n            });\n            div.appendChild(gradientSlider.getElement());\n\n\n            let previewWrapper = document.createElement(\"div\");\n            previewWrapper.oncontextmenu = function () {\n                return false;\n            };\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + displayW),\n                height: parseInt('' + displayH),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + displayW) + 'px',\n                    height: parseInt('' + displayH) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n            previewInnerWrapper.appendChild(fa);\n            previewInnerWrapper.appendChild(fb);\n\n\n            div.appendChild(previewWrapper);\n            update();\n            result.destroy = () => {\n                for (let i = 0; i < pointerListenerArr.length; i++) {\n                    pointerListenerArr[i].destroy();\n                }\n                blurSlider.destroy();\n                gradientSlider.destroy();\n                texture.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    a: {x: fa.x / displayPreviewFactor, y: fa.y / displayPreviewFactor},\n                    b: {x: fb.x / displayPreviewFactor, y: fb.y / displayPreviewFactor},\n                    blur: blur,\n                    gradient: gradient\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n\n\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let history = params.history;\n        let a = params.input.a;\n        let b = params.input.b;\n        let blur = params.input.blur;\n        let gradient = params.input.gradient;\n        if (!context || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).tiltShift(a.x, a.y, b.x, b.y, blur, gradient).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"glTiltShift\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {Checkbox} from '../ui/base-components/checkbox';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {FreeTransform, ITransform} from '../ui/components/free-transform';\nimport {Select} from '../ui/base-components/select';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\ninterface IFilterTransformInput {\n    bounds: {x: number, y: number, width: number, height: number};\n    transform: ITransform;\n    isPixelated: boolean;\n}\n\nexport const transform = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let i;\n        let context = params.context;\n        let canvas = params.canvas;\n        if (!context || !canvas) {\n            return false;\n        }\n\n        let isSmall = window.innerWidth < 550;\n        let layers = canvas.getLayers();\n        let selectedLayerIndex = canvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, isSmall ? 280 : 490, isSmall ? 200 : 240, 1);\n        let displayW = parseInt('' + fit.width), displayH = parseInt('' + fit.height);\n        let w = Math.min(displayW, context.canvas.width);\n        let h = Math.min(displayH, context.canvas.height);\n        let freeTransform: FreeTransform;\n        let displayPreviewFactor = displayW / context.canvas.width;\n\n        // determine bounds and initial transformation\n        let boundsObj: {\n            x: number;\n            y: number;\n            width: number;\n            height: number;\n        } = { x: 0, y: 0, width: 0, height: 0 };\n        {\n            let tempBounds: any = {\n                x1: null,\n                y1: null,\n                x2: null,\n                y2: null\n            };\n            let imdat = context.getImageData(0, 0, context.canvas.width, context.canvas.height);\n\n            if (imdat.data[3] > 0 && imdat.data[imdat.data.length - 1] > 0) {\n                tempBounds.x1 = 0;\n                tempBounds.y1 = 0;\n                tempBounds.x2 = context.canvas.width - 1;\n                tempBounds.y2 = context.canvas.height - 1;\n            } else {\n                for (i = 3; i < imdat.data.length; i += 4) {\n                    if (imdat.data[i] > 0 ) {\n                        let x = ((i - 3) / 4) %  context.canvas.width;\n                        let y = Math.floor((i - 3) / 4 / context.canvas.width);\n                        if (tempBounds.x1 > x || tempBounds.x1 === null) {\n                            tempBounds.x1 = x;\n                        }\n                        if (tempBounds.y1 === null) {\n                            tempBounds.y1 = y;\n                        }\n                        if (tempBounds.x2 < x || tempBounds.x2 === null) {\n                            tempBounds.x2 = x;\n                        }\n                        if (tempBounds.y2 < y || tempBounds.y2 === null) {\n                            tempBounds.y2 = y;\n                        }\n                    }\n                }\n            }\n            if (tempBounds.x1 === null || tempBounds.y1 === null) {\n                alert(LANG('filter-transform-empty'));\n                return false;\n            }\n            boundsObj.x = tempBounds.x1;\n            boundsObj.y = tempBounds.y1;\n            boundsObj.width = tempBounds.x2 - tempBounds.x1 + 1;\n            boundsObj.height = tempBounds.y2 - tempBounds.y1 + 1;\n        }\n\n        const initTransform = {\n            x: boundsObj.x + boundsObj.width / 2,\n            y: boundsObj.y + boundsObj.height / 2,\n            width: boundsObj.width,\n            height: boundsObj.height,\n            angleDeg: 0,\n        };\n\n\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n        if (!isSmall) {\n            result.width = 500;\n        }\n        div.innerHTML = LANG('filter-transform-description');\n\n        let keyListener = new BB.KeyListener({\n            onDown: function(keyStr) {\n                if (BB.isInputFocused(true)) {\n                    return;\n                }\n\n                if (keyStr === 'left') {\n                    inputX.value = '' + (parseFloat(inputX.value) - 1);\n                    onInputsChanged();\n                }\n                if (keyStr === 'right') {\n                    inputX.value = '' + (parseFloat(inputX.value) + 1);\n                    onInputsChanged();\n                }\n                if (keyStr === 'up') {\n                    inputY.value = '' + (parseFloat(inputY.value) - 1);\n                    onInputsChanged();\n                }\n                if (keyStr === 'down') {\n                    inputY.value = '' + (parseFloat(inputY.value) + 1);\n                    onInputsChanged();\n                }\n            }\n\n        });\n\n        let leftWrapper = document.createElement(\"div\");\n        let rightWrapper = document.createElement(\"div\");\n        let rotWrapper = document.createElement(\"div\");\n        let inputY = document.createElement(\"input\");\n        let inputX = document.createElement(\"input\");\n        let inputR = document.createElement(\"input\");\n        leftWrapper.style.width = \"100px\";\n        leftWrapper.style.height = \"30px\";\n        rightWrapper.style.width = \"100px\";\n        rightWrapper.style.height = \"30px\";\n        rightWrapper.style.display = \"inline-block\";\n        leftWrapper.style.display = \"inline-block\";\n        rotWrapper.style.display = \"inline-block\";\n        rotWrapper.style.width = \"150px\";\n        rotWrapper.style.height = \"30px\";\n        inputY.type = \"number\";\n        inputX.type = \"number\";\n        inputR.type = \"number\";\n        inputX.style.width = 70 + \"px\";\n        inputY.style.width = 70 + \"px\";\n        inputR.style.width = 70 + \"px\";\n        inputY.value = '0';\n        inputX.value = '0';\n        inputR.value = '0';\n        inputY.onclick = function () {\n            (this as any).focus();\n            onInputsChanged();\n        };\n        inputX.onclick = function () {\n            (this as any).focus();\n            onInputsChanged();\n        };\n        inputR.onclick = function () {\n            (this as any).focus();\n            onInputsChanged();\n        };\n        inputY.onchange = function () {\n            onInputsChanged();\n        };\n        inputX.onchange = function () {\n            onInputsChanged();\n        };\n        inputR.onchange = function () {\n            onInputsChanged();\n        };\n        inputY.onkeyup = function () {\n            onInputsChanged();\n        };\n        inputX.onkeyup = function () {\n            onInputsChanged();\n        };\n        inputR.onkeyup = function () {\n            onInputsChanged();\n        };\n        leftWrapper.append(\"X: \", inputX);\n        rightWrapper.append(\"Y: \", inputY);\n        rotWrapper.append(LANG('filter-transform-rotation') + ': ', inputR);\n        if (!isSmall) {\n            const inputRow = BB.el({\n                parent: div,\n                css: {\n                    marginTop: '10px',\n                }\n            });\n            inputRow.append(leftWrapper, rightWrapper, rotWrapper);\n        }\n\n        // buttons\n        const actionBtnCss = {\n            marginLeft: '10px',\n            marginTop: '10px',\n        };\n        const buttonRow = BB.el ({\n            parent: div,\n            css: {\n                display: 'flex',\n                flexWrap: 'wrap',\n                marginLeft: '-10px',\n            }\n        });\n        const flipXBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: LANG('filter-transform-flip') + ' X',\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                freeTransform.setSize(-t.width, t.height);\n            },\n            css: actionBtnCss,\n        });\n        const flipYBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: LANG('filter-transform-flip') + ' Y',\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                freeTransform.setSize(t.width, -t.height);\n            },\n            css: actionBtnCss,\n        });\n        const scaleRotLeftBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: '-90°',\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                t.angleDeg -= 90;\n                t.angleDeg %= 360;\n                freeTransform.setAngleDeg(t.angleDeg);\n                inputR.value = '' + Math.round(t.angleDeg);\n                updatePreview();\n            },\n            css: actionBtnCss,\n        });\n        const scaleRotRightBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: '+90°',\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                t.angleDeg += 90;\n                t.angleDeg %= 360;\n                freeTransform.setAngleDeg(t.angleDeg);\n                inputR.value = '' + Math.round(t.angleDeg);\n                updatePreview();\n            },\n            css: actionBtnCss,\n        });\n        const scaleDoubleBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: '2x',\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                if (constrainCheckbox.getValue()) {\n                    freeTransform.setSize(freeTransform.getRatio() * t.height * 2, t.height * 2);\n                } else {\n                    freeTransform.setSize(t.width * 2, t.height * 2);\n                }\n            },\n            css: actionBtnCss,\n        });\n        const scaleHalfBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: '1/2x',\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                freeTransform.setSize(Math.round(t.width / 2), Math.round(t.height / 2));\n            },\n            css: actionBtnCss,\n        });\n        const centerBtn = BB.el ({\n            parent: buttonRow,\n            tagName: 'button',\n            content: LANG('center'),\n            onClick: () => {\n                const t = freeTransform.getTransform();\n                freeTransform.setPos({ x: context.canvas.width / 2, y: context.canvas.height / 2 });\n                freeTransform.setAngleDeg(t.angleDeg);\n                updatePreview();\n            },\n            css: actionBtnCss,\n        });\n\n\n\n\n\n        let isConstrained = true;\n        let constrainCheckbox = new Checkbox({\n            init: true,\n            label: LANG('filter-transform-constrain'),\n            title: LANG('constrain-proportions'),\n            allowTab: true,\n            callback: function(b) {\n                isConstrained = b;\n                freeTransform.setConstrained(isConstrained);\n            },\n            css: {\n                display: 'inline-block'\n            }\n        });\n        let isSnapping = false;\n        let snappingCheckbox = new Checkbox({\n            init: true,\n            label: LANG('filter-transform-snap'),\n            title: LANG('filter-transform-snap-title'),\n            allowTab: true,\n            callback: function(b) {\n                isSnapping = b;\n                freeTransform.setSnapping(isSnapping);\n            },\n            css: {\n                display: 'inline-block',\n                marginLeft: '10px',\n            }\n        });\n        const checkboxWrapper = BB.el({});\n        checkboxWrapper.append(constrainCheckbox.getElement(), snappingCheckbox.getElement());\n\n        div.appendChild(BB.el({\n            css: {\n                clear: 'both',\n                height: '10px'\n            }\n        }));\n\n        const bottomRow = BB.el({\n            parent: div,\n            css: {\n                display: 'flex',\n                justifyContent: 'space-between',\n            }\n        });\n\n        let algorithmSelect = new Select({\n            isFocusable: true,\n            optionArr: [\n                ['smooth', LANG('algorithm-smooth')],\n                ['pixelated', LANG('algorithm-pixelated')]\n            ],\n            initValue: 'smooth',\n            title: LANG('scaling-algorithm'),\n            onChange: function() {\n                updatePreview(true);\n            },\n        });\n        bottomRow.append(checkboxWrapper, algorithmSelect.getElement());\n\n\n        let previewWrapper = document.createElement(\"div\");\n        previewWrapper.oncontextmenu = function () {\n            return false;\n        };\n        BB.css(previewWrapper, {\n            width: isSmall ? '340px' : '540px',\n            marginLeft: \"-20px\",\n            height: isSmall ? '260px' : '300px',\n            backgroundColor: \"#9e9e9e\",\n            marginTop: \"10px\",\n            boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n            overflow: \"hidden\",\n            position: \"relative\",\n            userSelect: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            colorScheme: 'only light',\n        });\n\n        let previewLayerArr: IKlBasicLayer[] = [];\n        {\n            for (let i = 0; i < layers.length; i++) {\n                let canvas;\n                if (i === selectedLayerIndex) {\n                    canvas = BB.canvas(parseInt('' + w), parseInt('' + h));\n                    let ctx = canvas.getContext('2d');\n                    ctx.drawImage(layers[i].context.canvas, 0, 0, canvas.width, canvas.height);\n                } else {\n                    canvas = layers[i].context.canvas;\n                }\n                previewLayerArr.push({\n                    image: canvas,\n                    opacity: layers[i].opacity,\n                    mixModeStr: layers[i].mixModeStr\n                });\n            }\n        }\n        let klCanvasPreview = new KlCanvasPreview({\n            width: parseInt('' + displayW),\n            height: parseInt('' + displayH),\n            layers: previewLayerArr\n        });\n\n        let previewInnerWrapper = BB.el({\n            css: {\n                position: 'relative',\n                boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                width: parseInt('' + displayW) + 'px',\n                height: parseInt('' + displayH) + 'px'\n            }\n        });\n        previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n        previewWrapper.appendChild(previewInnerWrapper);\n\n        let lastDrawnTransformStr;\n        function updatePreview(doForce: boolean = false) {\n            if (!freeTransform) {\n                return;\n            }\n            let transform = freeTransform.getTransform();\n            if (JSON.stringify(transform) === lastDrawnTransformStr && !doForce) {\n                return;\n            }\n            lastDrawnTransformStr = JSON.stringify(transform);\n            if (displayPreviewFactor < 1) {\n                transform.x *= displayPreviewFactor;\n                transform.y *= displayPreviewFactor;\n                transform.width *= displayPreviewFactor;\n                transform.height *= displayPreviewFactor;\n            }\n            let transformLayerCanvas = previewLayerArr[selectedLayerIndex].image as HTMLCanvasElement;\n            let ctx = transformLayerCanvas.getContext('2d');\n            ctx.save();\n            ctx.clearRect(0, 0, transformLayerCanvas.width, transformLayerCanvas.height);\n            BB.drawTransformedImageWithBounds(\n                ctx,\n                layers[selectedLayerIndex].context.canvas,\n                transform,\n                boundsObj,\n                algorithmSelect.getValue() === 'pixelated' ||\n                BB.testShouldPixelate(transform, transform.width / initTransform.width, transform.height / initTransform.height),\n            );\n            ctx.restore();\n            klCanvasPreview.render();\n        }\n\n        freeTransform = new FreeTransform({\n            x: initTransform.x,\n            y: initTransform.y,\n            width: initTransform.width,\n            height: initTransform.height,\n            angleDeg: initTransform.angleDeg,\n            isConstrained: true,\n            snapX: [0, context.canvas.width],\n            snapY: [0, context.canvas.height],\n            callback: function (t) {\n                inputX.value = '' + Math.round(t.x - initTransform.x);\n                inputY.value = '' + Math.round(t.y - initTransform.y);\n                inputR.value = '' + Math.round(t.angleDeg);\n                updatePreview();\n            },\n            scale: displayPreviewFactor\n        });\n        BB.css(freeTransform.getElement(), {\n            position: 'absolute',\n            left: '0',\n            top: '0'\n        });\n        previewInnerWrapper.appendChild(freeTransform.getElement());\n\n        function onInputsChanged() {\n            freeTransform.setPos({\n                x: parseInt(inputX.value) + initTransform.x,\n                y: parseInt(inputY.value) + initTransform.y}\n            );\n            freeTransform.setAngleDeg(parseInt(inputR.value));\n            updatePreview();\n        }\n\n        updatePreview();\n\n        div.appendChild(previewWrapper);\n        result.destroy = () => {\n            keyListener.destroy();\n            freeTransform.destroy();\n            constrainCheckbox.destroy();\n            snappingCheckbox.destroy();\n        };\n        result.getInput = function () {\n            const transform = freeTransform.getTransform();\n            let input = {\n                transform,\n                bounds: boundsObj,\n                isPixelated: algorithmSelect.getValue() === 'pixelated' ||\n                    BB.testShouldPixelate(transform, transform.width / initTransform.width, transform.height / initTransform.height),\n            } as IFilterTransformInput;\n            result.destroy();\n            return JSON.parse(JSON.stringify(input));\n        };\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        const context = params.context;\n        const history = params.history;\n        if (!context || !history) {\n            return false;\n        }\n        history.pause(true);\n\n        const input: IFilterTransformInput = params.input;\n\n        let copyCanvas = BB.copyCanvas(context.canvas);\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        BB.drawTransformedImageWithBounds(\n            context,\n            copyCanvas,\n            input.transform,\n            input.bounds,\n            input.isPixelated,\n        );\n\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"transform\"],\n            action: \"apply\",\n            params: [{input}],\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {eventResMs} from './filters-consts';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const glBlur = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let canvas = params.canvas;\n        let context = params.context;\n        if (!canvas || !context) {\n            return false;\n        }\n\n        let layers = canvas.getLayers();\n        let selectedLayerIndex = canvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let displayW = parseInt('' + fit.width), displayH = parseInt('' + fit.height);\n        let w = Math.min(displayW, context.canvas.width);\n        let h = Math.min(displayH, context.canvas.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (w > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n        let previewFactor = w / context.canvas.width;\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n\n\n        function finishInit() {\n            let radius = 10;\n            div.innerHTML = LANG('filter-triangle-blur-description') + \"<br/><br/>\";\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n\n            let radiusSlider = new KlSlider({\n                label: LANG('radius'),\n                width: 300,\n                height: 30,\n                min: 1,\n                max: 200,\n                initValue: radius,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    radius = val;\n                    glCanvas.draw(texture).triangleBlur(radius * previewFactor).update();\n                    klCanvasPreview.render();\n                }\n            });\n            div.appendChild(radiusSlider.getElement());\n\n\n            let previewWrapper = document.createElement(\"div\");\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + displayW),\n                height: parseInt('' + displayH),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + displayW) + 'px',\n                    height: parseInt('' + displayH) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n            div.appendChild(previewWrapper);\n\n            try {\n                glCanvas.draw(texture).triangleBlur(radius * previewFactor).update();\n                klCanvasPreview.render();\n            } catch(e) {\n                (div as any).errorCallback(e);\n            }\n\n            result.destroy = () => {\n                texture.destroy();\n                radiusSlider.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    radius: radius\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n\n        return result;\n    },\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let history = params.history;\n        let radius = params.input.radius;\n        if (!context || !radius || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).triangleBlur(radius).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"glBlur\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {eventResMs} from './filters-consts';\nimport {KlSlider} from '../ui/base-components/kl-slider';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const glUnsharpMask = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let canvas = params.canvas;\n        if (!context || !canvas) {\n            return false;\n        }\n\n        let layers = canvas.getLayers();\n        let selectedLayerIndex = canvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let displayW = parseInt('' + fit.width), displayH = parseInt('' + fit.height);\n        let w = Math.min(displayW, context.canvas.width);\n        let h = Math.min(displayH, context.canvas.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (w > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n        let previewFactor = w / context.canvas.width;\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n\n        function finishInit() {\n            let radius = 2, strength = 5.1 / 10;\n            div.innerHTML = LANG('filter-unsharp-mask-description') + \"<br/><br/>\";\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n\n            let radiusSlider = new KlSlider({\n                label: LANG('radius'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 200,\n                initValue: 2,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    radius = val;\n                    glCanvas.draw(texture).unsharpMask(radius * previewFactor, strength).update();\n                    klCanvasPreview.render();\n                },\n                curve: [[0, 0], [0.1, 2], [0.5, 50], [1, 200]]\n            });\n            let strengthSlider = new KlSlider({\n                label: LANG('filter-unsharp-mask-strength'),\n                width: 300,\n                height: 30,\n                min: 0,\n                max: 50,\n                initValue: 5.1,\n                eventResMs: eventResMs,\n                onChange: function (val) {\n                    strength = val / 10;\n                    glCanvas.draw(texture).unsharpMask(radius * previewFactor, strength).update();\n                    klCanvasPreview.render();\n                },\n                curve: [[0, 0], [0.1, 2], [0.5, 10], [1, 50]]\n            });\n            radiusSlider.getElement().style.marginBottom = \"10px\";\n            div.appendChild(radiusSlider.getElement());\n            div.appendChild(strengthSlider.getElement());\n\n\n            let previewWrapper = document.createElement(\"div\");\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + displayW),\n                height: parseInt('' + displayH),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + displayW) + 'px',\n                    height: parseInt('' + displayH) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n\n            div.appendChild(previewWrapper);\n\n            try {\n                glCanvas.draw(texture).unsharpMask(radius * previewFactor, strength).update();\n                klCanvasPreview.render();\n            } catch(e) {\n                (div as any).errorCallback(e);\n            }\n\n            result.destroy = () => {\n                radiusSlider.destroy();\n                strengthSlider.destroy();\n                texture.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    radius: radius,\n                    strength: strength\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n\n        return result;\n    },\n\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let history = params.history;\n        let radius = params.input.radius;\n        let strength = params.input.strength;\n        if (!context || radius === null || strength === null || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).unsharpMask(radius, strength).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"glUnsharpMask\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {BB} from '../../bb/bb';\nimport {Options} from '../ui/base-components/options';\nimport {ColorOptions} from '../ui/base-components/color-options';\nimport {KlCanvasPreview} from '../canvas-ui/canvas-preview';\nimport {getSharedFx} from './shared-gl-fx';\nimport {IFilterApply, IFilterGetDialogParam, IKlBasicLayer} from '../kl.types';\nimport {LANG} from '../../language/language';\n\nexport const toAlpha = {\n\n    getDialog(params: IFilterGetDialogParam) {\n        let context = params.context;\n        let canvas = params.canvas;\n        if (!context || !canvas) {\n            return false;\n        }\n\n        let layers = canvas.getLayers();\n        let selectedLayerIndex = canvas.getLayerIndex(context.canvas);\n\n        let fit = BB.fitInto(context.canvas.width, context.canvas.height, 280, 200, 1);\n        let w = parseInt('' + fit.width), h = parseInt('' + fit.height);\n\n        let tempCanvas = BB.canvas(w, h);\n        {\n            const ctx = tempCanvas.getContext(\"2d\");\n            ctx.save();\n            if (tempCanvas.width > context.canvas.width) {\n                ctx.imageSmoothingEnabled = false;\n            }\n            ctx.drawImage(context.canvas, 0, 0, w, h);\n            ctx.restore();\n        }\n\n        let div = document.createElement(\"div\");\n        let result: any = {\n            element: div\n        };\n\n        function finishInit() {\n            let radius = 2, strength = 5.1 / 10;\n            div.appendChild(BB.el({\n                content: LANG('filter-to-alpha-description'),\n                css: {\n                    marginBottom: '5px'\n                }\n            }));\n\n            let glCanvas = getSharedFx();\n            if (!glCanvas) {\n                return; // todo throw?\n            }\n            let texture = glCanvas.texture(tempCanvas);\n            glCanvas.draw(texture).update(); // update glCanvas size\n\n            function updatePreview() {\n                glCanvas.draw(texture).toAlpha(sourceId === 'inverted-luminance', selectedRgbaObj).update();\n                klCanvasPreview.render();\n            }\n\n            // source\n            let sourceId = 'inverted-luminance';\n            let sourceOptions = new Options({\n                optionArr: [\n                    {\n                        id: 'inverted-luminance',\n                        label: LANG('filter-to-alpha-inverted-lum')\n                    },\n                    {\n                        id: 'luminance',\n                        label: LANG('filter-to-alpha-lum')\n                    }\n                ],\n                initialId: sourceId,\n                onChange: function(id) {\n                    sourceId = id;\n                    updatePreview();\n                }\n            });\n            div.appendChild(sourceOptions.getElement());\n\n            // color\n            let selectedRgbaObj = {r: 0, g: 0, b: 0, a: 1};\n            let colorOptionsArr = [\n                null,\n                {r: 0, g: 0, b: 0, a: 1},\n                {r: 255, g: 255, b: 255, a: 1}\n            ];\n            colorOptionsArr.push({\n                r: params.currentColorRgb.r,\n                g: params.currentColorRgb.g,\n                b: params.currentColorRgb.b,\n                a: 1,\n            });\n            colorOptionsArr.push({\n                r: params.secondaryColorRgb.r,\n                g: params.secondaryColorRgb.g,\n                b: params.secondaryColorRgb.b,\n                a: 1,\n            });\n\n            let colorOptions = new ColorOptions({\n                label: LANG('filter-to-alpha-replace'),\n                colorArr: colorOptionsArr,\n                initialIndex: 1,\n                onChange: function(rgbaObj) {\n                    selectedRgbaObj = rgbaObj;\n                    updatePreview();\n                }\n            });\n            colorOptions.getElement().style.marginTop = '10px';\n            div.appendChild(colorOptions.getElement());\n\n\n            let previewWrapper = document.createElement(\"div\");\n            BB.css(previewWrapper, {\n                width: \"340px\",\n                marginLeft: \"-20px\",\n                height: \"220px\",\n                backgroundColor: \"#9e9e9e\",\n                marginTop: \"10px\",\n                boxShadow: \"rgba(0, 0, 0, 0.2) 0px 1px inset, rgba(0, 0, 0, 0.2) 0px -1px inset\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                userSelect: 'none',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                colorScheme: 'only light',\n            });\n\n            let previewLayerArr: IKlBasicLayer[] = [];\n            {\n                for (let i = 0; i < layers.length; i++) {\n                    previewLayerArr.push({\n                        image: i === selectedLayerIndex ? glCanvas : layers[i].context.canvas,\n                        opacity: layers[i].opacity,\n                        mixModeStr: layers[i].mixModeStr\n                    });\n                }\n            }\n            let klCanvasPreview = new KlCanvasPreview({\n                width: parseInt('' + w),\n                height: parseInt('' + h),\n                layers: previewLayerArr\n            });\n\n            let previewInnerWrapper = BB.el({\n                css: {\n                    position: 'relative',\n                    boxShadow: '0 0 5px rgba(0,0,0,0.5)',\n                    width: parseInt('' + w) + 'px',\n                    height: parseInt('' + h) + 'px'\n                }\n            });\n            previewInnerWrapper.appendChild(klCanvasPreview.getElement());\n            previewWrapper.appendChild(previewInnerWrapper);\n\n\n            div.appendChild(previewWrapper);\n\n            setTimeout(function() { //ie has a problem otherwise...\n                try {\n                    updatePreview();\n                } catch(e) {\n                    (div as any).errorCallback(e);\n                }\n            }, 1);\n\n            result.destroy = () => {\n                texture.destroy();\n                sourceOptions.destroy();\n            };\n            result.getInput = function () {\n                result.destroy();\n                return {\n                    sourceId: sourceId,\n                    selectedRgbaObj: selectedRgbaObj\n                };\n            };\n        }\n\n        setTimeout(finishInit, 1);\n\n        return result;\n    },\n\n\n    apply(params: IFilterApply) {\n        let context = params.context;\n        let history = params.history;\n        let sourceId = params.input.sourceId;\n        let selectedRgbaObj = params.input.selectedRgbaObj;\n        if (!context || !sourceId || !history)\n            return false;\n        history.pause(true);\n        let glCanvas = getSharedFx();\n        if (!glCanvas) {\n            return false; // todo more specific error?\n        }\n        let texture = glCanvas.texture(context.canvas);\n        glCanvas.draw(texture).toAlpha(sourceId === 'inverted-luminance', selectedRgbaObj).update();\n        context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        context.drawImage(glCanvas, 0, 0);\n        texture.destroy();\n        history.pause(false);\n        history.push({\n            tool: [\"filter\", \"toAlpha\"],\n            action: \"apply\",\n            params: [{\n                input: params.input\n            }]\n        });\n        return true;\n    }\n\n};","import {filterLib, filterLibStatus} from './filters';\nimport {glBrightnessContrast} from './gl-brightness-contrast';\nimport {cropExtend} from './crop-extend';\nimport {glCurves} from './gl-curves';\nimport {flip} from './flip';\nimport {glHueSaturation} from './gl-hue-saturation';\nimport {invert} from './invert';\nimport {glPerspective} from './gl-perspective';\nimport {resize} from './resize';\nimport {rotate} from './rotate';\nimport {glTiltShift} from './gl-tilt-shift';\nimport {transform} from './transform';\nimport {glBlur} from './gl-blur';\nimport {glUnsharpMask} from './gl-unsharp-mask';\nimport {toAlpha} from './to-alpha';\n\nlet embed: boolean;\nfunction importFilter(libObj, moduleObj): void {\n    if (moduleObj.getDialog) {\n        libObj.getDialog = moduleObj.getDialog;\n    }\n    libObj.apply = moduleObj.apply;\n}\n\n\nexport function importFilters(isEmbed?: boolean) {\n    if (filterLibStatus.isLoaded) {\n        return;\n    }\n    embed = isEmbed\n\n    importFilter(filterLib.glBrightnessContrast, glBrightnessContrast);\n    importFilter(filterLib.cropExtend, cropExtend);\n    importFilter(filterLib.glCurves, glCurves);\n    importFilter(filterLib.flip, flip);\n    importFilter(filterLib.glHueSaturation, glHueSaturation);\n    importFilter(filterLib.invert, invert);\n    importFilter(filterLib.glPerspective, glPerspective);\n    importFilter(filterLib.resize, resize);\n    importFilter(filterLib.rotate, rotate);\n    importFilter(filterLib.glTiltShift, glTiltShift);\n    importFilter(filterLib.transform, transform);\n    importFilter(filterLib.glBlur, glBlur);\n    importFilter(filterLib.glUnsharpMask, glUnsharpMask);\n    importFilter(filterLib.toAlpha, toAlpha);\n\n    filterLibStatus.isLoaded = true;\n}","import {KL} from '../kl';\nimport {KlCanvas} from '../canvas/kl-canvas';\n\nexport async function klCanvasToPsdBlob(klCanvas: KlCanvas): Promise<Blob> {\n    let layerArr = klCanvas.getLayersFast();\n\n    let psdConfig = {\n        width: klCanvas.getWidth(),\n        height: klCanvas.getHeight(),\n        //canvas: klCanvas.getCompleteCanvas(1), // preview, can be skipped\n        children: []\n    };\n    for (let i = 0; i < layerArr.length; i++) {\n        // todo - can be optimized if layer mostly empty\n        let item = layerArr[i];\n        psdConfig.children.push({\n            name: item.name,\n            opacity: item.opacity,\n            canvas: item.canvas,\n            blendMode: KL.PSD.blendKlToPsd(item.mixModeStr),\n            left: 0,\n            top: 0\n        });\n    }\n\n    let agPsd = await import('ag-psd');\n    let buffer = agPsd.writePsdBuffer(psdConfig);\n    return new Blob([buffer], { type: 'application/octet-stream' });\n}","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"k9Nks\");","import {KL} from '../klecks/kl';\nimport {klHistory} from '../klecks/history/kl-history';\nimport {BB} from '../bb/bb';\nimport {showIframePopup} from '../klecks/ui/modals/show-iframe-popup';\n// @ts-ignore\nimport newImageImg from 'url:~/src/app/img/ui/new-image.svg';\n// @ts-ignore\nimport exportImg from 'url:~/src/app/img/ui/export.svg';\n// @ts-ignore\nimport shareImg from 'url:~/src/app/img/ui/share.svg';\n// @ts-ignore\nimport uploadImg from 'url:~/src/app/img/ui/upload.svg';\n// @ts-ignore\nimport importImg from 'url:~/src/app/img/ui/import.svg';\nimport {exportType} from '../klecks/ui/tool-tabs/file-tab';\nimport {ToolspaceTopRow} from \"../embed/toolspace-top-row\";\nimport {IInitState, IKlProject, IKlPsd} from '../klecks/kl.types';\nimport {importFilters} from '../klecks/filters/filters-lazy';\nimport {base64ToBlob} from '../klecks/storage/base-64-to-blob';\nimport {klCanvasToPsdBlob} from '../klecks/storage/kl-canvas-to-psd-blob';\nimport {ProjectStore} from '../klecks/storage/project-store';\nimport {SaveReminder} from \"../klecks/ui/components/save-reminder\";\nimport {KlCanvasWorkspace} from '../klecks/canvas-ui/kl-canvas-workspace';\nimport {KlCanvas} from '../klecks/canvas/kl-canvas';\nimport {LANG} from '../language/language';\n// @ts-ignore\nimport toolPaintImg from 'url:~/src/app/img/ui/tool-paint.svg';\n// @ts-ignore\nimport toolHandImg from 'url:~/src/app/img/ui/tool-hand.svg';\n// @ts-ignore\nimport toolFillImg from 'url:~/src/app/img/ui/tool-fill.svg';\n// @ts-ignore\nimport toolTextImg from 'url:~/src/app/img/ui/tool-text.svg';\n// @ts-ignore\nimport toolShapeImg from 'url:~/src/app/img/ui/tool-shape.svg';\n// @ts-ignore\nimport tabSettingsImg from 'url:~/src/app/img/ui/tab-settings.svg';\n// @ts-ignore\nimport tabLayersImg from 'url:~/src/app/img/ui/tab-layers.svg';\nimport {LocalStorage} from '../bb/base/local-storage';\n\n\ninterface IKlAppOptions {\n    saveReminder?: SaveReminder;\n    projectStore?: ProjectStore;\n    logoImg?: any; // app logo\n    bottomBar?: HTMLElement; // row at bottom of toolspace\n    embed?: {\n        url: string;\n        onSubmit: (onSuccess: () => void, onError: () => void) => void;\n    };\n    app?: {\n        filenameBase?: string; // part of filename when downloading drawing\n        imgurKey?: string; // for imgur uploads\n    };\n    aboutEl?: HTMLElement; // replaces info about Klecks in settings tab\n}\n\nimportFilters();\n\nexport function KlApp(pProject: IKlProject | null, pOptions: IKlAppOptions) {\n    // default 2048, unless your screen is bigger than that (that computer then probably has the horsepower for that)\n    // but not larger than 4096 - a fairly arbitrary decision\n    let klMaxCanvasSize = Math.min(4096, Math.max(2048, Math.max(window.screen.width, window.screen.height)));\n    let collapseThreshold = 820;\n    let uiState: 'left' | 'right' = (pOptions.embed ? 'left' : (LocalStorage.getItem('uiState') ? LocalStorage.getItem('uiState') : 'right')) as any;\n    const filenameBase = (pOptions.app && pOptions.app.filenameBase) ? pOptions.app.filenameBase : 'Klecks';\n    const projectStore = pOptions.projectStore;\n    let klRootEl = document.createElement(\"div\");\n    klRootEl.className = 'g-root kl-initialized';\n    let uiWidth: number = Math.max(0, window.innerWidth);\n    let uiHeight: number = Math.max(0, window.innerHeight);\n    const toolWidth = 271;\n    let exportType: exportType = 'png';\n    let klCanvas: KlCanvas = new KL.KlCanvas(\n        pProject ? {\n            projectObj: pProject\n        } : {\n            width: Math.min(klMaxCanvasSize, window.innerWidth < collapseThreshold ? uiWidth : uiWidth - toolWidth),\n            height: Math.min(klMaxCanvasSize, uiHeight)\n        }, pOptions.embed ? -1 : 0);\n    klCanvas.setHistory(klHistory);\n    let initState: IInitState = null;\n    let mainTabRow;\n\n    if (!pOptions.saveReminder) {\n        pOptions.saveReminder = {init: () => {}, reset: () => {}} as SaveReminder;\n    }\n\n    function translateSmoothing(s: number): number {\n        if (s == 1) {\n            return 1 - 0.5;\n        }\n        if (s == 2) {\n            return 1 - 0.16;\n        }\n        if (s == 3) {\n            return 1 - 0.035;\n        }\n        if (s == 4) {\n            return 1 - 0.0175;\n        }\n        if (s == 5) {\n            return 1 - 0.00875;\n        }\n        return s;\n    }\n\n    let isFirstImage = true;\n\n    if (pProject) {\n        pProject = null;\n    } else {\n        klHistory.pause(true);\n        klCanvas.addLayer();\n        klCanvas.layerFill(0, { r: 255, g: 255, b: 255});\n        klHistory.pause(false);\n    }\n    initState = {\n        canvas: new KL.KlCanvas({copy: klCanvas}, pOptions.embed ? -1 : 0),\n        focus: klCanvas.getLayerCount() - 1,\n        brushes: {},\n    };\n    for (let b in KL.brushes) {\n        if (KL.brushes.hasOwnProperty(b)) {\n            initState.brushes[b] = new KL.brushes[b]();\n            if (initState.canvas) {\n                initState.brushes[b].setContext(initState.canvas.getLayerContext(initState.focus));\n            }\n        }\n    }\n\n\n    let currentColor = new BB.RGB(0, 0, 0);\n    let currentBrush, currentBrushId;\n    let lastNonEraserBrushId = 0;\n    let currentLayerCtx = klCanvas.getLayerContext(klCanvas.getLayerCount() - 1);\n\n    function sizeWatcher(val) {\n        brushSettingService.emitSize(val);\n        if (klCanvasWorkspace) {\n            klCanvasWorkspace.setCursorSize(val * 2);\n        }\n    }\n\n    const brushSettingService = new KL.BrushSettingService(\n        (color) => {\n            klColorSlider.setColor(color);\n            currentBrush.setColor(color);\n            currentColor = BB.copyObj(color);\n        },\n        (size) => {\n            currentBrush.setSize(size);\n            klCanvasWorkspace.setCursorSize(size * 2);\n        },\n        (opacity) => {\n            currentBrush.setOpacity(opacity);\n        },\n        () => klColorSlider.getColor(),\n        () => brushUiObj[currentBrushId].getSize(),\n        () => brushUiObj[currentBrushId].getOpacity(),\n        () => {\n            return {\n                sizeSlider: KL.brushesUI[currentBrushId].sizeSlider,\n                opacitySlider: KL.brushesUI[currentBrushId].opacitySlider,\n            };\n        }\n    );\n\n    let lineSmoothing = new BB.EventChain.LineSmoothing({\n        smoothing: translateSmoothing(1),\n    });\n    let lineSanitizer = new BB.EventChain.LineSanitizer();\n\n    let drawEventChain = new BB.EventChain.EventChain({\n        chainArr: [\n            lineSanitizer,\n            lineSmoothing\n        ],\n    });\n\n    drawEventChain.setChainOut(function(event) {\n        if (event.type === 'down') {\n            toolspace.style.pointerEvents = 'none';\n            currentBrush.startLine(event.x, event.y, event.pressure);\n            klCanvasWorkspace.requestFrame();\n        }\n        if (event.type === 'move') {\n            currentBrush.goLine(event.x, event.y, event.pressure, false, event.isCoalesced)\n            klCanvasWorkspace.setLastDrawEvent(event.x, event.y, event.pressure);\n            klCanvasWorkspace.requestFrame();\n        }\n        if (event.type === 'up') {\n            toolspace.style.pointerEvents = '';\n            currentBrush.endLine();\n            klCanvasWorkspace.requestFrame();\n        }\n        if (event.type === 'line') {\n            currentBrush.getBrush().drawLineSegment(event.x0, event.y0, event.x1, event.y1);\n            klCanvasWorkspace.requestFrame();\n        }\n    });\n\n    let textToolSettings = {\n        size: 20,\n        align: 'left' as ('left' | 'center' | 'right'),\n        isBold: false,\n        isItalic: false,\n        font: 'sans-serif' as ('serif' | 'monospace' | 'sans-serif' | 'cursive' | 'fantasy'),\n        opacity: 1\n    };\n\n    const klCanvasWorkspace: KlCanvasWorkspace = new KL.KlCanvasWorkspace({\n        klCanvas: klCanvas,\n        width: Math.max(0, uiWidth - toolWidth),\n        height: uiHeight,\n        onDraw: drawEventChain.chainIn,\n        onPick: function(rgbObj, isDragDone) {\n            brushSettingService.setColor(rgbObj);\n            if (isDragDone) {\n                klColorSlider.pickingDone();\n                klCanvasWorkspace.setMode(toolspaceToolRow.getActive());\n            }\n        },\n        onFill: function(canvasX, canvasY) {\n            let layerIndex = klCanvas.getLayerIndex(currentLayerCtx.canvas);\n            klCanvas.floodFill(layerIndex, canvasX, canvasY, klColorSlider.getColor(), fillUi.getOpacity(), fillUi.getTolerance(), fillUi.getSample(), fillUi.getGrow(), fillUi.getContiguous());\n            klCanvasWorkspace.requestFrame();\n        },\n        onText: function(canvasX, canvasY, angleRad) {\n            if (KL.dialogCounter.get() > 0) {\n                return;\n            }\n\n            KL.textToolDialog({\n                klCanvas: klCanvas,\n                layerIndex: klCanvas.getLayerIndex(currentLayerCtx.canvas),\n                x: canvasX,\n                y: canvasY,\n                angleRad: angleRad,\n                color: klColorSlider.getColor(),\n                secondaryColor: klColorSlider.getSecondaryRGB(),\n                size: textToolSettings.size,\n                align: textToolSettings.align,\n                isBold: textToolSettings.isBold,\n                isItalic: textToolSettings.isItalic,\n                font: textToolSettings.font,\n                opacity: textToolSettings.opacity,\n                onConfirm: function(val) {\n\n                    let colorRGBA = val.color;\n                    colorRGBA.a = val.opacity;\n\n                    textToolSettings.size = val.size;\n                    textToolSettings.align = val.align;\n                    textToolSettings.isBold = val.isBold;\n                    textToolSettings.isItalic = val.isItalic;\n                    textToolSettings.font = val.font;\n                    textToolSettings.opacity = val.opacity;\n\n                    let layerIndex = klCanvas.getLayerIndex(currentLayerCtx.canvas);\n                    klCanvas.text(layerIndex, {\n                        textStr: val.textStr,\n                        x: val.x,\n                        y: val.y,\n                        size: val.size,\n                        font: val.font,\n                        align: val.align,\n                        isBold: val.isBold,\n                        isItalic: val.isItalic,\n                        angleRad: angleRad,\n                        color: BB.ColorConverter.toRgbaStr(colorRGBA)\n                    });\n                    klCanvasWorkspace.requestFrame();\n                }\n            });\n\n        },\n        onShape: function(typeStr, canvasX, canvasY, angleRad) {\n            if (typeStr === 'down') {\n                shapeTool.onDown(canvasX, canvasY, angleRad);\n            }\n            if (typeStr === 'move') {\n                shapeTool.onMove(canvasX, canvasY);\n            }\n            if (typeStr === 'up') {\n                shapeTool.onUp(canvasX, canvasY);\n            }\n        },\n\n        onViewChange: function(viewChangeObj) {\n\n            if (viewChangeObj.changed.includes('scale')) {\n                statusOverlay.out({\n                    type: 'transform',\n                    scale: viewChangeObj.scale,\n                    angleDeg: viewChangeObj.angle * 180 / Math.PI\n                });\n            }\n\n            toolspaceToolRow.setEnableZoomIn(viewChangeObj.scale !== klCanvasWorkspace.getMaxScale());\n            toolspaceToolRow.setEnableZoomOut(viewChangeObj.scale !== klCanvasWorkspace.getMinScale());\n\n            handUi.update(viewChangeObj.scale, viewChangeObj.angle * 180 / Math.PI);\n        },\n        onUndo: function() {\n            if (klHistory.canUndo()) {\n                if (undoRedoCatchup.undo()) {\n                    statusOverlay.out(LANG('undo'), true);\n                }\n            }\n        },\n        onRedo: function() {\n            if (klHistory.canRedo()) {\n                if (undoRedoCatchup.redo()) {\n                    statusOverlay.out(LANG('redo'), true);\n                }\n            }\n        },\n    });\n    let keyListener = new BB.KeyListener({\n        onDown: function(keyStr, event, comboStr) {\n            if (KL.dialogCounter.get() > 0) {\n                return;\n            }\n            if (BB.isInputFocused(true)) {\n                return;\n            }\n\n            let isDrawing = lineSanitizer.getIsDrawing() || klCanvasWorkspace.getIsDrawing();\n            if (isDrawing) {\n                return;\n            }\n\n            if (comboStr === 'plus') {\n                klCanvasWorkspace.zoomByStep(keyListener.isPressed('shift') ? 1/8 : 1/2);\n            }\n            if (comboStr === 'minus') {\n                klCanvasWorkspace.zoomByStep(keyListener.isPressed('shift') ? -1/8 : -1/2);\n            }\n            if (comboStr === 'home') {\n                klCanvasWorkspace.fitView();\n            }\n            if (comboStr === 'end') {\n                klCanvasWorkspace.resetView(true);\n            }\n            if (['ctrl+z', 'cmd+z'].includes(comboStr)) {\n                event.preventDefault();\n                undoRedoCatchup.undo();\n            }\n            if (\n                ['ctrl+y', 'cmd+y'].includes(comboStr) ||\n                (\n                    (\n                        BB.sameKeys('ctrl+shift+z', comboStr) ||\n                        BB.sameKeys('cmd+shift+z', comboStr)\n                    ) && keyStr === 'z'\n                )\n            ) {\n                event.preventDefault();\n                undoRedoCatchup.redo();\n            }\n            if (!pOptions.embed) {\n                if (['ctrl+s', 'cmd+s'].includes(comboStr)) {\n                    event.preventDefault();\n                    saveToComputer.save();\n                }\n                if (['ctrl+shift+s', 'cmd+shift+s'].includes(comboStr)) {\n                    event.preventDefault();\n\n                    (async () => {\n                        let success = true;\n                        try {\n                            await projectStore.store(klCanvas.getProject());\n                        } catch (e) {\n                            success = false;\n                            setTimeout(() => {\n                                throw new Error('keyboard-shortcut: failed to store browser storage, ' + e);\n                            }, 0);\n                            statusOverlay.out('❌ ' + LANG('file-storage-failed'), true);\n                        }\n                        if (success) {\n                            pOptions.saveReminder.reset();\n                            statusOverlay.out(LANG('file-storage-stored'), true);\n                        }\n                    })();\n                }\n                if (['ctrl+c', 'cmd+c'].includes(comboStr)) {\n                    event.preventDefault();\n                    copyToClipboard(true);\n                }\n            }\n            if (['ctrl+a', 'cmd+a'].includes(comboStr)) {\n                event.preventDefault();\n            }\n\n\n            if (keyListener.comboOnlyContains(['left', 'right', 'up', 'down'])) {\n                if (keyStr === 'left') {\n                    klCanvasWorkspace.translateView(1, 0);\n                }\n                if (keyStr === 'right') {\n                    klCanvasWorkspace.translateView(-1, 0);\n                }\n                if (keyStr === 'up') {\n                    klCanvasWorkspace.translateView(0, 1);\n                }\n                if (keyStr === 'down') {\n                    klCanvasWorkspace.translateView(0, -1);\n                }\n            }\n\n\n            if (['r+left','r+right'].includes(comboStr)) {\n                if (keyStr === 'left') {\n                    klCanvasWorkspace.setAngle(-15, true);\n                    handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n                }\n                if (keyStr === 'right') {\n                    klCanvasWorkspace.setAngle(15, true);\n                    handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n                }\n            }\n            if (['r+up'].includes(comboStr)) {\n                klCanvasWorkspace.setAngle(0);\n                handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n            }\n\n\n            if (comboStr === 'sqbr_open') {\n                currentBrush.decreaseSize(0.03 / klCanvasWorkspace.getScale());\n            }\n            if (comboStr === 'sqbr_close') {\n                currentBrush.increaseSize(0.03 / klCanvasWorkspace.getScale());\n            }\n            if (comboStr === 'enter') {\n                klCanvas.layerFill(klCanvas.getLayerIndex(currentLayerCtx.canvas), klColorSlider.getColor());\n                statusOverlay.out(LANG('filled'), true);\n            }\n            if (['delete', 'backspace'].includes(comboStr)) {\n                let layerIndex = klCanvas.getLayerIndex(currentLayerCtx.canvas);\n                if (layerIndex === 0 && !brushUiObj.eraserBrush.getIsTransparentBg()) {\n                    klCanvas.layerFill(layerIndex, {r: 255, g: 255, b: 255}, 'source-in');\n                } else {\n                    klCanvas.clearLayer(layerIndex);\n                }\n                statusOverlay.out(LANG('cleared-layer'), true);\n            }\n            if (comboStr === 'c') {\n                event.preventDefault();\n                klCanvasWorkspace.setMode('draw');\n                toolspaceToolRow.setActive('draw');\n                mainTabRow.open('draw');\n                updateMainTabVisibility();\n                brushTabRow.open('penBrush');\n            }\n            if (comboStr === 'e') {\n                event.preventDefault();\n                klCanvasWorkspace.setMode('draw');\n                toolspaceToolRow.setActive('draw');\n                mainTabRow.open('draw');\n                updateMainTabVisibility();\n                brushTabRow.open('eraserBrush');\n            }\n            if (comboStr === 'z') {\n                event.preventDefault();\n                klCanvasWorkspace.setMode('draw');\n                toolspaceToolRow.setActive('draw');\n                mainTabRow.open('draw');\n                updateMainTabVisibility();\n                brushTabRow.open('pixelBrush');\n               \n            }\n            if (comboStr === 'a') {\n                event.preventDefault();\n                klCanvasWorkspace.setMode('draw');\n                toolspaceToolRow.setActive('draw');\n                mainTabRow.open('draw');\n                updateMainTabVisibility();\n                brushTabRow.open('chemyBrush');\n                console.log(lastNonEraserBrushId);\n               \n            }\n            if (comboStr === 'x') {\n                event.preventDefault();\n                klCanvasWorkspace.setMode('draw');\n                toolspaceToolRow.setActive('draw');\n                mainTabRow.open('draw');\n                updateMainTabVisibility();\n                brushTabRow.open('smudgeBrush');\n                console.log(lastNonEraserBrushId);\n               \n            }\n            \n           \n            if (comboStr === 'b') {\n                event.preventDefault();\n                klCanvasWorkspace.setMode('draw');\n                toolspaceToolRow.setActive('draw');\n                mainTabRow.open('draw');\n                updateMainTabVisibility();\n                brushTabRow.open('sketchyBrush');\n                console.log(lastNonEraserBrushId)\n            }\n            if (comboStr === 'f') {\n                event.preventDefault();\n                klCanvasWorkspace.setMode('draw');\n                toolspaceToolRow.setActive('draw');\n                mainTabRow.open('draw');\n                updateMainTabVisibility();\n                brushTabRow.open('blendBrush');\n            }\n            \n            if (comboStr === 'g') {\n                event.preventDefault();\n                klCanvasWorkspace.setMode('fill');\n                toolspaceToolRow.setActive('fill');\n                mainTabRow.open('fill');\n                updateMainTabVisibility();\n            }\n            if (comboStr === 't') {\n                event.preventDefault();\n                klCanvasWorkspace.setMode('text');\n                toolspaceToolRow.setActive('text');\n                mainTabRow.open('text');\n                updateMainTabVisibility();\n            }\n            if (comboStr === 'u') {\n                event.preventDefault();\n                klCanvasWorkspace.setMode('shape');\n                toolspaceToolRow.setActive('shape');\n                mainTabRow.open('shape');\n                updateMainTabVisibility();\n            }\n            if (comboStr === 'x') {\n                event.preventDefault();\n                klColorSlider.swapColors();\n            }\n\n\n        },\n        onUp: function(keyStr, event) {\n        }\n    });\n\n    /**\n     *\n     * @param importedImage - convertedPsd | {type: 'image', width: number, height: number, canvas: image | canvas}\n     * @param filename - string e.g. 'drawing.psd'\n     * @param optionStr? - 'default' | 'layer' | 'image'\n     */\n    function importFinishedLoading(\n        importedImage: IKlPsd | {\n            type: 'image';\n            width: number;\n            height: number;\n            canvas: HTMLCanvasElement | HTMLImageElement;\n        },\n        filename: string,\n        optionStr: 'default' | 'layer' | 'image',\n    ) {\n        if (!importedImage || isNaN(importedImage.width) || isNaN(importedImage.height) || importedImage.width <= 0 || importedImage.height <= 0) {\n            KL.popup({\n                target: klRootEl,\n                type: \"error\",\n                message: LANG('import-broken-file'),\n                buttons: [\"Ok\"],\n            });\n            return;\n        }\n\n        function getResizedDimensions(width, height) {\n            let w = parseInt(width);\n            let h = parseInt(height);\n            if (w > klMaxCanvasSize) {\n                h = klMaxCanvasSize / w * h;\n                w = klMaxCanvasSize;\n            }\n            if (h > klMaxCanvasSize) {\n                w = klMaxCanvasSize / h * w;\n                h = klMaxCanvasSize;\n            }\n            w = parseInt('' + w);\n            h = parseInt('' + h);\n            return {\n                width: w,\n                height: h\n            }\n        }\n\n        function importAsImage(canvas) {\n            let resizedDimensions = getResizedDimensions(canvas.width, canvas.height);\n\n            //resize first\n            let tempCanvas = BB.canvas(canvas.width, canvas.height);\n            let tempCanvasCtx = tempCanvas.getContext('2d');\n            tempCanvasCtx.drawImage(canvas, 0, 0);\n\n            BB.resizeCanvas(tempCanvas, resizedDimensions.width, resizedDimensions.height);\n\n            klCanvas.reset({\n                width: resizedDimensions.width,\n                height: resizedDimensions.height,\n                image: tempCanvas,\n                layerName: filename\n            });\n\n            layerManager.update(0);\n            setCurrentLayer(klCanvas.getLayer(0));\n            klCanvasWorkspace.resetView();\n            handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n\n            isFirstImage = false;\n        }\n\n        /**\n         *\n         * @param convertedPsdObj - if flattened then without layers\n         * @param cropObj? - {x: number, y: number, width: number, height: number}\n         */\n        function importAsImagePsd(convertedPsdObj: IKlPsd, cropObj?) {\n\n            // crop\n            function crop(targetCanvas, cropCanvas, cropObj) {\n                cropCanvas.width = cropCanvas.width;\n                cropCanvas.getContext('2d').drawImage(targetCanvas, -cropObj.x, -cropObj.y);\n                targetCanvas.width = cropObj.width;\n                targetCanvas.height = cropObj.height;\n                targetCanvas.getContext('2d').drawImage(cropCanvas, 0, 0);\n            }\n            if (cropObj && (cropObj.width !== convertedPsdObj.width ||cropObj.height !== convertedPsdObj.height)) {\n                let cropCanvas = BB.canvas(cropObj.width, cropObj.height);\n                convertedPsdObj.width = cropObj.width;\n                convertedPsdObj.height = cropObj.height;\n\n                if (!convertedPsdObj.layers) {\n                    crop(convertedPsdObj.canvas, cropCanvas, cropObj);\n                }\n                if (convertedPsdObj.layers) {\n                    for (let i = 0; i < convertedPsdObj.layers.length; i++) {\n                        let item = convertedPsdObj.layers[i];\n                        crop(item.image, cropCanvas, cropObj);\n                    }\n                }\n            }\n\n            // resize\n            let resizedDimensions = getResizedDimensions(convertedPsdObj.width, convertedPsdObj.height);\n            convertedPsdObj.width = resizedDimensions.width;\n            convertedPsdObj.height = resizedDimensions.height;\n            if (!convertedPsdObj.layers) {\n                BB.resizeCanvas(convertedPsdObj.canvas, convertedPsdObj.width, convertedPsdObj.height);\n            }\n            if (convertedPsdObj.layers) {\n                for (let i = 0; i < convertedPsdObj.layers.length; i++) {\n                    let item = convertedPsdObj.layers[i];\n                    BB.resizeCanvas(item.image, convertedPsdObj.width, convertedPsdObj.height);\n                }\n            }\n\n            let layerIndex;\n            if (convertedPsdObj.layers) {\n                layerIndex = klCanvas.reset({\n                    width: convertedPsdObj.width,\n                    height: convertedPsdObj.height,\n                    layers: convertedPsdObj.layers\n                });\n            } else {\n                layerIndex = klCanvas.reset({\n                    width: convertedPsdObj.width,\n                    height: convertedPsdObj.height,\n                    image: convertedPsdObj.canvas\n                });\n            }\n            layerManager.update(layerIndex);\n            setCurrentLayer(klCanvas.getLayer(layerIndex));\n            klCanvasWorkspace.resetView();\n            handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n\n            isFirstImage = false;\n        }\n\n        function importAsLayer(canvas) {\n            KL.showImportAsLayerDialog({\n                target: klRootEl,\n                klCanvas: klCanvas,\n                importImage: canvas,\n                callback: function(transformObj, isPixelated: boolean) {\n                    if (!transformObj) {\n                        return;\n                    }\n\n                    klHistory.pause(true);\n                    klCanvas.addLayer();\n                    let layers = klCanvas.getLayers();\n                    let activeLayerIndex = layers.length - 1;\n                    if (filename) {\n                        klCanvas.renameLayer(activeLayerIndex, filename);\n                    }\n                    let activeLayerContext = klCanvas.getLayerContext(activeLayerIndex);\n                    BB.drawTransformedImageWithBounds(activeLayerContext, canvas, transformObj, null, isPixelated);\n                    setCurrentLayer(klCanvas.getLayer(activeLayerIndex));\n                    layerManager.update(activeLayerIndex);\n\n                    klHistory.pause(false);\n\n                    klHistory.push({\n                        tool: [\"misc\"],\n                        action: \"importImage\",\n                        params: [BB.copyCanvas(activeLayerContext.canvas), filename]\n                    });\n                }\n            });\n        }\n\n\n        if (optionStr === 'default' || !optionStr) {\n            KL.showImportImageDialog({\n                image: importedImage,\n                target: klRootEl,\n                maxSize: klMaxCanvasSize,\n                callback: function(res) {\n                    if (res.type === 'as-image') {\n                        importAsImage(res.image);\n                    } else if (res.type === 'as-image-psd') {\n                        importAsImagePsd(res.image, res.cropObj);\n                    } else if (res.type === 'as-layer') {\n                        importAsLayer(res.image);\n                    } else if (res.type === 'cancel') {\n                        // nothing to do\n                    }\n                }\n            });\n        }\n\n        if (optionStr === 'layer') {\n            importAsLayer(importedImage.canvas);\n        }\n        if (optionStr === 'image') {\n            if (importedImage.type === 'psd') {\n                importAsImagePsd(importedImage);\n            } else {\n                importAsImage(importedImage.canvas);\n            }\n        }\n\n    }\n\n    function onPaste(e) {\n        if (KL.dialogCounter.get() > 0) {\n            return;\n        }\n\n        function retrieveImageFromClipboardAsBlob(pasteEvent, callback) {\n            if (pasteEvent.clipboardData == false) {\n                if (typeof (callback) == \"function\") {\n                    callback(undefined);\n                }\n            }\n\n            let items = pasteEvent.clipboardData.items;\n\n            if (items == undefined) {\n                if (typeof (callback) == \"function\") {\n                    callback(undefined);\n                }\n            } else {\n                for (let i = 0; i < items.length; i++) {\n                    if (items[i].type.indexOf(\"image\") == -1) {\n                        continue;\n                    }\n                    let blob = items[i].getAsFile();\n\n                    if (typeof (callback) == \"function\") {\n                        callback(blob);\n                    }\n                }\n            }\n\n        }\n\n        e.stopPropagation();\n        e.preventDefault();\n\n        if (e.clipboardData.files[0]) {\n            retrieveImageFromClipboardAsBlob(e, function (imageBlob) {\n                // If there's an image, display it in the canvas\n                if (imageBlob) {\n                    let img = new Image();\n                    img.onload = function () {\n                        importFinishedLoading({\n                            type: 'image',\n                            width: img.width,\n                            height: img.height,\n                            canvas: img\n                        }, null, 'default');\n                    };\n                    let URLObj = window.URL || window.webkitURL;\n                    img.src = URLObj.createObjectURL(imageBlob);\n                }\n            });\n        } else if (e.clipboardData.items[0]) {\n            e.clipboardData.items[0].getAsString(function(pasteStr) {\n                pasteStr = pasteStr.trim();\n                if (pasteStr.match(/^https?/)) {\n                    // url\n                    let img = new Image();\n                    img.onload = function () {\n                        importFinishedLoading({\n                            type: 'image',\n                            width: img.width,\n                            height: img.height,\n                            canvas: img\n                        }, null, 'default');\n                    };\n                    img.onerror = function (e) {\n                        console.log('error loading', e);\n                    };\n                    img.crossOrigin = 'Anonymous';\n                    img.src = pasteStr;\n\n                } else if (pasteStr.match(/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/)) {\n                    // url\n                    let rgbObj = BB.ColorConverter.hexToRGB(pasteStr.replace('#', ''));\n                    brushSettingService.setColor(rgbObj);\n                }\n            });\n\n        }\n    }\n\n    function handleFileSelect(files, optionStr) {\n\n        function showWarningPsdFlattened() {\n            KL.popup({\n                target: klRootEl,\n                type: \"warning\",\n                message: LANG('import-psd-unsupported') + \"<br /><br />\",\n                buttons: [\"Ok\"],\n            });\n        }\n\n        let hasUnsupportedFile = false;\n        for (let i = 0, file; file = files[i]; i++) {\n            let extension = file.name.split(\".\");\n            extension = extension[extension.length - 1].toLowerCase();\n            if (extension === \"psd\") {\n\n                (function(f) {\n                    let loaderSizeBytes = 1024 * 1024 * 25; // 25mb\n                    let maxSizeBytes = 1024 * 1024 * 1024; // 1gb\n                    let maxResolution = 4096;\n\n                    if (f.size >= maxSizeBytes) { // pretty likely to break stuff\n                        KL.popup({\n                            target: klRootEl,\n                            type: \"error\",\n                            message: \"File too big. Unable to import.<br /><br />\",\n                            buttons: [\"Ok\"],\n                        });\n                        return;\n                    }\n\n                    let doShowLoader = files.length === 1 && f.size >= loaderSizeBytes;\n                    let loaderIsOpen = true;\n                    let closeLoader;\n\n                    if (doShowLoader) {\n                        KL.popup({\n                            target: klRootEl,\n                            message: LANG('import-opening'),\n                            callback: function (result) {\n                                loaderIsOpen = false;\n                                closeLoader = null;\n                            },\n                            closefunc: function (f) {\n                                closeLoader = f;\n                            }\n                        });\n                    }\n\n\n                    let reader = new FileReader();\n                    reader.onload = function (readerResult) {\n\n                        KL.loadAgPsd().then(function(agPsdLazy) {\n\n                            if (doShowLoader && !loaderIsOpen) {\n                                return;\n                            }\n\n                            try {\n                                let psd;\n\n                                // first pass, only read metadata\n                                psd = agPsdLazy.readPsd(\n                                    (readerResult.target.result as any),\n                                    {\n                                        skipLayerImageData: true,\n                                        skipThumbnail: true,\n                                        skipCompositeImageData: true\n                                    });\n                                if (psd.width > maxResolution || psd.height > maxResolution) {\n                                    if (closeLoader) {\n                                        closeLoader();\n                                    }\n                                    KL.popup({\n                                        target: klRootEl,\n                                        type: \"error\",\n                                        //message: \"Image exceeds maximum dimensions of \" + maxResolution + \" x \" + maxResolution + \" pixels. Unable to import.\"\n                                        message: LANG('import-psd-too-large').replace(/{x}/g, '' + maxResolution)\n                                            + \"<br /><br />\"\n                                            + LANG('import-psd-size') + \": \" + psd.width + \" x \" + psd.height + ' pixels'\n                                            + \"<br /><br />\"\n                                        ,\n                                        buttons: [\"Ok\"],\n                                    });\n                                    return;\n                                }\n\n\n                                // second pass, now load actual data.\n                                psd = null;\n\n                                try {\n                                    psd = agPsdLazy.readPsd((readerResult.target.result as any));\n                                } catch (e) {\n                                    //console.log('failed regular psd import', e);\n                                }\n                                if (psd) {\n                                    //console.log('psd', psd);\n                                    let convertedPsd = KL.PSD.readPsd(psd);\n                                    //console.log('converted', convertedPsd);\n                                    if (optionStr === 'image' && convertedPsd.error) {\n                                        showWarningPsdFlattened();\n                                    }\n\n                                    if (closeLoader) {\n                                        closeLoader();\n                                    }\n                                    importFinishedLoading(convertedPsd, f.name, optionStr);\n                                } else {\n                                    psd = agPsdLazy.readPsd((readerResult.target.result as any), { skipLayerImageData: true, skipThumbnail: true });\n                                    if (optionStr === 'image') {\n                                        showWarningPsdFlattened();\n                                    }\n\n                                    if (closeLoader) {\n                                        closeLoader();\n                                    }\n                                    importFinishedLoading({\n                                        type: 'psd',\n                                        width: psd.width,\n                                        height: psd.height,\n                                        canvas: psd.canvas,\n                                        error: true\n                                    }, f.name, optionStr);\n                                }\n\n\n                            } catch (e) {\n                                if (closeLoader) {\n                                    closeLoader();\n                                }\n                                KL.popup({\n                                    target: klRootEl,\n                                    type: \"error\",\n                                    message: \"Failed to load PSD.<br /><br />\",\n                                    buttons: [\"Ok\"],\n                                });\n                            }\n                        }).catch(() => {\n                            closeLoader();\n                            alert('Error: failed to load PSD library');\n                        });\n\n                    };\n                    reader.readAsArrayBuffer(f);\n                })(file);\n\n            } else if (file.type.match('image.*')) {\n                (function (f) {\n                    window.URL = window.URL || window.webkitURL;\n                    let url = window.URL.createObjectURL(f);\n                    let im = new Image();\n                    im.src = url;\n                    BB.loadImage(im, function () {\n                        importFinishedLoading({\n                            type: 'image',\n                            width: im.width,\n                            height: im.height,\n                            canvas: im\n                        }, f.name, optionStr);\n                    });\n                })(file);\n            } else {\n                hasUnsupportedFile = true;\n            }\n        }\n        if (hasUnsupportedFile) {\n            KL.popup({\n                target: klRootEl,\n                message: LANG('import-unsupported-file'),\n                type: 'error',\n                buttons: ['OK'],\n            });\n        }\n    }\n\n    if (!pOptions.embed) {\n        new KL.KlImageDropper({\n            target: document.body,\n            onDrop: function(files, optionStr) {\n                if (KL.dialogCounter.get() > 0) {\n                    return;\n                }\n                handleFileSelect(files, optionStr);\n            },\n            enabledTest: function() {\n                return KL.dialogCounter.get() === 0;\n            }\n        });\n\n        BB.addEventListener(window, 'paste', onPaste, false);\n    }\n\n    const brushUiObj: any = {};\n\n    // create brush UIs\n    for (let b in KL.brushesUI) {\n        if (KL.brushesUI.hasOwnProperty(b)) {\n            let ui = new KL.brushesUI[b].Ui({\n                onSizeChange: sizeWatcher,\n                onOpacityChange: function(opacity) {\n                    brushSettingService.emitOpacity(opacity);\n                },\n                onConfigChange: () => {\n                    brushSettingService.emitSliderConfig({\n                        sizeSlider: KL.brushesUI[currentBrushId].sizeSlider,\n                        opacitySlider: KL.brushesUI[currentBrushId].opacitySlider\n                    });\n                }\n            });\n            brushUiObj[b] = ui;\n            ui.getElement().style.padding = 10 + 'px';\n        }\n    }\n\n\n    BB.css(klRootEl, {\n        position: 'absolute',\n        left: '0',\n        top: '0',\n        right: '0',\n        bottom: '0'\n    });\n\n    let statusOverlay = new KL.StatusOverlay();\n\n    const toolspace = BB.el({});\n    const toolspaceInner = BB.el({\n        parent: toolspace,\n    });\n    toolspace.oncontextmenu = function () {\n        return false;\n    };\n    toolspace.onclick = BB.handleClick;\n\n\n    let toolspaceCollapser = new KL.ToolspaceCollapser({\n        onChange: function() {\n            updateCollapse();\n        }\n    });\n    function updateCollapse() {\n\n        //collapser\n        if (uiWidth < collapseThreshold) {\n            toolspaceCollapser.getElement().style.display = 'block';\n\n            toolspaceCollapser.setDirection(uiState);\n            if (toolspaceCollapser.isOpen()) {\n                if (uiState === 'left') {\n                    BB.css(toolspaceCollapser.getElement(), {\n                        left: '271px',\n                        right: '',\n                    });\n                    BB.css(klCanvasWorkspace.getElement(), {\n                        left: '271px'\n                    });\n                } else {\n                    BB.css(toolspaceCollapser.getElement(), {\n                        left: '',\n                        right: '271px'\n                    });\n                    BB.css(klCanvasWorkspace.getElement(), {\n                        left: '0'\n                    });\n                }\n                toolspace.style.display = 'block';\n                klCanvasWorkspace.setSize(Math.max(0, uiWidth - toolWidth), uiHeight);\n                statusOverlay.setWide(false);\n\n            } else {\n                if (uiState === 'left') {\n                    BB.css(toolspaceCollapser.getElement(), {\n                        left: '0',\n                        right: '',\n                    });\n                    BB.css(klCanvasWorkspace.getElement(), {\n                        left: '0'\n                    });\n                } else {\n                    BB.css(toolspaceCollapser.getElement(), {\n                        left: '',\n                        right: '0'\n                    });\n                    BB.css(klCanvasWorkspace.getElement(), {\n                        left: '0'\n                    });\n                }\n                toolspace.style.display = 'none';\n                klCanvasWorkspace.setSize(Math.max(0, uiWidth), uiHeight);\n                statusOverlay.setWide(true);\n\n            }\n\n        } else {\n            toolspaceCollapser.getElement().style.display = 'none';\n            if (uiState === 'left') {\n                BB.css(klCanvasWorkspace.getElement(), {\n                    left: '271px'\n                });\n            } else {\n                BB.css(klCanvasWorkspace.getElement(), {\n                    left: '0'\n                });\n            }\n            toolspace.style.display = 'block';\n            klCanvasWorkspace.setSize(Math.max(0, uiWidth - toolWidth), uiHeight);\n            statusOverlay.setWide(false);\n\n        }\n    }\n    updateCollapse();\n\n    function updateUi() {\n        if (uiState === 'left') {\n            BB.css(toolspace, {\n                left: '0',\n                right: '',\n                borderLeft: 'none',\n                borderRight: '1px solid rgb(135, 135, 135)'\n            });\n            BB.css(klCanvasWorkspace.getElement(), {\n                left: '271px'\n            });\n        } else {\n            BB.css(toolspace, {\n                left: '',\n                right: '0',\n                borderLeft: '1px solid rgb(135, 135, 135)',\n                borderRight: 'none'\n            });\n            BB.css(klCanvasWorkspace.getElement(), {\n                left: '0'\n            });\n        }\n        statusOverlay.setUiState(uiState);\n        layerPreview.setUiState('' + uiState);\n        layerManager.setUiState('' + uiState);\n        updateCollapse();\n        toolspaceScroller.updateUiState(uiState);\n    }\n\n\n\n    let overlayToolspace;\n    setTimeout(function() {\n        overlayToolspace = new KL.OverlayToolspace({\n            enabledTest: function() {\n                return KL.dialogCounter.get() === 0 && !lineSanitizer.getIsDrawing();\n            },\n            brushSettingService,\n        });\n        klRootEl.appendChild(overlayToolspace.getElement());\n    }, 0);\n\n    BB.append(klRootEl, [klCanvasWorkspace.getElement(), toolspace, toolspaceCollapser.getElement()]);\n\n    BB.css(toolspace, {\n        position: \"absolute\",\n        right: '0',\n        top: '0',\n        bottom: '0',\n        width: (toolWidth - 1) + \"px\",\n\n        overflow: \"hidden\",\n        backgroundColor: \"#ddd\",\n        borderLeft: \"1px solid rgb(135, 135, 135)\",\n        userSelect: 'none',\n        touchAction: 'none'\n    });\n\n    let toolspaceTopRow;\n    if (pOptions.embed) {\n        toolspaceTopRow = new ToolspaceTopRow({\n            onHelp: () => {\n                showIframePopup(pOptions.embed.url + '/help.html', !!pOptions.embed);\n            },\n            onSubmit: () => {\n                KL.popup({\n                    target: klRootEl,\n                    message: LANG('submit-prompt'),\n                    buttons: [LANG('submit'), 'Cancel'],\n                    callback: async (result) => {\n                        if (result !== LANG('submit')) {\n                            return;\n                        }\n\n                        let overlay = BB.el({\n                            parent: klRootEl,\n                            className: 'upload-overlay',\n                            content: '<div class=\"spinner\"></div> ' + LANG('submit-submitting'),\n                        });\n\n                        pOptions.embed.onSubmit(\n                            () => {\n                                pOptions.saveReminder.reset();\n                                klRootEl.removeChild(overlay);\n                            },\n                            () => {\n                                klRootEl.removeChild(overlay);\n                            });\n                    }\n                });\n            },\n            onLeftRight: () => {\n                uiState = uiState === 'left' ? 'right' : 'left';\n                updateUi();\n            },\n        });\n    } else {\n        toolspaceTopRow = new KL.ToolspaceTopRow({\n            logoImg: pOptions.logoImg,\n            onLogo: function() {\n                showIframePopup('./home/', !!pOptions.embed);\n            },\n            onNew: function() {\n                showNewImageDialog();\n            },\n            onImport: function() {\n                fileTab.triggerImport();\n            },\n            onSave: function() {\n                saveToComputer.save();\n            },\n            onShare: function() {\n                shareImage();\n            },\n            onHelp: function() {\n                showIframePopup('./help/', !!pOptions.embed);\n            },\n        });\n    }\n    BB.addClassName(toolspaceTopRow.getElement(), 'toolspace-row-shadow');\n    toolspaceTopRow.getElement().style.marginBottom = '10px';\n  \n\n    let toolspaceToolRow = new KL.ToolspaceToolRow({\n        onActivate: function(activeStr) {\n            if (activeStr === 'draw') {\n                klCanvasWorkspace.setMode('draw');\n            } else if (activeStr === 'hand') {\n                klCanvasWorkspace.setMode('hand');\n            } else if (activeStr === 'fill') {\n                klCanvasWorkspace.setMode('fill');\n            } else if (activeStr === 'text') {\n                klCanvasWorkspace.setMode('text');\n            } else if (activeStr === 'shape') {\n                klCanvasWorkspace.setMode('shape');\n            } else {\n                throw new Error('unknown activeStr');\n            }\n            mainTabRow.open(activeStr);\n            updateMainTabVisibility();\n            klColorSlider.pickingDone();\n        },\n        onZoomIn: function() {\n            klCanvasWorkspace.zoomByStep(keyListener.isPressed('shift') ? 1/8 : 1/2);\n        },\n        onZoomOut: function() {\n            klCanvasWorkspace.zoomByStep(keyListener.isPressed('shift') ? -1/8 : -1/2);\n        },\n        onUndo: function() {\n            undoRedoCatchup.undo();\n        },\n        onRedo: function() {\n            undoRedoCatchup.redo();\n        }\n    });\n    toolspaceToolRow.setIsSmall(uiHeight < 540);\n    klHistory.addListener(function() {\n        toolspaceToolRow.setEnableUndo(klHistory.canUndo());\n        toolspaceToolRow.setEnableRedo(klHistory.canRedo());\n    });\n    BB.addClassName(toolspaceToolRow.getElement(), 'toolspace-row-shadow');\n   \n\n    let klColorSlider;\n\n    function setCurrentBrush(brushId) {\n        if (brushId !== 'eraserBrush') {\n            lastNonEraserBrushId = brushId;\n        }\n\n        if (klColorSlider) {\n            if (brushId === 'eraserBrush') {\n                klColorSlider.enable(false);\n            } else {\n                klColorSlider.enable(true);\n            }\n        }\n\n        currentBrushId = brushId;\n        currentBrush = brushUiObj[brushId];\n        currentBrush.setColor(currentColor);\n        currentBrush.setContext(currentLayerCtx);\n        klCanvasWorkspace.setMode('draw');\n        toolspaceToolRow.setActive('draw');\n        updateMainTabVisibility();\n    }\n\n    function setCurrentLayer(layer) { //BrushContext(p_context) {\n        currentLayerCtx = layer.context;\n        currentBrush.setContext(layer.context);\n        layerPreview.setLayer(layer);\n    }\n\n    function setBrushColor(p_color) {\n        currentColor = p_color;\n        currentBrush.setColor(p_color);\n        brushSettingService.emitColor(p_color);\n        klColorSlider.pickingDone();\n    }\n\n    klColorSlider = new KL.KlColorSlider({\n        width: 250,\n        height: 30,\n        svHeight: 100,\n        startValue: new BB.RGB(0, 0, 0),\n        onPick: setBrushColor\n    });\n    klColorSlider.setHeight(Math.max(163, Math.min(400, uiHeight - 505)));\n    klColorSlider.setPickCallback(function (doPick) {\n\n        if (doPick) {\n            klCanvasWorkspace.setMode('pick');\n        } else {\n            klCanvasWorkspace.setMode(toolspaceToolRow.getActive());\n            updateMainTabVisibility();\n        }\n\n    });\n    let brushDiv = document.createElement(\"div\");\n    let colorDiv = document.createElement(\"div\");\n    BB.css(colorDiv, {\n        margin: '10px',\n        display: 'flex',\n        flexWrap: 'wrap',\n        justifyContent: 'space-between',\n        alignItems: 'flex-end'\n    });\n    let toolspaceStabilizerRow = new KL.ToolspaceStabilizerRow({\n        smoothing: 1,\n        onSelect: function(v) {\n            lineSmoothing.setSmoothing(translateSmoothing(v));\n        }\n    });\n\n\n    \n    BB.append(\n        colorDiv,\n        [klColorSlider.getElement(), klColorSlider.getOutputElement(), toolspaceStabilizerRow.getElement()]\n    );\n\n    let brushTabRow = new KL.TabRow({\n        initialId: 'penBrush',\n        useAccent: true,\n        tabArr: (function () {\n            let result = [];\n\n            function createTab(keyStr) {\n                return {\n                    id: keyStr,\n                    image: KL.brushesUI[keyStr].image,\n                    title: KL.brushesUI[keyStr].tooltip,\n                    onOpen: function() {\n                        brushUiObj[keyStr].getElement().style.display = 'block';\n                        setCurrentBrush(keyStr);\n                        klColorSlider.pickingDone();\n                        brushSettingService.emitSliderConfig({\n                            sizeSlider: KL.brushesUI[keyStr].sizeSlider,\n                            opacitySlider: KL.brushesUI[keyStr].opacitySlider\n                        });\n                        sizeWatcher(brushUiObj[keyStr].getSize());\n                        brushSettingService.emitOpacity(brushUiObj[keyStr].getOpacity());\n                    },\n                    onClose: function() {\n                        brushUiObj[keyStr].getElement().style.display = 'none';\n                    }\n                };\n            }\n\n            let keyArr = Object.keys(brushUiObj);\n            for (let i = 0; i < keyArr.length; i++) {\n                result.push(createTab(keyArr[i]));\n            }\n            return result;\n        })()\n    });\n  \n    for (let b in KL.brushesUI) {\n        if (KL.brushesUI.hasOwnProperty(b)) {\n            brushDiv.appendChild(brushUiObj[b].getElement());\n        }\n    }\n\n    const handUi = new KL.HandUi({\n        scale: 1,\n        angleDeg: 0,\n        onReset: function() {\n            klCanvasWorkspace.resetView(true);\n            handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n        },\n        onFit: function() {\n            klCanvasWorkspace.fitView();\n            handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n        },\n        onAngleChange: function(angleDeg, isRelative) {\n            klCanvasWorkspace.setAngle(angleDeg, isRelative);\n            handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n        },\n    });\n\n    let fillUi = new KL.FillUi({\n        colorSlider: klColorSlider\n    });\n\n    let textUi = new KL.TextUi({\n        colorSlider: klColorSlider\n    });\n\n    let shapeUi = new KL.ShapeUi({\n        colorSlider: klColorSlider\n    });\n\n    let shapeTool = new KL.ShapeTool({\n        onShape: function(isDone, x1, y1, x2, y2, angleRad) {\n\n            let layerIndex = klCanvas.getLayerIndex(currentLayerCtx.canvas);\n\n            let shapeObj: any = {\n                type: shapeUi.getShape(),\n                x1: x1,\n                y1: y1,\n                x2: x2,\n                y2: y2,\n                angleRad: angleRad,\n                isOutwards: shapeUi.getIsOutwards(),\n                opacity: shapeUi.getOpacity(),\n                isEraser: shapeUi.getIsEraser()\n            };\n            if (shapeUi.getShape() === 'line') {\n                shapeObj.strokeRgb = klColorSlider.getColor();\n                shapeObj.lineWidth = shapeUi.getLineWidth();\n                shapeObj.isAngleSnap = shapeUi.getIsSnap() || keyListener.isPressed('shift');\n            } else {\n                shapeObj.isFixedRatio = shapeUi.getIsFixed() || keyListener.isPressed('shift');\n                if (shapeUi.getMode() === 'stroke') {\n                    shapeObj.strokeRgb = klColorSlider.getColor();\n                    shapeObj.lineWidth = shapeUi.getLineWidth();\n                } else {\n                    shapeObj.fillRgb = klColorSlider.getColor();\n                }\n            }\n\n            if (isDone) {\n                klCanvas.setComposite(layerIndex, null);\n                klCanvas.drawShape(layerIndex, shapeObj);\n            } else {\n                klCanvas.setComposite(layerIndex, {\n                    draw: function(ctx) {\n                        KL.drawShape(ctx, shapeObj);\n                    }\n                });\n            }\n            klCanvasWorkspace.requestFrame();\n\n        }\n    });\n\n    const layerManager = KL.klLayerManager(klCanvas, function (val) {\n        setCurrentLayer(klCanvas.getLayer(val));\n        klHistory.push({\n            tool: [\"misc\"],\n            action: \"focusLayer\",\n            params: [val]\n        });\n    }, klRootEl) as any;\n    const layerPreview = new KL.LayerPreview({\n        klRootEl: klRootEl,\n        onClick: function () {\n            mainTabRow.open('layers');\n        }\n    });\n    layerPreview.setIsVisible(uiHeight >= 579);\n    layerPreview.setLayer(klCanvas.getLayer(klCanvas.getLayerIndex(currentLayerCtx.canvas)));\n\n    const filterTab = new KL.FilterTab(\n        klRootEl,\n        klColorSlider,\n        layerManager,\n        setCurrentLayer,\n        klCanvasWorkspace,\n        handUi,\n        () => { //get current color\n            return currentColor;\n        },\n        () => { // get max canvas size\n            return klMaxCanvasSize;\n        },\n        () => { // get kl canvas\n            return klCanvas;\n        },\n        () => { // get current layer ctx\n            return currentLayerCtx;\n        },\n        !!pOptions.embed,\n        statusOverlay,\n    );\n\n    const undoRedoCatchup = new KL.UndoRedoCatchup(\n        brushUiObj,\n        layerPreview,\n        layerManager,\n        handUi,\n        klCanvasWorkspace,\n        () => {\n            if (!initState) {\n                throw new Error('initState not initialized');\n            }\n            return initState;\n        },\n        () => klCanvas,\n        () => currentLayerCtx,\n        (clctx) => {\n            currentLayerCtx = clctx;\n        },\n        () => currentBrush,\n    );\n    klHistory.addListener((p) => {\n        undoRedoCatchup.catchup(p);\n    });\n\n    function showNewImageDialog() {\n        KL.newImageDialog({\n            currentColor: currentColor,\n            secondaryColor: klColorSlider.getSecondaryRGB(),\n            maxCanvasSize: klMaxCanvasSize,\n            canvasWidth: klCanvas.getWidth(),\n            canvasHeight: klCanvas.getHeight(),\n            workspaceWidth: window.innerWidth < collapseThreshold ? uiWidth : uiWidth - toolWidth,\n            workspaceHeight: uiHeight,\n            onConfirm: function(width, height, color) {\n                klCanvas.reset({\n                    width: width,\n                    height: height,\n                    color: color.a === 1 ? color : null\n                });\n\n                layerManager.update(0);\n                setCurrentLayer(klCanvas.getLayer(0));\n                klCanvasWorkspace.resetView();\n                handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n\n                isFirstImage = false;\n            },\n            onCancel: function() {}\n        });\n    }\n\n    function shareImage(callback?) {\n        BB.shareCanvas({\n            canvas: klCanvas.getCompleteCanvas(1),\n            fileName: BB.getDate() + filenameBase + '.png',\n            title: BB.getDate() + filenameBase + '.png',\n            callback: callback ? callback : function() {}\n        });\n    }\n\n    const saveToComputer = new KL.SaveToComputer(\n        pOptions.saveReminder,\n        klRootEl,\n        () => exportType,\n        () => klCanvas,\n        filenameBase,\n    );\n\n    const fileTab = pOptions.embed ? null : new KL.FileTab(\n        klRootEl,\n        projectStore,\n        () => klCanvas.getProject(),\n        exportType,\n        (type) => {\n            exportType = type;\n        },\n        handleFileSelect,\n        () => {\n            saveToComputer.save();\n        },\n        showNewImageDialog,\n        shareImage,\n        () => { // on upload\n            KL.imgurUpload(klCanvas, klRootEl, pOptions.saveReminder, pOptions.app && pOptions.app.imgurKey ? pOptions.app.imgurKey : null, );\n        },\n        copyToClipboard,\n        pOptions.saveReminder,\n    );\n\n    const settingsTab = new KL.SettingsTab(\n        () => {\n            uiState = uiState === 'left' ? 'right' : 'left';\n            updateUi();\n            if (!pOptions.embed) {\n                LocalStorage.setItem('uiState', uiState);\n            }\n        },\n        pOptions.aboutEl\n    );\n\n    mainTabRow = new KL.TabRow({\n        initialId: 'draw',\n        tabArr: [\n            {\n                id: 'draw',\n                title: LANG('tool-brush'),\n                image: toolPaintImg,\n                onOpen: function() {\n                    if (currentBrushId === 'eraserBrush') {\n                        klColorSlider.enable(false);\n                    }\n                    BB.append(\n                        colorDiv,\n                        [klColorSlider.getElement(), klColorSlider.getOutputElement(), toolspaceStabilizerRow.getElement()]\n                    );\n                    brushDiv.style.display = 'block';\n                },\n                onClose: function() {\n                    brushDiv.style.display = 'none';\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            },\n            {\n                id: 'hand',\n                title: LANG('tool-hand'),\n                image: toolHandImg,\n                isVisible: false,\n                onOpen: function() {\n                    handUi.setIsVisible(true);\n                },\n                onClose: function() {\n                    handUi.setIsVisible(false);\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            },\n            {\n                id: 'fill',\n                title: LANG('tool-paint-bucket'),\n                image: toolFillImg,\n                isVisible: false,\n                onOpen: function() {\n                    klColorSlider.enable(true);\n                    fillUi.setIsVisible(true);\n                },\n                onClose: function() {\n                    fillUi.setIsVisible(false);\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            },\n            {\n                id: 'text',\n                title: LANG('tool-text'),\n                image: toolTextImg,\n                isVisible: false,\n                onOpen: function() {\n                    klColorSlider.enable(true);\n                    textUi.setIsVisible(true);\n                },\n                onClose: function() {\n                    textUi.setIsVisible(false);\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            },\n            {\n                id: 'shape',\n                title: LANG('tool-shape'),\n                image: toolShapeImg,\n                isVisible: false,\n                onOpen: function() {\n                    klColorSlider.enable(true);\n                    shapeUi.setIsVisible(true);\n                },\n                onClose: function() {\n                    shapeUi.setIsVisible(false);\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            },\n            {\n                id: 'layers',\n                title: LANG('tab-layers'),\n                image: tabLayersImg,\n                onOpen: function() {\n                    layerManager.update();\n                    layerManager.style.display = 'block';\n                },\n                onClose: function() {\n                    layerManager.style.display = 'none';\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            },\n            {\n                id: 'edit',\n                label: LANG('tab-edit'),\n                onOpen: function() {\n                    filterTab.show();\n                },\n                onClose: function() {\n                    filterTab.hide();\n                },\n                css: {\n                    padding: '0 7px',\n                },\n            },\n            {\n                id: 'file',\n                label: LANG('tab-file'),\n                isVisible: !!fileTab,\n                onOpen: function() {\n                    if (!fileTab) {\n                        return;\n                    }\n                    fileTab.getElement().style.display = 'block';\n                    fileTab.setIsVisible(true);\n                },\n                onClose: function() {\n                    if (!fileTab) {\n                        return;\n                    }\n                    fileTab.getElement().style.display = 'none';\n                    fileTab.setIsVisible(false);\n                },\n                css: {\n                    padding: '0 7px',\n                },\n            },\n            {\n                id: 'settings',\n                title: LANG('tab-settings'),\n                image: tabSettingsImg,\n                onOpen: function() {\n                    settingsTab.getElement().style.display = 'block';\n                    // settingsTab.setIsVisible(true);\n                },\n                onClose: function() {\n                    settingsTab.getElement().style.display = 'none';\n                    // settingsTab.setIsVisible(false);\n                },\n                css: {\n                    minWidth: '45px',\n                }\n            }\n        ]\n    });\n    function updateMainTabVisibility() {\n        if (!mainTabRow) {\n            return;\n        }\n\n        let toolObj = {\n            'draw': {},\n            'hand': {},\n            'fill': {},\n            'text': {},\n            'shape': {}\n        };\n\n        let activeStr = toolspaceToolRow.getActive();\n        let oldTabId = mainTabRow.getOpenedTabId();\n\n        let keysArr = Object.keys(toolObj);\n        for (let i = 0; i < keysArr.length; i++) {\n            if (activeStr === keysArr[i]) {\n                mainTabRow.setIsVisible(keysArr[i], true);\n            } else {\n                mainTabRow.setIsVisible(keysArr[i], false);\n                if (oldTabId === keysArr[i]) {\n                    mainTabRow.open(activeStr);\n                }\n            }\n        }\n\n    }\n\n    function copyToClipboard(showCrop?) {\n        KL.clipboardDialog(klRootEl, klCanvas.getCompleteCanvas(1), function (inputObj) {\n            if (inputObj.left === 0 && inputObj.right === 0 && inputObj.top === 0 && inputObj.bottom === 0) {\n                return;\n            }\n            //do a crop\n            let p = {\n                context: currentLayerCtx,\n                canvas: klCanvas,\n                input: inputObj, //{left,right,top,bottom}\n                history: klHistory\n            };\n            KL.filterLib.cropExtend.apply(p);\n            layerManager.update();\n            klCanvasWorkspace.resetView();\n            handUi.update(klCanvasWorkspace.getScale(), klCanvasWorkspace.getAngleDeg());\n        }, statusOverlay, showCrop);\n    }\n\n    const bottomBarWrapper = BB.el({\n        css: {\n            width: \"270px\",\n            position: \"absolute\",\n            bottom: '0',\n            left: '0'\n        },\n    });\n    if (pOptions.bottomBar) {\n        bottomBarWrapper.append(pOptions.bottomBar);\n        const observer = new MutationObserver(() => updateBottomBar());\n        observer.observe(\n            toolspaceInner,\n            {\n                attributes: true,\n                childList: true,\n                subtree: true,\n            }\n        );\n    }\n    function updateBottomBar() {\n        if (!pOptions.bottomBar) {\n            return;\n        }\n        const threshold = 617; //590\n        const isVisible = (\n            threshold < window.innerHeight &&\n            toolspaceInner.scrollHeight + 50 < window.innerHeight\n        );\n        bottomBarWrapper.style.display = isVisible ? '' : 'none';\n    }\n\n\n\n    BB.append(toolspaceInner, [\n        layerPreview.getElement(),\n        mainTabRow.getElement(),\n        brushDiv,\n        handUi.getElement(),\n        fillUi.getElement(),\n        textUi.getElement(),\n        shapeUi.getElement(),\n        layerManager,\n        filterTab.getElement(),\n        fileTab ? fileTab.getElement() : null,\n        settingsTab.getElement(),\n        BB.el({\n            css: {\n                height: '10px', // a bit of spacing at the bottom\n            }\n        }),\n        bottomBarWrapper ? bottomBarWrapper : null\n    ]);\n\n    const toolspaceScroller = new KL.ToolspaceScroller({\n        toolspace,\n        uiState,\n    });\n\n    // --- interface ---\n\n    this.getEl = () => {\n        return klRootEl;\n    };\n\n    this.resize = (w, h) => {\n\n        // iPad scrolls down when increasing text zoom\n        if (window.scrollY > 0) {\n            window.scrollTo(0, 0);\n        }\n\n        if (uiWidth === Math.max(0, w) && uiHeight === Math.max(0, h)) {\n            return;\n        }\n\n        uiWidth = Math.max(0, w);\n        uiHeight = Math.max(0, h);\n\n        updateCollapse();\n        updateBottomBar();\n\n        layerPreview.setIsVisible(uiHeight >= 579);\n        klColorSlider.setHeight(Math.max(163, Math.min(400, uiHeight - 505)));\n        toolspaceToolRow.setIsSmall(uiHeight < 540);\n    };\n\n    this.out = (msg) => {\n        statusOverlay.out(msg);\n    };\n\n    this.getPNG = function(): Blob {\n        return base64ToBlob(klCanvas.getCompleteCanvas(1).toDataURL('image/png'));\n    };\n\n    this.getPSD = async function() {\n        return await klCanvasToPsdBlob(klCanvas);\n    };\n\n    this.swapUiLeftRight = () => {\n        uiState = uiState === 'left' ? 'right' : 'left';\n        if (!pOptions.embed) {\n            LocalStorage.setItem('uiState', uiState);\n        }\n        updateUi();\n    };\n\n    // --- end interface ---\n\n    this.resize(uiWidth, uiHeight);\n    updateUi();\n\n    {\n        BB.addEventListener(window, 'resize', () => {\n            this.resize(window.innerWidth, window.innerHeight);\n        });\n        BB.addEventListener(window, 'orientationchange', () => {\n            this.resize(window.innerWidth, window.innerHeight);\n        });\n\n        // iPad doesn't trigger 'resize' event when using text zoom, although it's resizing the window.\n        // Workaround: place a div in the body that fills the window, and use a ResizeObserver\n        const windowResizeWatcher = BB.el({\n            parent: document.body,\n            css: {\n                position: 'fixed',\n                left: '0',\n                top: '0',\n                right: '0',\n                bottom: '0',\n                pointerEvents: 'none',\n                zIndex: '-1',\n                userSelect: 'none',\n            }\n        });\n        const observer = new ResizeObserver(() => this.resize(window.innerWidth, window.innerHeight));\n        observer.observe(windowResizeWatcher);\n\n        // prevent ctrl scroll -> zooming page\n        BB.addEventListener(this.getEl(), 'wheel', (event) => {\n            event.preventDefault();\n        });\n        //maybe prevent zooming on safari mac os - I can't test it\n        const prevent = (e) => {\n            e.preventDefault();\n        }\n        window.addEventListener('gesturestart', prevent);\n        window.addEventListener('gesturechange', prevent);\n        window.addEventListener('gestureend', prevent);\n    }\n}","module.exports = require('./helpers/bundle-url').getBundleURL('lYbF2') + require('./helpers/bundle-manifest').resolve(\"bBxqy\");","/**\n * by bitbof (bitbof.com)\n */\n\nimport './polyfills';\nimport {BB} from './bb/bb';\nimport {KL} from './klecks/kl';\nimport {klHistory} from './klecks/history/kl-history';\nimport {KlApp} from './app/kl-app';\nimport {IKlProject} from './klecks/kl.types';\nimport {ProjectStore} from './klecks/storage/project-store';\nimport {initLANG, LANG} from './language/language';\n\n(async () => {\n    let klApp;\n\n    let domIsLoaded = false;\n    BB.addEventListener(window, 'DOMContentLoaded', () => {\n        domIsLoaded = true;\n    });\n    await initLANG();\n\n    function onProjectLoaded(project: IKlProject, projectStore: ProjectStore) {\n        if (klApp) {\n            throw 'onKlProjectObjLoaded called more than once';\n        }\n        let loadingScreenEl = document.getElementById(\"loading-screen\");\n        try {\n            // in case an extension screwed with the page\n            loadingScreenEl.parentNode.removeChild(loadingScreenEl);\n        } catch(e) {}\n\n        const saveReminder = new KL.SaveReminder(klHistory, true, true);\n        klApp = new KlApp(\n            project,\n            {\n                saveReminder,\n                projectStore,\n            }\n        );\n        saveReminder.init();\n        if (project) {\n            setTimeout(() => {\n                klApp.out(LANG('file-storage-restored'));\n            }, 100);\n        }\n\n        document.body.appendChild(klApp.getEl());\n    }\n\n    async function onDomLoaded() {\n        BB.removeEventListener(window, 'DOMContentLoaded', onDomLoaded);\n        let projectStore = new KL.ProjectStore();\n        let project: IKlProject = null;\n        try {\n            const readResult = await projectStore.read();\n            if (readResult) {\n                project = readResult.project;\n            }\n        } catch(e) {\n            let message;\n            if (e.message === 'db-error') {\n                message = 'Failed to access Browser Storage';\n            } else if (e.message === 'format-error') {\n                message = 'Failed to restore from Browser Storage';\n            }\n            if (message) {\n                setTimeout(function() {\n                    klApp && klApp.out(message);\n                    throw new Error('Initial browser storage error, ' + e);\n                }, 100);\n            }\n        }\n        onProjectLoaded(project, projectStore);\n    }\n    if (domIsLoaded) {\n        onDomLoaded();\n    } else {\n        BB.addEventListener(window, 'DOMContentLoaded', onDomLoaded);\n    }\n})();\n\n"],"names":["$1a05858528f80b13$export$6503ec6e8aabbaf","$1a05858528f80b13$export$f7ad0328861e2f03","$1a05858528f80b13$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","target","property","decorators","descriptor","context","desc1","forEach","key","enumerable","configurable","initializer","writable","slice","reverse","reduce","desc","decorator","value","call","undefined","arr","Array","isArray","arr2","self","ReferenceError","gen","front","back","resume","arg1","result","wrappedAwait","$dEdf1","default","Promise","resolve","wrapped","then","arg","settle","done","err","type","reject","next","this","_invoke","request","return","Symbol","asyncIterator","$e96f94db4e349283$export$2e2bcd8739ae039","prototype","throw","inner","awaitWrap","iter","waiting","pump","iterator","iterable","method","TypeError","$134e286a10837b58$var$asyncGeneratorStep","_next","_throw","info","error","fn","args","arguments","apply","instance","Constructor","name","receiver","privateMap","has","get","privateKey","hasOwnProperty","privateSet","classConstructor","$2367f0eff175011b$var$isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","e","$2367f0eff175011b$var$construct","Parent1","args1","Class1","Parent","Class","a","push","Function","bind","_setPrototypeOf","$67a1423a9eec0000$var$_defineProperties","props","defineProperty","protoProps","staticProps","factory","superClass","F","elements","proto","r","O","kind","element","placement","$c4d9bbfea87d6dab$var$_defineClassElement","$c4d9bbfea87d6dab$var$_initializeInstanceElements","decorated","newElements","finishers","placements","static","own","$c4d9bbfea87d6dab$var$_addElementPlacement","$c4d9bbfea87d6dab$var$_hasDecorators","elementFinishersExtras","extras","splice","indexOf","elementObject","$c4d9bbfea87d6dab$var$_fromElementDescriptor","elementFinisherExtras","$c4d9bbfea87d6dab$var$_toElementFinisherExtras","finisher","newExtras","j","$c4d9bbfea87d6dab$var$_decorateElement","obj","$c4d9bbfea87d6dab$var$_fromClassDescriptor","elementsAndFinisher","$c4d9bbfea87d6dab$var$_toClassDescriptor","k","$c4d9bbfea87d6dab$var$_decorateConstructor","$c4d9bbfea87d6dab$var$_decorateClass","isSameElement","other","other1","find","$c4d9bbfea87d6dab$var$_isDataDescriptor","$c4d9bbfea87d6dab$var$_coalesceGetterSetter","$c4d9bbfea87d6dab$var$_coalesceClassElements","d","map","$c4d9bbfea87d6dab$var$_createElementDescriptor","constructor","newConstructor","$c4d9bbfea87d6dab$var$_runClassFinishers","def","$hcP60","_typeof","set","silent","toStringTag","$c4d9bbfea87d6dab$var$_toElementDescriptors","elementObjects","$6EAw4","$c4d9bbfea87d6dab$var$_toElementDescriptor","$c4d9bbfea87d6dab$var$_disallowProperty","String","assign","$c4d9bbfea87d6dab$var$_optionalCallableProperty","objectType","$9QPBY","$9TcPW","$emdgA","from","$fk4ZW","$gdFSe","input","hint","prim","toPrimitive","res","Number","defaults","getOwnPropertyNames","getOwnPropertyDescriptor","descs","getOwnPropertySymbols","objectSymbols","sym","$4cd8004aa6a90ea2$var$extends_","source","$6fe0439e8d4e8f34$var$get","target1","property1","receiver1","base","$aBJPM","reciever","object","$kksNc","$eccc0282e23e6092$var$getPrototypeOf","o1","setPrototypeOf","getPrototypeOf","o","__proto__","subClass","create","$kJxmx","$f181e3b9426088a2$var$setPrototypeOf","p1","p","left","right","hasInstance","__esModule","newObj","_arr","_n","_d","_e","_s","_i","_step","_iterator","$8992d1d11f477cf6$var$REACT_ELEMENT_TYPE","children","for","defaultProps","childrenLength","propName","childArray","$$typeof","ref","_owner","innerThis","boundThis","ownKeys","concat","filter","$iXkAt","excluded","$gsjeZ","sourceSymbolKeys","propertyIsEnumerable","sourceKeys","$dtpWT","$9cdd068710165cb8$var$set","value1","isStrict","it","$2tM2P","strings","raw","freeze","defineProperties","$93uWT","$ngiRg","$k2zz2","$ffa75c4d34ca036d$var$wrapNativeSuper","_cache","Map","$laEC7","Wrapper","$32sR3","Derived","hasNativeReflectConstruct","$bkLps","Super","NewTarget","$g3BpA","Boolean","valueOf","$affee43d05afb4fc$export$bdfd709ae4826697","$affee43d05afb4fc$var$bundleURL","$affee43d05afb4fc$var$getBaseURL","url","replace","matches","stack","match","$affee43d05afb4fc$var$getBundleURL","module","exports","parcelRequire","getBundleURL","$5Y6Bl","bundle","existingScripts","document","getElementsByTagName","some","script","src","script1","createElement","async","charset","onerror","message","onload","remove","appendChild","$4587ad3ed31b7baa$var$cachedBundles","$4587ad3ed31b7baa$var$cachedPreloads","$4587ad3ed31b7baa$var$cachedPrefetches","$4587ad3ed31b7baa$var$getCache","loader","cache","catch","register","JSON","parse","$8f367e7f519342ea$var$runtime","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","makeInvokeMethod","tryCatch","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","record","hasOwn","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","state","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","GenStateSuspendedYield","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","values","iteratorMethod","iteratorSymbol","isNaN","next1","Op","$Symbol","asyncIteratorSymbol","toStringTagSymbol","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","resultName","nextLoc","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","key1","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","$8f367e7f519342ea$exports","regeneratorRuntime","accidentalStrictMode","globalThis","$f4a66a6ea03eaec6$export$2d1720544b23b823","$4ed80f2f712c1a8e$var$check","Math","$4ed80f2f712c1a8e$exports","window","$parcel$global","$06c753390c78703d$exports","$50d4cabbd9f1d362$exports","exec","$0bcb25e8d831b514$exports","test","$57a3b7844b6c90ba$export$2d1720544b23b823","$7473205dfab1fa23$var$call","$7473205dfab1fa23$exports","$57a3b7844b6c90ba$var$$propertyIsEnumerable","$57a3b7844b6c90ba$var$getOwnPropertyDescriptor","$57a3b7844b6c90ba$var$NASHORN_BUG","V","$a80765dd457cc053$exports","bitmap","$1d7f59e44aff4a7a$var$FunctionPrototype","$1d7f59e44aff4a7a$var$bind","$1d7f59e44aff4a7a$var$call","$1d7f59e44aff4a7a$var$uncurryThis","$1d7f59e44aff4a7a$exports","$f9ce0419d22a9ab2$var$toString","$f9ce0419d22a9ab2$var$stringSlice","$f9ce0419d22a9ab2$exports","$7a1174e1fb228c6f$var$Object","$7a1174e1fb228c6f$var$split","split","$7a1174e1fb228c6f$exports","$000a71535b8a0314$var$TypeError","$000a71535b8a0314$exports","$cccf801386617e96$exports","$2b187a6255675468$exports","argument","$bcb9a358414adacd$exports","$b145ec9fce0e97f9$var$aFunction","$b145ec9fce0e97f9$exports","namespace","$8d8ccb64d164b989$exports","isPrototypeOf","$1f059bd9b057a231$exports","$d68816eb2fa7297b$var$match","$d68816eb2fa7297b$var$version","$d68816eb2fa7297b$var$process","process","$d68816eb2fa7297b$var$Deno","Deno","$d68816eb2fa7297b$var$versions","versions","version","$d68816eb2fa7297b$var$v8","v8","$d68816eb2fa7297b$exports","$098f7f96183100be$exports","symbol","$a3efe7b986a958b0$exports","$b124c0d396db18ae$var$Object","$b124c0d396db18ae$exports","$9ceb31273476e724$var$String","$9ceb31273476e724$exports","$fc30fa73bab9ad2c$var$TypeError","$fc30fa73bab9ad2c$exports","$2e1458f18fade40d$exports","P","func","$74e4662ec9137ae3$var$TypeError","$74e4662ec9137ae3$exports","pref","val","$8932100762f589f7$exports","$5455786d6561d0c9$var$defineProperty","$5455786d6561d0c9$exports","$bfd69a856f043d4f$var$SHARED","$bfd69a856f043d4f$var$store","$bfd69a856f043d4f$exports","$adfb05f1f6a119ce$exports","mode","copyright","license","$b0a8491bce44604f$var$Object","$b0a8491bce44604f$exports","$1436b3ae35d8e28e$var$hasOwnProperty","$1436b3ae35d8e28e$exports","$0adb5abdb2d94f92$var$id","$0adb5abdb2d94f92$var$postfix","random","$0adb5abdb2d94f92$var$toString","$0adb5abdb2d94f92$exports","$6731c29e73be8b43$var$WellKnownSymbolsStore","$6731c29e73be8b43$var$Symbol","$6731c29e73be8b43$var$symbolFor","$6731c29e73be8b43$var$createWellKnownSymbol","withoutSetter","$6731c29e73be8b43$exports","description","$acb6a29183ca6e75$var$TypeError","$acb6a29183ca6e75$var$TO_PRIMITIVE","$acb6a29183ca6e75$exports","exoticToPrim","$cbe248c753eaf28f$exports","$8fa89027f48a411a$var$document","$8fa89027f48a411a$var$EXISTS","$8fa89027f48a411a$exports","$eab0beb7b28b0948$exports","$89020c597992b0a8$export$2d1720544b23b823","$f4a66a6ea03eaec6$var$$getOwnPropertyDescriptor","$67b506bb9b622aa8$exports","$a59edb5b2fd2788a$var$String","$a59edb5b2fd2788a$var$TypeError","$a59edb5b2fd2788a$exports","$89020c597992b0a8$var$TypeError","$89020c597992b0a8$var$$defineProperty","$89020c597992b0a8$var$$getOwnPropertyDescriptor","$89020c597992b0a8$var$ENUMERABLE","$89020c597992b0a8$var$CONFIGURABLE","$89020c597992b0a8$var$WRITABLE","Attributes","current","$609dbe6b8736b92d$exports","$268c60e1efd01107$var$functionToString","inspectSource","$268c60e1efd01107$exports","$ba8d0aab92e243b6$var$WeakMap","WeakMap","$ba8d0aab92e243b6$exports","$5bb6f9496df13346$var$keys","$5bb6f9496df13346$exports","$01a80385cd0e2b4f$exports","$e7fd8d2701a52c10$var$set","$e7fd8d2701a52c10$var$get","$e7fd8d2701a52c10$var$has","$e7fd8d2701a52c10$var$OBJECT_ALREADY_INITIALIZED","$e7fd8d2701a52c10$var$TypeError","$e7fd8d2701a52c10$var$WeakMap","$e7fd8d2701a52c10$var$store","$e7fd8d2701a52c10$var$wmget","$e7fd8d2701a52c10$var$wmhas","$e7fd8d2701a52c10$var$wmset","metadata","facade","$e7fd8d2701a52c10$var$STATE","$e7fd8d2701a52c10$exports","enforce","getterFor","TYPE","$8e6a0786b4ae9728$var$FunctionPrototype","$8e6a0786b4ae9728$var$getDescriptor","$8e6a0786b4ae9728$var$EXISTS","$8e6a0786b4ae9728$exports","EXISTS","PROPER","CONFIGURABLE","$66a6b6a20211ca84$var$getInternalState","$66a6b6a20211ca84$var$enforceInternalState","$66a6b6a20211ca84$var$TEMPLATE","$66a6b6a20211ca84$exports","options","unsafe","simple","noTargetGet","$66a6b6a20211ca84$require$CONFIGURABLE_FUNCTION_NAME","join","$6c1b54106766ccdc$export$2d1720544b23b823","$2b1477a1a3486b52$var$ceil","ceil","$2b1477a1a3486b52$var$floor","floor","$2b1477a1a3486b52$exports","number","$642f3ce21d97ba11$var$max","max","$642f3ce21d97ba11$var$min","min","$642f3ce21d97ba11$exports","index","integer","$ea882b862bf27474$var$min","$ea882b862bf27474$exports","$6e7c09bb5305a5ce$exports","$fbdcaa2c8ce11a12$var$createMethod","IS_INCLUDES","$this","el","fromIndex","$fbdcaa2c8ce11a12$exports","includes","$0d85303cf0728b08$var$push","$0d85303cf0728b08$exports","names","$0d85303cf0728b08$require$indexOf","$81e41929279a1d56$export$2d1720544b23b823","$6c1b54106766ccdc$var$hiddenKeys","$cc0ffb9e611cc887$exports","$4ad849db11f07af0$var$concat","$4ad849db11f07af0$exports","$e4003a91a9a90b6c$exports","exceptions","$dc1f2810a56598f1$var$replacement","$dc1f2810a56598f1$var$isForced","feature","detection","$dc1f2810a56598f1$var$data","$dc1f2810a56598f1$var$normalize","$dc1f2810a56598f1$var$POLYFILL","$dc1f2810a56598f1$var$NATIVE","normalize","string","toLowerCase","data","NATIVE","POLYFILL","$dc1f2810a56598f1$exports","$0894edb6be15987f$exports","targetProperty","sourceProperty","TARGET","GLOBAL","global","STATIC","stat","$0894edb6be15987f$require$getOwnPropertyDescriptor","forced","$90193670beecd49b$var$FunctionPrototype","$90193670beecd49b$var$apply","$90193670beecd49b$var$call","$90193670beecd49b$exports","$c525979af5f65f11$exports","$f062d8d8626aa8c7$var$test","$f062d8d8626aa8c7$exports","$94928c40ef066db6$var$TO_STRING_TAG","$94928c40ef066db6$var$Object","$94928c40ef066db6$var$CORRECT_ARGUMENTS","$94928c40ef066db6$exports","tag","$94928c40ef066db6$var$tryGet","callee","$ae3d7814aa7be7fa$var$String","$ae3d7814aa7be7fa$exports","$e4ae7418ddbfa74e$export$2d1720544b23b823","$636e8622e66ab7fe$exports","Properties","$18514425c2e49863$exports","$08c4b1923d6666ef$var$activeXDocument","$687ca5bb09d467a5$export$2d1720544b23b823","$08c4b1923d6666ef$var$IE_PROTO","$08c4b1923d6666ef$var$EmptyConstructor","$08c4b1923d6666ef$var$scriptTag","content","$08c4b1923d6666ef$var$LT","$08c4b1923d6666ef$var$NullProtoObjectViaActiveX","activeXDocument","write","close","temp","parentWindow","$08c4b1923d6666ef$var$NullProtoObject","ActiveXObject","iframeDocument","iframe","domain","style","display","contentWindow","open","$08c4b1923d6666ef$exports","$71e8d85c79074398$exports","propertyKey","$80fb66adf7e0f99e$var$Array","$80fb66adf7e0f99e$var$max","$80fb66adf7e0f99e$exports","start","end","fin","n","$687ca5bb09d467a5$var$windowNames","$687ca5bb09d467a5$require$$getOwnPropertyNames","$687ca5bb09d467a5$var$getWindowNames","$85a2c45afa04bf4c$export$2d1720544b23b823","$0e961facf8eb9ee9$exports","$fc2ed93dea29d674$exports","$7f12ef32d76ce306$exports","NAME","$7f12ef32d76ce306$require$defineProperty","$7060b89199bc6626$var$TO_STRING_TAG","$7060b89199bc6626$exports","TAG","$7060b89199bc6626$require$defineProperty","$c14e3c307d6614b8$var$bind","$c14e3c307d6614b8$exports","that","$d9da836f9a560c1d$var$noop","$d9da836f9a560c1d$var$empty","$d9da836f9a560c1d$var$construct","$d9da836f9a560c1d$var$constructorRegExp","$d9da836f9a560c1d$var$exec","$d9da836f9a560c1d$var$INCORRECT_TO_STRING","$d9da836f9a560c1d$var$isConstructorModern","$d9da836f9a560c1d$var$isConstructorLegacy","$d9da836f9a560c1d$exports","called","$f21e58c4eb8182a8$var$SPECIES","$f21e58c4eb8182a8$var$Array","$f21e58c4eb8182a8$exports","originalArray","C","$768f0e335c006ba0$exports","$6d6d9e1ac7090127$var$push","$6d6d9e1ac7090127$var$createMethod","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_REJECT","NO_HOLES","callbackfn","specificCreate","boundFunction","$6d6d9e1ac7090127$exports","every","findIndex","filterReject","$946de144e151ce6f$var$HIDDEN","$946de144e151ce6f$var$SYMBOL","$946de144e151ce6f$var$TO_PRIMITIVE","$946de144e151ce6f$var$setInternalState","$946de144e151ce6f$var$getInternalState","$946de144e151ce6f$var$ObjectPrototype","$946de144e151ce6f$var$$Symbol","$946de144e151ce6f$var$SymbolPrototype","$946de144e151ce6f$var$TypeError","$946de144e151ce6f$var$QObject","QObject","$946de144e151ce6f$var$$stringify","$946de144e151ce6f$var$nativeGetOwnPropertyDescriptor","$946de144e151ce6f$var$nativeDefineProperty","$946de144e151ce6f$var$nativeGetOwnPropertyNames","$946de144e151ce6f$var$nativePropertyIsEnumerable","$946de144e151ce6f$var$push","$946de144e151ce6f$var$AllSymbols","$946de144e151ce6f$var$ObjectPrototypeSymbols","$946de144e151ce6f$var$StringToSymbolRegistry","$946de144e151ce6f$var$SymbolToStringRegistry","$946de144e151ce6f$var$WellKnownSymbolsStore","$946de144e151ce6f$var$USE_SETTER","findChild","$946de144e151ce6f$var$setSymbolDescriptor","ObjectPrototypeDescriptor","$946de144e151ce6f$var$wrap","$946de144e151ce6f$var$$defineProperty","$946de144e151ce6f$var$$defineProperties","properties","$946de144e151ce6f$var$$getOwnPropertySymbols","$946de144e151ce6f$var$$propertyIsEnumerable","$946de144e151ce6f$var$$getOwnPropertyDescriptor","$946de144e151ce6f$var$$getOwnPropertyNames","IS_OBJECT_PROTOTYPE","setter","keyFor","useSetter","useSimple","$946de144e151ce6f$var$FORCED_JSON_STRINGIFY","stringify","replacer","space","$replacer","$946de144e151ce6f$var$valueOf","$95058444ce44b672$var$NativeSymbol","$95058444ce44b672$var$SymbolPrototype","$95058444ce44b672$var$EmptyStringDescriptionStore","$95058444ce44b672$var$SymbolWrapper","$95058444ce44b672$var$NATIVE_SYMBOL","$95058444ce44b672$var$symbolToString","$95058444ce44b672$var$symbolValueOf","$95058444ce44b672$var$regexp","$95058444ce44b672$var$replace","$95058444ce44b672$var$stringSlice","$38dfc10b7d062b7d$var$SPECIES","$38dfc10b7d062b7d$exports","METHOD_NAME","array","foo","$06d708477fabbc3c$var$IS_CONCAT_SPREADABLE","$06d708477fabbc3c$var$MAX_SAFE_INTEGER","$06d708477fabbc3c$var$MAXIMUM_ALLOWED_INDEX_EXCEEDED","$06d708477fabbc3c$var$TypeError","$06d708477fabbc3c$var$IS_CONCAT_SPREADABLE_SUPPORT","$06d708477fabbc3c$var$SPECIES_SUPPORT","$06d708477fabbc3c$var$isConcatSpreadable","spreadable","len","E","A","$00ec15e2e443b0ba$var$min","$00ec15e2e443b0ba$exports","copyWithin","to","count","inc","$9938969e81eeb096$var$UNSCOPABLES","$9938969e81eeb096$var$ArrayPrototype","$9938969e81eeb096$exports","$4410bb353de8a353$exports","argumentsLength","endPos","fill","$de1f2425280a5550$var$HAS_SPECIES_SUPPORT","$de1f2425280a5550$require$$filter","$d33f22fb1838a81f$var$FIND","$d33f22fb1838a81f$var$SKIPS_HOLES","$d33f22fb1838a81f$require$$find","$3cfa9a6590676def$var$FIND_INDEX","$3cfa9a6590676def$var$SKIPS_HOLES","$3cfa9a6590676def$require$$findIndex","$2af3a71f27ab42a8$var$TypeError","$2af3a71f27ab42a8$var$flattenIntoArray","original","sourceLen","depth","mapper","thisArg","elementLen","targetIndex","sourceIndex","mapFn","$2af3a71f27ab42a8$exports","flat","depthArg","flatMap","$ae85675b2dc99238$exports","innerResult","innerError","$7401992dc0c2ec46$exports","ENTRIES","$91115a4ca8f21f1a$exports","$73e7ed092b9c800c$var$ITERATOR","$73e7ed092b9c800c$var$ArrayPrototype","$73e7ed092b9c800c$exports","$7bc40018221d6442$var$ITERATOR","$7bc40018221d6442$exports","$bb1ce10fd36d041e$var$TypeError","$bb1ce10fd36d041e$exports","usingIterator","$e333eda9c4fee069$var$Array","$e333eda9c4fee069$exports","arrayLike","IS_CONSTRUCTOR","mapfn","mapping","step","$a0c331ad1c26b999$var$ITERATOR","$a0c331ad1c26b999$var$SAFE_CLOSING","$a0c331ad1c26b999$var$called","$a0c331ad1c26b999$var$iteratorWithReturn","$42974291fdb8fe96$var$INCORRECT_ITERATION","$a0c331ad1c26b999$exports","SKIP_CLOSING","ITERATION_SUPPORT","$4c66802a9a219c77$require$$includes","$0497ec61256992a4$exports","$5bc31975d32d2345$var$un$IndexOf","$5bc31975d32d2345$var$NEGATIVE_ZERO","$5bc31975d32d2345$var$STRICT_METHOD","searchElement","$5bc31975d32d2345$require$$IndexOf","$ec3ad5f50e65c94c$exports","$afa50e7eae6435d2$var$IE_PROTO","$afa50e7eae6435d2$var$Object","$afa50e7eae6435d2$var$ObjectPrototype","$afa50e7eae6435d2$exports","$7c6d6a0dfcded862$var$IteratorPrototype","$7c6d6a0dfcded862$var$PrototypeOfArrayIteratorPrototype","$7c6d6a0dfcded862$var$arrayIterator","$7c6d6a0dfcded862$var$ITERATOR","$7c6d6a0dfcded862$var$BUGGY_SAFARI_ITERATORS","$7c6d6a0dfcded862$var$NEW_ITERATOR_PROTOTYPE","$7c6d6a0dfcded862$exports","BUGGY_SAFARI_ITERATORS","$882b874f0aebd4cd$var$returnThis","$882b874f0aebd4cd$exports","IteratorConstructor","ENUMERABLE_NEXT","TO_STRING_TAG","$882b874f0aebd4cd$require$IteratorPrototype","$d9c4b44ded233f44$var$String","$d9c4b44ded233f44$var$TypeError","$d9c4b44ded233f44$exports","$36d0645b22e7d994$exports","CORRECT_SETTER","$06c3c413d837e89a$var$PROPER_FUNCTION_NAME","$06c3c413d837e89a$var$CONFIGURABLE_FUNCTION_NAME","$06c3c413d837e89a$var$IteratorPrototype","$06c3c413d837e89a$var$BUGGY_SAFARI_ITERATORS","$06c3c413d837e89a$var$ITERATOR","$06c3c413d837e89a$var$KEYS","$06c3c413d837e89a$var$VALUES","$06c3c413d837e89a$var$ENTRIES","$06c3c413d837e89a$var$returnThis","$06c3c413d837e89a$exports","Iterable","DEFAULT","IS_SET","FORCED","CurrentIteratorPrototype","methods","KEY","getIterationMethod","KIND","defaultIterator","IterablePrototype","INCORRECT_VALUES_NAME","nativeIterator","anyNativeIterator","entries","$f56abe53ba5eb975$var$ARRAY_ITERATOR","$f56abe53ba5eb975$var$setInternalState","$f56abe53ba5eb975$var$getInternalState","$f56abe53ba5eb975$exports","iterated","$f56abe53ba5eb975$var$values","Arguments","$bc16be61500a9223$var$un$Join","$bc16be61500a9223$var$ES3_STRINGS","$bc16be61500a9223$var$STRICT_METHOD","separator","$d150e79cf147dfb5$var$min","$d150e79cf147dfb5$var$$lastIndexOf","lastIndexOf","$d150e79cf147dfb5$var$NEGATIVE_ZERO","$d150e79cf147dfb5$var$STRICT_METHOD","$d150e79cf147dfb5$exports","$a9cf0fb5298318c9$var$HAS_SPECIES_SUPPORT","$a9cf0fb5298318c9$require$$map","$afe503e80150048b$var$Array","$afe503e80150048b$var$ISNT_GENERIC","of","$77ace5066f55ab98$var$TypeError","$77ace5066f55ab98$var$createMethod","IS_RIGHT","memo","$77ace5066f55ab98$exports","$8af10066f85ae357$exports","$77f91bc8c728543f$var$STRICT_METHOD","$77f91bc8c728543f$require$$reduce","$8e76da0addb6c606$var$STRICT_METHOD","reduceRight","$8e76da0addb6c606$require$$reduceRight","$c69e6770946c52af$var$un$Reverse","$c69e6770946c52af$var$test","$ea74985d703c2784$var$HAS_SPECIES_SUPPORT","$ea74985d703c2784$var$SPECIES","$ea74985d703c2784$var$Array","$ea74985d703c2784$var$max","$8c7c294a48fbd5f0$var$floor","$8c7c294a48fbd5f0$var$mergeSort","comparefn","middle","$8c7c294a48fbd5f0$var$insertionSort","$8c7c294a48fbd5f0$var$merge","llength","rlength","lindex","rindex","$8c7c294a48fbd5f0$exports","$a6102f65caba9398$var$firefox","$a6102f65caba9398$exports","$c0092a1d5d1d815a$exports","$2bf5ff846ca490e5$var$webkit","$2bf5ff846ca490e5$exports","$6d981ef59a83a93b$var$test","$6d981ef59a83a93b$var$un$Sort","sort","$6d981ef59a83a93b$var$push","$6d981ef59a83a93b$var$FAILS_ON_UNDEFINED","$6d981ef59a83a93b$var$FAILS_ON_NULL","$6d981ef59a83a93b$var$STRICT_METHOD","$6d981ef59a83a93b$var$STABLE_SORT","code","chr","fromCharCode","v","b","itemsLength","items","arrayLength","x","y","$6d981ef59a83a93b$var$getSortCompare","$812ba325d699cdbe$var$SPECIES","$812ba325d699cdbe$exports","CONSTRUCTOR_NAME","$94e9d0a062f4242a$var$HAS_SPECIES_SUPPORT","$94e9d0a062f4242a$var$TypeError","$94e9d0a062f4242a$var$max","$94e9d0a062f4242a$var$min","$94e9d0a062f4242a$var$MAX_SAFE_INTEGER","$94e9d0a062f4242a$var$MAXIMUM_ALLOWED_LENGTH_EXCEEDED","deleteCount","insertCount","actualDeleteCount","actualStart","$55460c472fd26199$exports","ArrayBuffer","DataView","$bacbdddfe309eeea$exports","$fcea6295360a95aa$var$TypeError","$fcea6295360a95aa$exports","Prototype","$52924d0b004d36a8$var$RangeError","RangeError","$52924d0b004d36a8$exports","$372d6692f9dc6c25$var$Array","$372d6692f9dc6c25$var$abs","abs","$372d6692f9dc6c25$var$pow","pow","$372d6692f9dc6c25$var$floor","$372d6692f9dc6c25$var$log","log","$372d6692f9dc6c25$var$LN2","LN2","$372d6692f9dc6c25$exports","pack","mantissaLength","bytes","exponent","mantissa","c","buffer","exponentLength","eMax","eBias","rt","sign","Infinity","unpack","nBits","NaN","$c735f9db77db5a68$var$PROPER_FUNCTION_NAME","$c735f9db77db5a68$var$CONFIGURABLE_FUNCTION_NAME","$c735f9db77db5a68$var$getInternalState","$c735f9db77db5a68$var$setInternalState","$c735f9db77db5a68$var$ARRAY_BUFFER","$c735f9db77db5a68$var$DATA_VIEW","$c735f9db77db5a68$var$WRONG_INDEX","$c735f9db77db5a68$var$NativeArrayBuffer","$c735f9db77db5a68$var$$ArrayBuffer","$c735f9db77db5a68$var$ArrayBufferPrototype","$c735f9db77db5a68$var$$DataView","$c735f9db77db5a68$var$DataViewPrototype","$c735f9db77db5a68$var$ObjectPrototype","$c735f9db77db5a68$var$Array","$c735f9db77db5a68$var$RangeError","$c735f9db77db5a68$var$fill","$c735f9db77db5a68$var$reverse","$c735f9db77db5a68$var$packIEEE754","$c735f9db77db5a68$var$unpackIEEE754","$c735f9db77db5a68$var$packInt8","$c735f9db77db5a68$var$packInt16","$c735f9db77db5a68$var$packInt32","$c735f9db77db5a68$var$unpackInt32","$c735f9db77db5a68$var$packFloat32","$c735f9db77db5a68$var$packFloat64","$c735f9db77db5a68$var$addGetter","$c735f9db77db5a68$var$get","view","isLittleEndian","intIndex","store","byteLength","byteOffset","$c735f9db77db5a68$var$set","conversion","$c735f9db77db5a68$var$INCORRECT_ARRAY_BUFFER_NAME","$c735f9db77db5a68$var$key","$c735f9db77db5a68$var$keys","$c735f9db77db5a68$require$getOwnPropertyNames","$c735f9db77db5a68$var$j","$c735f9db77db5a68$var$testView","$c735f9db77db5a68$var$$setInt8","setInt8","getInt8","setUint8","bufferLength","offset","getUint8","getInt16","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","$aef8fd70a5e40999$var$ARRAY_BUFFER","$aef8fd70a5e40999$var$ArrayBuffer","$c735f9db77db5a68$exports","$aef8fd70a5e40999$var$NativeArrayBuffer","$2e6eab6702fa1b0e$var$TypeError","$2e6eab6702fa1b0e$exports","$34d276f1cc0e9c1f$var$SPECIES","$34d276f1cc0e9c1f$exports","defaultConstructor","S","$ca7e867aeefa82f6$var$ArrayBuffer","$ca7e867aeefa82f6$var$DataView","$ca7e867aeefa82f6$var$DataViewPrototype","$ca7e867aeefa82f6$var$un$ArrayBufferSlice","$ca7e867aeefa82f6$var$getUint8","$ca7e867aeefa82f6$var$setUint8","$ca7e867aeefa82f6$var$INCORRECT_SLICE","first","viewSource","viewTarget","$2edcd373d3dc5fd6$var$FORCED","toJSON","toISOString","pv","isFinite","$c8c0985652775684$var$TypeError","$c8c0985652775684$exports","$5e86d5cf2559ab75$var$TO_PRIMITIVE","$5e86d5cf2559ab75$var$DatePrototype","$6f7d5205848dd522$var$HAS_INSTANCE","$6f7d5205848dd522$var$FunctionPrototype","$bd587bdd09f5fb4c$var$FunctionPrototype","$bd587bdd09f5fb4c$var$functionToString","$bd587bdd09f5fb4c$var$nameRE","$bd587bdd09f5fb4c$var$regExpExec","$bd587bdd09f5fb4c$require$FUNCTION_NAME_EXISTS","$bd587bdd09f5fb4c$require$defineProperty","$645f797db73b66c7$exports","isExtensible","$ed519476a2f6c474$var$$isExtensible","$ed519476a2f6c474$var$FAILS_ON_PRIMITIVES","$ed519476a2f6c474$exports","$498ee23236477f74$exports","preventExtensions","$5377173f5423bfef$var$REQUIRED","$5377173f5423bfef$var$METADATA","$5377173f5423bfef$var$id","$5377173f5423bfef$var$setMetadata","objectID","weakData","$5377173f5423bfef$var$meta","$5377173f5423bfef$exports","enable","fastKey","getWeakData","onFreeze","$98ffc8a58644c09f$var$TypeError","$98ffc8a58644c09f$var$Result","stopped","$98ffc8a58644c09f$var$ResultPrototype","$98ffc8a58644c09f$exports","unboundFunction","iterFn","AS_ENTRIES","IS_ITERATOR","INTERRUPTED","condition","callFn","$3314090afe5ea243$exports","dummy","NewTargetPrototype","$4f7de51799ac0c02$exports","wrapper","common","IS_WEAK","ADDER","NativeConstructor","NativePrototype","exported","fixMethod","uncurriedNativeMethod","getConstructor","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","BUGGY_ZERO","$instance","clear","setStrong","$c52cbfa92a8c3afc$var$setInternalState","$c52cbfa92a8c3afc$var$internalStateGetterFor","$c52cbfa92a8c3afc$exports","last","size","getInternalState","previous","getEntry","$c52cbfa92a8c3afc$require$fastKey","removed","delete","add","$c52cbfa92a8c3afc$require$defineProperty","ITERATOR_NAME","getInternalCollectionState","getInternalIteratorState","init","$a2415beeb773b741$var$log","$a2415beeb773b741$exports","log1p","$de3580f95004286b$var$$acosh","acosh","$de3580f95004286b$var$log","$de3580f95004286b$var$sqrt","sqrt","$de3580f95004286b$var$LN2","$de3580f95004286b$var$FORCED","MAX_VALUE","$2ef2ab175d68371d$var$$asinh","asinh","$2ef2ab175d68371d$var$log","$2ef2ab175d68371d$var$sqrt","$2ef2ab175d68371d$var$asinh","$51de6475ea62667d$var$$atanh","atanh","$51de6475ea62667d$var$log","$b5831633a2c5d5ea$exports","$877700f786d3b071$var$abs","$877700f786d3b071$var$pow","cbrt","$4d5bac8103272b52$var$floor","$4d5bac8103272b52$var$log","$4d5bac8103272b52$var$LOG2E","LOG2E","clz32","$7fbbbd2218a8aa4f$var$$expm1","expm1","$7fbbbd2218a8aa4f$var$exp","exp","$7fbbbd2218a8aa4f$exports","$c557c2f9fd85eb3a$var$$cosh","cosh","$c557c2f9fd85eb3a$var$abs","$c557c2f9fd85eb3a$var$E","t","$f2b854d554808773$var$abs","$f2b854d554808773$var$pow","$f2b854d554808773$var$EPSILON","$f2b854d554808773$var$EPSILON32","$f2b854d554808773$var$MAX32","$f2b854d554808773$var$MIN32","$f2b854d554808773$exports","fround","$abs","$sign","$e0b4e047d893fcf8$var$$hypot","hypot","$e0b4e047d893fcf8$var$abs","$e0b4e047d893fcf8$var$sqrt","$e0b4e047d893fcf8$var$BUGGY","value2","div","sum","aLen","larg","$48b0e6bcf6649d46$var$$imul","imul","$48b0e6bcf6649d46$var$FORCED","UINT16","xn","yn","xl","yl","$5e028cd5a1d92290$var$log","$5e028cd5a1d92290$var$LOG10E","LOG10E","$5e028cd5a1d92290$exports","log10","$0d53237d08355bc5$var$log","$0d53237d08355bc5$var$LN2","log2","$9c130dae4f446bfc$var$abs","$9c130dae4f446bfc$var$exp","$9c130dae4f446bfc$var$E","$9c130dae4f446bfc$var$FORCED","sinh","$c49f9a2aa1cac773$var$exp","tanh","$5b6a67b5c1a51dc7$var$ceil","$5b6a67b5c1a51dc7$var$floor","trunc","$9e848e4f79470d5f$exports","$aba32e4d9dbd9a14$exports","$9304af073e986fbc$var$replace","$9304af073e986fbc$var$ltrim","RegExp","$9304af073e986fbc$var$rtrim","$9304af073e986fbc$var$whitespace","$9304af073e986fbc$var$createMethod","$9304af073e986fbc$exports","trim","$b06f634510db1b10$var$NUMBER","$b06f634510db1b10$var$NativeNumber","$b06f634510db1b10$var$NumberPrototype","$b06f634510db1b10$var$TypeError","$b06f634510db1b10$var$arraySlice","$b06f634510db1b10$var$charCodeAt","charCodeAt","$b06f634510db1b10$var$toNumeric","primValue","$b06f634510db1b10$var$toNumber","third","radix","maxCode","digits","$b06f634510db1b10$require$trim","parseInt","$b06f634510db1b10$var$key","$b06f634510db1b10$var$NumberWrapper","$b06f634510db1b10$var$keys","$b06f634510db1b10$require$getOwnPropertyNames","$b06f634510db1b10$var$j","$b06f634510db1b10$require$defineProperty","$b06f634510db1b10$require$getOwnPropertyDescriptor","EPSILON","$3720d9a264c3b676$var$globalIsFinite","$3720d9a264c3b676$exports","$a29d3ec5df192b8d$var$floor","$a29d3ec5df192b8d$exports","isInteger","$b05bbdede92fb15b$var$abs","isSafeInteger","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","$cacc9274dbcca3bc$var$charAt","$cacc9274dbcca3bc$var$n$ParseFloat","parseFloat","$cacc9274dbcca3bc$var$Symbol","$cacc9274dbcca3bc$var$ITERATOR","$cacc9274dbcca3bc$exports","trimmedString","$cacc9274dbcca3bc$require$trim","$73bd8fcb3027a7db$var$$parseInt","$73bd8fcb3027a7db$var$Symbol","$73bd8fcb3027a7db$var$ITERATOR","$73bd8fcb3027a7db$var$hex","$73bd8fcb3027a7db$var$exec","$73bd8fcb3027a7db$var$FORCED","$73bd8fcb3027a7db$exports","$73bd8fcb3027a7db$require$trim","$ed38f736006a189b$var$RangeError","$ed38f736006a189b$exports","str","$4e1f642ad95f55f9$var$RangeError","$4e1f642ad95f55f9$var$String","$4e1f642ad95f55f9$var$floor","$4e1f642ad95f55f9$var$repeat","$4e1f642ad95f55f9$var$stringSlice","$4e1f642ad95f55f9$var$un$ToFixed","toFixed","$4e1f642ad95f55f9$var$pow","acc","$4e1f642ad95f55f9$var$multiply","c2","$4e1f642ad95f55f9$var$divide","$4e1f642ad95f55f9$var$dataToString","s","$4e1f642ad95f55f9$var$FORCED","fractionDigits","z","fractDigits","x2","$4e1f642ad95f55f9$var$log","$fc768c9ef9e1deb0$var$$assign","$fc768c9ef9e1deb0$var$defineProperty","$fc768c9ef9e1deb0$var$concat","$fc768c9ef9e1deb0$exports","B","alphabet","T","$339029c4a4be43cb$exports","__defineSetter__","__defineGetter__","getter","$c7d0dd7c98cf6620$var$propertyIsEnumerable","$c7d0dd7c98cf6620$var$push","$c7d0dd7c98cf6620$var$createMethod","TO_ENTRIES","$c7d0dd7c98cf6620$exports","$f989467c0ff32b07$require$$entries","$ae1348ad95526311$var$$freeze","$ae1348ad95526311$var$FAILS_ON_PRIMITIVES","$ae1348ad95526311$require$onFreeze","fromEntries","$cc1eb17eb08c9bee$var$FAILS_ON_PRIMITIVES","$cc1eb17eb08c9bee$require$nativeGetOwnPropertyDescriptor","getOwnPropertyDescriptors","$47c621318e2f76c3$var$FAILS_ON_PRIMITIVES","$47c621318e2f76c3$require$getOwnPropertyNames","$20d34d0204b36b89$var$FAILS_ON_PRIMITIVES","$6a7bfc74821a827c$exports","is","$8286df4accdf48ed$var$$isFrozen","isFrozen","$8286df4accdf48ed$var$FAILS_ON_PRIMITIVES","$298641195c3c623c$var$$isSealed","isSealed","$298641195c3c623c$var$FAILS_ON_PRIMITIVES","$1360e8bb8cdec207$var$FAILS_ON_PRIMITIVES","__lookupGetter__","$924d18b281a9c424$require$getOwnPropertyDescriptor","__lookupSetter__","$42abce55f97ceab5$require$getOwnPropertyDescriptor","$267d03b316d70c8b$var$$preventExtensions","$267d03b316d70c8b$var$FAILS_ON_PRIMITIVES","$267d03b316d70c8b$require$onFreeze","$e28a496f96292dfa$var$$seal","seal","$e28a496f96292dfa$var$FAILS_ON_PRIMITIVES","$e28a496f96292dfa$require$onFreeze","$df144acaef3e7e04$exports","$71106bf8fefef8c0$require$$values","$9f86b5766c2be154$exports","$aaf07b8d58eb47c9$exports","$33e6d73a2ea24d6b$var$location","$33e6d73a2ea24d6b$var$defer","$33e6d73a2ea24d6b$var$channel","$33e6d73a2ea24d6b$var$port","$33e6d73a2ea24d6b$var$set","setImmediate","$33e6d73a2ea24d6b$var$clear","clearImmediate","$33e6d73a2ea24d6b$var$process","$33e6d73a2ea24d6b$var$Dispatch","Dispatch","$33e6d73a2ea24d6b$var$Function","$33e6d73a2ea24d6b$var$MessageChannel","MessageChannel","$33e6d73a2ea24d6b$var$String","$33e6d73a2ea24d6b$var$counter","$33e6d73a2ea24d6b$var$queue","$33e6d73a2ea24d6b$var$ONREADYSTATECHANGE","location","$33e6d73a2ea24d6b$var$run","$33e6d73a2ea24d6b$var$runner","$33e6d73a2ea24d6b$var$listener","event","$33e6d73a2ea24d6b$var$post","postMessage","protocol","host","nextTick","now","port2","port1","onmessage","addEventListener","importScripts","removeChild","setTimeout","$33e6d73a2ea24d6b$exports","$e9639bc276d04087$exports","Pebble","$e2dfa6269df5a725$exports","$90ba93803394c14b$var$flush","$90ba93803394c14b$var$head","$90ba93803394c14b$var$last","$90ba93803394c14b$var$notify","$90ba93803394c14b$var$toggle","$90ba93803394c14b$var$node","$90ba93803394c14b$var$promise","$90ba93803394c14b$var$then","$90ba93803394c14b$var$MutationObserver","MutationObserver","WebKitMutationObserver","$90ba93803394c14b$var$document","$90ba93803394c14b$var$process","$90ba93803394c14b$var$Promise","$90ba93803394c14b$var$queueMicrotaskDescriptor","$90ba93803394c14b$require$getOwnPropertyDescriptor","$90ba93803394c14b$var$queueMicrotask","parent","exit","enter","$90ba93803394c14b$require$macrotask","createTextNode","observe","characterData","$90ba93803394c14b$exports","task","$3289e331b59edf28$export$2d1720544b23b823","$3289e331b59edf28$var$PromiseCapability","promise","$$resolve","$$reject","$df5fe063d1949b0e$exports","promiseCapability","$2fd6edabd7771157$exports","console","$a748ca53af774126$exports","$8d0064273ae794d4$var$Queue","head","tail","item","$8d0064273ae794d4$exports","$3f4b81b1852662b9$exports","$f63b4deb68b5ca14$var$Internal","$f63b4deb68b5ca14$var$OwnPromiseCapability","$f63b4deb68b5ca14$var$PromiseWrapper","$f63b4deb68b5ca14$var$nativeThen","$f63b4deb68b5ca14$var$SPECIES","$f63b4deb68b5ca14$var$PROMISE","$f63b4deb68b5ca14$var$getInternalState","$f63b4deb68b5ca14$var$setInternalState","$f63b4deb68b5ca14$var$getInternalPromiseState","$f63b4deb68b5ca14$var$NativePromisePrototype","$f63b4deb68b5ca14$var$PromiseConstructor","$f63b4deb68b5ca14$var$PromisePrototype","$f63b4deb68b5ca14$var$TypeError","$f63b4deb68b5ca14$var$document","$f63b4deb68b5ca14$var$process","$f63b4deb68b5ca14$var$newPromiseCapability","$f63b4deb68b5ca14$var$newGenericPromiseCapability","$f63b4deb68b5ca14$var$DISPATCH_EVENT","createEvent","dispatchEvent","$f63b4deb68b5ca14$var$NATIVE_REJECTION_EVENT","PromiseRejectionEvent","$f63b4deb68b5ca14$var$UNHANDLED_REJECTION","$f63b4deb68b5ca14$var$SUBCLASSING","$f63b4deb68b5ca14$var$FORCED","PROMISE_CONSTRUCTOR_SOURCE","GLOBAL_CORE_JS_PROMISE","FakePromise","$f63b4deb68b5ca14$var$INCORRECT_ITERATION","all","$f63b4deb68b5ca14$var$isThenable","$f63b4deb68b5ca14$var$callReaction","reaction","exited","ok","handler","fail","rejection","$f63b4deb68b5ca14$var$onHandleUnhandled","$f63b4deb68b5ca14$var$notify","isReject","notified","reactions","$f63b4deb68b5ca14$var$onUnhandled","$f63b4deb68b5ca14$var$dispatchEvent","reason","initEvent","$f63b4deb68b5ca14$require$task","$f63b4deb68b5ca14$var$isUnhandled","emit","$f63b4deb68b5ca14$var$bind","unwrap","$f63b4deb68b5ca14$var$internalReject","$f63b4deb68b5ca14$var$internalResolve","executor","onFulfilled","onRejected","capability","$promiseResolve","counter","remaining","alreadyCalled","race","$044557d82d23c7b7$var$NON_GENERIC","real","finally","onFinally","isFunction","$044557d82d23c7b7$var$method","$0589925e5855a828$var$OPTIONAL_ARGUMENTS_LIST","thisArgument","argumentsList","$8913b2b3e886b877$var$Function","$8913b2b3e886b877$var$concat","$8913b2b3e886b877$var$join","$8913b2b3e886b877$var$factories","$8913b2b3e886b877$var$construct","argsLength","list","$8913b2b3e886b877$exports","partArgs","$d991cb3405c95f1e$var$nativeConstruct","$d991cb3405c95f1e$var$ObjectPrototype","$d991cb3405c95f1e$var$push","$d991cb3405c95f1e$var$NEW_TARGET_BUG","$d991cb3405c95f1e$var$ARGS_BUG","$d991cb3405c95f1e$var$FORCED","Target","newTarget","$args","$650c499cf32cc514$var$ERROR_INSTEAD_OF_FALSE","attributes","deleteProperty","$f6707b6d575f1de3$require$getOwnPropertyDescriptor","$9dcc6ae3ce1ec49a$exports","$a8ede88258171abd$var$get","objectPreventExtensions","$f3bd7d05059f3f8c$var$MS_EDGE_BUG","$f3bd7d05059f3f8c$var$set","existingDescriptor","ownDescriptor","$decbe61b88b1ca94$var$MATCH","$decbe61b88b1ca94$exports","isRegExp","$11b8adf0544c05a6$exports","ignoreCase","multiline","dotAll","unicode","sticky","$3e86d009365b1bcd$var$$RegExp","$3e86d009365b1bcd$var$UNSUPPORTED_Y","re","lastIndex","$3e86d009365b1bcd$var$MISSED_STICKY","$3e86d009365b1bcd$exports","BROKEN_CARET","MISSED_STICKY","UNSUPPORTED_Y","$d63ae31c41c02162$var$$RegExp","$d63ae31c41c02162$exports","flags","$0cb0c5148b1dfc95$var$$RegExp","$0cb0c5148b1dfc95$exports","groups","$1a64a42b0b7fff6e$var$MATCH","$1a64a42b0b7fff6e$var$NativeRegExp","$1a64a42b0b7fff6e$var$RegExpPrototype","$1a64a42b0b7fff6e$var$SyntaxError","SyntaxError","$1a64a42b0b7fff6e$var$getFlags","$1a64a42b0b7fff6e$var$exec","$1a64a42b0b7fff6e$var$charAt","$1a64a42b0b7fff6e$var$replace","$1a64a42b0b7fff6e$var$stringIndexOf","$1a64a42b0b7fff6e$var$stringSlice","$1a64a42b0b7fff6e$var$IS_NCG","$1a64a42b0b7fff6e$var$re1","$1a64a42b0b7fff6e$var$re2","$1a64a42b0b7fff6e$var$CORRECT_NEW","$1a64a42b0b7fff6e$var$MISSED_STICKY","$1a64a42b0b7fff6e$var$UNSUPPORTED_Y","$1a64a42b0b7fff6e$var$BASE_FORCED","$1a64a42b0b7fff6e$var$RegExpWrapper","pattern","rawFlags","handled","thisIsRegExp","patternIsRegExp","flagsAreUndefined","rawPattern","named","brackets","ncg","groupid","groupname","$1a64a42b0b7fff6e$var$handleNCG","$1a64a42b0b7fff6e$require$enforceInternalState","$1a64a42b0b7fff6e$var$handleDotAll","$1a64a42b0b7fff6e$var$proxy","$1a64a42b0b7fff6e$require$defineProperty","$1a64a42b0b7fff6e$var$keys","$1a64a42b0b7fff6e$require$getOwnPropertyNames","$1a64a42b0b7fff6e$var$index","re1","re2","$c1e04a8dd1201ac1$var$nativeReplace","$c1e04a8dd1201ac1$var$nativeExec","$c1e04a8dd1201ac1$var$patchedExec","$c1e04a8dd1201ac1$var$charAt","$c1e04a8dd1201ac1$var$indexOf","$c1e04a8dd1201ac1$var$replace","$c1e04a8dd1201ac1$var$stringSlice","$c1e04a8dd1201ac1$var$UPDATES_LAST_INDEX_WRONG","$c1e04a8dd1201ac1$var$UNSUPPORTED_Y","$c1e04a8dd1201ac1$var$NPCG_INCLUDED","reCopy","group","$c1e04a8dd1201ac1$require$getInternalState","charsAdded","strCopy","$c1e04a8dd1201ac1$exports","$4d9034aa0a7c78c5$var$RegExpPrototype","$e33b07dd25444a37$var$TO_STRING","$e33b07dd25444a37$var$RegExpPrototype","$e33b07dd25444a37$var$n$ToString","$e33b07dd25444a37$var$getFlags","$e33b07dd25444a37$var$NOT_GENERIC","$e33b07dd25444a37$var$INCORRECT_NAME","$e33b07dd25444a37$require$PROPER_FUNCTION_NAME","R","rf","$3bbd219b097bf803$var$charAt","$3bbd219b097bf803$var$charCodeAt","$3bbd219b097bf803$var$stringSlice","$3bbd219b097bf803$var$createMethod","CONVERT_TO_STRING","pos","second","position","$3bbd219b097bf803$exports","codeAt","codePointAt","$84c537d40dd85849$require$codeAt","$e14eb5a118a77d53$var$TypeError","$e14eb5a118a77d53$exports","$be3cb7bcec3f6005$var$MATCH","$be3cb7bcec3f6005$exports","regexp","error1","error2","$a321b1a461d318d9$var$un$EndsWith","endsWith","$a321b1a461d318d9$var$slice","$a321b1a461d318d9$var$min","$a321b1a461d318d9$var$CORRECT_IS_REGEXP_LOGIC","$a321b1a461d318d9$var$MDN_POLYFILL_BUG","$a321b1a461d318d9$require$getOwnPropertyDescriptor","searchString","endPosition","search","$5a8165a23fe280d7$var$RangeError","$5a8165a23fe280d7$var$fromCharCode","$5a8165a23fe280d7$var$$fromCodePoint","fromCodePoint","$5a8165a23fe280d7$var$join","$5a8165a23fe280d7$var$INCORRECT_LENGTH","$8bf07a5ea4f86bf8$var$stringIndexOf","$421d3bd28a93f302$var$STRING_ITERATOR","$421d3bd28a93f302$var$setInternalState","$421d3bd28a93f302$var$getInternalState","point","$421d3bd28a93f302$require$charAt","$0e6a768d17013739$var$SPECIES","$0e6a768d17013739$var$RegExpPrototype","$0e6a768d17013739$exports","SHAM","SYMBOL","DELEGATES_TO_SYMBOL","DELEGATES_TO_EXEC","execCalled","uncurriedNativeRegExpMethod","nativeMethod","arg2","forceStringMethod","$exec","$4d5d08f9313fe63c$exports","$4d5d08f9313fe63c$require$charAt","$1958a4db80fb0f43$var$TypeError","$1958a4db80fb0f43$exports","MATCH","nativeMatch","maybeCallNative","matcher","rx","fullUnicode","matchStr","$31ce6e790965ee6e$var$repeat","$31ce6e790965ee6e$var$stringSlice","$31ce6e790965ee6e$var$ceil","$31ce6e790965ee6e$var$createMethod","IS_END","maxLength","fillString","fillLen","stringFiller","intMaxLength","stringLength","fillStr","$31ce6e790965ee6e$exports","$261033c5c4779cad$exports","padEnd","$53960335dda7a9bf$require$$padEnd","padStart","$81ed00457f8ab940$require$$padStart","$8577e5a06e0ac04d$var$push","$8577e5a06e0ac04d$var$join","template","rawTemplate","literalSegments","repeat","$05842203b4d319b5$var$floor","$05842203b4d319b5$var$charAt","$05842203b4d319b5$var$replace","$05842203b4d319b5$var$stringSlice","$05842203b4d319b5$var$SUBSTITUTION_SYMBOLS","$05842203b4d319b5$var$SUBSTITUTION_SYMBOLS_NO_NAMED","$05842203b4d319b5$exports","matched","captures","namedCaptures","replacement","tailPos","m","symbols","ch","capture","f","$009f5df1198ba855$var$REPLACE","$009f5df1198ba855$var$max","$009f5df1198ba855$var$min","$009f5df1198ba855$var$concat","$009f5df1198ba855$var$push","$009f5df1198ba855$var$stringIndexOf","$009f5df1198ba855$var$stringSlice","$009f5df1198ba855$var$REPLACE_KEEPS_$0","$009f5df1198ba855$var$REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE","$009f5df1198ba855$var$REPLACE_SUPPORTS_NAMED_GROUPS","_","nativeReplace","UNSAFE_SUBSTITUTE","searchValue","replaceValue","functionalReplace","results","accumulatedResult","nextSourcePosition","replacerArgs","SEARCH","nativeSearch","searcher","previousLastIndex","$cba551393cb53eca$var$UNSUPPORTED_Y","$cba551393cb53eca$var$MAX_UINT32","$cba551393cb53eca$var$min","$cba551393cb53eca$var$$push","$cba551393cb53eca$var$exec","$cba551393cb53eca$var$push","$cba551393cb53eca$var$stringSlice","$cba551393cb53eca$var$SPLIT_WORKS_WITH_OVERWRITTEN_EXEC","originalExec","SPLIT","nativeSplit","internalSplit","limit","lim","lastLength","output","lastLastIndex","separatorCopy","splitter","unicodeMatching","q","$4872c160a86fd36b$var$un$StartsWith","startsWith","$4872c160a86fd36b$var$stringSlice","$4872c160a86fd36b$var$min","$4872c160a86fd36b$var$CORRECT_IS_REGEXP_LOGIC","$4872c160a86fd36b$var$MDN_POLYFILL_BUG","$4872c160a86fd36b$require$getOwnPropertyDescriptor","$a55a1999ac794209$exports","$a55a1999ac794209$require$PROPER_FUNCTION_NAME","$61e74fc345dbbdfb$require$$trim","$6f2ff22016a32dee$var$FORCED","$6f2ff22016a32dee$var$trimEnd","$6f2ff22016a32dee$require$$trimEnd","trimEnd","trimRight","$171362188355f50f$var$FORCED","$171362188355f50f$var$trimStart","$171362188355f50f$require$$trimStart","trimStart","trimLeft","$100225492babcc44$var$quot","$100225492babcc44$var$replace","$100225492babcc44$exports","attribute","$4f9a85d45a6af280$exports","anchor","big","blink","bold","fixed","fontcolor","color","fontsize","italics","link","small","strike","sub","sup","$fd46476516885c65$var$NAME","$fd46476516885c65$var$Constructor","$fd46476516885c65$var$Prototype","$fd46476516885c65$var$Int8Array","Int8Array","$fd46476516885c65$var$Int8ArrayPrototype","$fd46476516885c65$var$Uint8ClampedArray","Uint8ClampedArray","$fd46476516885c65$var$Uint8ClampedArrayPrototype","$fd46476516885c65$var$TypedArray","$fd46476516885c65$var$TypedArrayPrototype","$fd46476516885c65$var$ObjectPrototype","$fd46476516885c65$var$TypeError","$fd46476516885c65$var$TO_STRING_TAG","$fd46476516885c65$var$TYPED_ARRAY_TAG","$fd46476516885c65$var$TYPED_ARRAY_CONSTRUCTOR","$fd46476516885c65$var$NATIVE_ARRAY_BUFFER_VIEWS","opera","$fd46476516885c65$var$TYPED_ARRAY_TAG_REQUIRED","$fd46476516885c65$var$TypedArrayConstructorsList","Uint8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","$fd46476516885c65$var$BigIntArrayConstructorsList","BigInt64Array","BigUint64Array","$fd46476516885c65$var$isTypedArray","klass","$fd46476516885c65$exports","NATIVE_ARRAY_BUFFER_VIEWS","TYPED_ARRAY_CONSTRUCTOR","TYPED_ARRAY_TAG","aTypedArray","aTypedArrayConstructor","exportTypedArrayMethod","ARRAY","TypedArrayConstructor","exportTypedArrayStaticMethod","isView","isTypedArray","TypedArray","TypedArrayPrototype","$c081b040a237c76f$var$ArrayBuffer","$c081b040a237c76f$var$Int8Array","$c081b040a237c76f$exports","$c081b040a237c76f$require$NATIVE_ARRAY_BUFFER_VIEWS","$9f569b4629448553$var$RangeError","$9f569b4629448553$exports","$0f7c34f15c2bb5ce$var$RangeError","$0f7c34f15c2bb5ce$exports","BYTES","$5fd99fddcaec4112$exports","$5fd99fddcaec4112$require$aTypedArrayConstructor","$b7d334927398c843$var$getInternalState","$b7d334927398c843$var$setInternalState","$b7d334927398c843$var$nativeDefineProperty","$b7d334927398c843$var$nativeGetOwnPropertyDescriptor","$b7d334927398c843$var$round","round","$b7d334927398c843$var$RangeError","$b7d334927398c843$var$ArrayBuffer","$b7d334927398c843$var$ArrayBufferPrototype","$b7d334927398c843$var$DataView","$b7d334927398c843$var$NATIVE_ARRAY_BUFFER_VIEWS","$b7d334927398c843$var$TYPED_ARRAY_CONSTRUCTOR","$b7d334927398c843$var$TYPED_ARRAY_TAG","$b7d334927398c843$var$TypedArray","$b7d334927398c843$var$TypedArrayPrototype","$b7d334927398c843$var$aTypedArrayConstructor","$b7d334927398c843$var$isTypedArray","$b7d334927398c843$var$BYTES_PER_ELEMENT","$b7d334927398c843$var$WRONG_LENGTH","$b7d334927398c843$var$fromList","$b7d334927398c843$var$addGetter","$b7d334927398c843$var$isArrayBuffer","$b7d334927398c843$var$isTypedArrayIndex","$b7d334927398c843$var$wrappedGetOwnPropertyDescriptor","$b7d334927398c843$var$wrappedDefineProperty","$b7d334927398c843$exports","CLAMPED","GETTER","SETTER","NativeTypedArrayConstructor","TypedArrayConstructorPrototype","addElement","typedArrayOffset","$length","$len","$b631bbe003371657$var$u$ArrayCopyWithin","$b631bbe003371657$var$aTypedArray","$b631bbe003371657$var$exportTypedArrayMethod","$d69ecf634a10a535$var$aTypedArray","$d69ecf634a10a535$var$exportTypedArrayMethod","$d69ecf634a10a535$require$$every","$4ec5af8a77aa31ac$var$aTypedArray","$4ec5af8a77aa31ac$var$exportTypedArrayMethod","$d55eaa564eb90bae$exports","$6a4688aced6685cb$var$TYPED_ARRAY_CONSTRUCTOR","$6a4688aced6685cb$var$aTypedArrayConstructor","$6a4688aced6685cb$exports","$5c9467a97a67398b$exports","$3586d39acc2774dd$var$aTypedArray","$3586d39acc2774dd$var$exportTypedArrayMethod","$3586d39acc2774dd$require$$filter","$79db93bd5fca1ce7$var$aTypedArray","$79db93bd5fca1ce7$var$exportTypedArrayMethod","predicate","$79db93bd5fca1ce7$require$$find","$59b8d2c114df5a4e$var$aTypedArray","$59b8d2c114df5a4e$var$exportTypedArrayMethod","$59b8d2c114df5a4e$require$$findIndex","$97423b5d490b4446$var$aTypedArray","$97423b5d490b4446$var$exportTypedArrayMethod","$6a83ddf03671ed91$var$aTypedArray","$6a83ddf03671ed91$var$exportTypedArrayMethod","$6a83ddf03671ed91$require$$includes","$15ed4ef7ba5f52a2$var$aTypedArray","$15ed4ef7ba5f52a2$var$exportTypedArrayMethod","$15ed4ef7ba5f52a2$require$$indexOf","$fc479e6228c9e0bf$var$ITERATOR","$fc479e6228c9e0bf$var$Uint8Array","$fc479e6228c9e0bf$var$arrayValues","$fc479e6228c9e0bf$var$arrayKeys","$fc479e6228c9e0bf$var$arrayEntries","$fc479e6228c9e0bf$var$aTypedArray","$fc479e6228c9e0bf$var$exportTypedArrayMethod","$fc479e6228c9e0bf$var$TypedArrayPrototype","$fc479e6228c9e0bf$var$GENERIC","$fc479e6228c9e0bf$var$ITERATOR_IS_VALUES","$fc479e6228c9e0bf$var$typedArrayValues","$046afbce50198ca1$var$aTypedArray","$046afbce50198ca1$var$exportTypedArrayMethod","$046afbce50198ca1$var$$join","$f68531cb13917c81$var$aTypedArray","$f68531cb13917c81$var$exportTypedArrayMethod","$937a5b0c74fb830c$var$aTypedArray","$937a5b0c74fb830c$var$exportTypedArrayMethod","$937a5b0c74fb830c$require$$map","$c32e06b56e4a41ef$var$aTypedArrayConstructor","$c32e06b56e4a41ef$var$exportTypedArrayStaticMethod","$ec25c78e10e68660$var$aTypedArray","$ec25c78e10e68660$var$exportTypedArrayMethod","$ec25c78e10e68660$require$$reduce","$7cac9044c9527222$var$aTypedArray","$7cac9044c9527222$var$exportTypedArrayMethod","$7cac9044c9527222$require$$reduceRight","$ead7a01b48e39503$var$aTypedArray","$ead7a01b48e39503$var$exportTypedArrayMethod","$ead7a01b48e39503$var$floor","$e0a5c5b8271df7c6$var$RangeError","$e0a5c5b8271df7c6$var$Int8Array","$e0a5c5b8271df7c6$var$Int8ArrayPrototype","$e0a5c5b8271df7c6$var$$set","$e0a5c5b8271df7c6$var$aTypedArray","$e0a5c5b8271df7c6$var$exportTypedArrayMethod","$e0a5c5b8271df7c6$var$WORKS_WITH_OBJECTS_AND_GEERIC_ON_TYPED_ARRAYS","$e0a5c5b8271df7c6$var$TO_OBJECT_BUG","$c6c88b1d5fcf56c4$var$aTypedArray","$c6c88b1d5fcf56c4$var$exportTypedArrayMethod","$3f60740c905767a3$var$aTypedArray","$3f60740c905767a3$var$exportTypedArrayMethod","$3f60740c905767a3$require$$some","$5c101bffda9b4dc5$var$Array","$5c101bffda9b4dc5$var$aTypedArray","$5c101bffda9b4dc5$var$exportTypedArrayMethod","$5c101bffda9b4dc5$var$Uint16Array","$5c101bffda9b4dc5$var$un$Sort","$5c101bffda9b4dc5$var$ACCEPT_INCORRECT_ARGUMENTS","$5c101bffda9b4dc5$var$STABLE_SORT","mod","expected","$5c101bffda9b4dc5$var$getSortCompare","$54a89f2dea9e9012$var$aTypedArray","$54a89f2dea9e9012$var$exportTypedArrayMethod","begin","beginIndex","BYTES_PER_ELEMENT","$88d44de1a6a90a41$var$Int8Array","$88d44de1a6a90a41$var$aTypedArray","$88d44de1a6a90a41$var$exportTypedArrayMethod","$88d44de1a6a90a41$var$$toLocaleString","toLocaleString","$88d44de1a6a90a41$var$TO_LOCALE_STRING_BUG","$e88adbad4d614fed$var$Uint8Array","$e88adbad4d614fed$var$Uint8ArrayPrototype","$e88adbad4d614fed$var$arrayToString","$e88adbad4d614fed$var$join","$e88adbad4d614fed$var$IS_NOT_ARRAY_METHOD","$fc95f796e98c0c9a$var$setInternalState","$fc95f796e98c0c9a$var$internalStateGetterFor","$fc95f796e98c0c9a$var$find","$fc95f796e98c0c9a$var$findIndex","$fc95f796e98c0c9a$var$splice","$fc95f796e98c0c9a$var$id","$fc95f796e98c0c9a$var$uncaughtFrozenStore","frozen","$fc95f796e98c0c9a$var$UncaughtFrozenStore","$fc95f796e98c0c9a$var$findUncaughtFrozen","$fc95f796e98c0c9a$exports","$fc95f796e98c0c9a$require$getWeakData","$0af78d12490b7b6f$var$InternalWeakMap","$0af78d12490b7b6f$var$IS_IE11","$0af78d12490b7b6f$var$wrapper","$0af78d12490b7b6f$var$$WeakMap","$0af78d12490b7b6f$var$WeakMapPrototype","$0af78d12490b7b6f$var$nativeDelete","$0af78d12490b7b6f$var$nativeHas","$0af78d12490b7b6f$var$nativeGet","$0af78d12490b7b6f$var$nativeSet","$0af78d12490b7b6f$require$enforceInternalState","$578cd93057827280$var$replace","$578cd93057827280$var$TEST","$578cd93057827280$var$V8_OR_CHAKRA_STACK_ENTRY","$578cd93057827280$var$IS_V8_OR_CHAKRA_STACK","$578cd93057827280$exports","dropEntries","$b8e91adf3836de55$exports","cause","$f592516429f8f3d6$exports","$default","$0ef5e03c7cad034c$exports","$983ff28d45588730$var$TO_STRING_TAG","$983ff28d45588730$var$Error","$983ff28d45588730$var$push","$983ff28d45588730$var$$AggregateError","errors","isInstance","$983ff28d45588730$var$AggregateErrorPrototype","errorsArray","AggregateError","$61e681497820a0b0$var$Object","$61e681497820a0b0$var$TypeError","$61e681497820a0b0$var$Map","$61e681497820a0b0$var$WeakMap","$61e681497820a0b0$var$Node","primitives","objectsByIndex","IS_OBJECT","$61e681497820a0b0$var$root","$61e681497820a0b0$exports","active","$15b9214f17cc4215$var$Object","$15b9214f17cc4215$var$initializer","compositeKey","compositeSymbol","$4498d592c47cdcee$exports","wasDeleted","collection","remover","allDeleted","deleteAll","$585a377732af8825$exports","newMap","findKey","$d9101a8b8952cf02$var$push","$d9101a8b8952cf02$exports","nextItem","$266b05ec1b53f26d$var$push","groupBy","keyDerivative","derivedKey","$dda5c793d1780b28$exports","keyBy","keyOf","mapKeys","mapValues","merge","$c17ca1e3d5b60204$exports","$0cb343ee31a7f56b$var$TypeError","noInitial","accumulator","$58d9b99d231b61f5$var$TypeError","update","callback","isPresentInMap","$99469c90a1670338$var$min","$99469c90a1670338$var$max","clamp","lower","upper","DEG_PER_RAD","PI","$7afc466313ad437e$var$RAD_PER_DEG","degrees","radians","$7aaf4e92c2bb9e26$exports","scale","inLow","inHigh","outLow","outHigh","nx","nInLow","nInHigh","nOutLow","nOutHigh","fscale","iaddh","x0","x1","y0","y1","$x0","$y0","imulh","u","$u","$v","u0","v0","u1","v1","isubh","RAD_PER_DEG","$8203115ff05fcb06$var$DEG_PER_RAD","$83af51d30afa2190$var$SEEDED_RANDOM","$83af51d30afa2190$var$SEEDED_RANDOM_GENERATOR","$83af51d30afa2190$var$setInternalState","$83af51d30afa2190$var$getInternalState","$83af51d30afa2190$var$TypeError","$83af51d30afa2190$var$$SeededRandomGenerator","seed","seededPRNG","signbit","umulh","$2ad16c82d7e5bdda$var$INVALID_NUMBER_REPRESENTATION","$2ad16c82d7e5bdda$var$RangeError","$2ad16c82d7e5bdda$var$SyntaxError","$2ad16c82d7e5bdda$var$TypeError","$2ad16c82d7e5bdda$var$valid","$2ad16c82d7e5bdda$var$charAt","$2ad16c82d7e5bdda$var$exec","$2ad16c82d7e5bdda$var$numberToString","$2ad16c82d7e5bdda$var$stringSlice","fromString","mathNum","$125e49295718c6c9$var$$$OBSERVABLE","$125e49295718c6c9$var$OBSERVABLE","$125e49295718c6c9$var$SUBSCRIPTION","$125e49295718c6c9$var$SUBSCRIPTION_OBSERVER","$125e49295718c6c9$var$getterFor","$125e49295718c6c9$var$setInternalState","$125e49295718c6c9$var$getObservableInternalState","$125e49295718c6c9$var$getSubscriptionInternalState","$125e49295718c6c9$var$getSubscriptionObserverInternalState","$125e49295718c6c9$var$Array","$125e49295718c6c9$var$SubscriptionState","observer","cleanup","subscriptionObserver","clean","subscription","closed","isClosed","$125e49295718c6c9$var$Subscription","subscriber","subscriptionState","$125e49295718c6c9$var$SubscriptionObserver","unsubscribe","$125e49295718c6c9$require$defineProperty","nextMethod","errorMethod","completeMethod","$125e49295718c6c9$var$$Observable","$125e49295718c6c9$var$ObservablePrototype","subscribe","observableMethod","observable","Observable","allSettled","promiseResolve","status","$e2179bcb26acbb4b$var$PROMISE_ANY_ERROR","any","alreadyResolved","alreadyRejected","try","$7d68f4e7e4c4b782$var$Map","$7d68f4e7e4c4b782$var$WeakMap","$7d68f4e7e4c4b782$var$push","$7d68f4e7e4c4b782$var$metadata","$7d68f4e7e4c4b782$var$store","$7d68f4e7e4c4b782$var$getOrCreateMetadataMap","targetKey","targetMetadata","keyMetadata","$6ec782fcb928f430$var$toMetadataKey","$7d68f4e7e4c4b782$exports","getMap","MetadataKey","metadataMap","MetadataValue","toKey","$6ec782fcb928f430$var$ordinaryDefineOwnMetadata","defineMetadata","metadataKey","metadataValue","$9af708e71367b103$var$toMetadataKey","$9af708e71367b103$var$getOrCreateMetadataMap","$9af708e71367b103$var$store","deleteMetadata","$f1e6afa3d172152e$var$ordinaryHasOwnMetadata","$f1e6afa3d172152e$var$ordinaryGetOwnMetadata","$f1e6afa3d172152e$var$toMetadataKey","$f1e6afa3d172152e$var$ordinaryGetMetadata","getMetadata","$579ba129125d1fa5$var$Map","$579ba129125d1fa5$var$MapPrototype","$579ba129125d1fa5$var$mapForEach","$579ba129125d1fa5$var$mapHas","$579ba129125d1fa5$var$mapSet","$579ba129125d1fa5$var$push","$579ba129125d1fa5$exports","resolver","resolverFunction","$ff72e5bc2a0c8764$var$arrayUniqueBy","$ff72e5bc2a0c8764$var$concat","$ff72e5bc2a0c8764$var$ordinaryOwnMetadataKeys","$ff72e5bc2a0c8764$var$toMetadataKey","$ff72e5bc2a0c8764$var$ordinaryMetadataKeys","oKeys","pKeys","getMetadataKeys","$711ec71648de990d$var$ordinaryGetOwnMetadata","$711ec71648de990d$var$toMetadataKey","getOwnMetadata","$1901db538b4d77f7$var$ordinaryOwnMetadataKeys","$1901db538b4d77f7$var$toMetadataKey","getOwnMetadataKeys","$f21eeb678da61698$var$ordinaryHasOwnMetadata","$f21eeb678da61698$var$toMetadataKey","$f21eeb678da61698$var$ordinaryHasMetadata","hasMetadata","$a93863ffbbf45637$var$ordinaryHasOwnMetadata","$a93863ffbbf45637$var$toMetadataKey","hasOwnMetadata","$8e7798a8c8e81c9d$var$toMetadataKey","$8e7798a8c8e81c9d$var$ordinaryDefineOwnMetadata","$bdfeb4f1ead7d68f$exports","adder","addAll","difference","newSet","$d9538d7ccc22bed3$exports","Set","intersection","hasCheck","isDisjointFrom","isSubsetOf","otherSet","isSupersetOf","$aed530c20c995f87$var$arrayJoin","$aed530c20c995f87$var$push","sep","$267b8f450c83d607$var$TypeError","symmetricDifference","union","$4553b2908c7726ba$var$FORCED","at","relativeIndex","$4553b2908c7726ba$require$charAt","$be139b4dd007a70a$var$codeAt","$be139b4dd007a70a$var$charAt","$be139b4dd007a70a$var$STRING_ITERATOR","$be139b4dd007a70a$var$setInternalState","$be139b4dd007a70a$var$getInternalState","$be139b4dd007a70a$var$$StringIterator","codePoint","codePoints","$494c22fb3259e451$var$MATCH_ALL","$494c22fb3259e451$var$REGEXP_STRING","$494c22fb3259e451$var$REGEXP_STRING_ITERATOR","$494c22fb3259e451$var$setInternalState","$494c22fb3259e451$var$getInternalState","$494c22fb3259e451$var$RegExpPrototype","$494c22fb3259e451$var$TypeError","$494c22fb3259e451$var$getFlags","$494c22fb3259e451$var$stringIndexOf","$494c22fb3259e451$var$un$MatchAll","matchAll","$494c22fb3259e451$var$WORKS_WITH_NON_GLOBAL_REGEX","$494c22fb3259e451$var$$RegExpStringIterator","$global","$494c22fb3259e451$var$$matchAll","flagsValue","$578275b064831efe$var$REPLACE","$578275b064831efe$var$RegExpPrototype","$578275b064831efe$var$TypeError","$578275b064831efe$var$getFlags","$578275b064831efe$var$indexOf","$578275b064831efe$var$stringSlice","$578275b064831efe$var$max","$578275b064831efe$var$stringIndexOf","replaceAll","searchLength","advanceBy","endOfLastMatch","$1d3c2c924bc226ab$exports","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","$79fc817da0f47b47$var$classList","classList","$79fc817da0f47b47$var$DOMTokenListPrototype","$79fc817da0f47b47$exports","$daa0fad1a5e71fc1$var$STRICT_METHOD","$daa0fad1a5e71fc1$exports","$daa0fad1a5e71fc1$require$$forEach","$ed4078936178e184$var$handlePrototype","CollectionPrototype","$ed4078936178e184$var$COLLECTION_NAME","$353bf2319d4355ad$var$ITERATOR","$353bf2319d4355ad$var$TO_STRING_TAG","$353bf2319d4355ad$var$ArrayValues","$353bf2319d4355ad$var$handlePrototype","COLLECTION_NAME","$353bf2319d4355ad$var$COLLECTION_NAME","$95ac9fbd823b97bf$var$FORCED","$aa0122136da199d1$var$process","queueMicrotask","$e7249ecef49e6e4f$var$ITERATOR","$e7249ecef49e6e4f$exports","URL","searchParams","pathname","href","URLSearchParams","username","hash","$b92f1140f6de596b$var$maxInt","$b92f1140f6de596b$var$regexNonASCII","$b92f1140f6de596b$var$regexSeparators","$b92f1140f6de596b$var$OVERFLOW_ERROR","$b92f1140f6de596b$var$RangeError","$b92f1140f6de596b$var$exec","$b92f1140f6de596b$var$floor","$b92f1140f6de596b$var$fromCharCode","$b92f1140f6de596b$var$charCodeAt","$b92f1140f6de596b$var$join","$b92f1140f6de596b$var$push","$b92f1140f6de596b$var$replace","$b92f1140f6de596b$var$split","$b92f1140f6de596b$var$toLowerCase","$b92f1140f6de596b$var$digitToBasic","digit","$b92f1140f6de596b$var$adapt","delta","numPoints","firstTime","$b92f1140f6de596b$var$baseMinusTMin","$b92f1140f6de596b$var$base","$b92f1140f6de596b$var$encode","extra","$b92f1140f6de596b$var$ucs2decode","currentValue","inputLength","bias","basicLength","handledCPCount","handledCPCountPlusOne","qMinusT","baseMinusT","$b92f1140f6de596b$exports","label","encoded","labels","$febce133319278e2$var$TypeError","$febce133319278e2$exports","passed","required","$ebdcd16dd431135f$var$ITERATOR","$ebdcd16dd431135f$var$URL_SEARCH_PARAMS","$ebdcd16dd431135f$var$URL_SEARCH_PARAMS_ITERATOR","$ebdcd16dd431135f$var$setInternalState","$ebdcd16dd431135f$var$getInternalParamsState","$ebdcd16dd431135f$var$getInternalIteratorState","$ebdcd16dd431135f$var$n$Fetch","$ebdcd16dd431135f$var$N$Request","$ebdcd16dd431135f$var$Headers","$ebdcd16dd431135f$var$RequestPrototype","$ebdcd16dd431135f$var$HeadersPrototype","$ebdcd16dd431135f$var$RegExp","$ebdcd16dd431135f$var$TypeError","$ebdcd16dd431135f$var$decodeURIComponent","decodeURIComponent","$ebdcd16dd431135f$var$encodeURIComponent","encodeURIComponent","$ebdcd16dd431135f$var$charAt","$ebdcd16dd431135f$var$join","$ebdcd16dd431135f$var$push","$ebdcd16dd431135f$var$replace","$ebdcd16dd431135f$var$shift","shift","$ebdcd16dd431135f$var$splice","$ebdcd16dd431135f$var$split","$ebdcd16dd431135f$var$stringSlice","$ebdcd16dd431135f$var$plus","$ebdcd16dd431135f$var$sequences","$ebdcd16dd431135f$var$percentSequence","$ebdcd16dd431135f$var$percentDecode","sequence","$ebdcd16dd431135f$var$deserialize","$ebdcd16dd431135f$var$find","$ebdcd16dd431135f$var$replacements","$ebdcd16dd431135f$var$replacer","$ebdcd16dd431135f$var$serialize","$ebdcd16dd431135f$var$URLSearchParamsIterator","params","$ebdcd16dd431135f$var$URLSearchParamsState","parseObject","parseQuery","bindURL","entryIterator","entryNext","query","serialize","updateURL","$ebdcd16dd431135f$var$URLSearchParamsConstructor","$ebdcd16dd431135f$var$URLSearchParamsPrototype","append","getAll","found","$ebdcd16dd431135f$var$headersHas","$ebdcd16dd431135f$var$headersSet","$ebdcd16dd431135f$var$wrapRequestOptions","headers","body","fetch","$ebdcd16dd431135f$var$RequestConstructor","Request","$ebdcd16dd431135f$exports","getState","$ca49c6c3f5b8ed45$var$EOF","$ca49c6c3f5b8ed45$var$setInternalState","$ca49c6c3f5b8ed45$var$getInternalURLState","$ca49c6c3f5b8ed45$var$URLSearchParams","$ca49c6c3f5b8ed45$var$getInternalSearchParamsState","$ca49c6c3f5b8ed45$var$NativeURL","$ca49c6c3f5b8ed45$var$TypeError","$ca49c6c3f5b8ed45$var$parseInt","$ca49c6c3f5b8ed45$var$floor","$ca49c6c3f5b8ed45$var$pow","$ca49c6c3f5b8ed45$var$charAt","$ca49c6c3f5b8ed45$var$exec","$ca49c6c3f5b8ed45$var$join","$ca49c6c3f5b8ed45$var$numberToString","$ca49c6c3f5b8ed45$var$pop","$ca49c6c3f5b8ed45$var$push","$ca49c6c3f5b8ed45$var$replace","$ca49c6c3f5b8ed45$var$shift","$ca49c6c3f5b8ed45$var$split","$ca49c6c3f5b8ed45$var$stringSlice","$ca49c6c3f5b8ed45$var$toLowerCase","$ca49c6c3f5b8ed45$var$unshift","unshift","$ca49c6c3f5b8ed45$var$INVALID_SCHEME","$ca49c6c3f5b8ed45$var$INVALID_HOST","$ca49c6c3f5b8ed45$var$INVALID_PORT","$ca49c6c3f5b8ed45$var$ALPHA","$ca49c6c3f5b8ed45$var$ALPHANUMERIC","$ca49c6c3f5b8ed45$var$DIGIT","$ca49c6c3f5b8ed45$var$HEX_START","$ca49c6c3f5b8ed45$var$OCT","$ca49c6c3f5b8ed45$var$DEC","$ca49c6c3f5b8ed45$var$HEX","$ca49c6c3f5b8ed45$var$FORBIDDEN_HOST_CODE_POINT","$ca49c6c3f5b8ed45$var$FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT","$ca49c6c3f5b8ed45$var$LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE","$ca49c6c3f5b8ed45$var$TAB_AND_NEW_LINE","$ca49c6c3f5b8ed45$var$serializeHost","compress","ignore0","ipv6","maxIndex","currStart","currLength","$ca49c6c3f5b8ed45$var$findLongestZeroSequence","$ca49c6c3f5b8ed45$var$C0ControlPercentEncodeSet","$ca49c6c3f5b8ed45$var$fragmentPercentEncodeSet","$ca49c6c3f5b8ed45$var$pathPercentEncodeSet","$ca49c6c3f5b8ed45$var$userinfoPercentEncodeSet","$ca49c6c3f5b8ed45$var$percentEncode","$ca49c6c3f5b8ed45$require$codeAt","$ca49c6c3f5b8ed45$var$specialSchemes","ftp","file","http","https","ws","wss","$ca49c6c3f5b8ed45$var$isWindowsDriveLetter","normalized","$ca49c6c3f5b8ed45$var$startsWithWindowsDriveLetter","$ca49c6c3f5b8ed45$var$isSingleDot","segment","$ca49c6c3f5b8ed45$var$SCHEME_START","$ca49c6c3f5b8ed45$var$SCHEME","$ca49c6c3f5b8ed45$var$NO_SCHEME","$ca49c6c3f5b8ed45$var$SPECIAL_RELATIVE_OR_AUTHORITY","$ca49c6c3f5b8ed45$var$PATH_OR_AUTHORITY","$ca49c6c3f5b8ed45$var$RELATIVE","$ca49c6c3f5b8ed45$var$RELATIVE_SLASH","$ca49c6c3f5b8ed45$var$SPECIAL_AUTHORITY_SLASHES","$ca49c6c3f5b8ed45$var$SPECIAL_AUTHORITY_IGNORE_SLASHES","$ca49c6c3f5b8ed45$var$AUTHORITY","$ca49c6c3f5b8ed45$var$HOST","$ca49c6c3f5b8ed45$var$HOSTNAME","$ca49c6c3f5b8ed45$var$PORT","$ca49c6c3f5b8ed45$var$FILE","$ca49c6c3f5b8ed45$var$FILE_SLASH","$ca49c6c3f5b8ed45$var$FILE_HOST","$ca49c6c3f5b8ed45$var$PATH_START","$ca49c6c3f5b8ed45$var$PATH","$ca49c6c3f5b8ed45$var$CANNOT_BE_A_BASE_URL_PATH","$ca49c6c3f5b8ed45$var$QUERY","$ca49c6c3f5b8ed45$var$FRAGMENT","$ca49c6c3f5b8ed45$var$URLState","isBase","baseState","failure","urlString","stateOverride","bufferCodePoints","pointer","seenAt","seenBracket","seenPasswordToken","scheme","password","port","path","fragment","cannotBeABaseURL","isSpecial","includesCredentials","encodedCodePoints","parseHost","shortenPath","numbersSeen","ipv4Piece","swaps","swap","address","pieceIndex","$ca49c6c3f5b8ed45$var$parseIPv6","partsLength","numbers","part","ipv4","parts","$ca49c6c3f5b8ed45$var$parseIPv4","cannotHaveUsernamePasswordPort","pathSize","setHref","getOrigin","$ca49c6c3f5b8ed45$var$URLConstructor","origin","getProtocol","setProtocol","getUsername","setUsername","getPassword","setPassword","getHost","setHost","getHostname","setHostname","hostname","getPort","setPort","getPathname","setPathname","getSearch","setSearch","getSearchParams","getHash","setHash","t1","$ca49c6c3f5b8ed45$var$URLPrototype","$ca49c6c3f5b8ed45$var$accessorDescriptor","$ca49c6c3f5b8ed45$require$defineProperties","$ca49c6c3f5b8ed45$var$nativeCreateObjectURL","createObjectURL","$ca49c6c3f5b8ed45$var$nativeRevokeObjectURL","revokeObjectURL","e1","createDocumentFragment","Node","Element","Document","DocumentFragment","scrollLeft","scrollTop","getItem","setItem","removeItem","$44dda2e48e48a872$export$cd3d1f114b139967","w","h","width","height","hasWebgl","visitor","$878b1f179a521546$export$b7d78993b74f766d","navigator","userAgent","$878b1f179a521546$export$4ec3bfbae69fbb50","Event","timeStamp","$878b1f179a521546$export$ebcc19037a7ab076","mouseEvent","MouseEvent","$878b1f179a521546$export$b7b64c480b083ae0","PointerEvent","$878b1f179a521546$export$9cbe517943afd6db","canvas","getContext","premultipliedAlpha","$878b1f179a521546$export$96cd70eaafd80100","chrome","gl","app","$878b1f179a521546$export$fe0a7220ab4eecad","top","offsetLeft","$cdd5ef6b176accd6$var$listenerFuncObj","$cdd5ef6b176accd6$export$3f65cefe8380dbea","DomEl","listener","$cdd5ef6b176accd6$export$8ff9f68337b520c0","removeEventListener","$2bd9b7b9bc92046d$export$dbf350e5966cf602","styleObj","keyStr","keyArr","alignContent","webkitUserSelect","$2bd9b7b9bc92046d$export$f81847884871263e","$2bd9b7b9bc92046d$export$533b26079ad0b4b","numerator","denominator","g","$74d1f29ad2137b2c$var$globalKey","emitDown","listenerArr","emitUp","keyDown","keyCode","keyToKeyStrObj","isDownObj","comboArr","codeIsDownObj","keyUp","oldComboStr","blur","eventArr","keyToKeyStrArr","i2","preventDefault","stopPropagation","keyStrToKeyObj","alt","ctrl","cmd","esc","backspace","sqbr_open","sqbr_close","plus","minus","up","down","home","i1","code1","keyListener","getIsDown","getCombo","$74d1f29ad2137b2c$export$f17908c5de22d32e","onDown","onUp","onBlur","keyStrArr","$9a5bdb07e7a7c42f$export$2c9e8a9632a706b2","$9a5bdb07e7a7c42f$export$6c4a311cc157c764","ax","ay","bx","by","$9a5bdb07e7a7c42f$export$627023b405ba5028","p2","atan2","$9a5bdb07e7a7c42f$export$c03a8450eabc2532","$9a5bdb07e7a7c42f$export$7d15b64cf5a3a4c4","num","$9a5bdb07e7a7c42f$export$bb628a54ab399bc9","deg","theta","cs","cos","sn","sin","pointerArr","pressureNormalizeAvgCount","pressureNormalizeAvgPressure","pressureNormalizeIsComplete","pressureNormalizeFactor","$893e90c2dcf687ac$var$WheelCleaner","endSequenceTimeout","deltaY","sequenceUnit","pageX","pageY","clientX","clientY","endSequence","toEmitDelta","knownUnitArr","sequenceLength","clearTimeout","deltaMode","absDelta","$893e90c2dcf687ac$export$9371bd96776f4e82","onTouchstart","onTouchmove","onTouchend","getDragObj","pointerId","dragObjArr","removeDragObj","removedDragObj","dragPointerIdArr","normalizePressure","pressure","correctPointerEvent","corrected","correctedObj","pointerType","movementX","movementY","timeStampOffset","buttons","button","coalescedArr","eventPreventDefault","eventStopPropagation","customPressure","coalescedEventArr","getCoalescedEvents","pointerObj","getPointer","lastPageX","lastPageY","addPointer","totalLastX","totalLastY","eventItem","createPointerOutEvent","typeStr","correctedEvent","custom","bounds","targetElement","getBoundingClientRect","relX","relY","dX","dY","time","coalescedItem","createTouchOutEvent","touchListItem","touchEvent","identifier","destroyDocumentListeners","onGlobalPointerMove","onGlobalPointerUp","onGlobalPointerLeave","onPointerEnter","isOverCounter","onEnterLeaveCallback","onPointerLeave","onPointermove","tempLastPointerType","lastPointerType","maxPointers","didSkip","outEvent","onPointerCallback","onPointerdown","dragObj","downPageX","downPageY","lastTimeStamp","setTouchTimeout","buttonsToStr","clearTouchTimeout","outEvent1","touchTimeout","fakeEvent","performance","onTouchTimeout","onPointer","onWheelCallback","onWheel","onEnterLeave","wheelCleaner","wheelEvent","isDestroyed","timing","navigationStart","fixScribble","touchArr","changedTouches","touchObj","isCoalesced","isOver","destroy","$12950380ec51f25d$export$649a211db9812745","continueChain","chainArr","chainIn","chainOut","setChainOut","$12950380ec51f25d$export$db3963a21c01d803","sequenceArr","timeoutObj","maxUntilSecondDown","success","eventQueueArr","lastSequenceItem","onDoubleTap","setupTimeout","timeoutStr","targetFunc","timeMS","diff","nowTime","minSilenceBeforeDurationMs","maxPressedDurationMs","maxPressedDistancePx","maxInbetweenDistancePx","maxUpToUpDurationMs","maxUntilSecondDownDurationMs","minSilenceAfterMs","allowedPointerTypeArr","allowedButtonArr","pointersDownIdArr","lastUpTime","isDown","isUp","processEvent","setAllowedPointerTypeArr","setAllowedButtonArr","$12950380ec51f25d$export$510622b8aed00381","firstDownTime","firstLastDownTimeout","tapTimeout","fingerArr","tempLastEventTime","lastEventTime","fingers","maxFirstLastFingerDownMs","downTime","maxTapMs","fingerObj","fingerObj1","i3","allAreUp","i4","onTap","$12950380ec51f25d$export$d62358ac2d82abb3","gestureObj1","doSwallow","secondFingerTimeout","touchPointerArr","isInProgress","continuePinch","beginPinch","otherPointerIdArr","downRelX","downRelY","untilSecondFingerDurationMs","i6","i7","endPinch","touchPointerObj","i5","firstFingerMaxDistancePx","gestureObj","pincherArr","angleRad","onPinch","actionObj","startDist","distance","startAngle","angle","$12950380ec51f25d$export$fe11e0afe623a677","eventCopy","$12950380ec51f25d$export$71ff2f51bf1f4062","pointers","downPointerId","ignorePointerIdArr","$12950380ec51f25d$export$d429e21f52463d17","downEvent","eventQueue","direction","shiftIsPressed","onDraw","pressure0","pressure1","i8","$12950380ec51f25d$export$91dcf4209534d21f","isDrawing","getIsDrawing","$12950380ec51f25d$export$c57e2ed65bcf4d6a","lastMixedInput","interval","timeout","smoothing","clearInterval","inputX","inputY","inputPressure","setInterval","setSmoothing","$3f0e2f35371c9852$export$754559b36e94ea2f","ctx","fillStyle","fillRect","$3f0e2f35371c9852$export$42af33c76b681867","size1","toDataURL","multiplyMatrixAndPoint","$e4df33b4b16105d5$export$5b12bf1653c0dd85","getIdentity","matrix","multiplyMatrices","matrixA","matrixB","row0","row1","row2","row3","result0","result1","result2","result3","createTranslationMatrix","createRotationMatrix","createScaleMatrix","$531c9f41f98b7ec0$export$ac4bca90992eed1","nor","dist","mul","dot","aArr","bArr","$77ae015f37ebe4f1$export$8b36a4a83269a640","segmentArr","_this","points","getAtDist","remainder","getLength","fac","$77ae015f37ebe4f1$export$80967b1eb9fd6eb4","xa","ya","y2","wx","sig","ddydx","getFirstX","getLastX","interpolate","klo","khi","findX","resolution","tempX","tempY","tempDist","$5e7aac2fa49b6b1f$export$d2edaecd208aed43","$5e7aac2fa49b6b1f$export$8f9ece5a47764b93","$5e7aac2fa49b6b1f$export$89d3f85304bf0767","$5e7aac2fa49b6b1f$export$fb7efcd2e153af6e","_RGBtoHSV","minVal","maxVal","del_R","del_G","del_B","_HSVtoRGB","var_h","var_i","var_1","var_2","var_3","var_r","var_g","var_b","_CMYKtoRGB","_RGBtoCMYK","toRGB","toHSV","toCMYK","toHexString","ha","hb","hc","toRgbStr","rgbObj","toRgbaStr","rgbaObj","hexToRGB","hexStr","preventFocus","$cfe3aa45a75894cc$export$6bd63bfceaafae0c","didFocusRelated","relatedTarget","focus","currentTarget","$cfe3aa45a75894cc$export$c3da0dad1b44eea9","setAttribute","$cfe3aa45a75894cc$var$els","$0d0e99c175410ac4$export$9860cd9e09e6f8ba","listeners","msg","$9e5fd8359d8b22f2$export$19fffca37ef3e106","localStorage","$05ec456c8871d48f$export$921068d8846a1559","eventUsesHighResTimeStamp","mouseEventHasMovement","hasPointerEvents","hasWebGl","getVisitor","isCssMinMaxSupported","canShareFiles","insertAfter","referenceNode","newNode","parentNode","insertBefore","nextSibling","loadImage","im","check","alert","css","setAttributes","attrObj","addClassName","classStr","classAttr","getAttribute","splitArr","removeClassName","els","fitInto","aw","ah","bw","bh","centerWithin","getDate","date","getFullYear","getMonth","getHours","getMinutes","gcd","decToFraction","decimalNumber","imageBlobToUrl","blobObj","Blob","fauxBlob","encoding","dateDayDifference","dateA","dateB","setHours","getTime","copyObj","shareCanvas","mimetype","toBlob","blob","filesArray","File","fileName","share","title","files","handleClick","clickEvent","tagName","allowClick","createSvg","$2bd9b7b9bc92046d$export$c54fe3b9ecaa84cf","createElementNS","elementType","childrenArr","BbLog","LocalStorage","mix","distSquared","lenSquared","pointsToAngleRad","pointsToAngleDeg","rotate","rotateAround","center","rot","Matrix","Vec2","intDxy","fDx","fDy","roundEven","above","below","roundUneven","updateBounds","boundsInArea","projectPointOnLine","lineStart","lineEnd","PointLine","BezierLine","lastPoint","lastCallbackPoint","lastAngle","pointArr","lastDot","lastSpacing","spacing","controlsCallback","dir","pointM1","pointM2","pointM3","pointLine","curvePoints","p3","p4","getBezierPoints","tempSpacing","dAngle","addFinal","newP","SplineInterpolator","quadraticSplineInput","startVal","endVal","stepSize","dec","resultArr","copyCanvas","resultCanvas","drawImage","testShouldPixelate","transform","scaleX","scaleY","angleDeg","whSwapped","drawTransformedImageWithBounds","destCtx","transformImage","pixelated","save","imageSmoothingEnabled","imageSmoothingQuality","translate","restore","drawTransformedImageOnCanvas","baseCanvas","transformObj","angleDegree","createCheckerCanvas","createCheckerDataUrl","resizeCanvas","$3f0e2f35371c9852$export$59b33278b5b2fc8a","tmp1","tmp2","ew","eh","base2","oldW","oldH","newW","newH","oldWidthEx","oldHeightEx","newWidthEx","newHeightEx","getBase2Obj","buffer1","buffer2","bufferCtx","globalCompositeOperation","currentWidth","currentHeight","newWidth","newHeight","tmp","canvasCtx","tmp1Ctx","convertToAlphaChannelCanvas","imdat","getImageData","putImageData","HSV","RGB","CMYK","ColorConverter","testIsWhiteBestContrast","appendTextDiv","text","innerHTML","clearSelection","getSelection","sel","empty","removeAllRanges","selection","makeUnfocusable","textContent","className","onClick","onChange","customKeyArr","destroyEl","item1","isInputFocused","activeElement","setEventListener","KeyListener","PointerListener","sameKeys","comboAStr","comboBStr","EventChain","$12950380ec51f25d$exports","$b60fce38973759d6$var$historyInstance","$b60fce38973759d6$export$2a772a91f059c0f9","l","$b60fce38973759d6$export$1a1044741a812c67","dataArr","pauseStack","maxState","actionNumber","action","maxBefore","broadcast","bufferUpdate","canUndo","canRedo","$b60fce38973759d6$export$28b6f4d98dde9845","$dd0d395ff14a3e11$export$17eb8275e0c4cab8","$dd0d395ff14a3e11$export$f5386afdb763a67e","$9af4e57f47ebd9f2$exports","$dcc180593c631f6a$exports","$90c6410f4b764e9c$export$33e6c23ebe2ee669","$parcel$interopDefault","$90c6410f4b764e9c$export$d0d68bb9ed2c643d","$90c6410f4b764e9c$export$f02cbd868e2f57cf","$1ELdT","_callee","$8d7403abedf7cefa$export$991796128b2ca217","$8d7403abedf7cefa$export$508cb5675573f1fa","$4gaLD","objectSpread","langCode","_ctx","t0","t2","t3","documentElement","$8d7403abedf7cefa$var$activeLanguageCode","lang","langs","languages","language","$8d7403abedf7cefa$export$ea44c9eff2c31da6","$8d7403abedf7cefa$export$ce37e184d908d785","$9fd01211d0fde0a8$export$63b4813c5280c707","rootRootEl","decrease","xButton","bgEl","rootEl","wheelPrevent","onclick","btnElArr","increase","bottom","overflow","scrollContent","minHeight","flexDirection","justifyContent","alignItems","ignoreBackground","zIndex","titleHeight","lineHeight","background","boxShadow","boxClasses","boxEl","marginBottom","marginRight","flex","comboStr","clickOnEnterBtn","click","isPressed","autoFocus","buttonRowEl","flexWrap","marginTop","marginLeft","buttonName","iconUrl","btnClasses","primaries","iconImg","btn","scrollTo","clickOnEnter","closefunc","onscroll","$9fd01211d0fde0a8$export$129a32eedafa97c5","updateInterval","updatePos","onClose","elW","popupEl","offsetWidth","elH","offsetHeight","innerWidth","innerHeight","animationName","animationDuration","animationTimingFunction","borderRadius","titleEl","paddingLeft","tabindex","contentEl","$d82e0c66c1aaca81$export$48513f6b9f8ce62d","innerEl","checked","doHighlight","allowTab","tabIndex","onchange","$aa0ec58519fa7d10$export$b7e3ae3d7c15e42e","$eb01976a4bab51ce$export$ef9b1a59e592288f","selectEl","changeListener","cursor","fontSize","padding","colorScheme","isFocusable","optionArr","option","initValue","$5cde84e643fb89d6$export$b6d053cded550773","isActive","backgroundImage","image","isRadio","setValue","getElement","getValue","$459eb3dcb08ae3f8$export$7cc1012a658e6ad8","activeIndex","createOption","initId","radioEl","select","$504fb1429fb6b08c$exports","$12a3b74a8702bb1f$export$77219f67585650fa","isChecked","changeCallback","redraw","toggleDiv","backgroundColor","opacity","border","cssFloat","backgroundSize","backgroundRepeat","boxSizing","$0c2dd884393cffca$export$f8e41e222e32615d","isRightButton","$cf8be10874d1afb1$export$a1855b925e534de7","splineInterpolator","toLinearValue","useSpline","updateEnable","isEnabled","pointerEvents","getOutsideVal","linearValue","updateLabel","outVal","pLinearValue","toValue","formatFunc","getCode","labelCaption","control","elementWidth","isFinal","isChangeOnFinal","eventResMs","lastCallbackTime","virtualVal","deltaX","curve","elementHeight","curveArr","userSelect","controlInner","oncontextmenu","labelFontSize","pointerListener","pointerListenerTimeout","increaseValue","decreaseValue","config","setIsEnabled","isDisabled","$d87d9c3d890aa391$exports","$dada52d673c8c4ac$export$cc42e119007cb939","createRgbInputRow","labelStr","attributeStr","rowEl","labelEl","inputEl","lastValidRgb","previewEl","hexInput","hexRowEl","hexLabel","rgbArr","copyButton","execCommand","resultStr","$c68c945118ec05b8$exports","$3ac3f56275b45315$export$dcd33f7653c95f09","updateSV","canvasSV","gradient1","createLinearGradient","colleft","colright","addColorStop","updateSVPointer","heightSV","pointerSV","updateHPointer","pointerH","canvasH","heightH","gradH","col","borderLeft","borderRight","virtualHSV","svPointerId","svPointerListener","factor","hPointerId","hPointerListener","cleardiv","setColor","getColor","$0b17443c34517974$export$ac00cea56cec3037","param","redrawPoint","sliderPoint","sliderPos","isDragging","pointSize","sliderLine","isFirst","imaginaryPos","margin","transition","getEl","setActive","$a19b2655062f09b7$export$24ba9b81662d4366","buttonArr","setIsSelected","selectedIndex","colorArr","checkerUrl","sItem","initialIndex","colorButton","buttonSize","textAlign","$c8511e371b1e3768$export$c019608e5b5bb4cb","optionObj","classArr","isSmall","wrapperEl","selectedId","getIndex","initialId","changeOnInit","$ef7db05dd6990de0$exports","$c1a93a3cd82636c9$export$5ee0af1d5c87e856","uiState","removeProperty","isWide","updateUiState","angleIm","Image","verticalAlign","innerInnerEl","doPulse","animation","_this1","timeout3","timeout2","$01fcd0ed15aa4018$export$40175a5948a88a57","crop","resetCrop","updateCroppedCanvas","croppedCanvas","croppedImage","updateSelectionRect","selectionRect","thumbX","scaleW","thumbY","scaleH","toOriginalSpace","genCrop","topLeftP","bottomRightP","origTopLeftP","origBottomRightP","isReset","eventTarget","isNotCopy","previewWrapper","thumbSize","thumbCanvas","imageRendering","thumbCtx","startP","updateCropTimeout","startCrop","didMove","rect","doUpdate","getRect","getCroppedImage","$29b5feccd2d2b583$exports","$290273779befc857$exports","$c9e66dd752374216$exports","$eefc027d480794bc$exports","$79b149831b23734b$exports","$7069db2f5e23d00f$var$mx","$7069db2f5e23d00f$var$my","$7069db2f5e23d00f$var$fillRect","$7069db2f5e23d00f$var$moveIndex","$7069db2f5e23d00f$var$testAndFill","srcArr","targetArr","initRgba","tolerance","$7069db2f5e23d00f$export$13d50f258a8034f","rgbaArr","grow","isContiguous","px","py","tl","tr","br","bl","$7069db2f5e23d00f$var$floodFill","$01d7180c5d1d0fdf$export$71b514a25c47df50","shapeObj","lineWidth","globalAlpha","isEraser","fillRgb","strokeRgb","strokeStyle","isAngleSnap","r1","r2","pAngleDeg","pAngleDegSnapped","rotated","isFixedRatio","r11","r21","ry","rdX","rdY","isOutwards","x1r","y1r","x2r","y2r","x1f","y1f","x2f","y2f","beginPath","moveTo","lineTo","stroke","x1f1","y1f1","x2f1","y2f1","strokeRect","ellipse","$fdc12d72a3df9be9$export$482c90f94eb9717c","textStr","outer","align","fontFamily","font","fontWeight","isBold","fontStyle","isItalic","spanStr","whiteSpace","offsetTop","el1","fillText","innerText","isDebug","$089586a542a12f27$export$5f63a7b18dc4503a","project","layers","mixModeStr","$0621fc8724f6bfac$var$allowedMixModes","$0621fc8724f6bfac$export$9f4f73b1bd7c2f26","$0621fc8724f6bfac$export$4a819bde91671014","layerNrOffset","layerCanvasArr","pickCanvas","history","changeListenerArr","copy","origLayers","projectObj","addLayer","layerOpacity","updateIndices","pause","layerName","layerFill","tool","toCopyCanvas","getWidth","getHeight","getLayers","removeLayer","algorithm","clearRect","layerCanvas","layerContext","offX","offY","ctemp","layerCtx","fillColor","selected","isLayerLimitReached","doReturnNull","emitChange","layerBottomIndex","layerTopIndex","topOpacity","isHorizontal","isVertical","layerIndex","tempCtx","colorObj","compositeOperation","rgb","sampleStr","srcCtx","srcImageData","targetCtx","targetImageData","targetData","srcCanvas","getCompleteCanvas","srcIndex","imageData","canvasObj","imData","getProject","layer","compositeObj","$2f1281ced73ab1dc$export$6e1bedb2a6cdff30","blendMode","codes","darken","multiply","lighten","screen","overlay","exclusion","hue","saturation","luminosity","$d256278b259ca979$export$6b9252711ea5997f","rootElement","brushCircleOuter","brushCircleInner","pickerPreviewBorder","pickerPreviewCol","compassSize","compass","compassInner","compassBaseCircle","cx","cy","compassLineCircle","compassUpperTriangle","compassLowerTriangle","radius","isVisible","borderColor","$80355cd86714d4eb$exports","$af4bd35dd09c6bc7$exports","$dcb21ad65482955b$exports","$e847ce3420d58b93$exports","TMode","$d492af58f4721011$var$MIN_SCALE","$d492af58f4721011$var$TMode","$d492af58f4721011$export$6eaf6f7c0cc177fc","klCanvas","onViewChange","renderTargetCanvas","renderTargetCtx","renderWidth","renderHeight","compositeCanvas","compositeCtx","doResizeCanvas","oldTransformObj","targetTransformObj","highResTransformObj","renderedTransformObj","cursorPos","usesCssCursor","bgVisible","transformIsDirty","doAnimateTranslate","svgOverlay","emptyCanvas","isRepeat","currentInputProcessor","onKeyDown","Draw","Pick","Fill","Text","Shape","globalMode","inputProcessorObj","spaceHand","Hand","altPicker","zoom","onKeyUp","updateChangeListener","currentMode","renderTime","lastDrawEvent","linetoolProcessor","LinetoolProcessor","getMatrix","art","_this2","getRenderedTransform","matrix2","coords","matrix1","coords1","coords2","draw","reqFrame","updateCursor","getComboStr","resetInputProcessor","coord","workspaceToCanvasCoord","onFill","onText","shape","onShape","hand","HandGrabbing","Zoom","offsetX","offsetY","internalZoomByStep","lastRenderedState","changed","picker","pickedColor","getColorAt","onPick","updateColorPreview","Rotating","Rotate","centerObj","startAngleRad","dAngleRad","minimizeAngleRad","angleIsExtraSticky","pinchZoomer","PinchZoomer","snapAngleRad","oldTransform","fitView","mainDoubleTapper","DoubleTapper","middleDoubleTapper","twoFingerTap","NFingerTapper","onUndo","threeFingerTap","onRedo","pointerEventChain","OnePointerLimiter","CoalescedExploder","_this3","brushRadius","animationFrameRequested","lastRenderTime","requestAnimationFrame","updateLoop","resetView","addChangeListener","modeInt","doForce","oldMode","oldIsHand","currentIsHand","stepNum","centerX","centerY","newStep","newScale","effectiveFactor","transformA","transformB","blendFactor","centerPosA","canvasToWorkspaceCoord","centerPosB","mixedPos","renderContext","workspacePointArr","borderSize","layerArr","getLayersFast","updateCompass","snapDegIncrement","maxDistDeg","modDeg","doRedrawCanvas","newState","doRender","elapsedFrames","checkChange","testBgVisible","mixTransformObj","render","klC","oldWidth","oldHeight","setSize","modeStr","diameter","hideBrushCursorTimeout","doAnimate","canvasPointsArr","boundsObj","boundsWidth","boundsHeight","isRelative","oldAngleRad","tx","ty","$6faa9d948ec87f40$export$e258ade1648009b7","$0370167ee97a20d9$var$snapToPixel","$0370167ee97a20d9$var$copyTransform","$0370167ee97a20d9$var$toTransformSpace","$0370167ee97a20d9$var$toImageSpace","$92a9f6bfb9d7bc4c$exports","$0370167ee97a20d9$export$79a74567acf241b0","scaled","corners","minSnapDist","cornerCursors","gripSize","edgeSize","edges","isConstrained","snapX","snapY","snappingEnabled","ratio","transEl","boundsEl","pointerRemainder","isInverted","boundsStartP","boundsPointerListener","snap","iP","distX","distY","projected","dist1","updateCornerPositions","updateDOM","virtualPos","offsetArr","tinyOffset","constrainCorner","snapCorner","tP","indexes","updateTransformViaCorners","updateScaled","angleOffset","tfD","ti","dimension","restoreRatio","angleGrip","anglePointerListener","snapDeg","iX","iY","cornerIndex","flip","widthChanged","heightChanged","angle90","newHeight1","skipCallback","transformOrigin","$48f5d87739d28bf9$export$205c2dd29f8a66b5","updatePreview","freeTransform","getTransform","destCanvas","previewLayerArr","transformIndex","initTransform","klCanvasPreview","previewFit","imageWidth","imageHeight","innerWrapper","transformSize","move","setPos","setAngleDeg","setTransformFit","fit","setTransformCenter","getTransformation","getIsPixelated","$de496a1759b04ed9$export$71ed2b85d4ca43d3","transformTop","grips","maxH","transformRight","maxW","transformBottom","transformLeft","commit","cornerElArr","outline","thirdsHorizontal","thirdsVertical","gripCursors","outlinePointerListener","borderTop","borderBottom","gripOverlay","edge0PointerListener","edge1PointerListener","edge2PointerListener","edge3PointerListener","corner0PointerListener","corner1PointerListener","corner2PointerListener","corner3PointerListener","setTransform","setScale","showThirds","$b41439e3fea0651c$exports","$cb3aaeb3a58f7d7c$exports","$76563f6e74526975$exports","$41280af56d21f45e$exports","$21cee9d2108fa201$exports","$9fde1dd3d788b540$exports","$cdbb060e02863566$exports","$bc8e3a87f49bb798$exports","$6ca1b2a19ea58649$exports","$1953aedfee4582ba$exports","$18c597dee53260ff$export$a0a40f8a0b8fee15","createDropdownButton","dropdownWrapper","backgroundPosition","show","setIsSmall","smallMargin","onClickDropdownBtn","closeDropdown","currentActiveIndex","updateButton","showDropdown","isOpen","dropdownBtnArr","arrowButton","activeButton","titleArr","activeButtonIm","imArr","openTimeout","startX","startY","flexGrow","elementFromPoint","$9957ba13be626ba1$exports","borderBottomLeftRadius","borderBottomRightRadius","activeStr","getActive","$4d9233fe18df58e1$exports","$28e88fae400b163b$exports","$6cdf226a1e9ba4a9$exports","$3528a4fa0ac31d1a$exports","$76f6dc646cf33977$exports","$bfddd096068431f3$exports","$a2acc6d20328475a$exports","$eb91842e7be644fc$exports","$360ec47b33d95aa7$exports","$0cdf6ff522b9e993$exports","$8032ae955ddf56db$exports","$0da626cf2fa80de3$exports","$4c230b0de5e1a470$var$kl2PsdMap","$4c230b0de5e1a470$var$psd2KlMap","$4c230b0de5e1a470$var$init","$4c230b0de5e1a470$export$6df36f0c42d2440f","$4c230b0de5e1a470$export$4e3b1f7d3ad623b4","$4c230b0de5e1a470$export$3d649861c4b13fa2","psdObj","addWarning","warningStr","warningArr","getMixModeStr","prepareMask","maskCanvas","defaultColor","groupMaskCtx","bitsPerChannel","layerCount","countWithinGroup","groupObj","clipping","adjustment","convertGroup","psdGroupObj","groupCanvas","groupCtx","groupOpacity","hidden","groupMixModeStr","mask","hasClipping","innerArr","innerItem","innerCtx","clippingCanvas","clippingCtx","clippingItem","effects","clippingCanvas1","clippingCtx1","clippingItem1","$4c230b0de5e1a470$export$56493bf279c387b3","klPsd","$41164c8aeaf53227$var$indexedDbIsSupported","indexedDB","$41164c8aeaf53227$var$dbNameStr","$41164c8aeaf53227$var$storageNameStr","$41164c8aeaf53227$export$1347f8be1f25c479","$41164c8aeaf53227$var$execIndexedDBTransaction","actionFunction","successCallback","errorCallback","onError","errorStr","hasFinished","requestObj","onupgradeneeded","createObjectStore","keyPath","createIndex","unique","onsuccess","databaseObj","transactionObj","storeObj","objectStoreNames","contains","deleteDatabase","transaction","objectStore","e2","e3","oncomplete","$41164c8aeaf53227$export$1448a0dd0d3fde8e","$41164c8aeaf53227$export$21ade4eb935254aa","storageProject","put","$41164c8aeaf53227$export$42ffd38884aecdac","$e994bada23cd6691$exports","$60b1103595563539$exports","$32323eb4fa9515b5$exports","$f6361cf50333dfa4$exports","$bb5a6d3d9698f59f$exports","$e6c0ddbcf2b820f0$exports","$2a8947b3c2a2baa7$exports","$dda2b490552737f3$exports","$1a2be19242ab7bec$exports","$e7dbd12ed499b83e$exports","$1e155aa91eacb1fa$exports","$94ec70227e2ba91c$exports","$058f7817cd1e3fbf$exports","$805be15a1e91c0ee$export$7a4e0b62a5d854bc","isLoaded","$805be15a1e91c0ee$export$395d33c8e06b92c9","glBrightnessContrast","buttonLabel","webgl","updateContext","icon","getDialog","inEmbed","cropExtend","neededWithWebGL","glCurves","glHueSaturation","invert","isInstant","glPerspective","resize","glTiltShift","toAlpha","ieFails","glBlur","glUnsharpMask","$805be15a1e91c0ee$var$updateNames","$dfc47a34ad9bc378$var$myModule","$dfc47a34ad9bc378$var$Grad","dot2","$dfc47a34ad9bc378$var$grad3","$dfc47a34ad9bc378$var$p","$dfc47a34ad9bc378$var$perm","$dfc47a34ad9bc378$var$gradP","$dfc47a34ad9bc378$var$F2","$dfc47a34ad9bc378$var$G2","simplex2","xin","yin","j1","gi0","gi1","gi2","$dfc47a34ad9bc378$export$d3022aad56692482","$f875015ce1aeb4d3$export$74a44bbc21d06a28","scaleFac","createImageData","sFac2","noisePattern","centerDist","$f875015ce1aeb4d3$var$udSegment","ba","pa","$f875015ce1aeb4d3$export$eaa218d5d17c8f1c","pDist","centerSize","transitionSize","$ff6c1f784f50f5d5$export$d116ae91f77f1f19","$02d77b8dd5755328$var$cellSize","$02d77b8dd5755328$var$clamp","$02d77b8dd5755328$export$9659db8d01dd5313","isTesting","blending","settingLockLayerAlpha","settingSizePressure","settingOpacityPressure","blendCol","blendMix","lastInput","lastInput2","redrawBounds","cells","getTouchedCells","isTouched","drawCells","touchedCells","cellsW","getCellsWidth","cell","cellOffsetX","cellOffsetY","cellWidth","cellHeight","inCellBounds","tmpCtx","alpha","ar","ag","ab","aa","sliceBounds","randI","randLen","randArr","samples","samplesSquared","sampleOffsets","sharpness","invSharpness","sharpnessSubtrahend","sizeSquared","distDivisor","alphaMinuend","slicedBounds","ri","alphaO","invAlphaO","alphaU","underR","underG","underB","underR1","underG1","underB1","newAlpha","localPressure","localOpacity","drawBuffer","localColNew","localSize","bdist","calcSpacing","avgX","avgY","mixr","mixg","mixb","average","localColOld","avgParams","prepDot","copyFromCanvas","getAverage","bezierCallback","updateRedrawBounds","bezierLine","drawDot","historyEntry","actions","totalCells","drawChangedCells","continueLine","mouseDist","eX","eY","loopDist","$c214fbe9e4fc15b0$var$sampleCanvas","$c214fbe9e4fc15b0$var$sampleCtx","$78ad817c60f81b7c$var$CELL_SIZE","$78ad817c60f81b7c$var$smudge","cSize","brush","cX","cY","aIndex","aP","bP","softnessPx","pixel","ai","bi","ix","iy","fac2","alphaLock","bx1","bx2","iy4","yStart","ix4","iy1","yStart1","x21","ix1","iy2","yStart2","x3","x22","ix2","y3","iy3","yStart3","x4","x23","ix3","$78ad817c60f81b7c$export$c9f800961903deab","$9cbe98d1fb398012$export$6e4a713ddcda1e5e","DecoyKlHistory","settingColor","settingSize","settingSpacing","settingOpacity","settingHasSizePressure","settingHasOpacityPressure","completeRedrawBounds","copiedCells","copyImageData","imWidth","imHeight","$78ad817c60f81b7c$var$prepSmudge","drawArr","dotCallback","localSpacing","ImageData","lineToolLastDot","updateCompleteRedrawBounds","historyIm","tmpCanvas","settingColorStr","$348fcce123898af9$export$38b08aa4ea8f61c6","settingIsEraser","settingMode","settingDistort","settingXSymmetry","settingYSymmetry","settingGradient","$aoONY","Path2D","startAtTop","gradient","minY","maxY","lineJoin","distort","drawShape","historyCanvas","$42ac5b30ad65dabb$export$7d68cd8857639377","PenBrush","historyEntry1","updateAlphaCanvas","settingAlphaId","ALPHA_CIRCLE","ALPHA_SQUARE","instructionArr","alphaCanvas128","alphaCanvas64","alphaCanvas32","alphaOpacityArr","before","arc","twoPI","closePath","targetMipmap","ALPHA_CHALK","startLine","goLine","endLine","drawLineSegment","setAlpha","setContext","setHistory","setOpacity","setSpacing","sizePressure","opacityPressure","setLockAlpha","getSpacing","getSize","getOpacity","getLockAlpha","BlendBrush","SketchyBrush","lastX","lastY","settingBlending","settingScale","sketchySeed","setSeed","getSeed","mixmode","c1","getBlending","setBlending","getScale","p_x","p_y","preMixedColor","mixx","mixy","mixw","mixh","countmix","mixed","PixelBrush","ditherPattern","updateDither","ditherCtx","ditherArr","createPattern","ditherCanvas","plotLine","skipFirst","settingUseDither","sX","sY","plotCubicBezierLine","isOverThreshold","d2","d3","cubicCurveOverThreshold","controlCallback","controlObj","setIsEraser","setUseDither","getIsEraser","getUseDither","ChemyBrush","SmudgeBrush","EraserBrush","isBaseLayer","isTransparentBG","radgrad","createRadialGradient","oFac","opacity1","started","setTransparentBG","$e8a5c017c49bb311$export$5ec472fd0ce20d84","$14f024e6e181bdb7$exports","brushInterface","alphaNames","$8b6ca25eb0830594$export$a0d4983f3b0b5c8e","tooltip","sizeSlider","opacitySlider","Ui","updateAlphas","alphas","currentAlpha","spacingSpline","onSizeChange","lockAlphaToggle","onOpacityChange","pressureSizeToggle","pressureOpacityToggle","alphaWrapper","increaseSize","decreaseSize","getBrush","$36c9133a962011fe$exports","$2e3c50106ba150d5$export$156bb4fe8f4bcb4b","blendingSlider","setSizePressure","setOpacityPressure","$c3c013a39a526dfb$exports","$94537af75923b9e3$export$ffae56164d1bde68","blendSlider","scaleSlider","$6b7e58a373407d6c$exports","$9519e739bc9666ee$export$d001f3406562d07","eraserToggle","ditherToggle","toggleRow","$1bab7cec8acf693f$exports","$d6fc2ded7d9d56db$export$cf481ecf227135a8","isTransparentBg","transparencyToggle","getIsTransparentBg","$d353667c2afdf3f6$exports","$1045b9bae2ffbbb4$export$84831662ba707e7a","$442237b1ac4d013a$exports","$14dc4cf18966a4f4$export$2358c75ad3c15b2d","$18456e8104a5a825$export$80819a93636ebb04","getMode","actualIconSize","iconSize","modeOptions","setMode","onConfigChange","mirrorXToggle","halfSize","getXSymmetry","setXSymmetry","mirrorYToggle","getYSymmetry","setYSymmetry","gradientToggle","getGradient","setGradient","$7de2f0eab7a9ead7$export$f1561c72be54c6a7","penBrush","blendBrush","sketchyBrush","pixelBrush","chemyBrush","smudgeBrush","eraserBrush","$6f92981a32875bca$export$5334e08b3589fc5c","isEmbed","linkEl","popup","isMaxHeight","$142eacf53b1eb43d$export$3dff5655255b5729","inputs","ignoreFocus","$0e681e75eb3cab30$export$9c72cf485ef46673","projectStore","saveReminder","klRootEl","gridTemplateColumns","gridTemplateRows","gap","gridTemplateAreas","gridArea","isBroken","ageEl","textSize","storeEl","clearEl","onUpdate","timestamp","thumbnail","updateThumb","updateAge","readResult","read","ageStr","age","disabled","maxWidth","maxHeight","resetButtons","$e3587a28373f51f9$export$b3fb17ae4345ac8f","base64Str","binStr","atob","buf","$3ee249752703e788$var$loadImage","onabort","$3ee249752703e788$export$f3c1ac6650038646","createThumbnail","HTMLCanvasElement","$14b343f2c12ca9c5$var$makeAsync","$14b343f2c12ca9c5$export$93d91060b9af7e2a","accessHasFailed","lowLevelRead","readStorageProject","storageProject1","createStorageProject","lowLevelStore","lowLevelClear","updateTimestamp","$01ce2e23a2667e77$export$a2647fbf5f056b0a","exportType","onExportTypeChange","onFileSelect","onSaveImageToComputer","onNewImage","onShareImage","onUpload","onCopyToClipboard","createSpacer","clearer","line","filemenu","newButton","saveButton","importButton","multiple","accept","exportTypeWrapper","exportTypeSelect","importWrapper","innerMask","importFakeButton","createImportButton","Select","saveNote","fileBrowserStorage","refresh","$0d10046ca7f6fbd0$export$3f17d740ad471e50","klColorSlider","layerManager","setCurrentLayer","klCanvasWorkspace","handUi","getCurrentColor","getKlMaxCanvasSize","getKlCanvas","getCurrentLayerCtx","statusOverlay","isInit","createButton","filterKey","filterArr","applyFilter","out","secondaryColorRGB","getSecondaryRGB","filterDialog1","currentColorRgb","secondaryColorRgb","filterDialog","getInput","finishedDialog","getLayer","getSelected","getAngleDeg","createDisabledButton","appName","addGroup","groupArr","targetEl","filters","filterLib","filterLibStatus","groupA","groupB","filterKey1","hrEl","webglnote","$6349b006a6604e1b$var$upload","imgurKey","_upload","img","gif","labelText","response","formData","$7402917bb53361f0$exports","FormData","Authorization","json","$ae23cd0c3e53f398$var$agPsdLazy","_loadAgPsd","$06e8423858d08972$export$befc6437ad34b28a","showReminder","changeTitle","oldActionNumber","remindersShowed","onBeforeUnload","returnValue","getActionNumber","visibilityState","historyDist","lastReminderResetAt","showSaveReminderToast","addListener","unsavedInterval","isSoft","$6a5d08130f9e8bfe$exports","XMLHttpRequest","responseType","g1","send","d1","a2","initMouseEvent","f1","a1","saveAs","HTMLAnchorElement","webkitURL","download","rel","msSaveOrOpenBlob","autoBom","warn","HTMLElement","safari","FileReader","onloadend","readAsDataURL","amd","FileSaver","$956d06d740fc5053$export$75e7b60500bb415b","getExportType","filenameBase","saveImage","filename","mimeType","taixuong","mimeType2","fullCanvas","exportDialog","fileBase","fnameArr","layerArr1","psdConfig","PSD","blendKlToPsd","loadAgPsd","agPsdLazy","writePsdBuffer","$48534f13b7192dff$export$5cebd3bb2d68229a","brushUiObj","layerPreview","getInitState","setCurrentLayerCtx","getCurrentBrush","doIgnore","ignoreTest","undo","initState","oldSize","getLayerContext","brushes","b4","b1","b2","id1","b3","renameLayer","setLayer","setLastDrawEvent","redo","b8","p5","b5","p6","b6","id2","b7","currentLayerIndex","getLayerIndex","logParam","localCurrentLayerCtx","p7","p8","b9","p9","b10","id3","b11","$53cc60fd413705d6$export$272bfd3ef9ef2f48","onSetColor","onSetSize","onSetOpacity","onGetColor","onGetSize","onGetOpacity","onGetSliderConfig","subscriberArr","skipSubscriber","sliderConfig","emitColor","$208ac7f514ce7fd0$exports","$90cfbc9767944d56$exports","$5562b5b6c391a7ca$export$5d396b237bd33221","onLeftRight","customAbout","getLanguage","preferredLanguageRow","languageSelect","languageHint","licenses","overflowY","brushesUI","BrushSettingService","KlCanvas","drawProject","WorkspaceSvgOverlay","KlCanvasWorkspace","KlCanvasPreview","UndoRedoCatchup","renderText","floodFillBits","ShapeTool","downX","downY","downAngleRad","onMove","$4c230b0de5e1a470$exports","setDbName","indexedDb","$41164c8aeaf53227$exports","ProjectStore","SaveToComputer","calcSliderFalloffFactor","Checkbox","ImageToggle","ImageRadioList","RadioList","penPressureToggle","KlSlider","HexColorDialog","KlColorSlider","updatePrimaryHSV","hsv","primaryColorHSV","updateSVCanvas","hueStop","svHeight","setColPreview","divPreview","primaryColorRGB","pickerButton","hexButton","updateSecondaryColor","secondaryColorBtn","swapColors","secondaryColorHSV","controlH","pickCallback","outputDiv","startValue","svWrapper","svSvg","DOMParser","parseFromString","getElementById","divH","SVContainer","isPicking","pickingDone","cv","createHueBg","setPickCallback","setHeight","getOutputElement","KlSmallColorSlider","PointSlider","ColorOptions","Options","BoxToggle","StatusOverlay","CropCopy","FreeTransform","FreeTransformCanvas","Cropper","LayerPreview","layerObj","largeCanvasAnimationTimeout","nameLabelEl","opacityEl","lastDrawnSize","canvasDimensions","canvasSize","animationCanvas","animationCanvasCtx","animationCanvasCheckerPattern","animationCount","animationLength","animate","drawLargeCanvas","lastDrawnState","largeCanvasIsVisible","largeCanvasSize","largeCanvas","largeCanvasCtx","largeCanvasCheckerPattern","largeCanvasWrapper","removeLargeCanvas","largeCanvasAnimationDurationMs","contentWrapperEl","canvasWrapperEl","minWidth","nameWrapper","nameFadeEl","clickableEl","webkitTouchCallout","showLargeCanvas","setIsVisible","currentState","klCanvasLayerObj","setUiState","stateStr","colA","colB","durationMs","FittedImage","KlImageDropper","rootCounter","optionLayerCounter","optionImageCounter","testAcceptType","dataTransfer","types","updateOptions","optionLayerEl","optionImageEl","paddingTop","textShadow","optionStyle","enabledTest","optionStr","onDrop","OverlayToolspace","updateColor","colorSlider","selectedColorEl","updateUI","mousePos","sizeObj","hHeight","sliderHeight","queuedObj","brushSettingService","subscriptionFunc","initialColor","getSliderConfig","ToolspaceTopRow","extraPadding","contain","logoButton","logoImg","onNew","onImport","onSave","onShare","onHelp","ToolDropdown","ToolspaceToolRow","doEmit","currentActiveStr","toolDropdown","handButton","onActivate","doLighten","doMirror","createTriangleButton","svg","viewBox","preserveAspectRatio","defs","in","stdDeviation","dx","dy","in2","operator","k2","k3","svgTriangleLeft","class","onLeft","svgTriangleRight","onRight","leftPointerListener","rightPointerListener","leftIm","leftImage","rightIm","rightImage","setIsEnabledLeft","setIsEnabledRight","zoomInNOutButton","onZoomIn","onZoomOut","zoomInButton","zoomOutButton","undoNRedoButton","undoButton","redoButton","setEnableZoomIn","setEnableZoomOut","setEnableUndo","setEnableRedo","ToolspaceStabilizerRow","strengthSelect","onSelect","setDeltaValue","TabRow","createTab","pTabObj","useAccent","onOpen","openedTabObj","tabDiv","openedTabObj1","roundRight","roundLeft","tabArr","roundSize","tabId","getOpenedTabId","ToolspaceCollapser","directionStr","setDirection","dirStr","BrowserStorageUi","SaveReminder","ToolspaceScroller","$951e508110f8a437$export$42a534af7eb650e8","toolspace","upBtn","downBtn","upInterval","scrollBy","downInterval","childList","subtree","scrollHeight","dialogCounter","Popup","aboutDiv","aniToggle","imageContainer","coverImage","coverSize","aniTimeout","boxSize","ontouchstart","ontouchmove","ontouchend","clipboardDialog","cropCallback","showCrop","toClipboard","imgURL","cropCopy","clipboard","ClipboardItem","topWrapper","KeyEvent","rectObj","showImportAsLayerDialog","freeTransformCanvas","noteEl","originalSizeBtn","fitSizeBtn","centerBtn","klCanvasLayerArr","importImage","buttonStr","newImageDialog","createRatioSize","ratioX","ratioY","maxCanvasSize","updateRatio","widthInput","heightInput","commonRatios","reducedArr","closestRatio","closestDistance","ratioWrapper","realw","U","HCF","preview","currentColor","secondaryColor","canvasWidth","canvasHeight","workspaceWidth","workspaceHeight","onConfirm","onCancel","newImDiv","widthWrapper","heightWrapper","widthUnit","heightUnit","templateWrapper","presetFitBtn","presetCurrentBtn","presetSquareBtn","presetLandscapeBtn","presetPortraitBtn","presetOversizeBtn","sizeObj1","backgroundRGBA","colorOptionsArr","colorOptions","previewcell","onkeyup","secondRow","secondRowLeft","textToolDialog","textCtx","textCanvas","colorRGBA","textInput","alignRadioList","italicToggle","boldToggle","sizeInput","fontSelect","rotatedXY","rotatedWH","fitBounds","zoomFac","previewCanvas","layersCtx","targetCanvas","previewCtx","checkerPattern","layersCanvas","changeZoomFac","zoomInBtn","canZoom","zoomOutBtn","onScroll","isSmallWidth","isSmallHeight","touchAction","previewPointerListener","row2n3Wrapper","modeWrapper","fontPointerListener","zoomWrapper","sizePointerListener","placeholder","showImportImageDialog","resolutionEl","updateResolution","maxSize","flattenCheckbox","doFlatten","noteStyle","psdWarningArr","contentArr","warningMap","showWarnings","noteEl1","cropRect","cropObj","showIframePopup","imgurUpload","inputTitle","inputDescription","rows","labelTitle","labelDescription","tos","typeRadio","outDiv","infoHint","deletehash","HandUi","scaleEl","angleEl","resetButton","onReset","fitButton","onFit","leftRotateButton","onAngleChange","resetAngleButton","rightRotateButton","pIsVisible","pScale","FillUi","colorDiv","toleranceSlider","modeSelect","growWrapper","growSelect","selectRow","contiguousToggle","paddingRight","getTolerance","getSample","getGrow","getContiguous","TextUi","ShapeUi","updatePreviews","strokeWidth","lineWidthSlider","squish","rectStrokeSvgRect","rectFilledSvgRect","ellipseStrokeSvgEllipse","ellipseFilledSvgEllipse","lineSvgLine","fixedToggle","previewPadding","previewSize","snapToggle","rectStrokeSvg","rectFilledSvg","ellipseStrokeSvg","ellipseFilledSvg","lineSvg","shapeOptions","outwardsToggle","getShape","getLineWidth","getIsOutwards","getIsFixed","getIsSnap","FileTab","FilterTab","SettingsTab","klLayerManager","p_canvas","p_func","p_rootDiv","oldHistoryState","row","clearBtn","suggestions","suggestionBtns","createLayerList","updatefunc","createLayerEntry","layercanvas","layerElArr","posY","innerLayer","container1","container2","spot","oldOpacity","thumbDimensions","thumb","thc","lname","ondblclick","opacityLabel","sliderValue","isLast","largeThumbCanvas","largeThumbDiv","largeThumbInDocument","largeThumbInTimeout","largeThumbTimeout","dragstart","freshSelection","lastpos","isSelected","div1","activateLayer","updateLayersVerticalPosition","posToSpot","newSpot","oldSpot","selectedSpotIndex","layerListEl","firstChild","child","updateHeight","layerHeight","layerSpacing","newspot","posy","oldSpotIndex","newSpotIndex","moveLayer","mergeBtn","listdiv","disableButtons","enableButtons","div2","addnewBtn","duplicateBtn","removeBtn","renameBtn","clearboth","duplicateLayer","spacer","topCanvas","alphaCanvas","bottomCanvas","mergeDialog","mergeLayers","setMixMode","historyState","activeLayerSpotIndex","spotIndex","klHistory","$b37f5cd553722692$export$665d2c76b1eb8459","submitButton","onSubmit","helpButton","leftRightButton","$fca35583bfaa35b6$export$5ec472fd0ce20d84","$5eb53faa48338ac6$export$68ae324f2f6c6252","gl1","lo","hi","wrapTexture","texture","loadContentsOf","texture1","Texture1","fromElement","initialize","UNSIGNED_BYTE","getExtension","testTexture","RGBA","FLOAT","drawTo","spareTexture","extraTexture","flippedShader","Shader1","isInitialized","use","getDefaultShader","drawRect","simpleShader","shader","uniforms","textureIn","textureOut","swapWith","node","contents","getPixelArray","readPixels","getSquareToQuad","dx1","dy1","dx2","dy2","dx3","dy3","det","getInverse","warpShader","warp","brightnessContrast","brightness","contrast","splineInterpolate","interpolator","curves","red","green","blue","initFromBytes","textures","denoise","texSize","hueSaturation","noise","amount","sepia","unsharpMask","strength","ensureFormat","triangleBlur","originalTexture","unuse","vibrance","vignette","lensBlur","lensBlurPrePass","randomShaderFunc","lensBlur0","lensBlur1","lensBlur2","power","delta0","delta1","tiltShift","endX","endY","blurRadius","gradientRadius","zoomBlur","colorHalftone","dotScreen","edgeWork","edgeWork1","edgeWork2","hexagonalPixelate","ink","bulgePinch","matrixWarp","inverse","useTextureSpace","perspective","after","swirl","replaceRGBA","oldGetExtension","oldGetSupportedExtensions","OESTextureFloatLinear","getSupportedExtensions","framebuffer","createFramebuffer","byteTexture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","floatTexture","LINEAR","program","createProgram","vertexShader","createShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","shaderSource","compileShader","attachShader","linkProgram","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STREAM_DRAW","enableVertexAttribArray","vertexAttribPointer","useProgram","viewport","drawArrays","POINTS","supportsOESTextureFloatLinear","WebGLRenderingContext","$OES_texture_float_linear$","extensions","isNumber","compileSource","testPrecisionSupport","Shader","defaultVertexSource","defaultFragmentSource","floatPrecision","nameStr","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","precisionType","format","getShaderPrecisionFormat","precision","vertexSource","fragmentSource","vertexAttribute","texCoordAttribute","HIGH_FLOAT","MEDIUM_FLOAT","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","getUniformLocation","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","uniformMatrix4fv","uniform1f","uniform1i","getParameter","VIEWPORT","vertexBuffer","STATIC_DRAW","texCoordBuffer","getAttribLocation","TRIANGLE_STRIP","defaultShader","Texture","getCanvas","videoWidth","videoHeight","deleteTexture","unit","activeTexture","TEXTURE0","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","fillUsingCanvas","toImage","pixels","$0e6e34a2063e157d$var$fxCanvas","$0e6e34a2063e157d$export$8c4423af32b21158","isContextLost","$1e763c481ba6cf00$export$80884bc1ac80aa1d","selectedLayerIndex","tempCanvas","glCanvas","brightnessSlider","contrastSlider","previewInnerWrapper","$21fb62da4f6e89f8$export$4630dcf80f8ceb88","updateInput","leftInput","rightInput","topInput","bottomInput","leftChanged","rightChanged","topChanged","bottomChanged","cropper","offsetWrapper","selectedRgbaObj","fit1","previewFactor","lrWrapper","tbWrapper","labelStyle","useRuleOfThirds","ruleOThirdsCheckbox","bgColorOverlay","updateBg","flexRow","$e250f451a2faf8b3$export$2e9081b953703a77","canvas1","ctx1","curves1","modeButtons","p0","areah","areaw","update2","curveArea","createPoint","lock","internalY","internalX","newX","newY","updateControl","outCurves","drawCurve","spline","getDiv","update1","$ccdfdabe80a86b91$exports","$ae0fd60a73f3b8a4$export$8a83211c878a3f1f","previewLayer","doFlipCanvas","horizontalCheckbox","verticalCheckbox","fcOption","paddingBottom","borderTopLeftRadius","flOption","borderTopRightRadius","optionWrapper","horizontal","vertical","flipCanvas","$b5e471d752989800$export$88005259b9a70e15","Saturation","hueSlider","saturationSlider","$d23471d9289cfec2$export$6897c284b6f9f4dc","$ed63f0c6c7ca7574$export$358acb0cd681f612","displayW","displayH","displayPreviewFactor","pointerListenerArr","bb","bc","bd","ac","ad","nob","updateAfter","beforeOption","afterOption","nobSize","$10cbc5ed6dda2660$exports","$2405b4796fda9858$export$4380c87abf28fdf","previewW","previewH","algorithmSelect","canvasWrapper","inputWrapper","constrainCheckbox","secondRowElement","$5b99ea702a5304d2$export$bb628a54ab399bc9","WebkitTransform","MozTransform","OTransform","msTransform","btnPlus","btnMinus","$e3bfa9cf59911118$export$83a0900d4b9a8022","fa","fb","blurSlider","gradientSlider","$dc2850290325f029$export$51186ad6e864892a","lastDrawnTransformStr","transformLayerCanvas","onInputsChanged","inputR","tempBounds","leftWrapper","rightWrapper","rotWrapper","actionBtnCss","buttonRow","getRatio","setConstrained","isSnapping","snappingCheckbox","setSnapping","checkboxWrapper","bottomRow","isPixelated","$6f2c67b7999657bb$export$5a82a801f025d40a","radiusSlider","$f7bb3cad91091576$export$a959f91352b242e2","strengthSlider","$e96a6eb511826b00$export$be1ee5ea42904fdc","sourceId","sourceOptions","$4bb0d03ef02dc0c0$var$importFilter","libObj","moduleObj","$40b8cea12adf584e$export$92433b641be3f7a","_klCanvasToPsdBlob","agPsd","$1fec221e7389b3ec$exports","$cf5d938ee512ebca$export$96f6458b62e4c2c","pProject","pOptions","translateSmoothing","sizeWatcher","emitSize","setCursorSize","importFinishedLoading","importedImage","getResizedDimensions","klMaxCanvasSize","importAsImage","resizedDimensions","importAsImagePsd","convertedPsdObj","cropObj1","cropCanvas","cropCanvas1","importAsLayer","activeLayerIndex","activeLayerContext","handleFileSelect","showWarningPsdFlattened","hasUnsupportedFile","extension","maxResolution","closeLoader","doShowLoader","loaderIsOpen","reader","readerResult","psd","readPsd","skipLayerImageData","skipThumbnail","skipCompositeImageData","convertedPsd","readAsArrayBuffer","updateCollapse","uiWidth","collapseThreshold","toolspaceCollapser","toolWidth","uiHeight","setWide","updateUi","toolspaceScroller","currentLayerCtx","currentBrush","showNewImageDialog","shareImage","updateMainTabVisibility","mainTabRow","toolspaceToolRow","oldTabId","keysArr","copyToClipboard","inputObj","updateBottomBar","bottomBar","toolspaceInner","bottomBarWrapper","embed","getLayerCount","currentBrushId","lastNonEraserBrushId","lineSmoothing","LineSmoothing","lineSanitizer","LineSanitizer","drawEventChain","requestFrame","textToolSettings","isDragDone","canvasX","canvasY","floodFill","fillUi","shapeTool","viewChangeObj","getMaxScale","getMinScale","undoRedoCatchup","zoomByStep","saveToComputer","comboOnlyContains","translateView","setAngle","clearLayer","brushTabRow","clipboardData","pasteEvent","getAsFile","retrieveImageFromClipboardAsBlob","imageBlob","URLObj","getAsString","pasteStr","crossOrigin","ui","emitOpacity","emitSliderConfig","overlayToolspace","toolspaceTopRow","onLogo","fileTab","triggerImport","p_color","doPick","brushDiv","toolspaceStabilizerRow","brushId","textUi","shapeUi","isDone","setComposite","filterTab","clctx","catchup","settingsTab","aboutEl","$a54e0202277e3340$exports","hide","scrollY","getPNG","getPSD","swapUiLeftRight","windowResizeWatcher","ResizeObserver","prevent","_callee1","onProjectLoaded","klApp","domIsLoaded","onDomLoaded","_onDomLoaded","loadingScreenEl","setLanguage"],"version":3,"file":"index.c56c2932.js.map"}